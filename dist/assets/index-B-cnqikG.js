var XI=t=>{throw TypeError(t)};var v2=(t,e,r)=>e.has(t)||XI("Cannot "+r);var as=(t,e,r)=>(v2(t,e,"read from private field"),r?r.call(t):e.get(t)),Uc=(t,e,r)=>e.has(t)?XI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Qa=(t,e,r,s)=>(v2(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),Vc=(t,e,r)=>(v2(t,e,"access private method"),r);var ZI=(t,e,r,s)=>({set _(i){Qa(t,e,i,r)},get _(){return as(t,e,s)}});function MG(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FG(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),r}var x2={exports:{}},Rv={},y2={exports:{}},Lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function $G(){if(QI)return Lr;QI=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(H){return H===null||typeof H!="object"?null:(H=h&&H[h]||H["@@iterator"],typeof H=="function"?H:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(H,$,W){this.props=H,this.context=$,this.refs=v,this.updater=W||p}g.prototype.isReactComponent={},g.prototype.setState=function(H,$){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,$,"setState")},g.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function b(){}b.prototype=g.prototype;function j(H,$,W){this.props=H,this.context=$,this.refs=v,this.updater=W||p}var w=j.prototype=new b;w.constructor=j,y(w,g.prototype),w.isPureReactComponent=!0;var C=Array.isArray,E=Object.prototype.hasOwnProperty,N={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function _(H,$,W){var te,ee={},ne=null,ae=null;if($!=null)for(te in $.ref!==void 0&&(ae=$.ref),$.key!==void 0&&(ne=""+$.key),$)E.call($,te)&&!A.hasOwnProperty(te)&&(ee[te]=$[te]);var ve=arguments.length-2;if(ve===1)ee.children=W;else if(1<ve){for(var xe=Array(ve),Se=0;Se<ve;Se++)xe[Se]=arguments[Se+2];ee.children=xe}if(H&&H.defaultProps)for(te in ve=H.defaultProps,ve)ee[te]===void 0&&(ee[te]=ve[te]);return{$$typeof:t,type:H,key:ne,ref:ae,props:ee,_owner:N.current}}function k(H,$){return{$$typeof:t,type:H.type,key:$,ref:H.ref,props:H.props,_owner:H._owner}}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function I(H){var $={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(W){return $[W]})}var T=/\/+/g;function R(H,$){return typeof H=="object"&&H!==null&&H.key!=null?I(""+H.key):$.toString(36)}function O(H,$,W,te,ee){var ne=typeof H;(ne==="undefined"||ne==="boolean")&&(H=null);var ae=!1;if(H===null)ae=!0;else switch(ne){case"string":case"number":ae=!0;break;case"object":switch(H.$$typeof){case t:case e:ae=!0}}if(ae)return ae=H,ee=ee(ae),H=te===""?"."+R(ae,0):te,C(ee)?(W="",H!=null&&(W=H.replace(T,"$&/")+"/"),O(ee,$,W,"",function(Se){return Se})):ee!=null&&(F(ee)&&(ee=k(ee,W+(!ee.key||ae&&ae.key===ee.key?"":(""+ee.key).replace(T,"$&/")+"/")+H)),$.push(ee)),1;if(ae=0,te=te===""?".":te+":",C(H))for(var ve=0;ve<H.length;ve++){ne=H[ve];var xe=te+R(ne,ve);ae+=O(ne,$,W,xe,ee)}else if(xe=f(H),typeof xe=="function")for(H=xe.call(H),ve=0;!(ne=H.next()).done;)ne=ne.value,xe=te+R(ne,ve++),ae+=O(ne,$,W,xe,ee);else if(ne==="object")throw $=String(H),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ae}function z(H,$,W){if(H==null)return H;var te=[],ee=0;return O(H,te,"","",function(ne){return $.call(W,ne,ee++)}),te}function q(H){if(H._status===-1){var $=H._result;$=$(),$.then(function(W){(H._status===0||H._status===-1)&&(H._status=1,H._result=W)},function(W){(H._status===0||H._status===-1)&&(H._status=2,H._result=W)}),H._status===-1&&(H._status=0,H._result=$)}if(H._status===1)return H._result.default;throw H._result}var B={current:null},K={transition:null},Y={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:K,ReactCurrentOwner:N};function J(){throw Error("act(...) is not supported in production builds of React.")}return Lr.Children={map:z,forEach:function(H,$,W){z(H,function(){$.apply(this,arguments)},W)},count:function(H){var $=0;return z(H,function(){$++}),$},toArray:function(H){return z(H,function($){return $})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Lr.Component=g,Lr.Fragment=r,Lr.Profiler=i,Lr.PureComponent=j,Lr.StrictMode=s,Lr.Suspense=c,Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Lr.act=J,Lr.cloneElement=function(H,$,W){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var te=y({},H.props),ee=H.key,ne=H.ref,ae=H._owner;if($!=null){if($.ref!==void 0&&(ne=$.ref,ae=N.current),$.key!==void 0&&(ee=""+$.key),H.type&&H.type.defaultProps)var ve=H.type.defaultProps;for(xe in $)E.call($,xe)&&!A.hasOwnProperty(xe)&&(te[xe]=$[xe]===void 0&&ve!==void 0?ve[xe]:$[xe])}var xe=arguments.length-2;if(xe===1)te.children=W;else if(1<xe){ve=Array(xe);for(var Se=0;Se<xe;Se++)ve[Se]=arguments[Se+2];te.children=ve}return{$$typeof:t,type:H.type,key:ee,ref:ne,props:te,_owner:ae}},Lr.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},Lr.createElement=_,Lr.createFactory=function(H){var $=_.bind(null,H);return $.type=H,$},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(H){return{$$typeof:l,render:H}},Lr.isValidElement=F,Lr.lazy=function(H){return{$$typeof:u,_payload:{_status:-1,_result:H},_init:q}},Lr.memo=function(H,$){return{$$typeof:d,type:H,compare:$===void 0?null:$}},Lr.startTransition=function(H){var $=K.transition;K.transition={};try{H()}finally{K.transition=$}},Lr.unstable_act=J,Lr.useCallback=function(H,$){return B.current.useCallback(H,$)},Lr.useContext=function(H){return B.current.useContext(H)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(H){return B.current.useDeferredValue(H)},Lr.useEffect=function(H,$){return B.current.useEffect(H,$)},Lr.useId=function(){return B.current.useId()},Lr.useImperativeHandle=function(H,$,W){return B.current.useImperativeHandle(H,$,W)},Lr.useInsertionEffect=function(H,$){return B.current.useInsertionEffect(H,$)},Lr.useLayoutEffect=function(H,$){return B.current.useLayoutEffect(H,$)},Lr.useMemo=function(H,$){return B.current.useMemo(H,$)},Lr.useReducer=function(H,$,W){return B.current.useReducer(H,$,W)},Lr.useRef=function(H){return B.current.useRef(H)},Lr.useState=function(H){return B.current.useState(H)},Lr.useSyncExternalStore=function(H,$,W){return B.current.useSyncExternalStore(H,$,W)},Lr.useTransition=function(){return B.current.useTransition()},Lr.version="18.3.1",Lr}var JI;function h4(){return JI||(JI=1,y2.exports=$G()),y2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e3;function BG(){if(e3)return Rv;e3=1;var t=h4(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,h={},f=null,p=null;d!==void 0&&(f=""+d),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(u in c)s.call(c,u)&&!a.hasOwnProperty(u)&&(h[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:l,key:f,ref:p,props:h,_owner:i.current}}return Rv.Fragment=r,Rv.jsx=o,Rv.jsxs=o,Rv}var t3;function zG(){return t3||(t3=1,x2.exports=BG()),x2.exports}var n=zG(),By={},b2={exports:{}},Ja={},j2={exports:{}},w2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function qG(){return r3||(r3=1,function(t){function e(K,Y){var J=K.length;K.push(Y);e:for(;0<J;){var H=J-1>>>1,$=K[H];if(0<i($,Y))K[H]=Y,K[J]=$,J=H;else break e}}function r(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var Y=K[0],J=K.pop();if(J!==Y){K[0]=J;e:for(var H=0,$=K.length,W=$>>>1;H<W;){var te=2*(H+1)-1,ee=K[te],ne=te+1,ae=K[ne];if(0>i(ee,J))ne<$&&0>i(ae,ee)?(K[H]=ae,K[ne]=J,H=ne):(K[H]=ee,K[te]=J,H=te);else if(ne<$&&0>i(ae,J))K[H]=ae,K[ne]=J,H=ne;else break e}}return Y}function i(K,Y){var J=K.sortIndex-Y.sortIndex;return J!==0?J:K.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var Y=r(d);Y!==null;){if(Y.callback===null)s(d);else if(Y.startTime<=K)s(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=r(d)}}function C(K){if(v=!1,w(K),!y)if(r(c)!==null)y=!0,q(E);else{var Y=r(d);Y!==null&&B(C,Y.startTime-K)}}function E(K,Y){y=!1,v&&(v=!1,b(_),_=-1),p=!0;var J=f;try{for(w(Y),h=r(c);h!==null&&(!(h.expirationTime>Y)||K&&!I());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var $=H(h.expirationTime<=Y);Y=t.unstable_now(),typeof $=="function"?h.callback=$:h===r(c)&&s(c),w(Y)}else s(c);h=r(c)}if(h!==null)var W=!0;else{var te=r(d);te!==null&&B(C,te.startTime-Y),W=!1}return W}finally{h=null,f=J,p=!1}}var N=!1,A=null,_=-1,k=5,F=-1;function I(){return!(t.unstable_now()-F<k)}function T(){if(A!==null){var K=t.unstable_now();F=K;var Y=!0;try{Y=A(!0,K)}finally{Y?R():(N=!1,A=null)}}else N=!1}var R;if(typeof j=="function")R=function(){j(T)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=T,R=function(){z.postMessage(null)}}else R=function(){g(T,0)};function q(K){A=K,N||(N=!0,R())}function B(K,Y){_=g(function(){K(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,q(E))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(K){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var J=f;f=Y;try{return K()}finally{f=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,Y){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=f;f=K;try{return Y()}finally{f=J}},t.unstable_scheduleCallback=function(K,Y,J){var H=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?H+J:H):J=H,K){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=J+$,K={id:u++,callback:Y,priorityLevel:K,startTime:J,expirationTime:$,sortIndex:-1},J>H?(K.sortIndex=J,e(d,K),r(c)===null&&K===r(d)&&(v?(b(_),_=-1):v=!0,B(C,J-H))):(K.sortIndex=$,e(c,K),y||p||(y=!0,q(E))),K},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(K){var Y=f;return function(){var J=f;f=Y;try{return K.apply(this,arguments)}finally{f=J}}}}(w2)),w2}var n3;function UG(){return n3||(n3=1,j2.exports=qG()),j2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3;function VG(){if(s3)return Ja;s3=1;var t=h4(),e=UG();function r(m){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+m,P=1;P<arguments.length;P++)x+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(m,x){o(m,x),o(m+"Capture",x)}function o(m,x){for(i[m]=x,m=0;m<x.length;m++)s.add(x[m])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function f(m){return c.call(h,m)?!0:c.call(u,m)?!1:d.test(m)?h[m]=!0:(u[m]=!0,!1)}function p(m,x,P,L){if(P!==null&&P.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return L?!1:P!==null?!P.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function y(m,x,P,L){if(x===null||typeof x>"u"||p(m,x,P,L))return!0;if(L)return!1;if(P!==null)switch(P.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(m,x,P,L,V,Z,ce){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=L,this.attributeNamespace=V,this.mustUseProperty=P,this.propertyName=m,this.type=x,this.sanitizeURL=Z,this.removeEmptyString=ce}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){g[m]=new v(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var x=m[0];g[x]=new v(x,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){g[m]=new v(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){g[m]=new v(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){g[m]=new v(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){g[m]=new v(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){g[m]=new v(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){g[m]=new v(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){g[m]=new v(m,5,!1,m.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function j(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var x=m.replace(b,j);g[x]=new v(x,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var x=m.replace(b,j);g[x]=new v(x,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var x=m.replace(b,j);g[x]=new v(x,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){g[m]=new v(m,1,!1,m.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){g[m]=new v(m,1,!1,m.toLowerCase(),null,!0,!0)});function w(m,x,P,L){var V=g.hasOwnProperty(x)?g[x]:null;(V!==null?V.type!==0:L||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(y(x,P,V,L)&&(P=null),L||V===null?f(x)&&(P===null?m.removeAttribute(x):m.setAttribute(x,""+P)):V.mustUseProperty?m[V.propertyName]=P===null?V.type===3?!1:"":P:(x=V.attributeName,L=V.attributeNamespace,P===null?m.removeAttribute(x):(V=V.type,P=V===3||V===4&&P===!0?"":""+P,L?m.setAttributeNS(L,x,P):m.setAttribute(x,P))))}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),K=Symbol.iterator;function Y(m){return m===null||typeof m!="object"?null:(m=K&&m[K]||m["@@iterator"],typeof m=="function"?m:null)}var J=Object.assign,H;function $(m){if(H===void 0)try{throw Error()}catch(P){var x=P.stack.trim().match(/\n( *(at )?)/);H=x&&x[1]||""}return`
`+H+m}var W=!1;function te(m,x){if(!m||W)return"";W=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Ye){var L=Ye}Reflect.construct(m,[],x)}else{try{x.call()}catch(Ye){L=Ye}m.call(x.prototype)}else{try{throw Error()}catch(Ye){L=Ye}m()}}catch(Ye){if(Ye&&L&&typeof Ye.stack=="string"){for(var V=Ye.stack.split(`
`),Z=L.stack.split(`
`),ce=V.length-1,Ee=Z.length-1;1<=ce&&0<=Ee&&V[ce]!==Z[Ee];)Ee--;for(;1<=ce&&0<=Ee;ce--,Ee--)if(V[ce]!==Z[Ee]){if(ce!==1||Ee!==1)do if(ce--,Ee--,0>Ee||V[ce]!==Z[Ee]){var ke=`
`+V[ce].replace(" at new "," at ");return m.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",m.displayName)),ke}while(1<=ce&&0<=Ee);break}}}finally{W=!1,Error.prepareStackTrace=P}return(m=m?m.displayName||m.name:"")?$(m):""}function ee(m){switch(m.tag){case 5:return $(m.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return m=te(m.type,!1),m;case 11:return m=te(m.type.render,!1),m;case 1:return m=te(m.type,!0),m;default:return""}}function ne(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case A:return"Fragment";case N:return"Portal";case k:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case I:return(m.displayName||"Context")+".Consumer";case F:return(m._context.displayName||"Context")+".Provider";case T:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case z:return x=m.displayName||null,x!==null?x:ne(m.type)||"Memo";case q:x=m._payload,m=m._init;try{return ne(m(x))}catch{}}return null}function ae(m){var x=m.type;switch(m.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=x.render,m=m.displayName||m.name||"",x.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(x);case 8:return x===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function ve(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function xe(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Se(m){var x=xe(m)?"checked":"value",P=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),L=""+m[x];if(!m.hasOwnProperty(x)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var V=P.get,Z=P.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return V.call(this)},set:function(ce){L=""+ce,Z.call(this,ce)}}),Object.defineProperty(m,x,{enumerable:P.enumerable}),{getValue:function(){return L},setValue:function(ce){L=""+ce},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function Pe(m){m._valueTracker||(m._valueTracker=Se(m))}function Ce(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var P=x.getValue(),L="";return m&&(L=xe(m)?m.checked?"true":"false":m.value),m=L,m!==P?(x.setValue(m),!0):!1}function He(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ke(m,x){var P=x.checked;return J({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:P??m._wrapperState.initialChecked})}function we(m,x){var P=x.defaultValue==null?"":x.defaultValue,L=x.checked!=null?x.checked:x.defaultChecked;P=ve(x.value!=null?x.value:P),m._wrapperState={initialChecked:L,initialValue:P,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function oe(m,x){x=x.checked,x!=null&&w(m,"checked",x,!1)}function it(m,x){oe(m,x);var P=ve(x.value),L=x.type;if(P!=null)L==="number"?(P===0&&m.value===""||m.value!=P)&&(m.value=""+P):m.value!==""+P&&(m.value=""+P);else if(L==="submit"||L==="reset"){m.removeAttribute("value");return}x.hasOwnProperty("value")?qe(m,x.type,P):x.hasOwnProperty("defaultValue")&&qe(m,x.type,ve(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(m.defaultChecked=!!x.defaultChecked)}function _e(m,x,P){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var L=x.type;if(!(L!=="submit"&&L!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+m._wrapperState.initialValue,P||x===m.value||(m.value=x),m.defaultValue=x}P=m.name,P!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,P!==""&&(m.name=P)}function qe(m,x,P){(x!=="number"||He(m.ownerDocument)!==m)&&(P==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+P&&(m.defaultValue=""+P))}var lt=Array.isArray;function vt(m,x,P,L){if(m=m.options,x){x={};for(var V=0;V<P.length;V++)x["$"+P[V]]=!0;for(P=0;P<m.length;P++)V=x.hasOwnProperty("$"+m[P].value),m[P].selected!==V&&(m[P].selected=V),V&&L&&(m[P].defaultSelected=!0)}else{for(P=""+ve(P),x=null,V=0;V<m.length;V++){if(m[V].value===P){m[V].selected=!0,L&&(m[V].defaultSelected=!0);return}x!==null||m[V].disabled||(x=m[V])}x!==null&&(x.selected=!0)}}function xt(m,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},x,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Ot(m,x){var P=x.value;if(P==null){if(P=x.children,x=x.defaultValue,P!=null){if(x!=null)throw Error(r(92));if(lt(P)){if(1<P.length)throw Error(r(93));P=P[0]}x=P}x==null&&(x=""),P=x}m._wrapperState={initialValue:ve(P)}}function Ze(m,x){var P=ve(x.value),L=ve(x.defaultValue);P!=null&&(P=""+P,P!==m.value&&(m.value=P),x.defaultValue==null&&m.defaultValue!==P&&(m.defaultValue=P)),L!=null&&(m.defaultValue=""+L)}function ut(m){var x=m.textContent;x===m._wrapperState.initialValue&&x!==""&&x!==null&&(m.value=x)}function Et(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(m,x){return m==null||m==="http://www.w3.org/1999/xhtml"?Et(x):m==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Kt,Vt=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,P,L,V){MSApp.execUnsafeLocalFunction(function(){return m(x,P,L,V)})}:m}(function(m,x){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=x;else{for(Kt=Kt||document.createElement("div"),Kt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Kt.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;x.firstChild;)m.appendChild(x.firstChild)}});function nr(m,x){if(x){var P=m.firstChild;if(P&&P===m.lastChild&&P.nodeType===3){P.nodeValue=x;return}}m.textContent=x}var Nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yr=["Webkit","ms","Moz","O"];Object.keys(Nt).forEach(function(m){Yr.forEach(function(x){x=x+m.charAt(0).toUpperCase()+m.substring(1),Nt[x]=Nt[m]})});function wr(m,x,P){return x==null||typeof x=="boolean"||x===""?"":P||typeof x!="number"||x===0||Nt.hasOwnProperty(m)&&Nt[m]?(""+x).trim():x+"px"}function xs(m,x){m=m.style;for(var P in x)if(x.hasOwnProperty(P)){var L=P.indexOf("--")===0,V=wr(P,x[P],L);P==="float"&&(P="cssFloat"),L?m.setProperty(P,V):m[P]=V}}var Xr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(m,x){if(x){if(Xr[m]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function di(m,x){if(m.indexOf("-")===-1)return typeof x.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rr=null;function ho(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ln=null,ui=null,Hi=null;function Un(m){if(m=ah(m)){if(typeof Ln!="function")throw Error(r(280));var x=m.stateNode;x&&(x=$f(x),Ln(m.stateNode,m.type,x))}}function gr(m){ui?Hi?Hi.push(m):Hi=[m]:ui=m}function Zr(){if(ui){var m=ui,x=Hi;if(Hi=ui=null,Un(m),x)for(m=0;m<x.length;m++)Un(x[m])}}function yc(m,x){return m(x)}function Hs(){}var Fa=!1;function fo(m,x,P){if(Fa)return m(x,P);Fa=!0;try{return yc(m,x,P)}finally{Fa=!1,(ui!==null||Hi!==null)&&(Hs(),Zr())}}function Zt(m,x){var P=m.stateNode;if(P===null)return null;var L=$f(P);if(L===null)return null;P=L[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(m=m.type,L=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!L;break e;default:m=!1}if(m)return null;if(P&&typeof P!="function")throw Error(r(231,x,typeof P));return P}var ga=!1;if(l)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){ga=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{ga=!1}function Gi(m,x,P,L,V,Z,ce,Ee,ke){var Ye=Array.prototype.slice.call(arguments,3);try{x.apply(P,Ye)}catch(gt){this.onError(gt)}}var Vn=!1,Hn=null,hi=!1,bc=null,Cl={onError:function(m){Vn=!0,Hn=m}};function mo(m,x,P,L,V,Z,ce,Ee,ke){Vn=!1,Hn=null,Gi.apply(Cl,arguments)}function po(m,x,P,L,V,Z,ce,Ee,ke){if(mo.apply(this,arguments),Vn){if(Vn){var Ye=Hn;Vn=!1,Hn=null}else throw Error(r(198));hi||(hi=!0,bc=Ye)}}function Qs(m){var x=m,P=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(P=x.return),m=x.return;while(m)}return x.tag===3?P:null}function go(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function va(m){if(Qs(m)!==m)throw Error(r(188))}function Go(m){var x=m.alternate;if(!x){if(x=Qs(m),x===null)throw Error(r(188));return x!==m?null:m}for(var P=m,L=x;;){var V=P.return;if(V===null)break;var Z=V.alternate;if(Z===null){if(L=V.return,L!==null){P=L;continue}break}if(V.child===Z.child){for(Z=V.child;Z;){if(Z===P)return va(V),m;if(Z===L)return va(V),x;Z=Z.sibling}throw Error(r(188))}if(P.return!==L.return)P=V,L=Z;else{for(var ce=!1,Ee=V.child;Ee;){if(Ee===P){ce=!0,P=V,L=Z;break}if(Ee===L){ce=!0,L=V,P=Z;break}Ee=Ee.sibling}if(!ce){for(Ee=Z.child;Ee;){if(Ee===P){ce=!0,P=Z,L=V;break}if(Ee===L){ce=!0,L=Z,P=V;break}Ee=Ee.sibling}if(!ce)throw Error(r(189))}}if(P.alternate!==L)throw Error(r(190))}if(P.tag!==3)throw Error(r(188));return P.stateNode.current===P?m:x}function jc(m){return m=Go(m),m!==null?bd(m):null}function bd(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var x=bd(m);if(x!==null)return x;m=m.sibling}return null}var jd=e.unstable_scheduleCallback,wd=e.unstable_cancelCallback,_u=e.unstable_shouldYield,tp=e.unstable_requestPaint,Wn=e.unstable_now,mv=e.unstable_getCurrentPriorityLevel,wc=e.unstable_ImmediatePriority,xf=e.unstable_UserBlockingPriority,Iu=e.unstable_NormalPriority,yf=e.unstable_LowPriority,rp=e.unstable_IdlePriority,Nd=null,$a=null;function Du(m){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(Nd,m,void 0,(m.current.flags&128)===128)}catch{}}var xa=Math.clz32?Math.clz32:sp,cs=Math.log,np=Math.LN2;function sp(m){return m>>>=0,m===0?32:31-(cs(m)/np|0)|0}var Sd=64,Nc=4194304;function Ad(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Ki(m,x){var P=m.pendingLanes;if(P===0)return 0;var L=0,V=m.suspendedLanes,Z=m.pingedLanes,ce=P&268435455;if(ce!==0){var Ee=ce&~V;Ee!==0?L=Ad(Ee):(Z&=ce,Z!==0&&(L=Ad(Z)))}else ce=P&~V,ce!==0?L=Ad(ce):Z!==0&&(L=Ad(Z));if(L===0)return 0;if(x!==0&&x!==L&&(x&V)===0&&(V=L&-L,Z=x&-x,V>=Z||V===16&&(Z&4194240)!==0))return x;if((L&4)!==0&&(L|=P&16),x=m.entangledLanes,x!==0)for(m=m.entanglements,x&=L;0<x;)P=31-xa(x),V=1<<P,L|=m[P],x&=~V;return L}function ku(m,x){switch(m){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(m,x){for(var P=m.suspendedLanes,L=m.pingedLanes,V=m.expirationTimes,Z=m.pendingLanes;0<Z;){var ce=31-xa(Z),Ee=1<<ce,ke=V[ce];ke===-1?((Ee&P)===0||(Ee&L)!==0)&&(V[ce]=ku(Ee,x)):ke<=x&&(m.expiredLanes|=Ee),Z&=~Ee}}function Cd(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function bf(){var m=Sd;return Sd<<=1,(Sd&4194240)===0&&(Sd=64),m}function jf(m){for(var x=[],P=0;31>P;P++)x.push(m);return x}function Sc(m,x,P){m.pendingLanes|=x,x!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,x=31-xa(x),m[x]=P}function pv(m,x){var P=m.pendingLanes&~x;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=x,m.mutableReadLanes&=x,m.entangledLanes&=x,x=m.entanglements;var L=m.eventTimes;for(m=m.expirationTimes;0<P;){var V=31-xa(P),Z=1<<V;x[V]=0,L[V]=-1,m[V]=-1,P&=~Z}}function Ou(m,x){var P=m.entangledLanes|=x;for(m=m.entanglements;P;){var L=31-xa(P),V=1<<L;V&x|m[L]&x&&(m[L]|=x),P&=~V}}var Qr=0;function Ru(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var ip,wf,ap,Ko,Ed,Ac=!1,Pd=[],Gn=null,Yo=null,vo=null,lr=new Map,Td=new Map,Xo=[],Zo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nf(m,x){switch(m){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":lr.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(x.pointerId)}}function Cc(m,x,P,L,V,Z){return m===null||m.nativeEvent!==Z?(m={blockedOn:x,domEventName:P,eventSystemFlags:L,nativeEvent:Z,targetContainers:[V]},x!==null&&(x=ah(x),x!==null&&wf(x)),m):(m.eventSystemFlags|=L,x=m.targetContainers,V!==null&&x.indexOf(V)===-1&&x.push(V),m)}function Lu(m,x,P,L,V){switch(x){case"focusin":return Gn=Cc(Gn,m,x,P,L,V),!0;case"dragenter":return Yo=Cc(Yo,m,x,P,L,V),!0;case"mouseover":return vo=Cc(vo,m,x,P,L,V),!0;case"pointerover":var Z=V.pointerId;return lr.set(Z,Cc(lr.get(Z)||null,m,x,P,L,V)),!0;case"gotpointercapture":return Z=V.pointerId,Td.set(Z,Cc(Td.get(Z)||null,m,x,P,L,V)),!0}return!1}function Mu(m){var x=Mc(m.target);if(x!==null){var P=Qs(x);if(P!==null){if(x=P.tag,x===13){if(x=go(P),x!==null){m.blockedOn=x,Ed(m.priority,function(){ap(P)});return}}else if(x===3&&P.stateNode.current.memoizedState.isDehydrated){m.blockedOn=P.tag===3?P.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Fu(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var P=Bu(m.domEventName,m.eventSystemFlags,x[0],m.nativeEvent);if(P===null){P=m.nativeEvent;var L=new P.constructor(P.type,P);Rr=L,P.target.dispatchEvent(L),Rr=null}else return x=ah(P),x!==null&&wf(x),m.blockedOn=P,!1;x.shift()}return!0}function op(m,x,P){Fu(m)&&P.delete(x)}function gv(){Ac=!1,Gn!==null&&Fu(Gn)&&(Gn=null),Yo!==null&&Fu(Yo)&&(Yo=null),vo!==null&&Fu(vo)&&(vo=null),lr.forEach(op),Td.forEach(op)}function El(m,x){m.blockedOn===x&&(m.blockedOn=null,Ac||(Ac=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gv)))}function xo(m){function x(V){return El(V,m)}if(0<Pd.length){El(Pd[0],m);for(var P=1;P<Pd.length;P++){var L=Pd[P];L.blockedOn===m&&(L.blockedOn=null)}}for(Gn!==null&&El(Gn,m),Yo!==null&&El(Yo,m),vo!==null&&El(vo,m),lr.forEach(x),Td.forEach(x),P=0;P<Xo.length;P++)L=Xo[P],L.blockedOn===m&&(L.blockedOn=null);for(;0<Xo.length&&(P=Xo[0],P.blockedOn===null);)Mu(P),P.blockedOn===null&&Xo.shift()}var ya=C.ReactCurrentBatchConfig,$u=!0;function _d(m,x,P,L){var V=Qr,Z=ya.transition;ya.transition=null;try{Qr=1,Ec(m,x,P,L)}finally{Qr=V,ya.transition=Z}}function Sf(m,x,P,L){var V=Qr,Z=ya.transition;ya.transition=null;try{Qr=4,Ec(m,x,P,L)}finally{Qr=V,ya.transition=Z}}function Ec(m,x,P,L){if($u){var V=Bu(m,x,P,L);if(V===null)Lf(m,x,L,Id,P),Nf(m,L);else if(Lu(V,m,x,P,L))L.stopPropagation();else if(Nf(m,L),x&4&&-1<Zo.indexOf(m)){for(;V!==null;){var Z=ah(V);if(Z!==null&&ip(Z),Z=Bu(m,x,P,L),Z===null&&Lf(m,x,L,Id,P),Z===V)break;V=Z}V!==null&&L.stopPropagation()}else Lf(m,x,L,null,P)}}var Id=null;function Bu(m,x,P,L){if(Id=null,m=ho(L),m=Mc(m),m!==null)if(x=Qs(m),x===null)m=null;else if(P=x.tag,P===13){if(m=go(x),m!==null)return m;m=null}else if(P===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null);return Id=m,null}function Af(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mv()){case wc:return 1;case xf:return 4;case Iu:case yf:return 16;case rp:return 536870912;default:return 16}default:return 16}}var yo=null,Ba=null,za=null;function lp(){if(za)return za;var m,x=Ba,P=x.length,L,V="value"in yo?yo.value:yo.textContent,Z=V.length;for(m=0;m<P&&x[m]===V[m];m++);var ce=P-m;for(L=1;L<=ce&&x[P-L]===V[Z-L];L++);return za=V.slice(m,1<L?1-L:void 0)}function bo(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function Xi(){return!0}function zu(){return!1}function _s(m){function x(P,L,V,Z,ce){this._reactName=P,this._targetInst=V,this.type=L,this.nativeEvent=Z,this.target=ce,this.currentTarget=null;for(var Ee in m)m.hasOwnProperty(Ee)&&(P=m[Ee],this[Ee]=P?P(Z):Z[Ee]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Xi:zu,this.isPropagationStopped=zu,this}return J(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var P=this.nativeEvent;P&&(P.preventDefault?P.preventDefault():typeof P.returnValue!="unknown"&&(P.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var P=this.nativeEvent;P&&(P.stopPropagation?P.stopPropagation():typeof P.cancelBubble!="unknown"&&(P.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),x}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=_s(Pc),Dd=J({},Pc,{view:0,detail:0}),Cf=_s(Dd),kd,qu,Qo,_c=J({},Dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_t,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Qo&&(Qo&&m.type==="mousemove"?(kd=m.screenX-Qo.screenX,qu=m.screenY-Qo.screenY):qu=kd=0,Qo=m),kd)},movementY:function(m){return"movementY"in m?m.movementY:qu}}),Uu=_s(_c),cp=J({},_c,{dataTransfer:0}),vv=_s(cp),Vu=J({},Dd,{relatedTarget:0}),Pl=_s(Vu),Ef=J({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),Ic=_s(Ef),Pf=J({},Pc,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),U=_s(Pf),ie=J({},Pc,{data:0}),Ae=_s(ie),Ie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ft(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=Qe[m])?!!x[m]:!1}function _t(){return ft}var Yt=J({},Dd,{key:function(m){if(m.key){var x=Ie[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=bo(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?$e[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_t,charCode:function(m){return m.type==="keypress"?bo(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?bo(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Nr=_s(Yt),br=J({},_c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mr=_s(br),Kn=J({},Dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_t}),ns=_s(Kn),ys=J({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),fi=_s(ys),Ws=J({},_c,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),jo=_s(Ws),ba=[9,13,27,32],qa=l&&"CompositionEvent"in window,Dc=null;l&&"documentMode"in document&&(Dc=document.documentMode);var Tf=l&&"TextEvent"in window&&!Dc,Hu=l&&(!qa||Dc&&8<Dc&&11>=Dc),Od=" ",Wu=!1;function Gu(m,x){switch(m){case"keyup":return ba.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var ss=!1;function Ku(m,x){switch(m){case"compositionend":return Rd(x);case"keypress":return x.which!==32?null:(Wu=!0,Od);case"textInput":return m=x.data,m===Od&&Wu?null:m;default:return null}}function Yu(m,x){if(ss)return m==="compositionend"||!qa&&Gu(m,x)?(m=lp(),za=Ba=yo=null,ss=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Hu&&x.locale!=="ko"?null:x.data;default:return null}}var Xu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zu(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Xu[m.type]:x==="textarea"}function _i(m,x,P,L){gr(L),x=fp(x,"onChange"),0<x.length&&(P=new Tc("onChange","change",null,P,L),m.push({event:P,listeners:x}))}var Ld=null,Tl=null;function dp(m){Of(m,0)}function Ii(m){var x=Hd(m);if(Ce(x))return m}function Qu(m,x){if(m==="change")return x}var _f=!1;if(l){var Ju;if(l){var Jo="oninput"in document;if(!Jo){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),Jo=typeof kc.oninput=="function"}Ju=Jo}else Ju=!1;_f=Ju&&(!document.documentMode||9<document.documentMode)}function Di(){Ld&&(Ld.detachEvent("onpropertychange",mi),Tl=Ld=null)}function mi(m){if(m.propertyName==="value"&&Ii(Tl)){var x=[];_i(x,Tl,m,ho(m)),fo(dp,x)}}function Oc(m,x,P){m==="focusin"?(Di(),Ld=x,Tl=P,Ld.attachEvent("onpropertychange",mi)):m==="focusout"&&Di()}function _l(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Ii(Tl)}function Il(m,x){if(m==="click")return Ii(x)}function eh(m,x){if(m==="input"||m==="change")return Ii(x)}function Dl(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var Jr=typeof Object.is=="function"?Object.is:Dl;function kl(m,x){if(Jr(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var P=Object.keys(m),L=Object.keys(x);if(P.length!==L.length)return!1;for(L=0;L<P.length;L++){var V=P[L];if(!c.call(x,V)||!Jr(m[V],x[V]))return!1}return!0}function pi(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function ja(m,x){var P=pi(m);m=0;for(var L;P;){if(P.nodeType===3){if(L=m+P.textContent.length,m<=x&&L>=x)return{node:P,offset:x-m};m=L}e:{for(;P;){if(P.nextSibling){P=P.nextSibling;break e}P=P.parentNode}P=void 0}P=pi(P)}}function Md(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?Md(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function If(){for(var m=window,x=He();x instanceof m.HTMLIFrameElement;){try{var P=typeof x.contentWindow.location.href=="string"}catch{P=!1}if(P)m=x.contentWindow;else break;x=He(m.document)}return x}function Fd(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}function $d(m){var x=If(),P=m.focusedElem,L=m.selectionRange;if(x!==P&&P&&P.ownerDocument&&Md(P.ownerDocument.documentElement,P)){if(L!==null&&Fd(P)){if(x=L.start,m=L.end,m===void 0&&(m=x),"selectionStart"in P)P.selectionStart=x,P.selectionEnd=Math.min(m,P.value.length);else if(m=(x=P.ownerDocument||document)&&x.defaultView||window,m.getSelection){m=m.getSelection();var V=P.textContent.length,Z=Math.min(L.start,V);L=L.end===void 0?Z:Math.min(L.end,V),!m.extend&&Z>L&&(V=L,L=Z,Z=V),V=ja(P,Z);var ce=ja(P,L);V&&ce&&(m.rangeCount!==1||m.anchorNode!==V.node||m.anchorOffset!==V.offset||m.focusNode!==ce.node||m.focusOffset!==ce.offset)&&(x=x.createRange(),x.setStart(V.node,V.offset),m.removeAllRanges(),Z>L?(m.addRange(x),m.extend(ce.node,ce.offset)):(x.setEnd(ce.node,ce.offset),m.addRange(x)))}}for(x=[],m=P;m=m.parentNode;)m.nodeType===1&&x.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<x.length;P++)m=x[P],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Bd=l&&"documentMode"in document&&11>=document.documentMode,wa=null,Ol=null,el=null,Rl=!1;function Ll(m,x,P){var L=P.window===P?P.document:P.nodeType===9?P:P.ownerDocument;Rl||wa==null||wa!==He(L)||(L=wa,"selectionStart"in L&&Fd(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),el&&kl(el,L)||(el=L,L=fp(Ol,"onSelect"),0<L.length&&(x=new Tc("onSelect","select",null,x,P),m.push({event:x,listeners:L}),x.target=wa)))}function Rc(m,x){var P={};return P[m.toLowerCase()]=x.toLowerCase(),P["Webkit"+m]="webkit"+x,P["Moz"+m]="moz"+x,P}var Js={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},Zi={},An={};l&&(An=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function pn(m){if(Zi[m])return Zi[m];if(!Js[m])return m;var x=Js[m],P;for(P in x)if(x.hasOwnProperty(P)&&P in An)return Zi[m]=x[P];return m}var is=pn("animationend"),bs=pn("animationiteration"),tl=pn("animationstart"),th=pn("transitionend"),zd=new Map,Df="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(m,x){zd.set(m,x),a(x,[m])}for(var rh=0;rh<Df.length;rh++){var ki=Df[rh],Ua=ki.toLowerCase(),up=ki[0].toUpperCase()+ki.slice(1);rl(Ua,"on"+up)}rl(is,"onAnimationEnd"),rl(bs,"onAnimationIteration"),rl(tl,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(th,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lc));function kf(m,x,P){var L=m.type||"unknown-event";m.currentTarget=P,po(L,x,void 0,m),m.currentTarget=null}function Of(m,x){x=(x&4)!==0;for(var P=0;P<m.length;P++){var L=m[P],V=L.event;L=L.listeners;e:{var Z=void 0;if(x)for(var ce=L.length-1;0<=ce;ce--){var Ee=L[ce],ke=Ee.instance,Ye=Ee.currentTarget;if(Ee=Ee.listener,ke!==Z&&V.isPropagationStopped())break e;kf(V,Ee,Ye),Z=ke}else for(ce=0;ce<L.length;ce++){if(Ee=L[ce],ke=Ee.instance,Ye=Ee.currentTarget,Ee=Ee.listener,ke!==Z&&V.isPropagationStopped())break e;kf(V,Ee,Ye),Z=ke}}}if(hi)throw m=bc,hi=!1,bc=null,m}function Cn(m,x){var P=x[Ji];P===void 0&&(P=x[Ji]=new Set);var L=m+"__bubble";P.has(L)||(Rf(x,m,2,!1),P.add(L))}function hp(m,x,P){var L=0;x&&(L|=4),Rf(P,m,L,x)}var nh="_reactListening"+Math.random().toString(36).slice(2);function qd(m){if(!m[nh]){m[nh]=!0,s.forEach(function(P){P!=="selectionchange"&&(ay.has(P)||hp(P,!1,m),hp(P,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[nh]||(x[nh]=!0,hp("selectionchange",!1,x))}}function Rf(m,x,P,L){switch(Af(x)){case 1:var V=_d;break;case 4:V=Sf;break;default:V=Ec}P=V.bind(null,x,P,m),V=void 0,!ga||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(V=!0),L?V!==void 0?m.addEventListener(x,P,{capture:!0,passive:V}):m.addEventListener(x,P,!0):V!==void 0?m.addEventListener(x,P,{passive:V}):m.addEventListener(x,P,!1)}function Lf(m,x,P,L,V){var Z=L;if((x&1)===0&&(x&2)===0&&L!==null)e:for(;;){if(L===null)return;var ce=L.tag;if(ce===3||ce===4){var Ee=L.stateNode.containerInfo;if(Ee===V||Ee.nodeType===8&&Ee.parentNode===V)break;if(ce===4)for(ce=L.return;ce!==null;){var ke=ce.tag;if((ke===3||ke===4)&&(ke=ce.stateNode.containerInfo,ke===V||ke.nodeType===8&&ke.parentNode===V))return;ce=ce.return}for(;Ee!==null;){if(ce=Mc(Ee),ce===null)return;if(ke=ce.tag,ke===5||ke===6){L=Z=ce;continue e}Ee=Ee.parentNode}}L=L.return}fo(function(){var Ye=Z,gt=ho(P),bt=[];e:{var mt=zd.get(m);if(mt!==void 0){var Rt=Tc,zt=m;switch(m){case"keypress":if(bo(P)===0)break e;case"keydown":case"keyup":Rt=Nr;break;case"focusin":zt="focus",Rt=Pl;break;case"focusout":zt="blur",Rt=Pl;break;case"beforeblur":case"afterblur":Rt=Pl;break;case"click":if(P.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Rt=Uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Rt=vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Rt=ns;break;case is:case bs:case tl:Rt=Ic;break;case th:Rt=fi;break;case"scroll":Rt=Cf;break;case"wheel":Rt=jo;break;case"copy":case"cut":case"paste":Rt=U;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Rt=Mr}var qt=(x&4)!==0,Os=!qt&&m==="scroll",Ue=qt?mt!==null?mt+"Capture":null:mt;qt=[];for(var Le=Ye,We;Le!==null;){We=Le;var St=We.stateNode;if(We.tag===5&&St!==null&&(We=St,Ue!==null&&(St=Zt(Le,Ue),St!=null&&qt.push(Mf(Le,St,We)))),Os)break;Le=Le.return}0<qt.length&&(mt=new Rt(mt,zt,null,P,gt),bt.push({event:mt,listeners:qt}))}}if((x&7)===0){e:{if(mt=m==="mouseover"||m==="pointerover",Rt=m==="mouseout"||m==="pointerout",mt&&P!==Rr&&(zt=P.relatedTarget||P.fromElement)&&(Mc(zt)||zt[gi]))break e;if((Rt||mt)&&(mt=gt.window===gt?gt:(mt=gt.ownerDocument)?mt.defaultView||mt.parentWindow:window,Rt?(zt=P.relatedTarget||P.toElement,Rt=Ye,zt=zt?Mc(zt):null,zt!==null&&(Os=Qs(zt),zt!==Os||zt.tag!==5&&zt.tag!==6)&&(zt=null)):(Rt=null,zt=Ye),Rt!==zt)){if(qt=Uu,St="onMouseLeave",Ue="onMouseEnter",Le="mouse",(m==="pointerout"||m==="pointerover")&&(qt=Mr,St="onPointerLeave",Ue="onPointerEnter",Le="pointer"),Os=Rt==null?mt:Hd(Rt),We=zt==null?mt:Hd(zt),mt=new qt(St,Le+"leave",Rt,P,gt),mt.target=Os,mt.relatedTarget=We,St=null,Mc(gt)===Ye&&(qt=new qt(Ue,Le+"enter",zt,P,gt),qt.target=We,qt.relatedTarget=Os,St=qt),Os=St,Rt&&zt)t:{for(qt=Rt,Ue=zt,Le=0,We=qt;We;We=Ud(We))Le++;for(We=0,St=Ue;St;St=Ud(St))We++;for(;0<Le-We;)qt=Ud(qt),Le--;for(;0<We-Le;)Ue=Ud(Ue),We--;for(;Le--;){if(qt===Ue||Ue!==null&&qt===Ue.alternate)break t;qt=Ud(qt),Ue=Ud(Ue)}qt=null}else qt=null;Rt!==null&&oy(bt,mt,Rt,qt,!1),zt!==null&&Os!==null&&oy(bt,Os,zt,qt,!0)}}e:{if(mt=Ye?Hd(Ye):window,Rt=mt.nodeName&&mt.nodeName.toLowerCase(),Rt==="select"||Rt==="input"&&mt.type==="file")var Ht=Qu;else if(Zu(mt))if(_f)Ht=eh;else{Ht=_l;var ir=Oc}else(Rt=mt.nodeName)&&Rt.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(Ht=Il);if(Ht&&(Ht=Ht(m,Ye))){_i(bt,Ht,P,gt);break e}ir&&ir(m,mt,Ye),m==="focusout"&&(ir=mt._wrapperState)&&ir.controlled&&mt.type==="number"&&qe(mt,"number",mt.value)}switch(ir=Ye?Hd(Ye):window,m){case"focusin":(Zu(ir)||ir.contentEditable==="true")&&(wa=ir,Ol=Ye,el=null);break;case"focusout":el=Ol=wa=null;break;case"mousedown":Rl=!0;break;case"contextmenu":case"mouseup":case"dragend":Rl=!1,Ll(bt,P,gt);break;case"selectionchange":if(Bd)break;case"keydown":case"keyup":Ll(bt,P,gt)}var ar;if(qa)e:{switch(m){case"compositionstart":var vr="onCompositionStart";break e;case"compositionend":vr="onCompositionEnd";break e;case"compositionupdate":vr="onCompositionUpdate";break e}vr=void 0}else ss?Gu(m,P)&&(vr="onCompositionEnd"):m==="keydown"&&P.keyCode===229&&(vr="onCompositionStart");vr&&(Hu&&P.locale!=="ko"&&(ss||vr!=="onCompositionStart"?vr==="onCompositionEnd"&&ss&&(ar=lp()):(yo=gt,Ba="value"in yo?yo.value:yo.textContent,ss=!0)),ir=fp(Ye,vr),0<ir.length&&(vr=new Ae(vr,m,null,P,gt),bt.push({event:vr,listeners:ir}),ar?vr.data=ar:(ar=Rd(P),ar!==null&&(vr.data=ar)))),(ar=Tf?Ku(m,P):Yu(m,P))&&(Ye=fp(Ye,"onBeforeInput"),0<Ye.length&&(gt=new Ae("onBeforeInput","beforeinput",null,P,gt),bt.push({event:gt,listeners:Ye}),gt.data=ar))}Of(bt,x)})}function Mf(m,x,P){return{instance:m,listener:x,currentTarget:P}}function fp(m,x){for(var P=x+"Capture",L=[];m!==null;){var V=m,Z=V.stateNode;V.tag===5&&Z!==null&&(V=Z,Z=Zt(m,P),Z!=null&&L.unshift(Mf(m,Z,V)),Z=Zt(m,x),Z!=null&&L.push(Mf(m,Z,V))),m=m.return}return L}function Ud(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function oy(m,x,P,L,V){for(var Z=x._reactName,ce=[];P!==null&&P!==L;){var Ee=P,ke=Ee.alternate,Ye=Ee.stateNode;if(ke!==null&&ke===L)break;Ee.tag===5&&Ye!==null&&(Ee=Ye,V?(ke=Zt(P,Z),ke!=null&&ce.unshift(Mf(P,ke,Ee))):V||(ke=Zt(P,Z),ke!=null&&ce.push(Mf(P,ke,Ee)))),P=P.return}ce.length!==0&&m.push({event:x,listeners:ce})}var Iw=/\r\n?/g,Dw=/\u0000|\uFFFD/g;function ly(m){return(typeof m=="string"?m:""+m).replace(Iw,`
`).replace(Dw,"")}function mp(m,x,P){if(x=ly(x),ly(m)!==x&&P)throw Error(r(425))}function sh(){}var Ff=null,Vd=null;function xv(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var yv=typeof setTimeout=="function"?setTimeout:void 0,cy=typeof clearTimeout=="function"?clearTimeout:void 0,dy=typeof Promise=="function"?Promise:void 0,kw=typeof queueMicrotask=="function"?queueMicrotask:typeof dy<"u"?function(m){return dy.resolve(null).then(m).catch(Ow)}:yv;function Ow(m){setTimeout(function(){throw m})}function bv(m,x){var P=x,L=0;do{var V=P.nextSibling;if(m.removeChild(P),V&&V.nodeType===8)if(P=V.data,P==="/$"){if(L===0){m.removeChild(V),xo(x);return}L--}else P!=="$"&&P!=="$?"&&P!=="$!"||L++;P=V}while(P);xo(x)}function Oi(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return m}function Va(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var P=m.data;if(P==="$"||P==="$!"||P==="$?"){if(x===0)return m;x--}else P==="/$"&&x++}m=m.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),nl="__reactFiber$"+Qi,ih="__reactProps$"+Qi,gi="__reactContainer$"+Qi,Ji="__reactEvents$"+Qi,Rw="__reactListeners$"+Qi,Lw="__reactHandles$"+Qi;function Mc(m){var x=m[nl];if(x)return x;for(var P=m.parentNode;P;){if(x=P[gi]||P[nl]){if(P=x.alternate,x.child!==null||P!==null&&P.child!==null)for(m=Va(m);m!==null;){if(P=m[nl])return P;m=Va(m)}return x}m=P,P=m.parentNode}return null}function ah(m){return m=m[nl]||m[gi],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Hd(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function $f(m){return m[ih]||null}var jv=[],Ml=-1;function wo(m){return{current:m}}function gn(m){0>Ml||(m.current=jv[Ml],jv[Ml]=null,Ml--)}function yn(m,x){Ml++,jv[Ml]=m.current,m.current=x}var Fc={},ei=wo(Fc),ea=wo(!1),Wd=Fc;function oh(m,x){var P=m.type.contextTypes;if(!P)return Fc;var L=m.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===x)return L.__reactInternalMemoizedMaskedChildContext;var V={},Z;for(Z in P)V[Z]=x[Z];return L&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=x,m.__reactInternalMemoizedMaskedChildContext=V),V}function ta(m){return m=m.childContextTypes,m!=null}function pp(){gn(ea),gn(ei)}function uy(m,x,P){if(ei.current!==Fc)throw Error(r(168));yn(ei,x),yn(ea,P)}function wv(m,x,P){var L=m.stateNode;if(x=x.childContextTypes,typeof L.getChildContext!="function")return P;L=L.getChildContext();for(var V in L)if(!(V in x))throw Error(r(108,ae(m)||"Unknown",V));return J({},P,L)}function Gd(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Fc,Wd=ei.current,yn(ei,m),yn(ea,ea.current),!0}function hy(m,x,P){var L=m.stateNode;if(!L)throw Error(r(169));P?(m=wv(m,x,Wd),L.__reactInternalMemoizedMergedChildContext=m,gn(ea),gn(ei),yn(ei,m)):gn(ea),yn(ea,P)}var Fl=null,Bf=!1,D=!1;function M(m){Fl===null?Fl=[m]:Fl.push(m)}function G(m){Bf=!0,M(m)}function Q(){if(!D&&Fl!==null){D=!0;var m=0,x=Qr;try{var P=Fl;for(Qr=1;m<P.length;m++){var L=P[m];do L=L(!0);while(L!==null)}Fl=null,Bf=!1}catch(V){throw Fl!==null&&(Fl=Fl.slice(m+1)),jd(wc,Q),V}finally{Qr=x,D=!1}}return null}var se=[],le=0,de=null,fe=0,ge=[],ye=0,De=null,Be=1,ze="";function Me(m,x){se[le++]=fe,se[le++]=de,de=m,fe=x}function ct(m,x,P){ge[ye++]=Be,ge[ye++]=ze,ge[ye++]=De,De=m;var L=Be;m=ze;var V=32-xa(L)-1;L&=~(1<<V),P+=1;var Z=32-xa(x)+V;if(30<Z){var ce=V-V%5;Z=(L&(1<<ce)-1).toString(32),L>>=ce,V-=ce,Be=1<<32-xa(x)+V|P<<V|L,ze=Z+m}else Be=1<<Z|P<<V|L,ze=m}function Xe(m){m.return!==null&&(Me(m,1),ct(m,1,0))}function Oe(m){for(;m===de;)de=se[--le],se[le]=null,fe=se[--le],se[le]=null;for(;m===De;)De=ge[--ye],ge[ye]=null,ze=ge[--ye],ge[ye]=null,Be=ge[--ye],ge[ye]=null}var Re=null,rt=null,Je=!1,at=null;function It(m,x){var P=cl(5,null,null,0);P.elementType="DELETED",P.stateNode=x,P.return=m,x=m.deletions,x===null?(m.deletions=[P],m.flags|=16):x.push(P)}function Ct(m,x){switch(m.tag){case 5:var P=m.type;return x=x.nodeType!==1||P.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(m.stateNode=x,Re=m,rt=Oi(x.firstChild),!0):!1;case 6:return x=m.pendingProps===""||x.nodeType!==3?null:x,x!==null?(m.stateNode=x,Re=m,rt=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(P=De!==null?{id:Be,overflow:ze}:null,m.memoizedState={dehydrated:x,treeContext:P,retryLane:1073741824},P=cl(18,null,null,0),P.stateNode=x,P.return=m,m.child=P,Re=m,rt=null,!0):!1;default:return!1}}function Qt(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Tt(m){if(Je){var x=rt;if(x){var P=x;if(!Ct(m,x)){if(Qt(m))throw Error(r(418));x=Oi(P.nextSibling);var L=Re;x&&Ct(m,x)?It(L,P):(m.flags=m.flags&-4097|2,Je=!1,Re=m)}}else{if(Qt(m))throw Error(r(418));m.flags=m.flags&-4097|2,Je=!1,Re=m}}}function Hr(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Re=m}function Wr(m){if(m!==Re)return!1;if(!Je)return Hr(m),Je=!0,!1;var x;if((x=m.tag!==3)&&!(x=m.tag!==5)&&(x=m.type,x=x!=="head"&&x!=="body"&&!xv(m.type,m.memoizedProps)),x&&(x=rt)){if(Qt(m))throw zr(),Error(r(418));for(;x;)It(m,x),x=Oi(x.nextSibling)}if(Hr(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8){var P=m.data;if(P==="/$"){if(x===0){rt=Oi(m.nextSibling);break e}x--}else P!=="$"&&P!=="$!"&&P!=="$?"||x++}m=m.nextSibling}rt=null}}else rt=Re?Oi(m.stateNode.nextSibling):null;return!0}function zr(){for(var m=rt;m;)m=Oi(m.nextSibling)}function Tr(){rt=Re=null,Je=!1}function vn(m){at===null?at=[m]:at.push(m)}var bn=C.ReactCurrentBatchConfig;function pr(m,x,P){if(m=P.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(r(309));var L=P.stateNode}if(!L)throw Error(r(147,m));var V=L,Z=""+m;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===Z?x.ref:(x=function(ce){var Ee=V.refs;ce===null?delete Ee[Z]:Ee[Z]=ce},x._stringRef=Z,x)}if(typeof m!="string")throw Error(r(284));if(!P._owner)throw Error(r(290,m))}return m}function Yn(m,x){throw m=Object.prototype.toString.call(x),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m))}function Ri(m){var x=m._init;return x(m._payload)}function ds(m){function x(Ue,Le){if(m){var We=Ue.deletions;We===null?(Ue.deletions=[Le],Ue.flags|=16):We.push(Le)}}function P(Ue,Le){if(!m)return null;for(;Le!==null;)x(Ue,Le),Le=Le.sibling;return null}function L(Ue,Le){for(Ue=new Map;Le!==null;)Le.key!==null?Ue.set(Le.key,Le):Ue.set(Le.index,Le),Le=Le.sibling;return Ue}function V(Ue,Le){return Ue=yh(Ue,Le),Ue.index=0,Ue.sibling=null,Ue}function Z(Ue,Le,We){return Ue.index=We,m?(We=Ue.alternate,We!==null?(We=We.index,We<Le?(Ue.flags|=2,Le):We):(Ue.flags|=2,Le)):(Ue.flags|=1048576,Le)}function ce(Ue){return m&&Ue.alternate===null&&(Ue.flags|=2),Ue}function Ee(Ue,Le,We,St){return Le===null||Le.tag!==6?(Le=u2(We,Ue.mode,St),Le.return=Ue,Le):(Le=V(Le,We),Le.return=Ue,Le)}function ke(Ue,Le,We,St){var Ht=We.type;return Ht===A?gt(Ue,Le,We.props.children,St,We.key):Le!==null&&(Le.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===q&&Ri(Ht)===Le.type)?(St=V(Le,We.props),St.ref=pr(Ue,Le,We),St.return=Ue,St):(St=Dy(We.type,We.key,We.props,null,Ue.mode,St),St.ref=pr(Ue,Le,We),St.return=Ue,St)}function Ye(Ue,Le,We,St){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==We.containerInfo||Le.stateNode.implementation!==We.implementation?(Le=h2(We,Ue.mode,St),Le.return=Ue,Le):(Le=V(Le,We.children||[]),Le.return=Ue,Le)}function gt(Ue,Le,We,St,Ht){return Le===null||Le.tag!==7?(Le=Kf(We,Ue.mode,St,Ht),Le.return=Ue,Le):(Le=V(Le,We),Le.return=Ue,Le)}function bt(Ue,Le,We){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=u2(""+Le,Ue.mode,We),Le.return=Ue,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case E:return We=Dy(Le.type,Le.key,Le.props,null,Ue.mode,We),We.ref=pr(Ue,null,Le),We.return=Ue,We;case N:return Le=h2(Le,Ue.mode,We),Le.return=Ue,Le;case q:var St=Le._init;return bt(Ue,St(Le._payload),We)}if(lt(Le)||Y(Le))return Le=Kf(Le,Ue.mode,We,null),Le.return=Ue,Le;Yn(Ue,Le)}return null}function mt(Ue,Le,We,St){var Ht=Le!==null?Le.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return Ht!==null?null:Ee(Ue,Le,""+We,St);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case E:return We.key===Ht?ke(Ue,Le,We,St):null;case N:return We.key===Ht?Ye(Ue,Le,We,St):null;case q:return Ht=We._init,mt(Ue,Le,Ht(We._payload),St)}if(lt(We)||Y(We))return Ht!==null?null:gt(Ue,Le,We,St,null);Yn(Ue,We)}return null}function Rt(Ue,Le,We,St,Ht){if(typeof St=="string"&&St!==""||typeof St=="number")return Ue=Ue.get(We)||null,Ee(Le,Ue,""+St,Ht);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case E:return Ue=Ue.get(St.key===null?We:St.key)||null,ke(Le,Ue,St,Ht);case N:return Ue=Ue.get(St.key===null?We:St.key)||null,Ye(Le,Ue,St,Ht);case q:var ir=St._init;return Rt(Ue,Le,We,ir(St._payload),Ht)}if(lt(St)||Y(St))return Ue=Ue.get(We)||null,gt(Le,Ue,St,Ht,null);Yn(Le,St)}return null}function zt(Ue,Le,We,St){for(var Ht=null,ir=null,ar=Le,vr=Le=0,bi=null;ar!==null&&vr<We.length;vr++){ar.index>vr?(bi=ar,ar=null):bi=ar.sibling;var cn=mt(Ue,ar,We[vr],St);if(cn===null){ar===null&&(ar=bi);break}m&&ar&&cn.alternate===null&&x(Ue,ar),Le=Z(cn,Le,vr),ir===null?Ht=cn:ir.sibling=cn,ir=cn,ar=bi}if(vr===We.length)return P(Ue,ar),Je&&Me(Ue,vr),Ht;if(ar===null){for(;vr<We.length;vr++)ar=bt(Ue,We[vr],St),ar!==null&&(Le=Z(ar,Le,vr),ir===null?Ht=ar:ir.sibling=ar,ir=ar);return Je&&Me(Ue,vr),Ht}for(ar=L(Ue,ar);vr<We.length;vr++)bi=Rt(ar,Ue,vr,We[vr],St),bi!==null&&(m&&bi.alternate!==null&&ar.delete(bi.key===null?vr:bi.key),Le=Z(bi,Le,vr),ir===null?Ht=bi:ir.sibling=bi,ir=bi);return m&&ar.forEach(function(bh){return x(Ue,bh)}),Je&&Me(Ue,vr),Ht}function qt(Ue,Le,We,St){var Ht=Y(We);if(typeof Ht!="function")throw Error(r(150));if(We=Ht.call(We),We==null)throw Error(r(151));for(var ir=Ht=null,ar=Le,vr=Le=0,bi=null,cn=We.next();ar!==null&&!cn.done;vr++,cn=We.next()){ar.index>vr?(bi=ar,ar=null):bi=ar.sibling;var bh=mt(Ue,ar,cn.value,St);if(bh===null){ar===null&&(ar=bi);break}m&&ar&&bh.alternate===null&&x(Ue,ar),Le=Z(bh,Le,vr),ir===null?Ht=bh:ir.sibling=bh,ir=bh,ar=bi}if(cn.done)return P(Ue,ar),Je&&Me(Ue,vr),Ht;if(ar===null){for(;!cn.done;vr++,cn=We.next())cn=bt(Ue,cn.value,St),cn!==null&&(Le=Z(cn,Le,vr),ir===null?Ht=cn:ir.sibling=cn,ir=cn);return Je&&Me(Ue,vr),Ht}for(ar=L(Ue,ar);!cn.done;vr++,cn=We.next())cn=Rt(ar,Ue,vr,cn.value,St),cn!==null&&(m&&cn.alternate!==null&&ar.delete(cn.key===null?vr:cn.key),Le=Z(cn,Le,vr),ir===null?Ht=cn:ir.sibling=cn,ir=cn);return m&&ar.forEach(function(LG){return x(Ue,LG)}),Je&&Me(Ue,vr),Ht}function Os(Ue,Le,We,St){if(typeof We=="object"&&We!==null&&We.type===A&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case E:e:{for(var Ht=We.key,ir=Le;ir!==null;){if(ir.key===Ht){if(Ht=We.type,Ht===A){if(ir.tag===7){P(Ue,ir.sibling),Le=V(ir,We.props.children),Le.return=Ue,Ue=Le;break e}}else if(ir.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===q&&Ri(Ht)===ir.type){P(Ue,ir.sibling),Le=V(ir,We.props),Le.ref=pr(Ue,ir,We),Le.return=Ue,Ue=Le;break e}P(Ue,ir);break}else x(Ue,ir);ir=ir.sibling}We.type===A?(Le=Kf(We.props.children,Ue.mode,St,We.key),Le.return=Ue,Ue=Le):(St=Dy(We.type,We.key,We.props,null,Ue.mode,St),St.ref=pr(Ue,Le,We),St.return=Ue,Ue=St)}return ce(Ue);case N:e:{for(ir=We.key;Le!==null;){if(Le.key===ir)if(Le.tag===4&&Le.stateNode.containerInfo===We.containerInfo&&Le.stateNode.implementation===We.implementation){P(Ue,Le.sibling),Le=V(Le,We.children||[]),Le.return=Ue,Ue=Le;break e}else{P(Ue,Le);break}else x(Ue,Le);Le=Le.sibling}Le=h2(We,Ue.mode,St),Le.return=Ue,Ue=Le}return ce(Ue);case q:return ir=We._init,Os(Ue,Le,ir(We._payload),St)}if(lt(We))return zt(Ue,Le,We,St);if(Y(We))return qt(Ue,Le,We,St);Yn(Ue,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Le!==null&&Le.tag===6?(P(Ue,Le.sibling),Le=V(Le,We),Le.return=Ue,Ue=Le):(P(Ue,Le),Le=u2(We,Ue.mode,St),Le.return=Ue,Ue=Le),ce(Ue)):P(Ue,Le)}return Os}var Is=ds(!0),on=ds(!1),vi=wo(null),xi=null,Xn=null,Ds=null;function ti(){Ds=Xn=xi=null}function ra(m){var x=vi.current;gn(vi),m._currentValue=x}function Ha(m,x,P){for(;m!==null;){var L=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,L!==null&&(L.childLanes|=x)):L!==null&&(L.childLanes&x)!==x&&(L.childLanes|=x),m===P)break;m=m.return}}function Zn(m,x){xi=m,Ds=Xn=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&x)!==0&&(Ya=!0),m.firstContext=null)}function js(m){var x=m._currentValue;if(Ds!==m)if(m={context:m,memoizedValue:x,next:null},Xn===null){if(xi===null)throw Error(r(308));Xn=m,xi.dependencies={lanes:0,firstContext:m}}else Xn=Xn.next=m;return x}var Na=null;function $c(m){Na===null?Na=[m]:Na.push(m)}function $l(m,x,P,L){var V=x.interleaved;return V===null?(P.next=P,$c(x)):(P.next=V.next,V.next=P),x.interleaved=P,ln(m,L)}function ln(m,x){m.lanes|=x;var P=m.alternate;for(P!==null&&(P.lanes|=x),P=m,m=m.return;m!==null;)m.childLanes|=x,P=m.alternate,P!==null&&(P.childLanes|=x),P=m,m=m.return;return P.tag===3?P.stateNode:null}var sl=!1;function gp(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nv(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Wa(m,x){return{eventTime:m,lane:x,tag:0,payload:null,callback:null,next:null}}function Ga(m,x,P){var L=m.updateQueue;if(L===null)return null;if(L=L.shared,(en&2)!==0){var V=L.pending;return V===null?x.next=x:(x.next=V.next,V.next=x),L.pending=x,ln(m,P)}return V=L.interleaved,V===null?(x.next=x,$c(L)):(x.next=V.next,V.next=x),L.interleaved=x,ln(m,P)}function Kd(m,x,P){if(x=x.updateQueue,x!==null&&(x=x.shared,(P&4194240)!==0)){var L=x.lanes;L&=m.pendingLanes,P|=L,x.lanes=P,Ou(m,P)}}function Ka(m,x){var P=m.updateQueue,L=m.alternate;if(L!==null&&(L=L.updateQueue,P===L)){var V=null,Z=null;if(P=P.firstBaseUpdate,P!==null){do{var ce={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};Z===null?V=Z=ce:Z=Z.next=ce,P=P.next}while(P!==null);Z===null?V=Z=x:Z=Z.next=x}else V=Z=x;P={baseState:L.baseState,firstBaseUpdate:V,lastBaseUpdate:Z,shared:L.shared,effects:L.effects},m.updateQueue=P;return}m=P.lastBaseUpdate,m===null?P.firstBaseUpdate=x:m.next=x,P.lastBaseUpdate=x}function Bl(m,x,P,L){var V=m.updateQueue;sl=!1;var Z=V.firstBaseUpdate,ce=V.lastBaseUpdate,Ee=V.shared.pending;if(Ee!==null){V.shared.pending=null;var ke=Ee,Ye=ke.next;ke.next=null,ce===null?Z=Ye:ce.next=Ye,ce=ke;var gt=m.alternate;gt!==null&&(gt=gt.updateQueue,Ee=gt.lastBaseUpdate,Ee!==ce&&(Ee===null?gt.firstBaseUpdate=Ye:Ee.next=Ye,gt.lastBaseUpdate=ke))}if(Z!==null){var bt=V.baseState;ce=0,gt=Ye=ke=null,Ee=Z;do{var mt=Ee.lane,Rt=Ee.eventTime;if((L&mt)===mt){gt!==null&&(gt=gt.next={eventTime:Rt,lane:0,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null});e:{var zt=m,qt=Ee;switch(mt=x,Rt=P,qt.tag){case 1:if(zt=qt.payload,typeof zt=="function"){bt=zt.call(Rt,bt,mt);break e}bt=zt;break e;case 3:zt.flags=zt.flags&-65537|128;case 0:if(zt=qt.payload,mt=typeof zt=="function"?zt.call(Rt,bt,mt):zt,mt==null)break e;bt=J({},bt,mt);break e;case 2:sl=!0}}Ee.callback!==null&&Ee.lane!==0&&(m.flags|=64,mt=V.effects,mt===null?V.effects=[Ee]:mt.push(Ee))}else Rt={eventTime:Rt,lane:mt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},gt===null?(Ye=gt=Rt,ke=bt):gt=gt.next=Rt,ce|=mt;if(Ee=Ee.next,Ee===null){if(Ee=V.shared.pending,Ee===null)break;mt=Ee,Ee=mt.next,mt.next=null,V.lastBaseUpdate=mt,V.shared.pending=null}}while(!0);if(gt===null&&(ke=bt),V.baseState=ke,V.firstBaseUpdate=Ye,V.lastBaseUpdate=gt,x=V.shared.interleaved,x!==null){V=x;do ce|=V.lane,V=V.next;while(V!==x)}else Z===null&&(V.shared.lanes=0);Vf|=ce,m.lanes=ce,m.memoizedState=bt}}function Yd(m,x,P){if(m=x.effects,x.effects=null,m!==null)for(x=0;x<m.length;x++){var L=m[x],V=L.callback;if(V!==null){if(L.callback=null,L=P,typeof V!="function")throw Error(r(191,V));V.call(L)}}}var lh={},Sa=wo(lh),ch=wo(lh),Bc=wo(lh);function zl(m){if(m===lh)throw Error(r(174));return m}function dh(m,x){switch(yn(Bc,x),yn(ch,m),yn(Sa,lh),m=x.nodeType,m){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:kt(null,"");break;default:m=m===8?x.parentNode:x,x=m.namespaceURI||null,m=m.tagName,x=kt(x,m)}gn(Sa),yn(Sa,x)}function il(){gn(Sa),gn(ch),gn(Bc)}function fy(m){zl(Bc.current);var x=zl(Sa.current),P=kt(x,m.type);x!==P&&(yn(ch,m),yn(Sa,P))}function Sv(m){ch.current===m&&(gn(Sa),gn(ch))}var Dn=wo(0);function No(m){for(var x=m;x!==null;){if(x.tag===13){var P=x.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||P.data==="$?"||P.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Av=[];function Cv(){for(var m=0;m<Av.length;m++)Av[m]._workInProgressVersionPrimary=null;Av.length=0}var vp=C.ReactCurrentDispatcher,xp=C.ReactCurrentBatchConfig,al=0,Mn=null,ws=null,us=null,uh=!1,ql=!1,hh=0,Mw=0;function ks(){throw Error(r(321))}function yp(m,x){if(x===null)return!1;for(var P=0;P<x.length&&P<m.length;P++)if(!Jr(m[P],x[P]))return!1;return!0}function zf(m,x,P,L,V,Z){if(al=Z,Mn=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,vp.current=m===null||m.memoizedState===null?lG:cG,m=P(L,V),ql){Z=0;do{if(ql=!1,hh=0,25<=Z)throw Error(r(301));Z+=1,us=ws=null,x.updateQueue=null,vp.current=dG,m=P(L,V)}while(ql)}if(vp.current=xy,x=ws!==null&&ws.next!==null,al=0,us=ws=Mn=null,uh=!1,x)throw Error(r(300));return m}function ol(){var m=hh!==0;return hh=0,m}function So(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?Mn.memoizedState=us=m:us=us.next=m,us}function Aa(){if(ws===null){var m=Mn.alternate;m=m!==null?m.memoizedState:null}else m=ws.next;var x=us===null?Mn.memoizedState:us.next;if(x!==null)us=x,ws=m;else{if(m===null)throw Error(r(310));ws=m,m={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},us===null?Mn.memoizedState=us=m:us=us.next=m}return us}function qf(m,x){return typeof x=="function"?x(m):x}function bp(m){var x=Aa(),P=x.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=m;var L=ws,V=L.baseQueue,Z=P.pending;if(Z!==null){if(V!==null){var ce=V.next;V.next=Z.next,Z.next=ce}L.baseQueue=V=Z,P.pending=null}if(V!==null){Z=V.next,L=L.baseState;var Ee=ce=null,ke=null,Ye=Z;do{var gt=Ye.lane;if((al&gt)===gt)ke!==null&&(ke=ke.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),L=Ye.hasEagerState?Ye.eagerState:m(L,Ye.action);else{var bt={lane:gt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};ke===null?(Ee=ke=bt,ce=L):ke=ke.next=bt,Mn.lanes|=gt,Vf|=gt}Ye=Ye.next}while(Ye!==null&&Ye!==Z);ke===null?ce=L:ke.next=Ee,Jr(L,x.memoizedState)||(Ya=!0),x.memoizedState=L,x.baseState=ce,x.baseQueue=ke,P.lastRenderedState=L}if(m=P.interleaved,m!==null){V=m;do Z=V.lane,Mn.lanes|=Z,Vf|=Z,V=V.next;while(V!==m)}else V===null&&(P.lanes=0);return[x.memoizedState,P.dispatch]}function zc(m){var x=Aa(),P=x.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=m;var L=P.dispatch,V=P.pending,Z=x.memoizedState;if(V!==null){P.pending=null;var ce=V=V.next;do Z=m(Z,ce.action),ce=ce.next;while(ce!==V);Jr(Z,x.memoizedState)||(Ya=!0),x.memoizedState=Z,x.baseQueue===null&&(x.baseState=Z),P.lastRenderedState=Z}return[Z,L]}function my(){}function Ev(m,x){var P=Mn,L=Aa(),V=x(),Z=!Jr(L.memoizedState,V);if(Z&&(L.memoizedState=V,Ya=!0),L=L.queue,Np(gy.bind(null,P,L,m),[m]),L.getSnapshot!==x||Z||us!==null&&us.memoizedState.tag&1){if(P.flags|=2048,Ca(9,Pv.bind(null,P,L,V,x),void 0,null),yi===null)throw Error(r(349));(al&30)!==0||py(P,x,V)}return V}function py(m,x,P){m.flags|=16384,m={getSnapshot:x,value:P},x=Mn.updateQueue,x===null?(x={lastEffect:null,stores:null},Mn.updateQueue=x,x.stores=[m]):(P=x.stores,P===null?x.stores=[m]:P.push(m))}function Pv(m,x,P,L){x.value=P,x.getSnapshot=L,fh(x)&&jp(m)}function gy(m,x,P){return P(function(){fh(x)&&jp(m)})}function fh(m){var x=m.getSnapshot;m=m.value;try{var P=x();return!Jr(m,P)}catch{return!0}}function jp(m){var x=ln(m,1);x!==null&&Gl(x,m,1,-1)}function Uf(m){var x=So();return typeof m=="function"&&(m=m()),x.memoizedState=x.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qf,lastRenderedState:m},x.queue=m,m=m.dispatch=oG.bind(null,Mn,m),[x.memoizedState,m]}function Ca(m,x,P,L){return m={tag:m,create:x,destroy:P,deps:L,next:null},x=Mn.updateQueue,x===null?(x={lastEffect:null,stores:null},Mn.updateQueue=x,x.lastEffect=m.next=m):(P=x.lastEffect,P===null?x.lastEffect=m.next=m:(L=P.next,P.next=m,m.next=L,x.lastEffect=m)),m}function Ul(){return Aa().memoizedState}function Ao(m,x,P,L){var V=So();Mn.flags|=m,V.memoizedState=Ca(1|x,P,void 0,L===void 0?null:L)}function Xd(m,x,P,L){var V=Aa();L=L===void 0?null:L;var Z=void 0;if(ws!==null){var ce=ws.memoizedState;if(Z=ce.destroy,L!==null&&yp(L,ce.deps)){V.memoizedState=Ca(x,P,Z,L);return}}Mn.flags|=m,V.memoizedState=Ca(1|x,P,Z,L)}function wp(m,x){return Ao(8390656,8,m,x)}function Np(m,x){return Xd(2048,8,m,x)}function vy(m,x){return Xd(4,2,m,x)}function Sp(m,x){return Xd(4,4,m,x)}function Ap(m,x){if(typeof x=="function")return m=m(),x(m),function(){x(null)};if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function K_(m,x,P){return P=P!=null?P.concat([m]):null,Xd(4,4,Ap.bind(null,x,m),P)}function Fw(){}function Y_(m,x){var P=Aa();x=x===void 0?null:x;var L=P.memoizedState;return L!==null&&x!==null&&yp(x,L[1])?L[0]:(P.memoizedState=[m,x],m)}function X_(m,x){var P=Aa();x=x===void 0?null:x;var L=P.memoizedState;return L!==null&&x!==null&&yp(x,L[1])?L[0]:(m=m(),P.memoizedState=[m,x],m)}function Z_(m,x,P){return(al&21)===0?(m.baseState&&(m.baseState=!1,Ya=!0),m.memoizedState=P):(Jr(P,x)||(P=bf(),Mn.lanes|=P,Vf|=P,m.baseState=!0),x)}function iG(m,x){var P=Qr;Qr=P!==0&&4>P?P:4,m(!0);var L=xp.transition;xp.transition={};try{m(!1),x()}finally{Qr=P,xp.transition=L}}function Q_(){return Aa().memoizedState}function aG(m,x,P){var L=vh(m);if(P={lane:L,action:P,hasEagerState:!1,eagerState:null,next:null},J_(m))eI(x,P);else if(P=$l(m,x,P,L),P!==null){var V=Pa();Gl(P,m,L,V),tI(P,x,L)}}function oG(m,x,P){var L=vh(m),V={lane:L,action:P,hasEagerState:!1,eagerState:null,next:null};if(J_(m))eI(x,V);else{var Z=m.alternate;if(m.lanes===0&&(Z===null||Z.lanes===0)&&(Z=x.lastRenderedReducer,Z!==null))try{var ce=x.lastRenderedState,Ee=Z(ce,P);if(V.hasEagerState=!0,V.eagerState=Ee,Jr(Ee,ce)){var ke=x.interleaved;ke===null?(V.next=V,$c(x)):(V.next=ke.next,ke.next=V),x.interleaved=V;return}}catch{}finally{}P=$l(m,x,V,L),P!==null&&(V=Pa(),Gl(P,m,L,V),tI(P,x,L))}}function J_(m){var x=m.alternate;return m===Mn||x!==null&&x===Mn}function eI(m,x){ql=uh=!0;var P=m.pending;P===null?x.next=x:(x.next=P.next,P.next=x),m.pending=x}function tI(m,x,P){if((P&4194240)!==0){var L=x.lanes;L&=m.pendingLanes,P|=L,x.lanes=P,Ou(m,P)}}var xy={readContext:js,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},lG={readContext:js,useCallback:function(m,x){return So().memoizedState=[m,x===void 0?null:x],m},useContext:js,useEffect:wp,useImperativeHandle:function(m,x,P){return P=P!=null?P.concat([m]):null,Ao(4194308,4,Ap.bind(null,x,m),P)},useLayoutEffect:function(m,x){return Ao(4194308,4,m,x)},useInsertionEffect:function(m,x){return Ao(4,2,m,x)},useMemo:function(m,x){var P=So();return x=x===void 0?null:x,m=m(),P.memoizedState=[m,x],m},useReducer:function(m,x,P){var L=So();return x=P!==void 0?P(x):x,L.memoizedState=L.baseState=x,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:x},L.queue=m,m=m.dispatch=aG.bind(null,Mn,m),[L.memoizedState,m]},useRef:function(m){var x=So();return m={current:m},x.memoizedState=m},useState:Uf,useDebugValue:Fw,useDeferredValue:function(m){return So().memoizedState=m},useTransition:function(){var m=Uf(!1),x=m[0];return m=iG.bind(null,m[1]),So().memoizedState=m,[x,m]},useMutableSource:function(){},useSyncExternalStore:function(m,x,P){var L=Mn,V=So();if(Je){if(P===void 0)throw Error(r(407));P=P()}else{if(P=x(),yi===null)throw Error(r(349));(al&30)!==0||py(L,x,P)}V.memoizedState=P;var Z={value:P,getSnapshot:x};return V.queue=Z,wp(gy.bind(null,L,Z,m),[m]),L.flags|=2048,Ca(9,Pv.bind(null,L,Z,P,x),void 0,null),P},useId:function(){var m=So(),x=yi.identifierPrefix;if(Je){var P=ze,L=Be;P=(L&~(1<<32-xa(L)-1)).toString(32)+P,x=":"+x+"R"+P,P=hh++,0<P&&(x+="H"+P.toString(32)),x+=":"}else P=Mw++,x=":"+x+"r"+P.toString(32)+":";return m.memoizedState=x},unstable_isNewReconciler:!1},cG={readContext:js,useCallback:Y_,useContext:js,useEffect:Np,useImperativeHandle:K_,useInsertionEffect:vy,useLayoutEffect:Sp,useMemo:X_,useReducer:bp,useRef:Ul,useState:function(){return bp(qf)},useDebugValue:Fw,useDeferredValue:function(m){var x=Aa();return Z_(x,ws.memoizedState,m)},useTransition:function(){var m=bp(qf)[0],x=Aa().memoizedState;return[m,x]},useMutableSource:my,useSyncExternalStore:Ev,useId:Q_,unstable_isNewReconciler:!1},dG={readContext:js,useCallback:Y_,useContext:js,useEffect:Np,useImperativeHandle:K_,useInsertionEffect:vy,useLayoutEffect:Sp,useMemo:X_,useReducer:zc,useRef:Ul,useState:function(){return zc(qf)},useDebugValue:Fw,useDeferredValue:function(m){var x=Aa();return ws===null?x.memoizedState=m:Z_(x,ws.memoizedState,m)},useTransition:function(){var m=zc(qf)[0],x=Aa().memoizedState;return[m,x]},useMutableSource:my,useSyncExternalStore:Ev,useId:Q_,unstable_isNewReconciler:!1};function Vl(m,x){if(m&&m.defaultProps){x=J({},x),m=m.defaultProps;for(var P in m)x[P]===void 0&&(x[P]=m[P]);return x}return x}function $w(m,x,P,L){x=m.memoizedState,P=P(L,x),P=P==null?x:J({},x,P),m.memoizedState=P,m.lanes===0&&(m.updateQueue.baseState=P)}var yy={isMounted:function(m){return(m=m._reactInternals)?Qs(m)===m:!1},enqueueSetState:function(m,x,P){m=m._reactInternals;var L=Pa(),V=vh(m),Z=Wa(L,V);Z.payload=x,P!=null&&(Z.callback=P),x=Ga(m,Z,V),x!==null&&(Gl(x,m,V,L),Kd(x,m,V))},enqueueReplaceState:function(m,x,P){m=m._reactInternals;var L=Pa(),V=vh(m),Z=Wa(L,V);Z.tag=1,Z.payload=x,P!=null&&(Z.callback=P),x=Ga(m,Z,V),x!==null&&(Gl(x,m,V,L),Kd(x,m,V))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var P=Pa(),L=vh(m),V=Wa(P,L);V.tag=2,x!=null&&(V.callback=x),x=Ga(m,V,L),x!==null&&(Gl(x,m,L,P),Kd(x,m,L))}};function rI(m,x,P,L,V,Z,ce){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(L,Z,ce):x.prototype&&x.prototype.isPureReactComponent?!kl(P,L)||!kl(V,Z):!0}function nI(m,x,P){var L=!1,V=Fc,Z=x.contextType;return typeof Z=="object"&&Z!==null?Z=js(Z):(V=ta(x)?Wd:ei.current,L=x.contextTypes,Z=(L=L!=null)?oh(m,V):Fc),x=new x(P,Z),m.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=yy,m.stateNode=x,x._reactInternals=m,L&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=V,m.__reactInternalMemoizedMaskedChildContext=Z),x}function sI(m,x,P,L){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(P,L),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(P,L),x.state!==m&&yy.enqueueReplaceState(x,x.state,null)}function Bw(m,x,P,L){var V=m.stateNode;V.props=P,V.state=m.memoizedState,V.refs={},gp(m);var Z=x.contextType;typeof Z=="object"&&Z!==null?V.context=js(Z):(Z=ta(x)?Wd:ei.current,V.context=oh(m,Z)),V.state=m.memoizedState,Z=x.getDerivedStateFromProps,typeof Z=="function"&&($w(m,x,Z,P),V.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(x=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),x!==V.state&&yy.enqueueReplaceState(V,V.state,null),Bl(m,P,V,L),V.state=m.memoizedState),typeof V.componentDidMount=="function"&&(m.flags|=4194308)}function Cp(m,x){try{var P="",L=x;do P+=ee(L),L=L.return;while(L);var V=P}catch(Z){V=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:m,source:x,stack:V,digest:null}}function zw(m,x,P){return{value:m,source:null,stack:P??null,digest:x??null}}function qw(m,x){try{console.error(x.value)}catch(P){setTimeout(function(){throw P})}}var uG=typeof WeakMap=="function"?WeakMap:Map;function iI(m,x,P){P=Wa(-1,P),P.tag=3,P.payload={element:null};var L=x.value;return P.callback=function(){Cy||(Cy=!0,n2=L),qw(m,x)},P}function aI(m,x,P){P=Wa(-1,P),P.tag=3;var L=m.type.getDerivedStateFromError;if(typeof L=="function"){var V=x.value;P.payload=function(){return L(V)},P.callback=function(){qw(m,x)}}var Z=m.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(P.callback=function(){qw(m,x),typeof L!="function"&&(ph===null?ph=new Set([this]):ph.add(this));var ce=x.stack;this.componentDidCatch(x.value,{componentStack:ce!==null?ce:""})}),P}function oI(m,x,P){var L=m.pingCache;if(L===null){L=m.pingCache=new uG;var V=new Set;L.set(x,V)}else V=L.get(x),V===void 0&&(V=new Set,L.set(x,V));V.has(P)||(V.add(P),m=AG.bind(null,m,x,P),x.then(m,m))}function lI(m){do{var x;if((x=m.tag===13)&&(x=m.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return m;m=m.return}while(m!==null);return null}function cI(m,x,P,L,V){return(m.mode&1)===0?(m===x?m.flags|=65536:(m.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(x=Wa(-1,1),x.tag=2,Ga(P,x,1))),P.lanes|=1),m):(m.flags|=65536,m.lanes=V,m)}var hG=C.ReactCurrentOwner,Ya=!1;function Ea(m,x,P,L){x.child=m===null?on(x,null,P,L):Is(x,m.child,P,L)}function dI(m,x,P,L,V){P=P.render;var Z=x.ref;return Zn(x,V),L=zf(m,x,P,L,Z,V),P=ol(),m!==null&&!Ya?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~V,Zd(m,x,V)):(Je&&P&&Xe(x),x.flags|=1,Ea(m,x,L,V),x.child)}function uI(m,x,P,L,V){if(m===null){var Z=P.type;return typeof Z=="function"&&!d2(Z)&&Z.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(x.tag=15,x.type=Z,hI(m,x,Z,L,V)):(m=Dy(P.type,null,L,x,x.mode,V),m.ref=x.ref,m.return=x,x.child=m)}if(Z=m.child,(m.lanes&V)===0){var ce=Z.memoizedProps;if(P=P.compare,P=P!==null?P:kl,P(ce,L)&&m.ref===x.ref)return Zd(m,x,V)}return x.flags|=1,m=yh(Z,L),m.ref=x.ref,m.return=x,x.child=m}function hI(m,x,P,L,V){if(m!==null){var Z=m.memoizedProps;if(kl(Z,L)&&m.ref===x.ref)if(Ya=!1,x.pendingProps=L=Z,(m.lanes&V)!==0)(m.flags&131072)!==0&&(Ya=!0);else return x.lanes=m.lanes,Zd(m,x,V)}return Uw(m,x,P,L,V)}function fI(m,x,P){var L=x.pendingProps,V=L.children,Z=m!==null?m.memoizedState:null;if(L.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Pp,Co),Co|=P;else{if((P&1073741824)===0)return m=Z!==null?Z.baseLanes|P:P,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:m,cachePool:null,transitions:null},x.updateQueue=null,yn(Pp,Co),Co|=m,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=Z!==null?Z.baseLanes:P,yn(Pp,Co),Co|=L}else Z!==null?(L=Z.baseLanes|P,x.memoizedState=null):L=P,yn(Pp,Co),Co|=L;return Ea(m,x,V,P),x.child}function mI(m,x){var P=x.ref;(m===null&&P!==null||m!==null&&m.ref!==P)&&(x.flags|=512,x.flags|=2097152)}function Uw(m,x,P,L,V){var Z=ta(P)?Wd:ei.current;return Z=oh(x,Z),Zn(x,V),P=zf(m,x,P,L,Z,V),L=ol(),m!==null&&!Ya?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~V,Zd(m,x,V)):(Je&&L&&Xe(x),x.flags|=1,Ea(m,x,P,V),x.child)}function pI(m,x,P,L,V){if(ta(P)){var Z=!0;Gd(x)}else Z=!1;if(Zn(x,V),x.stateNode===null)jy(m,x),nI(x,P,L),Bw(x,P,L,V),L=!0;else if(m===null){var ce=x.stateNode,Ee=x.memoizedProps;ce.props=Ee;var ke=ce.context,Ye=P.contextType;typeof Ye=="object"&&Ye!==null?Ye=js(Ye):(Ye=ta(P)?Wd:ei.current,Ye=oh(x,Ye));var gt=P.getDerivedStateFromProps,bt=typeof gt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";bt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Ee!==L||ke!==Ye)&&sI(x,ce,L,Ye),sl=!1;var mt=x.memoizedState;ce.state=mt,Bl(x,L,ce,V),ke=x.memoizedState,Ee!==L||mt!==ke||ea.current||sl?(typeof gt=="function"&&($w(x,P,gt,L),ke=x.memoizedState),(Ee=sl||rI(x,P,Ee,L,mt,ke,Ye))?(bt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=L,x.memoizedState=ke),ce.props=L,ce.state=ke,ce.context=Ye,L=Ee):(typeof ce.componentDidMount=="function"&&(x.flags|=4194308),L=!1)}else{ce=x.stateNode,Nv(m,x),Ee=x.memoizedProps,Ye=x.type===x.elementType?Ee:Vl(x.type,Ee),ce.props=Ye,bt=x.pendingProps,mt=ce.context,ke=P.contextType,typeof ke=="object"&&ke!==null?ke=js(ke):(ke=ta(P)?Wd:ei.current,ke=oh(x,ke));var Rt=P.getDerivedStateFromProps;(gt=typeof Rt=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Ee!==bt||mt!==ke)&&sI(x,ce,L,ke),sl=!1,mt=x.memoizedState,ce.state=mt,Bl(x,L,ce,V);var zt=x.memoizedState;Ee!==bt||mt!==zt||ea.current||sl?(typeof Rt=="function"&&($w(x,P,Rt,L),zt=x.memoizedState),(Ye=sl||rI(x,P,Ye,L,mt,zt,ke)||!1)?(gt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(L,zt,ke),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(L,zt,ke)),typeof ce.componentDidUpdate=="function"&&(x.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Ee===m.memoizedProps&&mt===m.memoizedState||(x.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ee===m.memoizedProps&&mt===m.memoizedState||(x.flags|=1024),x.memoizedProps=L,x.memoizedState=zt),ce.props=L,ce.state=zt,ce.context=ke,L=Ye):(typeof ce.componentDidUpdate!="function"||Ee===m.memoizedProps&&mt===m.memoizedState||(x.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Ee===m.memoizedProps&&mt===m.memoizedState||(x.flags|=1024),L=!1)}return Vw(m,x,P,L,Z,V)}function Vw(m,x,P,L,V,Z){mI(m,x);var ce=(x.flags&128)!==0;if(!L&&!ce)return V&&hy(x,P,!1),Zd(m,x,Z);L=x.stateNode,hG.current=x;var Ee=ce&&typeof P.getDerivedStateFromError!="function"?null:L.render();return x.flags|=1,m!==null&&ce?(x.child=Is(x,m.child,null,Z),x.child=Is(x,null,Ee,Z)):Ea(m,x,Ee,Z),x.memoizedState=L.state,V&&hy(x,P,!0),x.child}function gI(m){var x=m.stateNode;x.pendingContext?uy(m,x.pendingContext,x.pendingContext!==x.context):x.context&&uy(m,x.context,!1),dh(m,x.containerInfo)}function vI(m,x,P,L,V){return Tr(),vn(V),x.flags|=256,Ea(m,x,P,L),x.child}var Hw={dehydrated:null,treeContext:null,retryLane:0};function Ww(m){return{baseLanes:m,cachePool:null,transitions:null}}function xI(m,x,P){var L=x.pendingProps,V=Dn.current,Z=!1,ce=(x.flags&128)!==0,Ee;if((Ee=ce)||(Ee=m!==null&&m.memoizedState===null?!1:(V&2)!==0),Ee?(Z=!0,x.flags&=-129):(m===null||m.memoizedState!==null)&&(V|=1),yn(Dn,V&1),m===null)return Tt(x),m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((x.mode&1)===0?x.lanes=1:m.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(ce=L.children,m=L.fallback,Z?(L=x.mode,Z=x.child,ce={mode:"hidden",children:ce},(L&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=ce):Z=ky(ce,L,0,null),m=Kf(m,L,P,null),Z.return=x,m.return=x,Z.sibling=m,x.child=Z,x.child.memoizedState=Ww(P),x.memoizedState=Hw,m):Gw(x,ce));if(V=m.memoizedState,V!==null&&(Ee=V.dehydrated,Ee!==null))return fG(m,x,ce,L,Ee,V,P);if(Z){Z=L.fallback,ce=x.mode,V=m.child,Ee=V.sibling;var ke={mode:"hidden",children:L.children};return(ce&1)===0&&x.child!==V?(L=x.child,L.childLanes=0,L.pendingProps=ke,x.deletions=null):(L=yh(V,ke),L.subtreeFlags=V.subtreeFlags&14680064),Ee!==null?Z=yh(Ee,Z):(Z=Kf(Z,ce,P,null),Z.flags|=2),Z.return=x,L.return=x,L.sibling=Z,x.child=L,L=Z,Z=x.child,ce=m.child.memoizedState,ce=ce===null?Ww(P):{baseLanes:ce.baseLanes|P,cachePool:null,transitions:ce.transitions},Z.memoizedState=ce,Z.childLanes=m.childLanes&~P,x.memoizedState=Hw,L}return Z=m.child,m=Z.sibling,L=yh(Z,{mode:"visible",children:L.children}),(x.mode&1)===0&&(L.lanes=P),L.return=x,L.sibling=null,m!==null&&(P=x.deletions,P===null?(x.deletions=[m],x.flags|=16):P.push(m)),x.child=L,x.memoizedState=null,L}function Gw(m,x){return x=ky({mode:"visible",children:x},m.mode,0,null),x.return=m,m.child=x}function by(m,x,P,L){return L!==null&&vn(L),Is(x,m.child,null,P),m=Gw(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function fG(m,x,P,L,V,Z,ce){if(P)return x.flags&256?(x.flags&=-257,L=zw(Error(r(422))),by(m,x,ce,L)):x.memoizedState!==null?(x.child=m.child,x.flags|=128,null):(Z=L.fallback,V=x.mode,L=ky({mode:"visible",children:L.children},V,0,null),Z=Kf(Z,V,ce,null),Z.flags|=2,L.return=x,Z.return=x,L.sibling=Z,x.child=L,(x.mode&1)!==0&&Is(x,m.child,null,ce),x.child.memoizedState=Ww(ce),x.memoizedState=Hw,Z);if((x.mode&1)===0)return by(m,x,ce,null);if(V.data==="$!"){if(L=V.nextSibling&&V.nextSibling.dataset,L)var Ee=L.dgst;return L=Ee,Z=Error(r(419)),L=zw(Z,L,void 0),by(m,x,ce,L)}if(Ee=(ce&m.childLanes)!==0,Ya||Ee){if(L=yi,L!==null){switch(ce&-ce){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(L.suspendedLanes|ce))!==0?0:V,V!==0&&V!==Z.retryLane&&(Z.retryLane=V,ln(m,V),Gl(L,m,V,-1))}return c2(),L=zw(Error(r(421))),by(m,x,ce,L)}return V.data==="$?"?(x.flags|=128,x.child=m.child,x=CG.bind(null,m),V._reactRetry=x,null):(m=Z.treeContext,rt=Oi(V.nextSibling),Re=x,Je=!0,at=null,m!==null&&(ge[ye++]=Be,ge[ye++]=ze,ge[ye++]=De,Be=m.id,ze=m.overflow,De=x),x=Gw(x,L.children),x.flags|=4096,x)}function yI(m,x,P){m.lanes|=x;var L=m.alternate;L!==null&&(L.lanes|=x),Ha(m.return,x,P)}function Kw(m,x,P,L,V){var Z=m.memoizedState;Z===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:L,tail:P,tailMode:V}:(Z.isBackwards=x,Z.rendering=null,Z.renderingStartTime=0,Z.last=L,Z.tail=P,Z.tailMode=V)}function bI(m,x,P){var L=x.pendingProps,V=L.revealOrder,Z=L.tail;if(Ea(m,x,L.children,P),L=Dn.current,(L&2)!==0)L=L&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&yI(m,P,x);else if(m.tag===19)yI(m,P,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}L&=1}if(yn(Dn,L),(x.mode&1)===0)x.memoizedState=null;else switch(V){case"forwards":for(P=x.child,V=null;P!==null;)m=P.alternate,m!==null&&No(m)===null&&(V=P),P=P.sibling;P=V,P===null?(V=x.child,x.child=null):(V=P.sibling,P.sibling=null),Kw(x,!1,V,P,Z);break;case"backwards":for(P=null,V=x.child,x.child=null;V!==null;){if(m=V.alternate,m!==null&&No(m)===null){x.child=V;break}m=V.sibling,V.sibling=P,P=V,V=m}Kw(x,!0,P,null,Z);break;case"together":Kw(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function jy(m,x){(x.mode&1)===0&&m!==null&&(m.alternate=null,x.alternate=null,x.flags|=2)}function Zd(m,x,P){if(m!==null&&(x.dependencies=m.dependencies),Vf|=x.lanes,(P&x.childLanes)===0)return null;if(m!==null&&x.child!==m.child)throw Error(r(153));if(x.child!==null){for(m=x.child,P=yh(m,m.pendingProps),x.child=P,P.return=x;m.sibling!==null;)m=m.sibling,P=P.sibling=yh(m,m.pendingProps),P.return=x;P.sibling=null}return x.child}function mG(m,x,P){switch(x.tag){case 3:gI(x),Tr();break;case 5:fy(x);break;case 1:ta(x.type)&&Gd(x);break;case 4:dh(x,x.stateNode.containerInfo);break;case 10:var L=x.type._context,V=x.memoizedProps.value;yn(vi,L._currentValue),L._currentValue=V;break;case 13:if(L=x.memoizedState,L!==null)return L.dehydrated!==null?(yn(Dn,Dn.current&1),x.flags|=128,null):(P&x.child.childLanes)!==0?xI(m,x,P):(yn(Dn,Dn.current&1),m=Zd(m,x,P),m!==null?m.sibling:null);yn(Dn,Dn.current&1);break;case 19:if(L=(P&x.childLanes)!==0,(m.flags&128)!==0){if(L)return bI(m,x,P);x.flags|=128}if(V=x.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),yn(Dn,Dn.current),L)break;return null;case 22:case 23:return x.lanes=0,fI(m,x,P)}return Zd(m,x,P)}var jI,Yw,wI,NI;jI=function(m,x){for(var P=x.child;P!==null;){if(P.tag===5||P.tag===6)m.appendChild(P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===x)break;for(;P.sibling===null;){if(P.return===null||P.return===x)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},Yw=function(){},wI=function(m,x,P,L){var V=m.memoizedProps;if(V!==L){m=x.stateNode,zl(Sa.current);var Z=null;switch(P){case"input":V=Ke(m,V),L=Ke(m,L),Z=[];break;case"select":V=J({},V,{value:void 0}),L=J({},L,{value:void 0}),Z=[];break;case"textarea":V=xt(m,V),L=xt(m,L),Z=[];break;default:typeof V.onClick!="function"&&typeof L.onClick=="function"&&(m.onclick=sh)}an(P,L);var ce;P=null;for(Ye in V)if(!L.hasOwnProperty(Ye)&&V.hasOwnProperty(Ye)&&V[Ye]!=null)if(Ye==="style"){var Ee=V[Ye];for(ce in Ee)Ee.hasOwnProperty(ce)&&(P||(P={}),P[ce]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(i.hasOwnProperty(Ye)?Z||(Z=[]):(Z=Z||[]).push(Ye,null));for(Ye in L){var ke=L[Ye];if(Ee=V?.[Ye],L.hasOwnProperty(Ye)&&ke!==Ee&&(ke!=null||Ee!=null))if(Ye==="style")if(Ee){for(ce in Ee)!Ee.hasOwnProperty(ce)||ke&&ke.hasOwnProperty(ce)||(P||(P={}),P[ce]="");for(ce in ke)ke.hasOwnProperty(ce)&&Ee[ce]!==ke[ce]&&(P||(P={}),P[ce]=ke[ce])}else P||(Z||(Z=[]),Z.push(Ye,P)),P=ke;else Ye==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,Ee=Ee?Ee.__html:void 0,ke!=null&&Ee!==ke&&(Z=Z||[]).push(Ye,ke)):Ye==="children"?typeof ke!="string"&&typeof ke!="number"||(Z=Z||[]).push(Ye,""+ke):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ye)?(ke!=null&&Ye==="onScroll"&&Cn("scroll",m),Z||Ee===ke||(Z=[])):(Z=Z||[]).push(Ye,ke))}P&&(Z=Z||[]).push("style",P);var Ye=Z;(x.updateQueue=Ye)&&(x.flags|=4)}},NI=function(m,x,P,L){P!==L&&(x.flags|=4)};function Tv(m,x){if(!Je)switch(m.tailMode){case"hidden":x=m.tail;for(var P=null;x!==null;)x.alternate!==null&&(P=x),x=x.sibling;P===null?m.tail=null:P.sibling=null;break;case"collapsed":P=m.tail;for(var L=null;P!==null;)P.alternate!==null&&(L=P),P=P.sibling;L===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:L.sibling=null}}function na(m){var x=m.alternate!==null&&m.alternate.child===m.child,P=0,L=0;if(x)for(var V=m.child;V!==null;)P|=V.lanes|V.childLanes,L|=V.subtreeFlags&14680064,L|=V.flags&14680064,V.return=m,V=V.sibling;else for(V=m.child;V!==null;)P|=V.lanes|V.childLanes,L|=V.subtreeFlags,L|=V.flags,V.return=m,V=V.sibling;return m.subtreeFlags|=L,m.childLanes=P,x}function pG(m,x,P){var L=x.pendingProps;switch(Oe(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(x),null;case 1:return ta(x.type)&&pp(),na(x),null;case 3:return L=x.stateNode,il(),gn(ea),gn(ei),Cv(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(m===null||m.child===null)&&(Wr(x)?x.flags|=4:m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,at!==null&&(a2(at),at=null))),Yw(m,x),na(x),null;case 5:Sv(x);var V=zl(Bc.current);if(P=x.type,m!==null&&x.stateNode!=null)wI(m,x,P,L,V),m.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!L){if(x.stateNode===null)throw Error(r(166));return na(x),null}if(m=zl(Sa.current),Wr(x)){L=x.stateNode,P=x.type;var Z=x.memoizedProps;switch(L[nl]=x,L[ih]=Z,m=(x.mode&1)!==0,P){case"dialog":Cn("cancel",L),Cn("close",L);break;case"iframe":case"object":case"embed":Cn("load",L);break;case"video":case"audio":for(V=0;V<Lc.length;V++)Cn(Lc[V],L);break;case"source":Cn("error",L);break;case"img":case"image":case"link":Cn("error",L),Cn("load",L);break;case"details":Cn("toggle",L);break;case"input":we(L,Z),Cn("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!Z.multiple},Cn("invalid",L);break;case"textarea":Ot(L,Z),Cn("invalid",L)}an(P,Z),V=null;for(var ce in Z)if(Z.hasOwnProperty(ce)){var Ee=Z[ce];ce==="children"?typeof Ee=="string"?L.textContent!==Ee&&(Z.suppressHydrationWarning!==!0&&mp(L.textContent,Ee,m),V=["children",Ee]):typeof Ee=="number"&&L.textContent!==""+Ee&&(Z.suppressHydrationWarning!==!0&&mp(L.textContent,Ee,m),V=["children",""+Ee]):i.hasOwnProperty(ce)&&Ee!=null&&ce==="onScroll"&&Cn("scroll",L)}switch(P){case"input":Pe(L),_e(L,Z,!0);break;case"textarea":Pe(L),ut(L);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(L.onclick=sh)}L=V,x.updateQueue=L,L!==null&&(x.flags|=4)}else{ce=V.nodeType===9?V:V.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Et(P)),m==="http://www.w3.org/1999/xhtml"?P==="script"?(m=ce.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof L.is=="string"?m=ce.createElement(P,{is:L.is}):(m=ce.createElement(P),P==="select"&&(ce=m,L.multiple?ce.multiple=!0:L.size&&(ce.size=L.size))):m=ce.createElementNS(m,P),m[nl]=x,m[ih]=L,jI(m,x,!1,!1),x.stateNode=m;e:{switch(ce=di(P,L),P){case"dialog":Cn("cancel",m),Cn("close",m),V=L;break;case"iframe":case"object":case"embed":Cn("load",m),V=L;break;case"video":case"audio":for(V=0;V<Lc.length;V++)Cn(Lc[V],m);V=L;break;case"source":Cn("error",m),V=L;break;case"img":case"image":case"link":Cn("error",m),Cn("load",m),V=L;break;case"details":Cn("toggle",m),V=L;break;case"input":we(m,L),V=Ke(m,L),Cn("invalid",m);break;case"option":V=L;break;case"select":m._wrapperState={wasMultiple:!!L.multiple},V=J({},L,{value:void 0}),Cn("invalid",m);break;case"textarea":Ot(m,L),V=xt(m,L),Cn("invalid",m);break;default:V=L}an(P,V),Ee=V;for(Z in Ee)if(Ee.hasOwnProperty(Z)){var ke=Ee[Z];Z==="style"?xs(m,ke):Z==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&Vt(m,ke)):Z==="children"?typeof ke=="string"?(P!=="textarea"||ke!=="")&&nr(m,ke):typeof ke=="number"&&nr(m,""+ke):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(i.hasOwnProperty(Z)?ke!=null&&Z==="onScroll"&&Cn("scroll",m):ke!=null&&w(m,Z,ke,ce))}switch(P){case"input":Pe(m),_e(m,L,!1);break;case"textarea":Pe(m),ut(m);break;case"option":L.value!=null&&m.setAttribute("value",""+ve(L.value));break;case"select":m.multiple=!!L.multiple,Z=L.value,Z!=null?vt(m,!!L.multiple,Z,!1):L.defaultValue!=null&&vt(m,!!L.multiple,L.defaultValue,!0);break;default:typeof V.onClick=="function"&&(m.onclick=sh)}switch(P){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return na(x),null;case 6:if(m&&x.stateNode!=null)NI(m,x,m.memoizedProps,L);else{if(typeof L!="string"&&x.stateNode===null)throw Error(r(166));if(P=zl(Bc.current),zl(Sa.current),Wr(x)){if(L=x.stateNode,P=x.memoizedProps,L[nl]=x,(Z=L.nodeValue!==P)&&(m=Re,m!==null))switch(m.tag){case 3:mp(L.nodeValue,P,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&mp(L.nodeValue,P,(m.mode&1)!==0)}Z&&(x.flags|=4)}else L=(P.nodeType===9?P:P.ownerDocument).createTextNode(L),L[nl]=x,x.stateNode=L}return na(x),null;case 13:if(gn(Dn),L=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Je&&rt!==null&&(x.mode&1)!==0&&(x.flags&128)===0)zr(),Tr(),x.flags|=98560,Z=!1;else if(Z=Wr(x),L!==null&&L.dehydrated!==null){if(m===null){if(!Z)throw Error(r(318));if(Z=x.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(r(317));Z[nl]=x}else Tr(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;na(x),Z=!1}else at!==null&&(a2(at),at=null),Z=!0;if(!Z)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=P,x):(L=L!==null,L!==(m!==null&&m.memoizedState!==null)&&L&&(x.child.flags|=8192,(x.mode&1)!==0&&(m===null||(Dn.current&1)!==0?ri===0&&(ri=3):c2())),x.updateQueue!==null&&(x.flags|=4),na(x),null);case 4:return il(),Yw(m,x),m===null&&qd(x.stateNode.containerInfo),na(x),null;case 10:return ra(x.type._context),na(x),null;case 17:return ta(x.type)&&pp(),na(x),null;case 19:if(gn(Dn),Z=x.memoizedState,Z===null)return na(x),null;if(L=(x.flags&128)!==0,ce=Z.rendering,ce===null)if(L)Tv(Z,!1);else{if(ri!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(ce=No(m),ce!==null){for(x.flags|=128,Tv(Z,!1),L=ce.updateQueue,L!==null&&(x.updateQueue=L,x.flags|=4),x.subtreeFlags=0,L=P,P=x.child;P!==null;)Z=P,m=L,Z.flags&=14680066,ce=Z.alternate,ce===null?(Z.childLanes=0,Z.lanes=m,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=ce.childLanes,Z.lanes=ce.lanes,Z.child=ce.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=ce.memoizedProps,Z.memoizedState=ce.memoizedState,Z.updateQueue=ce.updateQueue,Z.type=ce.type,m=ce.dependencies,Z.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),P=P.sibling;return yn(Dn,Dn.current&1|2),x.child}m=m.sibling}Z.tail!==null&&Wn()>Tp&&(x.flags|=128,L=!0,Tv(Z,!1),x.lanes=4194304)}else{if(!L)if(m=No(ce),m!==null){if(x.flags|=128,L=!0,P=m.updateQueue,P!==null&&(x.updateQueue=P,x.flags|=4),Tv(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ce.alternate&&!Je)return na(x),null}else 2*Wn()-Z.renderingStartTime>Tp&&P!==1073741824&&(x.flags|=128,L=!0,Tv(Z,!1),x.lanes=4194304);Z.isBackwards?(ce.sibling=x.child,x.child=ce):(P=Z.last,P!==null?P.sibling=ce:x.child=ce,Z.last=ce)}return Z.tail!==null?(x=Z.tail,Z.rendering=x,Z.tail=x.sibling,Z.renderingStartTime=Wn(),x.sibling=null,P=Dn.current,yn(Dn,L?P&1|2:P&1),x):(na(x),null);case 22:case 23:return l2(),L=x.memoizedState!==null,m!==null&&m.memoizedState!==null!==L&&(x.flags|=8192),L&&(x.mode&1)!==0?(Co&1073741824)!==0&&(na(x),x.subtreeFlags&6&&(x.flags|=8192)):na(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function gG(m,x){switch(Oe(x),x.tag){case 1:return ta(x.type)&&pp(),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return il(),gn(ea),gn(ei),Cv(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 5:return Sv(x),null;case 13:if(gn(Dn),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(r(340));Tr()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return gn(Dn),null;case 4:return il(),null;case 10:return ra(x.type._context),null;case 22:case 23:return l2(),null;case 24:return null;default:return null}}var wy=!1,sa=!1,vG=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Ep(m,x){var P=m.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(L){Ns(m,x,L)}else P.current=null}function Xw(m,x,P){try{P()}catch(L){Ns(m,x,L)}}var SI=!1;function xG(m,x){if(Ff=$u,m=If(),Fd(m)){if("selectionStart"in m)var P={start:m.selectionStart,end:m.selectionEnd};else e:{P=(P=m.ownerDocument)&&P.defaultView||window;var L=P.getSelection&&P.getSelection();if(L&&L.rangeCount!==0){P=L.anchorNode;var V=L.anchorOffset,Z=L.focusNode;L=L.focusOffset;try{P.nodeType,Z.nodeType}catch{P=null;break e}var ce=0,Ee=-1,ke=-1,Ye=0,gt=0,bt=m,mt=null;t:for(;;){for(var Rt;bt!==P||V!==0&&bt.nodeType!==3||(Ee=ce+V),bt!==Z||L!==0&&bt.nodeType!==3||(ke=ce+L),bt.nodeType===3&&(ce+=bt.nodeValue.length),(Rt=bt.firstChild)!==null;)mt=bt,bt=Rt;for(;;){if(bt===m)break t;if(mt===P&&++Ye===V&&(Ee=ce),mt===Z&&++gt===L&&(ke=ce),(Rt=bt.nextSibling)!==null)break;bt=mt,mt=bt.parentNode}bt=Rt}P=Ee===-1||ke===-1?null:{start:Ee,end:ke}}else P=null}P=P||{start:0,end:0}}else P=null;for(Vd={focusedElem:m,selectionRange:P},$u=!1,Lt=x;Lt!==null;)if(x=Lt,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,Lt=m;else for(;Lt!==null;){x=Lt;try{var zt=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(zt!==null){var qt=zt.memoizedProps,Os=zt.memoizedState,Ue=x.stateNode,Le=Ue.getSnapshotBeforeUpdate(x.elementType===x.type?qt:Vl(x.type,qt),Os);Ue.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:var We=x.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(St){Ns(x,x.return,St)}if(m=x.sibling,m!==null){m.return=x.return,Lt=m;break}Lt=x.return}return zt=SI,SI=!1,zt}function _v(m,x,P){var L=x.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var V=L=L.next;do{if((V.tag&m)===m){var Z=V.destroy;V.destroy=void 0,Z!==void 0&&Xw(x,P,Z)}V=V.next}while(V!==L)}}function Ny(m,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var P=x=x.next;do{if((P.tag&m)===m){var L=P.create;P.destroy=L()}P=P.next}while(P!==x)}}function Zw(m){var x=m.ref;if(x!==null){var P=m.stateNode;switch(m.tag){case 5:m=P;break;default:m=P}typeof x=="function"?x(m):x.current=m}}function AI(m){var x=m.alternate;x!==null&&(m.alternate=null,AI(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&(delete x[nl],delete x[ih],delete x[Ji],delete x[Rw],delete x[Lw])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function CI(m){return m.tag===5||m.tag===3||m.tag===4}function EI(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||CI(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Qw(m,x,P){var L=m.tag;if(L===5||L===6)m=m.stateNode,x?P.nodeType===8?P.parentNode.insertBefore(m,x):P.insertBefore(m,x):(P.nodeType===8?(x=P.parentNode,x.insertBefore(m,P)):(x=P,x.appendChild(m)),P=P._reactRootContainer,P!=null||x.onclick!==null||(x.onclick=sh));else if(L!==4&&(m=m.child,m!==null))for(Qw(m,x,P),m=m.sibling;m!==null;)Qw(m,x,P),m=m.sibling}function Jw(m,x,P){var L=m.tag;if(L===5||L===6)m=m.stateNode,x?P.insertBefore(m,x):P.appendChild(m);else if(L!==4&&(m=m.child,m!==null))for(Jw(m,x,P),m=m.sibling;m!==null;)Jw(m,x,P),m=m.sibling}var Li=null,Hl=!1;function mh(m,x,P){for(P=P.child;P!==null;)PI(m,x,P),P=P.sibling}function PI(m,x,P){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(Nd,P)}catch{}switch(P.tag){case 5:sa||Ep(P,x);case 6:var L=Li,V=Hl;Li=null,mh(m,x,P),Li=L,Hl=V,Li!==null&&(Hl?(m=Li,P=P.stateNode,m.nodeType===8?m.parentNode.removeChild(P):m.removeChild(P)):Li.removeChild(P.stateNode));break;case 18:Li!==null&&(Hl?(m=Li,P=P.stateNode,m.nodeType===8?bv(m.parentNode,P):m.nodeType===1&&bv(m,P),xo(m)):bv(Li,P.stateNode));break;case 4:L=Li,V=Hl,Li=P.stateNode.containerInfo,Hl=!0,mh(m,x,P),Li=L,Hl=V;break;case 0:case 11:case 14:case 15:if(!sa&&(L=P.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){V=L=L.next;do{var Z=V,ce=Z.destroy;Z=Z.tag,ce!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Xw(P,x,ce),V=V.next}while(V!==L)}mh(m,x,P);break;case 1:if(!sa&&(Ep(P,x),L=P.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=P.memoizedProps,L.state=P.memoizedState,L.componentWillUnmount()}catch(Ee){Ns(P,x,Ee)}mh(m,x,P);break;case 21:mh(m,x,P);break;case 22:P.mode&1?(sa=(L=sa)||P.memoizedState!==null,mh(m,x,P),sa=L):mh(m,x,P);break;default:mh(m,x,P)}}function TI(m){var x=m.updateQueue;if(x!==null){m.updateQueue=null;var P=m.stateNode;P===null&&(P=m.stateNode=new vG),x.forEach(function(L){var V=EG.bind(null,m,L);P.has(L)||(P.add(L),L.then(V,V))})}}function Wl(m,x){var P=x.deletions;if(P!==null)for(var L=0;L<P.length;L++){var V=P[L];try{var Z=m,ce=x,Ee=ce;e:for(;Ee!==null;){switch(Ee.tag){case 5:Li=Ee.stateNode,Hl=!1;break e;case 3:Li=Ee.stateNode.containerInfo,Hl=!0;break e;case 4:Li=Ee.stateNode.containerInfo,Hl=!0;break e}Ee=Ee.return}if(Li===null)throw Error(r(160));PI(Z,ce,V),Li=null,Hl=!1;var ke=V.alternate;ke!==null&&(ke.return=null),V.return=null}catch(Ye){Ns(V,x,Ye)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)_I(x,m),x=x.sibling}function _I(m,x){var P=m.alternate,L=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Wl(x,m),qc(m),L&4){try{_v(3,m,m.return),Ny(3,m)}catch(qt){Ns(m,m.return,qt)}try{_v(5,m,m.return)}catch(qt){Ns(m,m.return,qt)}}break;case 1:Wl(x,m),qc(m),L&512&&P!==null&&Ep(P,P.return);break;case 5:if(Wl(x,m),qc(m),L&512&&P!==null&&Ep(P,P.return),m.flags&32){var V=m.stateNode;try{nr(V,"")}catch(qt){Ns(m,m.return,qt)}}if(L&4&&(V=m.stateNode,V!=null)){var Z=m.memoizedProps,ce=P!==null?P.memoizedProps:Z,Ee=m.type,ke=m.updateQueue;if(m.updateQueue=null,ke!==null)try{Ee==="input"&&Z.type==="radio"&&Z.name!=null&&oe(V,Z),di(Ee,ce);var Ye=di(Ee,Z);for(ce=0;ce<ke.length;ce+=2){var gt=ke[ce],bt=ke[ce+1];gt==="style"?xs(V,bt):gt==="dangerouslySetInnerHTML"?Vt(V,bt):gt==="children"?nr(V,bt):w(V,gt,bt,Ye)}switch(Ee){case"input":it(V,Z);break;case"textarea":Ze(V,Z);break;case"select":var mt=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!Z.multiple;var Rt=Z.value;Rt!=null?vt(V,!!Z.multiple,Rt,!1):mt!==!!Z.multiple&&(Z.defaultValue!=null?vt(V,!!Z.multiple,Z.defaultValue,!0):vt(V,!!Z.multiple,Z.multiple?[]:"",!1))}V[ih]=Z}catch(qt){Ns(m,m.return,qt)}}break;case 6:if(Wl(x,m),qc(m),L&4){if(m.stateNode===null)throw Error(r(162));V=m.stateNode,Z=m.memoizedProps;try{V.nodeValue=Z}catch(qt){Ns(m,m.return,qt)}}break;case 3:if(Wl(x,m),qc(m),L&4&&P!==null&&P.memoizedState.isDehydrated)try{xo(x.containerInfo)}catch(qt){Ns(m,m.return,qt)}break;case 4:Wl(x,m),qc(m);break;case 13:Wl(x,m),qc(m),V=m.child,V.flags&8192&&(Z=V.memoizedState!==null,V.stateNode.isHidden=Z,!Z||V.alternate!==null&&V.alternate.memoizedState!==null||(r2=Wn())),L&4&&TI(m);break;case 22:if(gt=P!==null&&P.memoizedState!==null,m.mode&1?(sa=(Ye=sa)||gt,Wl(x,m),sa=Ye):Wl(x,m),qc(m),L&8192){if(Ye=m.memoizedState!==null,(m.stateNode.isHidden=Ye)&&!gt&&(m.mode&1)!==0)for(Lt=m,gt=m.child;gt!==null;){for(bt=Lt=gt;Lt!==null;){switch(mt=Lt,Rt=mt.child,mt.tag){case 0:case 11:case 14:case 15:_v(4,mt,mt.return);break;case 1:Ep(mt,mt.return);var zt=mt.stateNode;if(typeof zt.componentWillUnmount=="function"){L=mt,P=mt.return;try{x=L,zt.props=x.memoizedProps,zt.state=x.memoizedState,zt.componentWillUnmount()}catch(qt){Ns(L,P,qt)}}break;case 5:Ep(mt,mt.return);break;case 22:if(mt.memoizedState!==null){kI(bt);continue}}Rt!==null?(Rt.return=mt,Lt=Rt):kI(bt)}gt=gt.sibling}e:for(gt=null,bt=m;;){if(bt.tag===5){if(gt===null){gt=bt;try{V=bt.stateNode,Ye?(Z=V.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Ee=bt.stateNode,ke=bt.memoizedProps.style,ce=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,Ee.style.display=wr("display",ce))}catch(qt){Ns(m,m.return,qt)}}}else if(bt.tag===6){if(gt===null)try{bt.stateNode.nodeValue=Ye?"":bt.memoizedProps}catch(qt){Ns(m,m.return,qt)}}else if((bt.tag!==22&&bt.tag!==23||bt.memoizedState===null||bt===m)&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===m)break e;for(;bt.sibling===null;){if(bt.return===null||bt.return===m)break e;gt===bt&&(gt=null),bt=bt.return}gt===bt&&(gt=null),bt.sibling.return=bt.return,bt=bt.sibling}}break;case 19:Wl(x,m),qc(m),L&4&&TI(m);break;case 21:break;default:Wl(x,m),qc(m)}}function qc(m){var x=m.flags;if(x&2){try{e:{for(var P=m.return;P!==null;){if(CI(P)){var L=P;break e}P=P.return}throw Error(r(160))}switch(L.tag){case 5:var V=L.stateNode;L.flags&32&&(nr(V,""),L.flags&=-33);var Z=EI(m);Jw(m,Z,V);break;case 3:case 4:var ce=L.stateNode.containerInfo,Ee=EI(m);Qw(m,Ee,ce);break;default:throw Error(r(161))}}catch(ke){Ns(m,m.return,ke)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function yG(m,x,P){Lt=m,II(m)}function II(m,x,P){for(var L=(m.mode&1)!==0;Lt!==null;){var V=Lt,Z=V.child;if(V.tag===22&&L){var ce=V.memoizedState!==null||wy;if(!ce){var Ee=V.alternate,ke=Ee!==null&&Ee.memoizedState!==null||sa;Ee=wy;var Ye=sa;if(wy=ce,(sa=ke)&&!Ye)for(Lt=V;Lt!==null;)ce=Lt,ke=ce.child,ce.tag===22&&ce.memoizedState!==null?OI(V):ke!==null?(ke.return=ce,Lt=ke):OI(V);for(;Z!==null;)Lt=Z,II(Z),Z=Z.sibling;Lt=V,wy=Ee,sa=Ye}DI(m)}else(V.subtreeFlags&8772)!==0&&Z!==null?(Z.return=V,Lt=Z):DI(m)}}function DI(m){for(;Lt!==null;){var x=Lt;if((x.flags&8772)!==0){var P=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:sa||Ny(5,x);break;case 1:var L=x.stateNode;if(x.flags&4&&!sa)if(P===null)L.componentDidMount();else{var V=x.elementType===x.type?P.memoizedProps:Vl(x.type,P.memoizedProps);L.componentDidUpdate(V,P.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var Z=x.updateQueue;Z!==null&&Yd(x,Z,L);break;case 3:var ce=x.updateQueue;if(ce!==null){if(P=null,x.child!==null)switch(x.child.tag){case 5:P=x.child.stateNode;break;case 1:P=x.child.stateNode}Yd(x,ce,P)}break;case 5:var Ee=x.stateNode;if(P===null&&x.flags&4){P=Ee;var ke=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&P.focus();break;case"img":ke.src&&(P.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Ye=x.alternate;if(Ye!==null){var gt=Ye.memoizedState;if(gt!==null){var bt=gt.dehydrated;bt!==null&&xo(bt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}sa||x.flags&512&&Zw(x)}catch(mt){Ns(x,x.return,mt)}}if(x===m){Lt=null;break}if(P=x.sibling,P!==null){P.return=x.return,Lt=P;break}Lt=x.return}}function kI(m){for(;Lt!==null;){var x=Lt;if(x===m){Lt=null;break}var P=x.sibling;if(P!==null){P.return=x.return,Lt=P;break}Lt=x.return}}function OI(m){for(;Lt!==null;){var x=Lt;try{switch(x.tag){case 0:case 11:case 15:var P=x.return;try{Ny(4,x)}catch(ke){Ns(x,P,ke)}break;case 1:var L=x.stateNode;if(typeof L.componentDidMount=="function"){var V=x.return;try{L.componentDidMount()}catch(ke){Ns(x,V,ke)}}var Z=x.return;try{Zw(x)}catch(ke){Ns(x,Z,ke)}break;case 5:var ce=x.return;try{Zw(x)}catch(ke){Ns(x,ce,ke)}}}catch(ke){Ns(x,x.return,ke)}if(x===m){Lt=null;break}var Ee=x.sibling;if(Ee!==null){Ee.return=x.return,Lt=Ee;break}Lt=x.return}}var bG=Math.ceil,Sy=C.ReactCurrentDispatcher,e2=C.ReactCurrentOwner,ll=C.ReactCurrentBatchConfig,en=0,yi=null,Gs=null,Mi=0,Co=0,Pp=wo(0),ri=0,Iv=null,Vf=0,Ay=0,t2=0,Dv=null,Xa=null,r2=0,Tp=1/0,Qd=null,Cy=!1,n2=null,ph=null,Ey=!1,gh=null,Py=0,kv=0,s2=null,Ty=-1,_y=0;function Pa(){return(en&6)!==0?Wn():Ty!==-1?Ty:Ty=Wn()}function vh(m){return(m.mode&1)===0?1:(en&2)!==0&&Mi!==0?Mi&-Mi:bn.transition!==null?(_y===0&&(_y=bf()),_y):(m=Qr,m!==0||(m=window.event,m=m===void 0?16:Af(m.type)),m)}function Gl(m,x,P,L){if(50<kv)throw kv=0,s2=null,Error(r(185));Sc(m,P,L),((en&2)===0||m!==yi)&&(m===yi&&((en&2)===0&&(Ay|=P),ri===4&&xh(m,Mi)),Za(m,L),P===1&&en===0&&(x.mode&1)===0&&(Tp=Wn()+500,Bf&&Q()))}function Za(m,x){var P=m.callbackNode;Yi(m,x);var L=Ki(m,m===yi?Mi:0);if(L===0)P!==null&&wd(P),m.callbackNode=null,m.callbackPriority=0;else if(x=L&-L,m.callbackPriority!==x){if(P!=null&&wd(P),x===1)m.tag===0?G(LI.bind(null,m)):M(LI.bind(null,m)),kw(function(){(en&6)===0&&Q()}),P=null;else{switch(Ru(L)){case 1:P=wc;break;case 4:P=xf;break;case 16:P=Iu;break;case 536870912:P=rp;break;default:P=Iu}P=VI(P,RI.bind(null,m))}m.callbackPriority=x,m.callbackNode=P}}function RI(m,x){if(Ty=-1,_y=0,(en&6)!==0)throw Error(r(327));var P=m.callbackNode;if(_p()&&m.callbackNode!==P)return null;var L=Ki(m,m===yi?Mi:0);if(L===0)return null;if((L&30)!==0||(L&m.expiredLanes)!==0||x)x=Iy(m,L);else{x=L;var V=en;en|=2;var Z=FI();(yi!==m||Mi!==x)&&(Qd=null,Tp=Wn()+500,Wf(m,x));do try{NG();break}catch(Ee){MI(m,Ee)}while(!0);ti(),Sy.current=Z,en=V,Gs!==null?x=0:(yi=null,Mi=0,x=ri)}if(x!==0){if(x===2&&(V=Cd(m),V!==0&&(L=V,x=i2(m,V))),x===1)throw P=Iv,Wf(m,0),xh(m,L),Za(m,Wn()),P;if(x===6)xh(m,L);else{if(V=m.current.alternate,(L&30)===0&&!jG(V)&&(x=Iy(m,L),x===2&&(Z=Cd(m),Z!==0&&(L=Z,x=i2(m,Z))),x===1))throw P=Iv,Wf(m,0),xh(m,L),Za(m,Wn()),P;switch(m.finishedWork=V,m.finishedLanes=L,x){case 0:case 1:throw Error(r(345));case 2:Gf(m,Xa,Qd);break;case 3:if(xh(m,L),(L&130023424)===L&&(x=r2+500-Wn(),10<x)){if(Ki(m,0)!==0)break;if(V=m.suspendedLanes,(V&L)!==L){Pa(),m.pingedLanes|=m.suspendedLanes&V;break}m.timeoutHandle=yv(Gf.bind(null,m,Xa,Qd),x);break}Gf(m,Xa,Qd);break;case 4:if(xh(m,L),(L&4194240)===L)break;for(x=m.eventTimes,V=-1;0<L;){var ce=31-xa(L);Z=1<<ce,ce=x[ce],ce>V&&(V=ce),L&=~Z}if(L=V,L=Wn()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*bG(L/1960))-L,10<L){m.timeoutHandle=yv(Gf.bind(null,m,Xa,Qd),L);break}Gf(m,Xa,Qd);break;case 5:Gf(m,Xa,Qd);break;default:throw Error(r(329))}}}return Za(m,Wn()),m.callbackNode===P?RI.bind(null,m):null}function i2(m,x){var P=Dv;return m.current.memoizedState.isDehydrated&&(Wf(m,x).flags|=256),m=Iy(m,x),m!==2&&(x=Xa,Xa=P,x!==null&&a2(x)),m}function a2(m){Xa===null?Xa=m:Xa.push.apply(Xa,m)}function jG(m){for(var x=m;;){if(x.flags&16384){var P=x.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var L=0;L<P.length;L++){var V=P[L],Z=V.getSnapshot;V=V.value;try{if(!Jr(Z(),V))return!1}catch{return!1}}}if(P=x.child,x.subtreeFlags&16384&&P!==null)P.return=x,x=P;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function xh(m,x){for(x&=~t2,x&=~Ay,m.suspendedLanes|=x,m.pingedLanes&=~x,m=m.expirationTimes;0<x;){var P=31-xa(x),L=1<<P;m[P]=-1,x&=~L}}function LI(m){if((en&6)!==0)throw Error(r(327));_p();var x=Ki(m,0);if((x&1)===0)return Za(m,Wn()),null;var P=Iy(m,x);if(m.tag!==0&&P===2){var L=Cd(m);L!==0&&(x=L,P=i2(m,L))}if(P===1)throw P=Iv,Wf(m,0),xh(m,x),Za(m,Wn()),P;if(P===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=x,Gf(m,Xa,Qd),Za(m,Wn()),null}function o2(m,x){var P=en;en|=1;try{return m(x)}finally{en=P,en===0&&(Tp=Wn()+500,Bf&&Q())}}function Hf(m){gh!==null&&gh.tag===0&&(en&6)===0&&_p();var x=en;en|=1;var P=ll.transition,L=Qr;try{if(ll.transition=null,Qr=1,m)return m()}finally{Qr=L,ll.transition=P,en=x,(en&6)===0&&Q()}}function l2(){Co=Pp.current,gn(Pp)}function Wf(m,x){m.finishedWork=null,m.finishedLanes=0;var P=m.timeoutHandle;if(P!==-1&&(m.timeoutHandle=-1,cy(P)),Gs!==null)for(P=Gs.return;P!==null;){var L=P;switch(Oe(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&pp();break;case 3:il(),gn(ea),gn(ei),Cv();break;case 5:Sv(L);break;case 4:il();break;case 13:gn(Dn);break;case 19:gn(Dn);break;case 10:ra(L.type._context);break;case 22:case 23:l2()}P=P.return}if(yi=m,Gs=m=yh(m.current,null),Mi=Co=x,ri=0,Iv=null,t2=Ay=Vf=0,Xa=Dv=null,Na!==null){for(x=0;x<Na.length;x++)if(P=Na[x],L=P.interleaved,L!==null){P.interleaved=null;var V=L.next,Z=P.pending;if(Z!==null){var ce=Z.next;Z.next=V,L.next=ce}P.pending=L}Na=null}return m}function MI(m,x){do{var P=Gs;try{if(ti(),vp.current=xy,uh){for(var L=Mn.memoizedState;L!==null;){var V=L.queue;V!==null&&(V.pending=null),L=L.next}uh=!1}if(al=0,us=ws=Mn=null,ql=!1,hh=0,e2.current=null,P===null||P.return===null){ri=1,Iv=x,Gs=null;break}e:{var Z=m,ce=P.return,Ee=P,ke=x;if(x=Mi,Ee.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Ye=ke,gt=Ee,bt=gt.tag;if((gt.mode&1)===0&&(bt===0||bt===11||bt===15)){var mt=gt.alternate;mt?(gt.updateQueue=mt.updateQueue,gt.memoizedState=mt.memoizedState,gt.lanes=mt.lanes):(gt.updateQueue=null,gt.memoizedState=null)}var Rt=lI(ce);if(Rt!==null){Rt.flags&=-257,cI(Rt,ce,Ee,Z,x),Rt.mode&1&&oI(Z,Ye,x),x=Rt,ke=Ye;var zt=x.updateQueue;if(zt===null){var qt=new Set;qt.add(ke),x.updateQueue=qt}else zt.add(ke);break e}else{if((x&1)===0){oI(Z,Ye,x),c2();break e}ke=Error(r(426))}}else if(Je&&Ee.mode&1){var Os=lI(ce);if(Os!==null){(Os.flags&65536)===0&&(Os.flags|=256),cI(Os,ce,Ee,Z,x),vn(Cp(ke,Ee));break e}}Z=ke=Cp(ke,Ee),ri!==4&&(ri=2),Dv===null?Dv=[Z]:Dv.push(Z),Z=ce;do{switch(Z.tag){case 3:Z.flags|=65536,x&=-x,Z.lanes|=x;var Ue=iI(Z,ke,x);Ka(Z,Ue);break e;case 1:Ee=ke;var Le=Z.type,We=Z.stateNode;if((Z.flags&128)===0&&(typeof Le.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(ph===null||!ph.has(We)))){Z.flags|=65536,x&=-x,Z.lanes|=x;var St=aI(Z,Ee,x);Ka(Z,St);break e}}Z=Z.return}while(Z!==null)}BI(P)}catch(Ht){x=Ht,Gs===P&&P!==null&&(Gs=P=P.return);continue}break}while(!0)}function FI(){var m=Sy.current;return Sy.current=xy,m===null?xy:m}function c2(){(ri===0||ri===3||ri===2)&&(ri=4),yi===null||(Vf&268435455)===0&&(Ay&268435455)===0||xh(yi,Mi)}function Iy(m,x){var P=en;en|=2;var L=FI();(yi!==m||Mi!==x)&&(Qd=null,Wf(m,x));do try{wG();break}catch(V){MI(m,V)}while(!0);if(ti(),en=P,Sy.current=L,Gs!==null)throw Error(r(261));return yi=null,Mi=0,ri}function wG(){for(;Gs!==null;)$I(Gs)}function NG(){for(;Gs!==null&&!_u();)$I(Gs)}function $I(m){var x=UI(m.alternate,m,Co);m.memoizedProps=m.pendingProps,x===null?BI(m):Gs=x,e2.current=null}function BI(m){var x=m;do{var P=x.alternate;if(m=x.return,(x.flags&32768)===0){if(P=pG(P,x,Co),P!==null){Gs=P;return}}else{if(P=gG(P,x),P!==null){P.flags&=32767,Gs=P;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ri=6,Gs=null;return}}if(x=x.sibling,x!==null){Gs=x;return}Gs=x=m}while(x!==null);ri===0&&(ri=5)}function Gf(m,x,P){var L=Qr,V=ll.transition;try{ll.transition=null,Qr=1,SG(m,x,P,L)}finally{ll.transition=V,Qr=L}return null}function SG(m,x,P,L){do _p();while(gh!==null);if((en&6)!==0)throw Error(r(327));P=m.finishedWork;var V=m.finishedLanes;if(P===null)return null;if(m.finishedWork=null,m.finishedLanes=0,P===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var Z=P.lanes|P.childLanes;if(pv(m,Z),m===yi&&(Gs=yi=null,Mi=0),(P.subtreeFlags&2064)===0&&(P.flags&2064)===0||Ey||(Ey=!0,VI(Iu,function(){return _p(),null})),Z=(P.flags&15990)!==0,(P.subtreeFlags&15990)!==0||Z){Z=ll.transition,ll.transition=null;var ce=Qr;Qr=1;var Ee=en;en|=4,e2.current=null,xG(m,P),_I(P,m),$d(Vd),$u=!!Ff,Vd=Ff=null,m.current=P,yG(P),tp(),en=Ee,Qr=ce,ll.transition=Z}else m.current=P;if(Ey&&(Ey=!1,gh=m,Py=V),Z=m.pendingLanes,Z===0&&(ph=null),Du(P.stateNode),Za(m,Wn()),x!==null)for(L=m.onRecoverableError,P=0;P<x.length;P++)V=x[P],L(V.value,{componentStack:V.stack,digest:V.digest});if(Cy)throw Cy=!1,m=n2,n2=null,m;return(Py&1)!==0&&m.tag!==0&&_p(),Z=m.pendingLanes,(Z&1)!==0?m===s2?kv++:(kv=0,s2=m):kv=0,Q(),null}function _p(){if(gh!==null){var m=Ru(Py),x=ll.transition,P=Qr;try{if(ll.transition=null,Qr=16>m?16:m,gh===null)var L=!1;else{if(m=gh,gh=null,Py=0,(en&6)!==0)throw Error(r(331));var V=en;for(en|=4,Lt=m.current;Lt!==null;){var Z=Lt,ce=Z.child;if((Lt.flags&16)!==0){var Ee=Z.deletions;if(Ee!==null){for(var ke=0;ke<Ee.length;ke++){var Ye=Ee[ke];for(Lt=Ye;Lt!==null;){var gt=Lt;switch(gt.tag){case 0:case 11:case 15:_v(8,gt,Z)}var bt=gt.child;if(bt!==null)bt.return=gt,Lt=bt;else for(;Lt!==null;){gt=Lt;var mt=gt.sibling,Rt=gt.return;if(AI(gt),gt===Ye){Lt=null;break}if(mt!==null){mt.return=Rt,Lt=mt;break}Lt=Rt}}}var zt=Z.alternate;if(zt!==null){var qt=zt.child;if(qt!==null){zt.child=null;do{var Os=qt.sibling;qt.sibling=null,qt=Os}while(qt!==null)}}Lt=Z}}if((Z.subtreeFlags&2064)!==0&&ce!==null)ce.return=Z,Lt=ce;else e:for(;Lt!==null;){if(Z=Lt,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:_v(9,Z,Z.return)}var Ue=Z.sibling;if(Ue!==null){Ue.return=Z.return,Lt=Ue;break e}Lt=Z.return}}var Le=m.current;for(Lt=Le;Lt!==null;){ce=Lt;var We=ce.child;if((ce.subtreeFlags&2064)!==0&&We!==null)We.return=ce,Lt=We;else e:for(ce=Le;Lt!==null;){if(Ee=Lt,(Ee.flags&2048)!==0)try{switch(Ee.tag){case 0:case 11:case 15:Ny(9,Ee)}}catch(Ht){Ns(Ee,Ee.return,Ht)}if(Ee===ce){Lt=null;break e}var St=Ee.sibling;if(St!==null){St.return=Ee.return,Lt=St;break e}Lt=Ee.return}}if(en=V,Q(),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(Nd,m)}catch{}L=!0}return L}finally{Qr=P,ll.transition=x}}return!1}function zI(m,x,P){x=Cp(P,x),x=iI(m,x,1),m=Ga(m,x,1),x=Pa(),m!==null&&(Sc(m,1,x),Za(m,x))}function Ns(m,x,P){if(m.tag===3)zI(m,m,P);else for(;x!==null;){if(x.tag===3){zI(x,m,P);break}else if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(ph===null||!ph.has(L))){m=Cp(P,m),m=aI(x,m,1),x=Ga(x,m,1),m=Pa(),x!==null&&(Sc(x,1,m),Za(x,m));break}}x=x.return}}function AG(m,x,P){var L=m.pingCache;L!==null&&L.delete(x),x=Pa(),m.pingedLanes|=m.suspendedLanes&P,yi===m&&(Mi&P)===P&&(ri===4||ri===3&&(Mi&130023424)===Mi&&500>Wn()-r2?Wf(m,0):t2|=P),Za(m,x)}function qI(m,x){x===0&&((m.mode&1)===0?x=1:(x=Nc,Nc<<=1,(Nc&130023424)===0&&(Nc=4194304)));var P=Pa();m=ln(m,x),m!==null&&(Sc(m,x,P),Za(m,P))}function CG(m){var x=m.memoizedState,P=0;x!==null&&(P=x.retryLane),qI(m,P)}function EG(m,x){var P=0;switch(m.tag){case 13:var L=m.stateNode,V=m.memoizedState;V!==null&&(P=V.retryLane);break;case 19:L=m.stateNode;break;default:throw Error(r(314))}L!==null&&L.delete(x),qI(m,P)}var UI;UI=function(m,x,P){if(m!==null)if(m.memoizedProps!==x.pendingProps||ea.current)Ya=!0;else{if((m.lanes&P)===0&&(x.flags&128)===0)return Ya=!1,mG(m,x,P);Ya=(m.flags&131072)!==0}else Ya=!1,Je&&(x.flags&1048576)!==0&&ct(x,fe,x.index);switch(x.lanes=0,x.tag){case 2:var L=x.type;jy(m,x),m=x.pendingProps;var V=oh(x,ei.current);Zn(x,P),V=zf(null,x,L,m,V,P);var Z=ol();return x.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,ta(L)?(Z=!0,Gd(x)):Z=!1,x.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,gp(x),V.updater=yy,x.stateNode=V,V._reactInternals=x,Bw(x,L,m,P),x=Vw(null,x,L,!0,Z,P)):(x.tag=0,Je&&Z&&Xe(x),Ea(null,x,V,P),x=x.child),x;case 16:L=x.elementType;e:{switch(jy(m,x),m=x.pendingProps,V=L._init,L=V(L._payload),x.type=L,V=x.tag=TG(L),m=Vl(L,m),V){case 0:x=Uw(null,x,L,m,P);break e;case 1:x=pI(null,x,L,m,P);break e;case 11:x=dI(null,x,L,m,P);break e;case 14:x=uI(null,x,L,Vl(L.type,m),P);break e}throw Error(r(306,L,""))}return x;case 0:return L=x.type,V=x.pendingProps,V=x.elementType===L?V:Vl(L,V),Uw(m,x,L,V,P);case 1:return L=x.type,V=x.pendingProps,V=x.elementType===L?V:Vl(L,V),pI(m,x,L,V,P);case 3:e:{if(gI(x),m===null)throw Error(r(387));L=x.pendingProps,Z=x.memoizedState,V=Z.element,Nv(m,x),Bl(x,L,null,P);var ce=x.memoizedState;if(L=ce.element,Z.isDehydrated)if(Z={element:L,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},x.updateQueue.baseState=Z,x.memoizedState=Z,x.flags&256){V=Cp(Error(r(423)),x),x=vI(m,x,L,P,V);break e}else if(L!==V){V=Cp(Error(r(424)),x),x=vI(m,x,L,P,V);break e}else for(rt=Oi(x.stateNode.containerInfo.firstChild),Re=x,Je=!0,at=null,P=on(x,null,L,P),x.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(Tr(),L===V){x=Zd(m,x,P);break e}Ea(m,x,L,P)}x=x.child}return x;case 5:return fy(x),m===null&&Tt(x),L=x.type,V=x.pendingProps,Z=m!==null?m.memoizedProps:null,ce=V.children,xv(L,V)?ce=null:Z!==null&&xv(L,Z)&&(x.flags|=32),mI(m,x),Ea(m,x,ce,P),x.child;case 6:return m===null&&Tt(x),null;case 13:return xI(m,x,P);case 4:return dh(x,x.stateNode.containerInfo),L=x.pendingProps,m===null?x.child=Is(x,null,L,P):Ea(m,x,L,P),x.child;case 11:return L=x.type,V=x.pendingProps,V=x.elementType===L?V:Vl(L,V),dI(m,x,L,V,P);case 7:return Ea(m,x,x.pendingProps,P),x.child;case 8:return Ea(m,x,x.pendingProps.children,P),x.child;case 12:return Ea(m,x,x.pendingProps.children,P),x.child;case 10:e:{if(L=x.type._context,V=x.pendingProps,Z=x.memoizedProps,ce=V.value,yn(vi,L._currentValue),L._currentValue=ce,Z!==null)if(Jr(Z.value,ce)){if(Z.children===V.children&&!ea.current){x=Zd(m,x,P);break e}}else for(Z=x.child,Z!==null&&(Z.return=x);Z!==null;){var Ee=Z.dependencies;if(Ee!==null){ce=Z.child;for(var ke=Ee.firstContext;ke!==null;){if(ke.context===L){if(Z.tag===1){ke=Wa(-1,P&-P),ke.tag=2;var Ye=Z.updateQueue;if(Ye!==null){Ye=Ye.shared;var gt=Ye.pending;gt===null?ke.next=ke:(ke.next=gt.next,gt.next=ke),Ye.pending=ke}}Z.lanes|=P,ke=Z.alternate,ke!==null&&(ke.lanes|=P),Ha(Z.return,P,x),Ee.lanes|=P;break}ke=ke.next}}else if(Z.tag===10)ce=Z.type===x.type?null:Z.child;else if(Z.tag===18){if(ce=Z.return,ce===null)throw Error(r(341));ce.lanes|=P,Ee=ce.alternate,Ee!==null&&(Ee.lanes|=P),Ha(ce,P,x),ce=Z.sibling}else ce=Z.child;if(ce!==null)ce.return=Z;else for(ce=Z;ce!==null;){if(ce===x){ce=null;break}if(Z=ce.sibling,Z!==null){Z.return=ce.return,ce=Z;break}ce=ce.return}Z=ce}Ea(m,x,V.children,P),x=x.child}return x;case 9:return V=x.type,L=x.pendingProps.children,Zn(x,P),V=js(V),L=L(V),x.flags|=1,Ea(m,x,L,P),x.child;case 14:return L=x.type,V=Vl(L,x.pendingProps),V=Vl(L.type,V),uI(m,x,L,V,P);case 15:return hI(m,x,x.type,x.pendingProps,P);case 17:return L=x.type,V=x.pendingProps,V=x.elementType===L?V:Vl(L,V),jy(m,x),x.tag=1,ta(L)?(m=!0,Gd(x)):m=!1,Zn(x,P),nI(x,L,V),Bw(x,L,V,P),Vw(null,x,L,!0,m,P);case 19:return bI(m,x,P);case 22:return fI(m,x,P)}throw Error(r(156,x.tag))};function VI(m,x){return jd(m,x)}function PG(m,x,P,L){this.tag=m,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cl(m,x,P,L){return new PG(m,x,P,L)}function d2(m){return m=m.prototype,!(!m||!m.isReactComponent)}function TG(m){if(typeof m=="function")return d2(m)?1:0;if(m!=null){if(m=m.$$typeof,m===T)return 11;if(m===z)return 14}return 2}function yh(m,x){var P=m.alternate;return P===null?(P=cl(m.tag,x,m.key,m.mode),P.elementType=m.elementType,P.type=m.type,P.stateNode=m.stateNode,P.alternate=m,m.alternate=P):(P.pendingProps=x,P.type=m.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=m.flags&14680064,P.childLanes=m.childLanes,P.lanes=m.lanes,P.child=m.child,P.memoizedProps=m.memoizedProps,P.memoizedState=m.memoizedState,P.updateQueue=m.updateQueue,x=m.dependencies,P.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},P.sibling=m.sibling,P.index=m.index,P.ref=m.ref,P}function Dy(m,x,P,L,V,Z){var ce=2;if(L=m,typeof m=="function")d2(m)&&(ce=1);else if(typeof m=="string")ce=5;else e:switch(m){case A:return Kf(P.children,V,Z,x);case _:ce=8,V|=8;break;case k:return m=cl(12,P,x,V|2),m.elementType=k,m.lanes=Z,m;case R:return m=cl(13,P,x,V),m.elementType=R,m.lanes=Z,m;case O:return m=cl(19,P,x,V),m.elementType=O,m.lanes=Z,m;case B:return ky(P,V,Z,x);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case F:ce=10;break e;case I:ce=9;break e;case T:ce=11;break e;case z:ce=14;break e;case q:ce=16,L=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return x=cl(ce,P,x,V),x.elementType=m,x.type=L,x.lanes=Z,x}function Kf(m,x,P,L){return m=cl(7,m,L,x),m.lanes=P,m}function ky(m,x,P,L){return m=cl(22,m,L,x),m.elementType=B,m.lanes=P,m.stateNode={isHidden:!1},m}function u2(m,x,P){return m=cl(6,m,null,x),m.lanes=P,m}function h2(m,x,P){return x=cl(4,m.children!==null?m.children:[],m.key,x),x.lanes=P,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}function _G(m,x,P,L,V){this.tag=x,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=L,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function f2(m,x,P,L,V,Z,ce,Ee,ke){return m=new _G(m,x,P,Ee,ke),x===1?(x=1,Z===!0&&(x|=8)):x=0,Z=cl(3,null,null,x),m.current=Z,Z.stateNode=m,Z.memoizedState={element:L,isDehydrated:P,cache:null,transitions:null,pendingSuspenseBoundaries:null},gp(Z),m}function IG(m,x,P){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:L==null?null:""+L,children:m,containerInfo:x,implementation:P}}function HI(m){if(!m)return Fc;m=m._reactInternals;e:{if(Qs(m)!==m||m.tag!==1)throw Error(r(170));var x=m;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(ta(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(m.tag===1){var P=m.type;if(ta(P))return wv(m,P,x)}return x}function WI(m,x,P,L,V,Z,ce,Ee,ke){return m=f2(P,L,!0,m,V,Z,ce,Ee,ke),m.context=HI(null),P=m.current,L=Pa(),V=vh(P),Z=Wa(L,V),Z.callback=x??null,Ga(P,Z,V),m.current.lanes=V,Sc(m,V,L),Za(m,L),m}function Oy(m,x,P,L){var V=x.current,Z=Pa(),ce=vh(V);return P=HI(P),x.context===null?x.context=P:x.pendingContext=P,x=Wa(Z,ce),x.payload={element:m},L=L===void 0?null:L,L!==null&&(x.callback=L),m=Ga(V,x,ce),m!==null&&(Gl(m,V,ce,Z),Kd(m,V,ce)),ce}function Ry(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function GI(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var P=m.retryLane;m.retryLane=P!==0&&P<x?P:x}}function m2(m,x){GI(m,x),(m=m.alternate)&&GI(m,x)}function DG(){return null}var KI=typeof reportError=="function"?reportError:function(m){console.error(m)};function p2(m){this._internalRoot=m}Ly.prototype.render=p2.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(r(409));Oy(m,x,null,null)},Ly.prototype.unmount=p2.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;Hf(function(){Oy(null,m,null,null)}),x[gi]=null}};function Ly(m){this._internalRoot=m}Ly.prototype.unstable_scheduleHydration=function(m){if(m){var x=Ko();m={blockedOn:null,target:m,priority:x};for(var P=0;P<Xo.length&&x!==0&&x<Xo[P].priority;P++);Xo.splice(P,0,m),P===0&&Mu(m)}};function g2(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function My(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function YI(){}function kG(m,x,P,L,V){if(V){if(typeof L=="function"){var Z=L;L=function(){var Ye=Ry(ce);Z.call(Ye)}}var ce=WI(x,L,m,0,null,!1,!1,"",YI);return m._reactRootContainer=ce,m[gi]=ce.current,qd(m.nodeType===8?m.parentNode:m),Hf(),ce}for(;V=m.lastChild;)m.removeChild(V);if(typeof L=="function"){var Ee=L;L=function(){var Ye=Ry(ke);Ee.call(Ye)}}var ke=f2(m,0,!1,null,null,!1,!1,"",YI);return m._reactRootContainer=ke,m[gi]=ke.current,qd(m.nodeType===8?m.parentNode:m),Hf(function(){Oy(x,ke,P,L)}),ke}function Fy(m,x,P,L,V){var Z=P._reactRootContainer;if(Z){var ce=Z;if(typeof V=="function"){var Ee=V;V=function(){var ke=Ry(ce);Ee.call(ke)}}Oy(x,ce,m,V)}else ce=kG(P,x,m,V,L);return Ry(ce)}ip=function(m){switch(m.tag){case 3:var x=m.stateNode;if(x.current.memoizedState.isDehydrated){var P=Ad(x.pendingLanes);P!==0&&(Ou(x,P|1),Za(x,Wn()),(en&6)===0&&(Tp=Wn()+500,Q()))}break;case 13:Hf(function(){var L=ln(m,1);if(L!==null){var V=Pa();Gl(L,m,1,V)}}),m2(m,1)}},wf=function(m){if(m.tag===13){var x=ln(m,134217728);if(x!==null){var P=Pa();Gl(x,m,134217728,P)}m2(m,134217728)}},ap=function(m){if(m.tag===13){var x=vh(m),P=ln(m,x);if(P!==null){var L=Pa();Gl(P,m,x,L)}m2(m,x)}},Ko=function(){return Qr},Ed=function(m,x){var P=Qr;try{return Qr=m,x()}finally{Qr=P}},Ln=function(m,x,P){switch(x){case"input":if(it(m,P),x=P.name,P.type==="radio"&&x!=null){for(P=m;P.parentNode;)P=P.parentNode;for(P=P.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<P.length;x++){var L=P[x];if(L!==m&&L.form===m.form){var V=$f(L);if(!V)throw Error(r(90));Ce(L),it(L,V)}}}break;case"textarea":Ze(m,P);break;case"select":x=P.value,x!=null&&vt(m,!!P.multiple,x,!1)}},yc=o2,Hs=Hf;var OG={usingClientEntryPoint:!1,Events:[ah,Hd,$f,gr,Zr,o2]},Ov={findFiberByHostInstance:Mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RG={bundleType:Ov.bundleType,version:Ov.version,rendererPackageName:Ov.rendererPackageName,rendererConfig:Ov.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=jc(m),m===null?null:m.stateNode},findFiberByHostInstance:Ov.findFiberByHostInstance||DG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$y.isDisabled&&$y.supportsFiber)try{Nd=$y.inject(RG),$a=$y}catch{}}return Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OG,Ja.createPortal=function(m,x){var P=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g2(x))throw Error(r(200));return IG(m,x,null,P)},Ja.createRoot=function(m,x){if(!g2(m))throw Error(r(299));var P=!1,L="",V=KI;return x!=null&&(x.unstable_strictMode===!0&&(P=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onRecoverableError!==void 0&&(V=x.onRecoverableError)),x=f2(m,1,!1,null,null,P,!1,L,V),m[gi]=x.current,qd(m.nodeType===8?m.parentNode:m),new p2(x)},Ja.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=jc(x),m=m===null?null:m.stateNode,m},Ja.flushSync=function(m){return Hf(m)},Ja.hydrate=function(m,x,P){if(!My(x))throw Error(r(200));return Fy(null,m,x,!0,P)},Ja.hydrateRoot=function(m,x,P){if(!g2(m))throw Error(r(405));var L=P!=null&&P.hydratedSources||null,V=!1,Z="",ce=KI;if(P!=null&&(P.unstable_strictMode===!0&&(V=!0),P.identifierPrefix!==void 0&&(Z=P.identifierPrefix),P.onRecoverableError!==void 0&&(ce=P.onRecoverableError)),x=WI(x,null,m,1,P??null,V,!1,Z,ce),m[gi]=x.current,qd(m),L)for(m=0;m<L.length;m++)P=L[m],V=P._getVersion,V=V(P._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[P,V]:x.mutableSourceEagerHydrationData.push(P,V);return new Ly(x)},Ja.render=function(m,x,P){if(!My(x))throw Error(r(200));return Fy(null,m,x,!1,P)},Ja.unmountComponentAtNode=function(m){if(!My(m))throw Error(r(40));return m._reactRootContainer?(Hf(function(){Fy(null,null,m,!1,function(){m._reactRootContainer=null,m[gi]=null})}),!0):!1},Ja.unstable_batchedUpdates=o2,Ja.unstable_renderSubtreeIntoContainer=function(m,x,P,L){if(!My(P))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Fy(m,x,P,!1,L)},Ja.version="18.3.1-next-f1338f8080-20240426",Ja}var i3;function T7(){if(i3)return b2.exports;i3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),b2.exports=VG(),b2.exports}var a3;function HG(){if(a3)return By;a3=1;var t=T7();return By.createRoot=t.createRoot,By.hydrateRoot=t.hydrateRoot,By}var WG=HG();const GG=Kr(WG),_a=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IC=[.001,0,0,.001,0,0],N2=1.35,_o={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ou={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_7="pdfjs_internal_editor_",Sr={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ur={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},I7={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ca={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Rs={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Vp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},I0={ERRORS:0,WARNINGS:1,INFOS:5},Ix={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zy={moveTo:0,lineTo:1,curveTo:2,closePath:3},D7={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let hj=I0.WARNINGS;function KG(t){Number.isInteger(t)&&(hj=t)}function YG(){return hj}function fj(t){hj>=I0.INFOS&&console.log(`Info: ${t}`)}function Pr(t){hj>=I0.WARNINGS&&console.log(`Warning: ${t}`)}function In(t){throw new Error(t)}function Xs(t,e){t||In(e)}function XG(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function f4(t,e=null,r=null){if(!t)return null;if(r&&typeof t=="string"&&(r.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),r.tryConvertEncoding))try{t=tK(t)}catch{}const s=e?URL.parse(t,e):URL.parse(t);return XG(s)?s:null}function m4(t,e,r=!1){const s=URL.parse(t);return s?(s.hash=e,s.href):r&&f4(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Fr(t,e,r,s=!1){return Object.defineProperty(t,e,{value:r,enumerable:!s,configurable:!0,writable:!1}),r}const Bm=function(){function e(r,s){this.message=r,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class o3 extends Bm{constructor(e,r){super(e,"PasswordException"),this.code=r}}class S2 extends Bm{constructor(e,r){super(e,"UnknownErrorException"),this.details=r}}class Ub extends Bm{constructor(e){super(e,"InvalidPDFException")}}class Dx extends Bm{constructor(e,r,s){super(e,"ResponseException"),this.status=r,this.missing=s}}class ZG extends Bm{constructor(e){super(e,"FormatError")}}class pu extends Bm{constructor(e){super(e,"AbortException")}}function k7(t){(typeof t!="object"||t?.length===void 0)&&In("Invalid argument for bytesToString");const e=t.length,r=8192;if(e<r)return String.fromCharCode.apply(null,t);const s=[];for(let i=0;i<e;i+=r){const a=Math.min(i+r,e),o=t.subarray(i,a);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function D0(t){typeof t!="string"&&In("Invalid argument for stringToBytes");const e=t.length,r=new Uint8Array(e);for(let s=0;s<e;++s)r[s]=t.charCodeAt(s)&255;return r}function QG(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function JG(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function eK(){try{return new Function(""),!0}catch{return!1}}class Si{static get isLittleEndian(){return Fr(this,"isLittleEndian",JG())}static get isEvalSupported(){return Fr(this,"isEvalSupported",eK())}static get isOffscreenCanvasSupported(){return Fr(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fr(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:r}=navigator;return Fr(this,"platform",{isAndroid:r.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:r.includes("Firefox")})}static get isCSSRoundSupported(){return Fr(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const A2=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Jt{static makeHexColor(e,r,s){return`#${A2[e]}${A2[r]}${A2[s]}`}static scaleMinMax(e,r){let s;e[0]?(e[0]<0&&(s=r[0],r[0]=r[2],r[2]=s),r[0]*=e[0],r[2]*=e[0],e[3]<0&&(s=r[1],r[1]=r[3],r[3]=s),r[1]*=e[3],r[3]*=e[3]):(s=r[0],r[0]=r[1],r[1]=s,s=r[2],r[2]=r[3],r[3]=s,e[1]<0&&(s=r[1],r[1]=r[3],r[3]=s),r[1]*=e[1],r[3]*=e[1],e[2]<0&&(s=r[0],r[0]=r[2],r[2]=s),r[0]*=e[2],r[2]*=e[2]),r[0]+=e[4],r[1]+=e[5],r[2]+=e[4],r[3]+=e[5]}static transform(e,r){return[e[0]*r[0]+e[2]*r[1],e[1]*r[0]+e[3]*r[1],e[0]*r[2]+e[2]*r[3],e[1]*r[2]+e[3]*r[3],e[0]*r[4]+e[2]*r[5]+e[4],e[1]*r[4]+e[3]*r[5]+e[5]]}static applyTransform(e,r,s=0){const i=e[s],a=e[s+1];e[s]=i*r[0]+a*r[2]+r[4],e[s+1]=i*r[1]+a*r[3]+r[5]}static applyTransformToBezier(e,r,s=0){const i=r[0],a=r[1],o=r[2],l=r[3],c=r[4],d=r[5];for(let u=0;u<6;u+=2){const h=e[s+u],f=e[s+u+1];e[s+u]=h*i+f*o+c,e[s+u+1]=h*a+f*l+d}}static applyInverseTransform(e,r){const s=e[0],i=e[1],a=r[0]*r[3]-r[1]*r[2];e[0]=(s*r[3]-i*r[2]+r[2]*r[5]-r[4]*r[3])/a,e[1]=(-s*r[1]+i*r[0]+r[4]*r[1]-r[5]*r[0])/a}static axialAlignedBoundingBox(e,r,s){const i=r[0],a=r[1],o=r[2],l=r[3],c=r[4],d=r[5],u=e[0],h=e[1],f=e[2],p=e[3];let y=i*u+c,v=y,g=i*f+c,b=g,j=l*h+d,w=j,C=l*p+d,E=C;if(a!==0||o!==0){const N=a*u,A=a*f,_=o*h,k=o*p;y+=_,b+=_,g+=k,v+=k,j+=N,E+=N,C+=A,w+=A}s[0]=Math.min(s[0],y,g,v,b),s[1]=Math.min(s[1],j,C,w,E),s[2]=Math.max(s[2],y,g,v,b),s[3]=Math.max(s[3],j,C,w,E)}static inverseTransform(e){const r=e[0]*e[3]-e[1]*e[2];return[e[3]/r,-e[1]/r,-e[2]/r,e[0]/r,(e[2]*e[5]-e[4]*e[3])/r,(e[4]*e[1]-e[5]*e[0])/r]}static singularValueDecompose2dScale(e,r){const s=e[0],i=e[1],a=e[2],o=e[3],l=s**2+i**2,c=s*a+i*o,d=a**2+o**2,u=(l+d)/2,h=Math.sqrt(u**2-(l*d-c**2));r[0]=Math.sqrt(u+h||1),r[1]=Math.sqrt(u-h||1)}static normalizeRect(e){const r=e.slice(0);return e[0]>e[2]&&(r[0]=e[2],r[2]=e[0]),e[1]>e[3]&&(r[1]=e[3],r[3]=e[1]),r}static intersect(e,r){const s=Math.max(Math.min(e[0],e[2]),Math.min(r[0],r[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(r[0],r[2]));if(s>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(r[1],r[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(r[1],r[3]));return a>o?null:[s,a,i,o]}static pointBoundingBox(e,r,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],r),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],r)}static rectBoundingBox(e,r,s,i,a){a[0]=Math.min(a[0],e,s),a[1]=Math.min(a[1],r,i),a[2]=Math.max(a[2],e,s),a[3]=Math.max(a[3],r,i)}static#e(e,r,s,i,a,o,l,c,d,u){if(d<=0||d>=1)return;const h=1-d,f=d*d,p=f*d,y=h*(h*(h*e+3*d*r)+3*f*s)+p*i,v=h*(h*(h*a+3*d*o)+3*f*l)+p*c;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],v)}static#t(e,r,s,i,a,o,l,c,d,u,h,f){if(Math.abs(d)<1e-12){Math.abs(u)>=1e-12&&this.#e(e,r,s,i,a,o,l,c,-h/u,f);return}const p=u**2-4*h*d;if(p<0)return;const y=Math.sqrt(p),v=2*d;this.#e(e,r,s,i,a,o,l,c,(-u+y)/v,f),this.#e(e,r,s,i,a,o,l,c,(-u-y)/v,f)}static bezierBoundingBox(e,r,s,i,a,o,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],r,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],r,c),this.#t(e,s,a,l,r,i,o,c,3*(-e+3*(s-a)+l),6*(e-2*s+a),3*(s-e),d),this.#t(e,s,a,l,r,i,o,c,3*(-r+3*(i-o)+c),6*(r-2*i+o),3*(i-r),d)}}function tK(t){return decodeURIComponent(escape(t))}let C2=null,l3=null;function O7(t){return C2||(C2=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,l3=new Map([["ﬅ","ſt"]])),t.replaceAll(C2,(e,r,s)=>r?r.normalize("NFKC"):l3.get(s))}function p4(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),k7(t)}const g4="pdfjs_internal_id_";function rK(t,e,r){if(!Array.isArray(r)||r.length<2)return!1;const[s,i,...a]=r;if(!t(s)&&!Number.isInteger(s)||!e(i))return!1;const o=a.length;let l=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function ua(t,e,r){return Math.min(Math.max(t,e),r)}function R7(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(k7(t))}function nK(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):D0(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(r=>{r(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,r)=>e+r,0)});const tu="http://www.w3.org/2000/svg";class Cm{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Kg(t,e="text"){if(sx(t,document.baseURI)){const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);switch(e){case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"json":return r.json()}return r.text()}return new Promise((r,s)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":r(i.response);return}r(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class k0{constructor({viewBox:e,userUnit:r,scale:s,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=r,this.scale=s,this.rotation=i,this.offsetX=a,this.offsetY=o,s*=r;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let u,h,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,h=0,f=0,p=1;break;case 90:u=0,h=1,f=1,p=0;break;case 270:u=0,h=-1,f=-1,p=0;break;case 0:u=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let y,v,g,b;u===0?(y=Math.abs(d-e[1])*s+a,v=Math.abs(c-e[0])*s+o,g=(e[3]-e[1])*s,b=(e[2]-e[0])*s):(y=Math.abs(c-e[0])*s+a,v=Math.abs(d-e[1])*s+o,g=(e[2]-e[0])*s,b=(e[3]-e[1])*s),this.transform=[u*s,h*s,f*s,p*s,y-u*s*c-f*s*d,v-h*s*c-p*s*d],this.width=g,this.height=b}get rawDims(){const e=this.viewBox;return Fr(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:r=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new k0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:r,offsetX:s,offsetY:i,dontFlip:a})}convertToViewportPoint(e,r){const s=[e,r];return Jt.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const r=[e[0],e[1]];Jt.applyTransform(r,this.transform);const s=[e[2],e[3]];return Jt.applyTransform(s,this.transform),[r[0],r[1],s[0],s[1]]}convertToPdfPoint(e,r){const s=[e,r];return Jt.applyInverseTransform(s,this.transform),s}}class mj extends Bm{constructor(e,r=0){super(e,"RenderingCancelledException"),this.extraDelay=r}}function O0(t){const e=t.length;let r=0;for(;r<e&&t[r].trim()==="";)r++;return t.substring(r,r+5).toLowerCase()==="data:"}function pj(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function L7(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function M7(t,e="document.pdf"){if(typeof t!="string")return e;if(O0(t))return Pr('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!s)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},a=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(a.test(o))return i(o);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const c=Array.from(s.searchParams.keys()).reverse();for(const d of c)if(a.test(d))return i(d)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return i(c[0])}return e}class c3{started=Object.create(null);times=[];time(e){e in this.started&&Pr(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Pr(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let r=0;for(const{name:s}of this.times)r=Math.max(s.length,r);for(const{name:s,start:i,end:a}of this.times)e.push(`${s.padEnd(r)} ${a-i}ms
`);return e.join("")}}function sx(t,e){const r=e?URL.parse(t,e):URL.parse(t);return r?.protocol==="http:"||r?.protocol==="https:"}function wl(t){t.preventDefault()}function Fs(t){t.preventDefault(),t.stopPropagation()}function sK(t){console.log("Deprecated API usage: "+t)}class v4{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const r=this.#e.exec(e);if(!r)return null;const s=parseInt(r[1],10);let i=parseInt(r[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(r[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(r[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(r[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(r[6],10);c=c>=0&&c<=59?c:0;const d=r[7]||"Z";let u=parseInt(r[8],10);u=u>=0&&u<=23?u:0;let h=parseInt(r[9],10)||0;return h=h>=0&&h<=59?h:0,d==="-"?(o+=u,l+=h):d==="+"&&(o-=u,l-=h),new Date(Date.UTC(s,i,a,o,l,c))}}function F7(t,{scale:e=1,rotation:r=0}){const{width:s,height:i}=t.attributes.style,a=[0,0,parseInt(s),parseInt(i)];return new k0({viewBox:a,userUnit:1,scale:e,rotation:r})}function x4(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Pr(`Not a valid color format: "${t}"`),[0,0,0])}function iK(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const r of t.keys()){e.style.color=r;const s=window.getComputedStyle(e).color;t.set(r,x4(s))}e.remove()}function hs(t){const{a:e,b:r,c:s,d:i,e:a,f:o}=t.getTransform();return[e,r,s,i,a,o]}function Hc(t){const{a:e,b:r,c:s,d:i,e:a,f:o}=t.getTransform().invertSelf();return[e,r,s,i,a,o]}function Yh(t,e,r=!1,s=!0){if(e instanceof k0){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=t,l=Si.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!r||e.rotation%180===0?(o.width=u,o.height=h):(o.width=h,o.height=u)}s&&t.setAttribute("data-main-rotation",e.rotation)}class lc{constructor(){const{pixelRatio:e}=lc;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,r,s,i,a=-1){let o=1/0,l=1/0,c=1/0;s=lc.capPixels(s,a),s>0&&(o=Math.sqrt(s/(e*r))),i!==-1&&(l=i/e,c=i/r);const d=Math.min(o,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,r){if(r>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+r/100));return e>0?Math.min(e,s):s}return e}}const Vb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ux{#e=null;#t=null;#r;#n=null;#i=null;#s=null;static#o=null;constructor(e){this.#r=e,ux.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const r=this.#r._uiManager._signal;e.addEventListener("contextmenu",wl,{signal:r}),e.addEventListener("pointerdown",ux.#a,{signal:r});const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const i=this.#r.toolbarPosition;if(i){const{style:a}=e,o=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#a(e){e.stopPropagation()}#u(e){this.#r._focusEventsAllowed=!1,Fs(e)}#l(e){this.#r._focusEventsAllowed=!0,Fs(e)}#h(e){const r=this.#r._uiManager._signal;e.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:r}),e.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:r}),e.addEventListener("contextmenu",wl,{signal:r})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:r}=this.#r,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",ux.#o[e]),this.#h(s),s.addEventListener("click",i=>{r.delete()},{signal:r._signal}),this.#n.append(s)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const r=await e.render();this.#h(r),this.#n.append(r,this.#d),this.#i=e}addColorPicker(e){this.#t=e;const r=e.renderButton();this.#h(r),this.#n.append(r,this.#d)}async addEditSignatureButton(e){const r=this.#s=await e.renderEditButton(this.#r);this.#h(r),this.#n.append(r,this.#d)}async addButton(e,r){switch(e){case"colorPicker":this.addColorPicker(r);break;case"altText":await this.addAltText(r);break;case"editSignature":await this.addEditSignatureButton(r);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){this.#s&&(this.#s.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class aK{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",wl,{signal:this.#r._signal});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#s(),e}#i(e,r){let s=0,i=0;for(const a of e){const o=a.y+a.height;if(o<s)continue;const l=a.x+(r?a.width:0);if(o>s){i=l,s=o;continue}r?l>i&&(i=l):l<i&&(i=l)}return[r?1-i:i,s]}show(e,r,s){const[i,a]=this.#i(r,s),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const r=document.createElement("span");e.append(r),r.className="visuallyHidden",r.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#r._signal;e.addEventListener("contextmenu",wl,{signal:s}),e.addEventListener("click",()=>{this.#r.highlightSelection("floating_button")},{signal:s}),this.#e.append(e)}}function $7(t,e,r){for(const s of r)e.addEventListener(s,t[s].bind(t))}class oK{#e=0;get id(){return`${_7}${this.#e++}`}}class y4{#e=p4();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Fr(this,"_isSVGFittingCanvas",a)}async#n(e,r){this.#r||=new Map;let s=this.#r.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof r=="string"?(s.url=r,i=await Kg(r,"blob")):r instanceof File?i=s.file=r:r instanceof Blob&&(i=r),i.type==="image/svg+xml"){const a=y4._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((d,u)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,d()},o.onload=async()=>{const h=s.svgUrl=o.result;l.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},l.onerror=o.onerror=u});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Pr(i),s=null}return this.#r.set(e,s),s&&this.#r.set(s.id,s),s}async getFromFile(e){const{lastModified:r,name:s,size:i,type:a}=e;return this.#n(`${r}_${s}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,r){const s=await r;return this.#n(e,s)}async getFromId(e){this.#r||=new Map;const r=this.#r.get(e);if(!r)return null;if(r.bitmap)return r.refCounter+=1,r;if(r.file)return this.getFromFile(r.file);if(r.blobPromise){const{blobPromise:s}=r;return delete r.blobPromise,this.getFromBlob(r.id,s)}return this.getFromUrl(r.url)}getFromCanvas(e,r){this.#r||=new Map;let s=this.#r.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(r.width,r.height);return i.getContext("2d").drawImage(r,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,s),this.#r.set(s.id,s),s}getSvgUrl(e){const r=this.#r.get(e);return r?.isSvg?r.svgUrl:null}deleteId(e){this.#r||=new Map;const r=this.#r.get(e);if(!r||(r.refCounter-=1,r.refCounter!==0))return;const{bitmap:s}=r;if(!r.url&&!r.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),r.blobPromise=i.convertToBlob()}s.close?.(),r.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class lK{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:r,post:s,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const c={cmd:e,undo:r,post:s,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(o&&this.#e[this.#n].type===a){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const d=this.#n+1;d===this.#r?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:r}=this.#e[this.#n];e(),r?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:r}=this.#e[this.#n];e(),r?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let r=this.#n;r>=0;r--)if(this.#e[r].type!==e){this.#e.splice(r+1,this.#n-r),this.#n=r;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class R0{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:r}=Si.platform;for(const[s,i,a={}]of e)for(const o of s){const l=o.startsWith("mac+");r&&l?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!r&&!l&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const r=this.buffer.join("+");return this.buffer.length=0,r}exec(e,r){if(!this.allKeys.has(r.key))return;const s=this.callbacks.get(this.#e(r));if(!s)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:l=null}}=s;l&&!l(e,r)||(i.bind(e,...o,r)(),a||Fs(r))}}class b4{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return iK(e),Fr(this,"_colors",e)}convert(e){const r=x4(e);if(!window.matchMedia("(forced-colors: active)").matches)return r;for(const[s,i]of this._colors)if(i.every((a,o)=>a===r[o]))return b4._colorsMapping.get(s);return r}getHexCode(e){const r=this._colors.get(e);return r?Jt.makeHexColor(...r):e}}class gu{#e=new AbortController;#t=null;#r=new Map;#n=new Map;#i=null;#s=null;#o=null;#a=new lK;#u=null;#l=null;#h=0;#d=new Set;#f=null;#m=null;#p=new Set;_editorUndoBar=null;#c=!1;#g=!1;#v=!1;#x=null;#b=null;#j=null;#w=null;#A=!1;#E=null;#T=new oK;#N=!1;#P=!1;#C=null;#I=null;#D=null;#k=null;#B=null;#S=Sr.NONE;#y=new Set;#M=null;#F=null;#U=null;#V=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#O=null;#R=null;#q=null;#Y=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=gu.prototype,r=o=>o.#R.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Fr(this,"_keyboardManager",new R0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#R.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#R.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:r}]]))}constructor(e,r,s,i,a,o,l,c,d,u,h,f,p,y,v){const g=this._signal=this.#e.signal;this.#R=e,this.#q=r,this.#Y=s,this.#i=i,this.#F=a,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:g}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),o._on("setpreference",this.onSetPreference.bind(this),{signal:g}),o._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:g}),this.#se(),this.#le(),this.#Z(),this.#s=l.annotationStorage,this.#x=l.filterFactory,this.#U=c,this.#w=d||null,this.#c=u,this.#g=h,this.#v=f,this.#B=p||null,this.viewParameters={realScale:Cm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=v!==!1}destroy(){this.#L?.resolve(),this.#L=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#r.clear(),this.#p.clear(),this.#k?.clear(),this.#t=null,this.#y.clear(),this.#a.destroy(),this.#i?.destroy(),this.#F?.destroy(),this.#E?.hide(),this.#E=null,this.#D?.destroy(),this.#D=null,this.#b&&(clearTimeout(this.#b),this.#b=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#B}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Fr(this,"hcmFilter",this.#U?this.#x.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Fr(this,"direction",getComputedStyle(this.#R).direction)}get highlightColors(){return Fr(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return Fr(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=e}setMainHighlightColorPicker(e){this.#D=e}editAltText(e,r=!1){this.#i?.editAltText(this,e,r)}getSignature(e){this.#F?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#F}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=r;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#R.focus()}findParent(e,r){for(const s of this.#n.values()){const{x:i,y:a,width:o,height:l}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&r>=a&&r<=a+l)return s}return null}disableUserSelect(e=!1){this.#q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Cm.PDF_TO_CSS_UNITS;for(const r of this.#p)r.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#G({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#X(e){const{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(const s of this.#n.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e=""){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o}=r,l=r.toString(),d=this.#G(r).closest(".textLayer"),u=this.getSelectionBoxes(d);if(!u)return;r.empty();const h=this.#X(d),f=this.#S===Sr.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Sr.HIGHLIGHT,p);return}p()}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#G(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#E||=new aK(this),this.#E.show(s,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,r=null){const s=this.#Y;s&&(s.setAttribute("data-l10n-id",e),r?s.setAttribute("data-l10n-args",JSON.stringify(r)):s.removeAttribute("data-l10n-args"))}#ne(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#E?.hide(),this.#M=null,this.#_({hasSelectedText:!1}));return}const{anchorNode:r}=e;if(r===this.#M)return;const i=this.#G(e).closest(".textLayer");if(!i){this.#M&&(this.#E?.hide(),this.#M=null,this.#_({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#M=r,this.#_({hasSelectedText:!0}),!(this.#S!==Sr.HIGHLIGHT&&this.#S!==Sr.NONE)&&(this.#S===Sr.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#S===Sr.HIGHLIGHT?this.#X(i):null;a?.toggleDrawing();const o=new AbortController,l=this.combinedSignal(o),c=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#K(e=""){this.#S===Sr.HIGHLIGHT?this.highlightSelection(e):this.#c&&this.#re()}#se(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#ie(){if(this.#j)return;this.#j=new AbortController;const e=this.combinedSignal(this.#j);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ae(){this.#j?.abort(),this.#j=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const r of this.#y)if(r.div.contains(e)){this.#I=[r,e],r._focusEventsAllowed=!1;break}}focus(){if(!this.#I)return;const[e,r]=this.#I;this.#I=null,r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#Z(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#oe(){this.#C?.abort(),this.#C=null}#Q(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#J(){this.#u?.abort(),this.#u=null}#le(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#Z(),this.#Q()}removeEditListeners(){this.#oe(),this.#J()}dragOver(e){for(const{type:r}of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const r of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(r.type)){s.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const r=[];for(const s of this.#y){const i=s.serialize(!0);i&&r.push(i)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:r}=e;for(const a of r.items)for(const o of this.#m)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let s=r.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(a){Pr(`paste: "${a.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of s){const d=await i.deserialize(c);if(!d)return;a.push(d)}const o=()=>{for(const c of a)this.#ee(c);this.#te(a)},l=()=>{for(const c of a)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(a){Pr(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==Sr.NONE&&!this.isEditorHandlingKeyboard&&gu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#_(e){Object.entries(e).some(([s,i])=>this.#H[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#S===Sr.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[Ur.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ie(),this.#Q(),this.#_({isEditing:this.#S!==Sr.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ae(),this.#J(),this.#_({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#m){this.#m=e;for(const r of this.#m)this.#$(r.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#n.get(this.#h)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#n.set(e.pageIndex,e),this.#N?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,r=null,s=!1,i=!1){if(this.#S!==e&&!(this.#L&&(await this.#L.promise,!this.#L))){if(this.#L=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#S=e,e===Sr.NONE){this.setEditingState(!1),this.#de(),this._editorUndoBar?.hide(),this.#L.resolve();return}e===Sr.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#ce(),this.unselectAll();for(const a of this.#n.values())a.updateMode(e);if(!r){s&&this.addNewEditorFromKeyboard(),this.#L.resolve();return}for(const a of this.#r.values())a.annotationElementId===r||a.id===r?(this.setSelected(a),i&&a.enterInEditMode()):a.unselect();this.#L.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,r){if(this.#m){switch(e){case Ur.CREATE:this.currentLayer.addNewEditor(r);return;case Ur.HIGHLIGHT_DEFAULT_COLOR:this.#D?.updateColor(r);break;case Ur.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(e,r),this.showAllEditors("highlight",r);break}for(const s of this.#y)s.updateParams(e,r);for(const s of this.#m)s.updateDefaultParams(e,r)}}showAllEditors(e,r,s=!1){for(const a of this.#r.values())a.editorType===e&&a.show(r);(this.#V?.get(Ur.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#$([[Ur.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(this.#P!==e){this.#P=e;for(const r of this.#n.values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}async#ce(){if(!this.#N){this.#N=!0;const e=[];for(const r of this.#n.values())e.push(r.enable());await Promise.all(e);for(const r of this.#r.values())r.enable()}}#de(){if(this.unselectAll(),this.#N){this.#N=!1;for(const e of this.#n.values())e.disable();for(const e of this.#r.values())e.disable()}}getEditors(e){const r=[];for(const s of this.#r.values())s.pageIndex===e&&r.push(s);return r}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.focusMainContainer(),this.#b=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ee(e){const r=this.#n.get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#ue(){let e=null;for(e of this.#y);return e}updateUI(e){this.#ue===e&&this.#$(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#$(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#y.has(e)){this.#y.delete(e),e.unselect(),this.#_({hasSelectedEditor:this.hasSelection});return}this.#y.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#l?.commitOrRemove();for(const r of this.#y)r!==e&&r.unselect();this.#y.clear(),this.#y.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#_({hasSelectedEditor:!0})}isSelected(e){return this.#y.has(e)}get firstSelectedEditor(){return this.#y.values().next().value}unselect(e){e.unselect(),this.#y.delete(e),this.#_({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#y.size!==0}get isEnterHandled(){return this.#y.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#_({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#a.add(e),this.#_({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(e){this.#a.cleanType(e)}#W(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(const e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const r=e?[e]:[...this.#y],s=()=>{this._editorUndoBar?.show(i,r.length===1?r[0].editorType:r.length);for(const a of r)a.remove()},i=()=>{for(const a of r)this.#ee(a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#te(e){for(const r of this.#y)r.unselect();this.#y.clear();for(const r of e)r.isEmpty()||(this.#y.add(r),r.select());this.#_({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#y)e.commit();this.#te(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==Sr.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const e of this.#y)e.unselect();this.#y.clear(),this.#_({hasSelectedEditor:!1})}}translateSelectedEditors(e,r,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=r;const[i,a]=this.#z,o=[...this.#y],l=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#r.has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of o)this.#r.has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},l);for(const c of o)c.translateInPage(e,r),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#y)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let r=!1;for(const[{x:i,y:a,pageIndex:o},l]of e)l.newX=i,l.newY=a,l.newPageIndex=o,r||=i!==l.savedX||a!==l.savedY||o!==l.savedPageIndex;if(!r)return!1;const s=(i,a,o,l)=>{if(this.#r.has(i.id)){const c=this.#n.get(l);c?i._setParentAndPosition(c,a,o):(i.pageIndex=l,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:l}]of e)s(i,a,o,l)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:l}]of e)s(i,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(this.#f)for(const s of this.#f.keys())s.drag(e,r)}rebuild(e){if(e.parent===null){const r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#y.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#S}get imageManager(){return Fr(this,"imageManager",new y4)}getSelectionBoxes(e){if(!e)return null;const r=document.getSelection();for(let d=0,u=r.rangeCount;d<u;d++)if(!e.contains(r.getRangeAt(d).commonAncestorContainer))return null;const{x:s,y:i,width:a,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,u,h,f)=>({x:(u-i)/o,y:1-(d+h-s)/a,width:f/o,height:h/a});break;case"180":l=(d,u,h,f)=>({x:1-(d+h-s)/a,y:1-(u+f-i)/o,width:h/a,height:f/o});break;case"270":l=(d,u,h,f)=>({x:1-(u+f-i)/o,y:(d-s)/a,width:f/o,height:h/a});break;default:l=(d,u,h,f)=>({x:(d-s)/a,y:(u-i)/o,width:h/a,height:f/o});break}const c=[];for(let d=0,u=r.rangeCount;d<u;d++){const h=r.getRangeAt(d);if(!h.collapsed)for(const{x:f,y:p,width:y,height:v}of h.getClientRects())y===0||v===0||c.push(l(f,p,y,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:r}){(this.#o||=new Map).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const r=this.#o?.get(e.data.id);if(!r)return;const s=this.#s.getRawValue(r);s&&(this.#S===Sr.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,r,s){const i=this.#k?.get(e);i&&(i.setCanvas(r,s),this.#k.delete(e))}addMissingCanvas(e,r){(this.#k||=new Map).set(e,r)}}class Xc{#e=null;#t=!1;#r=null;#n=null;#i=null;#s=null;#o=!1;#a=null;#u=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,Xc.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Xc._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const r=this.#n=document.createElement("span");e.append(r),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Xc.#f.missing),r.setAttribute("data-l10n-id",Xc.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#u._uiManager._signal;e.addEventListener("contextmenu",wl,{signal:s}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const i=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#o=!0,i(a))},{signal:s}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Xc._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const r=this.#a=document.createElement("div");r.className="noAltTextBadge",this.#u.div.append(r)}this.#a.classList.toggle("hidden",!e)}serialize(e){let r=this.#e;return!e&&this.#l===r&&(r=this.#h),{altText:r,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:r,guessedText:s,textWithDisclaimer:i,cancel:a=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===r)&&(a||(this.#e=e,this.#t=r),this.#p())}toggle(e=!1){this.#r&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#i=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Xc.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Xc.#f[`${this.#m}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=this.#i;if(!r){this.#i=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${this.#u.id}`;const i=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")},{signal:a})}this.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=this.#e),r.parentNode||e.append(r),this.#u.getElementForAltText()?.setAttribute("aria-describedby",r.id)}}class L0{#e;#t=!1;#r=null;#n;#i;#s;#o;#a=null;#u;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:r=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:l}){this.#e=e,this.#r=s,this.#n=r,this.#i=i,this.#s=a,this.#o=o,this.#h=new AbortController,this.#u=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/lc.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#a)return;const i=this.#a=new AbortController,a=AbortSignal.any([this.#u,i.signal]),o=this.#e,l={capture:!0,signal:a,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Fs(d),c(d))},l),o.addEventListener("pointerup",c,l),o.addEventListener("pointercancel",c,l);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#u,this.#d.signal]),a=this.#e,o={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#m.bind(this),o);const l=this.#p.bind(this);a.addEventListener("touchend",l,o),a.addEventListener("touchcancel",l,o),o.capture=!0,a.addEventListener("pointerdown",Fs,o),a.addEventListener("pointermove",Fs,o),a.addEventListener("pointercancel",Fs,o),a.addEventListener("pointerup",Fs,o),this.#i?.()}if(Fs(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[r,s]=e.touches;r.identifier>s.identifier&&([r,s]=[s,r]),this.#l={touch0X:r.screenX,touch0Y:r.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;Fs(e);let[r,s]=e.touches;r.identifier>s.identifier&&([r,s]=[s,r]);const{screenX:i,screenY:a}=r,{screenX:o,screenY:l}=s,c=this.#l,{touch0X:d,touch0Y:u,touch1X:h,touch1Y:f}=c,p=h-d,y=f-u,v=o-i,g=l-a,b=Math.hypot(v,g)||1,j=Math.hypot(p,y)||1;if(!this.#t&&Math.abs(j-b)<=L0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=o,c.touch1Y=l,!this.#t){this.#t=!0;return}const w=[(i+o)/2,(a+l)/2];this.#s?.(w,j,b)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#o?.()),this.#l&&(Fs(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class or{#e=null;#t=null;#r=null;#n=!1;#i=null;#s="";#o=!1;#a=null;#u=null;#l=null;#h=null;#d="";#f=!1;#m=null;#p=!1;#c=!1;#g=!1;#v=null;#x=0;#b=0;#j=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=or._zIndex++;static _borderLineWidth=-1;static _colorManager=new b4;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=or.prototype._resizeWithKeyboard,r=gu.TRANSLATE_SMALL,s=gu.TRANSLATE_BIG;return Fr(this,"_resizerKeyboardManager",new R0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-r,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[r,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-r]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,r]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],or.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:r,rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[a,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fr(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const r=new cK({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});r.annotationElementId=e.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(e,r){if(or._l10n??=e,or._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),or._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);or._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,r){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,r){In("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,r]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*r/(e*2),this.y+=this.width*e/(r*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*r/(e*2),this.y-=this.width*e/(r*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#q(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,r,s,i){const[a,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/a,this.y=(r+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,r){const[s,i]=this.parentDimensions;this.setAt(e*s,r*i,this.width*s,this.height*i),this._onTranslated()}#T([e,r],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/r,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,r){this.#T(this.parentDimensions,e,r)}translateInPage(e,r){this.#m||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,r),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,r){this.#m||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=r/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,d]=this.getBaseTranslation();o+=c,l+=d;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,r){}_onTranslated(e,r){}get _hasBeenMoved(){return!!this.#m&&(this.#m[0]!==this.x||this.#m[1]!==this.y)}get _hasBeenResized(){return!!this.#m&&(this.#m[2]!==this.width||this.#m[3]!==this.height)}getBaseTranslation(){const[e,r]=this.parentDimensions,{_borderLineWidth:s}=or,i=s/e,a=s/r;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:r},pageDimensions:[s,i]}=this;let{x:a,y:o,width:l,height:c}=this;if(l*=s,c*=i,a*=s,o*=i,this._mustFixPosition)switch(e){case 0:a=ua(a,0,s-l),o=ua(o,0,i-c);break;case 90:a=ua(a,0,s-c),o=ua(o,l,i);break;case 180:a=ua(a,l,s),o=ua(o,c,i);break;case 270:a=ua(a,c,s),o=ua(o,0,i-l);break}this.x=a/=s,this.y=o/=i;const[d,u]=this.getBaseTranslation();a+=d,o+=u,r.left=`${(100*a).toFixed(2)}%`,r.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#N(e,r,s){switch(s){case 90:return[r,-e];case 180:return[-e,-r];case 270:return[-r,e];default:return[e,r]}}screenToPageTranslation(e,r){return or.#N(e,r,this.parentRotation)}pageTranslationToScreen(e,r){return or.#N(e,r,360-this.parentRotation)}#P(e){switch(e){case 90:{const[r,s]=this.pageDimensions;return[0,-r/s,s/r,0]}case 180:return[-1,0,0,-1];case 270:{const[r,s]=this.pageDimensions;return[0,r/s,-s/r,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[r,s]}=this;return[r*e,s*e]}setDims(e,r){const[s,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/s).toFixed(2)}%`,this.#o||(a.height=`${(100*r/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:r,width:s}=e,i=s.endsWith("%"),a=!this.#o&&r.endsWith("%");if(i&&a)return;const[o,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!this.#o&&!a&&(e.height=`${(100*parseFloat(r)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],r=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#a.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#I.bind(this,s),{signal:r}),i.addEventListener("contextmenu",wl,{signal:r}),i.tabIndex=-1}this.div.prepend(this.#a)}#I(e,r){r.preventDefault();const{isMac:s}=Si.platform;if(r.button!==0||r.ctrlKey&&s)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#u=[r.screenX,r.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Fs,{passive:!1,signal:o}),window.addEventListener("contextmenu",wl,{signal:o}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(r.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#k()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#D(e,r,s,i){this.width=s,this.height=i,this.x=e,this.y=r;const[a,o]=this.parentDimensions;this.setDims(a*s,o*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#k(){if(!this.#l)return;const{savedX:e,savedY:r,savedWidth:s,savedHeight:i}=this.#l;this.#l=null;const a=this.x,o=this.y,l=this.width,c=this.height;a===e&&o===r&&l===s&&c===i||this.addCommands({cmd:this.#D.bind(this,a,o,l,c),undo:this.#D.bind(this,e,r,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#B(e,r){const[s,i]=this.parentDimensions,a=this.x,o=this.y,l=this.width,c=this.height,d=or.MIN_SIZE/s,u=or.MIN_SIZE/i,h=this.#P(this.rotation),f=(q,B)=>[h[0]*q+h[2]*B,h[1]*q+h[3]*B],p=this.#P(360-this.rotation),y=(q,B)=>[p[0]*q+p[2]*B,p[1]*q+p[3]*B];let v,g,b=!1,j=!1;switch(e){case"topLeft":b=!0,v=(q,B)=>[0,0],g=(q,B)=>[q,B];break;case"topMiddle":v=(q,B)=>[q/2,0],g=(q,B)=>[q/2,B];break;case"topRight":b=!0,v=(q,B)=>[q,0],g=(q,B)=>[0,B];break;case"middleRight":j=!0,v=(q,B)=>[q,B/2],g=(q,B)=>[0,B/2];break;case"bottomRight":b=!0,v=(q,B)=>[q,B],g=(q,B)=>[0,0];break;case"bottomMiddle":v=(q,B)=>[q/2,B],g=(q,B)=>[q/2,0];break;case"bottomLeft":b=!0,v=(q,B)=>[0,B],g=(q,B)=>[q,0];break;case"middleLeft":j=!0,v=(q,B)=>[0,B/2],g=(q,B)=>[q,B/2];break}const w=v(l,c),C=g(l,c);let E=f(...C);const N=or._round(a+E[0]),A=or._round(o+E[1]);let _=1,k=1,F,I;if(r.fromKeyboard)({deltaX:F,deltaY:I}=r);else{const{screenX:q,screenY:B}=r,[K,Y]=this.#u;[F,I]=this.screenToPageTranslation(q-K,B-Y),this.#u[0]=q,this.#u[1]=B}if([F,I]=y(F/s,I/i),b){const q=Math.hypot(l,c);_=k=Math.max(Math.min(Math.hypot(C[0]-w[0]-F,C[1]-w[1]-I)/q,1/l,1/c),d/l,u/c)}else j?_=ua(Math.abs(C[0]-w[0]-F),d,1)/l:k=ua(Math.abs(C[1]-w[1]-I),u,1)/c;const T=or._round(l*_),R=or._round(c*k);E=f(...g(T,R));const O=N-E[0],z=A-E[1];this.#m||=[this.x,this.y,this.width,this.height],this.width=T,this.height=R,this.x=O,this.y=z,this.setDims(s*T,i*R),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new ux(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[r,s]of e)await this._editToolbar.addButton(r,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#r?.destroy())}addContainer(e){const r=this._editToolbar?.div;r?r.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(Xc.initialize(or._l10n),this.#r=new Xc(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#n?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#V();const[r,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/r).toFixed(2)}%`,e.style.maxHeight=`${(100*r/s).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),$7(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new L0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#S.bind(this),onPinching:this.#y.bind(this),onPinchEnd:this.#M.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#S(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#y(e,r,s){let a=.7*(s/r)+1-.7;if(a===1)return;const o=this.#P(this.rotation),l=(N,A)=>[o[0]*N+o[2]*A,o[1]*N+o[3]*A],[c,d]=this.parentDimensions,u=this.x,h=this.y,f=this.width,p=this.height,y=or.MIN_SIZE/c,v=or.MIN_SIZE/d;a=Math.max(Math.min(a,1/f,1/p),y/f,v/p);const g=or._round(f*a),b=or._round(p*a);if(g===f&&b===p)return;this.#m||=[u,h,f,p];const j=l(f/2,p/2),w=or._round(u+j[0]),C=or._round(h+j[1]),E=l(g/2,b/2);this.x=w-E[0],this.y=C-E[1],this.width=g,this.height=b,this.setDims(c*g,d*b),this.fixAndSetPosition(),this._onResizing()}#M(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#k()}pointerdown(e){const{isMac:r}=Si.platform;if(e.button!==0||e.ctrlKey&&r){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#U(e);return}this.#F(e)}#F(e){const{isMac:r}=Si.platform;e.ctrlKey&&!r||e.shiftKey||e.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:r}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),this.#i=null,this.#f=!1,this._uiManager.endDragSession()||this.#F(d),s&&this._onStopDragging()};r&&(this.#x=e.clientX,this.#b=e.clientY,this.#i=e.pointerId,this.#s=e.pointerType,window.addEventListener("pointermove",d=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:h,pointerId:f}=d;if(f!==this.#i){Fs(d);return}const[p,y]=this.screenToPageTranslation(u-this.#x,h-this.#b);this.#x=u,this.#b=h,this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",Fs,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#s&&(this.#w||d.isPrimary)&&l(d),Fs(d)},o));const c=d=>{if(!this.#i||this.#i===d.pointerId){l(d);return}Fs(d)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,r,s){e.changeParent(this),this.x=r,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,r,s=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/i,u=r/i,h=this.x*a,f=this.y*o,p=this.width*a,y=this.height*o;switch(s){case 0:return[h+d+l,o-f-u-y+c,h+d+p+l,o-f-u+c];case 90:return[h+u+l,o-f+d+c,h+u+y+l,o-f+d+p+c];case 180:return[h-d-p+l,o-f+u+c,h-d+l,o-f+u+y+c];case 270:return[h-u-y+l,o-f-d-p+c,h-u+l,o-f-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,r){const[s,i,a,o]=e,l=a-s,c=o-i;switch(this.rotation){case 0:return[s,r-o,l,c];case 90:return[s,r-i,c,l];case 180:return[a,r-i,l,c];case 270:return[a,r-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:r,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return r<o&&i>0&&e<a&&s>0}#V(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#V()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,r=null){In("An editor must be serializable")}static async deserialize(e,r,s){const i=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,o]=i.pageDimensions,[l,c,d,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/a,i.y=c/o,i.width=d/a,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#q(),this.removeEditToolbar(),this.#j){for(const e of this.#j.values())clearTimeout(e);this.#j=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#a.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const r=this.#a.children;if(!this.#t){this.#t=Array.from(r);const o=this.#H.bind(this),l=this.#z.bind(this),c=this._uiManager._signal;for(const d of this.#t){const u=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",this.#O.bind(this,u),{signal:c}),d.setAttribute("data-l10n-id",or._l10nResizer[u])}}const s=this.#t[0];let i=0;for(const o of r){if(o===s)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)this.#a.append(this.#a.firstChild);else if(a>i)for(let l=0;l<a-i;l++)this.#a.firstChild.before(this.#a.lastChild);let o=0;for(const l of r){const d=this.#t[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",or._l10nResizer[d])}}this.#R(0),this.#g=!0,this.#a.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#H(e){or._resizerKeyboardManager.exec(this,e)}#z(e){this.#g&&e.relatedTarget?.parentNode!==this.#a&&this.#q()}#O(e){this.#d=this.#g?e:""}#R(e){if(this.#t)for(const r of this.#t)r.tabIndex=e}_resizeWithKeyboard(e,r){this.#g&&this.#B(this.#d,{deltaX:e,deltaY:r,fromKeyboard:!0})}#q(){this.#g=!1,this.#R(-1),this.#k()}_stopResizingWithKeyboard(){this.#q(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0))}updateParams(e,r){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,r){this.#o=!0;const s=e/r,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,r=!1){if(r){this.#j||=new Map;const{action:s}=e;let i=this.#j.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#j.delete(s),this.#j.size===0&&(this.#j=null)},or._telemetryTimeout),this.#j.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(e){let r=e.container.querySelector(".annotationContent");if(!r)r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),e.container.prepend(r);else if(r.nodeName==="CANVAS"){const s=r;r=document.createElement("div"),r.classList.add("annotationContent",this.editorType),s.before(r)}return r}resetAnnotationElement(e){const{firstChild:r}=e.container;r?.nodeName==="DIV"&&r.classList.contains("annotationContent")&&r.remove()}}class cK extends or{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const d3=3285377520,dl=4294901760,Wc=65535;class B7{constructor(e){this.h1=e?e&4294967295:d3,this.h2=e?e&4294967295:d3}update(e){let r,s;if(typeof e=="string"){r=new Uint8Array(e.length*2),s=0;for(let v=0,g=e.length;v<g;v++){const b=e.charCodeAt(v);b<=255?r[s++]=b:(r[s++]=b>>>8,r[s++]=b&255)}}else if(ArrayBuffer.isView(e))r=e.slice(),s=r.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,a=s-i*4,o=new Uint32Array(r.buffer,0,i);let l=0,c=0,d=this.h1,u=this.h2;const h=3432918353,f=461845907,p=h&Wc,y=f&Wc;for(let v=0;v<i;v++)v&1?(l=o[v],l=l*h&dl|l*p&Wc,l=l<<15|l>>>17,l=l*f&dl|l*y&Wc,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[v],c=c*h&dl|c*p&Wc,c=c<<15|c>>>17,c=c*f&dl|c*y&Wc,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,a){case 3:l^=r[i*4+2]<<16;case 2:l^=r[i*4+1]<<8;case 1:l^=r[i*4],l=l*h&dl|l*p&Wc,l=l<<15|l>>>17,l=l*f&dl|l*y&Wc,i&1?d^=l:u^=l}this.h1=d,this.h2=u}hexdigest(){let e=this.h1,r=this.h2;return e^=r>>>1,e=e*3981806797&dl|e*36045&Wc,r=r*4283543511&dl|((r<<16|e>>>16)*2950163797&dl)>>>16,e^=r>>>1,e=e*444984403&dl|e*60499&Wc,r=r*3301882366&dl|((r<<16|e>>>16)*3120437893&dl)>>>16,e^=r>>>1,(e>>>0).toString(16).padStart(8,"0")+(r>>>0).toString(16).padStart(8,"0")}}const DC=Object.freeze({map:null,hash:"",transfer:void 0});class j4{#e=!1;#t=null;#r=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,r){const s=this.#r.get(e);return s===void 0?r:Object.assign(r,s)}getRawValue(e){return this.#r.get(e)}remove(e){if(this.#r.delete(e),this.#r.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const r of this.#r.values())if(r instanceof or)return;this.onAnnotationEditor(null)}}setValue(e,r){const s=this.#r.get(e);let i=!1;if(s!==void 0)for(const[a,o]of Object.entries(r))s[a]!==o&&(i=!0,s[a]=o);else i=!0,this.#r.set(e,r);i&&this.#n(),r instanceof or&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(r.constructor._type)}has(e){return this.#r.has(e)}get size(){return this.#r.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new z7(this)}get serializable(){if(this.#r.size===0)return DC;const e=new Map,r=new B7,s=[],i=Object.create(null);let a=!1;for(const[o,l]of this.#r){const c=l instanceof or?l.serialize(!1,i):l;c&&(e.set(o,c),r.update(`${o}:${JSON.stringify(c)}`),a||=!!c.bitmap)}if(a)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:r.hexdigest(),transfer:s}:DC}get editorStats(){let e=null;const r=new Map;for(const s of this.#r.values()){if(!(s instanceof or))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:a}=i;r.has(a)||r.set(a,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const o=e[a]||=new Map;for(const[l,c]of Object.entries(i)){if(l==="type")continue;let d=o.get(l);d||(d=new Map,o.set(l,d));const u=d.get(c)??0;d.set(c,u+1)}}for(const[s,i]of r)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const r of this.#r.values())!(r instanceof or)||!r.annotationElementId||!r.serialize()||e.push(r.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#r.entries()}}class z7 extends j4{#e;constructor(e){super();const{map:r,hash:s,transfer:i}=e.serializable,a=structuredClone(r,i?{transfer:i}:null);this.#e={map:a,hash:s,transfer:i}}get print(){In("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Fr(this,"modifiedIds",{ids:new Set,hash:""})}}class dK{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:r=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const r=this.styleElement.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:r,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(Xs(!r,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=e,l=new FontFace(i,a,o);this.addNativeFontFace(l);try{await l.load(),this.#e.add(i),s?.(e)}catch{Pr(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}In("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Pr(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const r=e.createFontFaceRule();if(r){if(this.insertRule(r),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Fr(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Fr(this,"isSyncFontLoadingSupported",_a||Si.platform.isFirefox)}_queueLoadingCallback(e){function r(){for(Xs(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const a=s.shift();setTimeout(a.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:r,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fr(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,r){function s(C,E){return C.charCodeAt(E)<<24|C.charCodeAt(E+1)<<16|C.charCodeAt(E+2)<<8|C.charCodeAt(E+3)&255}function i(C,E,N,A){const _=C.substring(0,E),k=C.substring(E+N);return _+A+k}let a,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function u(C,E){if(++d>30){Pr("Load test font never loaded."),E();return}if(c.font="30px "+C,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(u.bind(null,C,E))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const y=16,v=1482184792;let g=s(f,y);for(a=0,o=h.length-3;a<o;a+=4)g=g-v+s(h,a)|0;a<h.length&&(g=g-v+s(h+"XXX",a)|0),f=i(f,y,4,QG(g));const b=`url(data:font/opentype;base64,${btoa(f)});`,j=`@font-face {font-family:"${h}";src:${b}}`;this.insertRule(j);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const C of[e.loadedName,h]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=C,w.append(E)}this._document.body.append(w),u(h,()=>{w.remove(),r.complete()})}}class uK{constructor(e,r=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${R7(this.data)});`;let r;if(!this.cssFontInfo)r=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),r}getPathGenerator(e,r){if(this.compiledGlyphs[r]!==void 0)return this.compiledGlyphs[r];const s=this.loadedName+"_path_"+r;let i;try{i=e.get(s)}catch(o){Pr(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[r]=a}}function hK(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(_a)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function fK(t){if(_a&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return D0(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qy(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const kC=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,mK=t=>typeof t=="object"&&typeof t?.name=="string",q7=rK.bind(null,kC,mK);class pK{#e=new Map;#t=Promise.resolve();postMessage(e,r){const s={data:structuredClone(e,r?{transfer:r}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,r,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:a}=s;if(a.aborted){Pr("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,r);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#e.set(r,i)}removeEventListener(e,r){this.#e.get(r)?.(),this.#e.delete(r)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Uy={DATA:1,ERROR:2},Ks={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function u3(){}function eo(t){if(t instanceof pu||t instanceof Ub||t instanceof o3||t instanceof Dx||t instanceof S2)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||In('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new pu(t.message);case"InvalidPDFException":return new Ub(t.message);case"PasswordException":return new o3(t.message,t.code);case"ResponseException":return new Dx(t.message,t.status,t.missing);case"UnknownErrorException":return new S2(t.message,t.details)}return new S2(t.message,t.toString())}class ix{#e=new AbortController;constructor(e,r,s){this.sourceName=e,this.targetName=r,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Uy.DATA)i.resolve(e.data);else if(e.callback===Uy.ERROR)i.reject(eo(e.reason));else throw new Error("Unexpected callback case");return}const r=this.actionHandler[e.action];if(!r)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(r,e.data).then(function(o){a.postMessage({sourceName:s,targetName:i,callback:Uy.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:s,targetName:i,callback:Uy.ERROR,callbackId:e.callbackId,reason:eo(o)})});return}if(e.streamId){this.#r(e);return}r(e.data)}on(e,r){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=r}send(e,r,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:r},s)}sendWithPromise(e,r,s){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:r},s)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,r,s,i){const a=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const u=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:r,desiredSize:d.desiredSize},i),u.promise},pull:d=>{const u=Promise.withResolvers();return this.streamControllers[a].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:Ks.PULL,streamId:a,desiredSize:d.desiredSize}),u.promise},cancel:d=>{Xs(d instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[a].cancelCall=u,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Ks.CANCEL,streamId:a,reason:eo(d)}),u.promise}},s)}#r(e){const r=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(d,u=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:s,targetName:i,stream:Ks.ENQUEUE,streamId:r,chunk:d},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:Ks.CLOSE,streamId:r}),delete o.streamSinks[r])},error(d){Xs(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:Ks.ERROR,streamId:r,reason:eo(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[r]=c,Promise.try(l,e.data,c).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Ks.START_COMPLETE,streamId:r,success:!0})},function(d){a.postMessage({sourceName:s,targetName:i,stream:Ks.START_COMPLETE,streamId:r,reason:eo(d)})})}#n(e){const r=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[r],l=this.streamSinks[r];switch(e.stream){case Ks.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(eo(e.reason));break;case Ks.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(eo(e.reason));break;case Ks.PULL:if(!l){a.postMessage({sourceName:s,targetName:i,stream:Ks.PULL_COMPLETE,streamId:r,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||u3).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Ks.PULL_COMPLETE,streamId:r,success:!0})},function(d){a.postMessage({sourceName:s,targetName:i,stream:Ks.PULL_COMPLETE,streamId:r,reason:eo(d)})});break;case Ks.ENQUEUE:if(Xs(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ks.CLOSE:if(Xs(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#i(o,r);break;case Ks.ERROR:Xs(o,"error should have stream controller"),o.controller.error(eo(e.reason)),this.#i(o,r);break;case Ks.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(eo(e.reason)),this.#i(o,r);break;case Ks.CANCEL:if(!l)break;const c=eo(e.reason);Promise.try(l.onCancel||u3,c).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Ks.CANCEL_COMPLETE,streamId:r,success:!0})},function(d){a.postMessage({sourceName:s,targetName:i,stream:Ks.CANCEL_COMPLETE,streamId:r,reason:eo(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[r];break;default:throw new Error("Unexpected stream case")}}async#i(e,r){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[r]}destroy(){this.#e?.abort(),this.#e=null}}class U7{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,r){if(e<=0||r<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,r);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,r,s){if(!e.canvas)throw new Error("Canvas is not specified");if(r<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=r,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,r){In("Abstract method `_createCanvas` called.")}}class gK extends U7{constructor({ownerDocument:e=globalThis.document,enableHWA:r=!1}){super({enableHWA:r}),this._document=e}_createCanvas(e,r){const s=this._document.createElement("canvas");return s.width=e,s.height=r,s}}class V7{constructor({baseUrl:e=null,isCompressed:r=!0}){this.baseUrl=e,this.isCompressed=r}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const r=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(r).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})}async _fetch(e){In("Abstract method `_fetch` called.")}}class h3 extends V7{async _fetch(e){const r=await Kg(e,this.isCompressed?"arraybuffer":"text");return r instanceof ArrayBuffer?new Uint8Array(r):D0(r)}}class H7{addFilter(e){return"none"}addHCMFilter(e,r){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,r,s,i,a){return"none"}destroy(e=!1){}}class vK extends H7{#e;#t;#r;#n;#i;#s;#o=0;constructor({docId:e,ownerDocument:r=globalThis.document}){super(),this.#n=e,this.#i=r}get#a(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#l(){if(!this.#r){const e=this.#i.createElement("div"),{style:r}=e;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=this.#i.createElementNS(tu,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#r=this.#i.createElementNS(tu,"defs"),e.append(s),s.append(this.#r),this.#i.body.append(e)}return this.#r}#h(e){if(e.length===1){const c=e[0],d=new Array(256);for(let h=0;h<256;h++)d[h]=c[h]/255;const u=d.join(",");return[u,u,u]}const[r,s,i]=e,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=s[c]/255,l[c]=i[c]/255;return[a.join(","),o.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const r=this.#i.URL;r!==this.#i.baseURI&&(O0(r)?Pr('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=m4(r,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let r=this.#a.get(e);if(r)return r;const[s,i,a]=this.#h(e),o=e.length===1?s:`${s}${i}${a}`;if(r=this.#a.get(o),r)return this.#a.set(e,r),r;const l=`g_${this.#n}_transfer_map_${this.#o++}`,c=this.#d(l);this.#a.set(e,c),this.#a.set(o,c);const d=this.#p(l);return this.#g(s,i,a,d),c}addHCMFilter(e,r){const s=`${e}-${r}`,i="base";let a=this.#u.get(i);if(a?.key===s||(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#u.set(i,a)),!e||!r))return a.url;const o=this.#x(e);e=Jt.makeHexColor(...o);const l=this.#x(r);if(r=Jt.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&r==="#ffffff"||e===r)return a.url;const c=new Array(256);for(let p=0;p<=255;p++){const y=p/255;c[p]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}const d=c.join(","),u=`g_${this.#n}_hcm_filter`,h=a.filter=this.#p(u);this.#g(d,d,d,h),this.#m(h);const f=(p,y)=>{const v=o[p]/255,g=l[p]/255,b=new Array(y+1);for(let j=0;j<=y;j++)b[j]=v+j/y*(g-v);return b.join(",")};return this.#g(f(0,5),f(1,5),f(2,5),h),a.url=this.#d(u),a.url}addAlphaFilter(e){let r=this.#a.get(e);if(r)return r;const[s]=this.#h([e]),i=`alpha_${s}`;if(r=this.#a.get(i),r)return this.#a.set(e,r),r;const a=`g_${this.#n}_alpha_map_${this.#o++}`,o=this.#d(a);this.#a.set(e,o),this.#a.set(i,o);const l=this.#p(a);return this.#v(s,l),o}addLuminosityFilter(e){let r=this.#a.get(e||"luminosity");if(r)return r;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",r=this.#a.get(i),r)return this.#a.set(e,r),r;const a=`g_${this.#n}_luminosity_map_${this.#o++}`,o=this.#d(a);this.#a.set(e,o),this.#a.set(i,o);const l=this.#p(a);return this.#f(l),e&&this.#v(s,l),o}addHighlightHCMFilter(e,r,s,i,a){const o=`${r}-${s}-${i}-${a}`;let l=this.#u.get(e);if(l?.key===o||(l?(l.filter?.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},this.#u.set(e,l)),!r||!s))return l.url;const[c,d]=[r,s].map(this.#x.bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,p]=[i,a].map(this.#x.bind(this));h<u&&([u,h,f,p]=[h,u,p,f]),this.#l.style.color="";const y=(b,j,w)=>{const C=new Array(256),E=(h-u)/w,N=b/255,A=(j-b)/(255*w);let _=0;for(let k=0;k<=w;k++){const F=Math.round(u+k*E),I=N+k*A;for(let T=_;T<=F;T++)C[T]=I;_=F+1}for(let k=_;k<256;k++)C[k]=C[_-1];return C.join(",")},v=`g_${this.#n}_hcm_${e}_filter`,g=l.filter=this.#p(v);return this.#m(g),this.#g(y(f[0],p[0],5),y(f[1],p[1],5),y(f[2],p[2],5),g),l.url=this.#d(v),l.url}destroy(e=!1){e&&this.#s?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(e){const r=this.#i.createElementNS(tu,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(r)}#m(e){const r=this.#i.createElementNS(tu,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(r)}#p(e){const r=this.#i.createElementNS(tu,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",e),this.#l.append(r),r}#c(e,r,s){const i=this.#i.createElementNS(tu,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#g(e,r,s,i){const a=this.#i.createElementNS(tu,"feComponentTransfer");i.append(a),this.#c(a,"feFuncR",e),this.#c(a,"feFuncG",r),this.#c(a,"feFuncB",s)}#v(e,r){const s=this.#i.createElementNS(tu,"feComponentTransfer");r.append(s),this.#c(s,"feFuncA",e)}#x(e){return this.#l.style.color=e,x4(getComputedStyle(this.#l).getPropertyValue("color"))}}class W7{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(s=>{throw new Error(`Unable to load font data at: ${r}`)})}async _fetch(e){In("Abstract method `_fetch` called.")}}class f3 extends W7{async _fetch(e){const r=await Kg(e,"arraybuffer");return new Uint8Array(r)}}class G7{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const r=`${this.baseUrl}${e}`;return this._fetch(r).catch(s=>{throw new Error(`Unable to load wasm data at: ${r}`)})}async _fetch(e){In("Abstract method `_fetch` called.")}}class m3 extends G7{async _fetch(e){const r=await Kg(e,"arraybuffer");return new Uint8Array(r)}}_a&&Pr("Please use the `legacy` build in Node.js environments.");async function w4(t){const r=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(r)}class xK extends H7{}class yK extends U7{_createCanvas(e,r){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,r)}}class bK extends V7{async _fetch(e){return w4(e)}}class jK extends W7{async _fetch(e){return w4(e)}}class wK extends G7{async _fetch(e){return w4(e)}}const Bi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function OC(t,e){if(!e)return;const r=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],r,s),t.clip(i)}class N4{isModifyingCurrentTransform(){return!1}getPattern(){In("Abstract method `getPattern` called.")}}class NK extends N4{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let r;this._type==="axial"?r=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(r=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)r.addColorStop(s[0],s[1]);return r}getPattern(e,r,s,i){let a;if(i===Bi.STROKE||i===Bi.FILL){const o=r.current.getClippedPathBoundingBox(i,hs(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=r.cachedCanvases.getCanvas("pattern",l,c),u=d.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=Jt.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...r.baseTransform),this.matrix&&u.transform(...this.matrix),OC(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),a=e.createPattern(d.canvas,"no-repeat");const h=new DOMMatrix(s);a.setTransform(h)}else OC(e,this._bbox),a=this._createGradient(e);return a}}function E2(t,e,r,s,i,a,o,l){const c=e.coords,d=e.colors,u=t.data,h=t.width*4;let f;c[r+1]>c[s+1]&&(f=r,r=s,s=f,f=a,a=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[r+1]>c[s+1]&&(f=r,r=s,s=f,f=a,a=o,o=f);const p=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,g=(c[s+1]+e.offsetY)*e.scaleY,b=(c[i]+e.offsetX)*e.scaleX,j=(c[i+1]+e.offsetY)*e.scaleY;if(y>=j)return;const w=d[a],C=d[a+1],E=d[a+2],N=d[o],A=d[o+1],_=d[o+2],k=d[l],F=d[l+1],I=d[l+2],T=Math.round(y),R=Math.round(j);let O,z,q,B,K,Y,J,H;for(let $=T;$<=R;$++){if($<g){const ae=$<y?0:(y-$)/(y-g);O=p-(p-v)*ae,z=w-(w-N)*ae,q=C-(C-A)*ae,B=E-(E-_)*ae}else{let ae;$>j?ae=1:g===j?ae=0:ae=(g-$)/(g-j),O=v-(v-b)*ae,z=N-(N-k)*ae,q=A-(A-F)*ae,B=_-(_-I)*ae}let W;$<y?W=0:$>j?W=1:W=(y-$)/(y-j),K=p-(p-b)*W,Y=w-(w-k)*W,J=C-(C-F)*W,H=E-(E-I)*W;const te=Math.round(Math.min(O,K)),ee=Math.round(Math.max(O,K));let ne=h*$+te*4;for(let ae=te;ae<=ee;ae++)W=(O-ae)/(O-K),W<0?W=0:W>1&&(W=1),u[ne++]=z-(z-Y)*W|0,u[ne++]=q-(q-J)*W|0,u[ne++]=B-(B-H)*W|0,u[ne++]=255}}function SK(t,e,r){const s=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,d=l-1;for(a=0;a<c;a++){let u=a*l;for(let h=0;h<d;h++,u++)E2(t,r,s[u],s[u+1],s[u+l],i[u],i[u+1],i[u+l]),E2(t,r,s[u+l+1],s[u+1],s[u+l],i[u+l+1],i[u+1],i[u+l])}break;case"triangles":for(a=0,o=s.length;a<o;a+=3)E2(t,r,s[a],s[a+1],s[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class AK extends N4{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,r,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),p=d/h,y=u/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/y},g=h+4,b=f+4,j=s.getCanvas("mesh",g,b),w=j.context,C=w.createImageData(h,f);if(r){const N=C.data;for(let A=0,_=N.length;A<_;A+=4)N[A]=r[0],N[A+1]=r[1],N[A+2]=r[2],N[A+3]=255}for(const N of this._figures)SK(C,N,v);return w.putImageData(C,2,2),{canvas:j.canvas,offsetX:l-2*p,offsetY:c-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,r,s,i){OC(e,this._bbox);const a=new Float32Array(2);if(i===Bi.SHADING)Jt.singularValueDecompose2dScale(hs(e),a);else if(this.matrix){Jt.singularValueDecompose2dScale(this.matrix,a);const[l,c]=a;Jt.singularValueDecompose2dScale(r.baseTransform,a),a[0]*=l,a[1]*=c}else Jt.singularValueDecompose2dScale(r.baseTransform,a);const o=this._createMeshCanvas(a,i===Bi.SHADING?null:this._background,r.cachedCanvases);return i!==Bi.SHADING&&(e.setTransform(...r.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class CK extends N4{getPattern(){return"hotpink"}}function EK(t){switch(t[0]){case"RadialAxial":return new NK(t);case"Mesh":return new AK(t);case"Dummy":return new CK}throw new Error(`Unknown IR type: ${t[0]}`)}const p3={COLORED:1,UNCOLORED:2};class S4{static MAX_PATTERN_SIZE=3e3;constructor(e,r,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:r,operatorList:s,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),fj("TilingType: "+a);const u=r[0],h=r[1],f=r[2],p=r[3],y=f-u,v=p-h,g=new Float32Array(2);Jt.singularValueDecompose2dScale(this.matrix,g);const[b,j]=g;Jt.singularValueDecompose2dScale(this.baseTransform,g);const w=b*g[0],C=j*g[1];let E=y,N=v,A=!1,_=!1;const k=Math.ceil(c*w),F=Math.ceil(d*C),I=Math.ceil(y*w),T=Math.ceil(v*C);k>=I?E=c:A=!0,F>=T?N=d:_=!0;const R=this.getSizeAndScale(E,this.ctx.canvas.width,w),O=this.getSizeAndScale(N,this.ctx.canvas.height,C),z=e.cachedCanvases.getCanvas("pattern",R.size,O.size),q=z.context,B=l.createCanvasGraphics(q);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,o),q.translate(-R.scale*u,-O.scale*h),B.transform(R.scale,0,0,O.scale,0,0),q.save(),this.clipBbox(B,u,h,f,p),B.baseTransform=hs(B.ctx),B.executeOperatorList(s),B.endDrawing(),q.restore(),A||_){const K=z.canvas;A&&(E=c),_&&(N=d);const Y=this.getSizeAndScale(E,this.ctx.canvas.width,w),J=this.getSizeAndScale(N,this.ctx.canvas.height,C),H=Y.size,$=J.size,W=e.cachedCanvases.getCanvas("pattern-workaround",H,$),te=W.context,ee=A?Math.floor(y/c):0,ne=_?Math.floor(v/d):0;for(let ae=0;ae<=ee;ae++)for(let ve=0;ve<=ne;ve++)te.drawImage(K,H*ae,$*ve,H,$,0,0,H,$);return{canvas:W.canvas,scaleX:Y.scale,scaleY:J.scale,offsetX:u,offsetY:h}}return{canvas:z.canvas,scaleX:R.scale,scaleY:O.scale,offsetX:u,offsetY:h}}getSizeAndScale(e,r,s){const i=Math.max(S4.MAX_PATTERN_SIZE,r);let a=Math.ceil(e*s);return a>=i?a=i:s=a/e,{scale:s,size:a}}clipBbox(e,r,s,i,a){const o=i-r,l=a-s;e.ctx.rect(r,s,o,l),Jt.axialAlignedBoundingBox([r,s,i,a],hs(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,s){const i=e.ctx,a=e.current;switch(r){case p3.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=o,i.strokeStyle=a.strokeColor=l;break;case p3.UNCOLORED:i.fillStyle=i.strokeStyle=s,a.fillColor=a.strokeColor=s;break;default:throw new ZG(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,s,i){let a=s;i!==Bi.SHADING&&(a=Jt.transform(a,r.baseTransform),this.matrix&&(a=Jt.transform(a,this.matrix)));const o=this.createPatternCanvas(r);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}function PK({src:t,srcPos:e=0,dest:r,width:s,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const l=Si.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=s>>3,h=s&7,f=t.length;r=new Uint32Array(r.buffer);let p=0;for(let y=0;y<i;y++){for(const g=e+u;e<g;e++){const b=e<f?t[e]:255;r[p++]=b&128?d:c,r[p++]=b&64?d:c,r[p++]=b&32?d:c,r[p++]=b&16?d:c,r[p++]=b&8?d:c,r[p++]=b&4?d:c,r[p++]=b&2?d:c,r[p++]=b&1?d:c}if(h===0)continue;const v=e<f?t[e++]:255;for(let g=0;g<h;g++)r[p++]=v&1<<7-g?d:c}return{srcPos:e,destPos:p}}const g3=16,v3=100,TK=15,x3=10,ro=16,P2=new DOMMatrix,ko=new Float32Array(2),Yp=new Float32Array([1/0,1/0,-1/0,-1/0]);function _K(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},t.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},t.transform=function(r,s,i,a,o,l){e.transform(r,s,i,a,o,l),this.__originalTransform(r,s,i,a,o,l)},t.setTransform=function(r,s,i,a,o,l){e.setTransform(r,s,i,a,o,l),this.__originalSetTransform(r,s,i,a,o,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(r){e.rotate(r),this.__originalRotate(r)},t.clip=function(r){e.clip(r),this.__originalClip(r)},t.moveTo=function(r,s){e.moveTo(r,s),this.__originalMoveTo(r,s)},t.lineTo=function(r,s){e.lineTo(r,s),this.__originalLineTo(r,s)},t.bezierCurveTo=function(r,s,i,a,o,l){e.bezierCurveTo(r,s,i,a,o,l),this.__originalBezierCurveTo(r,s,i,a,o,l)},t.rect=function(r,s,i,a){e.rect(r,s,i,a),this.__originalRect(r,s,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class IK{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,r,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,r,s)):(i=this.canvasFactory.create(r,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const r=this.cache[e];this.canvasFactory.destroy(r),delete this.cache[e]}}}function Vy(t,e,r,s,i,a,o,l,c,d){const[u,h,f,p,y,v]=hs(t);if(h===0&&f===0){const j=o*u+y,w=Math.round(j),C=l*p+v,E=Math.round(C),N=(o+c)*u+y,A=Math.abs(Math.round(N)-w)||1,_=(l+d)*p+v,k=Math.abs(Math.round(_)-E)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(p),w,E),t.drawImage(e,r,s,i,a,0,0,A,k),t.setTransform(u,h,f,p,y,v),[A,k]}if(u===0&&p===0){const j=l*f+y,w=Math.round(j),C=o*h+v,E=Math.round(C),N=(l+d)*f+y,A=Math.abs(Math.round(N)-w)||1,_=(o+c)*h+v,k=Math.abs(Math.round(_)-E)||1;return t.setTransform(0,Math.sign(h),Math.sign(f),0,w,E),t.drawImage(e,r,s,i,a,0,0,k,A),t.setTransform(u,h,f,p,y,v),[k,A]}t.drawImage(e,r,s,i,a,o,l,c,d);const g=Math.hypot(u,h),b=Math.hypot(f,p);return[g*c,b*d]}class y3{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=IC;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ca.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,r){this.clipBox=new Float32Array([0,0,e,r]),this.minMax=Yp.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Bi.FILL,r=null){const s=this.minMax.slice();if(e===Bi.STROKE){r||In("Stroke bounding box must include transform."),Jt.singularValueDecompose2dScale(r,ko);const i=ko[0]*this.lineWidth/2,a=ko[1]*this.lineWidth/2;s[0]-=i,s[1]-=a,s[2]+=i,s[3]+=a}return s}updateClipFromPath(){const e=Jt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Yp,0)}getClippedPathBoundingBox(e=Bi.FILL,r=null){return Jt.intersect(this.clipBox,this.getPathBoundingBox(e,r))}}function b3(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const r=e.height,s=e.width,i=r%ro,a=(r-i)/ro,o=i===0?a:a+1,l=t.createImageData(s,ro);let c=0,d;const u=e.data,h=l.data;let f,p,y,v;if(e.kind===dx.GRAYSCALE_1BPP){const g=u.byteLength,b=new Uint32Array(h.buffer,0,h.byteLength>>2),j=b.length,w=s+7>>3,C=4294967295,E=Si.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<a?ro:i,d=0,p=0;p<y;p++){const N=g-c;let A=0;const _=N>w?s:N*8-7,k=_&-8;let F=0,I=0;for(;A<k;A+=8)I=u[c++],b[d++]=I&128?C:E,b[d++]=I&64?C:E,b[d++]=I&32?C:E,b[d++]=I&16?C:E,b[d++]=I&8?C:E,b[d++]=I&4?C:E,b[d++]=I&2?C:E,b[d++]=I&1?C:E;for(;A<_;A++)F===0&&(I=u[c++],F=128),b[d++]=I&F?C:E,F>>=1}for(;d<j;)b[d++]=0;t.putImageData(l,0,f*ro)}}else if(e.kind===dx.RGBA_32BPP){for(p=0,v=s*ro*4,f=0;f<a;f++)h.set(u.subarray(c,c+v)),c+=v,t.putImageData(l,0,p),p+=ro;f<o&&(v=s*i*4,h.set(u.subarray(c,c+v)),t.putImageData(l,0,p))}else if(e.kind===dx.RGB_24BPP)for(y=ro,v=s*y,f=0;f<o;f++){for(f>=a&&(y=i,v=s*y),d=0,p=v;p--;)h[d++]=u[c++],h[d++]=u[c++],h[d++]=u[c++],h[d++]=255;t.putImageData(l,0,f*ro)}else throw new Error(`bad image kind: ${e.kind}`)}function j3(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const r=e.height,s=e.width,i=r%ro,a=(r-i)/ro,o=i===0?a:a+1,l=t.createImageData(s,ro);let c=0;const d=e.data,u=l.data;for(let h=0;h<o;h++){const f=h<a?ro:i;({srcPos:c}=PK({src:d,srcPos:c,dest:u,width:s,height:f,nonBlackColor:0})),t.putImageData(l,0,h*ro)}}function Lv(t,e){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of r)t[s]!==void 0&&(e[s]=t[s]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Hy(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function w3(t,e){if(e)return!0;Jt.singularValueDecompose2dScale(t,ko);const r=Math.fround(lc.pixelRatio*Cm.PDF_TO_CSS_UNITS);return ko[0]<=r&&ko[1]<=r}const DK=["butt","round","square"],kK=["miter","round","bevel"],OK={},N3={};class sg{constructor(e,r,s,i,a,{optionalContentConfig:o,markedContentStack:l=null},c,d){this.ctx=e,this.current=new y3(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=s,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new IK(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,r=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):r}beginDrawing({transform:e,viewport:r,transparency:s=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...hs(this.compositeCtx))}this.ctx.save(),Hy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=hs(this.ctx)}executeOperatorList(e,r,s,i){const a=e.argsArray,o=e.fnArray;let l=r||0;const c=a.length;if(c===l)return l;const d=c-l>x3&&typeof s=="function",u=d?Date.now()+TK:0;let h=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(y=o[l],y!==Ix.dependency)this[y].apply(this,a[l]);else for(const v of a[l]){const g=v.startsWith("g_")?f:p;if(!g.has(v))return g.get(v,s),l}if(l++,l===c)return l;if(d&&++h>x3){if(Date.now()>u)return s(),l;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const r of e.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const r=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}}_scaleImage(e,r){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(r[0],r[1]),1),o=Math.max(Math.hypot(r[2],r[3]),1),l=s,c=i,d="prescale1",u,h;for(;a>2&&l>1||o>2&&c>1;){let f=l,p=c;a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),u=this.cachedCanvases.getCanvas(d,f,p),h=u.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,l,c,0,0,f,p),e=u.canvas,l=f,c=p,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const r=this.ctx,{width:s,height:i}=e,a=this.current.fillColor,o=this.current.patternFill,l=hs(r);let c,d,u,h;if((e.bitmap||e.data)&&e.count>1){const k=e.bitmap||e.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(k),c||(c=new Map,this._cachedBitmapsMap.set(k,c));const F=c.get(d);if(F&&!o){const I=Math.round(Math.min(l[0],l[2])+l[4]),T=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:F,offsetX:I,offsetY:T}}u=F}u||(h=this.cachedCanvases.getCanvas("maskCanvas",s,i),j3(h.context,e));let f=Jt.transform(l,[1/s,0,0,-1/i,0,0]);f=Jt.transform(f,[1,0,0,1,0,-i]);const p=Yp.slice();Jt.axialAlignedBoundingBox([0,0,s,i],f,p);const[y,v,g,b]=p,j=Math.round(g-y)||1,w=Math.round(b-v)||1,C=this.cachedCanvases.getCanvas("fillCanvas",j,w),E=C.context,N=y,A=v;E.translate(-N,-A),E.transform(...f),u||(u=this._scaleImage(h.canvas,Hc(E)),u=u.img,c&&o&&c.set(d,u)),E.imageSmoothingEnabled=w3(hs(E),e.interpolate),Vy(E,u,0,0,u.width,u.height,0,0,s,i),E.globalCompositeOperation="source-in";const _=Jt.transform(Hc(E),[1,0,0,1,-N,-A]);return E.fillStyle=o?a.getPattern(r,this,_,Bi.FILL):a,E.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,C.canvas)),{canvas:C.canvas,offsetX:Math.round(N),offsetY:Math.round(A)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=DK[e]}setLineJoin(e){this.ctx.lineJoin=kK[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,r){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=r)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[r,s]of e)switch(r){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,r);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),Lv(this.suspendedCtx,a),_K(a,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lv(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,r,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,r,s,i){const a=i[0],o=i[1],l=i[2]-a,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(r.context,s,l,c,r.subtype,r.backdrop,r.transferMap,a,o,r.offsetX,r.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,r,s,i,a,o,l,c,d,u,h){let f=e.canvas,p=c-u,y=d-h;if(o)if(p<0||y<0||p+s>f.width||y+i>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",s,i),b=g.context;b.drawImage(f,-p,-y),b.globalCompositeOperation="destination-atop",b.fillStyle=o,b.fillRect(0,0,s,i),b.globalCompositeOperation="source-over",f=g.canvas,p=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(p,y,s,i),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,y,s,i),e.restore()}r.save(),r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?r.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(r.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,d,s,i),r.clip(v),r.globalCompositeOperation="destination-in",r.drawImage(f,p,y,s,i,c,d,s,i),r.restore()}save(){this.inSMaskMode&&Lv(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Lv(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,r,s,i,a,o){this.ctx.transform(e,r,s,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,r,s){let[i]=r;if(!s){i||=r[0]=new Path2D,this[e](i);return}if(!(i instanceof Path2D)){const a=r[0]=new Path2D;for(let o=0,l=i.length;o<l;)switch(i[o++]){case zy.moveTo:a.moveTo(i[o++],i[o++]);break;case zy.lineTo:a.lineTo(i[o++],i[o++]);break;case zy.curveTo:a.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case zy.closePath:a.closePath();break;default:Pr(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=a}Jt.axialAlignedBoundingBox(s,hs(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,r=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const a=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Hc(s),Bi.STROKE),a){const o=new Path2D;o.addPath(e,s.getTransform().invertSelf().multiplySelf(a)),e=o}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);r&&this.consumePath(e,this.current.getClippedPathBoundingBox(Bi.STROKE,hs(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,r=!0){const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const c=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,Hc(s),Bi.FILL),c){const d=new Path2D;d.addPath(e,s.getTransform().invertSelf().multiplySelf(c)),e=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),o&&s.restore(),r&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=OK}eoClip(){this.pendingClip=N3}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,r=this.ctx;if(e===void 0)return;const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:d}of e)s.addPath(d,new DOMMatrix(a).preMultiplySelf(i).translate(o,l).scale(c,-c));r.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,r){const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||IC,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Pr("Invalid font matrix for font "+e),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=s.systemFontInfo?.css||`"${a}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let d=r;r<g3?d=g3:r>v3&&(d=v3),this.current.fontSizeScale=r/d,this.ctx.font=`${c} ${l} ${d}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,r){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,r){this.setLeading(-r),this.moveText(e,r)}setTextMatrix(e){const{current:r}=this;r.textMatrix=e,r.textMatrixScale=Math.hypot(e[0],e[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#r(e,r,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(r)),i}paintChar(e,r,s,i,a){const o=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,h=d&ca.FILL_STROKE_MASK,f=!!(d&ca.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||f||p||y)&&(v=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||y){o.save(),o.translate(r,s),o.scale(u,-u);let g;if((h===ca.FILL||h===ca.FILL_STROKE)&&(i?(g=o.getTransform(),o.setTransform(...i),o.fill(this.#r(v,g,i))):o.fill(v)),h===ca.STROKE||h===ca.FILL_STROKE)if(a){g||=o.getTransform(),o.setTransform(...a);const{a:b,b:j,c:w,d:C}=g,E=Jt.inverseTransform(a),N=Jt.transform([b,j,w,C,0,0],E);Jt.singularValueDecompose2dScale(N,ko),o.lineWidth*=Math.max(ko[0],ko[1])/u,o.stroke(this.#r(v,g,a))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(h===ca.FILL||h===ca.FILL_STROKE)&&o.fillText(e,r,s),(h===ca.STROKE||h===ca.FILL_STROKE)&&o.strokeText(e,r,s);f&&(this.pendingTextPaths||=[]).push({transform:hs(o),x:r,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const r=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<r.length;i+=4)if(r[i]>0&&r[i]<255){s=!0;break}return Fr(this,"isFontSubpixelAAEnabled",s)}showText(e){const r=this.current,s=r.font;if(s.isType3Font)return this.showType3Text(e);const i=r.fontSize;if(i===0)return;const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,d=r.fontDirection,u=r.textHScale*d,h=e.length,f=s.vertical,p=f?1:-1,y=s.defaultVMetrics,v=i*r.fontMatrix[0],g=r.textRenderingMode===ca.FILL&&!s.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),d>0?a.scale(u,-1):a.scale(u,1);let b,j;if(r.patternFill){a.save();const A=r.fillColor.getPattern(a,this,Hc(a),Bi.FILL);b=hs(a),a.restore(),a.fillStyle=A}if(r.patternStroke){a.save();const A=r.strokeColor.getPattern(a,this,Hc(a),Bi.STROKE);j=hs(a),a.restore(),a.strokeStyle=A}let w=r.lineWidth;const C=r.textMatrixScale;if(C===0||w===0){const A=r.textRenderingMode&ca.FILL_STROKE_MASK;(A===ca.STROKE||A===ca.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=C;if(o!==1&&(a.scale(o,o),w/=o),a.lineWidth=w,s.isInvalidPDFjsFont){const A=[];let _=0;for(const k of e)A.push(k.unicode),_+=k.width;a.fillText(A.join(""),0,0),r.x+=_*v*u,a.restore(),this.compose();return}let E=0,N;for(N=0;N<h;++N){const A=e[N];if(typeof A=="number"){E+=p*A*i/1e3;continue}let _=!1;const k=(A.isSpace?c:0)+l,F=A.fontChar,I=A.accent;let T,R,O=A.width;if(f){const q=A.vmetric||y,B=-(A.vmetric?q[1]:O*.5)*v,K=q[2]*v;O=q?-q[0]:O,T=B/o,R=(E+K)/o}else T=E/o,R=0;if(s.remeasure&&O>0){const q=a.measureText(F).width*1e3/i*o;if(O<q&&this.isFontSubpixelAAEnabled){const B=O/q;_=!0,a.save(),a.scale(B,1),T/=B}else O!==q&&(T+=(O-q)/2e3*i/o)}if(this.contentVisible&&(A.isInFont||s.missingFile)){if(g&&!I)a.fillText(F,T,R);else if(this.paintChar(F,T,R,b,j),I){const q=T+i*I.offset.x/o,B=R-i*I.offset.y/o;this.paintChar(I.fontChar,q,B,b,j)}}const z=f?O*v-k*d:O*v+k*d;E+=z,_&&a.restore()}f?r.y-=E:r.x+=E*u,a.restore(),this.compose()}showType3Text(e){const r=this.ctx,s=this.current,i=s.font,a=s.fontSize,o=s.fontDirection,l=i.vertical?1:-1,c=s.charSpacing,d=s.wordSpacing,u=s.textHScale*o,h=s.fontMatrix||IC,f=e.length,p=s.textRenderingMode===ca.INVISIBLE;let y,v,g,b;if(!(p||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(u,o),y=0;y<f;++y){if(v=e[y],typeof v=="number"){b=l*v*a/1e3,this.ctx.translate(b,0),s.x+=b*u;continue}const j=(v.isSpace?d:0)+c,w=i.charProcOperatorList[v.operatorListId];w?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...h),this.executeOperatorList(w),this.restore()):Pr(`Type3 character "${v.operatorListId}" is not available.`);const C=[v.width,0];Jt.applyTransform(C,h),g=C[0]*a+j,r.translate(g,0),s.x+=g*u}r.restore()}}setCharWidth(e,r){}setCharWidthAndBounds(e,r,s,i,a,o){const l=new Path2D;l.rect(s,i,a-s,o-i),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let r;if(e[0]==="TilingPattern"){const s=this.baseTransform||hs(this.ctx),i={createCanvasGraphics:a=>new sg(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new S4(e,this.ctx,i,s)}else r=this._getPattern(e[1],e[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,r=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=EK(this.getObject(e)),this.cachedPatterns.set(e,s)),r&&(s.matrix=r),s}shadingFill(e){if(!this.contentVisible)return;const r=this.ctx;this.save();const s=this._getPattern(e);r.fillStyle=s.getPattern(r,this,Hc(r),Bi.SHADING);const i=Hc(r);if(i){const{width:a,height:o}=r.canvas,l=Yp.slice();Jt.axialAlignedBoundingBox([0,0,a,o],i,l);const[c,d,u,h]=l;this.ctx.fillRect(c,d,u-c,h-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){In("Should not call beginInlineImage")}beginImageData(){In("Should not call beginImageData")}paintFormXObjectBegin(e,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=hs(this.ctx),r)){Jt.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,i,a,o]=r,l=new Path2D;l.rect(s,i,a-s,o-i),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;e.isolated||fj("TODO: Support non-isolated groups."),e.knockout&&Pr("Knockout groups not supported.");const s=hs(r);if(e.matrix&&r.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Yp.slice();Jt.axialAlignedBoundingBox(e.bbox,hs(r),i);const a=[0,0,r.canvas.width,r.canvas.height];i=Jt.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),d=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,c,d),f=h.context;f.translate(-o,-l),f.transform(...s);let p=new Path2D;const[y,v,g,b]=e.bbox;if(p.rect(y,v,g-y,b-v),e.matrix){const j=new Path2D;j.addPath(p,new DOMMatrix(e.matrix)),p=j}f.clip(p),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),Lv(r,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=hs(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const a=Yp.slice();Jt.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],i,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,r,s,i,a){if(this.#e(),Hy(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,Jt.singularValueDecompose2dScale(hs(this.ctx),ko);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,u);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(ko[0],0,0,-ko[1],0,l*ko[1]),Hy(this.ctx)}else{Hy(this.ctx),this.endPath();const c=new Path2D;c.rect(r[0],r[1],o,l),this.ctx.clip(c)}}this.current=new y3(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const r=e.count;e=this.getObject(e.data,e),e.count=r;const s=this.ctx,i=this._createMaskCanvas(e),a=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,r,s=0,i=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=hs(l);l.transform(r,s,i,a,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let u=0,h=o.length;u<h;u+=2){const f=Jt.transform(c,[r,s,i,a,o[u],o[u+1]]);l.drawImage(d.canvas,f[4],f[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const a of e){const{data:o,width:l,height:c,transform:d}=a,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=u.context;h.save();const f=this.getObject(o,a);j3(h,f),h.globalCompositeOperation="source-in",h.fillStyle=i?s.getPattern(h,this,Hc(r),Bi.FILL):s,h.fillRect(0,0,l,c),h.restore(),r.save(),r.transform(...d),r.scale(1,-1),Vy(r,u.canvas,0,0,l,c,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Pr("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(e,r,s,i){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Pr("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let d=0,u=i.length;d<u;d+=2)c.push({transform:[r,0,0,s,i[d],i[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:r,width:s,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",s,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(r,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const r=e.width,s=e.height,i=this.ctx;this.save();const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/r,-1/s);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",r,s).context;b3(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Hc(i));i.imageSmoothingEnabled=w3(hs(i),e.interpolate),Vy(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,r,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,r){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const a=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",a,o).context;b3(c,e),i=this.applyTransferMapsToCanvas(c)}for(const a of r)s.save(),s.transform(...a.transform),s.scale(1,-1),Vy(s,i,a.x,a.y,a.w,a.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,r){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,r){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,r){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===N3?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=hs(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const r=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:r,b:s,c:i,d:a}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(r),d=Math.abs(a);if(c===d)if(e===0)o=l=1/c;else{const u=c*e;o=l=u<1?1/u:1}else if(e===0)o=1/c,l=1/d;else{const u=c*e,h=d*e;o=u<1?1/u:1,l=h<1?1/h:1}}else{const c=Math.abs(r*a-s*i),d=Math.hypot(r,s),u=Math.hypot(i,a);if(e===0)o=u/c,l=d/c;else{const h=e*c;o=u>h?u/h:1,l=d>h?d/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,r){const{ctx:s,current:{lineWidth:i}}=this,[a,o]=this.getScaleForStroking();if(a===o){s.lineWidth=(i||1)*a,s.stroke(e);return}const l=s.getLineDash();r&&s.save(),s.scale(a,o),P2.a=1/a,P2.d=1/o;const c=new Path2D;if(c.addPath(e,P2),l.length>0){const d=Math.max(a,o);s.setLineDash(l.map(u=>u/d)),s.lineDashOffset/=d}s.lineWidth=i||1,s.stroke(c),r&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in Ix)sg.prototype[t]!==void 0&&(sg.prototype[Ix[t]]=sg.prototype[t]);class xm{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class RK{#e;#t;constructor({parsedData:e,rawData:r}){this.#e=e,this.#t=r}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Hp=Symbol("INTERNAL");class LK{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:r,intent:s,usage:i,rbGroups:a}){this.#e=!!(e&_o.DISPLAY),this.#t=!!(e&_o.PRINT),this.name=r,this.intent=s,this.usage=i,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:r}=this.usage;return this.#e?r?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,r,s=!1){e!==Hp&&In("Internal method `_setVisible` called."),this.#r=s,this.#n=r}}class MK{#e=null;#t=new Map;#r=null;#n=null;constructor(e,r=_o.DISPLAY){if(this.renderingIntent=r,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new LK(r,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(Hp,!1);for(const s of e.on)this.#t.get(s)._setVisible(Hp,!0);for(const s of e.off)this.#t.get(s)._setVisible(Hp,!1);this.#r=this.getHash()}}#i(e){const r=e.length;if(r<2)return!0;const s=e[0];for(let i=1;i<r;i++){const a=e[i];let o;if(Array.isArray(a))o=this.#i(a);else if(this.#t.has(a))o=this.#t.get(a).visible;else return Pr(`Optional content group not found: ${a}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return fj("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Pr(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const r of e.ids){if(!this.#t.has(r))return Pr(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const r of e.ids){if(!this.#t.has(r))return Pr(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const r of e.ids){if(!this.#t.has(r))return Pr(`Optional content group not found: ${r}`),!0;if(!this.#t.get(r).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const r of e.ids){if(!this.#t.has(r))return Pr(`Optional content group not found: ${r}`),!0;if(this.#t.get(r).visible)return!1}return!0}return Pr(`Unknown optional content policy ${e.policy}.`),!0}return Pr(`Unknown group type ${e.type}.`),!0}setVisibility(e,r=!0,s=!0){const i=this.#t.get(e);if(!i){Pr(`Optional content group not found: ${e}`);return}if(s&&r&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&this.#t.get(o)?._setVisible(Hp,!1,!0);i._setVisible(Hp,!!r,!0),this.#e=null}setOCGState({state:e,preserveRB:r}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const a=this.#t.get(i);if(a)switch(s){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!a.visible,r);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new B7;for(const[r,s]of this.#t)e.update(`${r}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class FK{constructor(e,{disableRange:r=!1,disableStream:s=!1}){Xs(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,a?.length>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!r,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:r}){const s=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(s),!0)});Xs(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const r=this._rangeReaders.indexOf(e);r>=0&&this._rangeReaders.splice(r,1)}getFullReader(){Xs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new $K(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const s=new BK(this,e,r);return this._pdfDataRangeTransport.requestDataRange(e,r),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class $K{constructor(e,r,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=pj(i)?i:null,this._queuedChunks=r||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class BK{constructor(e,r,s){this._stream=e,this._begin=r,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zK(t){let e=!0,r=s("filename\\*","i").exec(t);if(r){r=r[1];let u=l(r);return u=unescape(u),u=c(u),u=d(u),a(u)}if(r=o(t),r){const u=d(r);return a(u)}if(r=s("filename","i").exec(t),r){r=r[1];let u=l(r);return u=d(u),a(u)}function s(u,h){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(u,h){if(u){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(u,{fatal:!0}),p=D0(h);h=f.decode(p),e=!1}catch{}}return h}function a(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const h=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,v,g,b]=f;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[g,b]}const y=[];for(let v=0;v<h.length&&v in h;++v){let[g,b]=h[v];b=l(b),g&&(b=unescape(b),v===0&&(b=c(b))),y.push(b)}return y.join("")}function l(u){if(u.startsWith('"')){const h=u.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}u=h.join('"')}return u}function c(u){const h=u.indexOf("'");if(h===-1)return u;const f=u.slice(0,h),y=u.slice(h+1).replace(/^[^']*'/,"");return i(f,y)}function d(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,g){return String.fromCharCode(parseInt(g,16))}),i(f,y);try{y=atob(y)}catch{}return i(f,y)})}return""}function K7(t,e){const r=new Headers;if(!t||!e||typeof e!="object")return r;for(const s in e){const i=e[s];i!==void 0&&r.append(s,i)}return r}function gj(t){return URL.parse(t)?.origin??null}function Y7({responseHeaders:t,isHttp:e,rangeChunkSize:r,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*r)||s||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function X7(t){const e=t.get("Content-Disposition");if(e){let r=zK(e);if(r.includes("%"))try{r=decodeURIComponent(r)}catch{}if(pj(r))return r}return null}function M0(t,e){return new Dx(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function Z7(t){return t===200||t===206}function Q7(t,e,r){return{method:"GET",headers:t,signal:r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function J7(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Pr(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class qK{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=K7(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UK(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const s=new VK(this,e,r);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class UK{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const r=e.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange;const s=new Headers(e.headers),i=r.url;fetch(i,Q7(s,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=gj(a.url),!Z7(a.status))throw M0(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:l,suggestedLength:c}=Y7({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=X7(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:J7(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class VK{constructor(e,r,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${r}-${s-1}`);const o=i.url;fetch(o,Q7(a,this._withCredentials,this._abortController)).then(l=>{const c=gj(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!Z7(l.status))throw M0(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:r}=await this._reader.read();return r?{value:e,done:r}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:J7(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const T2=200,_2=206;function HK(t){const e=t.response;return typeof e!="string"?e:D0(e).buffer}class WK{_responseOrigin=null;constructor({url:e,httpHeaders:r,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=K7(this.isHttp,r),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const r=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const[a,o]of this.headers)r.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(r.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=_2):i.expectedStatus=T2,r.responseType="arraybuffer",Xs(e.onError,"Expected `onError` callback to be provided."),r.onerror=()=>{e.onError(r.status)},r.onreadystatechange=this.onStateChange.bind(this,s),r.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,r.send(null),s}onProgress(e,r){const s=this.pendingRequests[e];s&&s.onProgress?.(r)}onStateChange(e,r){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const a=i.status||T2;if(!(a===T2&&s.expectedStatus===_2)&&a!==s.expectedStatus){s.onError(i.status);return}const l=HK(i);if(a===_2){const c=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?s.onDone({begin:parseInt(d[1],10),chunk:l}):(Pr('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const r=this.pendingRequests[e].xhr;delete this.pendingRequests[e],r.abort()}}class GK{constructor(e){this._source=e,this._manager=new WK(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const r=this._rangeRequestReaders.indexOf(e);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return Xs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new KK(this._manager,this._source),this._fullRequestReader}getRangeReader(e,r){const s=new YK(this._manager,e,r);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class KK{constructor(e,r){this._manager=e,this._url=r.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,r=this._manager.getRequestXhr(e);this._manager._responseOrigin=gj(r.responseURL);const s=r.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=Y7({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=X7(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=M0(e,this._url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class YK{constructor(e,r,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:r,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=gj(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const r=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=M0(e,this._url);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const XK=/^[a-z][a-z0-9\-+.]+:/i;function ZK(t){if(XK.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class QK{constructor(e){this.source=e,this.url=ZK(e.url),Xs(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Xs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new JK(this),this._fullRequestReader}getRangeReader(e,r){if(r<=this._progressiveDataLength)return null;const s=new eY(this,e,r);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class JK{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=M0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class eY{constructor(e,r,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:r,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Mv=Symbol("INITIAL_DATA");class e${#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Mv}}get(e,r=null){if(r){const i=this.#t(e);return i.promise.then(()=>r(i.data)),null}const s=this.#e[e];if(!s||s.data===Mv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const r=this.#e[e];return!!r&&r.data!==Mv}delete(e){const r=this.#e[e];return!r||r.data===Mv?!1:(delete this.#e[e],!0)}resolve(e,r=null){const s=this.#t(e);s.data=r,s.resolve()}clear(){for(const e in this.#e){const{data:r}=this.#e[e];r?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:r}=this.#e[e];r!==Mv&&(yield[e,r])}}}const tY=1e5,S3=30;class da{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#s=null;#o=0;#a=0;#u=null;#l=null;#h=0;#d=0;#f=Object.create(null);#m=[];#p=null;#c=[];#g=new WeakMap;#v=null;static#x=new Map;static#b=new Map;static#j=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:e,container:r,viewport:s}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=r,this.#d=s.scale*lc.pixelRatio,this.#h=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:o,pageY:l}=s.rawDims;this.#v=[1,0,0,-1,-o,l+a],this.#a=i,this.#o=a,da.#I(),Yh(r,s),this.#e.promise.finally(()=>{da.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:r}=Si.platform;return Fr(this,"fontFamilyMap",new Map([["sans-serif",`${e&&r?"Calibri, ":""}sans-serif`],["monospace",`${e&&r?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:r,done:s})=>{if(s){this.#e.resolve();return}this.#i??=r.lang,Object.assign(this.#f,r.styles),this.#E(r.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),da.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:r=null}){const s=e.scale*lc.pixelRatio,i=e.rotation;if(i!==this.#h&&(r?.(),this.#h=i,Yh(this.#l,{rotation:i})),s!==this.#d){r?.(),this.#d=s;const a={div:null,properties:null,ctx:da.#P(this.#i)};for(const o of this.#c)a.properties=this.#g.get(o),a.div=o,this.#N(a)}}cancel(){const e=new pu("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#m}#E(e){if(this.#r)return;this.#s.ctx??=da.#P(this.#i);const r=this.#c,s=this.#m;for(const i of e){if(r.length>tY){Pr("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#T(i)}}#T(e){const r=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(r);const i=Jt.transform(this.#v,e.transform);let a=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(a+=Math.PI/2);let l=this.#n&&o.fontSubstitution||o.fontFamily;l=da.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),d=c*da.#D(l,o,this.#i);let u,h;a===0?(u=i[4],h=i[5]-d):(u=i[4]+d*Math.sin(a),h=i[5]-d*Math.cos(a));const f="calc(var(--total-scale-factor) *",p=r.style;this.#t===this.#l?(p.left=`${(100*u/this.#a).toFixed(2)}%`,p.top=`${(100*h/this.#o).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(da.#w*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,this.#n&&(r.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(s.angle=a*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);v!==g&&Math.max(v,g)/Math.min(v,g)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),this.#g.set(r,s),this.#s.div=r,this.#s.properties=s,this.#N(this.#s),s.hasText&&this.#t.append(r),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#t.append(v)}}#N(e){const{div:r,properties:s,ctx:i}=e,{style:a}=r;let o="";if(da.#w>1&&(o=`scale(${1/da.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:d}=s;da.#C(i,d*this.#d,l);const{width:u}=i.measureText(r.textContent);u>0&&(o=`scaleX(${c*this.#d/u}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#A.size>0)){this.#x.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#P(e=null){let r=this.#b.get(e||="");if(!r){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),r=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,r),this.#j.set(r,{size:0,family:""})}return r}static#C(e,r,s){const i=this.#j.get(e);r===i.size&&s===i.family||(e.font=`${r}px ${s}`,i.size=r,i.family=s)}static#I(){if(this.#w!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#D(e,r,s){const i=this.#x.get(e);if(i)return i;const a=this.#P(s);a.canvas.width=a.canvas.height=S3,this.#C(a,S3,e);const o=a.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+c):(Si.platform.isFirefox&&Pr("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),r.ascent?d=r.ascent:r.descent&&(d=1+r.descent)),this.#x.set(e,d),d}}class kx{static textContent(e){const r=[],s={items:r,styles:Object.create(null)};function i(a){if(!a)return;let o=null;const l=a.name;if(l==="#text")o=a.value;else if(kx.shouldBuildText(l))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&r.push({str:o}),!!a.children)for(const c of a.children)i(c)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const rY=100;function t$(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new A4,{docId:r}=e,s=t.url?hK(t.url):null,i=t.data?fK(t.data):null,a=t.httpHeaders||null,o=t.withCredentials===!0,l=t.password??null,c=t.range instanceof C4?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let u=t.worker instanceof hg?t.worker:null;const h=t.verbosity,f=typeof t.docBaseUrl=="string"&&!O0(t.docBaseUrl)?t.docBaseUrl:null,p=qy(t.cMapUrl),y=t.cMapPacked!==!1,v=t.CMapReaderFactory||(_a?bK:h3),g=qy(t.iccUrl),b=qy(t.standardFontDataUrl),j=t.StandardFontDataFactory||(_a?jK:f3),w=qy(t.wasmUrl),C=t.WasmFactory||(_a?wK:m3),E=t.stopAtErrors!==!0,N=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,A=t.isEvalSupported!==!1,_=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!_a,k=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!_a&&(Si.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,I=typeof t.disableFontFace=="boolean"?t.disableFontFace:_a,T=t.fontExtraProperties===!0,R=t.enableXfa===!0,O=t.ownerDocument||globalThis.document,z=t.disableRange===!0,q=t.disableStream===!0,B=t.disableAutoFetch===!0,K=t.pdfBug===!0,Y=t.CanvasFactory||(_a?yK:gK),J=t.FilterFactory||(_a?xK:vK),H=t.enableHWA===!0,$=t.useWasm!==!1,W=c?c.length:t.length??NaN,te=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!_a&&!I,ee=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(v===h3&&j===f3&&C===m3&&p&&b&&w&&sx(p,document.baseURI)&&sx(b,document.baseURI)&&sx(w,document.baseURI)),ne=null;KG(h);const ae={canvasFactory:new Y({ownerDocument:O,enableHWA:H}),filterFactory:new J({docId:r,ownerDocument:O}),cMapReaderFactory:ee?null:new v({baseUrl:p,isCompressed:y}),standardFontDataFactory:ee?null:new j({baseUrl:b}),wasmFactory:ee?null:new C({baseUrl:w})};u||(u=hg.create({verbosity:h,port:xm.workerPort}),e._worker=u);const ve={docId:r,apiVersion:"5.3.93",data:i,password:l,disableAutoFetch:B,rangeChunkSize:d,length:W,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:N,disableFontFace:I,ignoreErrors:E,isEvalSupported:A,isOffscreenCanvasSupported:_,isImageDecoderSupported:k,canvasMaxAreaInBytes:F,fontExtraProperties:T,useSystemFonts:te,useWasm:$,useWorkerFetch:ee,cMapUrl:p,iccUrl:g,standardFontDataUrl:b,wasmUrl:w}},xe={ownerDocument:O,pdfBug:K,styleElement:ne,loadingParams:{disableAutoFetch:B,enableXfa:R}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Se=u.messageHandler.sendWithPromise("GetDocRequest",ve,i?[i.buffer]:null);let Pe;if(c)Pe=new FK(c,{disableRange:z,disableStream:q});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ce=sx(s)?qK:_a?QK:GK;Pe=new Ce({url:s,length:W,httpHeaders:a,withCredentials:o,rangeChunkSize:d,disableRange:z,disableStream:q})}return Se.then(Ce=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const He=new ix(r,Ce,u.port),Ke=new iY(He,e,Pe,xe,ae);e._transport=Ke,He.send("Ready",null)})}).catch(e._capability.reject),e}class A4{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${A4.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class C4{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#i=[];constructor(e,r,s=!1,i=null){this.length=e,this.initialData=r,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,r){for(const s of this.#i)s(e,r)}onDataProgress(e,r){this.#e.promise.then(()=>{for(const s of this.#n)s(e,r)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const r of this.#r)r(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,r){In("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class nY{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fr(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(r)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class sY{#e=!1;constructor(e,r,s,i=!1){this._pageIndex=e,this._pageInfo=r,this._transport=s,this._stats=i?new c3:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new e$,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}={}){return new k0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:r,offsetX:s,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:r}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,r)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fr(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:r,intent:s="display",annotationMode:i=ou.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:u=null,isEditing:h=!1}){this._stats?.time("Overall");const f=this._transport.getRenderingIntent(s,i,u,h),{renderingIntent:p,cacheKey:y}=f;this.#e=!1,l||=this._transport.getOptionalContentConfig(p);let v=this._intentStates.get(y);v||(v=Object.create(null),this._intentStates.set(y,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const g=!!(p&_o.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f));const b=C=>{v.renderTasks.delete(j),g&&(this.#e=!0),this.#t(),C?(j.capability.reject(C),this._abortOperatorList({intentState:v,reason:C instanceof Error?C:new Error(C)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new Xp({callback:b,params:{canvasContext:e,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:d});(v.renderTasks||=new Set).add(j);const w=j.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([C,E])=>{if(this.destroyed){b();return}if(this._stats?.time("Rendering"),!(E.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:C,optionalContentConfig:E}),j.operatorListChanged()}).catch(b),w}getOperatorList({intent:e="display",annotationMode:r=ou.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,r,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:r===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>kx.textContent(s));const r=this.streamTextContent(e);return new Promise(function(s,i){function a(){o.read().then(function({value:c,done:d}){if(d){s(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),a()},i)}const o=r.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const s of r.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const r=this.#t();return e&&r&&(this._stats&&=new c3),r}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:r}of this._intentStates.values())if(e.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,r){const s=this._intentStates.get(r);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,r){for(let s=0,i=e.length;s<i;s++)r.operatorList.fnArray.push(e.fnArray[s]),r.operatorList.argsArray.push(e.argsArray[s]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const s of r.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageSerializable:s,modifiedIds:i}){const{map:a,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:a,modifiedIds:i},o).getReader(),d=this._intentStates.get(r);d.streamReader=c;const u=()=>{c.read().then(({value:h,done:f})=>{if(f){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,d),u())},h=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const f of d.renderTasks)f.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(h);else if(d.opListReadCapability)d.opListReadCapability.reject(h);else throw h}})};u()}_abortOperatorList({intentState:e,reason:r,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(r instanceof mj){let i=rY;r.extraDelay>0&&r.extraDelay<1e3&&(i+=r.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:r,force:!0})},i);return}}if(e.streamReader.cancel(new pu(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Rh,Jl,au,pm,uj,gm,vm,Ra,_b,r$,n$,ax,ug,Ib;const os=class os{constructor({name:e=null,port:r=null,verbosity:s=YG()}={}){Uc(this,Ra);Uc(this,Rh,Promise.withResolvers());Uc(this,Jl,null);Uc(this,au,null);Uc(this,pm,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,r){if(as(os,vm).has(r))throw new Error("Cannot use more than one PDFWorker per port.");as(os,vm).set(r,this),Vc(this,Ra,r$).call(this,r)}else Vc(this,Ra,n$).call(this)}get promise(){return as(this,Rh).promise}get port(){return as(this,au)}get messageHandler(){return as(this,Jl)}destroy(){this.destroyed=!0,as(this,pm)?.terminate(),Qa(this,pm,null),as(os,vm).delete(as(this,au)),Qa(this,au,null),as(this,Jl)?.destroy(),Qa(this,Jl,null)}static create(e){const r=as(this,vm).get(e?.port);if(r){if(r._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return r}return new os(e)}static get workerSrc(){if(xm.workerSrc)return xm.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fr(this,"_setupFakeWorkerGlobal",(async()=>as(this,ug,Ib)?as(this,ug,Ib):(await import(this.workerSrc)).WorkerMessageHandler)())}};Rh=new WeakMap,Jl=new WeakMap,au=new WeakMap,pm=new WeakMap,uj=new WeakMap,gm=new WeakMap,vm=new WeakMap,Ra=new WeakSet,_b=function(){as(this,Rh).resolve(),as(this,Jl).send("configure",{verbosity:this.verbosity})},r$=function(e){Qa(this,au,e),Qa(this,Jl,new ix("main","worker",e)),as(this,Jl).on("ready",()=>{}),Vc(this,Ra,_b).call(this)},n$=function(){if(as(os,gm)||as(os,ug,Ib)){Vc(this,Ra,ax).call(this);return}let{workerSrc:e}=os;try{os._isSameOrigin(window.location,e)||(e=os._createCDNWrapper(new URL(e,window.location).href));const r=new Worker(e,{type:"module"}),s=new ix("main","worker",r),i=()=>{a.abort(),s.destroy(),r.terminate(),this.destroyed?as(this,Rh).reject(new Error("Worker was destroyed")):Vc(this,Ra,ax).call(this)},a=new AbortController;r.addEventListener("error",()=>{as(this,pm)||i()},{signal:a.signal}),s.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}Qa(this,Jl,s),Qa(this,au,r),Qa(this,pm,r),Vc(this,Ra,_b).call(this)}),s.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{Vc(this,Ra,ax).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{fj("The worker has been disabled.")}Vc(this,Ra,ax).call(this)},ax=function(){as(os,gm)||(Pr("Setting up fake worker."),Qa(os,gm,!0)),os._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){as(this,Rh).reject(new Error("Worker was destroyed"));return}const r=new pK;Qa(this,au,r);const s=`fake${ZI(os,uj)._++}`,i=new ix(s+"_worker",s,r);e.setup(i,r),Qa(this,Jl,new ix(s,s+"_worker",r)),Vc(this,Ra,_b).call(this)}).catch(e=>{as(this,Rh).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ug=new WeakSet,Ib=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Uc(os,ug),Uc(os,uj,0),Uc(os,gm,!1),Uc(os,vm,new WeakMap),_a&&(Qa(os,gm,!0),xm.workerSrc||="./pdf.worker.mjs"),os._isSameOrigin=(e,r)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(r,s);return s.origin===i.origin},os._createCDNWrapper=e=>{const r=`await import("${e}");`;return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))},os.fromPort=e=>{if(sK("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return os.create(e)};let hg=os;class iY{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#i=null;constructor(e,r,s,i,a){this.messageHandler=e,this.loadingTask=r,this.commonObjs=new e$,this.fontLoader=new dK({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,r=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,r);return this.#e.set(e,i),i}get annotationStorage(){return Fr(this,"annotationStorage",new j4)}getRenderingIntent(e,r=ou.ENABLE,s=null,i=!1,a=!1){let o=_o.DISPLAY,l=DC;switch(e){case"any":o=_o.ANY;break;case"display":break;case"print":o=_o.PRINT;break;default:Pr(`getRenderingIntent - invalid intent: ${e}`)}const c=o&_o.PRINT&&s instanceof z7?s:this.annotationStorage;switch(r){case ou.DISABLE:o+=_o.ANNOTATIONS_DISABLE;break;case ou.ENABLE:break;case ou.ENABLE_FORMS:o+=_o.ANNOTATIONS_FORMS;break;case ou.ENABLE_STORAGE:o+=_o.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Pr(`getRenderingIntent - invalid annotationMode: ${r}`)}i&&(o+=_o.IS_EDITING),a&&(o+=_o.OPLIST);const{ids:d,hash:u}=c.modifiedIds,h=[o,l.hash,u];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),da.cleanup(),this._networkStream?.cancelAllRequests(new pu("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(s,i)=>{Xs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}Xs(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&r.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{r.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{Xs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(s.begin,s.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:l}){if(l){i.close();return}Xs(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,r._capability.resolve(new nY(s,this))}),e.on("DocException",s=>{r._capability.reject(eo(s))}),e.on("PasswordRequest",s=>{this.#i=Promise.withResolvers();try{if(!r.onPassword)throw eo(s);const i=a=>{a instanceof Error?this.#i.reject(a):this.#i.resolve({password:a})};r.onPassword(i,s.code)}catch(i){this.#i.reject(i)}return this.#i.promise}),e.on("DataLoaded",s=>{r.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,a])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in a){const d=a.error;Pr(`Error during font loading: ${d}`),this.commonObjs.resolve(s,d);break}const o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(d,u)=>globalThis.FontInspector.fontAdded(d,u):null,l=new uK(a,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(s,l)});break;case"CopyLocalImage":const{imageRef:c}=a;Xs(c,"The imageRef must be defined.");for(const d of this.#t.values())for(const[,u]of d.objs)if(u?.ref===c)return u.dataLen?(this.commonObjs.resolve(s,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,a,o])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",s=>{this.destroyed||r.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Pr("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,s=this.#r.get(r);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const o=new sY(r,a,this,this._params.pdfBug);return this.#t.set(r,o),o});return this.#r.set(r,i),i}getPageIndex(e){return kC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(r=>new MK(r,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",r=this.#e.get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new RK(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of this.#t.values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),da.cleanup()}}cachedPageNumber(e){if(!kC(e))return null;const r=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(r)??null}}class aY{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:r}=this.#e;return e.form||e.canvas&&r?.size>0}}class Xp{#e=null;static#t=new WeakSet;constructor({callback:e,params:r,objs:s,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:u=!1,pdfBug:h=!1,pageColors:f=null}){this.callback=e,this.params=r,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new aY(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){if(this.cancelled)return;if(this._canvas){if(Xp.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Xp.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:a,background:o}=this.params;this.gfx=new sg(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,r=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Xp.#t.delete(this._canvas),e||=new mj(`Rendering cancelled, page ${this._pageIndex+1}`,r),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Xp.#t.delete(this._canvas),this.callback())))}}const s$="5.3.93",i$="cbeef3233";function A3(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Fv(t){return Math.max(0,Math.min(255,255*t))}class C3{static CMYK_G([e,r,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*r+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Fv(e),[e,e,e]}static G_HTML([e]){const r=A3(e);return`#${r}${r}${r}`}static RGB_G([e,r,s]){return["G",.3*e+.59*r+.11*s]}static RGB_rgb(e){return e.map(Fv)}static RGB_HTML(e){return`#${e.map(A3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,r,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,r+i)]}static CMYK_rgb([e,r,s,i]){return[Fv(1-Math.min(1,e+i)),Fv(1-Math.min(1,s+i)),Fv(1-Math.min(1,r+i))]}static CMYK_HTML(e){const r=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(r)}static RGB_CMYK([e,r,s]){const i=1-e,a=1-r,o=1-s,l=Math.min(i,a,o);return["CMYK",i,a,o,l]}}class oY{create(e,r,s=!1){if(e<=0||r<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${r}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${r}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){In("Abstract method `_createSVG` called.")}}class Ox extends oY{_createSVG(e){return document.createElementNS(tu,e)}}class E4{static setupStorage(e,r,s,i,a){const o=i.getValue(r,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(r,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(r,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(r,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(r,{value:d})});break}}static setAttributes({html:e,element:r,storage:s=null,intent:i,linkService:a}){const{attributes:o}=r,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&a.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,r,s)}static render(e){const r=e.annotationStorage,s=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:s});const l=a!=="richText",c=e.div;if(c.append(o),e.viewport){const h=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=h}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const h=document.createTextNode(i.value);o.append(h),l&&kx.shouldBuildText(i.name)&&d.push(h)}return{textDivs:d}}const u=[[i,-1,o]];for(;u.length>0;){const[h,f,p]=u.at(-1);if(f+1===h.children.length){u.pop();continue}const y=h.children[++u.at(-1)[1]];if(y===null)continue;const{name:v}=y;if(v==="#text"){const b=document.createTextNode(y.value);d.push(b),p.append(b);continue}const g=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,v):document.createElement(v);if(p.append(g),y.attributes&&this.setAttributes({html:g,element:y,storage:r,intent:a,linkService:s}),y.children?.length>0)u.push([y,-1,g]);else if(y.value){const b=document.createTextNode(y.value);l&&kx.shouldBuildText(v)&&d.push(b),g.append(b)}}for(const h of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const r=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=r,e.div.hidden=!1}}const lY=9,Em=new WeakSet;class E3{static create(e){switch(e.data.annotationType){case Rs.LINK:return new a$(e);case Rs.TEXT:return new cY(e);case Rs.WIDGET:switch(e.data.fieldType){case"Tx":return new dY(e);case"Btn":return e.data.radioButton?new o$(e):e.data.checkBox?new hY(e):new fY(e);case"Ch":return new mY(e);case"Sig":return new uY(e)}return new zm(e);case Rs.POPUP:return new RC(e);case Rs.FREETEXT:return new l$(e);case Rs.LINE:return new gY(e);case Rs.SQUARE:return new vY(e);case Rs.CIRCLE:return new xY(e);case Rs.POLYLINE:return new c$(e);case Rs.CARET:return new bY(e);case Rs.INK:return new P4(e);case Rs.POLYGON:return new yY(e);case Rs.HIGHLIGHT:return new d$(e);case Rs.UNDERLINE:return new jY(e);case Rs.SQUIGGLY:return new wY(e);case Rs.STRIKEOUT:return new NY(e);case Rs.STAMP:return new u$(e);case Rs.FILEATTACHMENT:return new SY(e);default:return new Vs(e)}}}class Vs{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:r=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,r&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:r}){return!!(e?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Vs._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:r}=e;r&&this.#n(r),this.#r?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:r},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}}}=this;s?.splice(0,4,...e),r.left=`${100*(e[0]-l)/a}%`,r.top=`${100*(o-e[3]+c)/o}%`,i===0?(r.width=`${100*(e[2]-e[0])/a}%`,r.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)}_createContainer(e){const{data:r,parent:{page:s,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",r.id),this instanceof zm||(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex++,r.alternativeText&&(a.title=r.alternativeText),r.noRotate&&a.classList.add("norotate"),!r.rect||this instanceof RC){const{rotation:v}=r;return!r.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}const{width:l,height:c}=this;if(!e&&r.borderStyle.width>0){o.borderWidth=`${r.borderStyle.width}px`;const v=r.borderStyle.horizontalCornerRadius,g=r.borderStyle.verticalCornerRadius;if(v>0||g>0){const j=`calc(${v}px * var(--total-scale-factor)) / calc(${g}px * var(--total-scale-factor))`;o.borderRadius=j}else if(this instanceof o$){const j=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=j}switch(r.borderStyle.style){case Vp.SOLID:o.borderStyle="solid";break;case Vp.DASHED:o.borderStyle="dashed";break;case Vp.BEVELED:Pr("Unimplemented border style: beveled");break;case Vp.INSET:Pr("Unimplemented border style: inset");break;case Vp.UNDERLINE:o.borderBottomStyle="solid";break}const b=r.borderColor||null;b?(this.#t=!0,o.borderColor=Jt.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):o.borderWidth=0}const d=Jt.normalizeRect([r.rect[0],s.view[3]-r.rect[1]+s.view[1],r.rect[2],s.view[3]-r.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:h,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(d[0]-f)/u}%`,o.top=`${100*(d[1]-p)/h}%`;const{rotation:y}=r;return r.hasOwnCanvas||y===0?(o.width=`${100*l/u}%`,o.height=`${100*c/h}%`):this.setRotation(y,a),a}setRotation(e,r=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),r.style.width=`${100*a/s}%`,r.style.height=`${100*o/i}%`,r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(r,s,i)=>{const a=i.detail[r],o=a[0],l=a.slice(1);i.target.style[s]=C3[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:C3[`${o}_rgb`](l)})};return Fr(this,"_commonActions",{display:r=>{const{display:s}=r.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:r=>{this.annotationStorage.setValue(this.data.id,{noPrint:!r.detail.print})},hidden:r=>{const{hidden:s}=r.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.target.disabled=r.detail.readonly},required:r=>{this._setRequired(r.target,r.detail.required)},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)},rotation:r=>{const s=r.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,r){const s=this._commonActions;for(const i of Object.keys(r.detail))(e[i]||s[i])?.(r)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const s=this._commonActions;for(const[i,a]of Object.entries(r)){const o=s[i];if(o){const l={detail:{[i]:a},target:e};o(l),delete r[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[r,s,i,a]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,g,b,j]=e.subarray(2,6);if(i===v&&a===g&&r===b&&s===j)return}const{style:o}=this.container;let l;if(this.#t){const{borderColor:v,borderWidth:g}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${g}">`],this.container.classList.add("hasBorder")}const c=i-r,d=a-s,{svgFactory:u}=this,h=u.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=u.createElement("defs");h.append(f);const p=u.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let v=2,g=e.length;v<g;v+=8){const b=e[v],j=e[v+1],w=e[v+2],C=e[v+3],E=u.createElement("rect"),N=(w-r)/c,A=(a-j)/d,_=(b-w)/c,k=(j-C)/d;E.setAttribute("x",N),E.setAttribute("y",A),E.setAttribute("width",_),E.setAttribute("height",k),p.append(E),l?.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${A}" width="${_}" height="${k}"/>`)}this.#t&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,r=this.#r=new RC({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(r.render())}render(){In("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:l}of i){if(a===-1||o===r)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!Em.has(d)){Pr(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:d})}return s}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==r&&Em.has(i)&&s.push({id:o,exportValue:a,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const r of e)r.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:r}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:r,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class a$ extends Vs{constructor(e,r=null){super(e,{isRenderable:!0,ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(r.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action),i=!0):e.attachment?(this.#t(s,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#r(s,e.setOCGState),i=!0):e.dest?(this._bindLink(s,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&this.#e()}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),this.#e()}#t(e,r,s=null){e.href=this.linkService.getAnchorUrl(""),r.description&&(e.title=r.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(r.content,r.filename,s),!1),this.#e()}#r(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(r),!1),this.#e()}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,r){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Pr('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:a,include:o}=r,l=[];if(i.length!==0||a.length!==0){const u=new Set(a);for(const h of i){const f=this._fieldObjects[h]||[];for(const{id:p}of f)u.add(p)}for(const h of Object.values(this._fieldObjects))for(const f of h)u.has(f.id)===o&&l.push(f)}else for(const u of Object.values(this._fieldObjects))l.push(...u);const c=this.annotationStorage,d=[];for(const u of l){const{id:h}=u;switch(d.push(h),u.type){case"text":{const p=u.defaultValue||"";c.setValue(h,{value:p});break}case"checkbox":case"radiobutton":{const p=u.defaultValue===u.exportValues;c.setValue(h,{value:p});break}case"combobox":case"listbox":{const p=u.defaultValue||"";c.setValue(h,{value:p});break}default:continue}const f=document.querySelector(`[data-element-id="${h}"]`);if(f){if(!Em.has(f)){Pr(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class cY extends Vs{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class zm extends Vs{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Si.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,r,s,i,a){s.includes("mouse")?e.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{if(s==="blur"){if(!r.focused||!o.relatedTarget)return;r.focused=!1}else if(s==="focus"){if(r.focused)return;r.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}})})}_setEventListeners(e,r,s,i){for(const[a,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(r||={focused:!1}),this._setEventListener(e,r,a,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,r,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,r,"focus","Focus",null))}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=r===null?"transparent":Jt.makeHexColor(r[0],r[1],r[2])}_setTextStyle(e){const r=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||lY,a=e.style;let o;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(d/(N2*i))||1,h=d/u;o=Math.min(i,c(h/N2))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(d/N2))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=Jt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(a.textAlign=r[this.data.textAlignment])}_setRequired(e,r){r?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",r)}}class dY extends zm{constructor(e){const r=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:r})}setPropertyOnSiblings(e,r,s,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[r]=s),a.setValue(o.id,{[i]:s})}render(){const e=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(r,{value:this.data.fieldValue});let a=i.value||"";const o=e.getValue(r,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=l??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",l??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Em.add(s),s.setAttribute("data-element-id",r),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const d=this.data.dateFormat||this.data.timeFormat;d&&(s.title=d),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",h=>{e.setValue(r,{value:h.target.value}),this.setPropertyOnSiblings(s,"value",h.target.value,"value"),c.formattedValue=null}),s.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue??"";s.value=c.userValue=f,c.formattedValue=null});let u=h=>{const{formattedValue:f}=c;f!=null&&(h.target.value=f),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",f=>{if(c.focused)return;const{target:p}=f;c.userValue&&(p.value=c.userValue),c.lastCommittedValue=p.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),s.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const p={value(y){c.userValue=y.detail.value??"",e.setValue(r,{value:c.userValue.toString()}),y.target.value=c.userValue},formattedValue(y){const{formattedValue:v}=y.detail;c.formattedValue=v,v!=null&&y.target!==document.activeElement&&(y.target.value=v),e.setValue(r,{formattedValue:v})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{const{charLimit:v}=y.detail,{target:g}=y;if(v===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",v);let b=c.userValue;!b||b.length<=v||(b=b.slice(0,v),g.value=c.userValue=b,e.setValue(r,{value:b}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(p,f)}),s.addEventListener("keydown",f=>{c.commitKey=1;let p=-1;if(f.key==="Escape"?p=0:f.key==="Enter"&&!this.data.multiLine?p=2:f.key==="Tab"&&(c.commitKey=3),p===-1)return;const{value:y}=f.target;c.lastCommittedValue!==y&&(c.lastCommittedValue=y,c.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:y,willCommit:!0,commitKey:p,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const h=u;u=null,s.addEventListener("blur",f=>{if(!c.focused||!f.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{value:p}=f.target;c.userValue=p,c.lastCommittedValue!==p&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:p,willCommit:!0,commitKey:c.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}),h(f)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",f=>{c.lastCommittedValue=null;const{data:p,target:y}=f,{value:v,selectionStart:g,selectionEnd:b}=y;let j=g,w=b;switch(f.inputType){case"deleteWordBackward":{const C=v.substring(0,g).match(/\w*[^\w]*$/);C&&(j-=C[0].length);break}case"deleteWordForward":{const C=v.substring(g).match(/^[^\w]*\w*/);C&&(w+=C[0].length);break}case"deleteContentBackward":g===b&&(j-=1);break;case"deleteContentForward":g===b&&(w+=1);break}f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:v,change:p||"",willCommit:!1,selStart:j,selEnd:w}})}),this._setEventListeners(s,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(u&&s.addEventListener("blur",u),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${f}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class uY extends zm{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class hY extends zm{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,s=r.id;let i=e.getValue(s,{value:r.exportValue===r.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Em.add(a),a.setAttribute("data-element-id",s),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",r.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,s)){const u=c&&d.exportValue===r.exportValue;d.domElement&&(d.domElement.checked=u),e.setValue(d.id,{value:u})}e.setValue(s,{value:c})}),a.addEventListener("resetform",o=>{const l=r.defaultFieldValue||"Off";o.target.checked=l===r.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class o$ extends zm{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,r=this.data,s=r.id;let i=e.getValue(s,{value:r.fieldValue===r.buttonValue}).value;if(typeof i=="string"&&(i=i!==r.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(r.fieldName,s))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(Em.add(a),a.setAttribute("data-element-id",s),a.disabled=r.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=r.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,s))e.setValue(d.id,{value:!1});e.setValue(s,{value:c})}),a.addEventListener("resetform",o=>{const l=r.defaultFieldValue;o.target.checked=l!=null&&l===r.buttonValue}),this.enableScripting&&this.hasJSActions){const o=r.buttonValue;a.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const u=o===d.detail.value;for(const h of this._getElementsByName(d.target.name)){const f=u&&h.id===s;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class fY extends a${constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const r=e.lastChild;return this.enableScripting&&this.hasJSActions&&r&&(this._setDefaultPropertiesFromJS(r),r.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class mY extends zm{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,r=this.data.id,s=e.getValue(r,{value:this.data.fieldValue}),i=document.createElement("select");Em.add(i),i.setAttribute("data-element-id",r),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const u of this.data.options){const h=document.createElement("option");h.textContent=u.displayValue,h.value=u.exportValue,s.value.includes(u.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let o=null;if(a){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=u=>{const h=u?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=l(!1);const d=u=>{const h=u.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const h={value(f){o?.();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const v of i.options)v.selected=y.has(v.value);e.setValue(r,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,y=f.detail.remove;p[y].selected=!1,i.remove(y),p.length>0&&Array.prototype.findIndex.call(p,g=>g.selected)===-1&&(p[0].selected=!0),e.setValue(r,{value:l(!0),items:d(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(r,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:y,exportValue:v}=f.detail.insert,g=i.children[p],b=document.createElement("option");b.textContent=y,b.value=v,g?g.before(b):i.append(b),e.setValue(r,{value:l(!0),items:d(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of p){const{displayValue:v,exportValue:g}=y,b=document.createElement("option");b.textContent=v,b.value=g,i.append(b)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(r,{value:l(!0),items:d(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);e.setValue(r,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,u)}),i.addEventListener("input",u=>{const h=l(!0),f=l(!1);e.setValue(r,{value:h}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(r,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class RC extends Vs{constructor(e){const{data:r,elements:s}=e;super(e,{isRenderable:Vs._hasPopupData(r)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const r=this.popup=new pY({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=r,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${g4}${i}`).join(",")),this.container}}class pY{#e=this.#E.bind(this);#t=this.#C.bind(this);#r=this.#P.bind(this);#n=this.#N.bind(this);#i=null;#s=null;#o=null;#a=null;#u=null;#l=null;#h=null;#d=!1;#f=null;#m=null;#p=null;#c=null;#g=null;#v=null;#x=!1;constructor({container:e,color:r,elements:s,titleObj:i,modificationDate:a,contentsObj:o,richText:l,parent:c,rect:d,parentRect:u,open:h}){this.#s=e,this.#g=i,this.#o=o,this.#c=l,this.#l=c,this.#i=r,this.#p=d,this.#h=u,this.#u=s,this.#a=v4.toDateObject(a),this.trigger=s.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",this.#n),f.addEventListener("mouseenter",this.#r),f.addEventListener("mouseleave",this.#t),f.classList.add("popupTriggerArea");for(const f of s)f.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,h&&this.#N()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#i){const a=e.style.outlineColor=Jt.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const r=document.createElement("span");r.className="header";const s=document.createElement("h1");if(r.append(s),{dir:s.dir,str:s.textContent}=this.#g,e.append(r),this.#a){const a=document.createElement("time");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),a.dateTime=this.#a.toISOString(),r.append(a)}const i=this.#b;if(i)E4.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(this.#o);e.append(a)}this.#s.append(e)}get#b(){const e=this.#c,r=this.#o;return e?.str&&(!r?.str||r.str===e.str)&&this.#c.html||null}get#j(){return this.#b?.attributes?.style?.fontSize||0}get#w(){return this.#b?.attributes?.style?.color||null}#A(e){const r=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:r}]}},i={style:{color:this.#w,fontSize:this.#j?`calc(${this.#j}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))r.push({name:"span",value:a,attributes:i});return s}_formatContents({str:e,dir:r}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=r;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,o=i.length;a<o;++a){const l=i[a];s.append(document.createTextNode(l)),a<o-1&&s.append(document.createElement("br"))}return s}#E(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#N()}updateEdited({rect:e,popupContent:r}){this.#v||={contentsObj:this.#o,richText:this.#c},e&&(this.#m=null),r&&(this.#c=this.#A(r),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#c}=this.#v,this.#v=null,this.#f?.remove(),this.#f=null,this.#m=null)}#T(){if(this.#m!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}}=this.#l;let o=!!this.#h,l=o?this.#h:this.#p;for(const y of this.#u)if(!l||Jt.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=Jt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),u=o?l[2]-l[0]+5:0,h=c[0]+u,f=c[1];this.#m=[100*(h-i)/r,100*(f-a)/s];const{style:p}=this.#s;p.left=`${this.#m[0]}%`,p.top=`${this.#m[1]}%`}#N(){this.#d=!this.#d,this.#d?(this.#P(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#e)):(this.#C(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#e))}#P(){this.#f||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#C(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#s.hidden=!0)}maybeShow(){this.#x&&(this.#f||this.#P(),this.#x=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class l$ extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Sr.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const r of this.textContent){const s=document.createElement("span");s.textContent=r,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class gY extends Vs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class vY extends Vs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xY extends Vs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class c$ extends Vs{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:r,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let u=0,h=r.length;u<h;u+=2){const f=r[u]-e[0],p=e[3]-r[u+1];c.push(`${f},${p}`)}c=c.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class yY extends c${constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class bY extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class P4 extends Vs{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Sr.HIGHLIGHT:Sr.INK}#r(e,r){switch(e){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:l,height:c}=this.#r(r,e),d=this.svgFactory.create(l,c,!0),u=this.#e=this.svgFactory.createElement("svg:g");d.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let h=0,f=s.length;h<f;h++){const p=this.svgFactory.createElement(this.svgElementName);this.#t.push(p),p.setAttribute("points",s[h].join(",")),u.append(p)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:r,points:s,rect:i}=e,a=this.#e;if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,l=this.#t.length;o<l;o++)this.#t[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:l,height:c}=this.#r(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class d$ extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Sr.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class jY extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class wY extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class NY extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:r}}=this;if(!r&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class u$ extends Vs{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Sr.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class SY extends Vs{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:r}=this.data;this.filename=r.filename,this.content=r.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=Si.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class vj{#e=null;#t=null;#r=new Map;#n=null;constructor({div:e,accessibilityManager:r,annotationCanvasMap:s,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:l}){this.div=e,this.#e=r,this.#t=s,this.#n=l||null,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#r.size>0}async#i(e,r,s){const i=e.firstChild||e,a=i.id=`${g4}${r}`,o=await this.#n?.getAriaAttributes(a);if(o)for(const[l,c]of o)i.setAttribute(l,c);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:r}=e,s=this.div;Yh(s,this.viewport);const i=new Map,a={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ox,annotationStorage:e.annotationStorage||new j4,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of r){if(o.noHTML)continue;const l=o.annotationType===Rs.POPUP;if(l){const u=i.get(o.id);if(!u)continue;a.elements=u}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const c=E3.create(a);if(!c.isRenderable)continue;if(!l&&o.popupRef){const u=i.get(o.popupRef);u?u.push(c):i.set(o.popupRef,[c])}const d=c.render();o.hidden&&(d.style.visibility="hidden"),await this.#i(d,o.id,a.elements),c._isEditable&&(this.#r.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#s()}async addLinkAnnotations(e,r){const s={data:null,layer:this.div,linkService:r,svgFactory:new Ox,parent:this};for(const i of e){i.borderStyle||=vj._defaultBorderStyle,s.data=i;const a=E3.create(s);if(!a.isRenderable)continue;const o=a.render();await this.#i(o,i.id,null)}}update({viewport:e}){const r=this.div;this.viewport=e,Yh(r,{rotation:e.rotation}),this.#s(),r.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[r,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=this.#r.get(r);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(r,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#r.values())}getEditableAnnotation(e){return this.#r.get(e)}static get _defaultBorderStyle(){return Fr(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Vp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Wy=/\r\n?|\n/g;class ii extends or{#e;#t="";#r=`${this.id}-editor`;#n=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=ii.prototype,r=a=>a.isEmpty(),s=gu.TRANSLATE_SMALL,i=gu.TRANSLATE_BIG;return Fr(this,"_keyboardManager",new R0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:r}]]))}static _type="freetext";static _editorType=Sr.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||ii._defaultColor||or._defaultLineColor,this.#i=e.fontSize||ii._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,r){or.initialize(e,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,r){switch(e){case Ur.FREETEXT_SIZE:ii._defaultFontSize=r;break;case Ur.FREETEXT_COLOR:ii._defaultColor=r;break}}updateParams(e,r){switch(e){case Ur.FREETEXT_SIZE:this.#s(r);break;case Ur.FREETEXT_COLOR:this.#o(r);break}}static get defaultPropertiesToUpdate(){return[[Ur.FREETEXT_SIZE,ii._defaultFontSize],[Ur.FREETEXT_COLOR,ii._defaultColor||or._defaultLineColor]]}get propertiesToUpdate(){return[[Ur.FREETEXT_SIZE,this.#i],[Ur.FREETEXT_COLOR,this.#e]]}#s(e){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#i)*this.parentScale),this.#i=i,this.#u()},s=this.#i;this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ur.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(e){const r=i=>{this.#e=this.editorDiv.style.color=i},s=this.#e;this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ur.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,r){this._uiManager.translateSelectedEditors(e,r,!0)}getInitialTranslation(){const e=this.parentScale;return[-ii._internalPadding*e,-(ii._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)r?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(ii.#l(s)),r=s);return e.join(`
`)}#u(){const[e,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/r):(this.width=s.height/e,this.height=s.width/r),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,r=this.#t=this.#a().trimEnd();if(e===r)return;const s=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ii._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,r;(this._isCopy||this.annotationElementId)&&(e=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,u]=this.pageDimensions,[h,f]=this.pageTranslation;let p,y;switch(this.rotation){case 0:p=e+(o[0]-h)/d,y=r+this.height-(o[1]-f)/u;break;case 90:p=e+(o[0]-h)/d,y=r-(o[1]-f)/u,[l,c]=[c,-l];break;case 180:p=e-this.width+(o[0]-h)/d,y=r-(o[1]-f)/u,[l,c]=[-l,-c];break;case 270:p=e+(o[0]-h-this.height*u)/d,y=r+(o[1]-f-this.width*d)/u,[l,c]=[-c,l];break}this.setAt(p*i,y*a,l,c)}else this._moveAfterPaste(e,r);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Wy,"")}editorDivPaste(e){const r=e.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=ii.#f(r.getData("text")||"").replaceAll(Wy,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,d=[],u=[];if(l.nodeType===Node.TEXT_NODE){const p=l.parentElement;if(u.push(l.nodeValue.slice(c).replaceAll(Wy,"")),p!==this.editorDiv){let y=d;for(const v of this.editorDiv.childNodes){if(v===p){y=u;continue}y.push(ii.#l(v))}}d.push(l.nodeValue.slice(0,c).replaceAll(Wy,""))}else if(l===this.editorDiv){let p=d,y=0;for(const v of this.editorDiv.childNodes)y++===c&&(p=u),p.push(ii.#l(v))}this.#t=`${d.join(`
`)}${i}${u.join(`
`)}`,this.#h();const h=new Range;let f=Math.sumPrecise(d.map(p=>p.length));for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const y=p.nodeValue.length;if(f<=y){h.setStart(p,f),h.setEnd(p,f);break}f-=y}a.removeAllRanges(),a.addRange(h)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const r=document.createElement("div");r.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(r)}}#d(){return this.#t.replaceAll(" "," ")}static#f(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,r,s){let i=null;if(e instanceof l$){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:c,rotation:d,id:u,popupRef:h},textContent:f,textPosition:p,parent:{page:{pageNumber:y}}}=e;if(!f||f.length===0)return null;i=e={annotationType:Sr.FREETEXT,color:Array.from(l),fontSize:o,value:f.join(`
`),position:p,pageIndex:y-1,rect:c.slice(0),rotation:d,annotationElementId:u,id:u,deleted:!1,popupRef:h}}const a=await super.deserialize(e,r,s);return a.#i=e.fontSize,a.#e=Jt.makeHexColor(...e.color),a.#t=ii.#f(e.value),a._initialData=i,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=ii._internalPadding*this.parentScale,s=this.getRect(r,r),i=or._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),a={annotationType:Sr.FREETEXT,color:i,fontSize:this.#i,value:this.#d(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.isCopy=!0,a):this.annotationElementId&&!this.#m(a)?null:(a.id=this.annotationElementId,a)}#m(e){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==r||e.fontSize!==s||e.color.some((o,l)=>o!==i[l])||e.pageIndex!==a}renderAnnotationElement(e){const r=super.renderAnnotationElement(e);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,r.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),r.append(o)}const i=ii._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),r}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Mt{static PRECISION=1e-4;toSVGPath(){In("Abstract method `toSVGPath` must be implemented.")}get box(){In("Abstract getter `box` must be implemented.")}serialize(e,r){In("Abstract method `serialize` must be implemented.")}static _rescale(e,r,s,i,a,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l]*i,o[l+1]=s+e[l+1]*a;return o}static _rescaleAndSwap(e,r,s,i,a,o){o||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)o[l]=r+e[l+1]*i,o[l+1]=s+e[l]*a;return o}static _translate(e,r,s,i){i||=new Float32Array(e.length);for(let a=0,o=e.length;a<o;a+=2)i[a]=r+e[a],i[a+1]=s+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,s,i,a){switch(a){case 90:return[1-r/s,e/i];case 180:return[1-e/s,1-r/i];case 270:return[r/s,1-e/i];default:return[e/s,r/i]}}static _normalizePagePoint(e,r,s){switch(s){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,s,i,a,o){return[(e+5*s)/6,(r+5*i)/6,(5*s+a)/6,(5*i+o)/6,(s+a)/2,(i+o)/2]}}class om{#e;#t=[];#r;#n;#i=[];#s=new Float32Array(18);#o;#a;#u;#l;#h;#d;#f=[];static#m=8;static#p=2;static#c=om.#m+om.#p;constructor({x:e,y:r},s,i,a,o,l=0){this.#e=s,this.#d=a*i,this.#n=o,this.#s.set([NaN,NaN,NaN,NaN,e,r],6),this.#r=l,this.#l=om.#m*i,this.#u=om.#c*i,this.#h=i,this.#f.push(e,r)}isEmpty(){return isNaN(this.#s[8])}#g(){const e=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,i,a,o]=this.#e;return[(this.#o+(e[0]-r[0])/2-s)/a,(this.#a+(e[1]-r[1])/2-i)/o,(this.#o+(r[0]-e[0])/2-s)/a,(this.#a+(r[1]-e[1])/2-i)/o]}add({x:e,y:r}){this.#o=e,this.#a=r;const[s,i,a,o]=this.#e;let[l,c,d,u]=this.#s.subarray(8,12);const h=e-d,f=r-u,p=Math.hypot(h,f);if(p<this.#u)return!1;const y=p-this.#l,v=y/p,g=v*h,b=v*f;let j=l,w=c;l=d,c=u,d+=g,u+=b,this.#f?.push(e,r);const C=-b/y,E=g/y,N=C*this.#d,A=E*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+N,u+A],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-N,u-A],16),isNaN(this.#s[6])?(this.#i.length===0&&(this.#s.set([l+N,c+A],2),this.#i.push(NaN,NaN,NaN,NaN,(l+N-s)/a,(c+A-i)/o),this.#s.set([l-N,c-A],14),this.#t.push(NaN,NaN,NaN,NaN,(l-N-s)/a,(c-A-i)/o)),this.#s.set([j,w,l,c,d,u],6),!this.isEmpty()):(this.#s.set([j,w,l,c,d,u],6),Math.abs(Math.atan2(w-c,j-l)-Math.atan2(b,g))<Math.PI/2?([l,c,d,u]=this.#s.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((l+d)/2-s)/a,((c+u)/2-i)/o),[l,c,j,w]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((j+l)/2-s)/a,((w+c)/2-i)/o),!0):([j,w,l,c,d,u]=this.#s.subarray(0,6),this.#i.push(((j+5*l)/6-s)/a,((w+5*c)/6-i)/o,((5*l+d)/6-s)/a,((5*c+u)/6-i)/o,((l+d)/2-s)/a,((c+u)/2-i)/o),[d,u,l,c,j,w]=this.#s.subarray(12,18),this.#t.push(((j+5*l)/6-s)/a,((w+5*c)/6-i)/o,((5*l+d)/6-s)/a,((5*c+u)/6-i)/o,((l+d)/2-s)/a,((c+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,r=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#b(s);for(let i=r.length-6;i>=6;i-=6)isNaN(r[i])?s.push(`L${r[i+4]} ${r[i+5]}`):s.push(`C${r[i]} ${r[i+1]} ${r[i+2]} ${r[i+3]} ${r[i+4]} ${r[i+5]}`);return this.#x(s),s.join(" ")}#v(){const[e,r,s,i]=this.#e,[a,o,l,c]=this.#g();return`M${(this.#s[2]-e)/s} ${(this.#s[3]-r)/i} L${(this.#s[4]-e)/s} ${(this.#s[5]-r)/i} L${a} ${o} L${l} ${c} L${(this.#s[16]-e)/s} ${(this.#s[17]-r)/i} L${(this.#s[14]-e)/s} ${(this.#s[15]-r)/i} Z`}#x(e){const r=this.#t;e.push(`L${r[4]} ${r[5]} Z`)}#b(e){const[r,s,i,a]=this.#e,o=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[c,d,u,h]=this.#g();e.push(`L${(o[0]-r)/i} ${(o[1]-s)/a} L${c} ${d} L${u} ${h} L${(l[0]-r)/i} ${(l[1]-s)/a}`)}newFreeDrawOutline(e,r,s,i,a,o){return new h$(e,r,s,i,a,o)}getOutlines(){const e=this.#i,r=this.#t,s=this.#s,[i,a,o,l]=this.#e,c=new Float32Array((this.#f?.length??0)+2);for(let h=0,f=c.length-2;h<f;h+=2)c[h]=(this.#f[h]-i)/o,c[h+1]=(this.#f[h+1]-a)/l;if(c[c.length-2]=(this.#o-i)/o,c[c.length-1]=(this.#a-a)/l,isNaN(s[6])&&!this.isEmpty())return this.#j(c);const d=new Float32Array(this.#i.length+24+this.#t.length);let u=e.length;for(let h=0;h<u;h+=2){if(isNaN(e[h])){d[h]=d[h+1]=NaN;continue}d[h]=e[h],d[h+1]=e[h+1]}u=this.#A(d,u);for(let h=r.length-6;h>=6;h-=6)for(let f=0;f<6;f+=2){if(isNaN(r[h+f])){d[u]=d[u+1]=NaN,u+=2;continue}d[u]=r[h+f],d[u+1]=r[h+f+1],u+=2}return this.#w(d,u),this.newFreeDrawOutline(d,c,this.#e,this.#h,this.#r,this.#n)}#j(e){const r=this.#s,[s,i,a,o]=this.#e,[l,c,d,u]=this.#g(),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(r[2]-s)/a,(r[3]-i)/o,NaN,NaN,NaN,NaN,(r[4]-s)/a,(r[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(r[16]-s)/a,(r[17]-i)/o,NaN,NaN,NaN,NaN,(r[14]-s)/a,(r[15]-i)/o],0),this.newFreeDrawOutline(h,e,this.#e,this.#h,this.#r,this.#n)}#w(e,r){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],r),r+=6}#A(e,r){const s=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[a,o,l,c]=this.#e,[d,u,h,f]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-a)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-o)/c],r),r+=24}}class h$ extends Mt{#e;#t=new Float32Array(4);#r;#n;#i;#s;#o;constructor(e,r,s,i,a,o){super(),this.#o=e,this.#i=r,this.#e=s,this.#s=i,this.#r=a,this.#n=o,this.lastPoint=[NaN,NaN],this.#a(o);const[l,c,d,u]=this.#t;for(let h=0,f=e.length;h<f;h+=2)e[h]=(e[h]-l)/d,e[h+1]=(e[h+1]-c)/u;for(let h=0,f=r.length;h<f;h+=2)r[h]=(r[h]-l)/d,r[h+1]=(r[h+1]-c)/u}toSVGPath(){const e=[`M${this.#o[4]} ${this.#o[5]}`];for(let r=6,s=this.#o.length;r<s;r+=6){if(isNaN(this.#o[r])){e.push(`L${this.#o[r+4]} ${this.#o[r+5]}`);continue}e.push(`C${this.#o[r]} ${this.#o[r+1]} ${this.#o[r+2]} ${this.#o[r+3]} ${this.#o[r+4]} ${this.#o[r+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,r,s,i],a){const o=s-e,l=i-r;let c,d;switch(a){case 0:c=Mt._rescale(this.#o,e,i,o,-l),d=Mt._rescale(this.#i,e,i,o,-l);break;case 90:c=Mt._rescaleAndSwap(this.#o,e,r,o,l),d=Mt._rescaleAndSwap(this.#i,e,r,o,l);break;case 180:c=Mt._rescale(this.#o,s,r,-o,l),d=Mt._rescale(this.#i,s,r,-o,l);break;case 270:c=Mt._rescaleAndSwap(this.#o,s,i,-o,-l),d=Mt._rescaleAndSwap(this.#i,s,i,-o,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}#a(e){const r=this.#o;let s=r[4],i=r[5];const a=[s,i,s,i];let o=s,l=i;const c=e?Math.max:Math.min;for(let u=6,h=r.length;u<h;u+=6){const f=r[u+4],p=r[u+5];if(isNaN(r[u]))Jt.pointBoundingBox(f,p,a),l<p?(o=f,l=p):l===p&&(o=c(o,f));else{const y=[1/0,1/0,-1/0,-1/0];Jt.bezierBoundingBox(s,i,...r.slice(u,u+6),y),Jt.rectBoundingBox(...y,a),l<y[3]?(o=y[2],l=y[3]):l===y[3]&&(o=c(o,y[2]))}s=f,i=p}const d=this.#t;d[0]=a[0]-this.#r,d[1]=a[1]-this.#r,d[2]=a[2]-a[0]+2*this.#r,d[3]=a[3]-a[1]+2*this.#r,this.lastPoint=[o,l]}get box(){return this.#t}newOutliner(e,r,s,i,a,o=0){return new om(e,r,s,i,a,o)}getNewOutline(e,r){const[s,i,a,o]=this.#t,[l,c,d,u]=this.#e,h=a*d,f=o*u,p=s*d+l,y=i*u+c,v=this.newOutliner({x:this.#i[0]*h+p,y:this.#i[1]*f+y},this.#e,this.#s,e,this.#n,r??this.#r);for(let g=2;g<this.#i.length;g+=2)v.add({x:this.#i[g]*h+p,y:this.#i[g+1]*f+y});return v.getOutlines()}}class LC{#e;#t;#r=[];#n=[];constructor(e,r=0,s=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:p,y,width:v,height:g}of e){const b=Math.floor((p-r)/o)*o,j=Math.ceil((p+v+r)/o)*o,w=Math.floor((y-r)/o)*o,C=Math.ceil((y+g+r)/o)*o,E=[b,w,C,!0],N=[j,w,C,!1];this.#r.push(E,N),Jt.rectBoundingBox(b,w,j,C,a)}const l=a[2]-a[0]+2*s,c=a[3]-a[1]+2*s,d=a[0]-s,u=a[1]-s,h=this.#r.at(i?-1:-2),f=[h[0],h[2]];for(const p of this.#r){const[y,v,g]=p;p[0]=(y-d)/l,p[1]=(v-u)/c,p[2]=(g-u)/c}this.#e=new Float32Array([d,u,l,c]),this.#t=f}getOutlines(){this.#r.sort((r,s)=>r[0]-s[0]||r[1]-s[1]||r[2]-s[2]);const e=[];for(const r of this.#r)r[3]?(e.push(...this.#u(r)),this.#o(r)):(this.#a(r),e.push(...this.#u(r)));return this.#i(e)}#i(e){const r=[],s=new Set;for(const o of e){const[l,c,d]=o;r.push([l,c,o],[l,d,o])}r.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=r.length;o<l;o+=2){const c=r[o][2],d=r[o+1][2];c.push(d),d.push(c),s.add(c),s.add(d)}const i=[];let a;for(;s.size>0;){const o=s.values().next().value;let[l,c,d,u,h]=o;s.delete(o);let f=l,p=c;for(a=[l,d],i.push(a);;){let y;if(s.has(u))y=u;else if(s.has(h))y=h;else break;s.delete(y),[l,c,d,u,h]=y,f!==l&&(a.push(f,p,l,p===c?c:d),f=l),p=p===c?d:c}a.push(f,p)}return new AY(i,this.#e,this.#t)}#s(e){const r=this.#n;let s=0,i=r.length-1;for(;s<=i;){const a=s+i>>1,o=r[a][0];if(o===e)return a;o<e?s=a+1:i=a-1}return i+1}#o([,e,r]){const s=this.#s(e);this.#n.splice(s,0,[e,r])}#a([,e,r]){const s=this.#s(e);for(let i=s;i<this.#n.length;i++){const[a,o]=this.#n[i];if(a!==e)break;if(a===e&&o===r){this.#n.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[a,o]=this.#n[i];if(a!==e)break;if(a===e&&o===r){this.#n.splice(i,1);return}}}#u(e){const[r,s,i]=e,a=[[r,s,i]],o=this.#s(i);for(let l=0;l<o;l++){const[c,d]=this.#n[l];for(let u=0,h=a.length;u<h;u++){const[,f,p]=a[u];if(!(d<=f||p<=c)){if(f>=c){if(p>d)a[u][1]=d;else{if(h===1)return[];a.splice(u,1),u--,h--}continue}a[u][2]=c,p>d&&a.push([r,d,p])}}}return a}}class AY extends Mt{#e;#t;constructor(e,r,s){super(),this.#t=e,this.#e=r,this.lastPoint=s}toSVGPath(){const e=[];for(const r of this.#t){let[s,i]=r;e.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===s?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,r,s,i],a){const o=[],l=s-e,c=i-r;for(const d of this.#t){const u=new Array(d.length);for(let h=0;h<d.length;h+=2)u[h]=e+d[h]*l,u[h+1]=i-d[h+1]*c;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class MC extends om{newFreeDrawOutline(e,r,s,i,a,o){return new CY(e,r,s,i,a,o)}}class CY extends h${newOutliner(e,r,s,i,a,o=0){return new MC(e,r,s,i,a,o)}}class Io{#e=null;#t=null;#r;#n=null;#i=!1;#s=!1;#o=null;#a;#u=null;#l=null;#h;static#d=null;static get _keyboardManager(){return Fr(this,"_keyboardManager",new R0([[["Escape","mac+Escape"],Io.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Io.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Io.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Io.prototype._moveToPrevious],[["Home","mac+Home"],Io.prototype._moveToBeginning],[["End","mac+End"],Io.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:r=null}){e?(this.#s=!1,this.#h=Ur.HIGHLIGHT_COLOR,this.#o=e):(this.#s=!0,this.#h=Ur.HIGHLIGHT_DEFAULT_COLOR),this.#l=e?._uiManager||r,this.#a=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Io.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#o&&(e.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const r=this.#l._signal;e.addEventListener("click",this.#c.bind(this),{signal:r}),e.addEventListener("keydown",this.#p.bind(this),{signal:r});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#r,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#f();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#f(){const e=document.createElement("div"),r=this.#l._signal;e.addEventListener("contextmenu",wl,{signal:r}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(e.id=`${this.#o.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=s,a.setAttribute("data-l10n-id",Io.#d[s]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.ariaSelected=i===this.#r,a.addEventListener("click",this.#m.bind(this,i),{signal:r}),e.append(a)}return e.addEventListener("keydown",this.#p.bind(this),{signal:r}),e}#m(e,r){r.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#c(e);return}const r=e.target.getAttribute("data-color");r&&this.#m(r,e)}_moveToNext(e){if(!this.#v){this.#c(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#v&&this._hideDropdownFromKeyboard();return}this.#v||this.#c(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#v){this.#c(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#v){this.#c(e);return}this.#n.lastChild?.focus()}#p(e){Io._keyboardManager.exec(this,e)}#c(e){if(this.#v){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const r=this.#n=this.#f();this.#e.append(r)}#g(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#v(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#v){this.#o?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const r=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=r.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Ls extends or{#e=null;#t=0;#r;#n=null;#i=null;#s=null;#o=null;#a=0;#u=null;#l=null;#h=null;#d=!1;#f=null;#m;#p=null;#c="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Sr.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ls.prototype;return Fr(this,"_keyboardManager",new R0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ls._defaultColor,this.#g=e.thickness||Ls._defaultThickness,this.#m=e.opacity||Ls._defaultOpacity,this.#r=e.boxes||null,this.#v=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#b(e),this.#T()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#o=e.focusNode,this.#a=e.focusOffset,this.#x(),this.#T(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#x(){const e=new LC(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const r=new LC(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#s=r.getOutlines();const{lastPoint:s}=this.#s;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:r,clipPathId:s}){this.#l=e;const i=1.5;if(this.#s=e.getNewOutline(this.#g/2+i,.0025),r>=0)this.#h=r,this.#n=s,this.parent.drawLayer.finalizeDraw(r,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Ls.#N(this.#l.box,(u-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Ls.#N(this.#s.box,u),path:{d:this.#s.toSVGPath()}})}const[a,o,l,c]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[u,h]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*h/u,this.height=c*u/h;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[u,h]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*h/u,this.height=c*u/h;break}}const{lastPoint:d}=this.#s;this.#f=[(d[0]-a)/l,(d[1]-o)/c]}static initialize(e,r){or.initialize(e,r),Ls._defaultColor||=r.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,r){switch(e){case Ur.HIGHLIGHT_DEFAULT_COLOR:Ls._defaultColor=r;break;case Ur.HIGHLIGHT_THICKNESS:Ls._defaultThickness=r;break}}translateInPage(e,r){}get toolbarPosition(){return this.#f}updateParams(e,r){switch(e){case Ur.HIGHLIGHT_COLOR:this.#j(r);break;case Ur.HIGHLIGHT_THICKNESS:this.#w(r);break}}static get defaultPropertiesToUpdate(){return[[Ur.HIGHLIGHT_DEFAULT_COLOR,Ls._defaultColor],[Ur.HIGHLIGHT_THICKNESS,Ls._defaultThickness]]}get propertiesToUpdate(){return[[Ur.HIGHLIGHT_COLOR,this.color||Ls._defaultColor],[Ur.HIGHLIGHT_THICKNESS,this.#g||Ls._defaultThickness],[Ur.HIGHLIGHT_FREE,this.#d]]}#j(e){const r=(a,o)=>{this.color=a,this.#m=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:a,"fill-opacity":o}}),this.#i?.updateColor(a)},s=this.color,i=this.#m;this.addCommands({cmd:r.bind(this,e,Ls._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ur.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){const r=this.#g,s=i=>{this.#g=i,this.#A(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ur.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new Io({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#I())}getBaseTranslation(){return[0,0]}getRect(e,r){return super.getRect(e,r,this.#I())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?this.#E():e&&(this.#T(e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),r&&this.select()}#A(e){if(!this.#d)return;this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}#E(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#N([e,r,s,i],a){switch(a){case 90:return[1-r-i,e,i,s];case 180:return[1-e-s,1-r-i,s,i];case 270:return[r,1-e-s,i,s]}return[e,r,s,i]}rotate(e){const{drawLayer:r}=this.parent;let s;this.#d?(e=(e-this.rotation+360)%360,s=Ls.#N(this.#l.box,e)):s=Ls.#N([this.x,this.y,this.width,this.height],e),r.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),r.updateProperties(this.#p,{bbox:Ls.#N(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#P.bind(this),{signal:this._uiManager._signal});const r=this.#u=document.createElement("div");e.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=this.#n;const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),$7(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#P(e){Ls._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const r=window.getSelection();e?r.setPosition(this.#e,this.#t):r.setPosition(this.#o,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#C(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#I(){return this.#d?this.rotation:0}#D(){if(this.#d)return null;const[e,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=this.#r,o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:d,width:u,height:h}of a){const f=c*e+s,p=(1-d)*r+i;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+u*e,o[l+5]=o[l+7]=p-h*r,l+=8}return o}#k(e){return this.#l.serialize(e,this.#I())}static startHighlighting(e,r,{target:s,x:i,y:a}){const{x:o,y:l,width:c,height:d}=s.getBoundingClientRect(),u=new AbortController,h=e.combinedSignal(u),f=p=>{u.abort(),this.#S(e,p)};window.addEventListener("blur",f,{signal:h}),window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("pointerdown",Fs,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",wl,{signal:h}),s.addEventListener("pointermove",this.#B.bind(this,e),{signal:h}),this._freeHighlight=new MC({x:i,y:a},[o,l,c,d],e.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#B(e,r){this._freeHighlight.add(r)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#S(e,r){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,r,s){let i=null;if(e instanceof d$){const{data:{quadPoints:y,rect:v,rotation:g,id:b,color:j,opacity:w,popupRef:C},parent:{page:{pageNumber:E}}}=e;i=e={annotationType:Sr.HIGHLIGHT,color:Array.from(j),opacity:w,quadPoints:y,boxes:null,pageIndex:E-1,rect:v.slice(0),rotation:g,annotationElementId:b,id:b,deleted:!1,popupRef:C}}else if(e instanceof P4){const{data:{inkLists:y,rect:v,rotation:g,id:b,color:j,borderStyle:{rawWidth:w},popupRef:C},parent:{page:{pageNumber:E}}}=e;i=e={annotationType:Sr.HIGHLIGHT,color:Array.from(j),thickness:w,inkLists:y,boxes:null,pageIndex:E-1,rect:v.slice(0),rotation:g,annotationElementId:b,id:b,deleted:!1,popupRef:C}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=e,d=await super.deserialize(e,r,s);d.color=Jt.makeHexColor(...a),d.#m=c||1,l&&(d.#g=e.thickness),d._initialData=i;const[u,h]=d.pageDimensions,[f,p]=d.pageTranslation;if(o){const y=d.#r=[];for(let v=0;v<o.length;v+=8)y.push({x:(o[v]-f)/u,y:1-(o[v+1]-p)/h,width:(o[v+2]-o[v])/u,height:(o[v+1]-o[v+5])/h});d.#x(),d.#T(),d.rotate(d.rotation)}else if(l){d.#d=!0;const y=l[0],v={x:y[0]-f,y:h-(y[1]-p)},g=new MC(v,[0,0,u,h],1,d.#g/2,!0,.001);for(let w=0,C=y.length;w<C;w+=2)v.x=y[w]-f,v.y=h-(y[w+1]-p),g.add(v);const{id:b,clipPathId:j}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:g.toSVGPath()}},!0,!0);d.#b({highlightOutlines:g.getOutlines(),highlightId:b,clipPathId:j}),d.#T(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=or._colorManager.convert(this.color),i={annotationType:Sr.HIGHLIGHT,color:s,opacity:this.#m,thickness:this.#g,quadPoints:this.#D(),outlines:this.#k(r),pageIndex:this.pageIndex,rect:r,rotation:this.#I(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#y(i)?null:(i.id=this.annotationElementId,i)}#y(e){const{color:r}=this._initialData;return e.color.some((s,i)=>s!==r[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class f${#e=Object.create(null);updateProperty(e,r){this[e]=r,this.updateSVGProperty(e,r)}updateProperties(e){if(e)for(const[r,s]of Object.entries(e))r.startsWith("_")||this.updateProperty(r,s)}updateSVGProperty(e,r){this.#e[e]=r}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){In("Not implemented")}}class cr extends or{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#i=null;static#s=NaN;static#o=null;static#a=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:r,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#c(e.box)}#h(e,r){const{id:s}=r.drawLayer.draw(cr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,r){const s=new Set(Object.keys(e));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){In("Not implemented")}static get typesMap(){In("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,r){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(cr.#r.updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,r){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,r)}static get defaultPropertiesToUpdate(){const e=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,r[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,r[i]]);return e}_updateProperty(e,r,s){const i=this._drawingOptions,a=i[r],o=l=>{i.updateProperty(r,l);const c=this.#e.updateProperty(r,l);c&&this.#c(c),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,cr._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,cr._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,r){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,cr._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),r&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,r,s,i]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-e,s*(o/a),i*(a/o)];case 180:return[1-e,1-r,s,i];case 270:return[1-r,e,s*(o/a),i*(a/o)];default:return[e,r,s,i]}}#p(){const{x:e,y:r,width:s,height:i,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,e,s*(a/o),i*(o/a)];case 180:return[1-e,1-r,s,i];case 270:return[r,1-e,s*(a/o),i*(o/a)];default:return[e,r,s,i]}}#c(e){if([this.x,this.y,this.width,this.height]=this.#m(e),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()}#g(){const{x:e,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-i,e,i,s];case 2:return[1-e-s,1-r-i,s,i];case 3:return[r,1-e-s,i,s];case 4:return[e,r-s*(l/c),i*(c/l),s*(l/c)];case 5:return[1-r,e,s*(l/c),i*(c/l)];case 6:return[1-e-i*(c/l),1-r,i*(c/l),s*(l/c)];case 7:return[r-s*(l/c),1-e-i*(c/l),s*(l/c),i*(c/l)];case 8:return[e-s,r-i,s,i];case 9:return[1-r,e-s,i,s];case 10:return[1-e,1-r,s,i];case 11:return[r-i,1-e,i,s];case 12:return[e-i*(c/l),r,i*(c/l),s*(l/c)];case 13:return[1-r-s*(l/c),e-i*(c/l),s*(l/c),i*(c/l)];case 14:return[1-e,1-r-s*(l/c),i*(c/l),s*(l/c)];case 15:return[r,1-e,s*(l/c),i*(c/l)];default:return[e,r,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,cr._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,r;this._isCopy&&(e=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,r),s}static createDrawerInstance(e,r,s,i,a){In("Not implemented")}static startDrawing(e,r,s,i){const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=i;if(cr.#o&&cr.#o!==d)return;const{viewport:{rotation:u}}=e,{width:h,height:f}=a.getBoundingClientRect(),p=cr.#n=new AbortController,y=e.combinedSignal(p);if(cr.#s||=c,cr.#o??=d,window.addEventListener("pointerup",v=>{cr.#s===v.pointerId?this._endDraw(v):cr.#a?.delete(v.pointerId)},{signal:y}),window.addEventListener("pointercancel",v=>{cr.#s===v.pointerId?this._currentParent.endDrawingSession():cr.#a?.delete(v.pointerId)},{signal:y}),window.addEventListener("pointerdown",v=>{cr.#o===v.pointerType&&((cr.#a||=new Set).add(v.pointerId),cr.#r.isCancellable()&&(cr.#r.removeLastElement(),cr.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",wl,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",v=>{v.timeStamp===cr.#u&&Fs(v)},{signal:y}),e.toggleDrawing(),r._editorUndoBar?.hide(),cr.#r){e.drawLayer.updateProperties(this._currentDrawId,cr.#r.startNew(o,l,h,f,u));return}r.updateUIForDefaultProperties(this),cr.#r=this.createDrawerInstance(o,l,h,f,u),cr.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(cr.#i.toSVGProperties(),cr.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(cr.#u=-1,!cr.#r)return;const{offsetX:r,offsetY:s,pointerId:i}=e;if(cr.#s===i){if(cr.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,cr.#r.add(r,s)),cr.#u=e.timeStamp,Fs(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,cr.#r=null,cr.#i=null,cr.#o=null,cr.#u=NaN),cr.#n&&(cr.#n.abort(),cr.#n=null,cr.#s=NaN,cr.#a=null)}static _endDraw(e){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),e?.target===r.div&&r.drawLayer.updateProperties(this._currentDrawId,cr.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=cr.#r,i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ur.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Ur.DRAW_STEP),!cr.#r.isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:cr.#r.getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:cr.#i,mustBeCommitted:!e});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,r,s,i,a,o){In("Not implemented")}static async deserialize(e,r,s){const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,i,a,this._INNER_MARGIN,e),d=await super.deserialize(e,r,s);return d.createDrawingOptions(e),d.#l({drawOutlines:c}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([r,s,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class EY{#e=new Float64Array(6);#t;#r;#n;#i;#s;#o="";#a=0;#u=new F0;#l;#h;constructor(e,r,s,i,a,o){this.#l=s,this.#h=i,this.#n=a,this.#i=o,[e,r]=this.#d(e,r);const l=this.#t=[NaN,NaN,NaN,NaN,e,r];this.#s=[e,r],this.#r=[{line:l,points:this.#s}],this.#e.set(l,0)}updateProperty(e,r){e==="stroke-width"&&(this.#i=r)}#d(e,r){return Mt._normalizePoint(e,r,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#s.length<=10}add(e,r){[e,r]=this.#d(e,r);const[s,i,a,o]=this.#e.subarray(2,6),l=e-a,c=r-o;return Math.hypot(this.#l*l,this.#h*c)<=2?null:(this.#s.push(e,r),isNaN(s)?(this.#e.set([a,o,e,r],2),this.#t.push(NaN,NaN,NaN,NaN,e,r),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,a,o,e,r],0),this.#t.push(...Mt.createBezierPoints(s,i,a,o,e,r)),{path:{d:this.toSVGPath()}}))}end(e,r){const s=this.add(e,r);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,r,s,i,a){this.#l=s,this.#h=i,this.#n=a,[e,r]=this.#d(e,r);const o=this.#t=[NaN,NaN,NaN,NaN,e,r];this.#s=[e,r];const l=this.#r.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#r.push({line:o,points:this.#s}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#u.removeLastElement();this.#r.pop(),this.#o="";for(let e=0,r=this.#r.length;e<r;e++){const{line:s,points:i}=this.#r[e];this.#t=s,this.#s=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const e=Mt.svgRound(this.#t[4]),r=Mt.svgRound(this.#t[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${e} ${r} Z`,this.#o;if(this.#s.length<=6){const i=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,i)} M ${e} ${r}`,this.#a=6}if(this.#s.length===4){const i=Mt.svgRound(this.#t[10]),a=Mt.svgRound(this.#t[11]);return this.#o=`${this.#o} L ${i} ${a}`,this.#a=12,this.#o}const s=[];this.#a===0&&(s.push(`M ${e} ${r}`),this.#a=6);for(let i=this.#a,a=this.#t.length;i<a;i+=6){const[o,l,c,d,u,h]=this.#t.slice(i,i+6).map(Mt.svgRound);s.push(`C${o} ${l} ${c} ${d} ${u} ${h}`)}return this.#o+=s.join(" "),this.#a=this.#t.length,this.#o}getOutlines(e,r,s,i){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#r,e,r,s,this.#n,this.#i,i),this.#e=null,this.#t=null,this.#r=null,this.#o=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class F0 extends Mt{#e;#t=0;#r;#n;#i;#s;#o;#a;#u;build(e,r,s,i,a,o,l){this.#i=r,this.#s=s,this.#o=i,this.#a=a,this.#u=o,this.#r=l??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:r}of this.#n){if(e.push(`M${Mt.svgRound(r[4])} ${Mt.svgRound(r[5])}`),r.length===6){e.push("Z");continue}if(r.length===12&&isNaN(r[6])){e.push(`L${Mt.svgRound(r[10])} ${Mt.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,l,c,d,u]=r.subarray(s,s+6).map(Mt.svgRound);e.push(`C${a} ${o} ${l} ${c} ${d} ${u}`)}}return e.join("")}serialize([e,r,s,i],a){const o=[],l=[],[c,d,u,h]=this.#h();let f,p,y,v,g,b,j,w,C;switch(this.#a){case 0:C=Mt._rescale,f=e,p=r+i,y=s,v=-i,g=e+c*s,b=r+(1-d-h)*i,j=e+(c+u)*s,w=r+(1-d)*i;break;case 90:C=Mt._rescaleAndSwap,f=e,p=r,y=s,v=i,g=e+d*s,b=r+c*i,j=e+(d+h)*s,w=r+(c+u)*i;break;case 180:C=Mt._rescale,f=e+s,p=r,y=-s,v=i,g=e+(1-c-u)*s,b=r+d*i,j=e+(1-c)*s,w=r+(d+h)*i;break;case 270:C=Mt._rescaleAndSwap,f=e+s,p=r+i,y=-s,v=-i,g=e+(1-d-h)*s,b=r+(1-c-u)*i,j=e+(1-d)*s,w=r+(1-c)*i;break}for(const{line:E,points:N}of this.#n)o.push(C(E,f,p,y,v,a?new Array(E.length):null)),l.push(C(N,f,p,y,v,a?new Array(N.length):null));return{lines:o,points:l,rect:[g,b,j,w]}}static deserialize(e,r,s,i,a,{paths:{lines:o,points:l},rotation:c,thickness:d}){const u=[];let h,f,p,y,v;switch(c){case 0:v=Mt._rescale,h=-e/s,f=r/i+1,p=1/s,y=-1/i;break;case 90:v=Mt._rescaleAndSwap,h=-r/i,f=-e/s,p=1/i,y=1/s;break;case 180:v=Mt._rescale,h=e/s+1,f=-r/i,p=-1/s,y=1/i;break;case 270:v=Mt._rescaleAndSwap,h=r/i+1,f=e/s+1,p=-1/i,y=-1/s;break}if(!o){o=[];for(const b of l){const j=b.length;if(j===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(j===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const w=new Float32Array(3*(j-2));o.push(w);let[C,E,N,A]=b.subarray(0,4);w.set([NaN,NaN,NaN,NaN,C,E],0);for(let _=4;_<j;_+=2){const k=b[_],F=b[_+1];w.set(Mt.createBezierPoints(C,E,N,A,k,F),(_-2)*3),[C,E,N,A]=[N,A,k,F]}}}for(let b=0,j=o.length;b<j;b++)u.push({line:v(o[b].map(w=>w??NaN),h,f,p,y),points:v(l[b].map(w=>w??NaN),h,f,p,y)});const g=new this.prototype.constructor;return g.build(u,s,i,1,c,d,a),g}#l(e=this.#u){const r=this.#r+e/2*this.#o;return this.#a%180===0?[r/this.#i,r/this.#s]:[r/this.#s,r/this.#i]}#h(){const[e,r,s,i]=this.#e,[a,o]=this.#l(0);return[e+a,r+o,s-2*a,i-2*o]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)Jt.pointBoundingBox(i[l],i[l+1],e);continue}let a=i[4],o=i[5];for(let l=6,c=i.length;l<c;l+=6){const[d,u,h,f,p,y]=i.subarray(l,l+6);Jt.bezierBoundingBox(a,o,d,u,h,f,p,y,e),a=p,o=y}}const[r,s]=this.#l();e[0]=ua(e[0]-r,0,1),e[1]=ua(e[1]-s,0,1),e[2]=ua(e[2]+r,0,1),e[3]=ua(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,r){return e==="stroke-width"?this.#f(r):null}#f(e){const[r,s]=this.#l();this.#u=e;const[i,a]=this.#l(),[o,l]=[i-r,a-s],c=this.#e;return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c}updateParentDimensions([e,r],s){const[i,a]=this.#l();this.#i=e,this.#s=r,this.#o=s;const[o,l]=this.#l(),c=o-i,d=l-a,u=this.#e;return u[0]-=c,u[1]-=d,u[2]+=2*c,u[3]+=2*d,u}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Mt.svgRound).join(" ")}get defaultProperties(){const[e,r]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Mt.svgRound(e)} ${Mt.svgRound(r)}`}}}get rotationTransform(){const[,,e,r]=this.#e;let s=0,i=0,a=0,o=0,l=0,c=0;switch(this.#t){case 90:i=r/e,a=-e/r,l=e;break;case 180:s=-1,o=-1,l=e,c=r;break;case 270:i=-r/e,a=e/r,c=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${Mt.svgRound(l)} ${Mt.svgRound(c)})`}getPathResizingSVGProperties([e,r,s,i]){const[a,o]=this.#l(),[l,c,d,u]=this.#e;if(Math.abs(d-a)<=Mt.PRECISION||Math.abs(u-o)<=Mt.PRECISION){const v=e+s/2-(l+d/2),g=r+i/2-(c+u/2);return{path:{"transform-origin":`${Mt.svgRound(e)} ${Mt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${v} ${g})`}}}const h=(s-2*a)/(d-2*a),f=(i-2*o)/(u-2*o),p=d/s,y=u/i;return{path:{"transform-origin":`${Mt.svgRound(l)} ${Mt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${p} ${y}) translate(${Mt.svgRound(a)} ${Mt.svgRound(o)}) scale(${h} ${f}) translate(${Mt.svgRound(-a)} ${Mt.svgRound(-o)})`}}}getPathResizedSVGProperties([e,r,s,i]){const[a,o]=this.#l(),l=this.#e,[c,d,u,h]=l;if(l[0]=e,l[1]=r,l[2]=s,l[3]=i,Math.abs(u-a)<=Mt.PRECISION||Math.abs(h-o)<=Mt.PRECISION){const g=e+s/2-(c+u/2),b=r+i/2-(d+h/2);for(const{line:j,points:w}of this.#n)Mt._translate(j,g,b,j),Mt._translate(w,g,b,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Mt.svgRound(e)} ${Mt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(s-2*a)/(u-2*a),p=(i-2*o)/(h-2*o),y=-f*(c+a)+e+a,v=-p*(d+o)+r+o;if(f!==1||p!==1||y!==0||v!==0)for(const{line:g,points:b}of this.#n)Mt._rescale(g,y,v,f,p,g),Mt._rescale(b,y,v,f,p,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Mt.svgRound(e)} ${Mt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,r],s){const[i,a]=s,o=this.#e,l=e-o[0],c=r-o[1];if(this.#i===i&&this.#s===a)for(const{line:d,points:u}of this.#n)Mt._translate(d,l,c,d),Mt._translate(u,l,c,u);else{const d=this.#i/i,u=this.#s/a;this.#i=i,this.#s=a;for(const{line:h,points:f}of this.#n)Mt._rescale(h,l,c,d,u,h),Mt._rescale(f,l,c,d,u,f);o[2]*=d,o[3]*=u}return o[0]=e,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Mt.svgRound(e)} ${Mt.svgRound(r)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Mt.svgRound(e[0])} ${Mt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class xj extends f${constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:or._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,r){e==="stroke-width"&&(r??=this["stroke-width"],r*=this._viewParameters.realScale),super.updateSVGProperty(e,r)}clone(){const e=new xj(this._viewParameters);return e.updateAll(this),e}}class T4 extends cr{static _type="ink";static _editorType=Sr.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,r){or.initialize(e,r),this._defaultDrawingOptions=new xj(r.viewParameters)}static getDefaultDrawingOptions(e){const r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fr(this,"typesMap",new Map([[Ur.INK_THICKNESS,"stroke-width"],[Ur.INK_COLOR,"stroke"],[Ur.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,r,s,i,a){return new EY(e,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,r,s,i,a,o){return F0.deserialize(e,r,s,i,a,o)}static async deserialize(e,r,s){let i=null;if(e instanceof P4){const{data:{inkLists:o,rect:l,rotation:c,id:d,color:u,opacity:h,borderStyle:{rawWidth:f},popupRef:p},parent:{page:{pageNumber:y}}}=e;i=e={annotationType:Sr.INK,color:Array.from(u),thickness:f,opacity:h,paths:{points:o},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:p}}const a=await super.deserialize(e,r,s);return a._initialData=i,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:r,opacity:s}){this._drawingOptions=T4.getDefaultDrawingOptions({stroke:Jt.makeHexColor(...e),"stroke-width":r,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c={annotationType:Sr.INK,color:or._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((o,l)=>o!==r[l])||e.thickness!==s||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){const{points:r,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r}),null}}class FC extends F0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Gy=8,$v=3;class sm{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,r,s,i){return s-=e,i-=r,s===0?i>0?0:4:s===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,r,s,i,a,o,l){const c=this.#t(s,i,a,o);for(let d=0;d<8;d++){const u=(-d+c-l+16)%8,h=this.#r[2*u],f=this.#r[2*u+1];if(e[(s+h)*r+(i+f)]!==0)return u}return-1}static#i(e,r,s,i,a,o,l){const c=this.#t(s,i,a,o);for(let d=0;d<8;d++){const u=(d+c+l+16)%8,h=this.#r[2*u],f=this.#r[2*u+1];if(e[(s+h)*r+(i+f)]!==0)return u}return-1}static#s(e,r,s,i){const a=e.length,o=new Int32Array(a);for(let u=0;u<a;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<s-1;u++)o[u*r]=o[u*r+r-1]=0;for(let u=0;u<r;u++)o[u]=o[r*s-1-u]=0;let l=1,c;const d=[];for(let u=1;u<s-1;u++){c=1;for(let h=1;h<r-1;h++){const f=u*r+h,p=o[f];if(p===0)continue;let y=u,v=h;if(p===1&&o[f-1]===0)l+=1,v-=1;else if(p>=1&&o[f+1]===0)l+=1,v+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const g=[h,u],b=v===h+1,j={isHole:b,points:g,id:l,parent:0};d.push(j);let w;for(const I of d)if(I.id===c){w=I;break}w?w.isHole?j.parent=b?w.parent:c:j.parent=b?c:w.parent:j.parent=b?c:0;const C=this.#n(o,r,u,h,y,v,0);if(C===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let E=this.#r[2*C],N=this.#r[2*C+1];const A=u+E,_=h+N;y=A,v=_;let k=u,F=h;for(;;){const I=this.#i(o,r,k,F,y,v,1);E=this.#r[2*I],N=this.#r[2*I+1];const T=k+E,R=F+N;g.push(R,T);const O=k*r+F;if(o[O+1]===0?o[O]=-l:o[O]===1&&(o[O]=l),T===u&&R===h&&k===A&&F===_){o[f]!==1&&(c=Math.abs(o[f]));break}else y=k,v=F,k=T,F=R}}}return d}static#o(e,r,s,i){if(s-r<=4){for(let A=r;A<s-2;A+=2)i.push(e[A],e[A+1]);return}const a=e[r],o=e[r+1],l=e[s-4]-a,c=e[s-3]-o,d=Math.hypot(l,c),u=l/d,h=c/d,f=u*o-h*a,p=c/l,y=1/d,v=Math.atan(p),g=Math.cos(v),b=Math.sin(v),j=y*(Math.abs(g)+Math.abs(b)),w=y*(1-j+j**2),C=Math.max(Math.atan(Math.abs(b+g)*w),Math.atan(Math.abs(b-g)*w));let E=0,N=r;for(let A=r+2;A<s-2;A+=2){const _=Math.abs(f-u*e[A+1]+h*e[A]);_>E&&(N=A,E=_)}E>(d*C)**2?(this.#o(e,r,N+2,i),this.#o(e,N,s,i)):i.push(a,o)}static#a(e){const r=[],s=e.length;return this.#o(e,0,s,r),r.push(e[s-2],e[s-1]),r.length<=4?null:r}static#u(e,r,s,i,a,o){const l=new Float32Array(o**2),c=-2*i**2,d=o>>1;for(let v=0;v<o;v++){const g=(v-d)**2;for(let b=0;b<o;b++)l[v*o+b]=Math.exp((g+(b-d)**2)/c)}const u=new Float32Array(256),h=-2*a**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/h);const f=e.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let v=0;v<s;v++)for(let g=0;g<r;g++){const b=v*r+g,j=e[b];let w=0,C=0;for(let N=0;N<o;N++){const A=v+N-d;if(!(A<0||A>=s))for(let _=0;_<o;_++){const k=g+_-d;if(k<0||k>=r)continue;const F=e[A*r+k],I=l[N*o+_]*u[Math.abs(F-j)];w+=F*I,C+=I}}const E=p[b]=Math.round(w/C);y[E]++}return[p,y]}static#l(e){const r=new Uint32Array(256);for(const s of e)r[s]++;return r}static#h(e){const r=e.length,s=new Uint8ClampedArray(r>>2);let i=-1/0,a=1/0;for(let l=0,c=s.length;l<c;l++){if(e[(l<<2)+3]===0){i=s[l]=255;continue}const u=s[l]=e[l<<2];u>i&&(i=u),u<a&&(a=u)}const o=255/(i-a);for(let l=0;l<r;l++)s[l]=(s[l]-a)*o;return s}static#d(e){let r,s=-1/0,i=-1/0;const a=e.findIndex(c=>c!==0);let o=a,l=a;for(r=a;r<256;r++){const c=e[r];c>s&&(r-o>i&&(i=r-o,l=r-1),s=c,o=r)}for(r=l-1;r>=0&&!(e[r]>e[r+1]);r--);return r}static#f(e){const r=e,{width:s,height:i}=e,{maxDim:a}=this.#e;let o=s,l=i;if(s>a||i>a){let f=s,p=i,y=Math.log2(Math.max(s,i)/a);const v=Math.floor(y);y=y===v?v-1:v;for(let b=0;b<y;b++){o=Math.ceil(f/2),l=Math.ceil(p/2);const j=new OffscreenCanvas(o,l);j.getContext("2d").drawImage(e,0,0,f,p,0,0,o,l),f=o,p=l,e!==r&&e.close(),e=j.transferToImageBitmap()}const g=Math.min(a/o,a/l);o=Math.round(o*g),l=Math.round(l*g)}const d=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,l);const u=d.getImageData(0,0,o,l).data;return[this.#h(u),o,l]}static extractContoursFromText(e,{fontFamily:r,fontStyle:s,fontWeight:i},a,o,l,c){let d=new OffscreenCanvas(1,1),u=d.getContext("2d",{alpha:!1});const h=200,f=u.font=`${s} ${i} ${h}px ${r}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:v,actualBoundingBoxDescent:g,fontBoundingBoxAscent:b,fontBoundingBoxDescent:j,width:w}=u.measureText(e),C=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,w)*C),N=Math.ceil(Math.max(Math.abs(v)+Math.abs(g)||h,Math.abs(b)+Math.abs(j)||h)*C);d=new OffscreenCanvas(E,N),u=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,E,N),u.fillStyle="black",u.fillText(e,E*(C-1)/2,N*(3-C)/2);const A=this.#h(u.getImageData(0,0,E,N).data),_=this.#l(A),k=this.#d(_),F=this.#s(A,E,N,k);return this.processDrawnLines({lines:{curves:F,width:E,height:N},pageWidth:a,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,r,s,i,a){const[o,l,c]=this.#f(e),[d,u]=this.#u(o,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),h=this.#d(u),f=this.#s(d,l,c,h);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:r,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:r,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:o,areContours:l}){i%180!==0&&([r,s]=[s,r]);const{curves:c,width:d,height:u}=e,h=e.thickness??0,f=[],p=Math.min(r/d,s/u),y=p/r,v=p/s,g=[];for(const{points:j}of c){const w=o?this.#a(j):j;if(!w)continue;g.push(w);const C=w.length,E=new Float32Array(C),N=new Float32Array(3*(C===2?2:C-2));if(f.push({line:N,points:E}),C===2){E[0]=w[0]*y,E[1]=w[1]*v,N.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[A,_,k,F]=w;A*=y,_*=v,k*=y,F*=v,E.set([A,_,k,F],0),N.set([NaN,NaN,NaN,NaN,A,_],0);for(let I=4;I<C;I+=2){const T=E[I]=w[I]*y,R=E[I+1]=w[I+1]*v;N.set(Mt.createBezierPoints(A,_,k,F,T,R),(I-2)*3),[A,_,k,F]=[k,F,T,R]}}if(f.length===0)return null;const b=l?new FC:new F0;return b.build(f,r,s,1,i,l?0:h,a),{outline:b,newCurves:g,areContours:l,thickness:h,width:d,height:u}}static async compressSignature({outlines:e,areContours:r,thickness:s,width:i,height:a}){let o=1/0,l=-1/0,c=0;for(const w of e){c+=w.length;for(let C=2,E=w.length;C<E;C++){const N=w[C]-w[C-2];o=Math.min(o,N),l=Math.max(l,N)}}let d;o>=-128&&l<=127?d=Int8Array:o>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const u=e.length,h=Gy+$v*u,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*d.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=a,f[p++]=r?0:1,f[p++]=Math.max(0,Math.floor(s??0)),f[p++]=u,f[p++]=d.BYTES_PER_ELEMENT;for(const w of e)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];const y=new CompressionStream("deflate-raw"),v=y.writable.getWriter();await v.ready,v.write(f);const g=d.prototype.constructor;for(const w of e){const C=new g(w.length-2);for(let E=2,N=w.length;E<N;E++)C[E-2]=w[E]-w[E-2];v.write(C)}v.close();const b=await new Response(y.readable).arrayBuffer(),j=new Uint8Array(b);return R7(j)}static async decompressSignature(e){try{const r=nK(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(r).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,l=0;for await(const w of s)o||=new Uint8Array(new Uint32Array(w.buffer,0,4)[0]),o.set(w,l),l+=w.length;const c=new Uint32Array(o.buffer,0,o.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const u=c[2],h=c[3],f=c[4]===0,p=c[5],y=c[6],v=c[7],g=[],b=(Gy+$v*y)*Uint32Array.BYTES_PER_ELEMENT;let j;switch(v){case Int8Array.BYTES_PER_ELEMENT:j=new Int8Array(o.buffer,b);break;case Int16Array.BYTES_PER_ELEMENT:j=new Int16Array(o.buffer,b);break;case Int32Array.BYTES_PER_ELEMENT:j=new Int32Array(o.buffer,b);break}l=0;for(let w=0;w<y;w++){const C=c[$v*w+Gy],E=new Float32Array(C+2);g.push(E);for(let N=0;N<$v-1;N++)E[N]=c[$v*w+Gy+N+1];for(let N=0;N<C;N++)E[N+2]=E[N]+j[l++]}return{areContours:f,thickness:p,outlines:g,width:u,height:h}}catch(r){return Pr(`decompressSignature: ${r}`),null}}}class _4 extends f${constructor(){super(),super.updateProperties({fill:or._defaultLineColor,"stroke-width":0})}clone(){const e=new _4;return e.updateAll(this),e}}class I4 extends xj{constructor(e){super(e),super.updateProperties({stroke:or._defaultLineColor,"stroke-width":1})}clone(){const e=new I4(this._viewParameters);return e.updateAll(this),e}}class Yc extends cr{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Sr.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,r){or.initialize(e,r),this._defaultDrawingOptions=new _4,this._defaultDrawnSignatureOptions=new I4(r.viewParameters)}static getDefaultDrawingOptions(e){const r=this._defaultDrawingOptions.clone();return r.updateProperties(e),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fr(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const r=e.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,r=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:d}=this.#r,{rawDims:{pageWidth:u,pageHeight:h},rotation:f}=this.parent.viewport,p=sm.processDrawnLines({lines:i,pageWidth:u,pageHeight:h,rotation:f,innerMargin:Yc._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,r)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,super.addEditToolbar().then(r=>{r?.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:r,thickness:s,width:i,height:a}=this.#r,o=Math.max(i,a),l=sm.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,r,s,i){const{x:a,y:o}=this,{outline:l}=this.#r=e;this.#e=l instanceof FC,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let c;this.#e?c=Yc.getDefaultDrawingOptions():(c=Yc._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[d,u]=this.parentDimensions,[,h]=this.pageDimensions;let f=r/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(d*this.width,u*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return sm.process(e,r,s,i,Yc._INNER_MARGIN)}getFromText(e,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return sm.extractContoursFromText(e,r,s,i,a,Yc._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return sm.processDrawnLines({lines:e,pageWidth:r,pageHeight:s,rotation:i,innerMargin:Yc._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:r}){e?this._drawingOptions=Yc.getDefaultDrawingOptions():(this._drawingOptions=Yc._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:Sr.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.paths={lines:r,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=r,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,r,s,i,a,o){return o.areContours?FC.deserialize(e,r,s,i,a,o):F0.deserialize(e,r,s,i,a,o)}static async deserialize(e,r,s){const i=await super.deserialize(e,r,s);return i.#e=e.areContours,i.#t=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class PY extends or{#e=null;#t=null;#r=null;#n=null;#i=null;#s="";#o=null;#a=!1;#u=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Sr.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,r){or.initialize(e,r)}static isHandlingMimeForPasting(e){return Vb.includes(e)}static paste(e,r){r.pasteEditor({mode:Sr.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const r=e.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}#d(e,r=!1){if(!e){this.remove();return}this.#e=e.bitmap,r||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(s).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Vb.join(",");const r=this._uiManager._signal;this.#r=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}s()},{signal:r}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#o===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#i||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,r;return this._isCopy&&(e=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#g()},e)}#p(){const{div:e}=this;let{width:r,height:s}=this.#e;const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const u=Math.min(o*i/r,o*a/s);r*=u,s*=u}const[l,c]=this.parentDimensions;this.setDims(r*l/i,s*c/a),this._uiManager.enableWaiting(!1);const d=this.#o=document.createElement("canvas");d.setAttribute("role","img"),this.addContainer(d),this.width=r/i,this.height=s/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,r,s=!1){e||(e=224);const{width:i,height:a}=this.#e,o=new lc;let l=this.#e,c=i,d=a,u=null;if(r){if(i>r||a>r){const N=Math.min(r/i,r/a);c=Math.floor(i*N),d=Math.floor(a*N)}u=document.createElement("canvas");const f=u.width=Math.ceil(c*o.sx),p=u.height=Math.ceil(d*o.sy);this.#l||(l=this.#c(f,p));const y=u.getContext("2d");y.filter=this._uiManager.hcmFilter;let v="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",g="#42414d");const b=15,j=b*o.sx,w=b*o.sy,C=new OffscreenCanvas(j*2,w*2),E=C.getContext("2d");E.fillStyle=v,E.fillRect(0,0,j*2,w*2),E.fillStyle=g,E.fillRect(0,0,j,w),E.fillRect(j,w,j,w),y.fillStyle=y.createPattern(C,"repeat"),y.fillRect(0,0,f,p),y.drawImage(l,0,0,l.width,l.height,0,0,f,p)}let h=null;if(s){let f,p;if(o.symmetric&&l.width<e&&l.height<e)f=l.width,p=l.height;else if(l=this.#e,i>e||a>e){const g=Math.min(e/i,e/a);f=Math.floor(i*g),p=Math.floor(a*g),this.#l||(l=this.#c(f,p))}const v=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,f,p),h={width:f,height:p,data:v.getImageData(0,0,f,p).data}}return{canvas:u,width:c,height:d,imageData:h}}#c(e,r){const{width:s,height:i}=this.#e;let a=s,o=i,l=this.#e;for(;a>2*e||o>2*r;){const c=a,d=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(a,o);u.getContext("2d").drawImage(l,0,0,c,d,0,0,a,o),l=u.transferToImageBitmap()}return l}#g(){const[e,r]=this.parentDimensions,{width:s,height:i}=this,a=new lc,o=Math.ceil(s*e*a.sx),l=Math.ceil(i*r*a.sy),c=this.#o;if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const d=this.#l?this.#e:this.#c(o,l),u=c.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(d,0,0,d.width,d.height,0,0,o,l)}#v(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=this.#e,r.getContext("2d").drawImage(this.#e,0,0),r.toDataURL()}if(this.#l){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Cm.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Cm.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,r,s){let i=null,a=!1;if(e instanceof u$){const{data:{rect:v,rotation:g,id:b,structParent:j,popupRef:w},container:C,parent:{page:{pageNumber:E}},canvas:N}=e;let A,_;N?(delete e.canvas,{id:A,bitmap:_}=s.imageManager.getFromCanvas(C.id,N),N.remove()):(a=!0,e._hasNoCanvas=!0);const k=(await r._structTree.getAriaAttributes(`${g4}${b}`))?.get("aria-label")||"";i=e={annotationType:Sr.STAMP,bitmapId:A,bitmap:_,pageIndex:E-1,rect:v.slice(0),rotation:g,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:j,popupRef:w}}const o=await super.deserialize(e,r,s),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:u,isSvg:h,accessibilityData:f}=e;a?(s.addMissingCanvas(e.id,o),o.#a=!0):u&&s.imageManager.isValidId(u)?(o.#t=u,c&&(o.#e=c)):o.#n=d,o.#l=h;const[p,y]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/y,f&&(o.altTextData=f),o._initialData=i,o.#h=!!i,o}serialize(e=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Sr.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=this.#v(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=this.#x(s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(this.#t))r.stamps.set(this.#t,{area:o,serialized:s}),s.bitmap=this.#v(!1);else if(this.#l){const l=r.stamps.get(this.#t);o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=this.#v(!1))}return s}#x(e){const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===r,a=(e.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class Zc{#e;#t=!1;#r=null;#n=null;#i=null;#s=new Map;#o=!1;#a=!1;#u=!1;#l=null;#h=null;#d=null;#f=null;#m=null;#p=-1;#c;static _initialized=!1;static#g=new Map([ii,T4,PY,Ls,Yc].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:r,div:s,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:c,viewport:d,l10n:u}){const h=[...Zc.#g.values()];if(!Zc._initialized){Zc._initialized=!0;for(const f of h)f.initialize(u,e)}e.registerEditorTypes(h),this.#c=e,this.pageIndex=r,this.div=s,this.#e=a,this.#r=o,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=i,this.#c.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===Sr.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#w(),e){case Sr.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Sr.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Sr.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:r}=this.div;for(const s of Zc.#g.values())r.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const e=new Set;for(const s of this.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!this.#r){this.#u=!1;return}const r=this.#r.getEditableAnnotations();for(const s of r){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#u=!1}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#d&&!this.#m){this.#m=new AbortController;const i=this.#c.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:d}=a,u=this.#p;if(d-u>500){this.#p=d;return}this.#p=-1;const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const y=new RegExp(`^${_7}[0-9]+$`);for(const g of f)if(y.test(g.id)){p=g.id;break}if(!p)return;const v=this.#s.get(p);v?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),v.dblclick())},{signal:i,capture:!0})}const e=new Map,r=new Map;for(const i of this.#s.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else r.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#r){const i=this.#r.getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(this.#c.isDeletedAnnotationElement(o))continue;let l=r.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(this.#c.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of Zc.#g.values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#c.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#v(e){this.#c.unselectAll();const{target:r}=e;if(r===this.#d.div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&this.#d.div.contains(r)){const{isMac:s}=Si.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Ls.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:r}=e;r&&this.#c.isDeletedAnnotationElement(r)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e.annotationElementId),or.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:r}=document;e.div.contains(r)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),r.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const r=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:r,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#x(){return Zc.#g.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#b(e){const r=this.#x;return r?new r.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#x?.canCreateNewEmptyEditor()}async pasteEditor(e,r){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#j(),a=this.getNextId(),o=this.#b({parent:this,id:a,x:s,y:i,uiManager:this.#c,isCentered:!0,...r});o&&this.add(o)}async deserialize(e){return await Zc.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,r,s={}){const i=this.getNextId(),a=this.#b({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:r,...s});return a&&this.add(a),a}#j(){const{x:e,y:r,width:s,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,r),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,r+i),d=(a+l)/2-e,u=(o+c)/2-r,[h,f]=this.viewport.rotation%180===0?[d,u]:[u,d];return{offsetX:h,offsetY:f}}addNewEditor(e={}){this.createAndAddNewEditor(this.#j(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:r}=Si.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!this.#o||(this.#o=!1,this.#x?.isDrawer&&this.#x.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#c.getMode();if(s===Sr.STAMP||s===Sr.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===Sr.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:r}=Si.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(this.#o=!0,this.#x?.isDrawer){this.startDrawingSession(e);return}const s=this.#c.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#x.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const r=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:r}),this.#x.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:r}=document;this.div.contains(r)&&(this.#h=r);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#x.endDrawing(e)):null}findNewParent(e,r,s){const i=this.#c.findParent(r,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#x.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#c.removeLayer(this)}#w(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Yh(this.div,e);for(const r of this.#c.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#w();const r=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Yh(this.div,{rotation:s}),r!==s)for(const i of this.#s.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return this.#c.viewParameters.realScale}}class ji{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const r of this.#t.values())r.remove(),e.append(r);this.#e=e}}static get _svgFactory(){return Fr(this,"_svgFactory",new Ox)}static#i(e,[r,s,i,a]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*r}%`,o.width=`${100*i}%`,o.height=`${100*a}%`}#s(){const e=ji._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#o(e,r){const s=ji._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${r}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const a=ji._svgFactory.createElement("use");return s.append(a),a.setAttribute("href",`#${r}`),a.classList.add("clip"),i}#a(e,r){for(const[s,i]of Object.entries(r))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,r=!1,s=!1){const i=ji.#n++,a=this.#s(),o=ji._svgFactory.createElement("defs");a.append(o);const l=ji._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),r&&this.#r.set(i,l);const d=s?this.#o(o,c):null,u=ji._svgFactory.createElement("use");return a.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,r){const s=ji.#n++,i=this.#s(),a=ji._svgFactory.createElement("defs");i.append(a);const o=ji._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(r){const h=ji._svgFactory.createElement("mask");a.append(h),c=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=ji._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=ji._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const d=ji._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const u=d.cloneNode();return i.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,r){this.#r.delete(e),this.updateProperties(e,r)}updateProperties(e,r){if(!r)return;const{root:s,bbox:i,rootClass:a,path:o}=r,l=typeof e=="number"?this.#t.get(e):e;if(l){if(s&&this.#a(l,s),i&&ji.#i(l,i),a){const{classList:c}=l;for(const[d,u]of Object.entries(a))c.toggle(d,u)}if(o){const d=l.firstChild.firstChild;this.#a(d,o)}}}updateParent(e,r){if(r===this)return;const s=this.#t.get(e);s&&(r.#e.append(s),this.#t.delete(e),r.#t.set(e,s))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:LC};globalThis.pdfjsLib={AbortException:pu,AnnotationEditorLayer:Zc,AnnotationEditorParamsType:Ur,AnnotationEditorType:Sr,AnnotationEditorUIManager:gu,AnnotationLayer:vj,AnnotationMode:ou,AnnotationType:Rs,build:i$,ColorPicker:Io,createValidAbsoluteUrl:f4,DOMSVGFactory:Ox,DrawLayer:ji,FeatureTest:Si,fetchData:Kg,getDocument:t$,getFilenameFromUrl:L7,getPdfFilenameFromUrl:M7,getUuid:p4,getXfaPageViewport:F7,GlobalWorkerOptions:xm,ImageKind:dx,InvalidPDFException:Ub,isDataScheme:O0,isPdfFile:pj,isValidExplicitDest:q7,MathClamp:ua,noContextMenu:wl,normalizeUnicode:O7,OPS:Ix,OutputScale:lc,PasswordResponses:D7,PDFDataRangeTransport:C4,PDFDateString:v4,PDFWorker:hg,PermissionFlag:I7,PixelsPerInch:Cm,RenderingCancelledException:mj,ResponseException:Dx,setLayerDimensions:Yh,shadow:Fr,SignatureExtractor:sm,stopEvent:Fs,SupportedImageMimeTypes:Vb,TextLayer:da,TouchManager:L0,updateUrlHash:m4,Util:Jt,VerbosityLevel:I0,version:s$,XfaLayer:E4};const TY=Object.freeze(Object.defineProperty({__proto__:null,AbortException:pu,AnnotationEditorLayer:Zc,AnnotationEditorParamsType:Ur,AnnotationEditorType:Sr,AnnotationEditorUIManager:gu,AnnotationLayer:vj,AnnotationMode:ou,AnnotationType:Rs,ColorPicker:Io,DOMSVGFactory:Ox,DrawLayer:ji,FeatureTest:Si,GlobalWorkerOptions:xm,ImageKind:dx,InvalidPDFException:Ub,MathClamp:ua,OPS:Ix,OutputScale:lc,PDFDataRangeTransport:C4,PDFDateString:v4,PDFWorker:hg,PasswordResponses:D7,PermissionFlag:I7,PixelsPerInch:Cm,RenderingCancelledException:mj,ResponseException:Dx,SignatureExtractor:sm,SupportedImageMimeTypes:Vb,TextLayer:da,TouchManager:L0,Util:Jt,VerbosityLevel:I0,XfaLayer:E4,build:i$,createValidAbsoluteUrl:f4,fetchData:Kg,getDocument:t$,getFilenameFromUrl:L7,getPdfFilenameFromUrl:M7,getUuid:p4,getXfaPageViewport:F7,isDataScheme:O0,isPdfFile:pj,isValidExplicitDest:q7,noContextMenu:wl,normalizeUnicode:O7,setLayerDimensions:Yh,shadow:Fr,stopEvent:Fs,updateUrlHash:m4,version:s$},Symbol.toStringTag,{value:"Module"})),_Y="/assets/pdf.worker.min--PgD6g2g.mjs";var S=h4();const be=Kr(S),Yg=MG({__proto__:null,default:be},[S]);var sf=T7();const yj=Kr(sf);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rx(){return Rx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Rx.apply(this,arguments)}var Lh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lh||(Lh={}));const P3="popstate";function IY(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return $C("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Hb(i)}return kY(e,r,null,t)}function Us(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function m$(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DY(){return Math.random().toString(36).substr(2,8)}function T3(t,e){return{usr:t.state,key:t.key,idx:e}}function $C(t,e,r,s){return r===void 0&&(r=null),Rx({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xg(e):e,{state:r,key:e&&e.key||s||DY()})}function Hb(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Xg(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function kY(t,e,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=Lh.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Rx({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Lh.Pop;let g=u(),b=g==null?null:g-d;d=g,c&&c({action:l,location:v.location,delta:b})}function f(g,b){l=Lh.Push;let j=$C(v.location,g,b);d=u()+1;let w=T3(j,d),C=v.createHref(j);try{o.pushState(w,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(C)}a&&c&&c({action:l,location:v.location,delta:1})}function p(g,b){l=Lh.Replace;let j=$C(v.location,g,b);d=u();let w=T3(j,d),C=v.createHref(j);o.replaceState(w,"",C),a&&c&&c({action:l,location:v.location,delta:0})}function y(g){let b=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof g=="string"?g:Hb(g);return j=j.replace(/ $/,"%20"),Us(b,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,b)}let v={get action(){return l},get location(){return t(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(P3,h),c=g,()=>{i.removeEventListener(P3,h),c=null}},createHref(g){return e(i,g)},createURL:y,encodeLocation(g){let b=y(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(g){return o.go(g)}};return v}var _3;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_3||(_3={}));function OY(t,e,r){return r===void 0&&(r="/"),RY(t,e,r)}function RY(t,e,r,s){let i=typeof e=="string"?Xg(e):e,a=D4(i.pathname||"/",r);if(a==null)return null;let o=p$(t);LY(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=KY(a);l=HY(o[c],d)}return l}function p$(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Us(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Bh([s,c.relativePath]),u=r.concat(c);a.children&&a.children.length>0&&(Us(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),p$(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:UY(d,a.index),routesMeta:u})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of g$(a.path))i(a,o,c)}),e}function g$(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=g$(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function LY(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:VY(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const MY=/^:[\w-]+$/,FY=3,$Y=2,BY=1,zY=10,qY=-2,I3=t=>t==="*";function UY(t,e){let r=t.split("/"),s=r.length;return r.some(I3)&&(s+=qY),e&&(s+=$Y),r.filter(i=>!I3(i)).reduce((i,a)=>i+(MY.test(a)?FY:a===""?BY:zY),s)}function VY(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function HY(t,e,r){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=WY({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Bh([a,h.pathname]),pathnameBase:QY(Bh([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Bh([a,h.pathnameBase]))}return o}function WY(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=GY(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let v=l[h]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[h];return p&&!y?d[f]=void 0:d[f]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function GY(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),m$(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function KY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return m$(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function D4(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function YY(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:i=""}=typeof t=="string"?Xg(t):t;return{pathname:r?r.startsWith("/")?r:XY(r,e):e,search:JY(s),hash:eX(i)}}function XY(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function I2(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZY(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function k4(t,e){let r=ZY(t);return e?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function O4(t,e,r,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=Xg(t):(i=Rx({},t),Us(!i.pathname||!i.pathname.includes("?"),I2("?","pathname","search",i)),Us(!i.pathname||!i.pathname.includes("#"),I2("#","pathname","hash",i)),Us(!i.search||!i.search.includes("#"),I2("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=YY(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Bh=t=>t.join("/").replace(/\/\/+/g,"/"),QY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const v$=["post","put","patch","delete"];new Set(v$);const rX=["get",...v$];new Set(rX);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lx(){return Lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Lx.apply(this,arguments)}const R4=S.createContext(null),nX=S.createContext(null),af=S.createContext(null),bj=S.createContext(null),Su=S.createContext({outlet:null,matches:[],isDataRoute:!1}),x$=S.createContext(null);function sX(t,e){let{relative:r}=e===void 0?{}:e;Zg()||Us(!1);let{basename:s,navigator:i}=S.useContext(af),{hash:a,pathname:o,search:l}=b$(t,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:Bh([s,o])),i.createHref({pathname:c,search:l,hash:a})}function Zg(){return S.useContext(bj)!=null}function of(){return Zg()||Us(!1),S.useContext(bj).location}function y$(t){S.useContext(af).static||S.useLayoutEffect(t)}function lf(){let{isDataRoute:t}=S.useContext(Su);return t?xX():iX()}function iX(){Zg()||Us(!1);let t=S.useContext(R4),{basename:e,future:r,navigator:s}=S.useContext(af),{matches:i}=S.useContext(Su),{pathname:a}=of(),o=JSON.stringify(k4(i,r.v7_relativeSplatPath)),l=S.useRef(!1);return y$(()=>{l.current=!0}),S.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=O4(d,JSON.parse(o),a,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bh([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,o,a,t])}function aX(){let{matches:t}=S.useContext(Su),e=t[t.length-1];return e?e.params:{}}function b$(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=S.useContext(af),{matches:i}=S.useContext(Su),{pathname:a}=of(),o=JSON.stringify(k4(i,s.v7_relativeSplatPath));return S.useMemo(()=>O4(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function oX(t,e){return lX(t,e)}function lX(t,e,r,s){Zg()||Us(!1);let{navigator:i}=S.useContext(af),{matches:a}=S.useContext(Su),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=of(),u;if(e){var h;let g=typeof e=="string"?Xg(e):e;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||Us(!1),u=g}else u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=OY(t,{pathname:p}),v=fX(y&&y.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Bh([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Bh([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,r,s);return e&&v?S.createElement(bj.Provider,{value:{location:Lx({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Lh.Pop}},v):v}function cX(){let t=vX(),e=tX(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:i},r):null,null)}const dX=S.createElement(cX,null);class uX extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(Su.Provider,{value:this.props.routeContext},S.createElement(x$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hX(t){let{routeContext:e,match:r,children:s}=t,i=S.useContext(R4);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Su.Provider,{value:e},s)}function fX(t,e,r,s){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&l?.[h.route.id]!==void 0);u>=0||Us(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,y=!1,v=null,g=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||dX,c&&(d<0&&f===0?(yX("route-fallback"),y=!0,g=null):d===f&&(y=!0,g=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),j=()=>{let w;return p?w=v:y?w=g:h.route.Component?w=S.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,S.createElement(hX,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(uX,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:j(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):j()},null)}var j$=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(j$||{}),w$=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(w$||{});function mX(t){let e=S.useContext(R4);return e||Us(!1),e}function pX(t){let e=S.useContext(nX);return e||Us(!1),e}function gX(t){let e=S.useContext(Su);return e||Us(!1),e}function N$(t){let e=gX(),r=e.matches[e.matches.length-1];return r.route.id||Us(!1),r.route.id}function vX(){var t;let e=S.useContext(x$),r=pX(),s=N$();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function xX(){let{router:t}=mX(j$.UseNavigateStable),e=N$(w$.UseNavigateStable),r=S.useRef(!1);return y$(()=>{r.current=!0}),S.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lx({fromRouteId:e},a)))},[t,e])}const D3={};function yX(t,e,r){D3[t]||(D3[t]=!0)}function bX(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function jX(t){let{to:e,replace:r,state:s,relative:i}=t;Zg()||Us(!1);let{future:a,static:o}=S.useContext(af),{matches:l}=S.useContext(Su),{pathname:c}=of(),d=lf(),u=O4(e,k4(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return S.useEffect(()=>d(JSON.parse(h),{replace:r,state:s,relative:i}),[d,h,i,r,s]),null}function Ut(t){Us(!1)}function wX(t){let{basename:e="/",children:r=null,location:s,navigationType:i=Lh.Pop,navigator:a,static:o=!1,future:l}=t;Zg()&&Us(!1);let c=e.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:c,navigator:a,static:o,future:Lx({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof s=="string"&&(s=Xg(s));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:y="default"}=s,v=S.useMemo(()=>{let g=D4(u,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:p,key:y},navigationType:i}},[c,u,h,f,p,y,i]);return v==null?null:S.createElement(af.Provider,{value:d},S.createElement(bj.Provider,{children:r,value:v}))}function Vi(t){let{children:e,location:r}=t;return oX(BC(e),r)}new Promise(()=>{});function BC(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(s,i)=>{if(!S.isValidElement(s))return;let a=[...e,i];if(s.type===S.Fragment){r.push.apply(r,BC(s.props.children,a));return}s.type!==Ut&&Us(!1),!s.props.index||!s.props.children||Us(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=BC(s.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zC(){return zC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},zC.apply(this,arguments)}function NX(t,e){if(t==null)return{};var r={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function SX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AX(t,e){return t.button===0&&(!e||e==="_self")&&!SX(t)}function qC(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(i=>[r,i]):[[r,s]])},[]))}function CX(t,e){let r=qC(t);return e&&e.forEach((s,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}const EX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PX="6";try{window.__reactRouterVersion=PX}catch{}const TX="startTransition",k3=Yg[TX];function _X(t){let{basename:e,children:r,future:s,window:i}=t,a=S.useRef();a.current==null&&(a.current=IY({window:i,v5Compat:!0}));let o=a.current,[l,c]=S.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},u=S.useCallback(h=>{d&&k3?k3(()=>c(h)):c(h)},[c,d]);return S.useLayoutEffect(()=>o.listen(u),[o,u]),S.useEffect(()=>bX(s),[s]),S.createElement(wX,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const IX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UC=S.forwardRef(function(e,r){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=NX(e,EX),{basename:p}=S.useContext(af),y,v=!1;if(typeof d=="string"&&DX.test(d)&&(y=d,IX))try{let w=new URL(window.location.href),C=d.startsWith("//")?new URL(w.protocol+d):new URL(d),E=D4(C.pathname,p);C.origin===w.origin&&E!=null?d=E+C.search+C.hash:v=!0}catch{}let g=sX(d,{relative:i}),b=kX(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function j(w){s&&s(w),w.defaultPrevented||b(w)}return S.createElement("a",zC({},f,{href:y||g,onClick:v||a?s:j,ref:r,target:c}))});var O3;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(O3||(O3={}));var R3;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R3||(R3={}));function kX(t,e){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=lf(),d=of(),u=b$(t,{relative:o});return S.useCallback(h=>{if(AX(h,r)){h.preventDefault();let f=s!==void 0?s:Hb(d)===Hb(u);c(t,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,s,i,r,t,a,o,l])}function OX(t){let e=S.useRef(qC(t)),r=S.useRef(!1),s=of(),i=S.useMemo(()=>CX(s.search,r.current?null:e.current),[s.search]),a=lf(),o=S.useCallback((l,c)=>{const d=qC(typeof l=="function"?l(i):l);r.current=!0,a("?"+d,c)},[a,i]);return[i,o]}function dn(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function L3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function S$(...t){return e=>{let r=!1;const s=t.map(i=>{const a=L3(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():L3(t[i],null)}}}}function Ei(...t){return S.useCallback(S$(...t),t)}function RX(t,e){const r=S.createContext(e),s=a=>{const{children:o,...l}=a,c=S.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};s.displayName=t+"Provider";function i(a){const o=S.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[s,i]}function cf(t,e=[]){let r=[];function s(a,o){const l=S.createContext(o),c=r.length;r=[...r,o];const d=h=>{const{scope:f,children:p,...y}=h,v=f?.[t]?.[c]||l,g=S.useMemo(()=>y,Object.values(y));return n.jsx(v.Provider,{value:g,children:p})};d.displayName=a+"Provider";function u(h,f){const p=f?.[t]?.[c]||l,y=S.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=r.map(o=>S.createContext(o));return function(l){const c=l?.[t]||a;return S.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[s,LX(i,...e)]}function LX(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Pm(t){const e=FX(t),r=S.forwardRef((s,i)=>{const{children:a,...o}=s,l=S.Children.toArray(a),c=l.find(BX);if(c){const d=c.props.children,u=l.map(h=>h===c?S.Children.count(d)>1?S.Children.only(null):S.isValidElement(d)?d.props.children:null:h);return n.jsx(e,{...o,ref:i,children:S.isValidElement(d)?S.cloneElement(d,void 0,u):null})}return n.jsx(e,{...o,ref:i,children:a})});return r.displayName=`${t}.Slot`,r}var MX=Pm("Slot");function FX(t){const e=S.forwardRef((r,s)=>{const{children:i,...a}=r;if(S.isValidElement(i)){const o=qX(i),l=zX(a,i.props);return i.type!==S.Fragment&&(l.ref=s?S$(s,o):o),S.cloneElement(i,l)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $X=Symbol("radix.slottable");function BX(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$X}function zX(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function qX(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function UX(t){const e=t+"CollectionProvider",[r,s]=cf(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:g,children:b}=v,j=be.useRef(null),w=be.useRef(new Map).current;return n.jsx(i,{scope:g,itemMap:w,collectionRef:j,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=Pm(l),d=be.forwardRef((v,g)=>{const{scope:b,children:j}=v,w=a(l,b),C=Ei(g,w.collectionRef);return n.jsx(c,{ref:C,children:j})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=Pm(u),p=be.forwardRef((v,g)=>{const{scope:b,children:j,...w}=v,C=be.useRef(null),E=Ei(g,C),N=a(u,b);return be.useEffect(()=>(N.itemMap.set(C,{ref:C,...w}),()=>void N.itemMap.delete(C))),n.jsx(f,{[h]:"",ref:E,children:j})});p.displayName=u;function y(v){const g=a(t+"CollectionConsumer",v);return be.useCallback(()=>{const j=g.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((N,A)=>w.indexOf(N.ref.current)-w.indexOf(A.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},y,s]}var VX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xn=VX.reduce((t,e)=>{const r=Pm(`Primitive.${e}`),s=S.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function L4(t,e){t&&sf.flushSync(()=>t.dispatchEvent(e))}function Tm(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...r)=>e.current?.(...r),[])}function HX(t,e=globalThis?.document){const r=Tm(t);S.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[r,e])}var WX="DismissableLayer",VC="dismissableLayer.update",GX="dismissableLayer.pointerDownOutside",KX="dismissableLayer.focusOutside",M3,A$=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),C$=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=S.useContext(A$),[u,h]=S.useState(null),f=u?.ownerDocument??globalThis?.document,[,p]=S.useState({}),y=Ei(e,A=>h(A)),v=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(g),j=u?v.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=b,E=XX(A=>{const _=A.target,k=[...d.branches].some(F=>F.contains(_));!C||k||(i?.(A),o?.(A),A.defaultPrevented||l?.())},f),N=ZX(A=>{const _=A.target;[...d.branches].some(F=>F.contains(_))||(a?.(A),o?.(A),A.defaultPrevented||l?.())},f);return HX(A=>{j===d.layers.size-1&&(s?.(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),S.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(M3=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),F3(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=M3)}},[u,f,r,d]),S.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),F3())},[u,d]),S.useEffect(()=>{const A=()=>p({});return document.addEventListener(VC,A),()=>document.removeEventListener(VC,A)},[]),n.jsx(xn.div,{...c,ref:y,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:dn(t.onFocusCapture,N.onFocusCapture),onBlurCapture:dn(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:dn(t.onPointerDownCapture,E.onPointerDownCapture)})});C$.displayName=WX;var YX="DismissableLayerBranch",E$=S.forwardRef((t,e)=>{const r=S.useContext(A$),s=S.useRef(null),i=Ei(e,s);return S.useEffect(()=>{const a=s.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),n.jsx(xn.div,{...t,ref:i})});E$.displayName=YX;function XX(t,e=globalThis?.document){const r=Tm(t),s=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){P$(GX,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>s.current=!0}}function ZX(t,e=globalThis?.document){const r=Tm(t),s=S.useRef(!1);return S.useEffect(()=>{const i=a=>{a.target&&!s.current&&P$(KX,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function F3(){const t=new CustomEvent(VC);document.dispatchEvent(t)}function P$(t,e,r,{discrete:s}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),s?L4(i,a):i.dispatchEvent(a)}var QX=C$,JX=E$,ud=globalThis?.document?S.useLayoutEffect:()=>{},eZ="Portal",T$=S.forwardRef((t,e)=>{const{container:r,...s}=t,[i,a]=S.useState(!1);ud(()=>a(!0),[]);const o=r||i&&globalThis?.document?.body;return o?yj.createPortal(n.jsx(xn.div,{...s,ref:e}),o):null});T$.displayName=eZ;function tZ(t,e){return S.useReducer((r,s)=>e[r][s]??r,t)}var qm=t=>{const{present:e,children:r}=t,s=rZ(e),i=typeof r=="function"?r({present:s.isPresent}):S.Children.only(r),a=Ei(s.ref,nZ(i));return typeof r=="function"||s.isPresent?S.cloneElement(i,{ref:a}):null};qm.displayName="Presence";function rZ(t){const[e,r]=S.useState(),s=S.useRef(null),i=S.useRef(t),a=S.useRef("none"),o=t?"mounted":"unmounted",[l,c]=tZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const d=Ky(s.current);a.current=l==="mounted"?d:"none"},[l]),ud(()=>{const d=s.current,u=i.current;if(u!==t){const f=a.current,p=Ky(d);t?c("MOUNT"):p==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),ud(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,h=p=>{const v=Ky(s.current).includes(p.animationName);if(p.target===e&&v&&(c("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=p=>{p.target===e&&(a.current=Ky(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:S.useCallback(d=>{s.current=d?getComputedStyle(d):null,r(d)},[])}}function Ky(t){return t?.animationName||"none"}function nZ(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var sZ=Yg[" useInsertionEffect ".trim().toString()]||ud;function $0({prop:t,defaultProp:e,onChange:r=()=>{},caller:s}){const[i,a,o]=iZ({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:i;{const u=S.useRef(t!==void 0);S.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,s])}const d=S.useCallback(u=>{if(l){const h=aZ(u)?u(t):u;h!==t&&o.current?.(h)}else a(u)},[l,t,a,o]);return[c,d]}function iZ({defaultProp:t,onChange:e}){const[r,s]=S.useState(t),i=S.useRef(r),a=S.useRef(e);return sZ(()=>{a.current=e},[e]),S.useEffect(()=>{i.current!==r&&(a.current?.(r),i.current=r)},[r,i]),[r,s,a]}function aZ(t){return typeof t=="function"}var oZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lZ="VisuallyHidden",M4=S.forwardRef((t,e)=>n.jsx(xn.span,{...t,ref:e,style:{...oZ,...t.style}}));M4.displayName=lZ;var F4="ToastProvider",[$4,cZ,dZ]=UX("Toast"),[_$,nPe]=cf("Toast",[dZ]),[uZ,jj]=_$(F4),I$=t=>{const{__scopeToast:e,label:r="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[l,c]=S.useState(null),[d,u]=S.useState(0),h=S.useRef(!1),f=S.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${F4}\`. Expected non-empty \`string\`.`),n.jsx($4.Provider,{scope:e,children:n.jsx(uZ,{scope:e,label:r,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:S.useCallback(()=>u(p=>p+1),[]),onToastRemove:S.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};I$.displayName=F4;var D$="ToastViewport",hZ=["F8"],HC="toast.viewportPause",WC="toast.viewportResume",k$=S.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:s=hZ,label:i="Notifications ({hotkey})",...a}=t,o=jj(D$,r),l=cZ(r),c=S.useRef(null),d=S.useRef(null),u=S.useRef(null),h=S.useRef(null),f=Ei(e,h,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;S.useEffect(()=>{const g=b=>{s.length!==0&&s.every(w=>b[w]||b.code===w)&&h.current?.focus()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),S.useEffect(()=>{const g=c.current,b=h.current;if(y&&g&&b){const j=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(HC);b.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(WC);b.dispatchEvent(N),o.isClosePausedRef.current=!1}},C=N=>{!g.contains(N.relatedTarget)&&w()},E=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",j),g.addEventListener("focusout",C),g.addEventListener("pointermove",j),g.addEventListener("pointerleave",E),window.addEventListener("blur",j),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",j),g.removeEventListener("focusout",C),g.removeEventListener("pointermove",j),g.removeEventListener("pointerleave",E),window.removeEventListener("blur",j),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const v=S.useCallback(({tabbingDirection:g})=>{const j=l().map(w=>{const C=w.ref.current,E=[C,...AZ(C)];return g==="forwards"?E:E.reverse()});return(g==="forwards"?j.reverse():j).flat()},[l]);return S.useEffect(()=>{const g=h.current;if(g){const b=j=>{const w=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!w){const E=document.activeElement,N=j.shiftKey;if(j.target===g&&N){d.current?.focus();return}const k=v({tabbingDirection:N?"backwards":"forwards"}),F=k.findIndex(I=>I===E);D2(k.slice(F+1))?j.preventDefault():N?d.current?.focus():u.current?.focus()}};return g.addEventListener("keydown",b),()=>g.removeEventListener("keydown",b)}},[l,v]),n.jsxs(JX,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n.jsx(GC,{ref:d,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});D2(g)}}),n.jsx($4.Slot,{scope:r,children:n.jsx(xn.ol,{tabIndex:-1,...a,ref:f})}),y&&n.jsx(GC,{ref:u,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});D2(g)}})]})});k$.displayName=D$;var O$="ToastFocusProxy",GC=S.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...i}=t,a=jj(O$,r);return n.jsx(M4,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!a.viewport?.contains(l)&&s()}})});GC.displayName=O$;var B0="Toast",fZ="toast.swipeStart",mZ="toast.swipeMove",pZ="toast.swipeCancel",gZ="toast.swipeEnd",R$=S.forwardRef((t,e)=>{const{forceMount:r,open:s,defaultOpen:i,onOpenChange:a,...o}=t,[l,c]=$0({prop:s,defaultProp:i??!0,onChange:a,caller:B0});return n.jsx(qm,{present:r||l,children:n.jsx(yZ,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Tm(t.onPause),onResume:Tm(t.onResume),onSwipeStart:dn(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:dn(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:dn(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:dn(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});R$.displayName=B0;var[vZ,xZ]=_$(B0,{onClose(){}}),yZ=S.forwardRef((t,e)=>{const{__scopeToast:r,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...y}=t,v=jj(B0,r),[g,b]=S.useState(null),j=Ei(e,O=>b(O)),w=S.useRef(null),C=S.useRef(null),E=i||v.duration,N=S.useRef(0),A=S.useRef(E),_=S.useRef(0),{onToastAdd:k,onToastRemove:F}=v,I=Tm(()=>{g?.contains(document.activeElement)&&v.viewport?.focus(),o()}),T=S.useCallback(O=>{!O||O===1/0||(window.clearTimeout(_.current),N.current=new Date().getTime(),_.current=window.setTimeout(I,O))},[I]);S.useEffect(()=>{const O=v.viewport;if(O){const z=()=>{T(A.current),d?.()},q=()=>{const B=new Date().getTime()-N.current;A.current=A.current-B,window.clearTimeout(_.current),c?.()};return O.addEventListener(HC,q),O.addEventListener(WC,z),()=>{O.removeEventListener(HC,q),O.removeEventListener(WC,z)}}},[v.viewport,E,c,d,T]),S.useEffect(()=>{a&&!v.isClosePausedRef.current&&T(E)},[a,E,v.isClosePausedRef,T]),S.useEffect(()=>(k(),()=>F()),[k,F]);const R=S.useMemo(()=>g?q$(g):null,[g]);return v.viewport?n.jsxs(n.Fragment,{children:[R&&n.jsx(bZ,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),n.jsx(vZ,{scope:r,onClose:I,children:sf.createPortal(n.jsx($4.ItemSlot,{scope:r,children:n.jsx(QX,{asChild:!0,onEscapeKeyDown:dn(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(xn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:dn(t.onKeyDown,O=>{O.key==="Escape"&&(l?.(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:dn(t.onPointerDown,O=>{O.button===0&&(w.current={x:O.clientX,y:O.clientY})}),onPointerMove:dn(t.onPointerMove,O=>{if(!w.current)return;const z=O.clientX-w.current.x,q=O.clientY-w.current.y,B=!!C.current,K=["left","right"].includes(v.swipeDirection),Y=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,J=K?Y(0,z):0,H=K?0:Y(0,q),$=O.pointerType==="touch"?10:2,W={x:J,y:H},te={originalEvent:O,delta:W};B?(C.current=W,Yy(mZ,h,te,{discrete:!1})):$3(W,v.swipeDirection,$)?(C.current=W,Yy(fZ,u,te,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(z)>$||Math.abs(q)>$)&&(w.current=null)}),onPointerUp:dn(t.onPointerUp,O=>{const z=C.current,q=O.target;if(q.hasPointerCapture(O.pointerId)&&q.releasePointerCapture(O.pointerId),C.current=null,w.current=null,z){const B=O.currentTarget,K={originalEvent:O,delta:z};$3(z,v.swipeDirection,v.swipeThreshold)?Yy(gZ,p,K,{discrete:!0}):Yy(pZ,f,K,{discrete:!0}),B.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),bZ=t=>{const{__scopeToast:e,children:r,...s}=t,i=jj(B0,e),[a,o]=S.useState(!1),[l,c]=S.useState(!1);return NZ(()=>o(!0)),S.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(T$,{asChild:!0,children:n.jsx(M4,{...s,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",r]})})})},jZ="ToastTitle",L$=S.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return n.jsx(xn.div,{...s,ref:e})});L$.displayName=jZ;var wZ="ToastDescription",M$=S.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return n.jsx(xn.div,{...s,ref:e})});M$.displayName=wZ;var F$="ToastAction",$$=S.forwardRef((t,e)=>{const{altText:r,...s}=t;return r.trim()?n.jsx(z$,{altText:r,asChild:!0,children:n.jsx(B4,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${F$}\`. Expected non-empty \`string\`.`),null)});$$.displayName=F$;var B$="ToastClose",B4=S.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t,i=xZ(B$,r);return n.jsx(z$,{asChild:!0,children:n.jsx(xn.button,{type:"button",...s,ref:e,onClick:dn(t.onClick,i.onClose)})})});B4.displayName=B$;var z$=S.forwardRef((t,e)=>{const{__scopeToast:r,altText:s,...i}=t;return n.jsx(xn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:e})});function q$(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),SZ(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...q$(s))}}),e}function Yy(t,e,r,{discrete:s}){const i=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),s?L4(i,a):i.dispatchEvent(a)}var $3=(t,e,r=0)=>{const s=Math.abs(t.x),i=Math.abs(t.y),a=s>i;return e==="left"||e==="right"?a&&s>r:!a&&i>r};function NZ(t=()=>{}){const e=Tm(t);ud(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[e])}function SZ(t){return t.nodeType===t.ELEMENT_NODE}function AZ(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function D2(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var CZ=I$,U$=k$,V$=R$,H$=L$,W$=M$,G$=$$,K$=B4;function Y$(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=Y$(t[e]))&&(s&&(s+=" "),s+=r);else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function X$(){for(var t,e,r=0,s="";r<arguments.length;)(t=arguments[r++])&&(e=Y$(t))&&(s&&(s+=" "),s+=e);return s}const B3=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,z3=X$,z0=(t,e)=>r=>{var s;if(e?.variants==null)return z3(t,r?.class,r?.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(d=>{const u=r?.[d],h=a?.[d];if(u===null)return null;const f=B3(u)||B3(h);return i[d][f]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(y=>{let[v,g]=y;return Array.isArray(g)?g.includes({...a,...l}[v]):{...a,...l}[v]===g})?[...d,h,f]:d},[]);return z3(t,o,c,r?.class,r?.className)};var EZ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PZ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TZ=(t,e)=>{const r=S.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l,...c},d)=>S.createElement("svg",{ref:d,...EZ,width:i,height:i,stroke:s,strokeWidth:o?Number(a)*24/Number(i):a,className:`lucide lucide-${PZ(t)}`,...c},[...e.map(([u,h])=>S.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var Pt=TZ;const Zp=Pt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Xh=Pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ao=Pt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ph=Pt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),KC=Pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),z4=Pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Th=Pt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Es=Pt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),q4=Pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Qc=Pt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),fg=Pt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),_m=Pt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Br=Pt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),td=Pt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),hn=Pt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),wj=Pt("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Nj=Pt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),U4=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_Z=Pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),IZ=Pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Mx=Pt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),YC=Pt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Dr=Pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Sj=Pt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),La=Pt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),rr=Pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ma=Pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),q3=Pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ts=Pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),U3=Pt("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),yr=Pt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),DZ=Pt("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),fc=Pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),V4=Pt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Z$=Pt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),k2=Pt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),kZ=Pt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),mg=Pt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),OZ=Pt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Q$=Pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ui=Pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),vu=Pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),RZ=Pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ps=Pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ai=Pt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),J$=Pt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),LZ=Pt("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Nn=Pt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),MZ=Pt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Aj=Pt("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),q0=Pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),FZ=Pt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Dt=Pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Cj=Pt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),$Z=Pt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),so=Pt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),eB=Pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),tB=Pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Sn=Pt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),qn=Pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Bo=Pt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Nl=Pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),H4=Pt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),BZ=Pt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),W4=Pt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ic=Pt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),zZ=Pt("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),qZ=Pt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),rs=Pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),O2=Pt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ar=Pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),io=Pt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),V3=Pt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),hd=Pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),vs=Pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),gs=Pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),XC=Pt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),H3=Pt("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),xl=Pt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),zo=Pt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Cr=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function UZ(){for(var t=0,e,r,s="";t<arguments.length;)(e=arguments[t++])&&(r=rB(e))&&(s&&(s+=" "),s+=r);return s}function rB(t){if(typeof t=="string")return t;for(var e,r="",s=0;s<t.length;s++)t[s]&&(e=rB(t[s]))&&(r&&(r+=" "),r+=e);return r}var G4="-";function VZ(t){var e=WZ(t),r=t.conflictingClassGroups,s=t.conflictingClassGroupModifiers,i=s===void 0?{}:s;function a(l){var c=l.split(G4);return c[0]===""&&c.length!==1&&c.shift(),nB(c,e)||HZ(l)}function o(l,c){var d=r[l]||[];return c&&i[l]?[].concat(d,i[l]):d}return{getClassGroupId:a,getConflictingClassGroupIds:o}}function nB(t,e){if(t.length===0)return e.classGroupId;var r=t[0],s=e.nextPart.get(r),i=s?nB(t.slice(1),s):void 0;if(i)return i;if(e.validators.length!==0){var a=t.join(G4);return e.validators.find(function(o){var l=o.validator;return l(a)})?.classGroupId}}var W3=/^\[(.+)\]$/;function HZ(t){if(W3.test(t)){var e=W3.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function WZ(t){var e=t.theme,r=t.prefix,s={nextPart:new Map,validators:[]},i=KZ(Object.entries(t.classGroups),r);return i.forEach(function(a){var o=a[0],l=a[1];ZC(l,s,o,e)}),s}function ZC(t,e,r,s){t.forEach(function(i){if(typeof i=="string"){var a=i===""?e:G3(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(GZ(i)){ZC(i(s),e,r,s);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(function(o){var l=o[0],c=o[1];ZC(c,G3(e,l),r,s)})})}function G3(t,e){var r=t;return e.split(G4).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function GZ(t){return t.isThemeGetter}function KZ(t,e){return e?t.map(function(r){var s=r[0],i=r[1],a=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[e+c,d]})):o});return[s,a]}):t}function YZ(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,s=new Map;function i(a,o){r.set(a,o),e++,e>t&&(e=0,s=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return i(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):i(o,l)}}}var sB="!";function XZ(t){var e=t.separator||":",r=e.length===1,s=e[0],i=e.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===s&&(r||o.slice(h,h+i)===e)){l.push(o.slice(d,h)),d=h+i;continue}if(f==="/"){u=h;continue}}f==="["?c++:f==="]"&&c--}var p=l.length===0?o:o.substring(d),y=p.startsWith(sB),v=y?p.substring(1):p,g=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:g}}}function ZZ(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(s){var i=s[0]==="[";i?(e.push.apply(e,r.sort().concat([s])),r=[]):r.push(s)}),e.push.apply(e,r.sort()),e}function QZ(t){return{cache:YZ(t.cacheSize),splitModifiers:XZ(t),...VZ(t)}}var JZ=/\s+/;function eQ(t,e){var r=e.splitModifiers,s=e.getClassGroupId,i=e.getConflictingClassGroupIds,a=new Set;return t.trim().split(JZ).map(function(o){var l=r(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,f=s(h?u.substring(0,h):u),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=s(u),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var y=ZZ(c).join(":"),v=d?y+sB:y;return{isTailwindClass:!0,modifierId:v,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return a.has(u)?!1:(a.add(u),i(c,d).forEach(function(h){return a.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function tQ(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var s,i,a,o=l;function l(d){var u=e[0],h=e.slice(1),f=h.reduce(function(p,y){return y(p)},u());return s=QZ(f),i=s.cache.get,a=s.cache.set,o=c,c(d)}function c(d){var u=i(d);if(u)return u;var h=eQ(d,s);return a(d,h),h}return function(){return o(UZ.apply(null,arguments))}}function Qn(t){var e=function(s){return s[t]||[]};return e.isThemeGetter=!0,e}var iB=/^\[(?:([a-z-]+):)?(.+)\]$/i,rQ=/^\d+\/\d+$/,nQ=new Set(["px","full","screen"]),sQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aQ=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Kl(t){return lm(t)||nQ.has(t)||rQ.test(t)||QC(t)}function QC(t){return Um(t,"length",hQ)}function oQ(t){return Um(t,"size",aB)}function lQ(t){return Um(t,"position",aB)}function cQ(t){return Um(t,"url",fQ)}function Xy(t){return Um(t,"number",lm)}function lm(t){return!Number.isNaN(Number(t))}function dQ(t){return t.endsWith("%")&&lm(t.slice(0,-1))}function Bv(t){return K3(t)||Um(t,"number",K3)}function qr(t){return iB.test(t)}function zv(){return!0}function jh(t){return sQ.test(t)}function uQ(t){return Um(t,"",mQ)}function Um(t,e,r){var s=iB.exec(t);return s?s[1]?s[1]===e:r(s[2]):!1}function hQ(t){return iQ.test(t)}function aB(){return!1}function fQ(t){return t.startsWith("url(")}function K3(t){return Number.isInteger(Number(t))}function mQ(t){return aQ.test(t)}function pQ(){var t=Qn("colors"),e=Qn("spacing"),r=Qn("blur"),s=Qn("brightness"),i=Qn("borderColor"),a=Qn("borderRadius"),o=Qn("borderSpacing"),l=Qn("borderWidth"),c=Qn("contrast"),d=Qn("grayscale"),u=Qn("hueRotate"),h=Qn("invert"),f=Qn("gap"),p=Qn("gradientColorStops"),y=Qn("gradientColorStopPositions"),v=Qn("inset"),g=Qn("margin"),b=Qn("opacity"),j=Qn("padding"),w=Qn("saturate"),C=Qn("scale"),E=Qn("sepia"),N=Qn("skew"),A=Qn("space"),_=Qn("translate"),k=function(){return["auto","contain","none"]},F=function(){return["auto","hidden","clip","visible","scroll"]},I=function(){return["auto",qr,e]},T=function(){return[qr,e]},R=function(){return["",Kl]},O=function(){return["auto",lm,qr]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},K=function(){return["start","end","center","between","around","evenly","stretch"]},Y=function(){return["","0",qr]},J=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},H=function(){return[lm,Xy]},$=function(){return[lm,qr]};return{cacheSize:500,theme:{colors:[zv],spacing:[Kl],blur:["none","",jh,qr],brightness:H(),borderColor:[t],borderRadius:["none","","full",jh,qr],borderSpacing:T(),borderWidth:R(),contrast:H(),grayscale:Y(),hueRotate:$(),invert:Y(),gap:T(),gradientColorStops:[t],gradientColorStopPositions:[dQ,QC],inset:I(),margin:I(),opacity:H(),padding:T(),saturate:H(),scale:H(),sepia:Y(),skew:$(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",qr]}],container:["container"],columns:[{columns:[jh]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[qr])}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bv]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qr]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Bv]}],"grid-cols":[{"grid-cols":[zv]}],"col-start-end":[{col:["auto",{span:["full",Bv]},qr]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[zv]}],"row-start-end":[{row:["auto",{span:[Bv]},qr]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qr]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(K())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(K(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(K(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",qr,e]}],"min-w":[{"min-w":["min","max","fit",qr,Kl]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[jh]},jh,qr]}],h:[{h:[qr,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",qr,Kl]}],"max-h":[{"max-h":[qr,e,"min","max","fit"]}],"font-size":[{text:["base",jh,QC]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xy]}],"font-family":[{font:[zv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qr]}],"line-clamp":[{"line-clamp":["none",lm,Xy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qr,Kl]}],"list-image":[{"list-image":["none",qr]}],"list-style-type":[{list:["none","disc","decimal",qr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Kl]}],"underline-offset":[{"underline-offset":["auto",qr,Kl]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[lQ])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cQ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[qr,Kl]}],"outline-w":[{outline:[Kl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Kl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",jh,uQ]}],"shadow-color":[{shadow:[zv]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jh,qr]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qr]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",qr]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",qr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Bv,qr]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qr]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qr]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qr]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kl,Xy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var gQ=tQ(pQ);function pt(...t){return gQ(X$(t))}function Fe(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function wt(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t))}function hx(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t))}function rn(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("Failed to save to localStorage:",r)}}function Bn(t,e){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error("Failed to load from localStorage:",r),e}}function vQ(t){try{localStorage.removeItem(t)}catch(e){console.error("Failed to remove from localStorage:",e)}}function xQ(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function JC(t){const e=xQ(t);return e?(.299*e.r+.587*e.g+.114*e.b)/255>.5:!1}const yQ=CZ,oB=S.forwardRef(({className:t,...e},r)=>n.jsx(U$,{ref:r,className:pt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));oB.displayName=U$.displayName;const bQ=z0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lB=S.forwardRef(({className:t,variant:e,...r},s)=>n.jsx(V$,{ref:s,className:pt(bQ({variant:e}),t),...r}));lB.displayName=V$.displayName;const jQ=S.forwardRef(({className:t,...e},r)=>n.jsx(G$,{ref:r,className:pt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));jQ.displayName=G$.displayName;const cB=S.forwardRef(({className:t,...e},r)=>n.jsx(K$,{ref:r,className:pt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(Cr,{className:"h-4 w-4"})}));cB.displayName=K$.displayName;const dB=S.forwardRef(({className:t,...e},r)=>n.jsx(H$,{ref:r,className:pt("text-sm font-semibold",t),...e}));dB.displayName=H$.displayName;const uB=S.forwardRef(({className:t,...e},r)=>n.jsx(W$,{ref:r,className:pt("text-sm opacity-90",t),...e}));uB.displayName=W$.displayName;const wQ=1,NQ=1e6;let R2=0;function SQ(){return R2=(R2+1)%Number.MAX_SAFE_INTEGER,R2.toString()}const L2=new Map,Y3=t=>{if(L2.has(t))return;const e=setTimeout(()=>{L2.delete(t),fx({type:"REMOVE_TOAST",toastId:t})},NQ);L2.set(t,e)},AQ=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,wQ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Y3(r):t.toasts.forEach(s=>{Y3(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Db=[];let kb={toasts:[]};function fx(t){kb=AQ(kb,t),Db.forEach(e=>{e(kb)})}function CQ({...t}){const e=SQ(),r=i=>fx({type:"UPDATE_TOAST",toast:{...i,id:e}}),s=()=>fx({type:"DISMISS_TOAST",toastId:e});return fx({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||s()}}}),{id:e,dismiss:s,update:r}}function Gt(){const[t,e]=S.useState(kb);return S.useEffect(()=>(Db.push(e),()=>{const r=Db.indexOf(e);r>-1&&Db.splice(r,1)}),[t]),{...t,toast:CQ,dismiss:r=>fx({type:"DISMISS_TOAST",toastId:r})}}function EQ(){const{toasts:t}=Gt();return n.jsxs(yQ,{children:[t.map(function({id:e,title:r,description:s,action:i,...a}){return n.jsxs(lB,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(dB,{children:r}),s&&n.jsx(uB,{children:s})]}),i,n.jsx(cB,{})]},e)}),n.jsx(oB,{})]})}var mx=(t=>(t.ADMIN="admin",t.MANAGER="manager",t.SALES="sales",t.SERVICE="service",t.USER="user",t))(mx||{}),pl=(t=>(t.TEXT="text",t.NUMBER="number",t.DATE="date",t.BOOLEAN="boolean",t.SELECT="select",t.MULTISELECT="multiselect",t))(pl||{}),Fi=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(Fi||{}),ur=(t=>(t.RV="rv",t.MOTORHOME="motorhome",t.TRAVEL_TRAILER="travel_trailer",t.FIFTH_WHEEL="fifth_wheel",t.TOY_HAULER="toy_hauler",t.SINGLE_WIDE="single_wide",t.DOUBLE_WIDE="double_wide",t.TRIPLE_WIDE="triple_wide",t.PARK_MODEL="park_model",t.MODULAR_HOME="modular_home",t))(ur||{}),Or=(t=>(t.AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t.SERVICE="service",t.DELIVERED="delivered",t))(Or||{}),gl=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.ACCEPTED="accepted",t.REJECTED="rejected",t.EXPIRED="expired",t))(gl||{}),zi=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.URGENT="urgent",t))(zi||{}),ps=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.WAITING_PARTS="waiting_parts",t.COMPLETED="completed",t.CANCELLED="cancelled",t))(ps||{}),_r=(t=>(t.SCHEDULED="scheduled",t.IN_TRANSIT="in_transit",t.DELIVERED="delivered",t.CANCELLED="cancelled",t))(_r||{}),tn=(t=>(t.FLAT="flat",t.PERCENTAGE="percentage",t.TIERED="tiered",t))(tn||{}),fr=(t=>(t.PENDING="pending",t.APPROVED="approved",t.PAID="paid",t.CANCELLED="cancelled",t))(fr||{}),xr=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.PAID="paid",t.OVERDUE="overdue",t.CANCELLED="cancelled",t))(xr||{}),Jc=(t=>(t.CASH="cash",t.CHECK="check",t.CREDIT_CARD="credit_card",t.BANK_TRANSFER="bank_transfer",t.FINANCING="financing",t))(Jc||{}),cu=(t=>(t.PENDING="pending",t.PROCESSING="processing",t.COMPLETED="completed",t.FAILED="failed",t.REFUNDED="refunded",t))(cu||{}),Oo=(t=>(t.ACTIVE="active",t.CURRENT="current",t.LATE="late",t.DEFAULT="default",t.PAID_OFF="paid_off",t.CANCELLED="cancelled",t))(Oo||{}),su=(t=>(t.PAYMENT="payment",t.STATUS_CHANGE="status_change",t.RATE_CHANGE="rate_change",t.NOTE_ADDED="note_added",t.LATE_FEE="late_fee",t.PAYOFF="payoff",t))(su||{}),On=(t=>(t.SALES="sales",t.INVENTORY="inventory",t.SERVICE="service",t.FINANCIAL="financial",t.CUSTOM="custom",t))(On||{});const hB=S.createContext(void 0);function Qg(){const t=S.useContext(hB);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function PQ({children:t}){const[e,r]=S.useState(null),[s,i]=S.useState(!0);S.useEffect(()=>{Bn("auth_token",null)&&r({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:mx.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),i(!1)},[]);const d={user:e,login:async(u,h)=>{i(!0);try{if(await new Promise(f=>setTimeout(f,1e3)),u==="admin@renterinsight.com"&&h==="password"){const f={id:"1",email:u,name:"Admin User",role:mx.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};r(f),rn("auth_token","mock-token")}else throw new Error("Invalid credentials")}catch(f){throw console.error("Login error:",f),new Error("Login failed")}finally{i(!1)}},logout:()=>{r(null),vQ("auth_token")},isLoading:s,hasPermission:(u,h)=>e?e.permissions.some(f=>(f.resource==="*"||f.resource===u)&&(f.action==="*"||f.action===h)):!1,hasRole:u=>e?e.role===u||e.role===mx.ADMIN:!1};return n.jsx(hB.Provider,{value:d,children:t})}const fB=S.createContext(void 0);function lo(){const t=S.useContext(fB);if(t===void 0)throw new Error("useTenant must be used within a TenantProvider");return t}function TQ({children:t}){const[e,r]=S.useState(null);S.useEffect(()=>{const d=Bn("tenant",null);if(d)r(d);else{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};r(u),rn("tenant",u)}},[]),S.useEffect(()=>{e&&rn("tenant",e)},[e]);const c={tenant:e,getCustomFields:(d,u)=>e?.customFields.filter(h=>h.module===d&&(u?h.section===u:!0))||[],updateTenant:async d=>{if(!e)return;const u={...e,...d,settings:d.settings?{...e.settings,...d.settings}:e.settings,branding:d.branding?{...e.branding,...d.branding}:e.branding,customFields:d.customFields||e.customFields,updatedAt:new Date};r(u)},addCustomField:async d=>{if(!e)return;const u={...d,id:Math.random().toString(36).substr(2,9)},h={...e,customFields:[...e.customFields,u],updatedAt:new Date};r(h)},updateCustomField:async(d,u)=>{if(!e)return;const h=e.customFields.map(p=>p.id===d?{...p,...u}:p),f={...e,customFields:h,updatedAt:new Date};r(f)},deleteCustomField:async d=>{if(!e)return;const u=e.customFields.filter(f=>f.id!==d),h={...e,customFields:u,updatedAt:new Date};r(h)}};return n.jsx(fB.Provider,{value:c,children:t})}const _Q={theme:"system",setTheme:()=>null},IQ=S.createContext(_Q);function DQ({children:t,defaultTheme:e="system",storageKey:r="vite-ui-theme",...s}){const[i,a]=S.useState(()=>localStorage.getItem(r)||e);S.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),i==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(i)},[i]);const o={theme:i,setTheme:l=>{localStorage.setItem(r,l),a(l)}};return n.jsx(IQ.Provider,{...s,value:o,children:t})}const kQ=[{id:"crm-sales",title:"CRM & Sales",icon:gs,hasSubmenu:!0,items:[{title:"Prospecting",href:"/crm",icon:gs},{title:"Sales Deals",href:"/deals",icon:yr},{title:"Quote Builder",href:"/quotes",icon:yr}]},{id:"inventory-operations",title:"Inventory & Operations",icon:Ai,hasSubmenu:!0,items:[{title:"Inventory",href:"/inventory",icon:Ai},{title:"PDI Checklist",href:"/pdi",icon:Mx},{title:"Delivery Tracker",href:"/delivery",icon:io}]},{id:"finance-agreements",title:"Finance & Agreements",icon:rr,hasSubmenu:!0,items:[{title:"Finance",href:"/finance",icon:rr},{title:"Client Applications",href:"/client-applications",icon:U3},{title:"Agreements",href:"/agreements",icon:U3},{title:"Invoices",href:"/invoices",icon:so}]},{id:"service-support",title:"Service & Support",icon:xl,hasSubmenu:!0,items:[{title:"Service Ops",href:"/service",icon:xl},{title:"Client Portal Admin",href:"/portal",icon:V4}]},{id:"management",title:"Management",icon:Es,hasSubmenu:!0,items:[{title:"Commission Engine",href:"/commissions",icon:Aj},{title:"Reporting Suite",href:"/reports",icon:Es}]},{id:"administration",title:"Administration",icon:Nl,hasSubmenu:!0,items:[{title:"Company Settings",href:"/settings",icon:fg},{title:"Platform Admin",href:"/admin",icon:H4}]}];function OQ(){const{tenant:t}=lo(),e=of(),[r,s]=S.useState(null),i=t?.branding?.sideMenuColor===null||!t?.branding?.sideMenuColor,a=i?"var(--background)":t?.branding?.sideMenuColor,o=i||t?.branding?.sideMenuColor&&JC(t.branding.sideMenuColor)?"var(--foreground)":"white",l=i||t?.branding.sideMenuColor&&JC(t.branding.sideMenuColor),c=u=>{s(r===u?null:u)},d=u=>e.pathname===u||e.pathname.startsWith(u+"/");return n.jsxs("div",{className:"w-64 h-full border-r flex flex-col",style:{backgroundColor:a,color:o},children:[n.jsx("div",{className:"px-4 py-4 border-b",children:t?.branding?.logo?n.jsx("img",{src:t.branding.logo,alt:"Company Logo",className:"max-h-10 object-contain h-8 w-auto"}):n.jsx("div",{className:"text-lg font-semibold",children:t?.name||"Renter Insight"})}),n.jsxs("nav",{className:"flex-1 space-y-1 px-2 py-4",children:[n.jsxs(UC,{to:"/",className:pt("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",d("/")&&e.pathname==="/"?"bg-slate-800 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[n.jsx(Es,{className:"mr-3 h-5 w-5"}),"Dashboard"]}),kQ.map(u=>n.jsxs("div",{children:[n.jsxs("button",{onClick:()=>c(u.id),className:pt("group flex w-full items-center justify-between px-2 py-2 text-left text-sm font-medium rounded-md transition-colors",r===u.id?"bg-slate-800 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(u.icon,{className:"mr-3 h-5 w-5"}),u.title]}),u.hasSubmenu&&(r===u.id?n.jsx(U4,{className:"h-4 w-4"}):n.jsx(_Z,{className:"h-4 w-4"}))]}),u.hasSubmenu&&r===u.id&&n.jsx("div",{className:"ml-4 mt-1 space-y-1",children:u.items?.map(h=>n.jsxs(UC,{to:h.href,className:pt("group flex items-center px-2 py-2 text-sm rounded-md transition-colors",d(h.href)?"bg-slate-700 text-white":l?"text-foreground hover:bg-accent hover:text-accent-foreground":"text-white/80 hover:bg-white/10 hover:text-white"),children:[n.jsx(h.icon,{className:"mr-3 h-4 w-4"}),h.title]},h.href))})]},u.id))]})]})}const RQ=z0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=S.forwardRef(({className:t,variant:e,size:r,asChild:s=!1,...i},a)=>{const o=s?MX:"button";return n.jsx(o,{className:pt(RQ({variant:e,size:r,className:t})),ref:a,...i})});re.displayName="Button";const Te=S.forwardRef(({className:t,type:e,...r},s)=>n.jsx("input",{type:e,className:pt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));Te.displayName="Input";function LQ(){const{tenant:t}=lo(),{user:e,logout:r}=Qg();return n.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"relative",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Te,{type:"text",placeholder:"Search...",className:"pl-10 w-80 bg-gray-50 border-gray-200 focus:bg-white"})]})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(re,{variant:"ghost",size:"sm",children:n.jsx(q4,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx(vs,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{className:"hidden md:block",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.name}),n.jsx("p",{className:"text-xs text-gray-500",children:e?.email})]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Q$,{className:"h-4 w-4"})})]})]})]})})}function MQ({children:t}){const[e,r]=S.useState(!1);return n.jsxs("div",{className:"flex h-screen overflow-hidden",children:[n.jsx(OQ,{isOpen:e,onClose:()=>r(!1)}),n.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[n.jsx(LQ,{onMenuButtonClick:()=>r(!0)}),n.jsx("main",{className:"flex-1 overflow-y-auto bg-background py-6",children:n.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}const me=S.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:pt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));me.displayName="Card";const je=S.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:pt("flex flex-col space-y-1.5 p-6",t),...e}));je.displayName="CardHeader";const Ne=S.forwardRef(({className:t,...e},r)=>n.jsx("h3",{ref:r,className:pt("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ne.displayName="CardTitle";const Ge=S.forwardRef(({className:t,...e},r)=>n.jsx("p",{ref:r,className:pt("text-sm text-muted-foreground",t),...e}));Ge.displayName="CardDescription";const pe=S.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:pt("p-6 pt-0",t),...e}));pe.displayName="CardContent";const FQ=S.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:pt("flex items-center p-6 pt-0",t),...e}));FQ.displayName="CardFooter";const kr=S.forwardRef(({className:t,...e},r)=>n.jsx("textarea",{className:pt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));kr.displayName="Textarea";function yt(){return yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},yt.apply(null,arguments)}function X3(t,[e,r]){return Math.min(r,Math.max(e,t))}function Ia(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function $Q(t,e=[]){let r=[];function s(a,o){const l=S.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:p,...y}=h,v=f?.[t][c]||l,g=S.useMemo(()=>y,Object.values(y));return S.createElement(v.Provider,{value:g},p)}function u(h,f){const p=f?.[t][c]||l,y=S.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=r.map(o=>S.createContext(o));return function(l){const c=l?.[t]||a;return S.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[s,BQ(i,...e)]}function BQ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function zQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function mB(...t){return e=>t.forEach(r=>zQ(r,e))}function Z3(...t){return S.useCallback(mB(...t),t)}const eE=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(UQ);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(tE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(tE,yt({},s,{ref:e}),r)});eE.displayName="Slot";const tE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...VQ(s,r.props),ref:e?mB(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});tE.displayName="SlotClone";const qQ=({children:t})=>S.createElement(S.Fragment,null,t);function UQ(t){return S.isValidElement(t)&&t.type===qQ}function VQ(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}function HQ(t){const e=t+"CollectionProvider",[r,s]=$Q(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:v}=p,g=be.useRef(null),b=be.useRef(new Map).current;return be.createElement(i,{scope:y,itemMap:b,collectionRef:g},v)},l=t+"CollectionSlot",c=be.forwardRef((p,y)=>{const{scope:v,children:g}=p,b=a(l,v),j=Z3(y,b.collectionRef);return be.createElement(eE,{ref:j},g)}),d=t+"CollectionItemSlot",u="data-radix-collection-item",h=be.forwardRef((p,y)=>{const{scope:v,children:g,...b}=p,j=be.useRef(null),w=Z3(y,j),C=a(d,v);return be.useEffect(()=>(C.itemMap.set(j,{ref:j,...b}),()=>void C.itemMap.delete(j))),be.createElement(eE,{[u]:"",ref:w},g)});function f(p){const y=a(t+"CollectionConsumer",p);return be.useCallback(()=>{const g=y.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((C,E)=>b.indexOf(C.ref.current)-b.indexOf(E.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},f,s]}function WQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function pB(...t){return e=>t.forEach(r=>WQ(r,e))}function pd(...t){return S.useCallback(pB(...t),t)}function GQ(t,e=[]){let r=[];function s(a,o){const l=S.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:p,...y}=h,v=f?.[t][c]||l,g=S.useMemo(()=>y,Object.values(y));return S.createElement(v.Provider,{value:g},p)}function u(h,f){const p=f?.[t][c]||l,y=S.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=r.map(o=>S.createContext(o));return function(l){const c=l?.[t]||a;return S.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[s,KQ(i,...e)]}function KQ(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}const YQ=S.createContext(void 0);function XQ(t){const e=S.useContext(YQ);return t||e||"ltr"}function M2(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t?.(i),r===!1||!i.defaultPrevented)return e?.(i)}}function ZQ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function gB(...t){return e=>t.forEach(r=>ZQ(r,e))}function QQ(...t){return S.useCallback(gB(...t),t)}const vB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(eJ);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(rE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(rE,yt({},s,{ref:e}),r)});vB.displayName="Slot";const rE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...tJ(s,r.props),ref:e?gB(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});rE.displayName="SlotClone";const JQ=({children:t})=>S.createElement(S.Fragment,null,t);function eJ(t){return S.isValidElement(t)&&t.type===JQ}function tJ(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const rJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nJ=rJ.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?vB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function sJ(t,e){t&&sf.flushSync(()=>t.dispatchEvent(e))}function xu(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...r)=>{var s;return(s=e.current)===null||s===void 0?void 0:s.call(e,...r)},[])}function iJ(t,e=globalThis?.document){const r=xu(t);S.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)},[r,e])}const nE="dismissableLayer.update",aJ="dismissableLayer.pointerDownOutside",oJ="dismissableLayer.focusOutside";let Q3;const lJ=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cJ=S.forwardRef((t,e)=>{var r;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=t,u=S.useContext(lJ),[h,f]=S.useState(null),p=(r=h?.ownerDocument)!==null&&r!==void 0?r:globalThis?.document,[,y]=S.useState({}),v=QQ(e,_=>f(_)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=g.indexOf(b),w=h?g.indexOf(h):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,E=w>=j,N=dJ(_=>{const k=_.target,F=[...u.branches].some(I=>I.contains(k));!E||F||(a?.(_),l?.(_),_.defaultPrevented||c?.())},p),A=uJ(_=>{const k=_.target;[...u.branches].some(I=>I.contains(k))||(o?.(_),l?.(_),_.defaultPrevented||c?.())},p);return iJ(_=>{w===u.layers.size-1&&(i?.(_),!_.defaultPrevented&&c&&(_.preventDefault(),c()))},p),S.useEffect(()=>{if(h)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Q3=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),J3(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Q3)}},[h,p,s,u]),S.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),J3())},[h,u]),S.useEffect(()=>{const _=()=>y({});return document.addEventListener(nE,_),()=>document.removeEventListener(nE,_)},[]),S.createElement(nJ.div,yt({},d,{ref:v,style:{pointerEvents:C?E?"auto":"none":void 0,...t.style},onFocusCapture:M2(t.onFocusCapture,A.onFocusCapture),onBlurCapture:M2(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:M2(t.onPointerDownCapture,N.onPointerDownCapture)}))});function dJ(t,e=globalThis?.document){const r=xu(t),s=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let d=function(){xB(aJ,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>s.current=!0}}function uJ(t,e=globalThis?.document){const r=xu(t),s=S.useRef(!1);return S.useEffect(()=>{const i=a=>{a.target&&!s.current&&xB(oJ,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function J3(){const t=new CustomEvent(nE);document.dispatchEvent(t)}function xB(t,e,r,{discrete:s}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),s?sJ(i,a):i.dispatchEvent(a)}let F2=0;function hJ(){S.useEffect(()=>{var t,e;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=r[0])!==null&&t!==void 0?t:eD()),document.body.insertAdjacentElement("beforeend",(e=r[1])!==null&&e!==void 0?e:eD()),F2++,()=>{F2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),F2--}},[])}function eD(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}function fJ(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function yB(...t){return e=>t.forEach(r=>fJ(r,e))}function mJ(...t){return S.useCallback(yB(...t),t)}const bB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(gJ);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(sE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(sE,yt({},s,{ref:e}),r)});bB.displayName="Slot";const sE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...vJ(s,r.props),ref:e?yB(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});sE.displayName="SlotClone";const pJ=({children:t})=>S.createElement(S.Fragment,null,t);function gJ(t){return S.isValidElement(t)&&t.type===pJ}function vJ(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const xJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],yJ=xJ.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?bB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$2="focusScope.autoFocusOnMount",B2="focusScope.autoFocusOnUnmount",tD={bubbles:!1,cancelable:!0},bJ=S.forwardRef((t,e)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=S.useState(null),d=xu(i),u=xu(a),h=S.useRef(null),f=mJ(e,v=>c(v)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(s){let v=function(w){if(p.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:Sh(h.current,{select:!0})},g=function(w){if(p.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||Sh(h.current,{select:!0}))},b=function(w){const C=document.activeElement;for(const E of w)E.removedNodes.length>0&&(l!=null&&l.contains(C)||Sh(l))};document.addEventListener("focusin",v),document.addEventListener("focusout",g);const j=new MutationObserver(b);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",g),j.disconnect()}}},[s,l,p.paused]),S.useEffect(()=>{if(l){nD.add(p);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent($2,tD);l.addEventListener($2,d),l.dispatchEvent(b),b.defaultPrevented||(jJ(CJ(jB(l)),{select:!0}),document.activeElement===v&&Sh(l))}return()=>{l.removeEventListener($2,d),setTimeout(()=>{const b=new CustomEvent(B2,tD);l.addEventListener(B2,u),l.dispatchEvent(b),b.defaultPrevented||Sh(v??document.body,{select:!0}),l.removeEventListener(B2,u),nD.remove(p)},0)}}},[l,d,u,p]);const y=S.useCallback(v=>{if(!r&&!s||p.paused)return;const g=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(g&&b){const j=v.currentTarget,[w,C]=wJ(j);w&&C?!v.shiftKey&&b===C?(v.preventDefault(),r&&Sh(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&Sh(C,{select:!0})):b===j&&v.preventDefault()}},[r,s,p.paused]);return S.createElement(yJ.div,yt({tabIndex:-1},o,{ref:f,onKeyDown:y}))});function jJ(t,{select:e=!1}={}){const r=document.activeElement;for(const s of t)if(Sh(s,{select:e}),document.activeElement!==r)return}function wJ(t){const e=jB(t),r=rD(e,t),s=rD(e.reverse(),t);return[r,s]}function jB(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function rD(t,e){for(const r of t)if(!NJ(r,{upTo:e}))return r}function NJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function SJ(t){return t instanceof HTMLInputElement&&"select"in t}function Sh(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&SJ(t)&&e&&t.select()}}const nD=AJ();function AJ(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=sD(t,e),t.unshift(e)},remove(e){var r;t=sD(t,e),(r=t[0])===null||r===void 0||r.resume()}}}function sD(t,e){const r=[...t],s=r.indexOf(e);return s!==-1&&r.splice(s,1),r}function CJ(t){return t.filter(e=>e.tagName!=="A")}const EJ=globalThis?.document?S.useLayoutEffect:()=>{},PJ=Yg.useId||(()=>{});let TJ=0;function wB(t){const[e,r]=S.useState(PJ());return EJ(()=>{r(s=>s??String(TJ++))},[t]),e?`radix-${e}`:""}const _J=["top","right","bottom","left"],Zh=Math.min,Lo=Math.max,Wb=Math.round,Zy=Math.floor,ad=t=>({x:t,y:t}),IJ={left:"right",right:"left",bottom:"top",top:"bottom"},DJ={start:"end",end:"start"};function iE(t,e,r){return Lo(t,Zh(e,r))}function yu(t,e){return typeof t=="function"?t(e):t}function bu(t){return t.split("-")[0]}function Jg(t){return t.split("-")[1]}function K4(t){return t==="x"?"y":"x"}function Y4(t){return t==="y"?"height":"width"}const kJ=new Set(["top","bottom"]);function rd(t){return kJ.has(bu(t))?"y":"x"}function X4(t){return K4(rd(t))}function OJ(t,e,r){r===void 0&&(r=!1);const s=Jg(t),i=X4(t),a=Y4(i);let o=i==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Gb(o)),[o,Gb(o)]}function RJ(t){const e=Gb(t);return[aE(t),e,aE(e)]}function aE(t){return t.replace(/start|end/g,e=>DJ[e])}const iD=["left","right"],aD=["right","left"],LJ=["top","bottom"],MJ=["bottom","top"];function FJ(t,e,r){switch(t){case"top":case"bottom":return r?e?aD:iD:e?iD:aD;case"left":case"right":return e?LJ:MJ;default:return[]}}function $J(t,e,r,s){const i=Jg(t);let a=FJ(bu(t),r==="start",s);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(aE)))),a}function Gb(t){return t.replace(/left|right|bottom|top/g,e=>IJ[e])}function BJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function NB(t){return typeof t!="number"?BJ(t):{top:t,right:t,bottom:t,left:t}}function Kb(t){const{x:e,y:r,width:s,height:i}=t;return{width:s,height:i,top:r,left:e,right:e+s,bottom:r+i,x:e,y:r}}function oD(t,e,r){let{reference:s,floating:i}=t;const a=rd(e),o=X4(e),l=Y4(o),c=bu(e),d=a==="y",u=s.x+s.width/2-i.width/2,h=s.y+s.height/2-i.height/2,f=s[l]/2-i[l]/2;let p;switch(c){case"top":p={x:u,y:s.y-i.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:h};break;case"left":p={x:s.x-i.width,y:h};break;default:p={x:s.x,y:s.y}}switch(Jg(e)){case"start":p[o]-=f*(r&&d?-1:1);break;case"end":p[o]+=f*(r&&d?-1:1);break}return p}const zJ=async(t,e,r)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=oD(d,s,c),f=s,p={},y=0;for(let v=0;v<l.length;v++){const{name:g,fn:b}=l[v],{x:j,y:w,data:C,reset:E}=await b({x:u,y:h,initialPlacement:s,placement:f,strategy:i,middlewareData:p,rects:d,platform:o,elements:{reference:t,floating:e}});u=j??u,h=w??h,p={...p,[g]:{...p[g],...C}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(d=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:h}=oD(d,f,c)),v=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function Fx(t,e){var r;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=yu(e,t),y=NB(p),g=l[f?h==="floating"?"reference":"floating":h],b=Kb(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(g)))==null||r?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),j=h==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},E=Kb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:w,strategy:c}):j);return{top:(b.top-E.top+y.top)/C.y,bottom:(E.bottom-b.bottom+y.bottom)/C.y,left:(b.left-E.left+y.left)/C.x,right:(E.right-b.right+y.right)/C.x}}const qJ=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=yu(t,e)||{};if(d==null)return{};const h=NB(u),f={x:r,y:s},p=X4(i),y=Y4(p),v=await o.getDimensions(d),g=p==="y",b=g?"top":"left",j=g?"bottom":"right",w=g?"clientHeight":"clientWidth",C=a.reference[y]+a.reference[p]-f[p]-a.floating[y],E=f[p]-a.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let A=N?N[w]:0;(!A||!await(o.isElement==null?void 0:o.isElement(N)))&&(A=l.floating[w]||a.floating[y]);const _=C/2-E/2,k=A/2-v[y]/2-1,F=Zh(h[b],k),I=Zh(h[j],k),T=F,R=A-v[y]-I,O=A/2-v[y]/2+_,z=iE(T,O,R),q=!c.arrow&&Jg(i)!=null&&O!==z&&a.reference[y]/2-(O<T?F:I)-v[y]/2<0,B=q?O<T?O-T:O-R:0;return{[p]:f[p]+B,data:{[p]:z,centerOffset:O-z-B,...q&&{alignmentOffset:B}},reset:q}}}),UJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...g}=yu(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const b=bu(i),j=rd(l),w=bu(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=f||(w||!v?[Gb(l)]:RJ(l)),N=y!=="none";!f&&N&&E.push(...$J(l,v,y,C));const A=[l,...E],_=await Fx(e,g),k=[];let F=((s=a.flip)==null?void 0:s.overflows)||[];if(u&&k.push(_[b]),h){const O=OJ(i,o,C);k.push(_[O[0]],_[O[1]])}if(F=[...F,{placement:i,overflows:k}],!k.every(O=>O<=0)){var I,T;const O=(((I=a.flip)==null?void 0:I.index)||0)+1,z=A[O];if(z&&(!(h==="alignment"?j!==rd(z):!1)||F.every(K=>K.overflows[0]>0&&rd(K.placement)===j)))return{data:{index:O,overflows:F},reset:{placement:z}};let q=(T=F.filter(B=>B.overflows[0]<=0).sort((B,K)=>B.overflows[1]-K.overflows[1])[0])==null?void 0:T.placement;if(!q)switch(p){case"bestFit":{var R;const B=(R=F.filter(K=>{if(N){const Y=rd(K.placement);return Y===j||Y==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Y=>Y>0).reduce((Y,J)=>Y+J,0)]).sort((K,Y)=>K[1]-Y[1])[0])==null?void 0:R[0];B&&(q=B);break}case"initialPlacement":q=l;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function lD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cD(t){return _J.some(e=>t[e]>=0)}const VJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:s="referenceHidden",...i}=yu(t,e);switch(s){case"referenceHidden":{const a=await Fx(e,{...i,elementContext:"reference"}),o=lD(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:cD(o)}}}case"escaped":{const a=await Fx(e,{...i,altBoundary:!0}),o=lD(a,r.floating);return{data:{escapedOffsets:o,escaped:cD(o)}}}default:return{}}}}},SB=new Set(["left","top"]);async function HJ(t,e){const{placement:r,platform:s,elements:i}=t,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=bu(r),l=Jg(r),c=rd(r)==="y",d=SB.has(o)?-1:1,u=a&&c?-1:1,h=yu(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*u,y:f*d}:{x:f*d,y:p*u}}const WJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,s;const{x:i,y:a,placement:o,middlewareData:l}=e,c=await HJ(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},GJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:b,y:j}=g;return{x:b,y:j}}},...c}=yu(t,e),d={x:r,y:s},u=await Fx(e,c),h=rd(bu(i)),f=K4(h);let p=d[f],y=d[h];if(a){const g=f==="y"?"top":"left",b=f==="y"?"bottom":"right",j=p+u[g],w=p-u[b];p=iE(j,p,w)}if(o){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",j=y+u[g],w=y-u[b];y=iE(j,y,w)}const v=l.fn({...e,[f]:p,[h]:y});return{...v,data:{x:v.x-r,y:v.y-s,enabled:{[f]:a,[h]:o}}}}}},KJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:s,placement:i,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=yu(t,e),u={x:r,y:s},h=rd(i),f=K4(h);let p=u[f],y=u[h];const v=yu(l,e),g=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=f==="y"?"height":"width",C=a.reference[f]-a.floating[w]+g.mainAxis,E=a.reference[f]+a.reference[w]-g.mainAxis;p<C?p=C:p>E&&(p=E)}if(d){var b,j;const w=f==="y"?"width":"height",C=SB.has(bu(i)),E=a.reference[h]-a.floating[w]+(C&&((b=o.offset)==null?void 0:b[h])||0)+(C?0:g.crossAxis),N=a.reference[h]+a.reference[w]+(C?0:((j=o.offset)==null?void 0:j[h])||0)-(C?g.crossAxis:0);y<E?y=E:y>N&&(y=N)}return{[f]:p,[h]:y}}}},YJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,s;const{placement:i,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...d}=yu(t,e),u=await Fx(e,d),h=bu(i),f=Jg(i),p=rd(i)==="y",{width:y,height:v}=a.floating;let g,b;h==="top"||h==="bottom"?(g=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,g=f==="end"?"top":"bottom");const j=v-u.top-u.bottom,w=y-u.left-u.right,C=Zh(v-u[g],j),E=Zh(y-u[b],w),N=!e.middlewareData.shift;let A=C,_=E;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(_=w),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(A=j),N&&!f){const F=Lo(u.left,0),I=Lo(u.right,0),T=Lo(u.top,0),R=Lo(u.bottom,0);p?_=y-2*(F!==0||I!==0?F+I:Lo(u.left,u.right)):A=v-2*(T!==0||R!==0?T+R:Lo(u.top,u.bottom))}await c({...e,availableWidth:_,availableHeight:A});const k=await o.getDimensions(l.floating);return y!==k.width||v!==k.height?{reset:{rects:!0}}:{}}}};function Ej(){return typeof window<"u"}function ev(t){return AB(t)?(t.nodeName||"").toLowerCase():"#document"}function qo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gd(t){var e;return(e=(AB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AB(t){return Ej()?t instanceof Node||t instanceof qo(t).Node:!1}function cc(t){return Ej()?t instanceof Element||t instanceof qo(t).Element:!1}function fd(t){return Ej()?t instanceof HTMLElement||t instanceof qo(t).HTMLElement:!1}function dD(t){return!Ej()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qo(t).ShadowRoot}const XJ=new Set(["inline","contents"]);function U0(t){const{overflow:e,overflowX:r,overflowY:s,display:i}=dc(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+r)&&!XJ.has(i)}const ZJ=new Set(["table","td","th"]);function QJ(t){return ZJ.has(ev(t))}const JJ=[":popover-open",":modal"];function Pj(t){return JJ.some(e=>{try{return t.matches(e)}catch{return!1}})}const eee=["transform","translate","scale","rotate","perspective"],tee=["transform","translate","scale","rotate","perspective","filter"],ree=["paint","layout","strict","content"];function Z4(t){const e=Q4(),r=cc(t)?dc(t):t;return eee.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||tee.some(s=>(r.willChange||"").includes(s))||ree.some(s=>(r.contain||"").includes(s))}function nee(t){let e=Qh(t);for(;fd(e)&&!pg(e);){if(Z4(e))return e;if(Pj(e))return null;e=Qh(e)}return null}function Q4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const see=new Set(["html","body","#document"]);function pg(t){return see.has(ev(t))}function dc(t){return qo(t).getComputedStyle(t)}function Tj(t){return cc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Qh(t){if(ev(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dD(t)&&t.host||gd(t);return dD(e)?e.host:e}function CB(t){const e=Qh(t);return pg(e)?t.ownerDocument?t.ownerDocument.body:t.body:fd(e)&&U0(e)?e:CB(e)}function $x(t,e,r){var s;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=CB(t),a=i===((s=t.ownerDocument)==null?void 0:s.body),o=qo(i);if(a){const l=oE(o);return e.concat(o,o.visualViewport||[],U0(i)?i:[],l&&r?$x(l):[])}return e.concat(i,$x(i,[],r))}function oE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function EB(t){const e=dc(t);let r=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=fd(t),a=i?t.offsetWidth:r,o=i?t.offsetHeight:s,l=Wb(r)!==a||Wb(s)!==o;return l&&(r=a,s=o),{width:r,height:s,$:l}}function J4(t){return cc(t)?t:t.contextElement}function ig(t){const e=J4(t);if(!fd(e))return ad(1);const r=e.getBoundingClientRect(),{width:s,height:i,$:a}=EB(e);let o=(a?Wb(r.width):r.width)/s,l=(a?Wb(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const iee=ad(0);function PB(t){const e=qo(t);return!Q4()||!e.visualViewport?iee:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aee(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==qo(t)?!1:e}function Im(t,e,r,s){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=J4(t);let o=ad(1);e&&(s?cc(s)&&(o=ig(s)):o=ig(t));const l=aee(a,r,s)?PB(a):ad(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const f=qo(a),p=s&&cc(s)?qo(s):s;let y=f,v=oE(y);for(;v&&s&&p!==y;){const g=ig(v),b=v.getBoundingClientRect(),j=dc(v),w=b.left+(v.clientLeft+parseFloat(j.paddingLeft))*g.x,C=b.top+(v.clientTop+parseFloat(j.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,h*=g.y,c+=w,d+=C,y=qo(v),v=oE(y)}}return Kb({width:u,height:h,x:c,y:d})}function eT(t,e){const r=Tj(t).scrollLeft;return e?e.left+r:Im(gd(t)).left+r}function TB(t,e,r){r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=s.left+e.scrollLeft-(r?0:eT(t,s)),a=s.top+e.scrollTop;return{x:i,y:a}}function oee(t){let{elements:e,rect:r,offsetParent:s,strategy:i}=t;const a=i==="fixed",o=gd(s),l=e?Pj(e.floating):!1;if(s===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=ad(1);const u=ad(0),h=fd(s);if((h||!h&&!a)&&((ev(s)!=="body"||U0(o))&&(c=Tj(s)),fd(s))){const p=Im(s);d=ig(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const f=o&&!h&&!a?TB(o,c,!0):ad(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:r.y*d.y-c.scrollTop*d.y+u.y+f.y}}function lee(t){return Array.from(t.getClientRects())}function cee(t){const e=gd(t),r=Tj(t),s=t.ownerDocument.body,i=Lo(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=Lo(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+eT(t);const l=-r.scrollTop;return dc(s).direction==="rtl"&&(o+=Lo(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function dee(t,e){const r=qo(t),s=gd(t),i=r.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Q4();(!d||d&&e==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}const uee=new Set(["absolute","fixed"]);function hee(t,e){const r=Im(t,!0,e==="fixed"),s=r.top+t.clientTop,i=r.left+t.clientLeft,a=fd(t)?ig(t):ad(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function uD(t,e,r){let s;if(e==="viewport")s=dee(t,r);else if(e==="document")s=cee(gd(t));else if(cc(e))s=hee(e,r);else{const i=PB(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Kb(s)}function _B(t,e){const r=Qh(t);return r===e||!cc(r)||pg(r)?!1:dc(r).position==="fixed"||_B(r,e)}function fee(t,e){const r=e.get(t);if(r)return r;let s=$x(t,[],!1).filter(l=>cc(l)&&ev(l)!=="body"),i=null;const a=dc(t).position==="fixed";let o=a?Qh(t):t;for(;cc(o)&&!pg(o);){const l=dc(o),c=Z4(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&uee.has(i.position)||U0(o)&&!c&&_B(t,o))?s=s.filter(u=>u!==o):i=l,o=Qh(o)}return e.set(t,s),s}function mee(t){let{element:e,boundary:r,rootBoundary:s,strategy:i}=t;const o=[...r==="clippingAncestors"?Pj(e)?[]:fee(e,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,u)=>{const h=uD(e,u,i);return d.top=Lo(h.top,d.top),d.right=Zh(h.right,d.right),d.bottom=Zh(h.bottom,d.bottom),d.left=Lo(h.left,d.left),d},uD(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function pee(t){const{width:e,height:r}=EB(t);return{width:e,height:r}}function gee(t,e,r){const s=fd(e),i=gd(e),a=r==="fixed",o=Im(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=ad(0);function d(){c.x=eT(i)}if(s||!s&&!a)if((ev(e)!=="body"||U0(i))&&(l=Tj(e)),s){const p=Im(e,!0,a,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else i&&d();a&&!s&&i&&d();const u=i&&!s&&!a?TB(i,l):ad(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function z2(t){return dc(t).position==="static"}function hD(t,e){if(!fd(t)||dc(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return gd(t)===r&&(r=r.ownerDocument.body),r}function IB(t,e){const r=qo(t);if(Pj(t))return r;if(!fd(t)){let i=Qh(t);for(;i&&!pg(i);){if(cc(i)&&!z2(i))return i;i=Qh(i)}return r}let s=hD(t,e);for(;s&&QJ(s)&&z2(s);)s=hD(s,e);return s&&pg(s)&&z2(s)&&!Z4(s)?r:s||nee(t)||r}const vee=async function(t){const e=this.getOffsetParent||IB,r=this.getDimensions,s=await r(t.floating);return{reference:gee(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function xee(t){return dc(t).direction==="rtl"}const yee={convertOffsetParentRelativeRectToViewportRelativeRect:oee,getDocumentElement:gd,getClippingRect:mee,getOffsetParent:IB,getElementRects:vee,getClientRects:lee,getDimensions:pee,getScale:ig,isElement:cc,isRTL:xee};function DB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function bee(t,e){let r=null,s;const i=gd(t);function a(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=d;if(l||e(),!f||!p)return;const y=Zy(h),v=Zy(i.clientWidth-(u+f)),g=Zy(i.clientHeight-(h+p)),b=Zy(u),w={rootMargin:-y+"px "+-v+"px "+-g+"px "+-b+"px",threshold:Lo(0,Zh(1,c))||1};let C=!0;function E(N){const A=N[0].intersectionRatio;if(A!==c){if(!C)return o();A?o(!1,A):s=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!DB(d,t.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(E,{...w,root:i.ownerDocument})}catch{r=new IntersectionObserver(E,w)}r.observe(t)}return o(!0),a}function jee(t,e,r,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=J4(t),u=i||a?[...d?$x(d):[],...$x(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",r,{passive:!0}),a&&b.addEventListener("resize",r)});const h=d&&l?bee(d,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(b=>{let[j]=b;j&&j.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),r()}),d&&!c&&p.observe(d),p.observe(e));let y,v=c?Im(t):null;c&&g();function g(){const b=Im(t);v&&!DB(v,b)&&r(),v=b,y=requestAnimationFrame(g)}return r(),()=>{var b;u.forEach(j=>{i&&j.removeEventListener("scroll",r),a&&j.removeEventListener("resize",r)}),h?.(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const wee=WJ,Nee=GJ,See=UJ,Aee=YJ,Cee=VJ,fD=qJ,Eee=KJ,Pee=(t,e,r)=>{const s=new Map,i={platform:yee,...r},a={...i.platform,_c:s};return zJ(t,e,{...i,platform:a})};var Tee=typeof document<"u",_ee=function(){},Ob=Tee?S.useLayoutEffect:_ee;function Yb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(s=r;s--!==0;)if(!Yb(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=r;s--!==0;){const a=i[s];if(!(a==="_owner"&&t.$$typeof)&&!Yb(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function kB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mD(t,e){const r=kB(t);return Math.round(e*r)/r}function q2(t){const e=S.useRef(t);return Ob(()=>{e.current=t}),e}function Iee(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=S.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(s);Yb(f,s)||p(s);const[y,v]=S.useState(null),[g,b]=S.useState(null),j=S.useCallback(K=>{K!==N.current&&(N.current=K,v(K))},[]),w=S.useCallback(K=>{K!==A.current&&(A.current=K,b(K))},[]),C=a||y,E=o||g,N=S.useRef(null),A=S.useRef(null),_=S.useRef(u),k=c!=null,F=q2(c),I=q2(i),T=q2(d),R=S.useCallback(()=>{if(!N.current||!A.current)return;const K={placement:e,strategy:r,middleware:f};I.current&&(K.platform=I.current),Pee(N.current,A.current,K).then(Y=>{const J={...Y,isPositioned:T.current!==!1};O.current&&!Yb(_.current,J)&&(_.current=J,sf.flushSync(()=>{h(J)}))})},[f,e,r,I,T]);Ob(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[d]);const O=S.useRef(!1);Ob(()=>(O.current=!0,()=>{O.current=!1}),[]),Ob(()=>{if(C&&(N.current=C),E&&(A.current=E),C&&E){if(F.current)return F.current(C,E,R);R()}},[C,E,R,F,k]);const z=S.useMemo(()=>({reference:N,floating:A,setReference:j,setFloating:w}),[j,w]),q=S.useMemo(()=>({reference:C,floating:E}),[C,E]),B=S.useMemo(()=>{const K={position:r,left:0,top:0};if(!q.floating)return K;const Y=mD(q.floating,u.x),J=mD(q.floating,u.y);return l?{...K,transform:"translate("+Y+"px, "+J+"px)",...kB(q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Y,top:J}},[r,l,q.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:R,refs:z,elements:q,floatingStyles:B}),[u,R,z,q,B])}const Dee=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:s,padding:i}=typeof t=="function"?t(r):t;return s&&e(s)?s.current!=null?fD({element:s.current,padding:i}).fn(r):{}:s?fD({element:s,padding:i}).fn(r):{}}}},kee=(t,e)=>({...wee(t),options:[t,e]}),Oee=(t,e)=>({...Nee(t),options:[t,e]}),Ree=(t,e)=>({...Eee(t),options:[t,e]}),Lee=(t,e)=>({...See(t),options:[t,e]}),Mee=(t,e)=>({...Aee(t),options:[t,e]}),Fee=(t,e)=>({...Cee(t),options:[t,e]}),$ee=(t,e)=>({...Dee(t),options:[t,e]});function Bee(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function zee(...t){return e=>t.forEach(r=>Bee(r,e))}const OB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(Uee);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(lE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(lE,yt({},s,{ref:e}),r)});OB.displayName="Slot";const lE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...Vee(s,r.props),ref:e?zee(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});lE.displayName="SlotClone";const qee=({children:t})=>S.createElement(S.Fragment,null,t);function Uee(t){return S.isValidElement(t)&&t.type===qee}function Vee(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const Hee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],sPe=Hee.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?OB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Wee(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function RB(...t){return e=>t.forEach(r=>Wee(r,e))}function LB(...t){return S.useCallback(RB(...t),t)}function Gee(t,e=[]){let r=[];function s(a,o){const l=S.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:p,...y}=h,v=f?.[t][c]||l,g=S.useMemo(()=>y,Object.values(y));return S.createElement(v.Provider,{value:g},p)}function u(h,f){const p=f?.[t][c]||l,y=S.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,u]}const i=()=>{const a=r.map(o=>S.createContext(o));return function(l){const c=l?.[t]||a;return S.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return i.scopeName=t,[s,Kee(i,...e)]}function Kee(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}const MB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(Xee);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(cE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(cE,yt({},s,{ref:e}),r)});MB.displayName="Slot";const cE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...Zee(s,r.props),ref:e?RB(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});cE.displayName="SlotClone";const Yee=({children:t})=>S.createElement(S.Fragment,null,t);function Xee(t){return S.isValidElement(t)&&t.type===Yee}function Zee(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const Qee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],FB=Qee.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?MB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),dE=globalThis?.document?S.useLayoutEffect:()=>{};function Jee(t){const[e,r]=S.useState(void 0);return dE(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),e}const $B="Popper",[BB,zB]=Gee($B),[ete,qB]=BB($B),tte=t=>{const{__scopePopper:e,children:r}=t,[s,i]=S.useState(null);return S.createElement(ete,{scope:e,anchor:s,onAnchorChange:i},r)},rte="PopperAnchor",nte=S.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:s,...i}=t,a=qB(rte,r),o=S.useRef(null),l=LB(e,o);return S.useEffect(()=>{a.onAnchorChange(s?.current||o.current)}),s?null:S.createElement(FB.div,yt({},i,{ref:l}))}),UB="PopperContent",[ste,iPe]=BB(UB),ite=S.forwardRef((t,e)=>{var r,s,i,a,o,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:y=0,arrowPadding:v=0,collisionBoundary:g=[],collisionPadding:b=0,sticky:j="partial",hideWhenDetached:w=!1,avoidCollisions:C=!0,onPlaced:E,...N}=t,A=qB(UB,u),[_,k]=S.useState(null),F=LB(e,Ke=>k(Ke)),[I,T]=S.useState(null),R=Jee(I),O=(r=R?.width)!==null&&r!==void 0?r:0,z=(s=R?.height)!==null&&s!==void 0?s:0,q=h+(p!=="center"?"-"+p:""),B=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},K=Array.isArray(g)?g:[g],Y=K.length>0,J={padding:B,boundary:K.filter(ate),altBoundary:Y},{refs:H,floatingStyles:$,placement:W,isPositioned:te,middlewareData:ee}=Iee({strategy:"fixed",placement:q,whileElementsMounted:jee,elements:{reference:A.anchor},middleware:[kee({mainAxis:f+z,alignmentAxis:y}),C&&Oee({mainAxis:!0,crossAxis:!1,limiter:j==="partial"?Ree():void 0,...J}),C&&Lee({...J}),Mee({...J,apply:({elements:Ke,rects:we,availableWidth:oe,availableHeight:it})=>{const{width:_e,height:qe}=we.reference,lt=Ke.floating.style;lt.setProperty("--radix-popper-available-width",`${oe}px`),lt.setProperty("--radix-popper-available-height",`${it}px`),lt.setProperty("--radix-popper-anchor-width",`${_e}px`),lt.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),I&&$ee({element:I,padding:v}),ote({arrowWidth:O,arrowHeight:z}),w&&Fee({strategy:"referenceHidden"})]}),[ne,ae]=VB(W),ve=xu(E);dE(()=>{te&&ve?.()},[te,ve]);const xe=(i=ee.arrow)===null||i===void 0?void 0:i.x,Se=(a=ee.arrow)===null||a===void 0?void 0:a.y,Pe=((o=ee.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Ce,He]=S.useState();return dE(()=>{_&&He(window.getComputedStyle(_).zIndex)},[_]),S.createElement("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:te?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(l=ee.transformOrigin)===null||l===void 0?void 0:l.x,(c=ee.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},S.createElement(ste,{scope:u,placedSide:ne,onArrowChange:T,arrowX:xe,arrowY:Se,shouldHideArrow:Pe},S.createElement(FB.div,yt({"data-side":ne,"data-align":ae},N,{ref:F,style:{...N.style,animation:te?void 0:"none",opacity:(d=ee.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function ate(t){return t!==null}const ote=t=>({name:"transformOrigin",options:t,fn(e){var r,s,i,a,o;const{placement:l,rects:c,middlewareData:d}=e,h=((r=d.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,f=h?0:t.arrowWidth,p=h?0:t.arrowHeight,[y,v]=VB(l),g={start:"0%",center:"50%",end:"100%"}[v],b=((s=(i=d.arrow)===null||i===void 0?void 0:i.x)!==null&&s!==void 0?s:0)+f/2,j=((a=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&a!==void 0?a:0)+p/2;let w="",C="";return y==="bottom"?(w=h?g:`${b}px`,C=`${-p}px`):y==="top"?(w=h?g:`${b}px`,C=`${c.floating.height+p}px`):y==="right"?(w=`${-p}px`,C=h?g:`${j}px`):y==="left"&&(w=`${c.floating.width+p}px`,C=h?g:`${j}px`),{data:{x:w,y:C}}}});function VB(t){const[e,r="center"]=t.split("-");return[e,r]}const lte=tte,cte=nte,dte=ite;function ute(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function hte(...t){return e=>t.forEach(r=>ute(r,e))}const HB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(mte);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(uE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(uE,yt({},s,{ref:e}),r)});HB.displayName="Slot";const uE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...pte(s,r.props),ref:e?hte(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});uE.displayName="SlotClone";const fte=({children:t})=>S.createElement(S.Fragment,null,t);function mte(t){return S.isValidElement(t)&&t.type===fte}function pte(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const gte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],vte=gte.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?HB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),xte=S.forwardRef((t,e)=>{var r;const{container:s=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...i}=t;return s?yj.createPortal(S.createElement(vte.div,yt({},i,{ref:e})),s):null}),tT=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(bte);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(hE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(hE,yt({},s,{ref:e}),r)});tT.displayName="Slot";const hE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...jte(s,r.props),ref:e?pB(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});hE.displayName="SlotClone";const yte=({children:t})=>S.createElement(S.Fragment,null,t);function bte(t){return S.isValidElement(t)&&t.type===yte}function jte(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const wte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mc=wte.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?tT:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function pD({prop:t,defaultProp:e,onChange:r=()=>{}}){const[s,i]=Nte({defaultProp:e,onChange:r}),a=t!==void 0,o=a?t:s,l=xu(r),c=S.useCallback(d=>{if(a){const h=typeof d=="function"?d(t):d;h!==t&&l(h)}else i(d)},[a,t,i,l]);return[o,c]}function Nte({defaultProp:t,onChange:e}){const r=S.useState(t),[s]=r,i=S.useRef(s),a=xu(e);return S.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),r}const Jh=globalThis?.document?S.useLayoutEffect:()=>{};function Ste(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Ate(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Cte(...t){return e=>t.forEach(r=>Ate(r,e))}const WB=S.forwardRef((t,e)=>{const{children:r,...s}=t,i=S.Children.toArray(r),a=i.find(Pte);if(a){const o=a.props.children,l=i.map(c=>c===a?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:c);return S.createElement(fE,yt({},s,{ref:e}),S.isValidElement(o)?S.cloneElement(o,void 0,l):null)}return S.createElement(fE,yt({},s,{ref:e}),r)});WB.displayName="Slot";const fE=S.forwardRef((t,e)=>{const{children:r,...s}=t;return S.isValidElement(r)?S.cloneElement(r,{...Tte(s,r.props),ref:e?Cte(e,r.ref):r.ref}):S.Children.count(r)>1?S.Children.only(null):null});fE.displayName="SlotClone";const Ete=({children:t})=>S.createElement(S.Fragment,null,t);function Pte(t){return S.isValidElement(t)&&t.type===Ete}function Tte(t,e){const r={...e};for(const s in e){const i=t[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{a(...l),i(...l)}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...t,...r}}const _te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ite=_te.reduce((t,e)=>{const r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?WB:e;return S.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),S.createElement(l,yt({},o,{ref:i}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Dte=S.forwardRef((t,e)=>S.createElement(Ite.span,yt({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var kte=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ip=new WeakMap,Qy=new WeakMap,Jy={},U2=0,GB=function(t){return t&&(t.host||GB(t.parentNode))},Ote=function(t,e){return e.map(function(r){if(t.contains(r))return r;var s=GB(r);return s&&t.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Rte=function(t,e,r,s){var i=Ote(e,Array.isArray(t)?t:[t]);Jy[r]||(Jy[r]=new WeakMap);var a=Jy[r],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var p=f.getAttribute(s),y=p!==null&&p!=="false",v=(Ip.get(f)||0)+1,g=(a.get(f)||0)+1;Ip.set(f,v),a.set(f,g),o.push(f),v===1&&y&&Qy.set(f,!0),g===1&&f.setAttribute(r,"true"),y||f.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(e),l.clear(),U2++,function(){o.forEach(function(h){var f=Ip.get(h)-1,p=a.get(h)-1;Ip.set(h,f),a.set(h,p),f||(Qy.has(h)||h.removeAttribute(s),Qy.delete(h)),p||h.removeAttribute(r)}),U2--,U2||(Ip=new WeakMap,Ip=new WeakMap,Qy=new WeakMap,Jy={})}},KB=function(t,e,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=kte(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),Rte(s,i,r,"aria-hidden")):function(){return null}},ma=function(){return ma=Object.assign||function(e){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ma.apply(this,arguments)};function rT(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r}function Vm(t,e,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})}function YB(t,e,r){if(r||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}var px="right-scroll-bar-position",gx="width-before-scroll-bar",Lte="with-scroll-bars-hidden",Mte="--removed-body-scroll-bar-size";function V2(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Fte(t,e){var r=S.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(s){var i=r.value;i!==s&&(r.value=s,r.callback(s,i))}}}})[0];return r.callback=e,r.facade}var $te=typeof window<"u"?S.useLayoutEffect:S.useEffect,gD=new WeakMap;function XB(t,e){var r=Fte(null,function(s){return t.forEach(function(i){return V2(i,s)})});return $te(function(){var s=gD.get(r);if(s){var i=new Set(s),a=new Set(t),o=r.current;i.forEach(function(l){a.has(l)||V2(l,null)}),a.forEach(function(l){i.has(l)||V2(l,o)})}gD.set(r,t)},[t]),r}function Bte(t){return t}function zte(t,e){e===void 0&&(e=Bte);var r=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return i}function ZB(t){t===void 0&&(t={});var e=zte(null);return e.options=ma({async:!0,ssr:!1},t),e}var QB=function(t){var e=t.sideCar,r=rT(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return S.createElement(s,ma({},r))};QB.isSideCarExport=!0;function JB(t,e){return t.useMedium(e),QB}var e9=ZB(),H2=function(){},_j=S.forwardRef(function(t,e){var r=S.useRef(null),s=S.useState({onScrollCapture:H2,onWheelCapture:H2,onTouchMoveCapture:H2}),i=s[0],a=s[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,y=t.inert,v=t.allowPinchZoom,g=t.as,b=g===void 0?"div":g,j=rT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,C=XB([r,e]),E=ma(ma({},j),i);return S.createElement(S.Fragment,null,u&&S.createElement(w,{sideCar:e9,removeScrollBar:d,shards:h,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!v,lockRef:r}),o?S.cloneElement(S.Children.only(l),ma(ma({},E),{ref:C})):S.createElement(b,ma({},E,{className:c,ref:C}),l))});_j.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_j.classNames={fullWidth:gx,zeroRight:px};var qte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ute(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=qte();return e&&t.setAttribute("nonce",e),t}function Vte(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Hte(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Wte=function(){var t=0,e=null;return{add:function(r){t==0&&(e=Ute())&&(Vte(e,r),Hte(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Gte=function(){var t=Wte();return function(e,r){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},nT=function(){var t=Gte(),e=function(r){var s=r.styles,i=r.dynamic;return t(s,i),null};return e},Kte={left:0,top:0,right:0,gap:0},W2=function(t){return parseInt(t||"",10)||0},Yte=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[W2(r),W2(s),W2(i)]},Xte=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Kte;var e=Yte(t),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-r+e[2]-e[0])}},Zte=nT(),ag="data-scroll-locked",Qte=function(t,e,r,s){var i=t.left,a=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Lte,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(ag,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(px,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(gx,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(px," .").concat(px,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(gx," .").concat(gx,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ag,`] {
    `).concat(Mte,": ").concat(l,`px;
  }
`)},vD=function(){var t=parseInt(document.body.getAttribute(ag)||"0",10);return isFinite(t)?t:0},Jte=function(){S.useEffect(function(){return document.body.setAttribute(ag,(vD()+1).toString()),function(){var t=vD()-1;t<=0?document.body.removeAttribute(ag):document.body.setAttribute(ag,t.toString())}},[])},t9=function(t){var e=t.noRelative,r=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;Jte();var a=S.useMemo(function(){return Xte(i)},[i]);return S.createElement(Zte,{styles:Qte(a,!e,i,r?"":"!important")})},mE=!1;if(typeof window<"u")try{var eb=Object.defineProperty({},"passive",{get:function(){return mE=!0,!0}});window.addEventListener("test",eb,eb),window.removeEventListener("test",eb,eb)}catch{mE=!1}var Dp=mE?{passive:!1}:!1,ere=function(t){return t.tagName==="TEXTAREA"},r9=function(t,e){var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!ere(t)&&r[e]==="visible")},tre=function(t){return r9(t,"overflowY")},rre=function(t){return r9(t,"overflowX")},xD=function(t,e){var r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=n9(t,r);if(s){var i=s9(t,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},nre=function(t){var e=t.scrollTop,r=t.scrollHeight,s=t.clientHeight;return[e,r,s]},sre=function(t){var e=t.scrollLeft,r=t.scrollWidth,s=t.clientWidth;return[e,r,s]},n9=function(t,e){return t==="v"?tre(e):rre(e)},s9=function(t,e){return t==="v"?nre(e):sre(e)},ire=function(t,e){return t==="h"&&e==="rtl"?-1:1},are=function(t,e,r,s,i){var a=ire(t,window.getComputedStyle(e).direction),o=a*s,l=r.target,c=e.contains(l),d=!1,u=o>0,h=0,f=0;do{var p=s9(t,l),y=p[0],v=p[1],g=p[2],b=v-g-a*y;(y||b)&&n9(t,l)&&(h+=b,f+=y),l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&h===0||!u&&f===0)&&(d=!0),d},tb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yD=function(t){return[t.deltaX,t.deltaY]},bD=function(t){return t&&"current"in t?t.current:t},ore=function(t,e){return t[0]===e[0]&&t[1]===e[1]},lre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},cre=0,kp=[];function dre(t){var e=S.useRef([]),r=S.useRef([0,0]),s=S.useRef(),i=S.useState(cre++)[0],a=S.useState(function(){return nT()})[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=YB([t.lockRef.current],(t.shards||[]).map(bD),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=S.useCallback(function(v,g){if("touches"in v&&v.touches.length===2)return!o.current.allowPinchZoom;var b=tb(v),j=r.current,w="deltaX"in v?v.deltaX:j[0]-b[0],C="deltaY"in v?v.deltaY:j[1]-b[1],E,N=v.target,A=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in v&&A==="h"&&N.type==="range")return!1;var _=xD(A,N);if(!_)return!0;if(_?E=A:(E=A==="v"?"h":"v",_=xD(A,N)),!_)return!1;if(!s.current&&"changedTouches"in v&&(w||C)&&(s.current=E),!E)return!0;var k=s.current||E;return are(k,g,v,k==="h"?w:C)},[]),c=S.useCallback(function(v){var g=v;if(!(!kp.length||kp[kp.length-1]!==a)){var b="deltaY"in g?yD(g):tb(g),j=e.current.filter(function(E){return E.name===g.type&&E.target===g.target&&ore(E.delta,b)})[0];if(j&&j.should){g.cancelable&&g.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(bD).filter(Boolean).filter(function(E){return E.contains(g.target)}),C=w.length>0?l(g,w[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),d=S.useCallback(function(v,g,b,j){var w={name:v,delta:g,target:b,should:j};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),u=S.useCallback(function(v){r.current=tb(v),s.current=void 0},[]),h=S.useCallback(function(v){d(v.type,yD(v),v.target,l(v,t.lockRef.current))},[]),f=S.useCallback(function(v){d(v.type,tb(v),v.target,l(v,t.lockRef.current))},[]);S.useEffect(function(){return kp.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Dp),document.addEventListener("touchmove",c,Dp),document.addEventListener("touchstart",u,Dp),function(){kp=kp.filter(function(v){return v!==a}),document.removeEventListener("wheel",c,Dp),document.removeEventListener("touchmove",c,Dp),document.removeEventListener("touchstart",u,Dp)}},[]);var p=t.removeScrollBar,y=t.inert;return S.createElement(S.Fragment,null,y?S.createElement(a,{styles:lre(i)}):null,p?S.createElement(t9,{gapMode:"margin"}):null)}const ure=JB(e9,dre);var i9=S.forwardRef(function(t,e){return S.createElement(_j,ma({},t,{ref:e,sideCar:ure}))});i9.classNames=_j.classNames;const hre=[" ","Enter","ArrowUp","ArrowDown"],fre=[" ","Enter"],Ij="Select",[Dj,kj,mre]=HQ(Ij),[tv,aPe]=GQ(Ij,[mre,zB]),sT=zB(),[pre,Hm]=tv(Ij),[gre,vre]=tv(Ij),xre=t=>{const{__scopeSelect:e,children:r,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:p}=t,y=sT(e),[v,g]=S.useState(null),[b,j]=S.useState(null),[w,C]=S.useState(!1),E=XQ(d),[N=!1,A]=pD({prop:s,defaultProp:i,onChange:a}),[_,k]=pD({prop:o,defaultProp:l,onChange:c}),F=S.useRef(null),I=v?!!v.closest("form"):!0,[T,R]=S.useState(new Set),O=Array.from(T).map(z=>z.props.value).join(";");return S.createElement(lte,y,S.createElement(pre,{required:p,scope:e,trigger:v,onTriggerChange:g,valueNode:b,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:C,contentId:wB(),value:_,onValueChange:k,open:N,onOpenChange:A,dir:E,triggerPointerDownPosRef:F,disabled:f},S.createElement(Dj.Provider,{scope:e},S.createElement(gre,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(z=>{R(q=>new Set(q).add(z))},[]),onNativeOptionRemove:S.useCallback(z=>{R(q=>{const B=new Set(q);return B.delete(z),B})},[])},r)),I?S.createElement(c9,{key:O,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:_,onChange:z=>k(z.target.value),disabled:f},_===void 0?S.createElement("option",{value:""}):null,Array.from(T)):null))},yre="SelectTrigger",bre=S.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:s=!1,...i}=t,a=sT(r),o=Hm(yre,r),l=o.disabled||s,c=pd(e,o.onTriggerChange),d=kj(r),[u,h,f]=d9(y=>{const v=d().filter(j=>!j.disabled),g=v.find(j=>j.value===o.value),b=u9(v,y,g);b!==void 0&&o.onValueChange(b.value)}),p=()=>{l||(o.onOpenChange(!0),f())};return S.createElement(cte,yt({asChild:!0},a),S.createElement(mc.button,yt({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:c,onClick:Ia(i.onClick,y=>{y.currentTarget.focus()}),onPointerDown:Ia(i.onPointerDown,y=>{const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)},y.preventDefault())}),onKeyDown:Ia(i.onKeyDown,y=>{const v=u.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(v&&y.key===" ")&&hre.includes(y.key)&&(p(),y.preventDefault())})})))}),jre="SelectValue",wre=S.forwardRef((t,e)=>{const{__scopeSelect:r,className:s,style:i,children:a,placeholder:o,...l}=t,c=Hm(jre,r),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=pd(e,c.onValueNodeChange);return Jh(()=>{d(u)},[d,u]),S.createElement(mc.span,yt({},l,{ref:h,style:{pointerEvents:"none"}}),c.value===void 0&&o!==void 0?o:a)}),Nre=S.forwardRef((t,e)=>{const{__scopeSelect:r,children:s,...i}=t;return S.createElement(mc.span,yt({"aria-hidden":!0},i,{ref:e}),s||"▼")}),Sre=t=>S.createElement(xte,yt({asChild:!0},t)),gg="SelectContent",Are=S.forwardRef((t,e)=>{const r=Hm(gg,t.__scopeSelect),[s,i]=S.useState();if(Jh(()=>{i(new DocumentFragment)},[]),!r.open){const a=s;return a?sf.createPortal(S.createElement(a9,{scope:t.__scopeSelect},S.createElement(Dj.Slot,{scope:t.__scopeSelect},S.createElement("div",null,t.children))),a):null}return S.createElement(Cre,yt({},t,{ref:e}))}),ru=10,[a9,Wm]=tv(gg),Cre=S.forwardRef((t,e)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:g,...b}=t,j=Hm(gg,r),[w,C]=S.useState(null),[E,N]=S.useState(null),A=pd(e,ae=>C(ae)),[_,k]=S.useState(null),[F,I]=S.useState(null),T=kj(r),[R,O]=S.useState(!1),z=S.useRef(!1);S.useEffect(()=>{if(w)return KB(w)},[w]),hJ();const q=S.useCallback(ae=>{const[ve,...xe]=T().map(Ce=>Ce.ref.current),[Se]=xe.slice(-1),Pe=document.activeElement;for(const Ce of ae)if(Ce===Pe||(Ce?.scrollIntoView({block:"nearest"}),Ce===ve&&E&&(E.scrollTop=0),Ce===Se&&E&&(E.scrollTop=E.scrollHeight),Ce?.focus(),document.activeElement!==Pe))return},[T,E]),B=S.useCallback(()=>q([_,w]),[q,_,w]);S.useEffect(()=>{R&&B()},[R,B]);const{onOpenChange:K,triggerPointerDownPosRef:Y}=j;S.useEffect(()=>{if(w){let ae={x:0,y:0};const ve=Se=>{var Pe,Ce,He,Ke;ae={x:Math.abs(Math.round(Se.pageX)-((Pe=(Ce=Y.current)===null||Ce===void 0?void 0:Ce.x)!==null&&Pe!==void 0?Pe:0)),y:Math.abs(Math.round(Se.pageY)-((He=(Ke=Y.current)===null||Ke===void 0?void 0:Ke.y)!==null&&He!==void 0?He:0))}},xe=Se=>{ae.x<=10&&ae.y<=10?Se.preventDefault():w.contains(Se.target)||K(!1),document.removeEventListener("pointermove",ve),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",xe,{capture:!0})}}},[w,K,Y]),S.useEffect(()=>{const ae=()=>K(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[K]);const[J,H]=d9(ae=>{const ve=T().filter(Pe=>!Pe.disabled),xe=ve.find(Pe=>Pe.ref.current===document.activeElement),Se=u9(ve,ae,xe);Se&&setTimeout(()=>Se.ref.current.focus())}),$=S.useCallback((ae,ve,xe)=>{const Se=!z.current&&!xe;(j.value!==void 0&&j.value===ve||Se)&&(k(ae),Se&&(z.current=!0))},[j.value]),W=S.useCallback(()=>w?.focus(),[w]),te=S.useCallback((ae,ve,xe)=>{const Se=!z.current&&!xe;(j.value!==void 0&&j.value===ve||Se)&&I(ae)},[j.value]),ee=s==="popper"?jD:Ere,ne=ee===jD?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:g}:{};return S.createElement(a9,{scope:r,content:w,viewport:E,onViewportChange:N,itemRefCallback:$,selectedItem:_,onItemLeave:W,itemTextRefCallback:te,focusSelectedItem:B,selectedItemText:F,position:s,isPositioned:R,searchRef:J},S.createElement(i9,{as:tT,allowPinchZoom:!0},S.createElement(bJ,{asChild:!0,trapped:j.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:Ia(i,ae=>{var ve;(ve=j.trigger)===null||ve===void 0||ve.focus({preventScroll:!0}),ae.preventDefault()})},S.createElement(cJ,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>j.onOpenChange(!1)},S.createElement(ee,yt({role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:ae=>ae.preventDefault()},b,ne,{onPlaced:()=>O(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ia(b.onKeyDown,ae=>{const ve=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ve&&ae.key.length===1&&H(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Se=T().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Pe=ae.target,Ce=Se.indexOf(Pe);Se=Se.slice(Ce+1)}setTimeout(()=>q(Se)),ae.preventDefault()}})}))))))}),Ere=S.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:s,...i}=t,a=Hm(gg,r),o=Wm(gg,r),[l,c]=S.useState(null),[d,u]=S.useState(null),h=pd(e,A=>u(A)),f=kj(r),p=S.useRef(!1),y=S.useRef(!0),{viewport:v,selectedItem:g,selectedItemText:b,focusSelectedItem:j}=o,w=S.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&v&&g&&b){const A=a.trigger.getBoundingClientRect(),_=d.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),F=b.getBoundingClientRect();if(a.dir!=="rtl"){const Pe=F.left-_.left,Ce=k.left-Pe,He=A.left-Ce,Ke=A.width+He,we=Math.max(Ke,_.width),oe=window.innerWidth-ru,it=X3(Ce,[ru,oe-we]);l.style.minWidth=Ke+"px",l.style.left=it+"px"}else{const Pe=_.right-F.right,Ce=window.innerWidth-k.right-Pe,He=window.innerWidth-A.right-Ce,Ke=A.width+He,we=Math.max(Ke,_.width),oe=window.innerWidth-ru,it=X3(Ce,[ru,oe-we]);l.style.minWidth=Ke+"px",l.style.right=it+"px"}const I=f(),T=window.innerHeight-ru*2,R=v.scrollHeight,O=window.getComputedStyle(d),z=parseInt(O.borderTopWidth,10),q=parseInt(O.paddingTop,10),B=parseInt(O.borderBottomWidth,10),K=parseInt(O.paddingBottom,10),Y=z+q+R+K+B,J=Math.min(g.offsetHeight*5,Y),H=window.getComputedStyle(v),$=parseInt(H.paddingTop,10),W=parseInt(H.paddingBottom,10),te=A.top+A.height/2-ru,ee=T-te,ne=g.offsetHeight/2,ae=g.offsetTop+ne,ve=z+q+ae,xe=Y-ve;if(ve<=te){const Pe=g===I[I.length-1].ref.current;l.style.bottom="0px";const Ce=d.clientHeight-v.offsetTop-v.offsetHeight,He=Math.max(ee,ne+(Pe?W:0)+Ce+B),Ke=ve+He;l.style.height=Ke+"px"}else{const Pe=g===I[0].ref.current;l.style.top="0px";const He=Math.max(te,z+v.offsetTop+(Pe?$:0)+ne)+xe;l.style.height=He+"px",v.scrollTop=ve-te+v.offsetTop}l.style.margin=`${ru}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=T+"px",s?.(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,l,d,v,g,b,a.dir,s]);Jh(()=>w(),[w]);const[C,E]=S.useState();Jh(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const N=S.useCallback(A=>{A&&y.current===!0&&(w(),j?.(),y.current=!1)},[w,j]);return S.createElement(Pre,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N},S.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C}},S.createElement(mc.div,yt({},i,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),jD=S.forwardRef((t,e)=>{const{__scopeSelect:r,align:s="start",collisionPadding:i=ru,...a}=t,o=sT(r);return S.createElement(dte,yt({},o,a,{ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Pre,iT]=tv(gg,{}),wD="SelectViewport",Tre=S.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t,i=Wm(wD,r),a=iT(wD,r),o=pd(e,i.onViewportChange),l=S.useRef(0);return S.createElement(S.Fragment,null,S.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),S.createElement(Dj.Slot,{scope:r},S.createElement(mc.div,yt({"data-radix-select-viewport":"",role:"presentation"},s,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:Ia(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const p=window.innerHeight-ru*2,y=parseFloat(u.style.minHeight),v=parseFloat(u.style.height),g=Math.max(y,v);if(g<p){const b=g+f,j=Math.min(p,b),w=b-j;u.style.height=j+"px",u.style.bottom==="0px"&&(d.scrollTop=w>0?w:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),_re="SelectGroup",[oPe,Ire]=tv(_re),Dre="SelectLabel",kre=S.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t,i=Ire(Dre,r);return S.createElement(mc.div,yt({id:i.id},s,{ref:e}))}),pE="SelectItem",[Ore,o9]=tv(pE),Rre=S.forwardRef((t,e)=>{const{__scopeSelect:r,value:s,disabled:i=!1,textValue:a,...o}=t,l=Hm(pE,r),c=Wm(pE,r),d=l.value===s,[u,h]=S.useState(a??""),[f,p]=S.useState(!1),y=pd(e,b=>{var j;return(j=c.itemRefCallback)===null||j===void 0?void 0:j.call(c,b,s,i)}),v=wB(),g=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};return S.createElement(Ore,{scope:r,value:s,disabled:i,textId:v,isSelected:d,onItemTextChange:S.useCallback(b=>{h(j=>{var w;return j||((w=b?.textContent)!==null&&w!==void 0?w:"").trim()})},[])},S.createElement(Dj.ItemSlot,{scope:r,value:s,disabled:i,textValue:u},S.createElement(mc.div,yt({role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:y,onFocus:Ia(o.onFocus,()=>p(!0)),onBlur:Ia(o.onBlur,()=>p(!1)),onPointerUp:Ia(o.onPointerUp,g),onPointerMove:Ia(o.onPointerMove,b=>{if(i){var j;(j=c.onItemLeave)===null||j===void 0||j.call(c)}else b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ia(o.onPointerLeave,b=>{if(b.currentTarget===document.activeElement){var j;(j=c.onItemLeave)===null||j===void 0||j.call(c)}}),onKeyDown:Ia(o.onKeyDown,b=>{var j;((j=c.searchRef)===null||j===void 0?void 0:j.current)!==""&&b.key===" "||(fre.includes(b.key)&&g(),b.key===" "&&b.preventDefault())})}))))}),rb="SelectItemText",Lre=S.forwardRef((t,e)=>{const{__scopeSelect:r,className:s,style:i,...a}=t,o=Hm(rb,r),l=Wm(rb,r),c=o9(rb,r),d=vre(rb,r),[u,h]=S.useState(null),f=pd(e,b=>h(b),c.onItemTextChange,b=>{var j;return(j=l.itemTextRefCallback)===null||j===void 0?void 0:j.call(l,b,c.value,c.disabled)}),p=u?.textContent,y=S.useMemo(()=>S.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},p),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:g}=d;return Jh(()=>(v(y),()=>g(y)),[v,g,y]),S.createElement(S.Fragment,null,S.createElement(mc.span,yt({id:c.textId},a,{ref:f})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?sf.createPortal(a.children,o.valueNode):null)}),Mre="SelectItemIndicator",Fre=S.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t;return o9(Mre,r).isSelected?S.createElement(mc.span,yt({"aria-hidden":!0},s,{ref:e})):null}),ND="SelectScrollUpButton",$re=S.forwardRef((t,e)=>{const r=Wm(ND,t.__scopeSelect),s=iT(ND,t.__scopeSelect),[i,a]=S.useState(!1),o=pd(e,s.onScrollButtonChange);return Jh(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollTop>0;a(d)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),i?S.createElement(l9,yt({},t,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),SD="SelectScrollDownButton",Bre=S.forwardRef((t,e)=>{const r=Wm(SD,t.__scopeSelect),s=iT(SD,t.__scopeSelect),[i,a]=S.useState(!1),o=pd(e,s.onScrollButtonChange);return Jh(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;a(u)};const l=r.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),i?S.createElement(l9,yt({},t,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),l9=S.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:s,...i}=t,a=Wm("SelectScrollButton",r),o=S.useRef(null),l=kj(r),c=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>c(),[c]),Jh(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);u==null||(d=u.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),S.createElement(mc.div,yt({"aria-hidden":!0},i,{ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ia(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Ia(i.onPointerMove,()=>{var d;(d=a.onItemLeave)===null||d===void 0||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Ia(i.onPointerLeave,()=>{c()})}))}),zre=S.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t;return S.createElement(mc.div,yt({"aria-hidden":!0},s,{ref:e}))}),c9=S.forwardRef((t,e)=>{const{value:r,...s}=t,i=S.useRef(null),a=pd(e,i),o=Ste(r);return S.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const h=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(h)}},[o,r]),S.createElement(Dte,{asChild:!0},S.createElement("select",yt({},s,{ref:a,defaultValue:r})))});c9.displayName="BubbleSelect";function d9(t){const e=xu(t),r=S.useRef(""),s=S.useRef(0),i=S.useCallback(o=>{const l=r.current+o;e(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=S.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,i,a]}function u9(t,e,r){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=qre(t,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function qre(t,e){return t.map((r,s)=>t[(e+s)%t.length])}const Ure=xre,h9=bre,Vre=wre,Hre=Nre,Wre=Sre,f9=Are,Gre=Tre,m9=kre,p9=Rre,Kre=Lre,Yre=Fre,g9=$re,v9=Bre,x9=zre,nt=Ure,st=Vre,et=S.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(h9,{ref:s,className:pt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,n.jsx(Hre,{asChild:!0,children:n.jsx(U4,{className:"h-4 w-4 opacity-50"})})]}));et.displayName=h9.displayName;const y9=S.forwardRef(({className:t,...e},r)=>n.jsx(g9,{ref:r,className:pt("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(IZ,{className:"h-4 w-4"})}));y9.displayName=g9.displayName;const b9=S.forwardRef(({className:t,...e},r)=>n.jsx(v9,{ref:r,className:pt("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(U4,{className:"h-4 w-4"})}));b9.displayName=v9.displayName;const tt=S.forwardRef(({className:t,children:e,position:r="popper",...s},i)=>n.jsx(Wre,{children:n.jsxs(f9,{ref:i,className:pt("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...s,children:[n.jsx(y9,{}),n.jsx(Gre,{className:pt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(b9,{})]})}));tt.displayName=f9.displayName;const Xre=S.forwardRef(({className:t,...e},r)=>n.jsx(m9,{ref:r,className:pt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Xre.displayName=m9.displayName;const he=S.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(p9,{ref:s,className:pt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Yre,{children:n.jsx(Nj,{className:"h-4 w-4"})})}),n.jsx(Kre,{children:e})]}));he.displayName=p9.displayName;const Zre=S.forwardRef(({className:t,...e},r)=>n.jsx(x9,{ref:r,className:pt("-mx-1 my-1 h-px bg-muted",t),...e}));Zre.displayName=x9.displayName;var Qre="Label",j9=S.forwardRef((t,e)=>n.jsx(xn.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));j9.displayName=Qre;var w9=j9;const Jre=z0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=S.forwardRef(({className:t,...e},r)=>n.jsx(w9,{ref:r,className:pt(Jre(),t),...e}));ue.displayName=w9.displayName;var Rb=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(Rb||{});function Au(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState([]),[o,l]=S.useState([]),[c,d]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState(!1);S.useEffect(()=>{y()},[]);const y=()=>{const T=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],R=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],O=Bn("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:Rb.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:Rb.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),z=Bn("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),q=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],B=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];s(T),h(R),e(O),a(z),l(q),d(B)},v=T=>{rn("renter-insight-leads",T)},g=T=>{rn("renter-insight-activities",T)},b=async T=>{p(!0);try{const R={id:Math.random().toString(36).substr(2,9),firstName:T.firstName||"",lastName:T.lastName||"",email:T.email||"",phone:T.phone||"",source:T.source||"",sourceId:T.sourceId||"",status:Rb.NEW,assignedTo:T.assignedTo,notes:T.notes||"",score:0,lastActivity:new Date,customFields:T.customFields||{},createdAt:new Date,updatedAt:new Date},O=[...t,R];return e(O),v(O),await C({leadId:R.id,type:"note",description:`Lead created from ${R.source}`,userId:"current-user"}),await E(R.id),R}finally{p(!1)}},j=async(T,R)=>{const O=t.map(z=>z.id===T?{...z,status:R,updatedAt:new Date}:z);e(O),v(O),await C({leadId:T,type:"status_change",description:`Status changed to ${R}`,userId:"current-user"})},w=async(T,R)=>{const O=t.map(z=>z.id===T?{...z,assignedTo:R,updatedAt:new Date}:z);e(O),v(O),await C({leadId:T,type:"note",description:`Lead assigned to ${u.find(z=>z.id===R)?.name}`,userId:"current-user"})},C=async T=>{const R={id:Math.random().toString(36).substr(2,9),leadId:T.leadId||"",type:T.type||"note",description:T.description||"",outcome:T.outcome,duration:T.duration,scheduledDate:T.scheduledDate,completedDate:T.completedDate||new Date,userId:T.userId||"current-user",metadata:T.metadata,createdAt:new Date},O=[...i,R];a(O),g(O);const z=t.map(q=>q.id===R.leadId?{...q,lastActivity:new Date,updatedAt:new Date}:q);e(z),v(z),await E(R.leadId)},E=async T=>{const R=t.find(ne=>ne.id===T);if(!R)return;const O=i.filter(ne=>ne.leadId===T);let z=0,q=0,B=0;const K=[];R.customFields?.budget&&(z+=20,K.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),R.customFields?.timeframe==="1-3 months"?(z+=25,K.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):R.customFields?.timeframe==="3-6 months"&&(z+=15,K.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),O.filter(ne=>ne.type==="call").length>0&&(q+=30,K.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),O.filter(ne=>ne.type==="email").length>2&&(q+=20,K.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),O.filter(ne=>new Date(ne.createdAt).getTime()>Date.now()-10080*60*1e3).length>0&&(B+=25,K.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const $=O.filter(ne=>ne.outcome==="positive").length;$>0&&(B+=$*10,K.push({factor:"Positive Interactions",points:$*10,reason:`${$} positive interactions`}));const W=z+q+B,te={leadId:T,totalScore:W,demographicScore:z,behaviorScore:q,engagementScore:B,lastCalculated:new Date,factors:K};l(ne=>ne.filter(ae=>ae.leadId!==T).concat(te));const ee=t.map(ne=>ne.id===T?{...ne,score:W,updatedAt:new Date}:ne);e(ee),v(ee)};return{leads:t,sources:r,activities:i,scores:o,reminders:c,salesReps:u,loading:f,createLead:b,updateLeadStatus:j,assignLead:w,logActivity:C,calculateLeadScore:E,createReminder:async T=>{const R={id:Math.random().toString(36).substr(2,9),leadId:T.leadId||"",userId:T.userId||"current-user",type:T.type||"follow_up",title:T.title||"",description:T.description||"",dueDate:T.dueDate||new Date,isCompleted:!1,priority:T.priority||"medium",createdAt:new Date};return d(O=>[...O,R]),R},completeReminder:async T=>{d(R=>R.map(O=>O.id===T?{...O,isCompleted:!0}:O))},getLeadsByRep:T=>t.filter(R=>R.assignedTo===T),getActivitiesByLead:T=>i.filter(R=>R.leadId===T),getRemindersByUser:T=>c.filter(R=>R.userId===T&&!R.isCompleted),getLeadScore:T=>o.find(R=>R.leadId===T)}}function rv({onClose:t,onSuccess:e}){const{sources:r,salesReps:s,createLead:i}=Au(),{toast:a}=Gt(),[o,l]=S.useState(!1),[c,d]=S.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[u,h]=S.useState({}),f=()=>{const g={};return c.firstName.trim()||(g.firstName="First name is required"),c.lastName.trim()||(g.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(g.email="Please enter a valid email address"):g.email="Email is required",c.phone.trim()||(g.phone="Phone number is required"),c.sourceId||(g.sourceId="Lead source is required"),h(g),Object.keys(g).length===0},p=async g=>{if(g.preventDefault(),!f()){a({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}l(!0);try{const b=r.find(C=>C.id===c.sourceId),j={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:b?.name||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},w=await i(j);a({title:"Lead Created Successfully!",description:`${w.firstName} ${w.lastName} has been added to your CRM.`,variant:"default"}),e(w),t()}catch(b){console.error("Error creating lead:",b),a({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{l(!1)}},y=(g,b)=>{d(j=>({...j,[g]:b})),u[g]&&h(j=>({...j,[g]:""}))},v=(g,b)=>{d(j=>({...j,customFields:{...j.customFields,[g]:b}}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl flex items-center",children:[n.jsx(vs,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),n.jsx(Ge,{children:"Create a new lead and start the sales process"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(vs,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"firstName",children:"First Name *"}),n.jsx(Te,{id:"firstName",value:c.firstName,onChange:g=>y("firstName",g.target.value),placeholder:"Enter first name",className:u.firstName?"border-red-500":""}),u.firstName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.firstName})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"lastName",children:"Last Name *"}),n.jsx(Te,{id:"lastName",value:c.lastName,onChange:g=>y("lastName",g.target.value),placeholder:"Enter last name",className:u.lastName?"border-red-500":""}),u.lastName&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lastName})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email Address *"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ui,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"email",type:"email",value:c.email,onChange:g=>y("email",g.target.value),placeholder:"Enter email address",className:`pl-10 ${u.email?"border-red-500":""}`})]}),u.email&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.email})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number *"}),n.jsxs("div",{className:"relative",children:[n.jsx(q0,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"phone",type:"tel",value:c.phone,onChange:g=>y("phone",g.target.value),placeholder:"Enter phone number",className:`pl-10 ${u.phone?"border-red-500":""}`})]}),u.phone&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.phone})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(W4,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"source",children:"Lead Source *"}),n.jsxs(nt,{value:c.sourceId,onValueChange:g=>y("sourceId",g),children:[n.jsx(et,{className:u.sourceId?"border-red-500":"",children:n.jsx(st,{placeholder:"Select lead source"})}),n.jsx(tt,{children:r.map(g=>n.jsx(he,{value:g.id,children:g.name},g.id))})]}),u.sourceId&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.sourceId})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),n.jsxs(nt,{value:c.assignedTo,onValueChange:g=>y("assignedTo",g),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select sales rep (optional)"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"Unassigned"}),s.map(g=>n.jsx(he,{value:g.id,children:g.name},g.id))]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(rr,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"budget",children:"Budget Range"}),n.jsxs(nt,{value:c.customFields.budget,onValueChange:g=>v("budget",g),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select budget range"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"Under $50k",children:"Under $50k"}),n.jsx(he,{value:"$50k-$100k",children:"$50k-$100k"}),n.jsx(he,{value:"$100k-$150k",children:"$100k-$150k"}),n.jsx(he,{value:"$150k-$200k",children:"$150k-$200k"}),n.jsx(he,{value:"$200k+",children:"$200k+"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"timeframe",children:"Purchase Timeframe"}),n.jsxs(nt,{value:c.customFields.timeframe,onValueChange:g=>v("timeframe",g),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select timeframe"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"Immediate",children:"Immediate (within 1 month)"}),n.jsx(he,{value:"1-3 months",children:"1-3 months"}),n.jsx(he,{value:"3-6 months",children:"3-6 months"}),n.jsx(he,{value:"6-12 months",children:"6-12 months"}),n.jsx(he,{value:"12+ months",children:"12+ months"})]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"experience",children:"RV Experience"}),n.jsxs(nt,{value:c.customFields.experience,onValueChange:g=>v("experience",g),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select experience level"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"First-time buyer",children:"First-time buyer"}),n.jsx(he,{value:"Some experience",children:"Some experience"}),n.jsx(he,{value:"Experienced RVer",children:"Experienced RVer"}),n.jsx(he,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),n.jsxs(nt,{value:c.customFields.preferredContact,onValueChange:g=>v("preferredContact",g),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select contact method"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"email",children:"Email"}),n.jsx(he,{value:"phone",children:"Phone"}),n.jsx(he,{value:"text",children:"Text/SMS"}),n.jsx(he,{value:"any",children:"Any method"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"interests",children:"Interests/Requirements"}),n.jsx(Te,{id:"interests",value:c.customFields.interests,onChange:g=>v("interests",g.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Notes"}),n.jsx(kr,{id:"notes",value:c.notes,onChange:g=>y("notes",g.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:t,disabled:o,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const ene=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:gs},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:Ai},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:yr},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:rr}],tne=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function rne(){const[t,e]=S.useState(!1),r=i=>{console.log("New lead created from dashboard:",i)},s=i=>{switch(i){case"add-lead":e(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return n.jsxs("div",{className:"space-y-6",children:[t&&n.jsx(rv,{onClose:()=>e(!1),onSuccess:r}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:ene.map(i=>n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:i.name}),n.jsx(i.icon,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i.value}),n.jsxs("p",{className:`text-xs ${i.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[i.change," from last month"]})]})]},i.name))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Activity"}),n.jsx(Ge,{children:"Latest updates from your dealership"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:tne.map(i=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:i.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.time})]})]},i.id))})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Quick Actions"}),n.jsx(Ge,{children:"Common tasks and shortcuts"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"grid gap-3",children:[n.jsxs("button",{onClick:()=>s("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(gs,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),n.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs("button",{onClick:()=>s("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ai,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(yr,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Create Quote"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]}),n.jsxs("button",{onClick:()=>s("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Br,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),n.jsx("span",{className:"text-muted-foreground",children:"→"})]})]})})]})]})]})}function nne(){const[t,e]=S.useState("admin@renterinsight.com"),[r,s]=S.useState("password"),{login:i,isLoading:a}=Qg(),{toast:o}=Gt(),l=lf(),c=async d=>{d.preventDefault();try{await i(t,r),l("/")}catch{o({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsxs(je,{className:"text-center",children:[n.jsx(Ne,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),n.jsx(Ge,{children:"Sign in to your account to continue"})]}),n.jsxs(pe,{children:[n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsx("div",{children:n.jsx(Te,{type:"email",placeholder:"Email",value:t,onChange:d=>e(d.target.value),required:!0,autoComplete:"username"})}),n.jsx("div",{children:n.jsx(Te,{type:"password",placeholder:"Password",value:r,onChange:d=>s(d.target.value),required:!0,autoComplete:"current-password"})}),n.jsx(re,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]}),n.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function sne({children:t}){const{user:e,isLoading:r}=Qg();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e?n.jsx(n.Fragment,{children:t}):n.jsx(jX,{to:"/login",replace:!0})}function ine(t){const e=t+"CollectionProvider",[r,s]=cf(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:g,children:b}=v,j=be.useRef(null),w=be.useRef(new Map).current;return n.jsx(i,{scope:g,itemMap:w,collectionRef:j,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=Pm(l),d=be.forwardRef((v,g)=>{const{scope:b,children:j}=v,w=a(l,b),C=Ei(g,w.collectionRef);return n.jsx(c,{ref:C,children:j})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=Pm(u),p=be.forwardRef((v,g)=>{const{scope:b,children:j,...w}=v,C=be.useRef(null),E=Ei(g,C),N=a(u,b);return be.useEffect(()=>(N.itemMap.set(C,{ref:C,...w}),()=>void N.itemMap.delete(C))),n.jsx(f,{[h]:"",ref:E,children:j})});p.displayName=u;function y(v){const g=a(t+"CollectionConsumer",v);return be.useCallback(()=>{const j=g.collectionRef.current;if(!j)return[];const w=Array.from(j.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((N,A)=>w.indexOf(N.ref.current)-w.indexOf(A.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},y,s]}var ane=Yg[" useId ".trim().toString()]||(()=>{}),one=0;function lne(t){const[e,r]=S.useState(ane());return ud(()=>{r(s=>s??String(one++))},[t]),e?`radix-${e}`:""}function cne(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...r)=>e.current?.(...r),[])}var dne=S.createContext(void 0);function une(t){const e=S.useContext(dne);return t||e||"ltr"}var G2="rovingFocusGroup.onEntryFocus",hne={bubbles:!1,cancelable:!0},V0="RovingFocusGroup",[gE,N9,fne]=ine(V0),[mne,S9]=cf(V0,[fne]),[pne,gne]=mne(V0),A9=S.forwardRef((t,e)=>n.jsx(gE.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(gE.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(vne,{...t,ref:e})})}));A9.displayName=V0;var vne=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,f=S.useRef(null),p=Ei(e,f),y=une(a),[v,g]=$0({prop:o,defaultProp:l??null,onChange:c,caller:V0}),[b,j]=S.useState(!1),w=cne(d),C=N9(r),E=S.useRef(!1),[N,A]=S.useState(0);return S.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(G2,w),()=>_.removeEventListener(G2,w)},[w]),n.jsx(pne,{scope:r,orientation:s,dir:y,loop:i,currentTabStopId:v,onItemFocus:S.useCallback(_=>g(_),[g]),onItemShiftTab:S.useCallback(()=>j(!0),[]),onFocusableItemAdd:S.useCallback(()=>A(_=>_+1),[]),onFocusableItemRemove:S.useCallback(()=>A(_=>_-1),[]),children:n.jsx(xn.div,{tabIndex:b||N===0?-1:0,"data-orientation":s,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:dn(t.onMouseDown,()=>{E.current=!0}),onFocus:dn(t.onFocus,_=>{const k=!E.current;if(_.target===_.currentTarget&&k&&!b){const F=new CustomEvent(G2,hne);if(_.currentTarget.dispatchEvent(F),!F.defaultPrevented){const I=C().filter(q=>q.focusable),T=I.find(q=>q.active),R=I.find(q=>q.id===v),z=[T,R,...I].filter(Boolean).map(q=>q.ref.current);P9(z,u)}}E.current=!1}),onBlur:dn(t.onBlur,()=>j(!1))})})}),C9="RovingFocusGroupItem",E9=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:i=!1,tabStopId:a,children:o,...l}=t,c=lne(),d=a||c,u=gne(C9,r),h=u.currentTabStopId===d,f=N9(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:v}=u;return S.useEffect(()=>{if(s)return p(),()=>y()},[s,p,y]),n.jsx(gE.ItemSlot,{scope:r,id:d,focusable:s,active:i,children:n.jsx(xn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:e,onMouseDown:dn(t.onMouseDown,g=>{s?u.onItemFocus(d):g.preventDefault()}),onFocus:dn(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:dn(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=bne(g,u.orientation,u.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=f().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const C=w.indexOf(g.currentTarget);w=u.loop?jne(w,C+1):w.slice(C+1)}setTimeout(()=>P9(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});E9.displayName=C9;var xne={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yne(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function bne(t,e,r){const s=yne(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return xne[s]}function P9(t,e=!1){const r=document.activeElement;for(const s of t)if(s===r||(s.focus({preventScroll:e}),document.activeElement!==r))return}function jne(t,e){return t.map((r,s)=>t[(e+s)%t.length])}var wne=A9,Nne=E9,Sne=S.createContext(void 0);function Ane(t){const e=S.useContext(Sne);return t||e||"ltr"}var Cne=Yg[" useId ".trim().toString()]||(()=>{}),Ene=0;function Pne(t){const[e,r]=S.useState(Cne());return ud(()=>{r(s=>s??String(Ene++))},[t]),t||(e?`radix-${e}`:"")}var Oj="Tabs",[Tne,lPe]=cf(Oj,[S9]),T9=S9(),[_ne,aT]=Tne(Oj),_9=S.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Ane(l),[h,f]=$0({prop:s,onChange:i,defaultProp:a??"",caller:Oj});return n.jsx(_ne,{scope:r,baseId:Pne(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:n.jsx(xn.div,{dir:u,"data-orientation":o,...d,ref:e})})});_9.displayName=Oj;var I9="TabsList",D9=S.forwardRef((t,e)=>{const{__scopeTabs:r,loop:s=!0,...i}=t,a=aT(I9,r),o=T9(r);return n.jsx(wne,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:n.jsx(xn.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});D9.displayName=I9;var k9="TabsTrigger",O9=S.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,disabled:i=!1,...a}=t,o=aT(k9,r),l=T9(r),c=M9(o.baseId,s),d=F9(o.baseId,s),u=s===o.value;return n.jsx(Nne,{asChild:!0,...l,focusable:!i,active:u,children:n.jsx(xn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:e,onMouseDown:dn(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:dn(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:dn(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(s)})})})});O9.displayName=k9;var R9="TabsContent",L9=S.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,forceMount:i,children:a,...o}=t,l=aT(R9,r),c=M9(l.baseId,s),d=F9(l.baseId,s),u=s===l.value,h=S.useRef(u);return S.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),n.jsx(qm,{present:i||u,children:({present:f})=>n.jsx(xn.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});L9.displayName=R9;function M9(t,e){return`${t}-trigger-${e}`}function F9(t,e){return`${t}-content-${e}`}var Ine=_9,$9=D9,B9=O9,z9=L9;const fn=Ine,sn=S.forwardRef(({className:t,...e},r)=>n.jsx($9,{ref:r,className:pt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));sn.displayName=$9.displayName;const dt=S.forwardRef(({className:t,...e},r)=>n.jsx(B9,{ref:r,className:pt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));dt.displayName=B9.displayName;const ht=S.forwardRef(({className:t,...e},r)=>n.jsx(z9,{ref:r,className:pt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ht.displayName=z9.displayName;function Dne(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function kne(t){const[e,r]=S.useState(void 0);return ud(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),e}var Rj="Checkbox",[One,cPe]=cf(Rj),[Rne,oT]=One(Rj);function Lne(t){const{__scopeCheckbox:e,checked:r,children:s,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[f,p]=$0({prop:r,defaultProp:i??!1,onChange:c,caller:Rj}),[y,v]=S.useState(null),[g,b]=S.useState(null),j=S.useRef(!1),w=y?!!o||!!y.closest("form"):!0,C={checked:f,disabled:a,setChecked:p,control:y,setControl:v,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:j,required:d,defaultChecked:zh(i)?!1:i,isFormControl:w,bubbleInput:g,setBubbleInput:b};return n.jsx(Rne,{scope:e,...C,children:Mne(h)?h(C):s})}var q9="CheckboxTrigger",U9=S.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...s},i)=>{const{control:a,value:o,disabled:l,checked:c,required:d,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:y}=oT(q9,t),v=Ei(i,u),g=S.useRef(c);return S.useEffect(()=>{const b=a?.form;if(b){const j=()=>h(g.current);return b.addEventListener("reset",j),()=>b.removeEventListener("reset",j)}},[a,h]),n.jsx(xn.button,{type:"button",role:"checkbox","aria-checked":zh(c)?"mixed":c,"aria-required":d,"data-state":K9(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:v,onKeyDown:dn(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:dn(r,b=>{h(j=>zh(j)?!0:!j),y&&p&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});U9.displayName=q9;var lT=S.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return n.jsx(Lne,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:s,form:u,value:c,internal_do_not_use_render:({isFormControl:f})=>n.jsxs(n.Fragment,{children:[n.jsx(U9,{...h,ref:e,__scopeCheckbox:r}),f&&n.jsx(G9,{__scopeCheckbox:r})]})})});lT.displayName=Rj;var V9="CheckboxIndicator",H9=S.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:s,...i}=t,a=oT(V9,r);return n.jsx(qm,{present:s||zh(a.checked)||a.checked===!0,children:n.jsx(xn.span,{"data-state":K9(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});H9.displayName=V9;var W9="CheckboxBubbleInput",G9=S.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:s,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:d,value:u,form:h,bubbleInput:f,setBubbleInput:p}=oT(W9,t),y=Ei(r,p),v=Dne(a),g=kne(s);S.useEffect(()=>{const j=f;if(!j)return;const w=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(w,"checked").set,N=!i.current;if(v!==a&&E){const A=new Event("click",{bubbles:N});j.indeterminate=zh(a),E.call(j,zh(a)?!1:a),j.dispatchEvent(A)}},[f,v,a,i]);const b=S.useRef(zh(a)?!1:a);return n.jsx(xn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:d,value:u,form:h,...e,tabIndex:-1,ref:y,style:{...e.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});G9.displayName=W9;function Mne(t){return typeof t=="function"}function zh(t){return t==="indeterminate"}function K9(t){return zh(t)?"indeterminate":t?"checked":"unchecked"}const tr=S.forwardRef(({className:t,...e},r)=>n.jsx(lT,{ref:r,className:pt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:n.jsx(H9,{className:pt("flex items-center justify-center text-current"),children:n.jsx(Nj,{className:"h-4 w-4"})})}));tr.displayName=lT.displayName;function Fne({settings:t,onChange:e}){const r=(o,l)=>{e({[o]:l})},s=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HT)"},{value:"UTC",label:"Universal Time (UTC)"}],i=[{value:"user",label:"User"},{value:"sales",label:"Sales"},{value:"service",label:"Service"},{value:"manager",label:"Manager"},{value:"admin",label:"Admin"}],a=[{value:"minimal",label:"Minimal"},{value:"standard",label:"Standard"},{value:"verbose",label:"Verbose"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"systemName",children:"System Name"}),n.jsx(Te,{id:"systemName",value:t.systemName||"",onChange:o=>r("systemName",o.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"systemVersion",children:"System Version"}),n.jsx(Te,{id:"systemVersion",value:t.systemVersion||"",onChange:o=>r("systemVersion",o.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"supportEmail",children:"Support Email"}),n.jsx(Te,{id:"supportEmail",type:"email",value:t.supportEmail||"",onChange:o=>r("supportEmail",o.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"supportPhone",children:"Support Phone"}),n.jsx(Te,{id:"supportPhone",value:t.supportPhone||"",onChange:o=>r("supportPhone",o.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"timezone",children:"Default Timezone"}),n.jsxs(nt,{value:t.timezone||"America/New_York",onValueChange:o=>r("timezone",o),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:s.map(o=>n.jsx(he,{value:o.value,children:o.label},o.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defaultUserRole",children:"Default User Role"}),n.jsxs(nt,{value:t.defaultUserRole||"user",onValueChange:o=>r("defaultUserRole",o),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:i.map(o=>n.jsx(he,{value:o.value,children:o.label},o.value))})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Maintenance Mode"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"maintenanceMode",checked:t.maintenanceMode||!1,onCheckedChange:o=>r("maintenanceMode",!!o)}),n.jsx(ue,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"})]}),t.maintenanceMode&&n.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md flex items-start space-x-2",children:[n.jsx(ao,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-800",children:"Warning"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Enabling maintenance mode will prevent all users from accessing the system except for administrators."})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"maintenanceMessage",children:"Maintenance Message"}),n.jsx(kr,{id:"maintenanceMessage",value:t.maintenanceMessage||"",onChange:o=>r("maintenanceMessage",o.target.value),placeholder:"Enter message to display during maintenance",className:"max-w-md"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audit Logging"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"auditLogRetentionDays",children:"Audit Log Retention (Days)"}),n.jsx(Te,{id:"auditLogRetentionDays",type:"number",value:t.auditLogRetentionDays||0,onChange:o=>r("auditLogRetentionDays",parseInt(o.target.value)),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"auditLogLevel",children:"Audit Log Level"}),n.jsxs(nt,{value:t.auditLogLevel||"standard",onValueChange:o=>r("auditLogLevel",o),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:a.map(o=>n.jsx(he,{value:o.value,children:o.label},o.value))})]})]})]})]})]})}function $ne({settings:t,onChange:e}){const r=(a,o)=>{e({[a]:o})},s=[{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"},{value:"CAD",label:"Canadian Dollar (CAD)"},{value:"AUD",label:"Australian Dollar (AUD)"}],i=[{value:"none",label:"None"},{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Currency Settings"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"currency",children:"Default Currency"}),n.jsxs(nt,{value:t.currency||"USD",onValueChange:a=>r("currency",a),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:s.map(a=>n.jsx(he,{value:a.value,children:a.label},a.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"currencySymbol",children:"Currency Symbol"}),n.jsx(Te,{id:"currencySymbol",value:t.currencySymbol||"$",onChange:a=>r("currencySymbol",a.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"taxRate",children:"Default Tax Rate (%)"}),n.jsx(Te,{id:"taxRate",type:"number",step:"0.01",value:t.taxRate*100||0,onChange:a=>r("taxRate",parseFloat(a.target.value)/100),className:"max-w-md"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Gateway Integration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"paymentGateway",children:"Select Payment Gateway"}),n.jsxs(nt,{value:t.paymentGateway||"none",onValueChange:a=>r("paymentGateway",a),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:i.map(a=>n.jsx(he,{value:a.value,children:a.label},a.value))})]})]}),t.paymentGateway==="stripe"&&n.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:"Stripe Configuration"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"stripePublishableKey",children:"Stripe Publishable Key"}),n.jsx(Te,{id:"stripePublishableKey",value:t.stripePublishableKey||"",onChange:a=>r("stripePublishableKey",a.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"stripeSecretKey",children:"Stripe Secret Key"}),n.jsx(Te,{id:"stripeSecretKey",type:"password",value:t.stripeSecretKey||"",onChange:a=>r("stripeSecretKey",a.target.value),className:"max-w-md"})]})]}),t.paymentGateway==="paypal"&&n.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:"PayPal Configuration"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"paypalClientId",children:"PayPal Client ID"}),n.jsx(Te,{id:"paypalClientId",value:t.paypalClientId||"",onChange:a=>r("paypalClientId",a.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"paypalClientSecret",children:"PayPal Client Secret"}),n.jsx(Te,{id:"paypalClientSecret",type:"password",value:t.paypalClientSecret||"",onChange:a=>r("paypalClientSecret",a.target.value),className:"max-w-md"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"enableSubscriptions",checked:t.enableSubscriptions||!1,onCheckedChange:a=>r("enableSubscriptions",!!a)}),n.jsx(ue,{htmlFor:"enableSubscriptions",children:"Enable Subscription Payments"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"enableInvoiceGeneration",checked:t.enableInvoiceGeneration||!1,onCheckedChange:a=>r("enableInvoiceGeneration",!!a)}),n.jsx(ue,{htmlFor:"enableInvoiceGeneration",children:"Enable Automatic Invoice Generation"})]})]})]})]})}function Bne({settings:t,onChange:e}){const r=(i,a)=>{e({[i]:a})},s=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Provider Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsProvider",children:"SMS Provider"}),n.jsxs(nt,{value:t.smsProvider||"none",onValueChange:i=>r("smsProvider",i),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:s.map(i=>n.jsx(he,{value:i.value,children:i.label},i.value))})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"smsEnabled",checked:t.smsEnabled||!1,onCheckedChange:i=>r("smsEnabled",!!i)}),n.jsx(ue,{htmlFor:"smsEnabled",children:"Enable SMS Notifications"})]}),t.smsProvider==="twilio"&&n.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:"Twilio Configuration"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"twilioAccountSid",children:"Twilio Account SID"}),n.jsx(Te,{id:"twilioAccountSid",value:t.twilioAccountSid||"",onChange:i=>r("twilioAccountSid",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"twilioAuthToken",children:"Twilio Auth Token"}),n.jsx(Te,{id:"twilioAuthToken",type:"password",value:t.twilioAuthToken||"",onChange:i=>r("twilioAuthToken",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"twilioPhoneNumber",children:"Twilio Phone Number"}),n.jsx(Te,{id:"twilioPhoneNumber",value:t.twilioPhoneNumber||"",onChange:i=>r("twilioPhoneNumber",i.target.value),placeholder:"+15551234567",className:"max-w-md"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +15551234567)"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Templates"}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Ps,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-800",children:"SMS Templates"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"SMS templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function zne({settings:t,onChange:e}){const r=(i,a)=>{e({[i]:a})},s=[{value:"none",label:"None"},{value:"smtp",label:"SMTP"},{value:"sendgrid",label:"SendGrid"},{value:"mailgun",label:"Mailgun"},{value:"ses",label:"Amazon SES"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Provider Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailProvider",children:"Email Provider"}),n.jsxs(nt,{value:t.emailProvider||"none",onValueChange:i=>r("emailProvider",i),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:s.map(i=>n.jsx(he,{value:i.value,children:i.label},i.value))})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"emailEnabled",checked:t.emailEnabled||!1,onCheckedChange:i=>r("emailEnabled",!!i)}),n.jsx(ue,{htmlFor:"emailEnabled",children:"Enable Email Notifications"})]}),t.emailProvider==="smtp"&&n.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:"SMTP Configuration"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smtpHost",children:"SMTP Host"}),n.jsx(Te,{id:"smtpHost",value:t.smtpHost||"",onChange:i=>r("smtpHost",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smtpPort",children:"SMTP Port"}),n.jsx(Te,{id:"smtpPort",type:"number",value:t.smtpPort||587,onChange:i=>r("smtpPort",parseInt(i.target.value)),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smtpUsername",children:"SMTP Username"}),n.jsx(Te,{id:"smtpUsername",value:t.smtpUsername||"",onChange:i=>r("smtpUsername",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smtpPassword",children:"SMTP Password"}),n.jsx(Te,{id:"smtpPassword",type:"password",value:t.smtpPassword||"",onChange:i=>r("smtpPassword",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"smtpSecure",checked:t.smtpSecure||!1,onCheckedChange:i=>r("smtpSecure",!!i)}),n.jsx(ue,{htmlFor:"smtpSecure",children:"Use SSL/TLS (Secure Connection)"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailFromAddress",children:"From Email Address"}),n.jsx(Te,{id:"emailFromAddress",type:"email",value:t.emailFromAddress||"",onChange:i=>r("emailFromAddress",i.target.value),placeholder:"noreply@example.com",className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailFromName",children:"From Name"}),n.jsx(Te,{id:"emailFromName",value:t.emailFromName||"",onChange:i=>r("emailFromName",i.target.value),placeholder:"Your Company Name",className:"max-w-md"})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Templates"}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-md",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(Ui,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-800",children:"Email Templates"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Email templates can be configured in the Company Settings area under Notification Templates."})]})]})})]})]})}function qne({settings:t,onChange:e}){const r=(i,a)=>{e({[i]:a})},s=[{value:"none",label:"None"},{value:"twilio",label:"Twilio"}];return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Voice Provider Configuration"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"voiceProvider",children:"Voice Provider"}),n.jsxs(nt,{value:t.voiceProvider||"none",onValueChange:i=>r("voiceProvider",i),children:[n.jsx(et,{className:"max-w-md",children:n.jsx(st,{})}),n.jsx(tt,{children:s.map(i=>n.jsx(he,{value:i.value,children:i.label},i.value))})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"voiceEnabled",checked:t.voiceEnabled||!1,onCheckedChange:i=>r("voiceEnabled",!!i)}),n.jsx(ue,{htmlFor:"voiceEnabled",children:"Enable Voice Features"})]}),t.voiceProvider==="twilio"&&n.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[n.jsx("h4",{className:"font-medium",children:"Twilio Voice Configuration"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"twilioVoiceSid",children:"Twilio Account SID"}),n.jsx(Te,{id:"twilioVoiceSid",value:t.twilioVoiceSid||"",onChange:i=>r("twilioVoiceSid",i.target.value),className:"max-w-md"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"twilioVoiceAuthToken",children:"Twilio Auth Token"}),n.jsx(Te,{id:"twilioVoiceAuthToken",type:"password",value:t.twilioVoiceAuthToken||"",onChange:i=>r("twilioVoiceAuthToken",i.target.value),className:"max-w-md"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This is typically the same Account SID and Auth Token used for SMS, but can be different if needed."})]})]})]})})}const K2={appName:"Renter Insight",appLogo:"/logo.svg",contactEmail:"support@renterinsight.com",contactPhone:"+1 (555) 123-4567",address:"123 Main St, Anytown, USA",website:"https://www.renterinsight.com",timezone:"America/Los_Angeles",dateFormat:"MM/DD/YYYY",timeFormat:"hh:mm A",currency:"USD",currencySymbol:"$",language:"en",maintenanceMode:!1,welcomeMessage:"Welcome to Renter Insight!",paymentGateway:"stripe",stripePublishableKey:"",stripeSecretKey:"",paypalClientId:"",paypalClientSecret:"",enableSubscriptions:!0,taxRate:.05,enableInvoiceGeneration:!0,smsProvider:"twilio",twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsEnabled:!0,smsTemplates:[],emailProvider:"smtp",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!1,emailFromAddress:"noreply@example.com",emailFromName:"Renter Insight",emailEnabled:!0,emailTemplates:[],voiceProvider:"twilio",twilioVoiceSid:"",twilioVoiceAuthToken:"",voiceEnabled:!1,passwordMinLength:8,passwordRequiresUppercase:!0,passwordRequiresLowercase:!0,passwordRequiresNumber:!0,passwordRequiresSymbol:!0,twoFactorAuthEnabled:!1,sessionTimeout:3600,failedLoginAttemptsLockout:5,lockoutDuration:300,googleMapsApiKey:"",slackWebhookUrl:"",googleAnalyticsTrackingId:"",mixpanelProjectId:"",primaryColor:"#4F46E5",secondaryColor:"#10B981",fontFamily:"Inter, sans-serif",termsOfServiceUrl:"/terms",privacyPolicyUrl:"/privacy",supportPageUrl:"/support"};function Une(){const[t,e]=S.useState(K2),[r,s]=S.useState(!0),[i,a]=S.useState(null);S.useEffect(()=>{try{const c=localStorage.getItem("platformSettings");c&&e({...K2,...JSON.parse(c)})}catch(c){console.error("Failed to load settings from local storage",c),a("Failed to load settings.")}finally{s(!1)}},[]);const o=S.useCallback(c=>{e(d=>{const u={...d,...c};try{localStorage.setItem("platformSettings",JSON.stringify(u))}catch(h){console.error("Failed to save settings to local storage",h),a("Failed to save settings.")}return u})},[]),l=S.useCallback(()=>{e(K2);try{localStorage.removeItem("platformSettings")}catch(c){console.error("Failed to clear settings from local storage",c),a("Failed to reset settings.")}},[]);return{settings:t,updateSettings:o,resetSettings:l,loading:r,error:i}}function Vne(){const{settings:t,updateSettings:e,resetSettings:r,loading:s,error:i}=Une(),{toast:a}=Gt(),[o,l]=S.useState("general"),c=h=>{e(h)},d=()=>{console.log("Saving settings:",t),a({title:"Settings Saved",description:"Your platform settings have been updated."})},u=()=>{r(),a({title:"Settings Reset",description:"All settings have been reset to their default values."})};return s?n.jsx("div",{children:"Loading settings..."}):i?n.jsxs("div",{className:"text-red-500",children:["Error: ",i]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Platform Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage global platform configurations."})]}),n.jsxs("div",{className:"space-x-2",children:[n.jsx(re,{variant:"outline",onClick:u,children:"Reset to Defaults"}),n.jsx(re,{onClick:d,children:"Save Changes"})]})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Configuration"})}),n.jsx(pe,{children:n.jsxs(fn,{value:o,onValueChange:l,className:"w-full",children:[n.jsxs(sn,{className:"grid w-full grid-cols-5",children:[" ",n.jsx(dt,{value:"general",children:"General"}),n.jsx(dt,{value:"payment",children:"Payment"}),n.jsx(dt,{value:"sms",children:"SMS"}),n.jsx(dt,{value:"email",children:"Email"}),n.jsx(dt,{value:"voice",children:"Voice"})]}),n.jsx(ht,{value:"general",children:n.jsx(Fne,{settings:t,onChange:c})}),n.jsx(ht,{value:"payment",children:n.jsx($ne,{settings:t,onChange:c})}),n.jsx(ht,{value:"sms",children:n.jsx(Bne,{settings:t,onChange:c})}),n.jsx(ht,{value:"email",children:n.jsx(zne,{settings:t,onChange:c})}),n.jsx(ht,{value:"voice",children:n.jsx(qne,{settings:t,onChange:c})})]})})]})]})}const Y9=S.createContext(void 0);function Gm(){const t=S.useContext(Y9);if(t===void 0)throw new Error("usePortal must be used within a PortalProvider");return t}function Hne({children:t,impersonatedUser:e,fallbackUser:r}){const s=e?{id:e.id,name:e.name,email:e.email}:null,i=!!s;S.useEffect(()=>{console.log("PortalProvider rendered/re-rendered."),console.log("Received impersonatedUser prop:",e),console.log("Calculated proxiedClient:",s),console.log("Is proxying:",i)},[e,s,i]);const c={proxiedClient:s,isProxying:i,getDisplayName:()=>s?s.name:r?.name||"User",getDisplayEmail:()=>s?s.email:r?.email||"",getCustomerId:()=>s?s.id:"portal-customer-001"};return n.jsx(Y9.Provider,{value:c,children:t})}let X9=class extends S.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r})}handleReload=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsxs(je,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(ao,{className:"h-6 w-6 text-red-600"})}),n.jsx(Ne,{className:"text-xl text-red-900",children:"Something went wrong"}),n.jsx(Ge,{children:"An unexpected error occurred while rendering this component."})]}),n.jsxs(pe,{className:"space-y-4",children:[this.state.error&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[n.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Error:"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.state.error.message})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(re,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:"Try Again"}),n.jsxs(re,{onClick:this.handleReload,className:"flex-1",children:[n.jsx(eB,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"If this problem persists, please contact support."})})]})]})}):this.props.children}};const cT={sampleUsers:[{id:"user-1",name:"John Smith",email:"john.smith@example.com",phone:"(555) 123-4567",role:"customer",status:"Active",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"user-2",name:"Sarah Johnson",email:"sarah@example.com",phone:"(555) 987-6543",role:"customer",status:"Active",createdAt:"2024-01-12T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z"},{id:"user-3",name:"Michael Davis",email:"michael.d@example.com",phone:"(555) 456-7890",role:"customer",status:"Inactive",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z"}]};var Wne=Yg[" useId ".trim().toString()]||(()=>{}),Gne=0;function Y2(t){const[e,r]=S.useState(Wne());return ud(()=>{r(s=>s??String(Gne++))},[t]),t||(e?`radix-${e}`:"")}function Bx(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...r)=>e.current?.(...r),[])}function Kne(t,e=globalThis?.document){const r=Bx(t);S.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[r,e])}var Yne="DismissableLayer",vE="dismissableLayer.update",Xne="dismissableLayer.pointerDownOutside",Zne="dismissableLayer.focusOutside",AD,Z9=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q9=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,d=S.useContext(Z9),[u,h]=S.useState(null),f=u?.ownerDocument??globalThis?.document,[,p]=S.useState({}),y=Ei(e,A=>h(A)),v=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(g),j=u?v.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,C=j>=b,E=ese(A=>{const _=A.target,k=[...d.branches].some(F=>F.contains(_));!C||k||(i?.(A),o?.(A),A.defaultPrevented||l?.())},f),N=tse(A=>{const _=A.target;[...d.branches].some(F=>F.contains(_))||(a?.(A),o?.(A),A.defaultPrevented||l?.())},f);return Kne(A=>{j===d.layers.size-1&&(s?.(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},f),S.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(AD=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),CD(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=AD)}},[u,f,r,d]),S.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),CD())},[u,d]),S.useEffect(()=>{const A=()=>p({});return document.addEventListener(vE,A),()=>document.removeEventListener(vE,A)},[]),n.jsx(xn.div,{...c,ref:y,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:dn(t.onFocusCapture,N.onFocusCapture),onBlurCapture:dn(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:dn(t.onPointerDownCapture,E.onPointerDownCapture)})});Q9.displayName=Yne;var Qne="DismissableLayerBranch",Jne=S.forwardRef((t,e)=>{const r=S.useContext(Z9),s=S.useRef(null),i=Ei(e,s);return S.useEffect(()=>{const a=s.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),n.jsx(xn.div,{...t,ref:i})});Jne.displayName=Qne;function ese(t,e=globalThis?.document){const r=Bx(t),s=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){J9(Xne,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>s.current=!0}}function tse(t,e=globalThis?.document){const r=Bx(t),s=S.useRef(!1);return S.useEffect(()=>{const i=a=>{a.target&&!s.current&&J9(Zne,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function CD(){const t=new CustomEvent(vE);document.dispatchEvent(t)}function J9(t,e,r,{discrete:s}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),s?L4(i,a):i.dispatchEvent(a)}var X2="focusScope.autoFocusOnMount",Z2="focusScope.autoFocusOnUnmount",ED={bubbles:!1,cancelable:!0},rse="FocusScope",ez=S.forwardRef((t,e)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=t,[l,c]=S.useState(null),d=Bx(i),u=Bx(a),h=S.useRef(null),f=Ei(e,v=>c(v)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(s){let v=function(w){if(p.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:Ah(h.current,{select:!0})},g=function(w){if(p.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||Ah(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&Ah(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",g);const j=new MutationObserver(b);return l&&j.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",g),j.disconnect()}}},[s,l,p.paused]),S.useEffect(()=>{if(l){TD.add(p);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(X2,ED);l.addEventListener(X2,d),l.dispatchEvent(b),b.defaultPrevented||(nse(lse(tz(l)),{select:!0}),document.activeElement===v&&Ah(l))}return()=>{l.removeEventListener(X2,d),setTimeout(()=>{const b=new CustomEvent(Z2,ED);l.addEventListener(Z2,u),l.dispatchEvent(b),b.defaultPrevented||Ah(v??document.body,{select:!0}),l.removeEventListener(Z2,u),TD.remove(p)},0)}}},[l,d,u,p]);const y=S.useCallback(v=>{if(!r&&!s||p.paused)return;const g=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(g&&b){const j=v.currentTarget,[w,C]=sse(j);w&&C?!v.shiftKey&&b===C?(v.preventDefault(),r&&Ah(w,{select:!0})):v.shiftKey&&b===w&&(v.preventDefault(),r&&Ah(C,{select:!0})):b===j&&v.preventDefault()}},[r,s,p.paused]);return n.jsx(xn.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});ez.displayName=rse;function nse(t,{select:e=!1}={}){const r=document.activeElement;for(const s of t)if(Ah(s,{select:e}),document.activeElement!==r)return}function sse(t){const e=tz(t),r=PD(e,t),s=PD(e.reverse(),t);return[r,s]}function tz(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function PD(t,e){for(const r of t)if(!ise(r,{upTo:e}))return r}function ise(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ase(t){return t instanceof HTMLInputElement&&"select"in t}function Ah(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&ase(t)&&e&&t.select()}}var TD=ose();function ose(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=_D(t,e),t.unshift(e)},remove(e){t=_D(t,e),t[0]?.resume()}}}function _D(t,e){const r=[...t],s=r.indexOf(e);return s!==-1&&r.splice(s,1),r}function lse(t){return t.filter(e=>e.tagName!=="A")}var cse="Portal",rz=S.forwardRef((t,e)=>{const{container:r,...s}=t,[i,a]=S.useState(!1);ud(()=>a(!0),[]);const o=r||i&&globalThis?.document?.body;return o?yj.createPortal(n.jsx(xn.div,{...s,ref:e}),o):null});rz.displayName=cse;var Q2=0;function dse(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ID()),document.body.insertAdjacentElement("beforeend",t[1]??ID()),Q2++,()=>{Q2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Q2--}},[])}function ID(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var nz=ZB(),J2=function(){},Lj=S.forwardRef(function(t,e){var r=S.useRef(null),s=S.useState({onScrollCapture:J2,onWheelCapture:J2,onTouchMoveCapture:J2}),i=s[0],a=s[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,y=t.noIsolation,v=t.inert,g=t.allowPinchZoom,b=t.as,j=b===void 0?"div":b,w=t.gapMode,C=rT(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,N=XB([r,e]),A=ma(ma({},C),i);return S.createElement(S.Fragment,null,u&&S.createElement(E,{sideCar:nz,removeScrollBar:d,shards:h,noRelative:p,noIsolation:y,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:r,gapMode:w}),o?S.cloneElement(S.Children.only(l),ma(ma({},A),{ref:N})):S.createElement(j,ma({},A,{className:c,ref:N}),l))});Lj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lj.classNames={fullWidth:gx,zeroRight:px};var xE=!1;if(typeof window<"u")try{var nb=Object.defineProperty({},"passive",{get:function(){return xE=!0,!0}});window.addEventListener("test",nb,nb),window.removeEventListener("test",nb,nb)}catch{xE=!1}var Op=xE?{passive:!1}:!1,use=function(t){return t.tagName==="TEXTAREA"},sz=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!use(t)&&r[e]==="visible")},hse=function(t){return sz(t,"overflowY")},fse=function(t){return sz(t,"overflowX")},DD=function(t,e){var r=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=iz(t,s);if(i){var a=az(t,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},mse=function(t){var e=t.scrollTop,r=t.scrollHeight,s=t.clientHeight;return[e,r,s]},pse=function(t){var e=t.scrollLeft,r=t.scrollWidth,s=t.clientWidth;return[e,r,s]},iz=function(t,e){return t==="v"?hse(e):fse(e)},az=function(t,e){return t==="v"?mse(e):pse(e)},gse=function(t,e){return t==="h"&&e==="rtl"?-1:1},vse=function(t,e,r,s,i){var a=gse(t,window.getComputedStyle(e).direction),o=a*s,l=r.target,c=e.contains(l),d=!1,u=o>0,h=0,f=0;do{if(!l)break;var p=az(t,l),y=p[0],v=p[1],g=p[2],b=v-g-a*y;(y||b)&&iz(t,l)&&(h+=b,f+=y);var j=l.parentNode;l=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(d=!0),d},sb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},kD=function(t){return[t.deltaX,t.deltaY]},OD=function(t){return t&&"current"in t?t.current:t},xse=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yse=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},bse=0,Rp=[];function jse(t){var e=S.useRef([]),r=S.useRef([0,0]),s=S.useRef(),i=S.useState(bse++)[0],a=S.useState(nT)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=YB([t.lockRef.current],(t.shards||[]).map(OD),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=S.useCallback(function(v,g){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var b=sb(v),j=r.current,w="deltaX"in v?v.deltaX:j[0]-b[0],C="deltaY"in v?v.deltaY:j[1]-b[1],E,N=v.target,A=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in v&&A==="h"&&N.type==="range")return!1;var _=DD(A,N);if(!_)return!0;if(_?E=A:(E=A==="v"?"h":"v",_=DD(A,N)),!_)return!1;if(!s.current&&"changedTouches"in v&&(w||C)&&(s.current=E),!E)return!0;var k=s.current||E;return vse(k,g,v,k==="h"?w:C)},[]),c=S.useCallback(function(v){var g=v;if(!(!Rp.length||Rp[Rp.length-1]!==a)){var b="deltaY"in g?kD(g):sb(g),j=e.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&xse(E.delta,b)})[0];if(j&&j.should){g.cancelable&&g.preventDefault();return}if(!j){var w=(o.current.shards||[]).map(OD).filter(Boolean).filter(function(E){return E.contains(g.target)}),C=w.length>0?l(g,w[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),d=S.useCallback(function(v,g,b,j){var w={name:v,delta:g,target:b,should:j,shadowParent:wse(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),u=S.useCallback(function(v){r.current=sb(v),s.current=void 0},[]),h=S.useCallback(function(v){d(v.type,kD(v),v.target,l(v,t.lockRef.current))},[]),f=S.useCallback(function(v){d(v.type,sb(v),v.target,l(v,t.lockRef.current))},[]);S.useEffect(function(){return Rp.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Op),document.addEventListener("touchmove",c,Op),document.addEventListener("touchstart",u,Op),function(){Rp=Rp.filter(function(v){return v!==a}),document.removeEventListener("wheel",c,Op),document.removeEventListener("touchmove",c,Op),document.removeEventListener("touchstart",u,Op)}},[]);var p=t.removeScrollBar,y=t.inert;return S.createElement(S.Fragment,null,y?S.createElement(a,{styles:yse(i)}):null,p?S.createElement(t9,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function wse(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Nse=JB(nz,jse);var oz=S.forwardRef(function(t,e){return S.createElement(Lj,ma({},t,{ref:e,sideCar:Nse}))});oz.classNames=Lj.classNames;var Mj="Dialog",[lz,uPe]=cf(Mj),[Sse,pc]=lz(Mj),cz=t=>{const{__scopeDialog:e,children:r,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,l=S.useRef(null),c=S.useRef(null),[d,u]=$0({prop:s,defaultProp:i??!1,onChange:a,caller:Mj});return n.jsx(Sse,{scope:e,triggerRef:l,contentRef:c,contentId:Y2(),titleId:Y2(),descriptionId:Y2(),open:d,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};cz.displayName=Mj;var dz="DialogTrigger",uz=S.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,i=pc(dz,r),a=Ei(e,i.triggerRef);return n.jsx(xn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":hT(i.open),...s,ref:a,onClick:dn(t.onClick,i.onOpenToggle)})});uz.displayName=dz;var dT="DialogPortal",[Ase,hz]=lz(dT,{forceMount:void 0}),fz=t=>{const{__scopeDialog:e,forceMount:r,children:s,container:i}=t,a=pc(dT,e);return n.jsx(Ase,{scope:e,forceMount:r,children:S.Children.map(s,o=>n.jsx(qm,{present:r||a.open,children:n.jsx(rz,{asChild:!0,container:i,children:o})}))})};fz.displayName=dT;var Xb="DialogOverlay",mz=S.forwardRef((t,e)=>{const r=hz(Xb,t.__scopeDialog),{forceMount:s=r.forceMount,...i}=t,a=pc(Xb,t.__scopeDialog);return a.modal?n.jsx(qm,{present:s||a.open,children:n.jsx(Ese,{...i,ref:e})}):null});mz.displayName=Xb;var Cse=Pm("DialogOverlay.RemoveScroll"),Ese=S.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,i=pc(Xb,r);return n.jsx(oz,{as:Cse,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(xn.div,{"data-state":hT(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Dm="DialogContent",pz=S.forwardRef((t,e)=>{const r=hz(Dm,t.__scopeDialog),{forceMount:s=r.forceMount,...i}=t,a=pc(Dm,t.__scopeDialog);return n.jsx(qm,{present:s||a.open,children:a.modal?n.jsx(Pse,{...i,ref:e}):n.jsx(Tse,{...i,ref:e})})});pz.displayName=Dm;var Pse=S.forwardRef((t,e)=>{const r=pc(Dm,t.__scopeDialog),s=S.useRef(null),i=Ei(e,r.contentRef,s);return S.useEffect(()=>{const a=s.current;if(a)return KB(a)},[]),n.jsx(gz,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:dn(t.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:dn(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:dn(t.onFocusOutside,a=>a.preventDefault())})}),Tse=S.forwardRef((t,e)=>{const r=pc(Dm,t.__scopeDialog),s=S.useRef(!1),i=S.useRef(!1);return n.jsx(gz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||r.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),gz=S.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=t,l=pc(Dm,r),c=S.useRef(null),d=Ei(e,c);return dse(),n.jsxs(n.Fragment,{children:[n.jsx(ez,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(Q9,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hT(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(_se,{titleId:l.titleId}),n.jsx(Dse,{contentRef:c,descriptionId:l.descriptionId})]})]})}),uT="DialogTitle",vz=S.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,i=pc(uT,r);return n.jsx(xn.h2,{id:i.titleId,...s,ref:e})});vz.displayName=uT;var xz="DialogDescription",yz=S.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,i=pc(xz,r);return n.jsx(xn.p,{id:i.descriptionId,...s,ref:e})});yz.displayName=xz;var bz="DialogClose",jz=S.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,i=pc(bz,r);return n.jsx(xn.button,{type:"button",...s,ref:e,onClick:dn(t.onClick,()=>i.onOpenChange(!1))})});jz.displayName=bz;function hT(t){return t?"open":"closed"}var wz="DialogTitleWarning",[hPe,Nz]=RX(wz,{contentName:Dm,titleName:uT,docsSlug:"dialog"}),_se=({titleId:t})=>{const e=Nz(wz),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Ise="DialogDescriptionWarning",Dse=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Nz(Ise).contentName}}.`;return S.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},kse=cz,Ose=uz,Rse=fz,Sz=mz,Az=pz,Cz=vz,Ez=yz,Lse=jz;const RD=kse,Mse=Ose,Fse=Rse,$se=z0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pz=S.forwardRef(({side:t="right",className:e,children:r,...s},i)=>n.jsxs(Fse,{children:[n.jsx(Tz,{}),n.jsxs(Az,{ref:i,className:pt($se({side:t}),e),...s,children:[r,n.jsxs(Lse,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pz.displayName=Az.displayName;const Tz=S.forwardRef(({className:t,...e},r)=>n.jsx(Sz,{className:pt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));Tz.displayName=Sz.displayName;const Bse=S.forwardRef(({className:t,...e},r)=>n.jsx(Cz,{ref:r,className:pt("text-lg font-semibold text-foreground",t),...e}));Bse.displayName=Cz.displayName;const zse=S.forwardRef(({className:t,...e},r)=>n.jsx(Ez,{ref:r,className:pt("text-sm text-muted-foreground",t),...e}));zse.displayName=Ez.displayName;const Jn={termOptions:[12,24,36,48,60,72],interestRates:[5,6.5,7.25,8,9.99],paymentFrequencies:["Monthly","Bi-Weekly","Weekly"],statusOptions:["Current","Late","Default","Paid Off"],defaultLoan:{amount:25e3,rate:7.25,termMonths:60,downPayment:3e3,startDate:"2023-01-01"},sampleLoans:[{id:"loan-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:"Current",remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:"Current",remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"}],samplePayments:[{id:"pmt-001",loanId:"loan-001",paymentDate:"2024-01-15T00:00:00Z",amount:895.5,principalAmount:645.3,interestAmount:250.2,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",processedDate:"2024-01-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-002",loanId:"loan-001",paymentDate:"2023-12-15T00:00:00Z",amount:895.5,principalAmount:641.85,interestAmount:253.65,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",processedDate:"2023-12-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-003",loanId:"loan-002",paymentDate:"2024-01-01T00:00:00Z",amount:1025.75,principalAmount:692.4,interestAmount:333.35,status:"Completed",paymentMethod:"Check",transactionId:"CHK-20240101-002",processedDate:"2024-01-02T10:15:00Z",notes:"Check payment deposited"},{id:"pmt-004",loanId:"loan-001",paymentDate:"2024-02-15T00:00:00Z",amount:895.5,principalAmount:648.8,interestAmount:246.7,status:"Pending",paymentMethod:"ACH",transactionId:null,processedDate:null,notes:"Scheduled automatic payment"}],formDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60,paymentFrequency:"Monthly",startDate:"",customerId:"",vehicleId:"",notes:""},paymentMethods:["ACH","Check","Credit Card","Cash","Wire Transfer"],loanTypes:["Purchase","Refinance","Equity"],statusColors:{Current:"bg-green-100 text-green-800",Late:"bg-yellow-100 text-yellow-800",Default:"bg-red-100 text-red-800","Paid Off":"bg-blue-100 text-blue-800"},paymentStatusColors:{Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Failed:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"},calculatorDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60},amortizationSample:[{paymentNumber:1,paymentDate:"2024-02-15",paymentAmount:895.5,principalAmount:645.3,interestAmount:250.2,remainingBalance:24354.7},{paymentNumber:2,paymentDate:"2024-03-15",paymentAmount:895.5,principalAmount:648.85,interestAmount:246.65,remainingBalance:23705.85},{paymentNumber:3,paymentDate:"2024-04-15",paymentAmount:895.5,principalAmount:652.42,interestAmount:243.08,remainingBalance:23053.43}]},qse={loans:{id:"loans",name:"Loans",description:"Customer loan accounts and payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"sampleLoans",description:"Customer loan accounts",customerIdField:"customerId",customerNameField:"customerName"}]},loanPayments:{id:"loanPayments",name:"Loan Payments",description:"Customer loan payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"samplePayments",description:"Loan payment history",filterFunction:(t,e,r)=>{const{mockFinance:s}=require("@/mocks/financeMock");return s.sampleLoans.filter(a=>a.customerId===e||a.customerName===r).some(a=>a.id===t.loanId)}}]},agreements:{id:"agreements",name:"Agreements",description:"Customer agreements and contracts",component:"ClientAgreements",mockDataSources:[{path:"@/mocks/agreementsMock",exportName:"mockAgreements",dataKey:"sampleAgreements",description:"Customer agreements and contracts",customerIdField:"customerId",customerNameField:"customerName"}]},financeApplications:{id:"finance-applications",name:"Finance Applications",description:"Customer finance application submissions",component:"PortalApplicationView",mockDataSources:[{path:"@/modules/finance-application/mocks/financeApplicationMock",exportName:"mockFinanceApplications",dataKey:"sampleApplications",description:"Finance application submissions",customerIdField:"customerId",customerNameField:"customerName"}]},serviceTickets:{id:"service-tickets",name:"Service Tickets",description:"Customer service requests and tickets",component:"ClientServiceTickets",mockDataSources:[{path:"@/mocks/serviceOpsMock",exportName:"mockServiceOps",dataKey:"sampleTickets",description:"Service tickets and requests",customerIdField:"customerId",customerNameField:"customerName"}]},quotes:{id:"quotes",name:"Quotes",description:"Customer quotes and estimates",component:"ClientQuotes",mockDataSources:[{path:"@/mocks/quoteBuilderMock",exportName:"mockQuoteBuilder",dataKey:"sampleQuotes",description:"Customer quotes and estimates",customerIdField:"customerId",customerNameField:"customerName"}]},invoices:{id:"invoices",name:"Invoices",description:"Customer invoices and billing",component:"ClientInvoices",mockDataSources:[{path:"@/mocks/invoiceMock",exportName:"mockInvoice",dataKey:"sampleInvoices",description:"Customer invoices and billing",customerNameField:"customerName"}]},deliveries:{id:"deliveries",name:"Deliveries",description:"Customer delivery tracking",component:"ClientDeliveries",mockDataSources:[{path:"@/mocks/deliveryMock",exportName:"mockDelivery",dataKey:"sampleDeliveries",description:"Delivery tracking and status",customerIdField:"customerId",customerNameField:"customerName"}]}};function Use(t,e){const r={};return Object.entries(qse).forEach(([s,i])=>{r[s]=[],i.mockDataSources.forEach(a=>{try{const d=(require(a.path)[a.exportName][a.dataKey]||[]).filter(u=>{if(a.filterFunction)return a.filterFunction(u,t,e);const h=a.customerIdField&&u[a.customerIdField]===t,f=a.customerNameField&&u[a.customerNameField]===e;return h||f});r[s].push(...d)}catch(o){console.warn(`Failed to load mock data from ${a.path}:`,o)}})}),r}function fT(t,e){const[r,s]=be.useState({}),[i,a]=be.useState(!0);return be.useEffect(()=>{a(!0);try{const o=Use(t,e);s(o)}catch(o){console.error("Failed to discover customer data:",o)}finally{a(!1)}},[t,e]),{customerData:r,loading:i,getSectionData:o=>r[o]||[],getSectionCount:o=>r[o]?.length||0,hasDataForSection:o=>(r[o]?.length||0)>0}}function Vse({children:t}){const{tenant:e}=lo(),{getDisplayName:r,getDisplayEmail:s,isProxying:i,proxiedClient:a}=Gm(),[o,l]=S.useState(!1),c=of(),d=[{name:"Dashboard",path:"",icon:kZ},{name:"Loans",path:"loans",icon:rr},{name:"Agreements",path:"agreements",icon:yr},{name:"Finance Applications",path:"finance-applications",icon:La},{name:"Service Tickets",path:"service-tickets",icon:xl},{name:"Settings",path:"settings",icon:Nl}],u=()=>n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"flex items-center px-4 py-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-8 w-8 bg-primary rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:e?.name?.charAt(0)||"T"})}),n.jsx("span",{className:"ml-2 text-lg font-semibold",children:e?.name||"Portal"})]})}),n.jsx("nav",{className:"flex-1 px-4 space-y-1",children:d.map(h=>{const f=h.path===""?"/portalclient":`/portalclient/${h.path}`,p=c.pathname===f||h.path===""&&c.pathname==="/portalclient/";return n.jsxs(UC,{to:h.path,className:`
              group flex items-center px-2 py-2 text-sm font-medium rounded-md
              ${p?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}
            `,children:[n.jsx(h.icon,{className:`mr-3 flex-shrink-0 h-5 w-5 ${p?"text-primary-foreground":"text-muted-foreground"}`}),h.name]},h.name)})}),n.jsxs("div",{className:"border-t p-4",children:[i&&a&&n.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-md",children:n.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["Viewing as: ",r()]})}),n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(vs,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:r()}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s()})]})]}),n.jsxs(re,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>window.location.href="/login",children:[n.jsx(Q$,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]});return n.jsxs("div",{className:"flex h-screen bg-background",children:[n.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col",children:n.jsx("div",{className:"flex flex-col flex-grow border-r bg-card",children:n.jsx(u,{})})}),n.jsx(RD,{open:o,onOpenChange:l,children:n.jsx(Pz,{side:"left",className:"p-0 w-64",children:n.jsx(u,{})})}),n.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[n.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b bg-card",children:[n.jsx(RD,{open:o,onOpenChange:l,children:n.jsx(Mse,{asChild:!0,children:n.jsx(re,{variant:"ghost",size:"sm",children:n.jsx(RZ,{className:"h-5 w-5"})})})}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"h-6 w-6 bg-primary rounded flex items-center justify-center",children:n.jsx("span",{className:"text-primary-foreground font-bold text-xs",children:e?.name?.charAt(0)||"T"})}),n.jsx("span",{className:"ml-2 font-semibold",children:e?.name||"Portal"})]})]}),n.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}function Hse({children:t}){return n.jsx(Vse,{children:t})}const Wse=z0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:t,variant:e,...r}){return n.jsx("div",{className:pt(Wse({variant:e}),t),...r})}var mT="Progress",pT=100,[Gse,fPe]=cf(mT),[Kse,Yse]=Gse(mT),_z=S.forwardRef((t,e)=>{const{__scopeProgress:r,value:s=null,max:i,getValueLabel:a=Xse,...o}=t;(i||i===0)&&!LD(i)&&console.error(Zse(`${i}`,"Progress"));const l=LD(i)?i:pT;s!==null&&!MD(s,l)&&console.error(Qse(`${s}`,"Progress"));const c=MD(s,l)?s:null,d=Zb(c)?a(c,l):void 0;return n.jsx(Kse,{scope:r,value:c,max:l,children:n.jsx(xn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Zb(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":kz(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});_z.displayName=mT;var Iz="ProgressIndicator",Dz=S.forwardRef((t,e)=>{const{__scopeProgress:r,...s}=t,i=Yse(Iz,r);return n.jsx(xn.div,{"data-state":kz(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});Dz.displayName=Iz;function Xse(t,e){return`${Math.round(t/e*100)}%`}function kz(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Zb(t){return typeof t=="number"}function LD(t){return Zb(t)&&!isNaN(t)&&t>0}function MD(t,e){return Zb(t)&&!isNaN(t)&&t<=e&&t>=0}function Zse(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${pT}\`.`}function Qse(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${pT} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Oz=_z,Jse=Dz;const uc=S.forwardRef(({className:t,value:e,...r},s)=>n.jsx(Oz,{ref:s,className:pt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:n.jsx(Jse,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));uc.displayName=Oz.displayName;function eie(){const{getCustomerId:t,getDisplayName:e}=Gm(),r=t(),s=e(),{customerData:i,loading:a}=fT(r,s),[o,l]=S.useState(null),c=i.loans||[],d=i.loanPayments||[],u=c.filter(v=>["Current","Active"].includes(v.status)),h=u.reduce((v,g)=>v+g.remainingBalance,0),f=u.reduce((v,g)=>v+g.monthlyPayment,0),p=v=>{switch(v){case"Current":case"Active":return"bg-green-100 text-green-800";case"Late":return"bg-yellow-100 text-yellow-800";case"Default":return"bg-red-100 text-red-800";case"Paid Off":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},y=v=>d.filter(g=>g.loanId===v).sort((g,b)=>new Date(b.paymentDate).getTime()-new Date(g.paymentDate).getTime());if(a)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(v=>n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-32 bg-gray-200 rounded"})},v))})]});if(o){const v=y(o.id),g=(o.termMonths-o.paymentsRemaining)/o.termMonths*100;return n.jsxs("div",{className:"space-y-6",children:[n.jsx(re,{variant:"ghost",onClick:()=>l(null),children:"← Back to Loans"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Loan Details"}),n.jsx("p",{className:"text-muted-foreground",children:o.vehicleInfo})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Remaining Balance"}),n.jsx("p",{className:"text-2xl font-bold",children:Fe(o.remainingBalance)})]}),n.jsx(rr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),n.jsx("p",{className:"text-2xl font-bold",children:Fe(o.monthlyPayment)})]}),n.jsx(Br,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Payment"}),n.jsx("p",{className:"text-2xl font-bold",children:wt(o.nextPaymentDate)})]}),n.jsx(Br,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payments Remaining"}),n.jsx("p",{className:"text-2xl font-bold",children:o.paymentsRemaining})]}),n.jsx(yr,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Payment Progress"}),n.jsxs(Ge,{children:[o.termMonths-o.paymentsRemaining," of ",o.termMonths," payments completed"]})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[Math.round(g),"%"]})]}),n.jsx(uc,{value:g,className:"h-3"}),n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Started: ",wt(o.startDate)]}),n.jsxs("span",{children:["Total Paid: ",Fe(o.totalPaid)]})]})]})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Payments"}),n.jsx(Ge,{children:"Your payment history for this loan"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[v.slice(0,5).map(b=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${b.status==="Completed"?"bg-green-500":b.status==="Pending"?"bg-yellow-500":"bg-red-500"}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Fe(b.amount)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[wt(b.paymentDate)," • ",b.paymentMethod]})]})]}),n.jsx(Ve,{className:b.status==="Completed"?"bg-green-100 text-green-800":b.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:b.status})]},b.id)),v.length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No payment history available"})]})]})})]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"My Loans"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your loan accounts and payment history"})]}),u.length>0&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),n.jsx("p",{className:"text-2xl font-bold",children:Fe(h)})]}),n.jsx(rr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),n.jsx("p",{className:"text-2xl font-bold",children:Fe(f)})]}),n.jsx(Br,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Loans"}),n.jsx("p",{className:"text-2xl font-bold",children:u.length})]}),n.jsx(La,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Your Loans"}),n.jsx(Ge,{children:"View details and payment history for your loans"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(v=>{const g=(v.termMonths-v.paymentsRemaining)/v.termMonths*100;return n.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:v.vehicleInfo}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loan #",v.id.slice(-6).toUpperCase()]})]}),n.jsx(Ve,{className:p(v.status),children:v.status})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Balance"}),n.jsx("p",{className:"font-semibold",children:Fe(v.remainingBalance)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),n.jsx("p",{className:"font-semibold",children:Fe(v.monthlyPayment)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Next Payment"}),n.jsx("p",{className:"font-semibold",children:wt(v.nextPaymentDate)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Payment Progress"}),n.jsxs("span",{children:[Math.round(g),"%"]})]}),n.jsx(uc,{value:g,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.termMonths-v.paymentsRemaining," of ",v.termMonths," payments completed"]})]})]}),n.jsx("div",{className:"flex items-center space-x-2 ml-4",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(v),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},v.id)}),c.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(La,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Loans Found"}),n.jsx("p",{className:"text-muted-foreground",children:"You don't have any loans associated with your account."})]})]})})]})]})}function Rz(){const{getCustomerId:t,getDisplayName:e}=Gm(),r=t(),s=e(),{customerData:i,loading:a}=fT(r,s),[o,l]=S.useState(null),c=i.agreements||[],d=h=>{switch(h){case"DRAFT":return"bg-gray-100 text-gray-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"SIGNED":return"bg-blue-100 text-blue-800";case"ACTIVE":return"bg-green-100 text-green-800";case"EXPIRED":return"bg-red-100 text-red-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=h=>{switch(h){case"PURCHASE":return n.jsx(rr,{className:"h-4 w-4"});case"LEASE":return n.jsx(Br,{className:"h-4 w-4"});case"SERVICE":return n.jsx(yr,{className:"h-4 w-4"});case"WARRANTY":return n.jsx(yr,{className:"h-4 w-4"});default:return n.jsx(yr,{className:"h-4 w-4"})}};return a?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-32 bg-gray-200 rounded"})},h))})]}):o?n.jsxs("div",{className:"space-y-6",children:[n.jsx(re,{variant:"ghost",onClick:()=>l(null),children:"← Back to Agreements"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[u(o.type),n.jsxs("h1",{className:"text-2xl font-bold",children:[o.type.charAt(0)+o.type.slice(1).toLowerCase()," Agreement"]}),n.jsx(Ve,{className:d(o.status),children:o.status})]}),n.jsx("p",{className:"text-muted-foreground",children:o.vehicleInfo})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Agreement Details"})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Basic Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Agreement ID"}),n.jsx("p",{className:"font-medium",children:o.id})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:o.type})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),n.jsx(Ve,{className:d(o.status),children:o.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:wt(o.createdAt)})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Financial Details"}),n.jsxs("div",{className:"space-y-2",children:[o.totalAmount&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),n.jsx("p",{className:"font-medium",children:Fe(o.totalAmount)})]}),o.downPayment&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Down Payment"}),n.jsx("p",{className:"font-medium",children:Fe(o.downPayment)})]}),o.monthlyPayment&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),n.jsx("p",{className:"font-medium",children:Fe(o.monthlyPayment)})]}),o.annualFee&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual Fee"}),n.jsx("p",{className:"font-medium",children:Fe(o.annualFee)})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Important Dates"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),n.jsx("p",{className:"font-medium",children:wt(o.effectiveDate)})]}),o.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),n.jsx("p",{className:"font-medium",children:wt(o.expirationDate)})]}),o.signedAt&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed Date"}),n.jsx("p",{className:"font-medium",children:wt(o.signedAt)})]})]})]}),o.terms&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Terms & Conditions"}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm",children:o.terms})})]}),o.signedBy&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-3",children:"Signature Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed By"}),n.jsx("p",{className:"font-medium",children:o.signedBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"IP Address"}),n.jsx("p",{className:"font-medium",children:o.ipAddress||"Not recorded"})]})]})]})]})]}),o.documents&&o.documents.length>0&&n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Documents"}),n.jsx(Ge,{children:"Agreement documents and attachments"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-3",children:o.documents.map(h=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(yr,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:h.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[(h.size/1024/1024).toFixed(2)," MB • Uploaded ",wt(h.uploadedAt)]})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View"]}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},h.id))})})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"My Agreements"}),n.jsx("p",{className:"text-muted-foreground",children:"View and manage your agreements and contracts"})]}),c.length>0&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Agreements"}),n.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),n.jsx(yr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold",children:c.filter(h=>h.status==="ACTIVE").length})]}),n.jsx(vs,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Signature"}),n.jsx("p",{className:"text-2xl font-bold",children:c.filter(h=>h.status==="PENDING").length})]}),n.jsx(Br,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Your Agreements"}),n.jsx(Ge,{children:"View details and status of your agreements"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(h=>n.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[u(h.type),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold",children:[h.type.charAt(0)+h.type.slice(1).toLowerCase()," Agreement"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.vehicleInfo})]}),n.jsx(Ve,{className:d(h.status),children:h.status})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),n.jsx("p",{className:"font-semibold",children:wt(h.effectiveDate)})]}),h.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),n.jsx("p",{className:"font-semibold",children:wt(h.expirationDate)})]}),(h.totalAmount||h.monthlyPayment||h.annualFee)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:h.totalAmount?"Total Amount":h.monthlyPayment?"Monthly Payment":"Annual Fee"}),n.jsx("p",{className:"font-semibold",children:Fe(h.totalAmount||h.monthlyPayment||h.annualFee)})]})]}),h.status==="PENDING"&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"Action Required:"})," This agreement is waiting for your signature."]})})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(h),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View Details"]}),h.status==="PENDING"&&n.jsx(re,{size:"sm",children:"Sign Agreement"})]})]})},h.id)),c.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Agreements Found"}),n.jsx("p",{className:"text-muted-foreground",children:"You don't have any agreements associated with your account."})]})]})})]})]})}const lu={sampleApplications:[{id:"app-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"John","last-name":"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",ssn:"***-**-1234","date-of-birth":"1985-06-15"},employment:{"employer-name":"ABC Corporation","job-title":"Software Engineer","employment-length":"3 years","monthly-income":"8500","employment-type":"full-time"},residence:{address:"123 Main St",city:"Anytown",state:"CA",zip:"12345","housing-status":"rent","monthly-payment":"2200"}},uploadedFiles:[{id:"file-001",fieldId:"pay-stubs",name:"paystub-march-2024.pdf",type:"application/pdf",size:245760,url:"/mock/paystub.pdf",uploadedAt:"2024-01-15T10:30:00Z"}],history:[{id:"hist-001",timestamp:"2024-01-10T09:30:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-002",timestamp:"2024-01-12T16:45:00Z",action:"Application Submitted",userId:"cust-001",userName:"John Smith",details:"Application submitted for review"},{id:"hist-003",timestamp:"2024-01-15T10:30:00Z",action:"Document Uploaded",userId:"cust-001",userName:"John Smith",details:"1 document(s) uploaded"},{id:"hist-004",timestamp:"2024-01-15T14:22:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from submitted to under_review",oldValue:"submitted",newValue:"under_review"}],fraudCheckStatus:"verified",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:22:00Z",submittedAt:"2024-01-12T16:45:00Z",notes:"Strong credit profile, employment verified"},{id:"app-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",templateId:"template-001",status:"draft",data:{"personal-info":{"first-name":"Maria","last-name":"Rodriguez",email:"maria.rodriguez@email.com",phone:"(555) 987-6543"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-18T11:15:00Z",updatedAt:"2024-01-18T11:15:00Z",notes:""},{id:"app-003",customerId:"cust-003",customerName:"Sarah Wilson",customerEmail:"sarah.wilson@email.com",customerPhone:"(555) 234-5678",templateId:"template-001",status:"submitted",data:{"personal-info":{"first-name":"Sarah","last-name":"Wilson",email:"sarah.wilson@email.com",phone:"(555) 234-5678",ssn:"***-**-5678","date-of-birth":"1990-03-22"},employment:{"employer-name":"Tech Solutions Inc","job-title":"Marketing Manager","employment-length":"2 years","monthly-income":"7200","employment-type":"full-time"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-20T10:15:00Z",updatedAt:"2024-01-22T09:30:00Z",submittedAt:"2024-01-22T09:30:00Z",notes:"Application submitted, awaiting initial review"},{id:"app-004",customerId:"cust-004",customerName:"Michael Chen",customerEmail:"michael.chen@email.com",customerPhone:"(555) 345-6789",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"Michael","last-name":"Chen",email:"michael.chen@email.com",phone:"(555) 345-6789",ssn:"***-**-6789","date-of-birth":"1988-11-10"},employment:{"employer-name":"Global Manufacturing","job-title":"Operations Supervisor","employment-length":"5 years","monthly-income":"9500","employment-type":"full-time"}},uploadedFiles:[{id:"file-002",fieldId:"pay-stubs",name:"paystub-january-2024.pdf",type:"application/pdf",size:198432,url:"/mock/paystub-chen.pdf",uploadedAt:"2024-01-18T11:45:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-16T14:20:00Z",updatedAt:"2024-01-23T16:15:00Z",submittedAt:"2024-01-18T12:00:00Z",reviewedAt:"2024-01-23T16:15:00Z",reviewedBy:"finance@company.com",notes:"Under review by finance team, credit check in progress",adminNotes:"Credit score: 720. Employment verified. Waiting for final bank statements."},{id:"app-005",customerId:"cust-005",customerName:"Emily Davis",customerEmail:"emily.davis@email.com",customerPhone:"(555) 456-7890",templateId:"template-001",status:"approved",data:{"personal-info":{"first-name":"Emily","last-name":"Davis",email:"emily.davis@email.com",phone:"(555) 456-7890",ssn:"***-**-7890","date-of-birth":"1985-07-14"},employment:{"employer-name":"Healthcare Partners","job-title":"Registered Nurse","employment-length":"8 years","monthly-income":"8800","employment-type":"full-time"}},uploadedFiles:[{id:"file-003",fieldId:"pay-stubs",name:"paystub-december-2023.pdf",type:"application/pdf",size:223456,url:"/mock/paystub-davis.pdf",uploadedAt:"2024-01-08T15:30:00Z"},{id:"file-004",fieldId:"tax-returns",name:"tax-return-2023.pdf",type:"application/pdf",size:445678,url:"/mock/tax-return-davis.pdf",uploadedAt:"2024-01-08T15:35:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-05T08:45:00Z",updatedAt:"2024-01-25T10:30:00Z",submittedAt:"2024-01-08T16:00:00Z",reviewedAt:"2024-01-25T10:30:00Z",reviewedBy:"finance@company.com",notes:"Excellent credit score and stable employment history. Approved for full amount.",adminNotes:"Credit score: 785. 8 years stable employment. Debt-to-income ratio: 28%. Approved for $65,000 at 6.5% APR."},{id:"app-006",customerId:"cust-006",customerName:"Robert Taylor",customerEmail:"robert.taylor@email.com",customerPhone:"(555) 567-8901",templateId:"template-001",status:"denied",data:{"personal-info":{"first-name":"Robert","last-name":"Taylor",email:"robert.taylor@email.com",phone:"(555) 567-8901",ssn:"***-**-8901","date-of-birth":"1992-12-05"},employment:{"employer-name":"Freelance Consulting","job-title":"Independent Contractor","employment-length":"6 months","monthly-income":"4500","employment-type":"self-employed"}},uploadedFiles:[],fraudCheckStatus:"flagged",createdAt:"2024-01-12T13:20:00Z",updatedAt:"2024-01-26T14:45:00Z",submittedAt:"2024-01-14T10:15:00Z",reviewedAt:"2024-01-26T14:45:00Z",reviewedBy:"finance@company.com",notes:"Insufficient employment history and income verification. Credit score below minimum requirements.",adminNotes:"Credit score: 580 (below 620 minimum). Only 6 months employment history. Self-employed income not verifiable. Recommend denial."},{id:"app-007",customerId:"cust-007",customerName:"Jennifer Brown",customerEmail:"jennifer.brown@email.com",customerPhone:"(555) 678-9012",templateId:"template-001",status:"completed",data:{"personal-info":{"first-name":"Jennifer","last-name":"Brown",email:"jennifer.brown@email.com",phone:"(555) 678-9012",ssn:"***-**-9012","date-of-birth":"1987-04-18"},employment:{"employer-name":"City School District","job-title":"Elementary Teacher","employment-length":"12 years","monthly-income":"6800","employment-type":"full-time"}},uploadedFiles:[{id:"file-005",fieldId:"pay-stubs",name:"paystub-november-2023.pdf",type:"application/pdf",size:187654,url:"/mock/paystub-brown.pdf",uploadedAt:"2023-12-15T09:20:00Z"}],fraudCheckStatus:"verified",createdAt:"2023-12-10T11:30:00Z",updatedAt:"2024-01-15T13:45:00Z",submittedAt:"2023-12-15T10:00:00Z",reviewedAt:"2023-12-20T15:30:00Z",reviewedBy:"finance@company.com",notes:"Application approved and loan funded. Customer has received financing.",adminNotes:"Credit score: 742. 12 years stable employment in education. Loan funded at $45,000 at 7.25% APR for 15 years."},{id:"app-008",customerId:"cust-008",customerName:"David Wilson",customerEmail:"david.wilson@email.com",customerPhone:"(555) 789-0123",templateId:"template-001",status:"conditionally_approved",data:{"personal-info":{"first-name":"David","last-name":"Wilson",email:"david.wilson@email.com",phone:"(555) 789-0123",ssn:"***-**-0123","date-of-birth":"1983-09-25"},employment:{"employer-name":"Regional Bank","job-title":"Loan Officer","employment-length":"4 years","monthly-income":"7800","employment-type":"full-time"}},uploadedFiles:[{id:"file-006",fieldId:"pay-stubs",name:"paystub-february-2024.pdf",type:"application/pdf",size:201234,url:"/mock/paystub-wilson.pdf",uploadedAt:"2024-01-22T14:20:00Z"}],history:[{id:"hist-027",timestamp:"2024-01-20T13:45:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-028",timestamp:"2024-01-22T14:20:00Z",action:"Document Uploaded",userId:"cust-008",userName:"David Wilson",details:"1 document(s) uploaded"},{id:"hist-029",timestamp:"2024-01-22T15:00:00Z",action:"Application Submitted",userId:"cust-008",userName:"David Wilson",details:"Application submitted for review"},{id:"hist-030",timestamp:"2024-01-27T11:30:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from under_review to conditionally_approved",oldValue:"under_review",newValue:"conditionally_approved"},{id:"hist-031",timestamp:"2024-01-27T11:30:00Z",action:"Admin Notes Updated",userId:"admin-001",userName:"Finance Admin",details:"Admin notes added/updated"}],fraudCheckStatus:"verified",createdAt:"2024-01-20T13:45:00Z",updatedAt:"2024-01-27T11:30:00Z",submittedAt:"2024-01-22T15:00:00Z",reviewedAt:"2024-01-27T11:30:00Z",reviewedBy:"finance@company.com",notes:"Conditionally approved pending additional documentation.",adminNotes:"Credit score: 695. Good employment history but needs co-signer due to recent credit inquiry. Approved for $40,000 with co-signer requirement."}],defaultTemplates:[{id:"template-001",name:"Standard Finance Application",description:"Complete finance application for manufactured homes and RVs",sections:[{id:"personal-info",title:"Personal Information",description:"Basic personal and contact information",order:1,fields:[{id:"first-name",type:"text",label:"First Name",placeholder:"Enter your first name",required:!0,order:1,validation:{minLength:2,maxLength:50}},{id:"last-name",type:"text",label:"Last Name",placeholder:"Enter your last name",required:!0,order:2,validation:{minLength:2,maxLength:50}},{id:"email",type:"email",label:"Email Address",placeholder:"Enter your email address",required:!0,order:3},{id:"phone",type:"phone",label:"Phone Number",placeholder:"(555) 123-4567",required:!0,order:4},{id:"ssn",type:"text",label:"Social Security Number",placeholder:"***-**-****",required:!0,order:5,validation:{pattern:"^\\d{3}-\\d{2}-\\d{4}$"}},{id:"date-of-birth",type:"date",label:"Date of Birth",required:!0,order:6}]},{id:"employment",title:"Employment Information",description:"Current employment and income details",order:2,fields:[{id:"employment-type",type:"select",label:"Employment Type",required:!0,order:1,options:["full-time","part-time","self-employed","retired","unemployed"]},{id:"employer-name",type:"text",label:"Employer Name",placeholder:"Enter employer name",required:!0,order:2,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"job-title",type:"text",label:"Job Title",placeholder:"Enter your job title",required:!0,order:3,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"employment-length",type:"text",label:"Length of Employment",placeholder:"e.g., 2 years 6 months",required:!0,order:4,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"monthly-income",type:"currency",label:"Monthly Gross Income",placeholder:"0.00",required:!0,order:5,validation:{min:0}}]},{id:"co-applicant",title:"Co-Applicant Information",description:"Information about co-applicant (if applicable)",order:3,fields:[{id:"has-co-applicant",type:"radio",label:"Do you have a co-applicant?",required:!0,order:1,options:["yes","no"]},{id:"co-first-name",type:"text",label:"Co-Applicant First Name",placeholder:"Enter first name",required:!1,order:2,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-last-name",type:"text",label:"Co-Applicant Last Name",placeholder:"Enter last name",required:!1,order:3,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-ssn",type:"text",label:"Co-Applicant SSN",placeholder:"***-**-****",required:!1,order:4,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}}]},{id:"residence",title:"Residence Information",description:"Current housing situation and address",order:4,fields:[{id:"address",type:"text",label:"Street Address",placeholder:"Enter your street address",required:!0,order:1},{id:"city",type:"text",label:"City",placeholder:"Enter city",required:!0,order:2},{id:"state",type:"select",label:"State",required:!0,order:3,options:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},{id:"zip",type:"text",label:"ZIP Code",placeholder:"12345",required:!0,order:4,validation:{pattern:"^\\d{5}(-\\d{4})?$"}},{id:"housing-status",type:"select",label:"Housing Status",required:!0,order:5,options:["own","rent","live-with-family","other"]},{id:"monthly-payment",type:"currency",label:"Monthly Housing Payment",placeholder:"0.00",required:!0,order:6,validation:{min:0}}]},{id:"obligations",title:"Monthly Obligations",description:"Other monthly financial obligations",order:5,fields:[{id:"credit-cards",type:"currency",label:"Credit Card Payments",placeholder:"0.00",required:!1,order:1,validation:{min:0}},{id:"auto-loans",type:"currency",label:"Auto Loan Payments",placeholder:"0.00",required:!1,order:2,validation:{min:0}},{id:"student-loans",type:"currency",label:"Student Loan Payments",placeholder:"0.00",required:!1,order:3,validation:{min:0}},{id:"other-debts",type:"currency",label:"Other Monthly Debt Payments",placeholder:"0.00",required:!1,order:4,validation:{min:0}}]},{id:"documents",title:"Required Documents",description:"Upload required financial documents",order:6,fields:[{id:"pay-stubs",type:"file",label:"Recent Pay Stubs (Last 2 months)",required:!0,order:1,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}},{id:"tax-returns",type:"file",label:"Tax Returns (Last 2 years)",required:!0,order:2,validation:{fileTypes:["pdf"],maxFileSize:10485760}},{id:"bank-statements",type:"file",label:"Bank Statements (Last 3 months)",required:!0,order:3,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}}]},{id:"consent",title:"Consent and Authorization",description:"Required consents and authorizations",order:7,fields:[{id:"credit-check-consent",type:"checkbox",label:"I authorize a credit check to be performed",required:!0,order:1},{id:"terms-agreement",type:"checkbox",label:"I agree to the terms and conditions",required:!0,order:2},{id:"signature",type:"signature",label:"Electronic Signature",required:!0,order:3}]}],isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],fieldTypes:[{value:"text",label:"Text Input"},{value:"email",label:"Email"},{value:"phone",label:"Phone Number"},{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"date",label:"Date"},{value:"select",label:"Dropdown"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkbox"},{value:"textarea",label:"Text Area"},{value:"file",label:"File Upload"},{value:"signature",label:"Electronic Signature"}],statusOptions:[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"submitted",label:"Submitted",color:"bg-blue-100 text-blue-800"},{value:"under_review",label:"Under Review",color:"bg-yellow-100 text-yellow-800"},{value:"approved",label:"Approved",color:"bg-green-100 text-green-800"},{value:"conditionally_approved",label:"Conditionally Approved",color:"bg-orange-100 text-orange-800"},{value:"denied",label:"Denied",color:"bg-red-100 text-red-800"},{value:"completed",label:"Completed",color:"bg-emerald-100 text-emerald-800"}]};function H0(){const[t,e]=S.useState([]),[r,s]=S.useState([]);S.useEffect(()=>{e(lu.sampleApplications),s(lu.defaultTemplates)},[]),S.useEffect(()=>{rn("financeApplications",t)},[t]),S.useEffect(()=>{rn("applicationTemplates",r)},[r]);const i=g=>{const b={id:`app-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:g.customerId||"",customerName:g.customerName||"",customerEmail:g.customerEmail||"",customerPhone:g.customerPhone||"",templateId:g.templateId||r[0]?.id||"",status:g.status||"draft",data:g.data||{},uploadedFiles:g.uploadedFiles||[],history:[{id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),action:"Application Created",userId:"current-user",userName:"Current User",details:`Application created with status: ${g.status||"draft"}`}],fraudCheckStatus:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:g.notes||""};return e(j=>[b,...j]),b},a=(g,b)=>{e(j=>j.map(w=>w.id===g?{...w,...b,updatedAt:new Date().toISOString(),submittedAt:b.status==="submitted"&&!w.submittedAt?new Date().toISOString():w.submittedAt,history:[...w.history,...v(w,b)]}:w))},o=g=>{e(b=>b.filter(j=>j.id!==g))},l=g=>t.find(b=>b.id===g),c=g=>t.filter(b=>b.customerId===g),d=g=>{const b={id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:g.name||"New Template",description:g.description||"",sections:g.sections||[],isActive:g.isActive!==void 0?g.isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s(j=>[b,...j]),b},u=(g,b)=>{s(j=>j.map(w=>w.id===g?{...w,...b,updatedAt:new Date().toISOString()}:w))},h=g=>{s(b=>b.filter(j=>j.id!==g))},f=g=>r.find(b=>b.id===g),p=(g,b,j)=>new Promise(w=>{const C={id:`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fieldId:b,name:j.name,type:j.type,size:j.size,url:URL.createObjectURL(j),uploadedAt:new Date().toISOString()};a(g,{uploadedFiles:[...l(g)?.uploadedFiles||[],C]}),w(C)}),y=(g,b)=>{const j=l(g);if(j){const w=j.uploadedFiles.filter(C=>C.id!==b);a(g,{uploadedFiles:w})}},v=(g,b)=>{const j=[],w=new Date().toISOString(),C="current-user",E="Current User";if(b.status&&b.status!==g.status&&j.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:w,action:"Status Changed",userId:C,userName:E,details:`Status changed from ${g.status} to ${b.status}`,oldValue:g.status,newValue:b.status}),b.adminNotes!==void 0&&b.adminNotes!==g.adminNotes&&j.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:w,action:"Admin Notes Updated",userId:C,userName:E,details:b.adminNotes?"Admin notes added/updated":"Admin notes cleared",oldValue:g.adminNotes||"",newValue:b.adminNotes||""}),b.status==="submitted"&&!g.submittedAt&&j.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:w,action:"Application Submitted",userId:C,userName:E,details:"Application submitted for review"}),b.uploadedFiles){const N=g.uploadedFiles.length,A=b.uploadedFiles.length;A>N?j.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:w,action:"Document Uploaded",userId:C,userName:E,details:`${A-N} document(s) uploaded`}):A<N&&j.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:w,action:"Document Removed",userId:C,userName:E,details:`${N-A} document(s) removed`})}return j};return{applications:t,templates:r,createApplication:i,updateApplication:a,deleteApplication:o,getApplicationById:l,getApplicationsByCustomer:c,createTemplate:d,updateTemplate:u,deleteTemplate:h,getTemplateById:f,uploadFile:p,removeFile:y}}function tie({fieldId:t,applicationId:e,validation:r,multiple:s=!1}){const{getApplicationById:i,uploadFile:a,removeFile:o}=H0(),{toast:l}=Gt(),c=S.useRef(null),[d,u]=S.useState(!1),f=i(e)?.uploadedFiles.filter(w=>w.fieldId===t)||[],p=w=>{if(r?.maxFileSize&&w.size>r.maxFileSize)return`File size must be less than ${Math.round(r.maxFileSize/1024/1024)}MB`;if(r?.fileTypes){const C=w.name.split(".").pop()?.toLowerCase();if(C&&!r.fileTypes.includes(C))return`File type must be one of: ${r.fileTypes.join(", ")}`}return null},y=async w=>{const C=Array.from(w.target.files||[]);if(C.length!==0){u(!0);try{for(const E of C){const N=p(E);if(N){l({title:"File Validation Error",description:`${E.name}: ${N}`,variant:"destructive"});continue}await a(e,t,E)}l({title:"Files Uploaded",description:`${C.length} file(s) uploaded successfully`})}catch{l({title:"Upload Error",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{u(!1),c.current&&(c.current.value="")}}},v=w=>{o(e,w),l({title:"File Removed",description:"File has been removed successfully"})},g=w=>{window.open(w.url,"_blank")},b=w=>{if(w===0)return"0 Bytes";const C=1024,E=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(w)/Math.log(C));return parseFloat((w/Math.pow(C,N)).toFixed(2))+" "+E[N]},j=w=>(w.split(".").pop()?.toLowerCase(),n.jsx(DZ,{className:"h-4 w-4"}));return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(hd,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Drop files here or click to browse":"Drop file here or click to browse"}),r?.fileTypes&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",r.fileTypes.join(", ").toUpperCase()]}),r?.maxFileSize&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Max file size: ",Math.round(r.maxFileSize/1024/1024),"MB"]})]}),n.jsx(re,{type:"button",variant:"outline",className:"mt-4",onClick:()=>c.current?.click(),disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Choose ",s?"Files":"File"]})}),n.jsx("input",{ref:c,type:"file",className:"hidden",multiple:s,accept:r?.fileTypes?.map(w=>`.${w}`).join(","),onChange:y})]})}),f.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files"}),n.jsx("div",{className:"space-y-2",children:f.map(w=>n.jsx(me,{children:n.jsx(pe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[j(w.name),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:w.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[b(w.size)," • Uploaded ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(w),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(w.id),children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})})},w.id))})]})]})}function rie({section:t,data:e,onChange:r,validationErrors:s,applicationId:i}){const a=t.fields.sort((d,u)=>d.order-u.order),o=(d,u)=>{r({...e,[d]:u})},l=d=>{if(!d.conditionalLogic)return!0;const u=e[d.conditionalLogic.dependsOn],h=d.conditionalLogic.condition,f=d.conditionalLogic.value;switch(h){case"equals":return u===f;case"not_equals":return u!==f;case"contains":return u&&u.includes(f);case"greater_than":return Number(u)>Number(f);case"less_than":return Number(u)<Number(f);default:return!0}},c=d=>{const u=`${t.id}.${d.id}`,h=s[u],f=e[d.id]||"";if(!l(d))return null;const p={id:d.id,value:f,onChange:y=>o(d.id,y.target.value),placeholder:d.placeholder,className:h?"border-red-500":""};switch(d.type){case"text":case"email":case"phone":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx(Te,{...p,type:d.type==="email"?"email":d.type==="phone"?"tel":"text"}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"number":case"currency":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"relative",children:[d.type==="currency"&&n.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:"$"}),n.jsx(Te,{...p,type:"number",className:`${h?"border-red-500":""} ${d.type==="currency"?"pl-8":""}`,min:d.validation?.min,max:d.validation?.max,step:d.type==="currency"?"0.01":"1"})]}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"date":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx(Te,{...p,type:"date"}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"select":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs(nt,{value:f,onValueChange:y=>o(d.id,y),children:[n.jsx(et,{className:h?"border-red-500":"",children:n.jsx(st,{placeholder:d.placeholder||`Select ${d.label.toLowerCase()}`})}),n.jsx(tt,{children:d.options?.map(y=>n.jsx(he,{value:y,children:y.replace("-"," ").replace(/\b\w/g,v=>v.toUpperCase())},y))})]}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"radio":return n.jsxs("div",{className:"space-y-3",children:[n.jsxs(ue,{children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("div",{className:"space-y-2",children:d.options?.map(y=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",id:`${d.id}-${y}`,name:d.id,value:y,checked:f===y,onChange:v=>o(d.id,v.target.value),className:"h-4 w-4"}),n.jsx(ue,{htmlFor:`${d.id}-${y}`,className:"font-normal",children:y.replace("-"," ").replace(/\b\w/g,v=>v.toUpperCase())})]},y))}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"checkbox":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:d.id,checked:f===!0,onCheckedChange:y=>o(d.id,y)}),n.jsxs(ue,{htmlFor:d.id,className:"font-normal",children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"textarea":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx(kr,{id:d.id,value:f,onChange:y=>o(d.id,y.target.value),placeholder:d.placeholder,className:h?"border-red-500":"",rows:4}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"file":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx(tie,{fieldId:d.id,applicationId:i,validation:d.validation,multiple:!0}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);case"signature":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:d.id,children:[d.label,d.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Electronic signature will be captured here"}),n.jsx(re,{variant:"outline",type:"button",children:"Add Signature"})]}),h&&n.jsx("p",{className:"text-sm text-red-500",children:s[u]})]},d.id);default:return null}};return n.jsx("div",{className:"space-y-6",children:a.map(c)})}function Lz({application:t,onSave:e,onCancel:r,onSubmit:s}){const{tenant:i}=lo(),{getTemplateById:a}=H0(),[o,l]=S.useState(0),[c,d]=S.useState(t.data||{}),[u,h]=S.useState(!1),[f,p]=S.useState({}),y=a(t.templateId);if(!y)return n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Template not found"}),n.jsx(re,{onClick:r,className:"mt-4",children:"Go Back"})]});const v=y.sections.sort((k,F)=>k.order-F.order),g=v[o],b=(o+1)/v.length*100,j=()=>{const k=i?.settings?.platformType||"mh",F=i?.settings?.labelOverrides||{};if(F["finance.application"])return F["finance.application"];switch(k){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},w=(k,F)=>{const I={...c,[k]:{...c[k],...F}};d(I)},C=()=>{const k={},F=c[g.id]||{};return g.fields.forEach(I=>{if(I.required&&!F[I.id]&&(k[`${g.id}.${I.id}`]=`${I.label} is required`),F[I.id]&&I.validation){const T=F[I.id],R=I.validation;R.minLength&&T.length<R.minLength&&(k[`${g.id}.${I.id}`]=`${I.label} must be at least ${R.minLength} characters`),R.maxLength&&T.length>R.maxLength&&(k[`${g.id}.${I.id}`]=`${I.label} must be no more than ${R.maxLength} characters`),R.pattern&&!new RegExp(R.pattern).test(T)&&(k[`${g.id}.${I.id}`]=`${I.label} format is invalid`),I.type==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T)&&(k[`${g.id}.${I.id}`]="Please enter a valid email address")}}),p(k),Object.keys(k).length===0},E=()=>{C()&&o<v.length-1&&l(o+1)},N=()=>{o>0&&l(o-1)},A=()=>{e({data:c,status:"draft"})},_=async()=>{let k=!0;const F={};for(let I=0;I<v.length;I++){const T=v[I],R=c[T.id]||{};T.fields.forEach(O=>{O.required&&!R[O.id]&&(F[`${T.id}.${O.id}`]=`${O.label} is required`,k=!1)})}if(!k){p(F);const I=v.findIndex(T=>Object.keys(F).some(R=>R.startsWith(T.id)));I!==-1&&l(I);return}h(!0),await new Promise(I=>setTimeout(I,1e3)),s({data:c,status:"submitted",submittedAt:new Date().toISOString()}),h(!1)};return n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(re,{variant:"ghost",onClick:r,children:[n.jsx(KC,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:j()}),n.jsx("p",{className:"text-muted-foreground",children:t.customerName||"New Application"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{variant:"outline",children:t.status.replace("_"," ").toUpperCase()}),t.fraudCheckStatus&&n.jsxs(Ve,{variant:"secondary",children:["IDV: ",t.fraudCheckStatus.charAt(0).toUpperCase()+t.fraudCheckStatus.slice(1)]})]})]}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:["Step ",o+1," of ",v.length]}),n.jsxs("span",{children:[Math.round(b),"% Complete"]})]}),n.jsx(uc,{value:b,className:"h-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:g.title})]})})}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:g.title}),g.description&&n.jsx(Ge,{children:g.description})]}),n.jsx(pe,{children:n.jsx(rie,{section:g,data:c[g.id]||{},onChange:k=>w(g.id,k),validationErrors:f,applicationId:t.id})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(re,{variant:"outline",onClick:N,disabled:o===0,children:[n.jsx(KC,{className:"h-4 w-4 mr-2"}),"Previous"]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs(re,{variant:"outline",onClick:A,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),o===v.length-1?n.jsx(re,{onClick:_,disabled:u,children:u?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Submit Application"]})}):n.jsxs(re,{onClick:E,children:["Next",n.jsx(z4,{className:"h-4 w-4 ml-2"})]})]})]})]})}function Mz(){const{tenant:t}=lo(),{getCustomerId:e,getDisplayName:r,getDisplayEmail:s}=Gm(),{toast:i}=Gt(),{templates:a,createApplication:o,updateApplication:l,getApplicationsByCustomer:c}=H0(),[d,u]=S.useState(null),[h,f]=S.useState(!1),p=e(),y=c(p),v=()=>{const A=t?.settings?.platformType||"mh",_=t?.settings?.labelOverrides||{};if(_["finance.application"])return _["finance.application"];switch(A){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},g=A=>{switch(A){case"draft":return n.jsx(Nn,{className:"h-4 w-4"});case"submitted":case"under_review":return n.jsx(Dr,{className:"h-4 w-4"});case"approved":case"completed":return n.jsx(hn,{className:"h-4 w-4"});case"denied":return n.jsx(zo,{className:"h-4 w-4"});default:return n.jsx(yr,{className:"h-4 w-4"})}},b=A=>{switch(A){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},j=A=>{const _=a.find(I=>I.id===A.templateId);if(!_)return 0;const k=_.sections.reduce((I,T)=>I+T.fields.filter(R=>R.required).length,0),F=_.sections.reduce((I,T)=>{const R=A.data[T.id]||{};return I+T.fields.filter(O=>O.required&&R[O.id]).length},0);return k>0?F/k*100:0},w=()=>{const A=a.find(k=>k.isActive)||a[0];if(!A){i({title:"No Templates Available",description:"Please contact support to set up application templates.",variant:"destructive"});return}const _=o({customerId:p,customerName:r(),customerEmail:s(),templateId:A.id,status:"draft"});u(_),f(!0)},C=A=>{u(A),f(A.status==="draft")},E=A=>{d&&(l(d.id,A),i({title:"Application Saved",description:"Your application has been saved successfully."}))},N=A=>{d&&(l(d.id,{...A,status:"submitted"}),u(null),f(!1),i({title:"Application Submitted",description:"Your application has been submitted for review. You will be notified of the decision."}))};return h&&d?n.jsx(Lz,{application:d,onSave:E,onCancel:()=>{u(null),f(!1)},onSubmit:N}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Applications"}),n.jsxs("p",{className:"text-muted-foreground",children:["Manage your ",v().toLowerCase(),"s"]})]}),n.jsxs(re,{onClick:w,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Application"]})]})}),y.length>0&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"}),n.jsx("p",{className:"text-2xl font-bold",children:y.length})]}),n.jsx(yr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Review"}),n.jsx("p",{className:"text-2xl font-bold",children:y.filter(A=>["submitted","under_review"].includes(A.status)).length})]}),n.jsx(Dr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved"}),n.jsx("p",{className:"text-2xl font-bold",children:y.filter(A=>["approved","completed"].includes(A.status)).length})]}),n.jsx(hn,{className:"h-8 w-8 text-green-600"})]})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Your Applications"}),n.jsx(Ge,{children:"View and manage your finance applications"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[y.map(A=>{const _=j(A);return n.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[g(A.status),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold",children:[v()," #",A.id.slice(-6).toUpperCase()]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",new Date(A.createdAt).toLocaleDateString(),A.submittedAt&&n.jsxs("span",{children:[" • Submitted ",new Date(A.submittedAt).toLocaleDateString()]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ve,{className:b(A.status),children:A.status.replace("_"," ").toUpperCase()}),A.fraudCheckStatus&&n.jsxs(Ve,{variant:"outline",children:["IDV: ",A.fraudCheckStatus.charAt(0).toUpperCase()+A.fraudCheckStatus.slice(1)]})]}),A.status==="draft"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Completion Progress"}),n.jsxs("span",{children:[Math.round(_),"%"]})]}),n.jsx(uc,{value:_,className:"h-2"})]}),A.notes&&n.jsx("div",{className:"bg-muted/50 p-3 rounded-md",children:n.jsx("p",{className:"text-sm",children:A.notes})})]}),n.jsx("div",{className:"flex items-center space-x-2 ml-4",children:n.jsx(re,{variant:"outline",size:"sm",onClick:()=>C(A),children:A.status==="draft"?n.jsxs(n.Fragment,{children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Continue"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View"]})})})]})},A.id)}),y.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Applications Yet"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first finance application"}),n.jsxs(re,{onClick:w,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})]})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Need Help?"})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Application Process"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about our finance application process and requirements"}),n.jsx(re,{variant:"outline",size:"sm",children:"View Guide"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Contact Support"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Have questions? Our finance team is here to help"}),n.jsx(re,{variant:"outline",size:"sm",children:"Contact Us"})]})]})})})]})]})}function nie(){const{getCustomerId:t,getDisplayName:e}=Gm(),r=t(),s=e(),{customerData:i,loading:a}=fT(r,s),[o,l]=S.useState(null),c=i.serviceTickets||[],d=f=>{switch(f){case"Open":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Waiting for Parts":return"bg-orange-100 text-orange-800";case"Customer Review":return"bg-purple-100 text-purple-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=f=>{switch(f){case"Low":return"bg-gray-100 text-gray-800";case"Medium":return"bg-blue-100 text-blue-800";case"High":return"bg-orange-100 text-orange-800";case"Urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=f=>{switch(f){case"Completed":return n.jsx(hn,{className:"h-4 w-4"});case"In Progress":return n.jsx(Dr,{className:"h-4 w-4"});case"Open":return n.jsx(Xh,{className:"h-4 w-4"});default:return n.jsx(xl,{className:"h-4 w-4"})}};if(a)return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-32 bg-gray-200 rounded"})},f))})]});if(o){const f=o.totalCost||0,p=o.parts?.reduce((v,g)=>v+g.cost*g.quantity,0)||0,y=o.labor?.reduce((v,g)=>v+g.hours*g.rate,0)||0;return n.jsxs("div",{className:"space-y-6",children:[n.jsx(re,{variant:"ghost",onClick:()=>l(null),children:"← Back to Service Tickets"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[h(o.status),n.jsx("h1",{className:"text-2xl font-bold",children:o.title}),n.jsx(Ve,{className:d(o.status),children:o.status}),n.jsxs(Ve,{className:u(o.priority),children:[o.priority," Priority"]})]}),n.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",o.id.slice(-6).toUpperCase()," • ",o.vehicleInfo]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),n.jsx("p",{className:"text-lg font-bold",children:o.category})]}),n.jsx(xl,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"text-lg font-bold",children:o.assignedTechName||"Unassigned"})]}),n.jsx(vs,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"text-lg font-bold",children:o.scheduledDate?wt(o.scheduledDate):"TBD"})]}),n.jsx(Br,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Cost"}),n.jsx("p",{className:"text-lg font-bold",children:Fe(f)})]}),n.jsx(hn,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Service Description"})}),n.jsxs(pe,{children:[n.jsx("p",{className:"text-sm",children:o.description}),o.notes&&n.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Additional Notes"}),n.jsx("p",{className:"text-sm",children:o.notes})]})]})]}),(o.parts?.length>0||o.labor?.length>0)&&n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.parts?.length>0&&n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Parts"}),n.jsx(Ge,{children:"Parts used for this service"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3",children:[o.parts.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:v.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",v.quantity," × ",Fe(v.cost)]})]}),n.jsx("p",{className:"font-semibold",children:Fe(v.quantity*v.cost)})]},v.id)),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:Fe(p)})]})})]})})]}),o.labor?.length>0&&n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Labor"}),n.jsx(Ge,{children:"Labor charges for this service"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3",children:[o.labor.map(v=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:v.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.hours," hrs × ",Fe(v.rate),"/hr"]})]}),n.jsx("p",{className:"font-semibold",children:Fe(v.hours*v.rate)})]},v.id)),n.jsx("div",{className:"border-t pt-3",children:n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:Fe(y)})]})})]})})]})]}),o.timeline&&n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Service Timeline"}),n.jsx(Ge,{children:"Progress updates for this service ticket"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:o.timeline.sort((v,g)=>new Date(g.timestamp).getTime()-new Date(v.timestamp).getTime()).map(v=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:n.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-sm font-medium",children:v.action}),n.jsx("span",{className:"text-xs text-muted-foreground",children:wt(v.timestamp)})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.details}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",v.user]})]})]},v.id))})})]})]})}return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Service Tickets"}),n.jsx("p",{className:"text-muted-foreground",children:"Track your service requests and maintenance history"})]}),n.jsxs(re,{children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Service Request"]})]})}),c.length>0&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tickets"}),n.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),n.jsx(xl,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),n.jsx("p",{className:"text-2xl font-bold",children:c.filter(f=>f.status==="In Progress").length})]}),n.jsx(Dr,{className:"h-8 w-8 text-muted-foreground"})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold",children:c.filter(f=>f.status==="Completed").length})]}),n.jsx(hn,{className:"h-8 w-8 text-green-600"})]})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Your Service Tickets"}),n.jsx(Ge,{children:"View and track your service requests"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(f=>n.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[h(f.status),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:f.title}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ticket #",f.id.slice(-6).toUpperCase()," • ",f.vehicleInfo]})]}),n.jsx(Ve,{className:d(f.status),children:f.status}),n.jsx(Ve,{className:u(f.priority),children:f.priority})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),n.jsx("p",{className:"font-semibold",children:f.category})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-semibold",children:f.assignedTechName||"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:f.status==="Completed"?"Completed":"Scheduled"}),n.jsx("p",{className:"font-semibold",children:f.status==="Completed"&&f.completedDate?wt(f.completedDate):f.scheduledDate?wt(f.scheduledDate):"TBD"})]})]}),f.totalCost&&n.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:"Estimated Cost:"}),n.jsx("span",{className:"font-semibold",children:Fe(f.totalCost)})]}),f.customerApproved&&n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✓ Approved by customer"})]})]}),n.jsx("div",{className:"flex items-center space-x-2 ml-4",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(f),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},f.id)),c.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(xl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Service Tickets"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have any service tickets yet."}),n.jsxs(re,{children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Service Request"]})]})]})})]})]})}function sie(){const{getDisplayName:t,getDisplayEmail:e,getCustomerId:r}=Gm(),{toast:s}=Gt(),[i,a]=S.useState(!1),[o,l]=S.useState(!1),[c,d]=S.useState(!1),[u,h]=S.useState({name:t(),email:e(),phone:"(555) 123-4567",address:"123 Main St",city:"Anytown",state:"CA",zipCode:"12345"}),[f,p]=S.useState({emailNotifications:!0,smsNotifications:!1,paymentReminders:!0,serviceUpdates:!0,agreementUpdates:!0,marketingEmails:!1}),[y,v]=S.useState({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:!1}),g=async()=>{a(!0);try{await new Promise(w=>setTimeout(w,1e3)),s({title:"Profile Updated",description:"Your profile information has been saved successfully."})}catch{s({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{a(!1)}},b=async()=>{a(!0);try{await new Promise(w=>setTimeout(w,1e3)),s({title:"Notifications Updated",description:"Your notification preferences have been saved."})}catch{s({title:"Error",description:"Failed to update notifications. Please try again.",variant:"destructive"})}finally{a(!1)}},j=async()=>{if(!y.currentPassword||!y.newPassword){s({title:"Validation Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(y.newPassword!==y.confirmPassword){s({title:"Validation Error",description:"New passwords do not match.",variant:"destructive"});return}if(y.newPassword.length<8){s({title:"Validation Error",description:"Password must be at least 8 characters long.",variant:"destructive"});return}a(!0);try{await new Promise(w=>setTimeout(w,1e3)),v({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:y.twoFactorEnabled}),s({title:"Password Changed",description:"Your password has been updated successfully."})}catch{s({title:"Error",description:"Failed to change password. Please try again.",variant:"destructive"})}finally{a(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Account Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your account preferences and security settings"})]}),n.jsxs(fn,{defaultValue:"profile",className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsxs(dt,{value:"profile",className:"flex items-center space-x-2",children:[n.jsx(vs,{className:"h-4 w-4"}),n.jsx("span",{children:"Profile"})]}),n.jsxs(dt,{value:"notifications",className:"flex items-center space-x-2",children:[n.jsx(q4,{className:"h-4 w-4"}),n.jsx("span",{children:"Notifications"})]}),n.jsxs(dt,{value:"security",className:"flex items-center space-x-2",children:[n.jsx(H4,{className:"h-4 w-4"}),n.jsx("span",{children:"Security"})]})]}),n.jsx(ht,{value:"profile",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Profile Information"}),n.jsx(Ge,{children:"Update your personal information and contact details"})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Full Name"}),n.jsx(Te,{id:"name",value:u.name,onChange:w=>h({...u,name:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email Address"}),n.jsx(Te,{id:"email",type:"email",value:u.email,onChange:w=>h({...u,email:w.target.value})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),n.jsx(Te,{id:"phone",type:"tel",value:u.phone,onChange:w=>h({...u,phone:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer ID"}),n.jsx(Te,{id:"customerId",value:r(),disabled:!0,className:"bg-muted"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"address",children:"Street Address"}),n.jsx(Te,{id:"address",value:u.address,onChange:w=>h({...u,address:w.target.value})})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"city",children:"City"}),n.jsx(Te,{id:"city",value:u.city,onChange:w=>h({...u,city:w.target.value})})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"state",children:"State"}),n.jsxs(nt,{value:u.state,onValueChange:w=>h({...u,state:w}),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"CA",children:"California"}),n.jsx(he,{value:"TX",children:"Texas"}),n.jsx(he,{value:"FL",children:"Florida"}),n.jsx(he,{value:"NY",children:"New York"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"zipCode",children:"ZIP Code"}),n.jsx(Te,{id:"zipCode",value:u.zipCode,onChange:w=>h({...u,zipCode:w.target.value})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:g,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),n.jsx(ht,{value:"notifications",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Notification Preferences"}),n.jsx(Ge,{children:"Choose how you'd like to receive notifications"})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),n.jsx(tr,{checked:f.emailNotifications,onCheckedChange:w=>p({...f,emailNotifications:!!w})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"SMS Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via text message"})]}),n.jsx(tr,{checked:f.smsNotifications,onCheckedChange:w=>p({...f,smsNotifications:!!w})})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h4",{className:"font-medium mb-4",children:"Notification Types"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Payment Reminders"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Reminders for upcoming loan payments"})]}),n.jsx(tr,{checked:f.paymentReminders,onCheckedChange:w=>p({...f,paymentReminders:!!w})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Service Updates"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates on service ticket progress"})]}),n.jsx(tr,{checked:f.serviceUpdates,onCheckedChange:w=>p({...f,serviceUpdates:!!w})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Agreement Updates"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about agreement status changes"})]}),n.jsx(tr,{checked:f.agreementUpdates,onCheckedChange:w=>p({...f,agreementUpdates:!!w})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Marketing Emails"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Promotional offers and company updates"})]}),n.jsx(tr,{checked:f.marketingEmails,onCheckedChange:w=>p({...f,marketingEmails:!!w})})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:b,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),n.jsx(ht,{value:"security",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Change Password"}),n.jsx(Ge,{children:"Update your account password"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"currentPassword",children:"Current Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Te,{id:"currentPassword",type:o?"text":"password",value:y.currentPassword,onChange:w=>v({...y,currentPassword:w.target.value})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>l(!o),children:o?n.jsx(q3,{className:"h-4 w-4"}):n.jsx(Ts,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"newPassword",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Te,{id:"newPassword",type:c?"text":"password",value:y.newPassword,onChange:w=>v({...y,newPassword:w.target.value})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>d(!c),children:c?n.jsx(q3,{className:"h-4 w-4"}):n.jsx(Ts,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsx(Te,{id:"confirmPassword",type:"password",value:y.confirmPassword,onChange:w=>v({...y,confirmPassword:w.target.value})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:j,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing..."]}):"Change Password"})})]})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Two-Factor Authentication"}),n.jsx(Ge,{children:"Add an extra layer of security to your account"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Enable Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Require a verification code in addition to your password"})]}),n.jsx(tr,{checked:y.twoFactorEnabled,onCheckedChange:w=>v({...y,twoFactorEnabled:!!w})})]}),y.twoFactorEnabled&&n.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-blue-800",children:"Two-factor authentication is enabled. You'll receive a verification code via SMS when logging in."})})]})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Login Activity"}),n.jsx(Ge,{children:"Monitor recent access to your account"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Current Session"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows • 192.168.1.100"})]}),n.jsx(Ve,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Yesterday, 3:24 PM"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Safari on iPhone • 10.0.0.50"})]}),n.jsx(Ve,{variant:"outline",children:"Ended"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"January 20, 2:15 PM"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows • 192.168.1.100"})]}),n.jsx(Ve,{variant:"outline",children:"Ended"})]})]})})]})]})})]})]})}const Wp={agreementTypes:[{value:"PURCHASE",label:"Purchase Agreement"},{value:"LEASE",label:"Lease Agreement"},{value:"SERVICE",label:"Service Agreement"},{value:"WARRANTY",label:"Warranty Agreement"}],agreementStatuses:[{value:"DRAFT",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"PENDING",label:"Pending Signature",color:"bg-yellow-100 text-yellow-800"},{value:"SIGNED",label:"Signed",color:"bg-blue-100 text-blue-800"},{value:"ACTIVE",label:"Active",color:"bg-green-100 text-green-800"},{value:"EXPIRED",label:"Expired",color:"bg-red-100 text-red-800"},{value:"CANCELLED",label:"Cancelled",color:"bg-red-100 text-red-800"}],sampleAgreements:[{id:"agr-001",type:"PURCHASE",status:"SIGNED",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",quoteId:"quote-001",terms:"Standard purchase agreement terms and conditions. Vehicle sold as-is with manufacturer warranty.",effectiveDate:"2024-01-15T00:00:00Z",expirationDate:null,signedBy:"John Smith",signedAt:"2024-01-15T14:30:00Z",ipAddress:"192.168.1.100",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTEwIDUwIEw1MCAzMCBMOTAgNzAiIHN0cm9rZT0iYmxhY2siIGZpbGw9Im5vbmUiLz48L3N2Zz4=",documents:[{id:"doc-001",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/mock/purchase-agreement.pdf",size:245760,uploadedAt:"2024-01-10T10:00:00Z"},{id:"doc-002",name:"Vehicle Inspection Report.pdf",type:"application/pdf",url:"/mock/inspection-report.pdf",size:156432,uploadedAt:"2024-01-10T10:15:00Z"}],createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z",createdBy:"sales@company.com",totalAmount:35e3,downPayment:5e3,financingAmount:3e4},{id:"agr-002",type:"LEASE",status:"PENDING",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",quoteId:"quote-002",terms:"Lease agreement for 24 months with option to purchase. Monthly payment includes maintenance.",effectiveDate:"2024-02-01T00:00:00Z",expirationDate:"2026-02-01T00:00:00Z",signedBy:null,signedAt:null,ipAddress:null,signatureData:null,documents:[{id:"doc-003",name:"Lease Agreement.pdf",type:"application/pdf",url:"/mock/lease-agreement.pdf",size:198432,uploadedAt:"2024-01-20T11:00:00Z"}],createdAt:"2024-01-20T10:30:00Z",updatedAt:"2024-01-20T11:00:00Z",createdBy:"sales@company.com",totalAmount:62e3,monthlyPayment:1250,securityDeposit:2500},{id:"agr-003",type:"SERVICE",status:"ACTIVE",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",vehicleId:"veh-003",vehicleInfo:"2022 Grand Design Solitude 310GK",quoteId:null,terms:"Annual service agreement covering routine maintenance and emergency repairs.",effectiveDate:"2024-01-01T00:00:00Z",expirationDate:"2024-12-31T23:59:59Z",signedBy:"David Johnson",signedAt:"2023-12-28T16:45:00Z",ipAddress:"10.0.0.50",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTIwIDMwIEw2MCA2MCBMMTIwIDIwIiBzdHJva2U9ImJsYWNrIiBmaWxsPSJub25lIi8+PC9zdmc+",documents:[{id:"doc-004",name:"Service Agreement.pdf",type:"application/pdf",url:"/mock/service-agreement.pdf",size:134567,uploadedAt:"2023-12-20T14:00:00Z"}],createdAt:"2023-12-20T13:30:00Z",updatedAt:"2023-12-28T16:45:00Z",createdBy:"service@company.com",annualFee:1200,coverageLevel:"Comprehensive"}],defaultAgreement:{effectiveDate:new Date().toISOString().split("T")[0]}},no={defaultStatuses:["Open","In Progress","Waiting for Parts","Customer Review","Completed","Cancelled"],formDefaults:{status:"Open"},categoryOptions:["Maintenance","Repair","Inspection","Warranty","Installation","Emergency"],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Roofing"]},{id:"tech-004",name:"Lisa Chen",specialties:["General Maintenance"]}],sampleTickets:[{id:"ticket-001",title:"AC Unit Not Cooling Properly",description:"Customer reports that the air conditioning unit is running but not cooling the home effectively. Temperature differential is only 5 degrees.",category:"Repair",priority:"High",status:"In Progress",customerId:"cust-001",customerName:"John Smith",customerPhone:"(555) 123-4567",customerEmail:"john.smith@email.com",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",assignedTo:"tech-002",assignedTechName:"Sarah Davis",scheduledDate:"2024-01-15T10:00:00Z",createdAt:"2024-01-12T09:30:00Z",updatedAt:"2024-01-14T14:20:00Z",estimatedHours:4,actualHours:2.5,parts:[{id:"part-001",name:"AC Capacitor",quantity:1,cost:45.99},{id:"part-002",name:"Refrigerant R410A",quantity:2,cost:89.5}],labor:[{id:"labor-001",description:"Diagnostic and testing",hours:1,rate:85},{id:"labor-002",description:"Capacitor replacement",hours:1.5,rate:85}],timeline:[{id:"timeline-001",timestamp:"2024-01-12T09:30:00Z",action:"Ticket Created",user:"System",details:"Service ticket created by customer portal"},{id:"timeline-002",timestamp:"2024-01-12T11:15:00Z",action:"Assigned",user:"Manager",details:"Assigned to Sarah Davis - HVAC specialist"},{id:"timeline-003",timestamp:"2024-01-14T10:00:00Z",action:"Status Updated",user:"Sarah Davis",details:"Started diagnostic work - found faulty capacitor"},{id:"timeline-004",timestamp:"2024-01-14T14:20:00Z",action:"Parts Ordered",user:"Sarah Davis",details:"Ordered replacement capacitor and refrigerant"}],notes:"Customer mentioned the issue started about a week ago. Unit is 3 years old, still under extended warranty for parts.",totalCost:347.49,customerApproved:!0},{id:"ticket-002",title:"Annual Safety Inspection",description:"Scheduled annual safety inspection including electrical, plumbing, and structural components.",category:"Inspection",priority:"Medium",status:"Completed",customerId:"cust-002",customerName:"Maria Rodriguez",customerPhone:"(555) 987-6543",customerEmail:"maria.rodriguez@email.com",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",assignedTo:"tech-003",assignedTechName:"Tom Wilson",scheduledDate:"2024-01-10T08:00:00Z",createdAt:"2024-01-05T16:45:00Z",updatedAt:"2024-01-10T16:30:00Z",estimatedHours:3,actualHours:2.5,parts:[],labor:[{id:"labor-003",description:"Complete safety inspection",hours:2.5,rate:75}],timeline:[{id:"timeline-005",timestamp:"2024-01-05T16:45:00Z",action:"Ticket Created",user:"System",details:"Annual inspection scheduled"},{id:"timeline-006",timestamp:"2024-01-08T09:00:00Z",action:"Assigned",user:"Manager",details:"Assigned to Tom Wilson for structural inspection"},{id:"timeline-007",timestamp:"2024-01-10T08:00:00Z",action:"Started",user:"Tom Wilson",details:"Beginning comprehensive safety inspection"},{id:"timeline-008",timestamp:"2024-01-10T16:30:00Z",action:"Completed",user:"Tom Wilson",details:"Inspection completed - all systems passed"}],notes:"All safety systems checked and verified. Minor recommendation to replace smoke detector batteries within 6 months.",totalCost:187.5,customerApproved:!0}],statusColors:{Open:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800","Waiting for Parts":"bg-orange-100 text-orange-800","Customer Review":"bg-purple-100 text-purple-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},priorityColors:{Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Urgent:"bg-red-100 text-red-800"}};function iie({searchParams:t}){const{getDisplayName:e,getDisplayEmail:r,getCustomerId:s,isProxying:i,proxiedClient:a}=Gm();lf();const o=s(),l=Jn.sampleLoans.filter(y=>y.customerId===o||y.customerName===e()),c=Wp.sampleAgreements.filter(y=>y.customerId===o||y.customerName===e());lu.sampleApplications.filter(y=>y.customerId===o||y.customerName===e());const d=no.sampleTickets.filter(y=>y.customerId===o||y.customerName===e()),u=l.filter(y=>["Current","Active"].includes(y.status)),h=l.filter(y=>y.status==="Paid Off"),f=c.filter(y=>y.status==="PENDING"),p=d.filter(y=>y.status==="In Progress");return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",e().split(" ")[0],"!"]}),n.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your account"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Loans"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.length}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.length," active, ",h.length," paid off"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Active Agreements"}),n.jsx(yr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:c.length}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," pending signature"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Service Tickets"}),n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:d.length}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," in progress"]})]})]})]})]})}function aie({fallbackUser:t}){const[e,r]=OX(),s=e.get("impersonateClientId"),i=()=>{const o=new URLSearchParams(e);o.delete("impersonateClientId"),r(o)},a=s?cT.sampleUsers.find(o=>o.id===s):null;return n.jsx(Hne,{impersonatedUser:a,fallbackUser:{name:"Portal Customer",email:"customer@portal.com"},children:n.jsx(X9,{children:n.jsxs(Hse,{children:[a&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between mb-6",children:[n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Admin View:"})," You are viewing the portal as ",a.name," (",a.email,")"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:i,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Exit Impersonation"]})]}),n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(iie,{searchParams:e})}),n.jsx(Ut,{path:"/loans",element:n.jsx(eie,{})}),n.jsx(Ut,{path:"/agreements",element:n.jsx(Rz,{})}),n.jsx(Ut,{path:"/finance-applications",element:n.jsx(Mz,{})}),n.jsx(Ut,{path:"/service-tickets",element:n.jsx(nie,{})}),n.jsx(Ut,{path:"/settings",element:n.jsx(sie,{})}),n.jsx(Ut,{path:"/*",element:n.jsx("div",{children:"Portal Dashboard"})})]})]})})})}const zx={tags:["First-time Buyer","Investor","Out-of-State","Follow-up Needed"],pipelines:["New Inquiry","In Progress","Negotiation","Closed Won","Closed Lost"],nurtureSequences:[{id:"seq-001",name:"Initial Outreach",description:"Welcome new leads and introduce our services",steps:[{id:"step-001",type:"email",delay:0,subject:"Welcome to our dealership!",template:"welcome-email"},{id:"step-002",type:"sms",delay:1,message:"Thanks for your interest! Call us at (555) 123-4567",template:"welcome-sms"},{id:"step-003",type:"email",delay:3,subject:"See our latest inventory",template:"inventory-showcase"},{id:"step-004",type:"call",delay:7,notes:"Follow up call to discuss needs",template:"discovery-call"}],isActive:!0},{id:"seq-002",name:"Second Touch",description:"Re-engage leads who showed initial interest",steps:[{id:"step-005",type:"email",delay:0,subject:"Still looking for the perfect RV?",template:"reengagement-email"},{id:"step-006",type:"sms",delay:2,message:"Special financing options available this month!",template:"financing-sms"},{id:"step-007",type:"email",delay:5,subject:"Customer testimonials",template:"testimonials-email"}],isActive:!0},{id:"seq-003",name:"Final Attempt",description:"Last chance to convert before marking as lost",steps:[{id:"step-008",type:"email",delay:0,subject:"Last chance - exclusive offer inside",template:"final-offer-email"},{id:"step-009",type:"call",delay:3,notes:"Personal call to address any concerns",template:"final-call"}],isActive:!0}],nurtureLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:2,sequenceType:"email",nextSequenceAction:"2024-01-22T09:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",sequenceId:"seq-002",sequenceStatus:"paused",sequenceStep:1,sequenceType:"sms",nextSequenceAction:"2024-01-25T14:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",sequenceId:"seq-003",sequenceStatus:"completed",sequenceStep:2,sequenceType:"call",nextSequenceAction:null,customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"New",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",sequenceId:null,sequenceStatus:null,sequenceStep:null,sequenceType:null,nextSequenceAction:null,customFields:{pipelineStage:"New Inquiry",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Contacted",assignedTo:"sales-rep-2",notes:"Interested in travel trailer, comparing options",score:88,lastActivity:"2024-01-19T15:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:3,sequenceType:"email",nextSequenceAction:"2024-01-24T10:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:55e3,expectedCloseDate:"2024-02-20",vehicleType:"Travel Trailer",budget:55e3,timeframe:"1-2 months"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"New",assignedTo:"sales-rep-1",notes:"Interested in luxury motorhome for retirement travel",score:82,lastActivity:"2024-01-18T12:00:00Z",sequenceId:"seq-002",sequenceStatus:"active",sequenceStep:1,sequenceType:"email",nextSequenceAction:"2024-01-23T11:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:175e3,expectedCloseDate:"2024-04-01",vehicleType:"Class A Motorhome",budget:18e4,timeframe:"4-6 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"}],pipelineLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"Qualified",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Converted",assignedTo:"sales-rep-2",notes:"Purchased 2023 Forest River Cherokee, excellent experience",score:100,lastActivity:"2024-01-19T15:30:00Z",customFields:{pipelineStage:"Closed Won",estimatedValue:55e3,expectedCloseDate:"2024-01-19",vehicleType:"Travel Trailer",budget:55e3,timeframe:"Immediate"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"Lost",assignedTo:"sales-rep-1",notes:"Decided to go with competitor due to pricing",score:45,lastActivity:"2024-01-18T12:00:00Z",customFields:{pipelineStage:"Closed Lost",estimatedValue:75e3,expectedCloseDate:"2024-01-18",vehicleType:"Class A Motorhome",budget:75e3,timeframe:"1-2 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"},{id:"lead-007",firstName:"David",lastName:"Martinez",name:"David Martinez",email:"david.martinez@email.com",phone:"(555) 678-9012",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Interested in toy hauler for motorcycle trips",score:70,lastActivity:"2024-01-24T09:15:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:95e3,expectedCloseDate:"2024-04-15",vehicleType:"Toy Hauler",budget:1e5,timeframe:"4-6 months"},createdAt:"2024-01-24T09:15:00Z",updatedAt:"2024-01-24T09:15:00Z"},{id:"lead-008",firstName:"Amanda",lastName:"Taylor",name:"Amanda Taylor",email:"amanda.taylor@email.com",phone:"(555) 789-0123",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Upgrading from tent camping, needs beginner-friendly option",score:82,lastActivity:"2024-01-23T11:45:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:35e3,expectedCloseDate:"2024-03-01",vehicleType:"Travel Trailer",budget:4e4,timeframe:"2-3 months"},createdAt:"2024-01-16T14:30:00Z",updatedAt:"2024-01-23T11:45:00Z"},{id:"lead-009",firstName:"Christopher",lastName:"Anderson",name:"Christopher Anderson",email:"chris.anderson@email.com",phone:"(555) 890-1234",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Looking for luxury fifth wheel, high-end features required",score:88,lastActivity:"2024-01-22T14:20:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:125e3,expectedCloseDate:"2024-02-20",vehicleType:"Fifth Wheel",budget:13e4,timeframe:"3-4 weeks"},createdAt:"2024-01-09T16:00:00Z",updatedAt:"2024-01-22T14:20:00Z"},{id:"lead-010",firstName:"Michelle",lastName:"Thomas",name:"Michelle Thomas",email:"michelle.thomas@email.com",phone:"(555) 901-2345",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Retirement planning, looking for full-time living option",score:75,lastActivity:"2024-01-25T08:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:18e4,expectedCloseDate:"2024-05-01",vehicleType:"Class A Motorhome",budget:2e5,timeframe:"6+ months"},createdAt:"2024-01-25T08:30:00Z",updatedAt:"2024-01-25T08:30:00Z"}]};function oie({leads:t,onLeadMove:e}){const r=zx.pipelines,s=t||zx.pipelineLeads||[],[i,a]=S.useState([]);S.useEffect(()=>{const c=r.map(d=>{const u=s.filter(f=>f.customFields?.pipelineStage===d),h=u.reduce((f,p)=>f+(p.customFields?.estimatedValue||0),0);return{stage:d,count:u.length,value:h,conversionRate:u.length>0?u.length/s.length*100:0}});a(c)},[s,r]);const o=i.reduce((c,d)=>c+d.value,0),l=i.reduce((c,d)=>c+d.count,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Pipeline Value"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:Fe(o)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Ar,{className:"inline h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Active Leads"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:l}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Ar,{className:"inline h-3 w-3 mr-1"}),"+5% from last month"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Conversion Rate"}),n.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"24.5%"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Ar,{className:"inline h-3 w-3 mr-1"}),"+2.1% from last month"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Avg. Deal Size"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:Fe(o/Math.max(l,1))}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx(Ar,{className:"inline h-3 w-3 mr-1"}),"+8% from last month"]})]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Sales Pipeline"}),n.jsx(Ge,{children:"Track leads through your sales process"})]}),n.jsx(pe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-5",children:r.map((c,d)=>{const u=i.find(f=>f.stage===c),h=d===r.length-1;return n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-1",children:n.jsx(me,{className:"h-32",children:n.jsxs(pe,{className:"p-4 h-full flex flex-col justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm mb-1",children:c}),n.jsx("div",{className:"text-2xl font-bold",children:u?.count||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:Fe(u?.value||0)}),n.jsx(uc,{value:u?.conversionRate||0,className:"h-1 mt-1"})]})]})})}),!h&&n.jsx("div",{className:"mx-2 flex-shrink-0",children:n.jsx(z4,{className:"h-4 w-4 text-muted-foreground"})})]},c)})})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Pipeline Activity"}),n.jsx(Ge,{children:"Latest updates and movements in your pipeline"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[s.slice(0,5).map(c=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:c.name}),n.jsxs("p",{className:"font-medium",children:[c.firstName," ",c.lastName]})]}),n.jsx(Ve,{variant:"secondary",children:c.customFields?.pipelineStage||"New Inquiry"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium",children:Fe(c.customFields?.estimatedValue||0)}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Br,{className:"h-3 w-3 mr-1"}),"Schedule"]})]})]},c.id)),s.length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{children:"No recent pipeline activity"}),n.jsx("p",{className:"text-sm",children:"Leads will appear here once they're added to the pipeline"})]})]})})]})]})}function lie({lead:t,onScoreUpdate:e}){const[r,s]=S.useState(t.score||0),[i,a]=S.useState([]);S.useEffect(()=>{const c=[{name:"Email Engagement",weight:.3,value:t.emailEngagement||0},{name:"Website Activity",weight:.25,value:t.websiteActivity||0},{name:"Budget Match",weight:.2,value:t.budgetMatch||0},{name:"Timeline Urgency",weight:.15,value:t.timelineUrgency||0},{name:"Location Preference",weight:.1,value:t.locationMatch||0}];a(c);const d=c.reduce((h,f)=>h+f.value*f.weight*100,0),u=Math.min(Math.round(d),100);s(u),e&&u!==t.score&&e(t.id,u)},[t,e]);const o=c=>c>=80?"text-green-600":c>=60?"text-yellow-600":c>=40?"text-orange-600":"text-red-600",l=c=>c>=80?"Hot Lead":c>=60?"Warm Lead":c>=40?"Cool Lead":"Cold Lead";return n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center gap-2",children:[n.jsx(BZ,{className:"h-5 w-5"}),"Lead Score"]}),n.jsx(Ge,{children:"Automatically calculated based on engagement and fit"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:`text-3xl font-bold ${o(r)}`,children:r}),n.jsx(Ve,{variant:r>=60?"default":"secondary",children:l(r)})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Score Breakdown"}),i.map((c,d)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:c.name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(uc,{value:c.value*100,className:"w-20"}),n.jsx("span",{className:"text-sm font-medium w-8",children:Math.round(c.value*c.weight*100)})]})]},d))]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium",children:"Lead Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:zx.tags.map(c=>n.jsx(Ve,{variant:t.customFields?.tags?.includes(c)?"default":"outline",className:"cursor-pointer",children:c},c))})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(Xh,{className:"h-4 w-4"}),"Recommendations"]}),n.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[r>=80&&n.jsx("p",{children:"• High priority lead - schedule immediate follow-up"}),r>=60&&r<80&&n.jsx("p",{children:"• Good potential - maintain regular contact"}),r>=40&&r<60&&n.jsx("p",{children:"• Nurture with educational content"}),r<40&&n.jsx("p",{children:"• Low priority - add to drip campaign"})]})]})]})]})}function cie({leadId:t,activities:e}){const{logActivity:r}=Au(),[s,i]=S.useState(!1),[a,o]=S.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),l=f=>{switch(f){case"call":return q0;case"email":return Ui;case"meeting":return Br;case"note":return Ps;case"status_change":return vs;default:return Ps}},c=f=>{switch(f){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=f=>{switch(f){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async()=>{a.description.trim()&&(await r({leadId:t,type:a.type,description:a.description,outcome:a.outcome,duration:a.duration,scheduledDate:a.scheduledDate,userId:"current-user"}),o({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),i(!1))},h=[...e].sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime());return n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-lg",children:"Activity Timeline"}),n.jsx(Ge,{children:"Track all interactions and activities for this lead"})]}),n.jsxs(re,{onClick:()=>i(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),n.jsxs(pe,{children:[s&&n.jsx(me,{className:"mb-6 border-dashed",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),n.jsxs(nt,{value:a.type,onValueChange:f=>o(p=>({...p,type:f})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"call",children:"Phone Call"}),n.jsx(he,{value:"email",children:"Email"}),n.jsx(he,{value:"meeting",children:"Meeting"}),n.jsx(he,{value:"note",children:"Note"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),n.jsxs(nt,{value:a.outcome||"",onValueChange:f=>o(p=>({...p,outcome:f||void 0})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select outcome"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"positive",children:"Positive"}),n.jsx(he,{value:"neutral",children:"Neutral"}),n.jsx(he,{value:"negative",children:"Negative"})]})]})]})]}),a.type==="call"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),n.jsx(Te,{type:"number",value:a.duration||"",onChange:f=>o(p=>({...p,duration:f.target.value?parseInt(f.target.value):void 0})),placeholder:"e.g., 15"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(kr,{value:a.description,onChange:f=>o(p=>({...p,description:f.target.value})),placeholder:"Describe the activity...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(re,{onClick:u,children:"Add Activity"})]})]})})}),n.jsx("div",{className:"space-y-4",children:h.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):h.map((f,p)=>{const y=l(f.type),v=p===h.length-1;return n.jsxs("div",{className:"relative",children:[!v&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:pt("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(f.type)),children:n.jsx(y,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-sm capitalize",children:f.type.replace("_"," ")}),f.outcome&&n.jsx(Ve,{className:pt("ri-badge-status text-xs",d(f.outcome)),children:f.outcome}),f.duration&&n.jsxs(Ve,{variant:"secondary",className:"text-xs",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),f.duration,"m"]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:wt(f.createdAt)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),f.scheduledDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",wt(f.scheduledDate)]})]})]})]},f.id)})})]})]})}function die({leadId:t,reminders:e}){const{createReminder:r,completeReminder:s}=Au(),[i,a]=S.useState(!1),[o,l]=S.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=v=>{switch(v){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=v=>{switch(v){case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";case"deadline":return"⏰";default:return"📋"}},u=v=>new Date(v)<new Date,h=async()=>{!o.title.trim()||!o.dueDate||(await r({leadId:t,type:o.type,title:o.title,description:o.description,dueDate:new Date(o.dueDate),priority:o.priority,userId:"current-user"}),l({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),a(!1))},f=async v=>{await s(v)},p=e.filter(v=>!v.isCompleted),y=e.filter(v=>v.isCompleted);return n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-lg flex items-center",children:[n.jsx(q4,{className:"h-5 w-5 mr-2"}),"Reminders"]}),n.jsx(Ge,{children:"Set follow-up reminders and track completion"})]}),n.jsxs(re,{onClick:()=>a(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),n.jsxs(pe,{children:[i&&n.jsx(me,{className:"mb-6 border-dashed",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),n.jsxs(nt,{value:o.type,onValueChange:v=>l(g=>({...g,type:v})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"follow_up",children:"Follow Up"}),n.jsx(he,{value:"call",children:"Call"}),n.jsx(he,{value:"email",children:"Email"}),n.jsx(he,{value:"meeting",children:"Meeting"}),n.jsx(he,{value:"deadline",children:"Deadline"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Priority"}),n.jsxs(nt,{value:o.priority,onValueChange:v=>l(g=>({...g,priority:v})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"low",children:"Low"}),n.jsx(he,{value:"medium",children:"Medium"}),n.jsx(he,{value:"high",children:"High"}),n.jsx(he,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Title"}),n.jsx(Te,{value:o.title,onChange:v=>l(g=>({...g,title:v.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),n.jsx(Te,{type:"datetime-local",value:o.dueDate,onChange:v=>l(g=>({...g,dueDate:v.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(kr,{value:o.description,onChange:v=>l(g=>({...g,description:v.target.value})),placeholder:"Additional details...",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(re,{onClick:h,children:"Add Reminder"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[p.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[n.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Active Reminders (",p.length,")"]}),n.jsx("div",{className:"space-y-3",children:p.sort((v,g)=>new Date(v.dueDate).getTime()-new Date(g.dueDate).getTime()).map(v=>n.jsxs("div",{className:pt("flex items-start space-x-3 p-3 border rounded-lg",u(v.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[n.jsx(tr,{checked:!1,onCheckedChange:()=>f(v.id),className:"mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"text-lg",children:d(v.type)}),n.jsx("span",{className:"font-medium text-sm",children:v.title}),n.jsx(Ve,{className:pt("ri-badge-status text-xs",c(v.priority)),children:v.priority}),u(v.dueDate)&&n.jsxs(Ve,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[n.jsx(ao,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:v.description}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(Br,{className:"h-3 w-3"}),n.jsxs("span",{children:["Due: ",wt(v.dueDate)]})]})]})]},v.id))})]}),y.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",y.length,")"]}),n.jsx("div",{className:"space-y-2",children:y.sort((v,g)=>new Date(g.dueDate).getTime()-new Date(v.dueDate).getTime()).slice(0,5).map(v=>n.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[n.jsx(tr,{checked:!0,disabled:!0}),n.jsx("span",{className:"line-through",children:v.title}),n.jsx("span",{className:"text-xs",children:wt(v.dueDate)})]},v.id))})]}),p.length===0&&y.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}const FD=({leads:t,onSequenceStart:e=()=>{},onSequencePause:r=()=>{},onSequenceReset:s=()=>{}})=>{const i=zx.nurtureSequences,a=t||[],[o,l]=S.useState(""),c=a.length>0?a:zx.nurtureLeads,d=h=>{switch(h){case"email":return Ui;case"sms":return Ps;case"call":return q0;default:return Ui}},u=h=>{switch(h){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Nurture Sequences"}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(nt,{value:o,onValueChange:l,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select sequence"})}),n.jsx(tt,{children:i.map(h=>n.jsx(he,{value:h.id,children:h.name},h.id))})]})})]}),n.jsx("div",{className:"grid gap-4",children:c.length>0?c.map(h=>{const f=d(h.sequenceType||"email"),p=i.find(y=>y.id===h.sequenceId);return n.jsx(me,{children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(f,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium",children:[h.firstName," ",h.lastName]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:h.email}),p&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.name," - Step ",h.sequenceStep||1]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[h.sequenceStatus&&n.jsx(Ve,{className:u(h.sequenceStatus),children:h.sequenceStatus.charAt(0).toUpperCase()+h.sequenceStatus.slice(1)}),h.nextSequenceAction&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",new Date(h.nextSequenceAction).toLocaleDateString()]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[!h.sequenceStatus&&n.jsxs(re,{size:"sm",onClick:()=>o&&e(h.id,o),disabled:!o,children:[n.jsx(FZ,{className:"h-4 w-4 mr-1"}),"Start"]}),h.sequenceStatus==="active"&&n.jsxs(re,{size:"sm",variant:"outline",onClick:()=>r(h.id),children:[n.jsx(LZ,{className:"h-4 w-4 mr-1"}),"Pause"]}),h.sequenceStatus&&n.jsxs(re,{size:"sm",variant:"outline",onClick:()=>s(h.id),children:[n.jsx(tB,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})]})})},h.id)}):n.jsx(me,{children:n.jsxs(pe,{className:"py-12 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"No leads available for nurturing sequences"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Leads will appear here when they are added to the system"})]})})})]})};function Fz(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState([]),[o,l]=S.useState([]),[c,d]=S.useState([]),[u,h]=S.useState([]),[f,p]=S.useState([]),[y,v]=S.useState([]),[g,b]=S.useState(!1);S.useEffect(()=>{j()},[]);const j=()=>{const J=Bn("renter-insight-email-templates",[]),H=Bn("renter-insight-sms-templates",[]),$=Bn("renter-insight-sequences",[]),W=Bn("renter-insight-enrollments",[]),te=Bn("renter-insight-communication-logs",[]),ee=Bn("renter-insight-ai-insights",[]);if(J.length===0){const ne=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];a(ne),rn("renter-insight-email-templates",ne)}else a(J);if(H.length===0){const ne=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];l(ne),rn("renter-insight-sms-templates",ne)}else l(H);if($.length===0){const ne=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];e(ne),rn("renter-insight-sequences",ne)}else e($);if(ee.length===0){const ne=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];h(ne),rn("renter-insight-ai-insights",ne)}else h(ee);s(W),d(te)},w=async(J,H)=>{b(!0);try{const $={id:Math.random().toString(36).substr(2,9),leadId:J,sequenceId:H,currentStepId:t.find(W=>W.id===H)?.steps[0]?.id||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return s(W=>[...W,$]),await C($),$}finally{b(!1)}},C=async J=>{const H=t.find(te=>te.id===J.sequenceId);if(!H)return;const $=H.steps.find(te=>te.id===J.currentStepId);if(!$)return;switch($.type){case"email":await E(J.leadId,$);break;case"sms":await N(J.leadId,$);break;case"wait":const te=new Date;te.setHours(te.getHours()+$.delay),s(ee=>ee.map(ne=>ne.id===J.id?{...ne,nextActionAt:te}:ne));break}const W=H.steps.findIndex(te=>te.id===$.id)+1;if(W<H.steps.length){const te=H.steps[W];s(ee=>ee.map(ne=>ne.id===J.id?{...ne,currentStepId:te.id}:ne))}else s(te=>te.map(ee=>ee.id===J.id?{...ee,status:"completed",completedAt:new Date}:ee))},E=async(J,H)=>{const $={id:Math.random().toString(36).substr(2,9),leadId:J,type:"email",direction:"outbound",subject:H.content.subject,content:H.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:H.id,template:H.content.template}};d(W=>[...W,$]),setTimeout(()=>{d(W=>W.map(te=>te.id===$.id?{...te,status:"delivered",deliveredAt:new Date}:te))},2e3),setTimeout(()=>{d(W=>W.map(te=>te.id===$.id?{...te,status:"opened",openedAt:new Date}:te))},5e3)},N=async(J,H)=>{const $={id:Math.random().toString(36).substr(2,9),leadId:J,type:"sms",direction:"outbound",content:H.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:H.id}};d(W=>[...W,$]),setTimeout(()=>{d(W=>W.map(te=>te.id===$.id?{...te,status:"delivered",deliveredAt:new Date}:te))},1e3)};return{sequences:t,enrollments:r,emailTemplates:i,smsTemplates:o,communicationLogs:c,aiInsights:u,automationRules:f,analytics:y,loading:g,enrollLeadInSequence:w,processNextStep:C,generateAIInsights:async(J,H)=>{b(!0);try{const $=[];H.score>70&&$.push({id:Math.random().toString(36).substr(2,9),leadId:J,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const W=new Date(H.lastActivity),te=Math.floor((Date.now()-W.getTime())/(1e3*60*60*24));return te>7&&$.push({id:Math.random().toString(36).substr(2,9),leadId:J,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${te} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),H.customFields?.budget&&$.push({id:Math.random().toString(36).substr(2,9),leadId:J,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${H.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),h(ee=>[...ee.filter(ne=>ne.leadId!==J),...$]),$}finally{b(!1)}},createEmailTemplate:async J=>{const H={id:Math.random().toString(36).substr(2,9),name:J.name||"",subject:J.subject||"",body:J.body||"",type:J.type||"custom",variables:J.variables||[],isActive:!0,createdAt:new Date},$=[...i,H];return a($),rn("renter-insight-email-templates",$),H},createSMSTemplate:async J=>{const H={id:Math.random().toString(36).substr(2,9),name:J.name||"",message:J.message||"",type:J.type||"custom",variables:J.variables||[],isActive:!0,createdAt:new Date},$=[...o,H];return l($),rn("renter-insight-sms-templates",$),H},createNurtureSequence:async J=>{const H={id:Math.random().toString(36).substr(2,9),name:J.name||"",description:J.description||"",triggerConditions:J.triggerConditions||[],steps:J.steps||[],isActive:!0,targetAudience:J.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},$=[...t,H];return e($),rn("renter-insight-sequences",$),H},updateNurtureSequence:async(J,H)=>{const $=t.map(W=>W.id===J?{...W,...H,updatedAt:new Date}:W);e($),rn("renter-insight-sequences",$)},updateEmailTemplate:async(J,H)=>{const $=i.map(W=>W.id===J?{...W,...H}:W);a($),rn("renter-insight-email-templates",$)},updateSMSTemplate:async(J,H)=>{const $=o.map(W=>W.id===J?{...W,...H}:W);l($),rn("renter-insight-sms-templates",$)},getEnrollmentsByLead:J=>r.filter(H=>H.leadId===J),getCommunicationHistory:J=>c.filter(H=>H.leadId===J).sort((H,$)=>new Date($.sentAt).getTime()-new Date(H.sentAt).getTime()),getAIInsightsByLead:J=>u.filter(H=>H.leadId===J&&!H.isRead),markInsightAsRead:async J=>{h(H=>H.map($=>$.id===J?{...$,isRead:!0}:$))},pauseEnrollment:async J=>{s(H=>H.map($=>$.id===J?{...$,status:"paused"}:$))},resumeEnrollment:async J=>{s(H=>H.map($=>$.id===J?{...$,status:"active"}:$))}}}function uie({leadId:t,leadData:e}){const{aiInsights:r,generateAIInsights:s,markInsightAsRead:i,enrollLeadInSequence:a,sequences:o}=Fz(),[l,c]=S.useState(!1),[d,u]=S.useState("insights"),h=r.filter(E=>E.leadId===t),f=h.filter(E=>!E.isRead),p=E=>{switch(E){case"next_action":return ic;case"communication_style":return Ps;case"timing":return Dr;case"content_suggestion":return OZ;case"risk_assessment":return Ar;default:return Qc}},y=E=>{switch(E){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},v=E=>E>=80?"text-green-600 bg-green-50":E>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",g=async()=>{c(!0);try{await s(t,e)}finally{c(!1)}},b=async E=>{await i(E)},j=async E=>{await a(t,E)},C=(E=>{const N=[];if(E.score>80?N.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):E.score>60?N.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):N.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),E.customFields?.budget){const _=E.customFields.budget;N.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${_} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const A=Math.floor((Date.now()-new Date(E.createdAt).getTime())/(1e3*60*60*24));return A>7&&N.push({type:"Re-engagement Strategy",suggestion:`Lead is ${A} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),E.source.toLowerCase().includes("website")&&N.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),N})(e);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Qc,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),n.jsxs(re,{onClick:g,disabled:l,size:"sm",children:[n.jsx(Qc,{className:"h-4 w-4 mr-2"}),l?"Analyzing...":"Generate Insights"]})]}),n.jsxs(fn,{value:d,onValueChange:u,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsxs(dt,{value:"insights",className:"relative",children:["AI Insights",f.length>0&&n.jsx(Ve,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:f.length})]}),n.jsx(dt,{value:"chatgpt",children:"ChatGPT Suggestions"}),n.jsx(dt,{value:"automation",children:"Automation"})]}),n.jsx(ht,{value:"insights",className:"space-y-4",children:h.length===0?n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Qc,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),n.jsxs(re,{onClick:g,disabled:l,children:[n.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):n.jsx("div",{className:"space-y-4",children:h.sort((E,N)=>new Date(N.generatedAt).getTime()-new Date(E.generatedAt).getTime()).map(E=>{const N=p(E.type);return n.jsxs(me,{className:pt("shadow-sm border-0 bg-gradient-to-br",y(E.type),!E.isRead&&"ring-2 ring-blue-200"),children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx(N,{className:"h-6 w-6 text-primary mt-1"}),n.jsxs("div",{children:[n.jsx(Ne,{className:"text-lg",children:E.title}),n.jsx(Ge,{className:"mt-1",children:E.description})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(Ve,{className:pt("ri-badge-status",v(E.confidence)),children:[E.confidence,"% confidence"]}),!E.isRead&&n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>b(E.id),children:[n.jsx(hn,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),E.actionable&&E.suggestedActions&&n.jsx(pe,{children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),n.jsx("div",{className:"space-y-2",children:E.suggestedActions.map((A,_)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[n.jsx("span",{className:"text-sm",children:A}),n.jsx(re,{variant:"outline",size:"sm",children:"Execute"})]},_))})]})})]},E.id)})})}),n.jsxs(ht,{value:"chatgpt",className:"space-y-4",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx(Qc,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx(Ne,{className:"text-green-900",children:"ChatGPT Analysis"}),n.jsx(Ge,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:C.map((E,N)=>n.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:E.type}),n.jsxs(Ve,{className:"bg-green-100 text-green-700 border-green-200",children:[E.confidence,"% confidence"]})]}),n.jsx("p",{className:"text-sm text-green-800 mb-3",children:E.suggestion}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),n.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:E.actions.map((A,_)=>n.jsx(re,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:A},_))})]})]},N))})})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(ic,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",e.score]}),n.jsx("p",{className:"text-sm text-blue-700",children:e.score>=80?"Hot Lead - High Priority":e.score>=60?"Warm Lead - Good Potential":e.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.score}),n.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),n.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.customFields?.budget&&n.jsx("li",{children:"• Budget information provided"}),e.customFields?.timeframe&&n.jsx("li",{children:"• Clear purchase timeline"}),e.score>60&&n.jsx("li",{children:"• Good engagement level"}),e.source==="Customer Referral"&&n.jsx("li",{children:"• High-quality referral source"})]})]}),n.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[n.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),n.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!e.customFields?.budget&&n.jsx("li",{children:"• No budget information"}),e.score<60&&n.jsx("li",{children:"• Low engagement level"}),!e.assignedTo&&n.jsx("li",{children:"• No sales rep assigned"}),n.jsx("li",{children:"• Limited activity history"})]})]})]})]})})]})]}),n.jsxs(ht,{value:"automation",className:"space-y-4",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),n.jsx(Ge,{children:"Enroll this lead in automated nurturing sequences"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:o.filter(E=>E.isActive).map(E=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:E.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:E.description}),n.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsxs(Ve,{variant:"secondary",className:"text-xs",children:[E.steps.length," steps"]}),n.jsx(Ve,{variant:"outline",className:"text-xs",children:E.targetAudience})]})]}),n.jsx(re,{onClick:()=>j(E.id),size:"sm",children:"Enroll Lead"})]},E.id))})})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Dr,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),n.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),n.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),n.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),n.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}function hie({leadId:t,leadData:e}){const{emailTemplates:r,smsTemplates:s,getCommunicationHistory:i}=Fz(),[a,o]=S.useState("history"),[l,c]=S.useState(""),[d,u]=S.useState(""),[h,f]=S.useState(""),[p,y]=S.useState(""),[v,g]=S.useState(""),[b,j]=S.useState(!1),w=i(t),C=F=>{switch(F){case"sent":return n.jsx(Bo,{className:"h-3 w-3 text-blue-500"});case"delivered":return n.jsx(hn,{className:"h-3 w-3 text-green-500"});case"opened":return n.jsx(Ui,{className:"h-3 w-3 text-purple-500"});case"clicked":return n.jsx(hn,{className:"h-3 w-3 text-green-600"});case"replied":return n.jsx(Ps,{className:"h-3 w-3 text-blue-600"});case"failed":return n.jsx(Xh,{className:"h-3 w-3 text-red-500"});default:return n.jsx(Dr,{className:"h-3 w-3 text-gray-500"})}},E=F=>{switch(F){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=(F,I)=>F.replace(/\{\{first_name\}\}/g,I.firstName).replace(/\{\{last_name\}\}/g,I.lastName).replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,I.customFields?.budget||"your budget"),A=async()=>{j(!0);try{let F=h,I=p;if(l){const T=r.find(R=>R.id===l);T&&(F=N(T.subject,e),I=N(T.body,e))}await new Promise(T=>setTimeout(T,2e3)),f(""),y(""),c(""),console.log("Email sent:",{subject:F,body:I,to:e.email})}finally{j(!1)}},_=async()=>{j(!0);try{let F=v;if(d){const I=s.find(T=>T.id===d);I&&(F=N(I.message,e))}await new Promise(I=>setTimeout(I,1500)),g(""),u(""),console.log("SMS sent:",{message:F,to:e.phone})}finally{j(!1)}},k=(F,I)=>{if(I==="email"){c(F);const T=r.find(R=>R.id===F);T&&(f(N(T.subject,e)),y(N(T.body,e)))}else{u(F);const T=s.find(R=>R.id===F);T&&g(N(T.message,e))}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2 text-blue-500"}),"Communication Center"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails, SMS, and track communication history"})]}),n.jsxs(fn,{value:a,onValueChange:o,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"history",children:"History"}),n.jsx(dt,{value:"email",children:"Send Email"}),n.jsx(dt,{value:"sms",children:"Send SMS"})]}),n.jsx(ht,{value:"history",className:"space-y-4",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Dr,{className:"h-5 w-5 mr-2"}),"Communication History"]}),n.jsx(Ge,{children:"All email and SMS communications with this lead"})]}),n.jsx(pe,{children:w.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ps,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No communication history yet"}),n.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):n.jsx("div",{className:"space-y-4",children:w.map((F,I)=>n.jsxs("div",{className:"relative",children:[I<w.length-1&&n.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:pt("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",F.type==="email"?"border-blue-200":"border-green-200"),children:F.type==="email"?n.jsx(Ui,{className:"h-4 w-4 text-blue-500"}):n.jsx(Ps,{className:"h-4 w-4 text-green-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"font-medium text-sm capitalize",children:[F.type," ",F.direction]}),n.jsxs(Ve,{className:pt("ri-badge-status text-xs",E(F.status)),children:[C(F.status),n.jsx("span",{className:"ml-1",children:F.status})]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:wt(F.sentAt)})]}),F.subject&&n.jsx("p",{className:"font-medium text-sm mb-1",children:F.subject}),n.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:F.content})}),n.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Sent: ",wt(F.sentAt)]}),F.deliveredAt&&n.jsxs("span",{children:["Delivered: ",wt(F.deliveredAt)]}),F.openedAt&&n.jsxs("span",{children:["Opened: ",wt(F.openedAt)]}),F.clickedAt&&n.jsxs("span",{children:["Clicked: ",wt(F.clickedAt)]})]})]})]})]},F.id))})})]})}),n.jsx(ht,{value:"email",className:"space-y-4",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ui,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),n.jsx(Ge,{children:"Send personalized emails using templates or custom content"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),n.jsxs(nt,{value:l,onValueChange:F=>k(F,"email"),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Choose a template or write custom email"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"Custom Email"}),r.filter(F=>F.isActive).map(F=>n.jsxs(he,{value:F.id,children:[F.name," (",F.type,")"]},F.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Te,{value:e.email,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Subject"}),n.jsx(Te,{value:h,onChange:F=>f(F.target.value),placeholder:"Enter email subject"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(kr,{value:p,onChange:F=>y(F.target.value),placeholder:"Enter your email message",rows:8})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(re,{onClick:A,disabled:b||!h||!p,children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),b?"Sending...":"Send Email"]})]})]})]})}),n.jsx(ht,{value:"sms",className:"space-y-4",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),n.jsx(Ge,{children:"Send text messages using templates or custom content"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),n.jsxs(nt,{value:d,onValueChange:F=>k(F,"sms"),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Choose a template or write custom SMS"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"Custom SMS"}),s.filter(F=>F.isActive).map(F=>n.jsxs(he,{value:F.id,children:[F.name," (",F.type,")"]},F.id))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"To"}),n.jsx(Te,{value:e.phone,disabled:!0,className:"bg-muted/50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Message"}),n.jsx(kr,{value:v,onChange:F=>g(F.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),n.jsxs("div",{className:"flex justify-between items-center mt-1",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:[v.length,"/160 characters"]}),n.jsx("div",{className:pt("text-xs",v.length>160?"text-red-500":"text-muted-foreground"),children:v.length>160&&"Message too long"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),n.jsxs(re,{onClick:_,disabled:b||!v||v.length>160,children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),b?"Sending...":"Send SMS"]})]})]})]})})]})]})}var Lb={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var fie=Lb.exports,$D;function mie(){return $D||($D=1,function(t,e){((r,s)=>{t.exports=s()})(fie,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i,a=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,l={},c=0,d={};function u(_){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var F=E(k);F.chunkSize=parseInt(F.chunkSize),k.step||k.chunk||(F.chunkSize=null),this._handle=new v(F),(this._handle.streamer=this)._config=F}).call(this,_),this.parseChunk=function(k,F){var I=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<I){let R=this._config.newline;R||(T=this._config.quoteChar||'"',R=this._handle.guessLineEndings(k,T)),k=[...k.split(R).slice(I)].join(R)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(k))!==void 0&&(k=T),this.isFirstChunk=!1,this._halted=!1;var I=this._partialLine+k,T=(this._partialLine="",this._handle.parse(I,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=T.meta.cursor,I=(this._finished||(this._partialLine=I.substring(k-this._baseIndex),this._baseIndex=k),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:T,workerId:d.WORKER_ID,finished:I});else if(A(this._config.chunk)&&!F){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!I||!A(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),I||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(k){A(this._config.error)?this._config.error(k):o&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:k,finished:!1})}}function h(_){var k;(_=_||{}).chunkSize||(_.chunkSize=d.RemoteChunkSize),u.call(this,_),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),a||(k.onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var F,I=this._config.downloadRequestHeaders;for(F in I)k.setRequestHeader(F,I[F])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+T));try{k.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}a&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(F=>(F=F.getResponseHeader("Content-Range"))!==null?parseInt(F.substring(F.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(F){F=k.statusText||F,this._sendError(new Error(F))}}function f(_){(_=_||{}).chunkSize||(_.chunkSize=d.LocalChunkSize),u.call(this,_);var k,F,I=typeof FileReader<"u";this.stream=function(T){this._input=T,F=T.slice||T.webkitSlice||T.mozSlice,I?((k=new FileReader).onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,R=(this._config.chunkSize&&(R=Math.min(this._start+this._config.chunkSize,this._input.size),T=F.call(T,this._start,R)),k.readAsText(T,this._config.encoding));I||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(k.error)}}function p(_){var k;u.call(this,_=_||{}),this.stream=function(F){return k=F,this._nextChunk()},this._nextChunk=function(){var F,I;if(!this._finished)return F=this._config.chunkSize,k=F?(I=k.substring(0,F),k.substring(F)):(I=k,""),this._finished=!k,this.parseChunk(I)}}function y(_){u.call(this,_=_||{});var k=[],F=!0,I=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){I&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):F=!0},this._streamData=N(function(T){try{k.push(typeof T=="string"?T:T.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(R){this._streamError(R)}},this),this._streamError=N(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=N(function(){this._streamCleanUp(),I=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(_){var k,F,I,T,R=Math.pow(2,53),O=-R,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,K=0,Y=0,J=!1,H=!1,$=[],W={data:[],errors:[],meta:{}};function te(ve){return _.skipEmptyLines==="greedy"?ve.join("").trim()==="":ve.length===1&&ve[0].length===0}function ee(){if(W&&I&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),I=!1),_.skipEmptyLines&&(W.data=W.data.filter(function(Pe){return!te(Pe)})),ne()){let Pe=function(Ce,He){A(_.transformHeader)&&(Ce=_.transformHeader(Ce,He)),$.push(Ce)};if(W)if(Array.isArray(W.data[0])){for(var ve=0;ne()&&ve<W.data.length;ve++)W.data[ve].forEach(Pe);W.data.splice(0,1)}else W.data.forEach(Pe)}function xe(Pe,Ce){for(var He=_.header?{}:[],Ke=0;Ke<Pe.length;Ke++){var we=Ke,oe=Pe[Ke],oe=((it,_e)=>(qe=>(_.dynamicTypingFunction&&_.dynamicTyping[qe]===void 0&&(_.dynamicTyping[qe]=_.dynamicTypingFunction(qe)),(_.dynamicTyping[qe]||_.dynamicTyping)===!0))(it)?_e==="true"||_e==="TRUE"||_e!=="false"&&_e!=="FALSE"&&((qe=>{if(z.test(qe)&&(qe=parseFloat(qe),O<qe&&qe<R))return 1})(_e)?parseFloat(_e):q.test(_e)?new Date(_e):_e===""?null:_e):_e)(we=_.header?Ke>=$.length?"__parsed_extra":$[Ke]:we,oe=_.transform?_.transform(oe,we):oe);we==="__parsed_extra"?(He[we]=He[we]||[],He[we].push(oe)):He[we]=oe}return _.header&&(Ke>$.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+$.length+" fields but parsed "+Ke,Y+Ce):Ke<$.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+$.length+" fields but parsed "+Ke,Y+Ce)),He}var Se;W&&(_.header||_.dynamicTyping||_.transform)&&(Se=1,!W.data.length||Array.isArray(W.data[0])?(W.data=W.data.map(xe),Se=W.data.length):W.data=xe(W.data,0),_.header&&W.meta&&(W.meta.fields=$),Y+=Se)}function ne(){return _.header&&$.length===0}function ae(ve,xe,Se,Pe){ve={type:ve,code:xe,message:Se},Pe!==void 0&&(ve.row=Pe),W.errors.push(ve)}A(_.step)&&(T=_.step,_.step=function(ve){W=ve,ne()?ee():(ee(),W.data.length!==0&&(K+=ve.data.length,_.preview&&K>_.preview?F.abort():(W.data=W.data[0],T(W,B))))}),this.parse=function(ve,xe,Se){var Pe=_.quoteChar||'"',Pe=(_.newline||(_.newline=this.guessLineEndings(ve,Pe)),I=!1,_.delimiter?A(_.delimiter)&&(_.delimiter=_.delimiter(ve),W.meta.delimiter=_.delimiter):((Pe=((Ce,He,Ke,we,oe)=>{var it,_e,qe,lt;oe=oe||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var vt=0;vt<oe.length;vt++){for(var xt,Ot=oe[vt],Ze=0,ut=0,Et=0,kt=(qe=void 0,new b({comments:we,delimiter:Ot,newline:He,preview:10}).parse(Ce)),Kt=0;Kt<kt.data.length;Kt++)Ke&&te(kt.data[Kt])?Et++:(xt=kt.data[Kt].length,ut+=xt,qe===void 0?qe=xt:0<xt&&(Ze+=Math.abs(xt-qe),qe=xt));0<kt.data.length&&(ut/=kt.data.length-Et),(_e===void 0||Ze<=_e)&&(lt===void 0||lt<ut)&&1.99<ut&&(_e=Ze,it=Ot,lt=ut)}return{successful:!!(_.delimiter=it),bestDelimiter:it}})(ve,_.newline,_.skipEmptyLines,_.comments,_.delimitersToGuess)).successful?_.delimiter=Pe.bestDelimiter:(I=!0,_.delimiter=d.DefaultDelimiter),W.meta.delimiter=_.delimiter),E(_));return _.preview&&_.header&&Pe.preview++,k=ve,F=new b(Pe),W=F.parse(k,xe,Se),ee(),J?{meta:{paused:!0}}:W||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,F.abort(),k=A(_.chunk)?"":k.substring(F.getCharIndex())},this.resume=function(){B.streamer._halted?(J=!1,B.streamer.parseChunk(k,!0)):setTimeout(B.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,F.abort(),W.meta.aborted=!0,A(_.complete)&&_.complete(W),k=""},this.guessLineEndings=function(Ce,Pe){Ce=Ce.substring(0,1048576);var Pe=new RegExp(g(Pe)+"([^]*?)"+g(Pe),"gm"),Se=(Ce=Ce.replace(Pe,"")).split("\r"),Pe=Ce.split(`
`),Ce=1<Pe.length&&Pe[0].length<Se[0].length;if(Se.length===1||Ce)return`
`;for(var He=0,Ke=0;Ke<Se.length;Ke++)Se[Ke][0]===`
`&&He++;return He>=Se.length/2?`\r
`:"\r"}}function g(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(_){var k=(_=_||{}).delimiter,F=_.newline,I=_.comments,T=_.step,R=_.preview,O=_.fastMode,z=null,q=!1,B=_.quoteChar==null?'"':_.quoteChar,K=B;if(_.escapeChar!==void 0&&(K=_.escapeChar),(typeof k!="string"||-1<d.BAD_DELIMITERS.indexOf(k))&&(k=","),I===k)throw new Error("Comment character same as delimiter");I===!0?I="#":(typeof I!="string"||-1<d.BAD_DELIMITERS.indexOf(I))&&(I=!1),F!==`
`&&F!=="\r"&&F!==`\r
`&&(F=`
`);var Y=0,J=!1;this.parse=function(H,$,W){if(typeof H!="string")throw new Error("Input must be a string");var te=H.length,ee=k.length,ne=F.length,ae=I.length,ve=A(T),xe=[],Se=[],Pe=[],Ce=Y=0;if(!H)return Ze();if(O||O!==!1&&H.indexOf(B)===-1){for(var He=H.split(F),Ke=0;Ke<He.length;Ke++){if(Pe=He[Ke],Y+=Pe.length,Ke!==He.length-1)Y+=F.length;else if(W)return Ze();if(!I||Pe.substring(0,ae)!==I){if(ve){if(xe=[],lt(Pe.split(k)),ut(),J)return Ze()}else lt(Pe.split(k));if(R&&R<=Ke)return xe=xe.slice(0,R),Ze(!0)}}return Ze()}for(var we=H.indexOf(k,Y),oe=H.indexOf(F,Y),it=new RegExp(g(K)+g(B),"g"),_e=H.indexOf(B,Y);;)if(H[Y]===B)for(_e=Y,Y++;;){if((_e=H.indexOf(B,_e+1))===-1)return W||Se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:xe.length,index:Y}),xt();if(_e===te-1)return xt(H.substring(Y,_e).replace(it,B));if(B===K&&H[_e+1]===K)_e++;else if(B===K||_e===0||H[_e-1]!==K){we!==-1&&we<_e+1&&(we=H.indexOf(k,_e+1));var qe=vt((oe=oe!==-1&&oe<_e+1?H.indexOf(F,_e+1):oe)===-1?we:Math.min(we,oe));if(H.substr(_e+1+qe,ee)===k){Pe.push(H.substring(Y,_e).replace(it,B)),H[Y=_e+1+qe+ee]!==B&&(_e=H.indexOf(B,Y)),we=H.indexOf(k,Y),oe=H.indexOf(F,Y);break}if(qe=vt(oe),H.substring(_e+1+qe,_e+1+qe+ne)===F){if(Pe.push(H.substring(Y,_e).replace(it,B)),Ot(_e+1+qe+ne),we=H.indexOf(k,Y),_e=H.indexOf(B,Y),ve&&(ut(),J))return Ze();if(R&&xe.length>=R)return Ze(!0);break}Se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:xe.length,index:Y}),_e++}}else if(I&&Pe.length===0&&H.substring(Y,Y+ae)===I){if(oe===-1)return Ze();Y=oe+ne,oe=H.indexOf(F,Y),we=H.indexOf(k,Y)}else if(we!==-1&&(we<oe||oe===-1))Pe.push(H.substring(Y,we)),Y=we+ee,we=H.indexOf(k,Y);else{if(oe===-1)break;if(Pe.push(H.substring(Y,oe)),Ot(oe+ne),ve&&(ut(),J))return Ze();if(R&&xe.length>=R)return Ze(!0)}return xt();function lt(Et){xe.push(Et),Ce=Y}function vt(Et){var kt=0;return kt=Et!==-1&&(Et=H.substring(_e+1,Et))&&Et.trim()===""?Et.length:kt}function xt(Et){return W||(Et===void 0&&(Et=H.substring(Y)),Pe.push(Et),Y=te,lt(Pe),ve&&ut()),Ze()}function Ot(Et){Y=Et,lt(Pe),Pe=[],oe=H.indexOf(F,Y)}function Ze(Et){if(_.header&&!$&&xe.length&&!q){var kt=xe[0],Kt=Object.create(null),Vt=new Set(kt);let nr=!1;for(let Nt=0;Nt<kt.length;Nt++){let Yr=kt[Nt];if(Kt[Yr=A(_.transformHeader)?_.transformHeader(Yr,Nt):Yr]){let wr,xs=Kt[Yr];for(;wr=Yr+"_"+xs,xs++,Vt.has(wr););Vt.add(wr),kt[Nt]=wr,Kt[Yr]++,nr=!0,(z=z===null?{}:z)[wr]=Yr}else Kt[Yr]=1,kt[Nt]=Yr;Vt.add(Yr)}nr&&console.warn("Duplicate headers found and renamed."),q=!0}return{data:xe,errors:Se,meta:{delimiter:k,linebreak:F,aborted:J,truncated:!!Et,cursor:Ce+($||0),renamedHeaders:z}}}function ut(){T(Ze()),xe=[],Se=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return Y}}function j(_){var k=_.data,F=l[k.workerId],I=!1;if(k.error)F.userError(k.error,k.file);else if(k.results&&k.results.data){var T={abort:function(){I=!0,w(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(A(F.userStep)){for(var R=0;R<k.results.data.length&&(F.userStep({data:k.results.data[R],errors:k.results.errors,meta:k.results.meta},T),!I);R++);delete k.results}else A(F.userChunk)&&(F.userChunk(k.results,T,k.file),delete k.results)}k.finished&&!I&&w(k.workerId,k.results)}function w(_,k){var F=l[_];A(F.userComplete)&&F.userComplete(k),F.terminate(),delete l[_]}function C(){throw new Error("Not implemented.")}function E(_){if(typeof _!="object"||_===null)return _;var k,F=Array.isArray(_)?[]:{};for(k in _)F[k]=E(_[k]);return F}function N(_,k){return function(){_.apply(k,arguments)}}function A(_){return typeof _=="function"}return d.parse=function(_,k){var F=(k=k||{}).dynamicTyping||!1;if(A(F)&&(k.dynamicTypingFunction=F,F={}),k.dynamicTyping=F,k.transform=!!A(k.transform)&&k.transform,!k.worker||!d.WORKERS_SUPPORTED)return F=null,d.NODE_STREAM_INPUT,typeof _=="string"?(_=(I=>I.charCodeAt(0)!==65279?I:I.slice(1))(_),F=new(k.download?h:p)(k)):_.readable===!0&&A(_.read)&&A(_.on)?F=new y(k):(s.File&&_ instanceof File||_ instanceof Object)&&(F=new f(k)),F.stream(_);(F=(()=>{var I;return!!d.WORKERS_SUPPORTED&&(I=(()=>{var T=s.URL||s.webkitURL||null,R=r.toString();return d.BLOB_URL||(d.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",R,")();"],{type:"text/javascript"})))})(),(I=new s.Worker(I)).onmessage=j,I.id=c++,l[I.id]=I)})()).userStep=k.step,F.userChunk=k.chunk,F.userComplete=k.complete,F.userError=k.error,k.step=A(k.step),k.chunk=A(k.chunk),k.complete=A(k.complete),k.error=A(k.error),delete k.worker,F.postMessage({input:_,config:k,workerId:F.id})},d.unparse=function(_,k){var F=!1,I=!0,T=",",R=`\r
`,O='"',z=O+O,q=!1,B=null,K=!1,Y=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||d.BAD_DELIMITERS.filter(function($){return k.delimiter.indexOf($)!==-1}).length||(T=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(F=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(q=k.skipEmptyLines),typeof k.newline=="string"&&(R=k.newline),typeof k.quoteChar=="string"&&(O=k.quoteChar),typeof k.header=="boolean"&&(I=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");B=k.columns}k.escapeChar!==void 0&&(z=k.escapeChar+O),k.escapeFormulae instanceof RegExp?K=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(K=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(O),"g"));if(typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(_)){if(!_.length||Array.isArray(_[0]))return J(null,_,q);if(typeof _[0]=="object")return J(B||Object.keys(_[0]),_,q)}else if(typeof _=="object")return typeof _.data=="string"&&(_.data=JSON.parse(_.data)),Array.isArray(_.data)&&(_.fields||(_.fields=_.meta&&_.meta.fields||B),_.fields||(_.fields=Array.isArray(_.data[0])?_.fields:typeof _.data[0]=="object"?Object.keys(_.data[0]):[]),Array.isArray(_.data[0])||typeof _.data[0]=="object"||(_.data=[_.data])),J(_.fields||[],_.data||[],q);throw new Error("Unable to serialize unrecognized input");function J($,W,te){var ee="",ne=(typeof $=="string"&&($=JSON.parse($)),typeof W=="string"&&(W=JSON.parse(W)),Array.isArray($)&&0<$.length),ae=!Array.isArray(W[0]);if(ne&&I){for(var ve=0;ve<$.length;ve++)0<ve&&(ee+=T),ee+=H($[ve],ve);0<W.length&&(ee+=R)}for(var xe=0;xe<W.length;xe++){var Se=(ne?$:W[xe]).length,Pe=!1,Ce=ne?Object.keys(W[xe]).length===0:W[xe].length===0;if(te&&!ne&&(Pe=te==="greedy"?W[xe].join("").trim()==="":W[xe].length===1&&W[xe][0].length===0),te==="greedy"&&ne){for(var He=[],Ke=0;Ke<Se;Ke++){var we=ae?$[Ke]:Ke;He.push(W[xe][we])}Pe=He.join("").trim()===""}if(!Pe){for(var oe=0;oe<Se;oe++){0<oe&&!Ce&&(ee+=T);var it=ne&&ae?$[oe]:oe;ee+=H(W[xe][it],oe)}xe<W.length-1&&(!te||0<Se&&!Ce)&&(ee+=R)}}return ee}function H($,W){var te,ee;return $==null?"":$.constructor===Date?JSON.stringify($).slice(1,25):(ee=!1,K&&typeof $=="string"&&K.test($)&&($="'"+$,ee=!0),te=$.toString().replace(Y,z),(ee=ee||F===!0||typeof F=="function"&&F($,W)||Array.isArray(F)&&F[W]||((ne,ae)=>{for(var ve=0;ve<ae.length;ve++)if(-1<ne.indexOf(ae[ve]))return!0;return!1})(te,d.BAD_DELIMITERS)||-1<te.indexOf(T)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?O+te+O:te)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=b,d.ParserHandle=v,d.NetworkStreamer=h,d.FileStreamer=f,d.StringStreamer=p,d.ReadableStreamStreamer=y,s.jQuery&&((i=s.jQuery).fn.parse=function(_){var k=_.config||{},F=[];return this.each(function(R){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)F.push({file:this.files[O],inputElem:this,instanceConfig:i.extend({},k)})}),I(),this;function I(){if(F.length===0)A(_.complete)&&_.complete();else{var R,O,z,q,B=F[0];if(A(_.before)){var K=_.before(B.file,B.inputElem);if(typeof K=="object"){if(K.action==="abort")return R="AbortError",O=B.file,z=B.inputElem,q=K.reason,void(A(_.error)&&_.error({name:R},O,z,q));if(K.action==="skip")return void T();typeof K.config=="object"&&(B.instanceConfig=i.extend(B.instanceConfig,K.config))}else if(K==="skip")return void T()}var Y=B.instanceConfig.complete;B.instanceConfig.complete=function(J){A(Y)&&Y(J,B.file,B.inputElem),T()},d.parse(B.file,B.instanceConfig)}}function T(){F.splice(0,1),I()}}),o&&(s.onmessage=function(_){_=_.data,d.WORKER_ID===void 0&&_&&(d.WORKER_ID=_.workerId),typeof _.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(_.input,_.config),finished:!0}):(s.File&&_.input instanceof File||_.input instanceof Object)&&(_=d.parse(_.input,_.config))&&s.postMessage({workerId:d.WORKER_ID,results:_,finished:!0})}),(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(u.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(y.prototype=Object.create(u.prototype)).constructor=y,d})}(Lb)),Lb.exports}var pie=mie();const vg=Kr(pie);function df(){const[t,e]=S.useState([]),[r,s]=S.useState(!1);S.useEffect(()=>{i()},[]);const i=()=>{const p=Bn("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:ur.MOTORHOME,status:Or.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:ur.RV,status:Or.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:ur.FIFTH_WHEEL,status:Or.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:ur.TRAVEL_TRAILER,status:Or.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:ur.TOY_HAULER,status:Or.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:ur.DOUBLE_WIDE,status:Or.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);e(p)},a=p=>{rn("renter-insight-vehicles",p)};return{vehicles:t,loading:r,getAvailableVehicles:()=>t.filter(p=>p.status===Or.AVAILABLE),getVehicleById:p=>t.find(y=>y.id===p),updateVehicleStatus:async(p,y)=>{const v=t.map(g=>g.id===p?{...g,status:y,updatedAt:new Date}:g);e(v),a(v)},createVehicle:async p=>{s(!0);try{const y={id:Math.random().toString(36).substr(2,9),vin:p.vin||"",make:p.make||"",model:p.model||"",year:p.year||new Date().getFullYear(),type:p.type||ur.RV,status:Or.AVAILABLE,price:p.price||0,cost:p.cost||0,location:p.location||"",features:p.features||[],images:p.images||[],customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},v=[...t,y];return e(v),a(v),y}finally{s(!1)}},deleteVehicle:async p=>{const y=t.filter(v=>v.id!==p);e(y),a(y)},importVehiclesFromCSV:async p=>new Promise((y,v)=>{vg.parse(p,{header:!0,skipEmptyLines:!0,complete:g=>{const b=g.data.map(j=>({vin:j.vin||"",make:j.make||"",model:j.model||"",year:parseInt(j.year)||new Date().getFullYear(),type:j.type||ur.RV,status:j.status||Or.AVAILABLE,price:parseFloat(j.price)||0,cost:parseFloat(j.cost)||0,location:j.location||"",features:j.features?j.features.split(",").map(w=>w.trim()):[],images:[],customFields:{exteriorColor:j.exteriorColor||"",interiorColor:j.interiorColor||"",length:j.length||"",weight:j.weight||"",sleeps:j.sleeps||"",slideouts:j.slideouts||"",fuelType:j.fuelType||"",mileage:j.mileage||"",condition:j.condition||"New"}}));y(b)},error:g=>{v(g)}})}),exportVehiclesToCSV:()=>{const p=t.map(v=>({id:v.id,vin:v.vin,make:v.make,model:v.model,year:v.year,type:v.type,status:v.status,price:v.price,cost:v.cost,location:v.location,features:v.features.join(", "),exteriorColor:v.customFields?.exteriorColor||"",interiorColor:v.customFields?.interiorColor||"",length:v.customFields?.length||"",weight:v.customFields?.weight||"",sleeps:v.customFields?.sleeps||"",slideouts:v.customFields?.slideouts||"",fuelType:v.customFields?.fuelType||"",mileage:v.customFields?.mileage||"",condition:v.customFields?.condition||""}));return vg.unparse(p)}}}const qv=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],gie=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function $z({quote:t,customerId:e,onSave:r,onCancel:s}){const{toast:i}=Gt(),{getAvailableVehicles:a,getVehicleById:o}=df(),[l,c]=S.useState(!1),[d,u]=S.useState("items"),[h,f]=S.useState({customerId:e,validUntil:new Date(Date.now()+720*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[p,y]=S.useState(""),[v,g]=S.useState(!1),[b,j]=S.useState(""),[w,C]=S.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),E=a();S.useEffect(()=>{t&&f(B=>({...B,...t}))},[t]),S.useEffect(()=>{N()},[h.items,h.taxRate]);const N=()=>{const B=h.items.reduce(($,W)=>$+W.total,0),K=h.items.reduce(($,W)=>{const te=W.discountType==="percentage"?W.quantity*W.unitPrice*W.discount/100:W.discount*W.quantity;return $+te},0),Y=B-K,J=Y*h.taxRate,H=Y+J;f($=>({...$,subtotal:B,totalDiscount:K,tax:J,total:H}))},A=()=>{if(!w.description||!w.unitPrice){i({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const B={id:Math.random().toString(36).substr(2,9),description:w.description,quantity:w.quantity||1,unitPrice:w.unitPrice||0,discount:w.discount||0,discountType:w.discountType||"percentage",total:F(w)};f(K=>({...K,items:[...K.items,B]})),C({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),y(""),g(!1)},_=B=>{const K=o(B);if(!K)return;const Y={id:Math.random().toString(36).substr(2,9),productId:K.id,description:`${K.year} ${K.make} ${K.model}`,quantity:1,unitPrice:K.price,discount:0,discountType:"percentage",total:K.price};f(J=>({...J,items:[...J.items,Y]})),j(""),i({title:"Vehicle Added",description:`${K.year} ${K.make} ${K.model} added to quote`})},k=B=>{const K=qv.find(Y=>Y.id===B);if(K){if(K.isBundle&&K.bundleItems){const Y={id:Math.random().toString(36).substr(2,9),productId:K.id,description:K.description,quantity:1,unitPrice:K.price,discount:0,discountType:"percentage",total:K.price,isBundle:!0,bundleItems:K.bundleItems.map(J=>{const H=qv.find($=>$.id===J.productId);return{id:Math.random().toString(36).substr(2,9),productId:J.productId,description:H?.name||"",quantity:J.quantity,unitPrice:H?.price||0,discount:0,discountType:"percentage",total:(H?.price||0)*J.quantity}})};f(J=>({...J,items:[...J.items,Y]}))}else{const Y={id:Math.random().toString(36).substr(2,9),productId:K.id,description:K.name,quantity:1,unitPrice:K.price,discount:0,discountType:"percentage",total:K.price};f(J=>({...J,items:[...J.items,Y]}))}R()}},F=B=>{const K=B.quantity*B.unitPrice,Y=B.discountType==="percentage"?K*(B.discount/100):B.discount*B.quantity;return K-Y},I=(B,K)=>{f(Y=>({...Y,items:Y.items.map(J=>{if(J.id===B){const H={...J,...K};return H.total=F(H),H}return J})}))},T=B=>{f(K=>({...K,items:K.items.filter(Y=>Y.id!==B)}))},R=()=>{const B=h.items.filter(Y=>qv.find(J=>J.id===Y.productId)?.category==="accessory");B.length>=3&&B.forEach(Y=>{I(Y.id,{discount:10,discountType:"percentage"})}),h.items.filter(Y=>Y.isBundle).forEach(Y=>{I(Y.id,{discount:500,discountType:"fixed"})})},O=async()=>{c(!0);try{await new Promise(H=>setTimeout(H,2e3));const B=z(),K=new Blob([B],{type:"text/plain"}),Y=URL.createObjectURL(K),J=document.createElement("a");J.href=Y,J.download=`quote-${Date.now()}.txt`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(Y),i({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},z=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${h.customerId}
Valid Until: ${h.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${h.items.map(B=>`
${B.description}
Quantity: ${B.quantity} x ${Fe(B.unitPrice)}
${B.discount>0?`Discount: ${B.discount}${B.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${Fe(B.total)}
${B.isBundle?`
  Bundle Items:
  ${B.bundleItems?.map(K=>`  - ${K.description} (${K.quantity}x)`).join(`
  `)||""}
`:""}
`).join(`
`)}

TOTALS:
-------
Subtotal: ${Fe(h.subtotal)}
Total Discount: ${Fe(h.totalDiscount)}
Tax (${(h.taxRate*100).toFixed(1)}%): ${Fe(h.tax)}
TOTAL: ${Fe(h.total)}

Notes: ${h.notes}
Terms: ${h.terms}
    `,q=async()=>{if(h.items.length===0){i({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const B={...h,customerId:h.customerId||e};await r(B),i({title:"Success",description:"Quote saved successfully"})}catch{i({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl flex items-center",children:[n.jsx(yr,{className:"h-5 w-5 mr-2 text-blue-500"}),t?"Edit Quote":"Create Quote"]}),n.jsx(Ge,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:s,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{children:[n.jsxs(fn,{value:d,onValueChange:u,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-4",children:[n.jsx(dt,{value:"items",children:"Line Items"}),n.jsx(dt,{value:"products",children:"Products"}),n.jsx(dt,{value:"pricing",children:"Pricing Rules"}),n.jsx(dt,{value:"details",children:"Quote Details"})]}),n.jsxs(ht,{value:"items",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(nt,{value:b,onValueChange:j,children:[n.jsx(et,{className:"w-64",children:n.jsx(st,{placeholder:"Add vehicle from inventory"})}),n.jsx(tt,{children:E.map(B=>n.jsxs(he,{value:B.id,children:[B.year," ",B.make," ",B.model," - ",Fe(B.price)]},B.id))})]}),b&&n.jsxs(re,{onClick:()=>_(b),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),n.jsxs(re,{onClick:()=>g(!0),size:"sm",variant:"outline",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),v&&n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Description"}),n.jsx(Te,{value:w.description||"",onChange:B=>C(K=>({...K,description:B.target.value})),placeholder:"Item description"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Unit Price"}),n.jsx(Te,{type:"number",value:w.unitPrice||"",onChange:B=>C(K=>({...K,unitPrice:parseFloat(B.target.value)||0})),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Quantity"}),n.jsx(Te,{type:"number",value:w.quantity||1,onChange:B=>C(K=>({...K,quantity:parseInt(B.target.value)||1})),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{type:"number",value:w.discount||0,onChange:B=>C(K=>({...K,discount:parseFloat(B.target.value)||0})),placeholder:"0"}),n.jsxs(nt,{value:w.discountType,onValueChange:B=>C(K=>({...K,discountType:B})),children:[n.jsx(et,{className:"w-32",children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"percentage",children:"%"}),n.jsx(he,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(re,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),n.jsx(re,{onClick:A,children:"Add Item"})]})]})}),n.jsxs("div",{className:"space-y-4",children:[h.items.map((B,K)=>n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Description"}),n.jsx(Te,{value:B.description,onChange:Y=>I(B.id,{description:Y.target.value})}),B.isBundle&&n.jsxs(Ve,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(Ai,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Quantity"}),n.jsx(Te,{type:"number",value:B.quantity,onChange:Y=>I(B.id,{quantity:parseInt(Y.target.value)||1}),min:"1"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Unit Price"}),n.jsx(Te,{type:"number",value:B.unitPrice,onChange:Y=>I(B.id,{unitPrice:parseFloat(Y.target.value)||0}),step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Discount"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{type:"number",value:B.discount,onChange:Y=>I(B.id,{discount:parseFloat(Y.target.value)||0}),step:"0.01"}),n.jsxs(nt,{value:B.discountType,onValueChange:Y=>I(B.id,{discountType:Y}),children:[n.jsx(et,{className:"w-16",children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"percentage",children:"%"}),n.jsx(he,{value:"fixed",children:"$"})]})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),n.jsx("div",{className:"font-bold text-lg",children:Fe(B.total)})]}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>T(B.id),children:n.jsx(rs,{className:"h-4 w-4"})})]})]}),B.isBundle&&B.bundleItems&&n.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[n.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),n.jsx("div",{className:"space-y-2",children:B.bundleItems.map(Y=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[n.jsx("span",{children:Y.description}),n.jsxs("span",{children:[Y.quantity,"x ",Fe(Y.unitPrice)]})]},Y.id))})]})]})},B.id)),h.items.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No line items added yet"}),n.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),h.items.length>0&&n.jsx(me,{className:"bg-muted/30",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Fe(h.subtotal)})]}),n.jsxs("div",{className:"flex justify-between text-red-600",children:[n.jsx("span",{children:"Total Discount:"}),n.jsxs("span",{children:["-",Fe(h.totalDiscount)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(h.taxRate*100).toFixed(1),"%):"]}),n.jsx("span",{children:Fe(h.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Fe(h.total)})]})]})})})]}),n.jsx(ht,{value:"products",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:E.map(B=>n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-semibold",children:[B.year," ",B.make," ",B.model]}),n.jsx(Ve,{className:"bg-blue-50 text-blue-700 border-blue-200",children:B.type.replace("_"," ").toUpperCase()})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",B.vin]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",B.location]}),n.jsx("div",{className:"text-lg font-bold text-primary",children:Fe(B.price)}),B.features.length>0&&n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.features.slice(0,3).map((K,Y)=>n.jsx(Ve,{variant:"outline",className:"text-xs",children:K},Y)),B.features.length>3&&n.jsxs(Ve,{variant:"outline",className:"text-xs",children:["+",B.features.length-3," more"]})]})})]}),n.jsxs(re,{onClick:()=>_(B.id),size:"sm",className:"ml-4",children:[n.jsx(Dt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},B.id))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:qv.map(B=>n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:B.name}),B.isBundle&&n.jsxs(Ve,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[n.jsx(Ai,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:B.description}),n.jsx("div",{className:"text-lg font-bold text-primary",children:Fe(B.price)}),B.isBundle&&B.bundleItems&&n.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[n.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),B.bundleItems.map(K=>{const Y=qv.find(J=>J.id===K.productId);return n.jsxs("div",{className:"text-xs text-purple-600",children:["• ",Y?.name," (",K.quantity,"x)"]},K.productId)})]})]}),n.jsxs(re,{onClick:()=>k(B.id),size:"sm",className:"ml-4",children:[n.jsx(Dt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},B.id))})]})]})}),n.jsx(ht,{value:"pricing",className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),n.jsx("div",{className:"space-y-4",children:gie.filter(B=>B.isActive).map(B=>n.jsx(me,{className:"shadow-sm",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:B.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[B.type==="quantity_discount"&&`Min quantity: ${B.conditions.minQuantity}`,B.type==="bundle_discount"&&"Applied to bundle products",B.type==="customer_discount"&&`Customer type: ${B.conditions.customerType}`]}),n.jsx("div",{className:"flex items-center space-x-2 mt-2",children:n.jsxs(Ve,{className:"bg-green-50 text-green-700 border-green-200",children:[n.jsx(Aj,{className:"h-3 w-3 mr-1"}),B.discount.type==="percentage"?`${B.discount.value}%`:Fe(B.discount.value)," off"]})})]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>R(),children:[n.jsx(_m,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},B.id))})]})}),n.jsxs(ht,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"validUntil",children:"Valid Until"}),n.jsx(Te,{id:"validUntil",type:"date",value:h.validUntil.toISOString().split("T")[0],onChange:B=>f(K=>({...K,validUntil:new Date(B.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Te,{id:"taxRate",type:"number",value:(h.taxRate*100).toFixed(2),onChange:B=>f(K=>({...K,taxRate:parseFloat(B.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Notes"}),n.jsx(kr,{id:"notes",value:h.notes,onChange:B=>f(K=>({...K,notes:B.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"terms",children:"Terms & Conditions"}),n.jsx(kr,{id:"terms",value:h.terms,onChange:B=>f(K=>({...K,terms:B.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[n.jsx("div",{className:"flex space-x-2",children:n.jsxs(re,{variant:"outline",onClick:O,disabled:l||h.items.length===0,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),l?"Generating...":"Export PDF"]})}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(re,{variant:"outline",onClick:s,disabled:l,children:"Cancel"}),n.jsx(re,{onClick:q,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function vie(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState([]),[o,l]=S.useState(!1);S.useEffect(()=>{c()},[]);const c=()=>{const N=Bn("renter-insight-quotes",[]);e(N);const A=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],_=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];s(A),a(_)},d=N=>{rn("renter-insight-quotes",N)},u=async N=>{l(!0);try{const A={id:Math.random().toString(36).substr(2,9),customerId:N.customerId||"",items:N.items||[],subtotal:N.subtotal||0,totalDiscount:N.totalDiscount||0,tax:N.tax||0,taxRate:N.taxRate||.08,total:N.total||0,status:"draft",validUntil:N.validUntil||new Date(Date.now()+2592e6),notes:N.notes||"",terms:N.terms||"",createdAt:new Date,updatedAt:new Date},_=[...t,A];return e(_),d(_),A}finally{l(!1)}},h=async(N,A)=>{l(!0);try{const _=t.map(k=>k.id===N?{...k,...A,updatedAt:new Date}:k);return e(_),d(_),_.find(k=>k.id===N)}finally{l(!1)}};return{quotes:t,products:r,pricingRules:i,loading:o,createQuote:u,updateQuote:h,deleteQuote:async N=>{const A=t.filter(_=>_.id!==N);e(A),d(A)},duplicateQuote:async N=>{const A=t.find(F=>F.id===N);if(!A)return;const _={...A,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},k=[...t,_];return e(k),d(k),_},sendQuote:async N=>h(N,{status:"sent"}),acceptQuote:async N=>h(N,{status:"accepted"}),rejectQuote:async N=>h(N,{status:"rejected"}),calculateQuoteTotals:(N,A=.08)=>{const _=N.reduce((R,O)=>R+O.total,0),k=N.reduce((R,O)=>{const z=O.discountType==="percentage"?O.quantity*O.unitPrice*O.discount/100:O.discount*O.quantity;return R+z},0),F=_-k,I=F*A,T=F+I;return{subtotal:_,totalDiscount:k,tax:I,total:T}},applyPricingRules:(N,A)=>{let _=[...N];return i.forEach(k=>{if(k.isActive)switch(k.type){case"quantity_discount":if(k.conditions.minQuantity){const F=_.filter(I=>r.find(T=>T.id===I.productId)?.category==="accessory");F.length>=k.conditions.minQuantity&&(_=_.map(I=>F.includes(I)?{...I,discount:k.discount.value,discountType:k.discount.type}:I))}break;case"bundle_discount":k.conditions.productIds&&(_=_.map(F=>F.isBundle&&k.conditions.productIds?.includes(F.productId||"")?{...F,discount:k.discount.value,discountType:k.discount.type}:F));break}}),_},getQuotesByCustomer:N=>t.filter(A=>A.customerId===N),getQuotesByStatus:N=>t.filter(A=>A.status===N),getExpiredQuotes:()=>{const N=new Date;return t.filter(A=>new Date(A.validUntil)<N&&A.status!=="accepted")}}}function xie({quote:t,onClose:e,onEdit:r}){const s=i=>{switch(i){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:["Quote #",t.id]}),n.jsx(Ge,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>r(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:t.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Ve,{className:pt("ri-badge-status",s(t.status)),children:t.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:wt(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:wt(t.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:Array.isArray(t.items)&&t.items.length>0?t.items.map((i,a)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:i.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",i.quantity," × ",Fe(i.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:Fe(i.total)})})]},i.id)):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No items in this quote."})})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Fe(t.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Fe(t.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Fe(t.total)})]})]})}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function yie(){const{quotes:t,createQuote:e,updateQuote:r,deleteQuote:s,duplicateQuote:i,sendQuote:a}=vie(),{toast:o}=Gt(),[l,c]=S.useState(""),[d,u]=S.useState("all"),[h,f]=S.useState(!1),[p,y]=S.useState(null),[v,g]=S.useState(null),[b,j]=S.useState(""),[w,C]=S.useState(null);S.useEffect(()=>{!v&&w&&(y(w),j(w.customerId),f(!0),C(null))},[v,w]);const E=z=>{switch(z){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=Array.isArray(t)?t.filter(z=>{const q=z.id?.toLowerCase()?.includes(l.toLowerCase())||z.customerId?.toLowerCase()?.includes(l.toLowerCase()),B=d==="all"||z.status===d;return q&&B}):[],A=()=>{y(null),j(""),f(!0)},_=z=>{g(null),C(z)},k=z=>{g(z)},F=()=>g(null),I=async z=>{try{p?(await r(p.id,z),o({title:"Success",description:"Quote updated successfully"})):(await e(z),o({title:"Success",description:"Quote created successfully"})),f(!1),y(null)}catch(q){console.error("Error saving quote:",q),o({title:"Error",description:"Failed to save quote",variant:"destructive"})}},T=async z=>{try{await a(z),o({title:"Success",description:"Quote sent to customer"})}catch(q){console.error("Error sending quote:",q),o({title:"Error",description:"Failed to send quote",variant:"destructive"})}},R=async z=>{try{await i(z),o({title:"Success",description:"Quote duplicated successfully"})}catch(q){console.error("Error duplicating quote:",q),o({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},O=async z=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await s(z),o({title:"Success",description:"Quote deleted successfully"})}catch(q){console.error("Error deleting quote:",q),o({title:"Error",description:"Failed to delete quote",variant:"destructive"})}};return N.length,N.filter(z=>z.status==="draft").length,N.filter(z=>z.status==="sent").length,N.filter(z=>z.status==="accepted").length,N.reduce((z,q)=>z+(q.total||0),0),N.filter(z=>z.status==="accepted").reduce((z,q)=>z+(q.total||0),0),n.jsxs("div",{className:"space-y-8",children:[h&&n.jsx($z,{quote:p,customerId:b,onSave:I,onCancel:()=>{f(!1),y(null)}}),v&&n.jsx(xie,{quote:v,onClose:F,onEdit:_}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(re,{className:"shadow-sm",onClick:A,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsx("div",{className:"ri-stats-grid"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search quotes...",value:l,onChange:z=>c(z.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:"draft",children:"Draft"}),n.jsx(he,{value:"sent",children:"Sent"}),n.jsx(he,{value:"viewed",children:"Viewed"}),n.jsx(he,{value:"accepted",children:"Accepted"}),n.jsx(he,{value:"rejected",children:"Rejected"}),n.jsx(he,{value:"expired",children:"Expired"})]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"text-xl",children:["Quotes (",N.length,")"]}),n.jsx(Ge,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:Array.isArray(N)&&N.length>0?N.map(z=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",z.id]}),n.jsx(Ve,{className:pt("ri-badge-status",E(z.status)),children:z.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",z.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"})," ",n.jsx("span",{className:"ml-1 font-bold text-primary",children:Fe(z.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",wt(z.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",wt(z.validUntil)]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k(z),children:[n.jsx(Ts,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(z),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),z.status==="draft"&&n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(z.id),children:[n.jsx(Bo,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>R(z.id),children:[n.jsx(Sj,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>O(z.id),children:n.jsx(rs,{className:"h-3 w-3"})})]})]},z.id)):n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})})})]})]})}function BD(){const{leads:t,sources:e,salesReps:r,getActivitiesByLead:s,getRemindersByUser:i,getLeadScore:a}=Au(),[o,l]=S.useState(""),[c,d]=S.useState("all"),[u,h]=S.useState("all"),[f,p]=S.useState("all"),[y,v]=S.useState(null),[g,b]=S.useState(!1),j=N=>{switch(N){case Fi.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case Fi.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Fi.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case Fi.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case Fi.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case Fi.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case Fi.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},w=N=>N>=80?"text-green-600 bg-green-50":N>=60?"text-yellow-600 bg-yellow-50":N>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",C=t.filter(N=>{const A=`${N.firstName} ${N.lastName}`.toLowerCase().includes(o.toLowerCase())||N.email.toLowerCase().includes(o.toLowerCase())||N.phone.includes(o),_=c==="all"||N.status===c,k=u==="all"||N.sourceId===u,F=f==="all"||N.assignedTo===f;return A&&_&&k&&F}),E=N=>{console.log("New lead created:",N)};if(y){const N=s(y.id),A=i("current-user").filter(k=>k.leadId===y.id),_=a(y.id);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(re,{variant:"outline",onClick:()=>v(null),className:"mb-4",children:"← Back to Leads"}),n.jsxs("h1",{className:"ri-page-title",children:[y.firstName," ",y.lastName]}),n.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:pt("ri-badge-status",j(y.status)),children:y.status.replace("_"," ").toUpperCase()}),y.score&&n.jsxs(Ve,{className:pt("ri-badge-status",w(y.score)),children:["Score: ",y.score]})]})]}),n.jsxs(fn,{defaultValue:"overview",className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-6",children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"activity",children:"Activity"}),n.jsx(dt,{value:"communication",children:"Communication"}),n.jsx(dt,{value:"ai-insights",children:"AI Insights"}),n.jsx(dt,{value:"nurturing",children:"Nurturing"}),n.jsx(dt,{value:"reminders",children:"Reminders"})]}),n.jsx(ht,{value:"overview",className:"space-y-6",children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsx(Ne,{children:"Lead Information"})}),n.jsxs(pe,{children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:y.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:y.phone})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),n.jsx("p",{className:"font-medium",children:y.source})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsx("p",{className:"font-medium",children:r.find(k=>k.id===y.assignedTo)?.name||"Unassigned"})]}),Object.entries(y.customFields||{}).map(([k,F])=>n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:k.replace(/([A-Z])/g," $1").trim()}),n.jsx("p",{className:"font-medium",children:F})]},k))]}),y.notes&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:y.notes})]})]})]})}),n.jsx("div",{className:"space-y-6",children:_&&n.jsx(lie,{score:_})})]})}),n.jsx(ht,{value:"activity",children:n.jsx(cie,{leadId:y.id,activities:N})}),n.jsx(ht,{value:"communication",children:n.jsx(hie,{leadId:y.id,leadData:y})}),n.jsx(ht,{value:"ai-insights",children:n.jsx(uie,{leadId:y.id,leadData:y})}),n.jsx(ht,{value:"nurturing",children:n.jsx("div",{className:"space-y-6",children:n.jsx(FD,{})})}),n.jsx(ht,{value:"reminders",children:n.jsx(die,{leadId:y.id,reminders:A})})]})]})}return n.jsxs("div",{className:"space-y-8",children:[g&&n.jsx(rv,{onClose:()=>b(!1),onSuccess:E}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),n.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),n.jsxs(re,{className:"shadow-sm",onClick:()=>b(!0),children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),n.jsx(gs,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),n.jsx(gs,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(N=>N.status===Fi.NEW).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Qualified"}),n.jsx(ic,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(N=>N.status===Fi.QUALIFIED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),n.jsx(Qc,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Qc,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),n.jsxs(fn,{defaultValue:"leads",className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-6",children:[n.jsx(dt,{value:"leads",children:"Leads"}),n.jsx(dt,{value:"pipeline",children:"Pipeline"}),n.jsx(dt,{value:"quotes",children:"Quotes"}),n.jsx(dt,{value:"nurturing",children:"Nurturing"}),n.jsx(dt,{value:"forms",children:"Intake Forms"}),n.jsx(dt,{value:"sources",children:"Sources"})]}),n.jsxs(ht,{value:"leads",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search leads...",value:o,onChange:N=>l(N.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:Fi.NEW,children:"New"}),n.jsx(he,{value:Fi.CONTACTED,children:"Contacted"}),n.jsx(he,{value:Fi.QUALIFIED,children:"Qualified"}),n.jsx(he,{value:Fi.PROPOSAL,children:"Proposal"}),n.jsx(he,{value:Fi.NEGOTIATION,children:"Negotiation"}),n.jsx(he,{value:Fi.CLOSED_WON,children:"Closed Won"}),n.jsx(he,{value:Fi.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(nt,{value:u,onValueChange:h,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Source"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Sources"}),e.map(N=>n.jsx(he,{value:N.id,children:N.name},N.id))]})]}),n.jsxs(nt,{value:f,onValueChange:p,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Assignee"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Reps"}),r.map(N=>n.jsx(he,{value:N.id,children:N.name},N.id))]})]}),n.jsxs(re,{onClick:()=>b(!0),className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:["Leads (",C.length,")"]}),n.jsx(Ge,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),n.jsxs(re,{onClick:()=>b(!0),variant:"outline",className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:C.map(N=>n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>v(N),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:[N.firstName," ",N.lastName]}),n.jsx(Ve,{className:pt("ri-badge-status",j(N.status)),children:N.status.replace("_"," ").toUpperCase()}),N.score&&n.jsx(Ve,{className:pt("ri-badge-status",w(N.score)),children:N.score}),n.jsxs(Ve,{variant:"outline",className:"text-xs",children:[n.jsx(Qc,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Ui,{className:"h-3 w-3 mr-2 text-blue-500"}),N.email]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(q0,{className:"h-3 w-3 mr-2 text-green-500"}),N.phone]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(gs,{className:"h-3 w-3 mr-2 text-purple-500"}),r.find(A=>A.id===N.assignedTo)?.name||"Unassigned"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-2 text-orange-500"}),wt(N.createdAt)]})]}),N.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:N.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation()},children:[n.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Contact"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:A=>{A.stopPropagation(),v(N)},children:[n.jsx(Qc,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},N.id))})})]})]}),n.jsx(ht,{value:"pipeline",children:n.jsx(oie,{})}),n.jsx(ht,{value:"quotes",children:n.jsx(yie,{})}),n.jsx(ht,{value:"nurturing",children:n.jsx(FD,{})}),n.jsx(ht,{value:"forms",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Lead Intake Forms"}),n.jsx(Ge,{children:"Create and manage dynamic lead capture forms"})]}),n.jsx(pe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),n.jsx(ht,{value:"sources",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Lead Sources"}),n.jsx(Ge,{children:"Manage and track lead source performance"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:e.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:N.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",N.type," • Conversion: ",N.conversionRate,"%",N.trackingCode&&` • Code: ${N.trackingCode}`]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:N.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:N.isActive?"Active":"Inactive"}),n.jsx(re,{variant:"outline",size:"sm",children:n.jsx(Nl,{className:"h-3 w-3"})})]})]},N.id))})})]})})]})]})}function bie(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(BD,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(BD,{})})]})}const Mb={locations:["Main Lot","Overflow Lot","Service Bay","Offsite"],features:["AC","Washer/Dryer","Solar Prep","Porch","Skirting","Appliances Included"],exampleInventory:[{stockNumber:"RV-001",type:"Fifth Wheel",condition:"Used",status:"Available",location:"Main Lot",year:2022,make:"Forest River",model:"Flagstaff 832IKRL"}]};function jie({vehicles:t,onEdit:e,onDelete:r,onView:s,onStatusChange:i}){const{toast:a}=Gt(),[o,l]=S.useState(""),[c,d]=S.useState("all"),[u,h]=S.useState("all"),[f,p]=S.useState("all"),[y,v]=S.useState([]),[g,b]=S.useState("updatedAt"),[j,w]=S.useState("desc"),C=Array.from(new Set(t.map(O=>O.location))),E=O=>{switch(O){case Or.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Or.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Or.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Or.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Or.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=O=>O.replace("_"," ").toUpperCase(),_=(t.length>0?t:Mb.exampleInventory.map(O=>({id:"1",vin:"MOCK123456789",make:O.make,model:O.model,year:O.year,type:O.type,status:O.status,price:45e3,cost:35e3,location:O.location,features:["AC","Solar Prep"],images:[],customFields:{},createdAt:new Date,updatedAt:new Date}))).filter(O=>{const z=`${O.make} ${O.model}`.toLowerCase().includes(o.toLowerCase())||O.vin.toLowerCase().includes(o.toLowerCase())||O.year.toString().includes(o),q=c==="all"||O.status===c,B=u==="all"||O.type===u,K=f==="all"||O.location===f;return z&&q&&B&&K}).sort((O,z)=>{let q=O[g],B=z[g];return q instanceof Date&&B instanceof Date&&(q=q.getTime(),B=B.getTime()),typeof q=="string"&&typeof B=="string"&&(q=q.toLowerCase(),B=B.toLowerCase()),q<B?j==="asc"?-1:1:q>B?j==="asc"?1:-1:0}),k=O=>{g===O?w(j==="asc"?"desc":"asc"):(b(O),w("asc"))},F=O=>{v(O?_.map(z=>z.id):[])},I=O=>{y.includes(O)?v(y.filter(z=>z!==O)):v([...y,O])},T=()=>{const z=(y.length>0?t.filter(J=>y.includes(J.id)):_).map(J=>({id:J.id,vin:J.vin,make:J.make,model:J.model,year:J.year,type:J.type,status:J.status,price:J.price,cost:J.cost,location:J.location,features:J.features.join(", "),createdAt:J.createdAt.toISOString(),updatedAt:J.updatedAt.toISOString()})),q=vg.unparse(z),B=new Blob([q],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(B),Y=document.createElement("a");Y.href=K,Y.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),a({title:"Export Successful",description:`Exported ${z.length} vehicles to CSV`})},R=O=>{if(y.length===0){a({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}y.forEach(z=>{i(z,O)}),a({title:"Status Updated",description:`Updated ${y.length} vehicles to ${O}`})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search by make, model, VIN...",value:o,onChange:O=>l(O.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{className:"w-[130px]",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:Or.AVAILABLE,children:"Available"}),n.jsx(he,{value:Or.RESERVED,children:"Reserved"}),n.jsx(he,{value:Or.SOLD,children:"Sold"}),n.jsx(he,{value:Or.SERVICE,children:"Service"}),n.jsx(he,{value:Or.DELIVERED,children:"Delivered"})]})]}),n.jsxs(nt,{value:u,onValueChange:h,children:[n.jsx(et,{className:"w-[130px]",children:n.jsx(st,{placeholder:"Type"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Types"}),n.jsx(he,{value:ur.RV,children:"RV"}),n.jsx(he,{value:ur.MOTORHOME,children:"Motorhome"}),n.jsx(he,{value:ur.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(he,{value:ur.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(he,{value:ur.TOY_HAULER,children:"Toy Hauler"})]})]}),n.jsxs(nt,{value:f,onValueChange:p,children:[n.jsx(et,{className:"w-[130px]",children:n.jsx(st,{placeholder:"Location"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Locations"}),C.map(O=>n.jsx(he,{value:O,children:O},O))]})]})]})]}),y.length>0&&n.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[n.jsxs("div",{className:"text-sm font-medium",children:[y.length," vehicles selected"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(nt,{onValueChange:O=>R(O),children:[n.jsx(et,{className:"w-[150px]",children:n.jsx(st,{placeholder:"Change Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:Or.AVAILABLE,children:"Available"}),n.jsx(he,{value:Or.RESERVED,children:"Reserved"}),n.jsx(he,{value:Or.SOLD,children:"Sold"}),n.jsx(he,{value:Or.SERVICE,children:"Service"}),n.jsx(he,{value:Or.DELIVERED,children:"Delivered"}),n.jsx(he,{value:ur.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(he,{value:ur.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(he,{value:ur.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(he,{value:ur.PARK_MODEL,children:"Park Model"}),n.jsx(he,{value:ur.MODULAR_HOME,children:"Modular Home"})]})]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:T,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>v([]),children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:["Inventory (",_.length,")"]}),n.jsx(Ge,{children:"Manage your RV and motorhome inventory"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:T,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),n.jsx(pe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"p-2 text-left",children:n.jsx(tr,{checked:y.length===_.length&&_.length>0,onCheckedChange:F})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("make"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Make/Model"}),g==="make"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("year"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Year"}),g==="year"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("vin"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"VIN"}),g==="vin"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("type"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Type"}),g==="type"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("status"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Status"}),g==="status"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("location"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Location"}),g==="location"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>k("price"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Price"}),g==="price"&&n.jsx("span",{className:"ml-1",children:j==="asc"?"↑":"↓"})]})}),n.jsx("th",{className:"p-2 text-left",children:"Media"}),n.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),n.jsxs("tbody",{children:[_.map(O=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(tr,{checked:y.includes(O.id),onCheckedChange:()=>I(O.id)})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"font-medium",children:[O.make," ",O.model]})}),n.jsx("td",{className:"p-2",children:O.year}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"font-mono text-xs",children:O.vin})}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:"text-sm",children:N(O.type)})}),n.jsx("td",{className:"p-2",children:n.jsx(Ve,{className:pt("ri-badge-status",E(O.status)),children:O.status.toUpperCase()})}),n.jsx("td",{className:"p-2",children:O.location}),n.jsx("td",{className:"p-2 font-medium text-primary",children:Fe(O.price)}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsxs(Ve,{variant:"outline",className:"text-xs",children:[n.jsx(mg,{className:"h-3 w-3 mr-1"}),O.images.length]}),O.customFields.videos&&n.jsxs(Ve,{variant:"outline",className:"text-xs",children:[n.jsx(XC,{className:"h-3 w-3 mr-1"}),O.customFields.videos.length||0]})]})}),n.jsx("td",{className:"p-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>s(O),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e(O),children:n.jsx(Nn,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>r(O.id),children:n.jsx(rs,{className:"h-4 w-4"})})]})})]},O.id)),_.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[n.jsx(Ai,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No vehicles found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}function wie({vehicle:t,onSave:e,onCancel:r}){const{toast:s}=Gt(),[i,a]=S.useState(!1),[o,l]=S.useState({vin:t?.vin||"",make:t?.make||"",model:t?.model||"",year:t?.year||new Date().getFullYear(),type:t?.type||ur.RV,status:t?.status||Or.AVAILABLE,price:t?.price||0,cost:t?.cost||0,location:t?.location||Mb.locations[0],features:t?.features||[],images:t?.images||[],customFields:t?.customFields||{}}),c=async u=>{if(u.preventDefault(),!o.vin||!o.make||!o.model){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}a(!0);try{await e(o),s({title:"Success",description:`Vehicle ${t?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${t?"update":"create"} vehicle`,variant:"destructive"})}finally{a(!1)}},d=u=>{const h=o.features||[],f=h.includes(u)?h.filter(p=>p!==u):[...h,u];l({...o,features:f})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Vehicle":"Add New Vehicle"}),n.jsx(Ge,{children:t?"Update vehicle information":"Enter vehicle details"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:c,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vin",children:"VIN *"}),n.jsx(Te,{id:"vin",value:o.vin,onChange:u=>l({...o,vin:u.target.value}),placeholder:"Enter VIN number",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"year",children:"Year *"}),n.jsx(Te,{id:"year",type:"number",value:o.year,onChange:u=>l({...o,year:parseInt(u.target.value)}),min:"1900",max:new Date().getFullYear()+1,required:!0})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"make",children:"Make *"}),n.jsx(Te,{id:"make",value:o.make,onChange:u=>l({...o,make:u.target.value}),placeholder:"Enter make",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"model",children:"Model *"}),n.jsx(Te,{id:"model",value:o.model,onChange:u=>l({...o,model:u.target.value}),placeholder:"Enter model",required:!0})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"type",children:"Type"}),n.jsxs(nt,{value:o.type,onValueChange:u=>l({...o,type:u}),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select type"})}),n.jsx(tt,{children:Object.values(ur).map(u=>n.jsx(he,{value:u,children:u.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())},u))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:o.status,onValueChange:u=>l({...o,status:u}),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select status"})}),n.jsx(tt,{children:Object.values(Or).map(u=>n.jsx(he,{value:u,children:u.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())},u))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"price",children:"Sale Price"}),n.jsx(Te,{id:"price",type:"number",value:o.price,onChange:u=>l({...o,price:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"cost",children:"Cost"}),n.jsx(Te,{id:"cost",type:"number",value:o.cost,onChange:u=>l({...o,cost:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"location",children:"Location"}),n.jsxs(nt,{value:o.location,onValueChange:u=>l({...o,location:u}),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select location"})}),n.jsx(tt,{children:Mb.locations.map(u=>n.jsx(he,{value:u,children:u},u))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),n.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Mb.features.map(u=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:u,checked:o.features?.includes(u)||!1,onCheckedChange:()=>d(u)}),n.jsx(ue,{htmlFor:u,className:"font-normal",children:u})]},u))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),n.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx(hd,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Drop images here or click to browse"}),n.jsxs(re,{type:"button",variant:"outline",children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Choose Images"]})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Vehicle"]})})]})]})})]})})}function Nie({vehicle:t,onClose:e,onEdit:r}){const s=a=>{switch(a){case Or.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Or.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Or.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Or.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Or.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=a=>a.replace("_"," ").toUpperCase();return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:[t.year," ",t.make," ",t.model]}),n.jsxs(Ge,{children:["VIN: ",t.vin]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>{e(),r(t)},size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",s(t.status)),children:t.status.toUpperCase()}),n.jsx(Ve,{variant:"outline",children:i(t.type)}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:Fe(t.price)})]}),n.jsxs(fn,{defaultValue:"details",className:"space-y-4",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"details",children:"Details"}),n.jsx(dt,{value:"images",children:"Images"}),n.jsx(dt,{value:"features",children:"Features"}),n.jsx(dt,{value:"videos",children:"Videos"}),n.jsx(dt,{value:"notes",children:"Notes"})]}),n.jsxs(ht,{value:"details",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),n.jsx("p",{className:"font-medium",children:t.make})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),n.jsx("p",{className:"font-medium",children:t.model})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),n.jsx("p",{className:"font-medium",children:t.year})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),n.jsx("p",{className:"font-medium font-mono",children:t.vin})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:i(t.type)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),n.jsx("p",{className:"font-medium",children:t.location})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),n.jsx("p",{className:"font-medium text-primary",children:Fe(t.price)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Cost"}),n.jsx("p",{className:"font-medium",children:Fe(t.cost)})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Specifications"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.customFields?.exteriorColor&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Color"}),n.jsx("p",{className:"font-medium",children:t.customFields.exteriorColor})]}),t.customFields?.interiorColor&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Interior Color"}),n.jsx("p",{className:"font-medium",children:t.customFields.interiorColor})]}),t.customFields?.length&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Length"}),n.jsxs("p",{className:"font-medium",children:[t.customFields.length," ft"]})]}),t.customFields?.weight&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),n.jsxs("p",{className:"font-medium",children:[t.customFields.weight," lbs"]})]}),t.customFields?.sleeps&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sleeps"}),n.jsx("p",{className:"font-medium",children:t.customFields.sleeps})]}),t.customFields?.slideouts&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slideouts"}),n.jsx("p",{className:"font-medium",children:t.customFields.slideouts})]}),t.customFields?.fuelType&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Type"}),n.jsx("p",{className:"font-medium",children:t.customFields.fuelType})]}),t.customFields?.mileage&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),n.jsx("p",{className:"font-medium",children:t.customFields.mileage})]}),t.customFields?.condition&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),n.jsx("p",{className:"font-medium",children:t.customFields.condition})]}),(t.type===ur.SINGLE_WIDE||t.type===ur.DOUBLE_WIDE||t.type===ur.TRIPLE_WIDE||t.type===ur.PARK_MODEL||t.type===ur.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[t.customFields?.squareFootage&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[t.customFields.squareFootage," sq ft"]})]}),t.customFields?.bedrooms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:t.customFields.bedrooms})]}),t.customFields?.bathrooms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:t.customFields.bathrooms})]}),t.customFields?.constructionType&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:t.customFields.constructionType})]}),t.customFields?.exteriorSiding&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:t.customFields.exteriorSiding})]}),t.customFields?.roofType&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:t.customFields.roofType})]})]}),(t.type===ur.SINGLE_WIDE||t.type===ur.DOUBLE_WIDE||t.type===ur.TRIPLE_WIDE||t.type===ur.PARK_MODEL||t.type===ur.MODULAR_HOME)&&n.jsxs(n.Fragment,{children:[t.customFields?.squareFootage&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),n.jsxs("p",{className:"font-medium",children:[t.customFields.squareFootage," sq ft"]})]}),t.customFields?.bedrooms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),n.jsx("p",{className:"font-medium",children:t.customFields.bedrooms})]}),t.customFields?.bathrooms&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),n.jsx("p",{className:"font-medium",children:t.customFields.bathrooms})]}),t.customFields?.constructionType&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),n.jsx("p",{className:"font-medium",children:t.customFields.constructionType})]}),t.customFields?.exteriorSiding&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),n.jsx("p",{className:"font-medium",children:t.customFields.exteriorSiding})]}),t.customFields?.roofType&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),n.jsx("p",{className:"font-medium",children:t.customFields.roofType})]})]})]})]})]}),n.jsx(ht,{value:"images",children:t.images&&t.images.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.images.map((a,o)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:a,alt:`${t.make} ${t.model} ${o+1}`,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})},o))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(mg,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No images available"})]})}),n.jsx(ht,{value:"features",children:t.features&&t.features.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.features.map((a,o)=>n.jsxs("div",{className:"flex items-center p-2 bg-muted/30 rounded-md",children:[n.jsx(Ai,{className:"h-4 w-4 mr-2 text-primary"}),n.jsx("span",{children:a})]},o))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ai,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No features listed"})]})}),n.jsx(ht,{value:"videos",children:t.customFields?.videos&&t.customFields.videos.length>0?n.jsx("div",{className:"space-y-4",children:t.customFields.videos.map((a,o)=>n.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(XC,{className:"h-4 w-4 mr-2 text-primary"}),n.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Video ",o+1]})]})},o))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(XC,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No videos available"})]})}),n.jsx(ht,{value:"notes",children:t.customFields?.notes?n.jsx("div",{className:"p-4 bg-muted/30 rounded-md whitespace-pre-wrap",children:t.customFields.notes}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No notes available"})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{variant:"outline",onClick:e,children:"Close"}),n.jsxs(re,{onClick:()=>r(t),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]})]})]})]})})}function Sie({onImport:t,onCancel:e}){const{toast:r}=Gt(),[s,i]=S.useState(null),[a,o]=S.useState([]),[l,c]=S.useState({}),[d,u]=S.useState(!1),[h,f]=S.useState("upload"),[p,y]=S.useState([]),v=["vin","make","model","year","price","cost"],g=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"}],b=k=>{const F=k.target.files?.[0];F&&(i(F),vg.parse(F,{header:!0,skipEmptyLines:!0,complete:I=>{o(I.data),I.meta.fields&&I.meta.fields,f("map")},error:I=>{r({title:"Error Parsing CSV",description:I.message,variant:"destructive"})}}))},j=(k,F)=>{c(I=>({...I,[k]:F}))},w=()=>{if(v.filter(F=>Object.values(l).includes(F)).length<v.length){r({title:"Missing Required Fields",description:`Please map all required fields: ${v.join(", ")}`,variant:"destructive"});return}f("preview"),y(a.map((F,I)=>I))},C=k=>{y(k?a.map((F,I)=>I):[])},E=k=>{p.includes(k)?y(p.filter(F=>F!==k)):y([...p,k])},N=async()=>{if(p.length===0){r({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}u(!0);try{const k=p.map(F=>{const I=a[F],T={images:[],features:[],customFields:{}};return Object.entries(l).forEach(([R,O])=>{const z=I[R];O==="features"?T.features=z?z.split(",").map(q=>q.trim()):[]:O==="year"||O==="price"||O==="cost"?T[O]=parseFloat(z)||0:O==="type"?T.type=A(z):O==="status"?T.status=_(z):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(O)?T.customFields={...T.customFields,[O]:z}:T[O]=z}),T});await t(k),r({title:"Import Successful",description:`Imported ${k.length} vehicles`})}catch{r({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{u(!1)}},A=k=>{const F=k.toLowerCase().replace(/[^a-z0-9]/g,"");return F.includes("motorhome")?ur.MOTORHOME:F.includes("travel")&&F.includes("trailer")?ur.TRAVEL_TRAILER:F.includes("fifth")&&F.includes("wheel")?ur.FIFTH_WHEEL:F.includes("toy")&&F.includes("hauler")?ur.TOY_HAULER:ur.RV},_=k=>{const F=k.toLowerCase().replace(/[^a-z0-9]/g,"");return F.includes("reserved")?Or.RESERVED:F.includes("sold")?Or.SOLD:F.includes("service")?Or.SERVICE:F.includes("delivered")?Or.DELIVERED:Or.AVAILABLE};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Import Inventory from CSV"}),n.jsxs(Ge,{children:[h==="upload"&&"Upload a CSV file with your inventory data",h==="map"&&"Map CSV columns to vehicle fields",h==="preview"&&"Preview and select vehicles to import"]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{children:[h==="upload"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),n.jsx(Te,{type:"file",accept:".csv",onChange:b,className:"max-w-sm mx-auto"})]}),n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),n.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[n.jsx("li",{children:"• File should be in CSV format"}),n.jsx("li",{children:"• First row should contain column headers"}),n.jsx("li",{children:"• Required fields: VIN, Make, Model, Year, Price, Cost"}),n.jsx("li",{children:"• Features should be comma-separated within quotes"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{variant:"outline",onClick:e,children:"Cancel"})})]}),h==="map"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[n.jsx(yr,{className:"h-4 w-4 mr-2"}),s?.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," rows found"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:s&&a.length>0&&Object.keys(a[0]).map(k=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-1/3 font-medium truncate",children:k}),n.jsx("div",{className:"w-2/3",children:n.jsxs("select",{value:l[k]||"",onChange:F=>j(k,F.target.value),className:"w-full p-2 border rounded-md",children:[n.jsx("option",{value:"",children:"-- Skip this field --"}),g.map(F=>n.jsxs("option",{value:F.key,children:[F.label," ",v.includes(F.key)?"*":""]},F.key))]})})]},k))})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),n.jsx(re,{onClick:w,children:"Preview Data"})]})]}),h==="preview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{checked:p.length===a.length,onCheckedChange:C}),n.jsxs(ue,{children:["Select All (",a.length," vehicles)"]})]}),n.jsxs(Ve,{children:[p.length," selected"]})]}),n.jsx("div",{className:"border rounded-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-2 text-left"}),Object.entries(l).filter(([k,F])=>F).map(([k,F])=>n.jsxs("th",{className:"p-2 text-left text-sm",children:[F,v.includes(F)&&n.jsx("span",{className:"text-red-500",children:"*"})]},k))]})}),n.jsx("tbody",{children:a.map((k,F)=>n.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:n.jsx(tr,{checked:p.includes(F),onCheckedChange:()=>E(F)})}),Object.entries(l).filter(([I,T])=>T).map(([I,T])=>n.jsx("td",{className:"p-2 text-sm",children:k[I]||n.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},I))]},F))})]})})}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(re,{variant:"outline",onClick:()=>f("map"),children:"Back to Mapping"}),n.jsx(re,{onClick:N,disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Import ",p.length," Vehicles"]})})]})]})]})]})})}function Aie({onScan:t,onClose:e}){const{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState(null),l=["MOCK123456789","TEST987654321","DEMO555666777"];S.useEffect(()=>{const h=setTimeout(()=>{i(!0)},1e3);return()=>clearTimeout(h)},[]);const c=()=>{const h="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let f="";for(let p=0;p<17;p++)f+=h.charAt(Math.floor(Math.random()*h.length));o(f),r({title:"Barcode Scanned",description:`VIN: ${f}`})},d=()=>{a&&t(a)},u=()=>{const h=l[Math.floor(Math.random()*l.length)];t(h),r({title:"Mock Scan Complete",description:`Scanned VIN: ${h}`})};return n.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Scan VIN Barcode"}),n.jsx(Ge,{children:"Position the barcode in front of your camera"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),n.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2"}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(re,{onClick:u,className:"mb-4 bg-white/20 hover:bg-white/30 text-white border-white/30",children:"Simulate Scan"}),n.jsx(td,{className:"h-12 w-12 text-white/50"})]})]}):n.jsx(n.Fragment,{children:n.jsx(td,{className:"h-12 w-12 text-white/50"})})}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(re,{variant:"outline",onClick:e,children:"Cancel"}),a?n.jsxs(re,{onClick:d,children:[n.jsx(Nj,{className:"h-4 w-4 mr-2"}),"Confirm"]}):n.jsx(re,{onClick:c,children:"Simulate Scan"})]})]}),n.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Test VINs"}),n.jsx("div",{className:"space-y-1",children:l.map((h,f)=>n.jsx("button",{onClick:()=>{t(h)},className:"block text-sm text-yellow-700 hover:text-yellow-900 font-mono",children:h},f))})]})]})})}function zD(){const{vehicles:t,createVehicle:e,updateVehicleStatus:r,deleteVehicle:s}=df(),{toast:i}=Gt(),[a,o]=S.useState(!1),[l,c]=S.useState(!1),[d,u]=S.useState(!1),[h,f]=S.useState(!1),[p,y]=S.useState(null),v=()=>{y(null),o(!0)},g=A=>{y(A),o(!0)},b=A=>{y(A),c(!0)},j=async A=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await s(A),i({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{i({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},w=async(A,_)=>{try{await r(A,_),i({title:"Status Updated",description:`Vehicle status changed to ${_}`})}catch{i({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},C=async A=>{try{p?(await r(p.id,A.status||p.status),i({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await e(A),i({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),y(null)}catch{i({title:"Error",description:`Failed to ${p?"update":"create"} vehicle`,variant:"destructive"})}},E=async A=>{try{for(const _ of A)await e(_);u(!1),i({title:"Import Successful",description:`Imported ${A.length} vehicles`})}catch{i({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},N=A=>{const _=t.find(k=>k.vin===A);_?(y(_),c(!0),i({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${A}`})):(y(null),o(!0),setTimeout(()=>{const k=document.getElementById("vin");if(k){k.value=A;const F=new Event("input",{bubbles:!0});k.dispatchEvent(F)}},100),i({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${A}`})),f(!1)};return n.jsxs("div",{className:"space-y-8",children:[a&&n.jsx(wie,{vehicle:p||void 0,onSave:C,onCancel:()=>{o(!1),y(null)}}),l&&p&&n.jsx(Nie,{vehicle:p,onClose:()=>c(!1),onEdit:g}),d&&n.jsx(Sie,{onImport:E,onCancel:()=>u(!1)}),h&&n.jsx(Aie,{onScan:N,onClose:()=>f(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),n.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>f(!0),children:[n.jsx($Z,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),n.jsxs(re,{variant:"outline",onClick:()=>u(!0),children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),n.jsxs(re,{onClick:v,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),n.jsx(Ai,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Available"}),n.jsx(Ai,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(A=>A.status===Or.AVAILABLE).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),n.jsx(Ai,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(A=>A.status===Or.RESERVED).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),n.jsx(rr,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Fe(t.reduce((A,_)=>A+_.price,0))}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),n.jsx(jie,{vehicles:t,onEdit:g,onDelete:j,onView:b,onStatusChange:w})]})}function Cie(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(zD,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(zD,{})})]})}const Eie=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:gl.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:gl.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function Pie({quote:t,onClose:e,onEdit:r}){const s=i=>{switch(i){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:["Quote #",t.id]}),n.jsx(Ge,{children:"Quote details and line items"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>r(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),n.jsx("p",{className:"font-medium",children:t.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),n.jsx("div",{className:"mt-1",children:n.jsx(Ve,{className:pt("ri-badge-status",s(t.status)),children:t.status.toUpperCase()})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:wt(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),n.jsx("p",{className:"font-medium",children:wt(t.validUntil)})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),n.jsx("div",{className:"space-y-3",children:t.items.map((i,a)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:i.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",i.quantity," × ",Fe(i.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:Fe(i.total)})})]},i.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Fe(t.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Fe(t.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Fe(t.total)})]})]})}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function qD(){const{toast:t}=Gt(),[e,r]=S.useState(Eie),[s,i]=S.useState(""),[a,o]=S.useState("all"),[l,c]=S.useState(!1),[d,u]=S.useState(null),[h,f]=S.useState(null),[p,y]=S.useState(""),v=F=>{switch(F){case gl.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case gl.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case gl.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gl.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case gl.REJECTED:return"bg-red-50 text-red-700 border-red-200";case gl.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=e.filter(F=>{const I=F.id.toLowerCase().includes(s.toLowerCase())||F.customerId.toLowerCase().includes(s.toLowerCase()),T=a==="all"||F.status===a;return I&&T}),b=()=>{u(null),y(""),c(!0)},j=F=>{u(F),y(F.customerId),c(!0)},w=F=>{f(F)},C=()=>f(null),E=async F=>{try{if(d)r(I=>I.map(T=>T.id===d.id?{...T,...F,updatedAt:new Date}:T)),t({title:"Success",description:"Quote updated successfully"});else{const I={id:Math.random().toString(36).substr(2,9),...F,status:gl.DRAFT,createdAt:new Date,updatedAt:new Date};r(T=>[...T,I]),t({title:"Success",description:"Quote created successfully"})}c(!1),u(null)}catch{t({title:"Error",description:"Failed to save quote",variant:"destructive"})}},N=async F=>{try{r(I=>I.map(T=>T.id===F?{...T,status:gl.SENT,updatedAt:new Date}:T)),t({title:"Success",description:"Quote sent to customer"})}catch{t({title:"Error",description:"Failed to send quote",variant:"destructive"})}},A=async F=>{try{const I=e.find(T=>T.id===F);if(I){const T={...I,id:Math.random().toString(36).substr(2,9),status:gl.DRAFT,createdAt:new Date,updatedAt:new Date};r(R=>[...R,T]),t({title:"Success",description:"Quote duplicated successfully"})}}catch{t({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},_=async F=>{if(window.confirm("Are you sure you want to delete this quote?"))try{r(I=>I.filter(T=>T.id!==F)),t({title:"Success",description:"Quote deleted successfully"})}catch{t({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},k={total:e.length,draft:e.filter(F=>F.status==="draft").length,sent:e.filter(F=>F.status==="sent").length,accepted:e.filter(F=>F.status==="accepted").length,totalValue:e.reduce((F,I)=>F+I.total,0),acceptedValue:e.filter(F=>F.status==="accepted").reduce((F,I)=>F+I.total,0)};return n.jsxs("div",{className:"space-y-8",children:[l&&n.jsx($z,{quote:d,customerId:p,onSave:E,onCancel:()=>{c(!1),u(null)}}),h&&n.jsx(Pie,{quote:h,onClose:C,onEdit:j}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),n.jsxs(re,{className:"shadow-sm",onClick:b,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),n.jsx(yr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:k.total}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(yr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:k.sent}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Accepted"}),n.jsx(yr,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:k.accepted}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),k.total>0?Math.round(k.accepted/k.total*100):0,"% acceptance rate"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),n.jsx(rr,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Fe(k.totalValue)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(rr,{className:"h-3 w-3 mr-1"}),Fe(k.acceptedValue)," accepted"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search quotes...",value:s,onChange:F=>i(F.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:a,onValueChange:o,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:"draft",children:"Draft"}),n.jsx(he,{value:"sent",children:"Sent"}),n.jsx(he,{value:"viewed",children:"Viewed"}),n.jsx(he,{value:"accepted",children:"Accepted"}),n.jsx(he,{value:"rejected",children:"Rejected"}),n.jsx(he,{value:"expired",children:"Expired"})]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"text-xl",children:["Quotes (",g.length,")"]}),n.jsx(Ge,{children:"Manage customer quotes with advanced pricing and bundling"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[g.map(F=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",F.id]}),n.jsx(Ve,{className:pt("ri-badge-status",v(F.status)),children:F.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",F.customerId]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"font-bold text-primary ml-1",children:Fe(F.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Created:"})," ",wt(F.createdAt)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",wt(F.validUntil)]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[F.items.length," item(s)"]}),F.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",F.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>w(F),children:[n.jsx(Ts,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>j(F),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),F.status==="draft"&&n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(F.id),children:[n.jsx(Bo,{className:"h-3 w-3 mr-1"}),"Send"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(F.id),children:[n.jsx(Sj,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>_(F.id),children:n.jsx(rs,{className:"h-3 w-3"})})]})]},F.id)),g.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No quotes found"}),n.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function Tie(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(qD,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(qD,{})})]})}const _ie=[{id:"loan-001",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:Oo.CURRENT,remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,history:[{id:"hist-001",timestamp:"2024-01-15T08:30:00Z",type:su.PAYMENT,amount:895.5,principalAmount:645.3,interestAmount:250.2,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",status:"completed"},{id:"hist-002",timestamp:"2023-12-15T08:30:00Z",type:su.PAYMENT,amount:895.5,principalAmount:641.85,interestAmount:253.65,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",status:"completed"},{id:"hist-003",timestamp:"2023-06-15T10:00:00Z",type:su.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"Your RV loan is current and in good standing. Automatic payments are set up for the 15th of each month.",createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:Oo.CURRENT,remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,history:[{id:"hist-004",timestamp:"2024-01-01T08:30:00Z",type:su.PAYMENT,amount:1025.75,principalAmount:692.4,interestAmount:333.35,description:"Monthly payment processed",paymentMethod:"Check",transactionId:"CHK-20240101-002",status:"completed"},{id:"hist-005",timestamp:"2023-03-01T10:00:00Z",type:su.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"This is your second RV loan with us. Thank you for your continued business!",createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"},{id:"loan-003",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-003",vehicleInfo:"2021 Grand Design Solitude 310GK",loanAmount:55e3,downPayment:7e3,interestRate:7,termMonths:60,monthlyPayment:1089.25,startDate:"2023-08-01T00:00:00Z",status:Oo.CURRENT,remainingBalance:47500,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:6535.5,paymentsRemaining:54,history:[{id:"hist-006",timestamp:"2024-01-01T08:30:00Z",type:su.PAYMENT,amount:1089.25,principalAmount:767.5,interestAmount:321.75,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240101-003",status:"completed"}],isPortalVisible:!1,createdAt:"2023-07-25T09:00:00Z",updatedAt:"2024-01-01T08:30:00Z"}];function Bz(){const[t,e]=S.useState([]);S.useEffect(()=>{const u=Bn("loans",_ie);e(u)},[]),S.useEffect(()=>{rn("loans",t)},[t]);const r=u=>{const h={id:`loan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:u.customerId||"",customerName:u.customerName||"",customerEmail:u.customerEmail||"",customerPhone:u.customerPhone||"",vehicleId:u.vehicleId||"",vehicleInfo:u.vehicleInfo||"",loanAmount:u.loanAmount||0,downPayment:u.downPayment||0,interestRate:u.interestRate||0,termMonths:u.termMonths||60,monthlyPayment:u.monthlyPayment||0,startDate:u.startDate||new Date().toISOString(),status:u.status||Oo.ACTIVE,remainingBalance:u.remainingBalance||u.loanAmount||0,nextPaymentDate:u.nextPaymentDate||new Date().toISOString(),totalPaid:u.totalPaid||0,paymentsRemaining:u.paymentsRemaining||u.termMonths||60,history:u.history||[],isPortalVisible:u.isPortalVisible||!1,portalNotes:u.portalNotes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e(f=>[h,...f]),h},s=(u,h)=>{e(f=>f.map(p=>p.id===u?{...p,...h,updatedAt:new Date().toISOString()}:p))},i=u=>{e(h=>h.filter(f=>f.id!==u))},a=u=>t.find(h=>h.id===u),o=u=>t.filter(h=>h.customerId===u),l=u=>t.filter(h=>h.customerId===u&&h.isPortalVisible),c=(u,h)=>{const f=a(u);if(!f)return;const p={id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),...h};s(u,{history:[p,...f.history]})};return{loans:t,createLoan:r,updateLoan:s,deleteLoan:i,getLoanById:a,getLoansByCustomer:o,getPortalLoansByCustomer:l,addLoanHistoryEntry:c,makePayment:(u,h,f="Online")=>{const p=a(u);if(!p)return;const y=p.remainingBalance*(p.interestRate/100)/12,v=Math.max(0,h-y),g=Math.min(h,y),b=Math.max(0,p.remainingBalance-v),j=p.totalPaid+h,w=Math.max(0,p.paymentsRemaining-1);c(u,{type:su.PAYMENT,amount:h,principalAmount:v,interestAmount:g,description:`Payment processed via ${f}`,paymentMethod:f,transactionId:`TXN-${Date.now()}`,status:"completed"}),s(u,{remainingBalance:b,totalPaid:j,paymentsRemaining:w,status:b===0?Oo.PAID_OFF:p.status,nextPaymentDate:b>0?new Date(Date.now()+720*60*60*1e3).toISOString():p.nextPaymentDate}),b===0&&c(u,{type:su.PAYOFF,description:"Loan paid in full",status:"paid_off"})}}}function Iie({loan:t,onClose:e,onSuccess:r}){const{createLoan:s,updateLoan:i}=Bz(),{toast:a}=Gt(),[o,l]=S.useState(!1),[c,d]=S.useState({customerId:t?.customerId||"",customerName:t?.customerName||"",customerEmail:t?.customerEmail||"",customerPhone:t?.customerPhone||"",vehicleId:t?.vehicleId||"",vehicleInfo:t?.vehicleInfo||"",loanAmount:t?.loanAmount||0,downPayment:t?.downPayment||0,interestRate:t?.interestRate||7.25,termMonths:t?.termMonths||60,startDate:t?.startDate?t.startDate.split("T")[0]:new Date().toISOString().split("T")[0],status:t?.status||Oo.ACTIVE,isPortalVisible:t?.isPortalVisible||!1,portalNotes:t?.portalNotes||""}),h=(()=>{const p=c.loanAmount-c.downPayment,y=c.interestRate/100/12,v=c.termMonths;return y===0?p/v:p*(y*Math.pow(1+y,v))/(Math.pow(1+y,v)-1)})(),f=async p=>{p.preventDefault(),l(!0);try{const y={...c,monthlyPayment:h,remainingBalance:c.loanAmount-c.downPayment,nextPaymentDate:new Date(Date.now()+2592e6).toISOString(),totalPaid:0,paymentsRemaining:c.termMonths,history:[]};let v;t?(i(t.id,y),v={...t,...y}):v=s(y),a({title:t?"Loan Updated":"Loan Created",description:`Loan has been ${t?"updated":"created"} successfully.`}),r?.(v),e()}catch{a({title:"Error",description:`Failed to ${t?"update":"create"} loan.`,variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(rr,{className:"h-5 w-5 mr-2"}),t?"Edit Loan":"Create New Loan"]}),n.jsx(Ge,{children:t?"Update loan details and settings":"Enter loan information and configure portal visibility"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:f,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer ID"}),n.jsx(Te,{id:"customerId",value:c.customerId,onChange:p=>d({...c,customerId:p.target.value}),placeholder:"Enter customer ID",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerName",children:"Customer Name"}),n.jsx(Te,{id:"customerName",value:c.customerName,onChange:p=>d({...c,customerName:p.target.value}),placeholder:"Enter customer name",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerEmail",children:"Email"}),n.jsx(Te,{id:"customerEmail",type:"email",value:c.customerEmail,onChange:p=>d({...c,customerEmail:p.target.value}),placeholder:"Enter email address"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerPhone",children:"Phone"}),n.jsx(Te,{id:"customerPhone",type:"tel",value:c.customerPhone,onChange:p=>d({...c,customerPhone:p.target.value}),placeholder:"Enter phone number"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicleId",children:"Vehicle ID"}),n.jsx(Te,{id:"vehicleId",value:c.vehicleId,onChange:p=>d({...c,vehicleId:p.target.value}),placeholder:"Enter vehicle ID"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicleInfo",children:"Vehicle Description"}),n.jsx(Te,{id:"vehicleInfo",value:c.vehicleInfo,onChange:p=>d({...c,vehicleInfo:p.target.value}),placeholder:"e.g., 2023 Forest River Cherokee 274RK"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"loanAmount",children:"Loan Amount"}),n.jsx(Te,{id:"loanAmount",type:"number",step:"0.01",value:c.loanAmount,onChange:p=>d({...c,loanAmount:parseFloat(p.target.value)||0}),placeholder:"0.00",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"downPayment",children:"Down Payment"}),n.jsx(Te,{id:"downPayment",type:"number",step:"0.01",value:c.downPayment,onChange:p=>d({...c,downPayment:parseFloat(p.target.value)||0}),placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"interestRate",children:"Interest Rate (%)"}),n.jsx(Te,{id:"interestRate",type:"number",step:"0.01",value:c.interestRate,onChange:p=>d({...c,interestRate:parseFloat(p.target.value)||0}),placeholder:"7.25",required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"termMonths",children:"Term (Months)"}),n.jsxs(nt,{value:c.termMonths.toString(),onValueChange:p=>d({...c,termMonths:parseInt(p)}),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"12",children:"12 months"}),n.jsx(he,{value:"24",children:"24 months"}),n.jsx(he,{value:"36",children:"36 months"}),n.jsx(he,{value:"48",children:"48 months"}),n.jsx(he,{value:"60",children:"60 months"}),n.jsx(he,{value:"72",children:"72 months"}),n.jsx(he,{value:"84",children:"84 months"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"startDate",children:"Start Date"}),n.jsx(Te,{id:"startDate",type:"date",value:c.startDate,onChange:p=>d({...c,startDate:p.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:c.status,onValueChange:p=>d({...c,status:p}),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:Oo.ACTIVE,children:"Active"}),n.jsx(he,{value:Oo.CURRENT,children:"Current"}),n.jsx(he,{value:Oo.LATE,children:"Late"}),n.jsx(he,{value:Oo.DEFAULT,children:"Default"}),n.jsx(he,{value:Oo.PAID_OFF,children:"Paid Off"}),n.jsx(he,{value:Oo.CANCELLED,children:"Cancelled"})]})]})]})]}),n.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:"Calculated Monthly Payment:"}),n.jsx("span",{className:"text-lg font-bold text-primary",children:Fe(h)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Portal Settings"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"isPortalVisible",checked:c.isPortalVisible,onCheckedChange:p=>d({...c,isPortalVisible:!!p,portalNotes:p?c.portalNotes:""})}),n.jsx(ue,{htmlFor:"isPortalVisible",className:"font-medium",children:"Make this loan visible in customer portal"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, customers can view this loan, payment history, and make payments through the portal."}),c.isPortalVisible&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"portalNotes",children:"Portal Notes (Optional)"}),n.jsx(kr,{id:"portalNotes",value:c.portalNotes,onChange:p=>d({...c,portalNotes:p.target.value}),placeholder:"Add any notes or messages that will be visible to the customer in the portal...",rows:3}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"These notes will be displayed to the customer when they view this loan in the portal."})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update Loan":"Create Loan"]})})]})]})})]})})}function Die({schedule:t}){const[e,r]=S.useState(Jn.calculatorDefaults.loanAmount),[s,i]=S.useState(Jn.calculatorDefaults.interestRate),[a,o]=S.useState(Jn.calculatorDefaults.termMonths),[l,c]=S.useState("asc"),[d,u]=S.useState(""),[h,f]=S.useState("month"),[p,y]=S.useState(1),v=12,b=[...t.filter(A=>A.month.toString().includes(d))].sort((A,_)=>{const k=A[h],F=_[h];return l==="asc"?k>F?1:-1:k<F?1:-1}),j=Math.ceil(b.length/v),w=(p-1)*v,C=b.slice(w,w+v),E=A=>{h===A?c(l==="asc"?"desc":"asc"):(f(A),c("asc"))},N=A=>{y(A)};return t.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(qn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search by month...",value:d,onChange:A=>{u(A.target.value),y(1)},className:"pl-10"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",w+1,"-",Math.min(w+v,b.length)," of ",b.length," payments"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("month"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Month"}),h==="month"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("payment"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Payment"}),h==="payment"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("principal"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Principal"}),h==="principal"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("interest"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Interest"}),h==="interest"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("balance"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Balance"}),h==="balance"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>E("totalInterestPaid"),children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{children:"Total Interest"}),h==="totalInterestPaid"&&(l==="asc"?n.jsx(Th,{className:"ml-1 h-3 w-3"}):n.jsx(Ph,{className:"ml-1 h-3 w-3"}))]})})]})}),n.jsx("tbody",{children:C.map((A,_)=>n.jsxs("tr",{className:_%2===0?"bg-muted/20":"",children:[n.jsx("td",{className:"p-3",children:A.month}),n.jsx("td",{className:"p-3",children:Fe(A.payment)}),n.jsx("td",{className:"p-3",children:Fe(A.principal)}),n.jsx("td",{className:"p-3",children:Fe(A.interest)}),n.jsx("td",{className:"p-3",children:Fe(A.additionalCosts)}),n.jsx("td",{className:"p-3",children:Fe(A.balance)}),n.jsx("td",{className:"p-3",children:Fe(A.totalInterestPaid)})]},A.month))})]})}),j>1&&n.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(1),disabled:p===1,children:"First"}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(p-1),disabled:p===1,children:"Previous"}),n.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,j)},(A,_)=>{let k;return j<=5||p<=3?k=_+1:p>=j-2?k=j-4+_:k=p-2+_,n.jsx(re,{variant:p===k?"default":"outline",size:"sm",onClick:()=>N(k),children:k},k)})}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(p+1),disabled:p===j,children:"Next"}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>N(j),disabled:p===j,children:"Last"})]})]})}function kie({initialValues:t,onSave:e,onClose:r}){const{toast:s}=Gt(),[i,a]=S.useState(t?.loanAmount||Jn.defaultLoan.amount),[o,l]=S.useState(t?.downPayment||Jn.defaultLoan.downPayment),[c,d]=S.useState(t?.interestRate||Jn.defaultLoan.rate),[u,h]=S.useState(t?.loanTerm||Jn.defaultLoan.termMonths),[f,p]=S.useState(Jn.paymentFrequencies[0]),[y,v]=S.useState(!1),[g,b]=S.useState(0),[j,w]=S.useState(!1),[C,E]=S.useState(0),[N,A]=S.useState(Jn.calculatorDefaults.termMonths),[_,k]=S.useState(0),[F,I]=S.useState(0),[T,R]=S.useState(0),[O,z]=S.useState([]),[q,B]=S.useState("calculator");S.useEffect(()=>{K()},[i,o,c,u,f,y,g,j,C]);const K=()=>{const W=i-o;if(W<=0){k(0),I(0),R(0),z([]);return}const te=c/100/12,ee=W*te/(1-Math.pow(1+te,-u));let ne=0;y&&(ne+=g),j&&(ne+=ee*(C/100));let ae=1;switch(f){case"biweekly":ae=12/26;break;case"weekly":ae=12/52;break;default:ae=1;break}const ve=ee*ae+ne*ae,xe=u,Se=ee*xe-W,Pe=W+Se+ne*xe,Ce=Y(W,te,u,ee,ne);k(ve),I(Se),R(Pe),z(Ce)},Y=(W,te,ee,ne,ae)=>{let ve=W,xe=0;const Se=[];for(let Pe=1;Pe<=ee;Pe++){const Ce=ve*te;let He=ne-Ce;if(He>ve&&(He=ve),ve-=He,xe+=Ce,Se.push({month:Pe,payment:ne+ae,principal:He,interest:Ce,additionalCosts:ae,balance:ve,totalInterestPaid:xe}),ve<=0)break}return Se},J=()=>{e&&e({loanAmount:i,downPayment:o,interestRate:c,loanTerm:u,paymentFrequency:f,includeInsurance:y,insuranceAmount:g,includeTax:j,taxRate:C,monthlyPayment:_,totalInterest:F,totalCost:T,amortizationSchedule:O}),s({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},H=()=>{window.print()},$=()=>{const te=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...O.map(ve=>[ve.month,ve.payment.toFixed(2),ve.principal.toFixed(2),ve.interest.toFixed(2),ve.additionalCosts.toFixed(2),ve.balance.toFixed(2),ve.totalInterestPaid.toFixed(2)].join(","))].join(`
`),ee=new Blob([te],{type:"text/csv;charset=utf-8;"}),ne=URL.createObjectURL(ee),ae=document.createElement("a");ae.href=ne,ae.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),s({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return n.jsx("div",{className:"space-y-6",children:n.jsxs(fn,{value:q,onValueChange:B,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-2",children:[n.jsx(dt,{value:"calculator",children:"Calculator"}),n.jsx(dt,{value:"amortization",children:"Amortization Schedule"})]}),n.jsxs(ht,{value:"calculator",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(_m,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),n.jsx(Ge,{children:"Enter the details of your loan"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"loanAmount",children:"Vehicle Price"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"loanAmount",type:"number",value:i,onChange:W=>a(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"downPayment",children:"Down Payment"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"downPayment",type:"number",value:o,onChange:W=>l(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"interestRate",children:"Interest Rate (%)"}),n.jsxs(nt,{value:c.toString(),onValueChange:W=>d(parseFloat(W)),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsx(tt,{children:Jn.interestRates.map(W=>n.jsxs(he,{value:W.toString(),children:[W,"%"]},W))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"loanTerm",children:"Loan Term (months)"}),n.jsxs(nt,{value:u.toString(),onValueChange:W=>h(parseInt(W)),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsx(tt,{children:Jn.termOptions.map(W=>n.jsxs(he,{value:W.toString(),children:[W," months"]},W))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),n.jsxs(nt,{value:f,onValueChange:p,children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsx(tt,{children:Jn.paymentFrequencies.map(W=>n.jsx(he,{value:W,children:W},W))})]})]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(rr,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),n.jsx(Ge,{children:"Include additional costs in your calculation"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"includeInsurance",checked:y,onCheckedChange:W=>v(!!W)}),n.jsx(ue,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),y&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"insuranceAmount",type:"number",value:g,onChange:W=>b(parseFloat(W.target.value)||0),className:"pl-10"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"includeTax",checked:j,onCheckedChange:W=>w(!!W)}),n.jsx(ue,{htmlFor:"includeTax",children:"Include Tax"})]}),j&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Te,{id:"taxRate",type:"number",step:"0.01",value:C,onChange:W=>E(parseFloat(W.target.value)||0)})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),n.jsx("span",{className:"font-medium",children:Fe(i-o)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[f==="monthly"?"Monthly":f==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),n.jsx("span",{className:"font-bold text-primary",children:Fe(_)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),n.jsx("span",{className:"font-medium",children:Fe(F)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),n.jsx("span",{className:"font-medium",children:Fe(T)})]})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&n.jsx(re,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(re,{variant:"outline",onClick:()=>B("amortization"),children:[n.jsx(Br,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),e&&n.jsx(re,{onClick:J,children:"Save Calculation"})]})]}),n.jsxs(ht,{value:"amortization",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Br,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),n.jsx(Ge,{children:"Detailed payment schedule over the life of the loan"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:$,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:H,children:[n.jsx(Cj,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(pe,{children:n.jsx(Die,{schedule:O})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[n.jsxs(re,{variant:"outline",onClick:()=>B("calculator"),children:[n.jsx(_m,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),e&&n.jsx(re,{onClick:J,children:"Save Calculation"})]})]})]})})}function Oie(){const{toast:t}=Gt(),[e,r]=S.useState("general"),[s,i]=S.useState(6.99),[a,o]=S.useState(84),[l,c]=S.useState(10),[d,u]=S.useState("monthly"),[h,f]=S.useState(!0),[p,y]=S.useState(12.99),[v,g]=S.useState(48),[b,j]=S.useState(20),[w,C]=S.useState(!0),[E,N]=S.useState(!0),[A,_]=S.useState(!0),[k,F]=S.useState(!0),[I,T]=S.useState(!0),[R,O]=S.useState(10),[z,q]=S.useState(25),[B,K]=S.useState("fixed"),[Y,J]=S.useState(""),[H,$]=S.useState(!0),[W,te]=S.useState(!0),[ee,ne]=S.useState(!0),[ae,ve]=S.useState(5),xe=()=>{t({title:"Settings Saved",description:"Your loan settings have been updated successfully."})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(fn,{value:e,onValueChange:r,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-4",children:[n.jsx(dt,{value:"general",children:"General"}),n.jsx(dt,{value:"bhph",children:"Buy Here Pay Here"}),n.jsx(dt,{value:"payments",children:"Payments"}),n.jsx(dt,{value:"documents",children:"Documents"})]}),n.jsx(ht,{value:"general",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Nl,{className:"h-5 w-5 mr-2 text-primary"}),"General Loan Settings"]}),n.jsx(Ge,{children:"Configure default loan parameters and settings"})]}),n.jsx(pe,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defaultInterestRate",children:"Default Interest Rate (%)"}),n.jsx(Te,{id:"defaultInterestRate",type:"number",step:"0.01",value:s,onChange:Se=>i(parseFloat(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for new loans"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"maxLoanTerm",children:"Maximum Loan Term (months)"}),n.jsx(Te,{id:"maxLoanTerm",type:"number",value:a,onChange:Se=>o(parseInt(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Longest allowed loan term in months"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"minDownPaymentPercent",children:"Minimum Down Payment (%)"}),n.jsx(Te,{id:"minDownPaymentPercent",type:"number",value:l,onChange:Se=>c(parseFloat(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum required down payment as percentage of vehicle price"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defaultPaymentFrequency",children:"Default Payment Frequency"}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"monthly",children:"Monthly"}),n.jsx(he,{value:"biweekly",children:"Bi-weekly"}),n.jsx(he,{value:"weekly",children:"Weekly"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard payment schedule for new loans"})]})]})})]})}),n.jsx(ht,{value:"bhph",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(rr,{className:"h-5 w-5 mr-2 text-primary"}),"Buy Here Pay Here Settings"]}),n.jsx(Ge,{children:"Configure in-house financing options"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"bhphEnabled",checked:h,onCheckedChange:Se=>f(!!Se)}),n.jsx(ue,{htmlFor:"bhphEnabled",children:"Enable Buy Here Pay Here Financing"})]}),h&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"bhphInterestRate",children:"BHPH Interest Rate (%)"}),n.jsx(Te,{id:"bhphInterestRate",type:"number",step:"0.01",value:p,onChange:Se=>y(parseFloat(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for in-house loans"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"bhphMaxLoanTerm",children:"BHPH Maximum Term (months)"}),n.jsx(Te,{id:"bhphMaxLoanTerm",type:"number",value:v,onChange:Se=>g(parseInt(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum term for in-house financing"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"bhphMinDownPaymentPercent",children:"BHPH Minimum Down Payment (%)"}),n.jsx(Te,{id:"bhphMinDownPaymentPercent",type:"number",value:b,onChange:Se=>j(parseFloat(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum down payment for in-house financing"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"bhphRequireIncome",checked:w,onCheckedChange:Se=>C(!!Se)}),n.jsx(ue,{htmlFor:"bhphRequireIncome",children:"Require Income Verification"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"bhphRequireReference",checked:E,onCheckedChange:Se=>N(!!Se)}),n.jsx(ue,{htmlFor:"bhphRequireReference",children:"Require References"})]})]})]}),n.jsx("div",{className:"bg-yellow-50 p-4 rounded-md mt-4",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(ao,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Notice"}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Buy Here Pay Here financing is subject to state and federal regulations. Ensure your dealership complies with all applicable laws including Truth in Lending Act (TILA), Fair Credit Reporting Act (FCRA), and state-specific lending requirements."})]})]})})]})]})}),n.jsx(ht,{value:"payments",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(La,{className:"h-5 w-5 mr-2 text-primary"}),"Payment Settings"]}),n.jsx(Ge,{children:"Configure payment options and late fee policies"})]}),n.jsx(pe,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"allowAutoPay",checked:A,onCheckedChange:Se=>_(!!Se)}),n.jsx(ue,{htmlFor:"allowAutoPay",children:"Allow Automatic Payments"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"allowOnlinePayments",checked:k,onCheckedChange:Se=>F(!!Se)}),n.jsx(ue,{htmlFor:"allowOnlinePayments",children:"Allow Online Payments"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"allowPartialPayments",checked:I,onCheckedChange:Se=>T(!!Se)}),n.jsx(ue,{htmlFor:"allowPartialPayments",children:"Allow Partial Payments"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"gracePeriodDays",children:"Grace Period (days)"}),n.jsx(Te,{id:"gracePeriodDays",type:"number",value:R,onChange:Se=>O(parseInt(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days after due date before late fee applies"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"lateFeeType",children:"Late Fee Type"}),n.jsxs(nt,{value:B,onValueChange:K,children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"fixed",children:"Fixed Amount"}),n.jsx(he,{value:"percentage",children:"Percentage of Payment"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"lateFeeAmount",children:B==="fixed"?"Late Fee Amount ($)":"Late Fee Percentage (%)"}),n.jsx(Te,{id:"lateFeeAmount",type:"number",step:B==="percentage"?"0.01":"1",value:z,onChange:Se=>q(parseFloat(Se.target.value)||0)})]})]})})]})}),n.jsx(ht,{value:"documents",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(yr,{className:"h-5 w-5 mr-2 text-primary"}),"Document Settings"]}),n.jsx(Ge,{children:"Configure loan documents and notification settings"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"loanAgreementTemplate",children:"Loan Agreement Template"}),n.jsx(kr,{id:"loanAgreementTemplate",value:Y,onChange:Se=>J(Se.target.value),placeholder:"Enter your loan agreement template text or HTML...",rows:6}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You can use variables like {{customer_name}}, {{loan_amount}}, {{interest_rate}}, etc."})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"requireSignature",checked:H,onCheckedChange:Se=>$(!!Se)}),n.jsx(ue,{htmlFor:"requireSignature",children:"Require Digital Signature"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"sendPaymentReceipts",checked:W,onCheckedChange:Se=>te(!!Se)}),n.jsx(ue,{htmlFor:"sendPaymentReceipts",children:"Send Payment Receipts"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"sendPaymentReminders",checked:ee,onCheckedChange:Se=>ne(!!Se)}),n.jsx(ue,{htmlFor:"sendPaymentReminders",children:"Send Payment Reminders"})]})]}),ee&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"reminderDaysBefore",children:"Reminder Days Before Due"}),n.jsx(Te,{id:"reminderDaysBefore",type:"number",value:ae,onChange:Se=>ve(parseInt(Se.target.value)||0)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Number of days before due date to send reminder"})]})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-md mt-4",children:n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx(H4,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-blue-800",children:"Compliance Notice"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ensure your loan documents comply with all applicable laws and regulations. Consider consulting with legal counsel to review your loan agreement templates."})]})]})})]})]})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(re,{onClick:xe,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}const W0=S.forwardRef(({className:t,...e},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:pt("w-full caption-bottom text-sm",t),...e})}));W0.displayName="Table";const G0=S.forwardRef(({className:t,...e},r)=>n.jsx("thead",{ref:r,className:pt("[&_tr]:border-b",t),...e}));G0.displayName="TableHeader";const K0=S.forwardRef(({className:t,...e},r)=>n.jsx("tbody",{ref:r,className:pt("[&_tr:last-child]:border-0",t),...e}));K0.displayName="TableBody";const Rie=S.forwardRef(({className:t,...e},r)=>n.jsx("tfoot",{ref:r,className:pt("bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Rie.displayName="TableFooter";const ac=S.forwardRef(({className:t,...e},r)=>n.jsx("tr",{ref:r,className:pt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));ac.displayName="TableRow";const Gr=S.forwardRef(({className:t,...e},r)=>n.jsx("th",{ref:r,className:pt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Gr.displayName="TableHead";const Vr=S.forwardRef(({className:t,...e},r)=>n.jsx("td",{ref:r,className:pt("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Vr.displayName="TableCell";const Lie=S.forwardRef(({className:t,...e},r)=>n.jsx("caption",{ref:r,className:pt("mt-4 text-sm text-muted-foreground",t),...e}));Lie.displayName="TableCaption";function UD({loanId:t}){const[e,r]=S.useState(""),[s,i]=S.useState("all"),[a,o]=S.useState(""),l=Jn.samplePayments,d=(t?l.filter(f=>f.loanId===t):l).filter(f=>{const p=!e||f.transactionId?.toLowerCase().includes(e.toLowerCase())||f.paymentMethod.toLowerCase().includes(e.toLowerCase()),y=s==="all"||f.status===s,v=!a||new Date(f.paymentDate).toISOString().split("T")[0]>=a;return p&&y&&v}),u=f=>Jn.paymentStatusColors[f]||"bg-gray-100 text-gray-800",h=d.filter(f=>f.status==="Completed").reduce((f,p)=>f+p.amount,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Payments"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:Fe(h)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.filter(f=>f.status==="Completed").length," completed payments"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Pending Payments"}),n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:d.filter(f=>f.status==="Pending").length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled payments"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Last Payment"}),n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:d.length>0?wt(d[0].paymentDate):"N/A"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent payment"})]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Payment History"}),n.jsx(Ge,{children:t?"Payment history for this loan":"All payment transactions"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search by transaction ID or method",value:e,onChange:f=>r(f.target.value),className:"pl-10"})]}),n.jsxs(nt,{value:s,onValueChange:i,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"Filter by Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Statuses"}),Object.keys(Jn.paymentStatusColors).map(f=>n.jsx(he,{value:f,children:f},f))]})]}),n.jsx(Te,{type:"date",value:a,onChange:f=>o(f.target.value),className:"w-[180px]",title:"Filter by payment date (on or after)"}),n.jsxs(re,{variant:"outline",children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export"]})]}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(W0,{children:[n.jsx(G0,{children:n.jsxs(ac,{children:[n.jsx(Gr,{children:"Payment Date"}),n.jsx(Gr,{children:"Amount"}),n.jsx(Gr,{children:"Principal"}),n.jsx(Gr,{children:"Interest"}),n.jsx(Gr,{children:"Method"}),n.jsx(Gr,{children:"Status"}),n.jsx(Gr,{children:"Transaction ID"}),n.jsx(Gr,{children:"Actions"})]})}),n.jsxs(K0,{children:[d.map(f=>n.jsxs(ac,{children:[n.jsx(Vr,{children:wt(f.paymentDate)}),n.jsx(Vr,{className:"font-medium",children:Fe(f.amount)}),n.jsx(Vr,{children:Fe(f.principalAmount)}),n.jsx(Vr,{children:Fe(f.interestAmount)}),n.jsx(Vr,{children:f.paymentMethod}),n.jsx(Vr,{children:n.jsx(Ve,{className:u(f.status),children:f.status})}),n.jsx(Vr,{className:"font-mono text-sm",children:f.transactionId||"N/A"}),n.jsx(Vr,{children:n.jsx(re,{variant:"ghost",size:"sm",children:"View Details"})})]},f.id)),d.length===0&&n.jsx(ac,{children:n.jsx(Vr,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No payments found matching your criteria"})})]})]})})]})]})]})}function Mie(){const{tenant:t}=lo(),{toast:e}=Gt(),{loans:r,setLoans:s}=Bz();df();const[i,a]=S.useState("overview"),[o,l]=S.useState(""),[c,d]=S.useState("all"),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[y,v]=S.useState(null),[g,b]=S.useState("all"),[j,w]=S.useState(""),C=r.filter(q=>{const B=q?.customerName?.toLowerCase()?.includes(o.toLowerCase())||!1||q?.vehicleInfo?.toLowerCase()?.includes(o.toLowerCase())||!1,K=c==="all"||q?.status===c;return B&&K}),E=r.filter(q=>{const B=!j||q.customerName.toLowerCase().includes(j.toLowerCase())||q.vehicleInfo.toLowerCase().includes(j.toLowerCase()),K=g==="all"||q.status===g;return B&&K}),N=Jn.sampleLoans.length,A=Jn.sampleLoans.filter(q=>q.status==="Current").length,_=Jn.sampleLoans.reduce((q,B)=>q+B.remainingBalance,0),k=N>0?_/N:0,F=()=>{switch(t?.platform){case"rv":return"RV Finance";case"marine":return"Marine Finance";case"manufactured_home":return"MH Finance";default:return"Finance Management"}},I=()=>{v(null),h(!0)},T=q=>{v(q),h(!0)},R=()=>{h(!1),v(null)},O=q=>{e({title:y?"Loan Updated":"Loan Created",description:`Loan has been ${y?"updated":"created"} successfully.`})},z=async q=>{if(!y){e({title:"Error",description:"No loan selected",variant:"destructive"});return}try{const B={id:`payment-${Math.random().toString(36).substring(2,9)}`,loanId:y.id,amount:q.amount||0,method:q.method||Jc.CASH,status:q.status||cu.COMPLETED,processedDate:q.processedDate||new Date,notes:q.notes||"",transactionId:q.transactionId||`txn_${Math.random().toString(36).substring(2,9)}`,customFields:{},createdAt:new Date,updatedAt:new Date};s(Y=>Y.map(J=>J.id===y.id?{...J,payments:[...J.payments,B]}:J));const K=Y=>Jn.statusColors[Y]||"bg-gray-100 text-gray-800";return e({title:"Payment Recorded",description:`Payment of ${Fe(B.amount)} has been recorded.`}),Promise.resolve()}catch(B){return console.error("Error recording payment:",B),e({title:"Error",description:"Failed to record payment",variant:"destructive"}),Promise.reject(B)}};return n.jsxs("div",{className:"space-y-6",children:[u&&n.jsx(Iie,{loan:y||void 0,onClose:R,onSuccess:O}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:F()}),n.jsx("p",{className:"ri-page-description",children:"Manage loans, payments, and financial operations"})]}),n.jsx("div",{children:n.jsxs(re,{onClick:I,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Loan"]})})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Loans"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:N}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[A," active loans"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Portfolio"}),n.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:Fe(_)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Outstanding balance"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Average Loan"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:Fe(k)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Average loan amount"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Default Rate"}),n.jsx(_m,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"2.1%"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.5% from last month"})]})]})]}),n.jsxs(fn,{value:i,onValueChange:a,children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"loans",children:"Loans"}),n.jsx(dt,{value:"calculator",children:"Calculator"}),n.jsx(dt,{value:"payments",children:"Payments"}),n.jsx(dt,{value:"settings",children:"Settings"})]}),n.jsx(ht,{value:"overview",className:"space-y-4",children:n.jsxs("div",{className:"ri-content-grid",children:[n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Loans"}),n.jsx(Ge,{children:"Latest loan applications and approvals"})]}),n.jsx(pe,{children:r.length>0?n.jsx("div",{className:"space-y-4",children:r.slice(0,5).map(q=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>T(q),children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold",children:[q.customerName," - ",q.vehicleInfo||"Loan"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",q.loanAmount.toLocaleString()," • ",q.interestRate,"% • ",q.termMonths," months"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{children:q.status.replace("_"," ").toUpperCase()}),q.isPortalVisible&&n.jsx(Ve,{variant:"outline",children:"Portal"})]})]},q.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No loans created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Payment Activity"}),n.jsx(Ge,{children:"Recent payment transactions"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:"Payment Received"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"John Smith - $372.86"})]}),n.jsx(Ve,{variant:"outline",children:"Today"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:"Payment Received"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Maria Rodriguez - $485.20"})]}),n.jsx(Ve,{variant:"outline",children:"Yesterday"})]})]})})]})]})}),n.jsx(ht,{value:"loans",className:"space-y-4",children:n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Active Loans"}),n.jsx(Ge,{children:"Manage customer loans and financing"})]}),n.jsxs(re,{onClick:I,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Loan"]})]})}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search by customer or vehicle",value:j,onChange:q=>w(q.target.value),className:"pl-10"})]}),n.jsxs(nt,{value:g,onValueChange:b,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"Filter by Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Statuses"}),Jn.statusOptions.map(q=>n.jsx(he,{value:q,children:q},q))]})]})]}),n.jsxs("div",{className:"space-y-4",children:[E.length>0?E.map(q=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h4",{className:"font-semibold",children:q.customerName}),n.jsx(Ve,{className:Jn.statusColors[q.status]||"bg-gray-100 text-gray-800",children:q.status})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[q.vehicleInfo," • ",Fe(q.loanAmount)," • ",q.termMonths," months"]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Balance: ",Fe(q.remainingBalance)," • Next Payment: ",wt(q.nextPaymentDate)]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"outline",size:"sm",children:"View Details"}),n.jsx(re,{variant:"outline",size:"sm",children:"Payment History"})]})]},q.id)):Jn.sampleLoans.map(q=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h4",{className:"font-semibold",children:q.customerName}),n.jsx(Ve,{className:Jn.statusColors[q.status]||"bg-gray-100 text-gray-800",children:q.status})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[q.vehicleInfo," • ",Fe(q.loanAmount)," • ",q.termMonths," months"]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Balance: ",Fe(q.remainingBalance)," • Next Payment: ",wt(q.nextPaymentDate)]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"outline",size:"sm",children:"View Details"}),n.jsx(re,{variant:"outline",size:"sm",children:"Payment History"})]})]},q.id)),Jn.sampleLoans.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No loans found"}),n.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})]})]})]})}),n.jsx(ht,{value:"calculator",className:"space-y-4",children:n.jsx(kie,{})}),n.jsx(ht,{value:"payments",children:n.jsx(UD,{loan:C.length>0?C[0]:null,onClose:()=>p(!1),onRecordPayment:z})}),n.jsx(ht,{value:"settings",children:n.jsx(Oie,{})})]}),f&&y&&n.jsx(UD,{loan:y,onClose:()=>p(!1),onRecordPayment:z})]})}const Fie=Mie;var Ft=(t=>(t.PROSPECTING="prospecting",t.QUALIFICATION="qualification",t.NEEDS_ANALYSIS="needs_analysis",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(Ft||{}),Pn=(t=>(t.ACTIVE="active",t.WON="won",t.LOST="lost",t.ON_HOLD="on_hold",t.CANCELLED="cancelled",t))(Pn||{}),ed=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(ed||{}),Ch=(t=>(t.GEOGRAPHIC="geographic",t.INDUSTRY="industry",t.ACCOUNT_SIZE="account_size",t.PRODUCT_LINE="product_line",t))(Ch||{});function $ie(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState([]),[o,l]=S.useState([]),[c,d]=S.useState([]),[u,h]=S.useState(!1);S.useEffect(()=>{f()},[]);const f=()=>{const O=Bn("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:Ft.PROPOSAL,status:Pn.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:Ft.NEGOTIATION,status:Pn.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),z=Bn("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),q=Bn("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:Ft.QUALIFICATION,toStage:Ft.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:Ft.NEEDS_ANALYSIS,toStage:Ft.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);e(O),s(z),d(q)},p=O=>{rn("renter-insight-deals",O)},y=O=>{rn("renter-insight-stage-history",O)},v=async O=>{h(!0);try{const z={id:Math.random().toString(36).substr(2,9),name:O.name||"",customerId:O.customerId||"",customerName:O.customerName||"",stage:Ft.PROSPECTING,status:Pn.ACTIVE,priority:O.priority||"medium",value:O.value||0,probability:10,expectedCloseDate:O.expectedCloseDate||new Date,assignedTo:O.assignedTo||"",territoryId:O.territoryId||"",sourceId:O.sourceId,competitorIds:O.competitorIds||[],products:O.products||[],stageHistory:[],notes:O.notes||"",requiresApproval:(O.value||0)>1e5,customFields:O.customFields||{},createdAt:new Date,updatedAt:new Date},q=[...t,z];return e(q),p(q),await b(z.id,void 0,Ft.PROSPECTING,"system"),z}finally{h(!1)}},g=async(O,z,q)=>{const B=t.find(W=>W.id===O);if(!B)return;const K=B.stage,Y=w(z),J=z===Ft.CLOSED_WON?Pn.WON:z===Ft.CLOSED_LOST?Pn.LOST:Pn.ACTIVE,H=z===Ft.CLOSED_WON||z===Ft.CLOSED_LOST?new Date:void 0,$=t.map(W=>W.id===O?{...W,stage:z,probability:Y,status:J,actualCloseDate:H,updatedAt:new Date}:W);return e($),p($),await b(O,K,z,"current-user",q||`Stage changed from ${K?.replace("_"," ")||"none"} to ${z.replace("_"," ")}`),$.find(W=>W.id===O)},b=async(O,z,q,B,K)=>{const Y=z?j(O,z):void 0,J={id:Math.random().toString(36).substr(2,9),dealId:O,fromStage:z,toStage:q,changedBy:B,changedAt:new Date,duration:Y,notes:K},H=[...c,J];d(H),y(H)},j=(O,z)=>{const B=c.filter(K=>K.dealId===O).find(K=>K.toStage===z);return B?Math.floor((Date.now()-B.changedAt.getTime())/36e5):0},w=O=>{switch(O){case Ft.PROSPECTING:return 10;case Ft.QUALIFICATION:return 25;case Ft.NEEDS_ANALYSIS:return 40;case Ft.PROPOSAL:return 60;case Ft.NEGOTIATION:return 80;case Ft.CLOSED_WON:return 100;case Ft.CLOSED_LOST:return 0;default:return 10}},C=async(O,z)=>{const q=r.find(B=>B.isActive);if(q){const B=t.map(K=>K.id===O?{...K,territoryId:q.id,updatedAt:new Date}:K);e(B),p(B)}},E=async(O,z)=>{const q={id:Math.random().toString(36).substr(2,9),dealId:O,workflowType:z,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return a(B=>[...B,q]),q},N=async(O,z,q)=>{const B={id:Math.random().toString(36).substr(2,9),dealId:O,outcome:z,primaryReason:q.primaryReason||"",secondaryReasons:q.secondaryReasons||[],competitorWon:q.competitorWon,feedback:q.feedback||"",lessonsLearned:q.lessonsLearned||[],actionItems:q.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return l(K=>[...K,B]),B},A=()=>{const O=t.length,z=t.reduce((W,te)=>W+te.value,0),q=t.filter(W=>W.status===Pn.WON).length,B=t.filter(W=>W.status===Pn.WON).reduce((W,te)=>W+te.value,0),K=t.filter(W=>W.status===Pn.LOST).length,Y=t.filter(W=>W.status===Pn.LOST).reduce((W,te)=>W+te.value,0),J=O>0?q/O*100:0,H=O>0?z/O:0,$=_();return{totalDeals:O,totalValue:z,wonDeals:q,wonValue:B,lostDeals:K,lostValue:Y,winRate:J,averageDealSize:H,averageSalesCycle:$,conversionRates:k()}},_=()=>{const O=t.filter(q=>q.actualCloseDate);return O.length===0?0:O.reduce((q,B)=>{const K=new Date(B.actualCloseDate),Y=new Date(B.createdAt),J=isNaN(K.getTime())?0:K.getTime(),H=isNaN(Y.getTime())?0:Y.getTime(),$=J&&H?Math.floor((J-H)/(1e3*60*60*24)):0;return q+$},0)/O.length},k=()=>[{fromStage:Ft.PROSPECTING,toStage:Ft.QUALIFICATION,rate:65,averageDuration:72},{fromStage:Ft.QUALIFICATION,toStage:Ft.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:Ft.NEEDS_ANALYSIS,toStage:Ft.PROPOSAL,rate:80,averageDuration:96},{fromStage:Ft.PROPOSAL,toStage:Ft.NEGOTIATION,rate:70,averageDuration:120},{fromStage:Ft.NEGOTIATION,toStage:Ft.CLOSED_WON,rate:85,averageDuration:168}];return{deals:t,territories:r,approvalWorkflows:i,winLossReports:o,stageHistory:c,loading:u,createDeal:v,updateDealStage:g,assignTerritory:C,createApprovalWorkflow:E,createWinLossReport:N,getDealMetrics:A,getDealsByStage:O=>t.filter(z=>z.stage===O),getDealsByTerritory:O=>t.filter(z=>z.territoryId===O),getDealsByRep:O=>t.filter(z=>z.assignedTo===O),getStageHistory:O=>c.filter(z=>z.dealId===O).sort((z,q)=>new Date(z.changedAt).getTime()-new Date(q.changedAt).getTime())}}function yE(t,e){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},yE(t,e)}function zz(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yE(t,e)}function un(t){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(t)}function Bie(t,e){if(un(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(un(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zie(t){var e=Bie(t,"string");return un(e)=="symbol"?e:e+""}function qie(t,e,r){return(e=zie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function HD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(r),!0).forEach(function(s){qie(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function to(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var WD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),GD=function(){return Math.random().toString(36).substring(7).split("").join(".")},KD={INIT:"@@redux/INIT"+GD(),REPLACE:"@@redux/REPLACE"+GD()};function Uie(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function qz(t,e,r){var s;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(to(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(to(1));return r(qz)(t,e)}if(typeof t!="function")throw new Error(to(2));var i=t,a=e,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(to(3));return a}function h(v){if(typeof v!="function")throw new Error(to(4));if(c)throw new Error(to(5));var g=!0;return d(),l.push(v),function(){if(g){if(c)throw new Error(to(6));g=!1,d();var j=l.indexOf(v);l.splice(j,1),o=null}}}function f(v){if(!Uie(v))throw new Error(to(7));if(typeof v.type>"u")throw new Error(to(8));if(c)throw new Error(to(9));try{c=!0,a=i(a,v)}finally{c=!1}for(var g=o=l,b=0;b<g.length;b++){var j=g[b];j()}return v}function p(v){if(typeof v!="function")throw new Error(to(10));i=v,f({type:KD.REPLACE})}function y(){var v,g=h;return v={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(to(11));function w(){j.next&&j.next(u())}w();var C=g(w);return{unsubscribe:C}}},v[WD]=function(){return this},v}return f({type:KD.INIT}),s={dispatch:f,subscribe:h,getState:u,replaceReducer:p},s[WD]=y,s}function YD(t,e){return function(){return e(t.apply(this,arguments))}}function XD(t,e){if(typeof t=="function")return YD(t,e);if(typeof t!="object"||t===null)throw new Error(to(16));var r={};for(var s in t){var i=t[s];typeof i=="function"&&(r[s]=YD(i,e))}return r}function Uz(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(s){return s}:e.length===1?e[0]:e.reduce(function(s,i){return function(){return s(i.apply(void 0,arguments))}})}function Vie(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(s){return function(){var i=s.apply(void 0,arguments),a=function(){throw new Error(to(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(c){return c(o)});return a=Uz.apply(void 0,l)(i.dispatch),HD(HD({},i),{},{dispatch:a})}}}var eN={exports:{}},tN,ZD;function Hie(){if(ZD)return tN;ZD=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tN=t,tN}var rN,QD;function Wie(){if(QD)return rN;QD=1;var t=Hie();function e(){}function r(){}return r.resetWarningCache=e,rN=function(){function s(o,l,c,d,u,h){if(h!==t){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}s.isRequired=s;function i(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},rN}var JD;function Gie(){return JD||(JD=1,eN.exports=Wie()()),eN.exports}var Kie=Gie();const Xt=Kr(Kie);var Vz=be.createContext(null);function Yie(t){t()}var Hz=Yie,Xie=function(e){return Hz=e},Zie=function(){return Hz};function Qie(){var t=Zie(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var i=e;i;)i.callback(),i=i.next})},get:function(){for(var i=[],a=e;a;)i.push(a),a=a.next;return i},subscribe:function(i){var a=!0,o=r={callback:i,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var ek={notify:function(){},get:function(){return[]}};function Wz(t,e){var r,s=ek;function i(h){return c(),s.subscribe(h)}function a(){s.notify()}function o(){u.onStateChange&&u.onStateChange()}function l(){return!!r}function c(){r||(r=e?e.addNestedSub(o):t.subscribe(o),s=Qie())}function d(){r&&(r(),r=void 0,s.clear(),s=ek)}var u={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return s}};return u}var Gz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect;function Jie(t){var e=t.store,r=t.context,s=t.children,i=S.useMemo(function(){var l=Wz(e);return{store:e,subscription:l}},[e]),a=S.useMemo(function(){return e.getState()},[e]);Gz(function(){var l=i.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[i,a]);var o=r||Vz;return be.createElement(o.Provider,{value:i},s)}function Qb(t,e){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;r[s]=t[s]}return r}var nN={exports:{}},jn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk;function eae(){if(tk)return jn;tk=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,f=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,g=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,j=t?Symbol.for("react.scope"):60119;function w(E){if(typeof E=="object"&&E!==null){var N=E.$$typeof;switch(N){case e:switch(E=E.type,E){case c:case d:case s:case a:case i:case h:return E;default:switch(E=E&&E.$$typeof,E){case l:case u:case y:case p:case o:return E;default:return N}}case r:return N}}}function C(E){return w(E)===d}return jn.AsyncMode=c,jn.ConcurrentMode=d,jn.ContextConsumer=l,jn.ContextProvider=o,jn.Element=e,jn.ForwardRef=u,jn.Fragment=s,jn.Lazy=y,jn.Memo=p,jn.Portal=r,jn.Profiler=a,jn.StrictMode=i,jn.Suspense=h,jn.isAsyncMode=function(E){return C(E)||w(E)===c},jn.isConcurrentMode=C,jn.isContextConsumer=function(E){return w(E)===l},jn.isContextProvider=function(E){return w(E)===o},jn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===e},jn.isForwardRef=function(E){return w(E)===u},jn.isFragment=function(E){return w(E)===s},jn.isLazy=function(E){return w(E)===y},jn.isMemo=function(E){return w(E)===p},jn.isPortal=function(E){return w(E)===r},jn.isProfiler=function(E){return w(E)===a},jn.isStrictMode=function(E){return w(E)===i},jn.isSuspense=function(E){return w(E)===h},jn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===s||E===d||E===a||E===i||E===h||E===f||typeof E=="object"&&E!==null&&(E.$$typeof===y||E.$$typeof===p||E.$$typeof===o||E.$$typeof===l||E.$$typeof===u||E.$$typeof===g||E.$$typeof===b||E.$$typeof===j||E.$$typeof===v)},jn.typeOf=w,jn}var rk;function tae(){return rk||(rk=1,nN.exports=eae()),nN.exports}var sN,nk;function rae(){if(nk)return sN;nk=1;var t=tae(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=s,a[t.Memo]=i;function o(y){return t.isMemo(y)?i:a[y.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function p(y,v,g){if(typeof v!="string"){if(f){var b=h(v);b&&b!==f&&p(y,b,g)}var j=c(v);d&&(j=j.concat(d(v)));for(var w=o(y),C=o(v),E=0;E<j.length;++E){var N=j[E];if(!r[N]&&!(g&&g[N])&&!(C&&C[N])&&!(w&&w[N])){var A=u(v,N);try{l(y,N,A)}catch{}}}}return y}return sN=p,sN}var nae=rae();const sk=Kr(nae);var iN={exports:{}},Tn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik;function sae(){if(ik)return Tn;ik=1;var t=60103,e=60106,r=60107,s=60108,i=60114,a=60109,o=60110,l=60112,c=60113,d=60120,u=60115,h=60116,f=60121,p=60122,y=60117,v=60129,g=60131;if(typeof Symbol=="function"&&Symbol.for){var b=Symbol.for;t=b("react.element"),e=b("react.portal"),r=b("react.fragment"),s=b("react.strict_mode"),i=b("react.profiler"),a=b("react.provider"),o=b("react.context"),l=b("react.forward_ref"),c=b("react.suspense"),d=b("react.suspense_list"),u=b("react.memo"),h=b("react.lazy"),f=b("react.block"),p=b("react.server.block"),y=b("react.fundamental"),v=b("react.debug_trace_mode"),g=b("react.legacy_hidden")}function j(R){if(typeof R=="object"&&R!==null){var O=R.$$typeof;switch(O){case t:switch(R=R.type,R){case r:case i:case s:case c:case d:return R;default:switch(R=R&&R.$$typeof,R){case o:case l:case h:case u:case a:return R;default:return O}}case e:return O}}}var w=a,C=t,E=l,N=r,A=h,_=u,k=e,F=i,I=s,T=c;return Tn.ContextConsumer=o,Tn.ContextProvider=w,Tn.Element=C,Tn.ForwardRef=E,Tn.Fragment=N,Tn.Lazy=A,Tn.Memo=_,Tn.Portal=k,Tn.Profiler=F,Tn.StrictMode=I,Tn.Suspense=T,Tn.isAsyncMode=function(){return!1},Tn.isConcurrentMode=function(){return!1},Tn.isContextConsumer=function(R){return j(R)===o},Tn.isContextProvider=function(R){return j(R)===a},Tn.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===t},Tn.isForwardRef=function(R){return j(R)===l},Tn.isFragment=function(R){return j(R)===r},Tn.isLazy=function(R){return j(R)===h},Tn.isMemo=function(R){return j(R)===u},Tn.isPortal=function(R){return j(R)===e},Tn.isProfiler=function(R){return j(R)===i},Tn.isStrictMode=function(R){return j(R)===s},Tn.isSuspense=function(R){return j(R)===c},Tn.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===r||R===i||R===v||R===s||R===c||R===d||R===g||typeof R=="object"&&R!==null&&(R.$$typeof===h||R.$$typeof===u||R.$$typeof===a||R.$$typeof===o||R.$$typeof===l||R.$$typeof===y||R.$$typeof===f||R[0]===p)},Tn.typeOf=j,Tn}var ak;function iae(){return ak||(ak=1,iN.exports=sae()),iN.exports}var aae=iae(),oae=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],lae=["reactReduxForwardedRef"],cae=[],dae=[null,null];function uae(t,e){var r=t[1];return[e.payload,r+1]}function ok(t,e,r){Gz(function(){return t.apply(void 0,e)},r)}function hae(t,e,r,s,i,a,o){t.current=s,e.current=i,r.current=!1,a.current&&(a.current=null,o())}function fae(t,e,r,s,i,a,o,l,c,d){if(t){var u=!1,h=null,f=function(){if(!u){var v=e.getState(),g,b;try{g=s(v,i.current)}catch(j){b=j,h=j}b||(h=null),g===a.current?o.current||c():(a.current=g,l.current=g,o.current=!0,d({type:"STORE_UPDATED",payload:{error:b}}))}};r.onStateChange=f,r.trySubscribe(),f();var p=function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h};return p}}var mae=function(){return[null,0]};function pae(t,e){e===void 0&&(e={});var r=e,s=r.getDisplayName,i=s===void 0?function(w){return"ConnectAdvanced("+w+")"}:s,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,c=l===void 0?void 0:l,d=r.shouldHandleStateChanges,u=d===void 0?!0:d,h=r.storeKey,f=h===void 0?"store":h;r.withRef;var p=r.forwardRef,y=p===void 0?!1:p,v=r.context,g=v===void 0?Vz:v,b=Qb(r,oae),j=g;return function(C){var E=C.displayName||C.name||"Component",N=i(E),A=yt({},b,{getDisplayName:i,methodName:o,renderCountProp:c,shouldHandleStateChanges:u,storeKey:f,displayName:N,wrappedComponentName:E,WrappedComponent:C}),_=b.pure;function k(O){return t(O.dispatch,A)}var F=_?S.useMemo:function(O){return O()};function I(O){var z=S.useMemo(function(){var qe=O.reactReduxForwardedRef,lt=Qb(O,lae);return[O.context,qe,lt]},[O]),q=z[0],B=z[1],K=z[2],Y=S.useMemo(function(){return q&&q.Consumer&&aae.isContextConsumer(be.createElement(q.Consumer,null))?q:j},[q,j]),J=S.useContext(Y),H=!!O.store&&!!O.store.getState&&!!O.store.dispatch;J&&J.store;var $=H?O.store:J.store,W=S.useMemo(function(){return k($)},[$]),te=S.useMemo(function(){if(!u)return dae;var qe=Wz($,H?null:J.subscription),lt=qe.notifyNestedSubs.bind(qe);return[qe,lt]},[$,H,J]),ee=te[0],ne=te[1],ae=S.useMemo(function(){return H?J:yt({},J,{subscription:ee})},[H,J,ee]),ve=S.useReducer(uae,cae,mae),xe=ve[0],Se=xe[0],Pe=ve[1];if(Se&&Se.error)throw Se.error;var Ce=S.useRef(),He=S.useRef(K),Ke=S.useRef(),we=S.useRef(!1),oe=F(function(){return Ke.current&&K===He.current?Ke.current:W($.getState(),K)},[$,Se,K]);ok(hae,[He,Ce,we,K,oe,Ke,ne]),ok(fae,[u,$,ee,W,He,Ce,we,Ke,ne,Pe],[$,ee,W]);var it=S.useMemo(function(){return be.createElement(C,yt({},oe,{ref:B}))},[B,C,oe]),_e=S.useMemo(function(){return u?be.createElement(Y.Provider,{value:ae},it):it},[Y,it,ae]);return _e}var T=_?be.memo(I):I;if(T.WrappedComponent=C,T.displayName=I.displayName=N,y){var R=be.forwardRef(function(z,q){return be.createElement(T,yt({},z,{reactReduxForwardedRef:q}))});return R.displayName=N,R.WrappedComponent=C,sk(R,C)}return sk(T,C)}}function lk(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function aN(t,e){if(lk(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(e,r[i])||!lk(t[r[i]],e[r[i]]))return!1;return!0}function gae(t,e){var r={},s=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var i in t)s(i);return r}function gT(t){return function(r,s){var i=t(r,s);function a(){return i}return a.dependsOnOwnProps=!1,a}}function ck(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function Kz(t,e){return function(s,i){i.displayName;var a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=t,a.dependsOnOwnProps=ck(t);var d=a(l,c);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=ck(d),d=a(l,c)),d},a}}function vae(t){return typeof t=="function"?Kz(t):void 0}function xae(t){return t?void 0:gT(function(e){return{dispatch:e}})}function yae(t){return t&&typeof t=="object"?gT(function(e){return gae(t,e)}):void 0}const bae=[vae,xae,yae];function jae(t){return typeof t=="function"?Kz(t):void 0}function wae(t){return t?void 0:gT(function(){return{}})}const Nae=[jae,wae];function Sae(t,e,r){return yt({},r,t,e)}function Aae(t){return function(r,s){s.displayName;var i=s.pure,a=s.areMergedPropsEqual,o=!1,l;return function(d,u,h){var f=t(d,u,h);return o?(!i||!a(f,l))&&(l=f):(o=!0,l=f),l}}}function Cae(t){return typeof t=="function"?Aae(t):void 0}function Eae(t){return t?void 0:function(){return Sae}}const Pae=[Cae,Eae];var Tae=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _ae(t,e,r,s){return function(a,o){return r(t(a,o),e(s,o),o)}}function Iae(t,e,r,s,i){var a=i.areStatesEqual,o=i.areOwnPropsEqual,l=i.areStatePropsEqual,c=!1,d,u,h,f,p;function y(w,C){return d=w,u=C,h=t(d,u),f=e(s,u),p=r(h,f,u),c=!0,p}function v(){return h=t(d,u),e.dependsOnOwnProps&&(f=e(s,u)),p=r(h,f,u),p}function g(){return t.dependsOnOwnProps&&(h=t(d,u)),e.dependsOnOwnProps&&(f=e(s,u)),p=r(h,f,u),p}function b(){var w=t(d,u),C=!l(w,h);return h=w,C&&(p=r(h,f,u)),p}function j(w,C){var E=!o(C,u),N=!a(w,d,C,u);return d=w,u=C,E&&N?v():E?g():N?b():p}return function(C,E){return c?j(C,E):y(C,E)}}function Dae(t,e){var r=e.initMapStateToProps,s=e.initMapDispatchToProps,i=e.initMergeProps,a=Qb(e,Tae),o=r(t,a),l=s(t,a),c=i(t,a),d=a.pure?Iae:_ae;return d(o,l,c,t,a)}var kae=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function oN(t,e,r){for(var s=e.length-1;s>=0;s--){var i=e[s](t);if(i)return i}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function Oae(t,e){return t===e}function Rae(t){var e=t===void 0?{}:t,r=e.connectHOC,s=r===void 0?pae:r,i=e.mapStateToPropsFactories,a=i===void 0?Nae:i,o=e.mapDispatchToPropsFactories,l=o===void 0?bae:o,c=e.mergePropsFactories,d=c===void 0?Pae:c,u=e.selectorFactory,h=u===void 0?Dae:u;return function(p,y,v,g){g===void 0&&(g={});var b=g,j=b.pure,w=j===void 0?!0:j,C=b.areStatesEqual,E=C===void 0?Oae:C,N=b.areOwnPropsEqual,A=N===void 0?aN:N,_=b.areStatePropsEqual,k=_===void 0?aN:_,F=b.areMergedPropsEqual,I=F===void 0?aN:F,T=Qb(b,kae),R=oN(p,a,"mapStateToProps"),O=oN(y,l,"mapDispatchToProps"),z=oN(v,d,"mergeProps");return s(h,yt({methodName:"connect",getDisplayName:function(B){return"Connect("+B+")"},shouldHandleStateChanges:!!p,initMapStateToProps:R,initMapDispatchToProps:O,initMergeProps:z,pure:w,areStatesEqual:E,areOwnPropsEqual:A,areStatePropsEqual:k,areMergedPropsEqual:I},T))}}const Yz=Rae();Xie(sf.unstable_batchedUpdates);function Lae(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Xz(t,e){var r=S.useState(function(){return{inputs:e,result:t()}})[0],s=S.useRef(!0),i=S.useRef(r),a=s.current||!!(e&&i.current.inputs&&Lae(e,i.current.inputs)),o=a?i.current:{inputs:e,result:t()};return S.useEffect(function(){s.current=!1,i.current=o},[o]),o.result}function Mae(t,e){return Xz(function(){return t},e)}var nn=Xz,er=Mae,Fae="Invariant failed";function ef(t,e){throw new Error(Fae)}var nc=function(e){var r=e.top,s=e.right,i=e.bottom,a=e.left,o=s-a,l=i-r,c={top:r,right:s,bottom:i,left:a,width:o,height:l,x:a,y:r,center:{x:(s+a)/2,y:(i+r)/2}};return c},vT=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},dk=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},$ae=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},lN={top:0,right:0,bottom:0,left:0},xT=function(e){var r=e.borderBox,s=e.margin,i=s===void 0?lN:s,a=e.border,o=a===void 0?lN:a,l=e.padding,c=l===void 0?lN:l,d=nc(vT(r,i)),u=nc(dk(r,o)),h=nc(dk(u,c));return{marginBox:d,borderBox:nc(r),paddingBox:u,contentBox:h,margin:i,border:o,padding:c}},ul=function(e){var r=e.slice(0,-2),s=e.slice(-2);if(s!=="px")return 0;var i=Number(r);return isNaN(i)&&ef(),i},Bae=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Jb=function(e,r){var s=e.borderBox,i=e.border,a=e.margin,o=e.padding,l=$ae(s,r);return xT({borderBox:l,border:i,margin:a,padding:o})},e1=function(e,r){return r===void 0&&(r=Bae()),Jb(e,r)},Zz=function(e,r){var s={top:ul(r.marginTop),right:ul(r.marginRight),bottom:ul(r.marginBottom),left:ul(r.marginLeft)},i={top:ul(r.paddingTop),right:ul(r.paddingRight),bottom:ul(r.paddingBottom),left:ul(r.paddingLeft)},a={top:ul(r.borderTopWidth),right:ul(r.borderRightWidth),bottom:ul(r.borderBottomWidth),left:ul(r.borderLeftWidth)};return xT({borderBox:e,margin:s,padding:i,border:a})},Qz=function(e){var r=e.getBoundingClientRect(),s=window.getComputedStyle(e);return Zz(r,s)},uk=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function zae(t,e){return!!(t===e||uk(t)&&uk(e))}function qae(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!zae(t[r],e[r]))return!1;return!0}function Ci(t,e){e===void 0&&(e=qae);var r,s=[],i,a=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return a&&r===this&&e(l,s)||(i=t.apply(this,l),a=!0,r=this,s=l),i}return o}var qx=function(e){var r=[],s=null,i=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];r=l,!s&&(s=requestAnimationFrame(function(){s=null,e.apply(void 0,r)}))};return i.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},i};function Jz(t,e){}Jz.bind(null,"warn");Jz.bind(null,"error");function qh(){}function Uae(t,e){return yt({},t,{},e)}function yl(t,e,r){var s=e.map(function(i){var a=Uae(r,i.options);return t.addEventListener(i.eventName,i.fn,a),function(){t.removeEventListener(i.eventName,i.fn,a)}});return function(){s.forEach(function(a){a()})}}var Vae="Invariant failed";function t1(t){this.message=t}t1.prototype.toString=function(){return this.message};function At(t,e){throw new t1(Vae)}var Hae=function(t){zz(e,t);function e(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return s=t.call.apply(t,[this].concat(a))||this,s.callbacks=null,s.unbind=qh,s.onWindowError=function(l){var c=s.getCallbacks();c.isDragging()&&c.tryAbort();var d=l.error;d instanceof t1&&l.preventDefault()},s.getCallbacks=function(){if(!s.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return s.callbacks},s.setCallbacks=function(l){s.callbacks=l},s}var r=e.prototype;return r.componentDidMount=function(){this.unbind=yl(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(i){if(i instanceof t1){this.setState({});return}throw i},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(be.Component),Wae=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,r1=function(e){return e+1},Gae=function(e){return`
  You have lifted an item in position `+r1(e.source.index)+`
`},eq=function(e,r){var s=e.droppableId===r.droppableId,i=r1(e.index),a=r1(r.index);return s?`
      You have moved the item from position `+i+`
      to position `+a+`
    `:`
    You have moved the item from position `+i+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},tq=function(e,r,s){var i=r.droppableId===s.droppableId;return i?`
      The item `+e+`
      has been combined with `+s.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+s.draggableId+`
      in list `+s.droppableId+`
    `},Kae=function(e){var r=e.destination;if(r)return eq(e.source,r);var s=e.combine;return s?tq(e.draggableId,e.source,s):"You are over an area that cannot be dropped on"},hk=function(e){return`
  The item has returned to its starting position
  of `+r1(e.index)+`
`},Yae=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+hk(e.source)+`
    `;var r=e.destination,s=e.combine;return r?`
      You have dropped the item.
      `+eq(e.source,r)+`
    `:s?`
      You have dropped the item.
      `+tq(e.draggableId,e.source,s)+`
    `:`
    The item has been dropped while not over a drop area.
    `+hk(e.source)+`
  `},Fb={dragHandleUsageInstructions:Wae,onDragStart:Gae,onDragUpdate:Kae,onDragEnd:Yae},Pi={x:0,y:0},qi=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Fo=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},Uh=function(e,r){return e.x===r.x&&e.y===r.y},nv=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},km=function(e,r,s){var i;return s===void 0&&(s=0),i={},i[e]=r,i[e==="x"?"y":"x"]=s,i},Ux=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},fk=function(e,r){return Math.min.apply(Math,r.map(function(s){return Ux(e,s)}))},rq=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},Xae=function(t,e){var r=nc({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},Y0=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},mk=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Zae={top:0,right:0,bottom:0,left:0},Qae=function(e,r){return r?Y0(e,r.scroll.diff.displacement):e},Jae=function(e,r,s){if(s&&s.increasedBy){var i;return yt({},e,(i={},i[r.end]=e[r.end]+s.increasedBy[r.line],i))}return e},eoe=function(e,r){return r&&r.shouldClipSubject?Xae(r.pageMarginBox,e):nc(e)},xg=function(t){var e=t.page,r=t.withPlaceholder,s=t.axis,i=t.frame,a=Qae(e.marginBox,i),o=Jae(a,s,r),l=eoe(o,i);return{page:e,withPlaceholder:r,active:l}},yT=function(t,e){t.frame||At();var r=t.frame,s=Fo(e,r.scroll.initial),i=nv(s),a=yt({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:s,displacement:i},max:r.scroll.max}}),o=xg({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=yt({},t,{frame:a,subject:o});return l};function n1(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function bT(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function uf(t,e){if(t.find)return t.find(e);var r=bT(t,e);if(r!==-1)return t[r]}function nq(t){return Array.prototype.slice.call(t)}var sq=Ci(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),iq=Ci(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),Fj=Ci(function(t){return n1(t)}),toe=Ci(function(t){return n1(t)}),sv=Ci(function(t,e){var r=toe(e).filter(function(s){return t===s.descriptor.droppableId}).sort(function(s,i){return s.descriptor.index-i.descriptor.index});return r});function jT(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function $j(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Bj=Ci(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),roe=function(t){var e=t.isMovingForward,r=t.draggable,s=t.destination,i=t.insideDestination,a=t.previousImpact;if(!s.isCombineEnabled)return null;var o=jT(a);if(!o)return null;function l(v){var g={type:"COMBINE",combine:{draggableId:v,droppableId:s.descriptor.id}};return yt({},a,{at:g})}var c=a.displaced.all,d=c.length?c[0]:null;if(e)return d?l(d):null;var u=Bj(r,i);if(!d){if(!u.length)return null;var h=u[u.length-1];return l(h.descriptor.id)}var f=bT(u,function(v){return v.descriptor.id===d});f===-1&&At();var p=f-1;if(p<0)return null;var y=u[p];return l(y.descriptor.id)},iv=function(t,e){return t.descriptor.droppableId===e.descriptor.id},aq={point:Pi,value:0},Vx={invisible:{},visible:{},all:[]},noe={displaced:Vx,displacedBy:aq,at:null},jl=function(t,e){return function(r){return t<=r&&r<=e}},oq=function(t){var e=jl(t.top,t.bottom),r=jl(t.left,t.right);return function(s){var i=e(s.top)&&e(s.bottom)&&r(s.left)&&r(s.right);if(i)return!0;var a=e(s.top)||e(s.bottom),o=r(s.left)||r(s.right),l=a&&o;if(l)return!0;var c=s.top<t.top&&s.bottom>t.bottom,d=s.left<t.left&&s.right>t.right,u=c&&d;if(u)return!0;var h=c&&o||d&&a;return h}},soe=function(t){var e=jl(t.top,t.bottom),r=jl(t.left,t.right);return function(s){var i=e(s.top)&&e(s.bottom)&&r(s.left)&&r(s.right);return i}},wT={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},lq={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},ioe=function(t){return function(e){var r=jl(e.top,e.bottom),s=jl(e.left,e.right);return function(i){return t===wT?r(i.top)&&r(i.bottom):s(i.left)&&s(i.right)}}},aoe=function(e,r){var s=r.frame?r.frame.scroll.diff.displacement:Pi;return Y0(e,s)},ooe=function(e,r,s){return r.subject.active?s(r.subject.active)(e):!1},loe=function(e,r,s){return s(r)(e)},NT=function(e){var r=e.target,s=e.destination,i=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?aoe(r,s):r;return ooe(l,s,o)&&loe(l,i,o)},coe=function(e){return NT(yt({},e,{isVisibleThroughFrameFn:oq}))},cq=function(e){return NT(yt({},e,{isVisibleThroughFrameFn:soe}))},doe=function(e){return NT(yt({},e,{isVisibleThroughFrameFn:ioe(e.destination.axis)}))},uoe=function(e,r,s){if(typeof s=="boolean")return s;if(!r)return!0;var i=r.invisible,a=r.visible;if(i[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function hoe(t,e){var r=t.page.marginBox,s={top:e.point.y,right:0,bottom:0,left:e.point.x};return nc(vT(r,s))}function Hx(t){var e=t.afterDragging,r=t.destination,s=t.displacedBy,i=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(c,d){var u=hoe(d,s),h=d.descriptor.id;c.all.push(h);var f=coe({target:u,destination:r,viewport:i,withDroppableDisplacement:!0});if(!f)return c.invisible[d.descriptor.id]=!0,c;var p=uoe(h,o,a),y={draggableId:h,shouldAnimate:p};return c.visible[h]=y,c},{all:[],visible:{},invisible:{}})}function foe(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function pk(t){var e=t.insideDestination,r=t.inHomeList,s=t.displacedBy,i=t.destination,a=foe(e,{inHomeList:r});return{displaced:Vx,displacedBy:s,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function s1(t){var e=t.draggable,r=t.insideDestination,s=t.destination,i=t.viewport,a=t.displacedBy,o=t.last,l=t.index,c=t.forceShouldAnimate,d=iv(e,s);if(l==null)return pk({insideDestination:r,inHomeList:d,displacedBy:a,destination:s});var u=uf(r,function(v){return v.descriptor.index===l});if(!u)return pk({insideDestination:r,inHomeList:d,displacedBy:a,destination:s});var h=Bj(e,r),f=r.indexOf(u),p=h.slice(f),y=Hx({afterDragging:p,destination:s,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:c});return{displaced:y,displacedBy:a,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function tf(t,e){return!!e.effected[t]}var moe=function(t){var e=t.isMovingForward,r=t.destination,s=t.draggables,i=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=i.draggableId,l=s[o],c=l.descriptor.index,d=tf(o,a);return d?e?c:c-1:e?c+1:c},poe=function(t){var e=t.isMovingForward,r=t.isInHomeList,s=t.insideDestination,i=t.location;if(!s.length)return null;var a=i.index,o=e?a+1:a-1,l=s[0].descriptor.index,c=s[s.length-1].descriptor.index,d=r?c:c+1;return o<l||o>d?null:o},goe=function(t){var e=t.isMovingForward,r=t.isInHomeList,s=t.draggable,i=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,c=t.viewport,d=t.afterCritical,u=l.at;if(u||At(),u.type==="REORDER"){var h=poe({isMovingForward:e,isInHomeList:r,location:u.destination,insideDestination:o});return h==null?null:s1({draggable:s,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})}var f=moe({isMovingForward:e,destination:a,displaced:l.displaced,draggables:i,combine:u.combine,afterCritical:d});return f==null?null:s1({draggable:s,insideDestination:o,destination:a,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:f})},voe=function(t){var e=t.displaced,r=t.afterCritical,s=t.combineWith,i=t.displacedBy,a=!!(e.visible[s]||e.invisible[s]);return tf(s,r)?a?Pi:nv(i.point):a?i.point:Pi},xoe=function(t){var e=t.afterCritical,r=t.impact,s=t.draggables,i=$j(r);i||At();var a=i.draggableId,o=s[a].page.borderBox.center,l=voe({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return qi(o,l)},dq=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},yoe=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},ST=function(e,r,s){return r[e.crossAxisStart]+s.margin[e.crossAxisStart]+s.borderBox[e.crossAxisSize]/2},gk=function(e){var r=e.axis,s=e.moveRelativeTo,i=e.isMoving;return km(r.line,s.marginBox[r.end]+dq(r,i),ST(r,s.marginBox,i))},vk=function(e){var r=e.axis,s=e.moveRelativeTo,i=e.isMoving;return km(r.line,s.marginBox[r.start]-yoe(r,i),ST(r,s.marginBox,i))},boe=function(e){var r=e.axis,s=e.moveInto,i=e.isMoving;return km(r.line,s.contentBox[r.start]+dq(r,i),ST(r,s.contentBox,i))},joe=function(t){var e=t.impact,r=t.draggable,s=t.draggables,i=t.droppable,a=t.afterCritical,o=sv(i.descriptor.id,s),l=r.page,c=i.axis;if(!o.length)return boe({axis:c,moveInto:i.page,isMoving:l});var d=e.displaced,u=e.displacedBy,h=d.all[0];if(h){var f=s[h];if(tf(h,a))return vk({axis:c,moveRelativeTo:f.page,isMoving:l});var p=Jb(f.page,u.point);return vk({axis:c,moveRelativeTo:p,isMoving:l})}var y=o[o.length-1];if(y.descriptor.id===r.descriptor.id)return l.borderBox.center;if(tf(y.descriptor.id,a)){var v=Jb(y.page,nv(a.displacedBy.point));return gk({axis:c,moveRelativeTo:v,isMoving:l})}return gk({axis:c,moveRelativeTo:y.page,isMoving:l})},bE=function(t,e){var r=t.frame;return r?qi(e,r.scroll.diff.displacement):e},woe=function(e){var r=e.impact,s=e.draggable,i=e.droppable,a=e.draggables,o=e.afterCritical,l=s.page.borderBox.center,c=r.at;return!i||!c?l:c.type==="REORDER"?joe({impact:r,draggable:s,draggables:a,droppable:i,afterCritical:o}):xoe({impact:r,draggables:a,afterCritical:o})},zj=function(t){var e=woe(t),r=t.droppable,s=r?bE(r,e):e;return s},uq=function(t,e){var r=Fo(e,t.scroll.initial),s=nv(r),i=nc({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:i,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:s}}};return a};function xk(t,e){return t.map(function(r){return e[r]})}function Noe(t,e){for(var r=0;r<e.length;r++){var s=e[r].visible[t];if(s)return s}return null}var Soe=function(t){var e=t.impact,r=t.viewport,s=t.destination,i=t.draggables,a=t.maxScrollChange,o=uq(r,qi(r.scroll.current,a)),l=s.frame?yT(s,qi(s.frame.scroll.current,a)):s,c=e.displaced,d=Hx({afterDragging:xk(c.all,i),destination:s,displacedBy:e.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),u=Hx({afterDragging:xk(c.all,i),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),h={},f={},p=[c,d,u];c.all.forEach(function(v){var g=Noe(v,p);if(g){f[v]=g;return}h[v]=!0});var y=yt({},e,{displaced:{all:c.all,invisible:h,visible:f}});return y},Aoe=function(t,e){return qi(t.scroll.diff.displacement,e)},AT=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,s=t.viewport,i=Aoe(s,e),a=Fo(i,r.page.borderBox.center);return qi(r.client.borderBox.center,a)},hq=function(t){var e=t.draggable,r=t.destination,s=t.newPageBorderBoxCenter,i=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,c=Fo(s,e.page.borderBox.center),d=Y0(e.page.borderBox,c),u={target:d,destination:r,withDroppableDisplacement:a,viewport:i};return l?doe(u):cq(u)},Coe=function(t){var e=t.isMovingForward,r=t.draggable,s=t.destination,i=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,c=t.previousClientSelection,d=t.afterCritical;if(!s.isEnabled)return null;var u=sv(s.descriptor.id,i),h=iv(r,s),f=roe({isMovingForward:e,draggable:r,destination:s,insideDestination:u,previousImpact:a})||goe({isMovingForward:e,isInHomeList:h,draggable:r,draggables:i,destination:s,insideDestination:u,previousImpact:a,viewport:o,afterCritical:d});if(!f)return null;var p=zj({impact:f,draggable:r,droppable:s,draggables:i,afterCritical:d}),y=hq({draggable:r,destination:s,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(y){var v=AT({pageBorderBoxCenter:p,draggable:r,viewport:o});return{clientSelection:v,impact:f,scrollJumpRequest:null}}var g=Fo(p,l),b=Soe({impact:f,viewport:o,destination:s,draggables:i,maxScrollChange:g});return{clientSelection:c,impact:b,scrollJumpRequest:g}},Ta=function(e){var r=e.subject.active;return r||At(),r},Eoe=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,s=t.source,i=t.droppables,a=t.viewport,o=s.subject.active;if(!o)return null;var l=s.axis,c=jl(o[l.start],o[l.end]),d=Fj(i).filter(function(h){return h!==s}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return oq(a.frame)(Ta(h))}).filter(function(h){var f=Ta(h);return e?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(h){var f=Ta(h),p=jl(f[l.start],f[l.end]);return c(f[l.start])||c(f[l.end])||p(o[l.start])||p(o[l.end])}).sort(function(h,f){var p=Ta(h)[l.crossAxisStart],y=Ta(f)[l.crossAxisStart];return e?p-y:y-p}).filter(function(h,f,p){return Ta(h)[l.crossAxisStart]===Ta(p[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var u=d.filter(function(h){var f=jl(Ta(h)[l.start],Ta(h)[l.end]);return f(r[l.line])});return u.length===1?u[0]:u.length>1?u.sort(function(h,f){return Ta(h)[l.start]-Ta(f)[l.start]})[0]:d.sort(function(h,f){var p=fk(r,mk(Ta(h))),y=fk(r,mk(Ta(f)));return p!==y?p-y:Ta(h)[l.start]-Ta(f)[l.start]})[0]},yk=function(e,r){var s=e.page.borderBox.center;return tf(e.descriptor.id,r)?Fo(s,r.displacedBy.point):s},Poe=function(e,r){var s=e.page.borderBox;return tf(e.descriptor.id,r)?Y0(s,nv(r.displacedBy.point)):s},Toe=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,s=t.destination,i=t.insideDestination,a=t.afterCritical,o=i.filter(function(l){return cq({target:Poe(l,a),destination:s,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,c){var d=Ux(e,bE(s,yk(l,a))),u=Ux(e,bE(s,yk(c,a)));return d<u?-1:u<d?1:l.descriptor.index-c.descriptor.index});return o[0]||null},X0=Ci(function(e,r){var s=r[e.line];return{value:s,point:km(e.line,s)}}),_oe=function(e,r,s){var i=e.axis;if(e.descriptor.mode==="virtual")return km(i.line,r[i.line]);var a=e.subject.page.contentBox[i.size],o=sv(e.descriptor.id,s),l=o.reduce(function(u,h){return u+h.client.marginBox[i.size]},0),c=l+r[i.line],d=c-a;return d<=0?null:km(i.line,d)},fq=function(e,r){return yt({},e,{scroll:yt({},e.scroll,{max:r})})},mq=function(e,r,s){var i=e.frame;iv(r,e)&&At(),e.subject.withPlaceholder&&At();var a=X0(e.axis,r.displaceBy).point,o=_oe(e,a,s),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!i){var c=xg({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return yt({},e,{subject:c})}var d=o?qi(i.scroll.max,o):i.scroll.max,u=fq(i,d),h=xg({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:u});return yt({},e,{subject:h,frame:u})},Ioe=function(e){var r=e.subject.withPlaceholder;r||At();var s=e.frame;if(!s){var i=xg({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return yt({},e,{subject:i})}var a=r.oldFrameMaxScroll;a||At();var o=fq(s,a),l=xg({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return yt({},e,{subject:l,frame:o})},Doe=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,s=t.insideDestination,i=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,c=t.afterCritical;if(!r){if(s.length)return null;var d={displaced:Vx,displacedBy:aq,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=zj({impact:d,draggable:i,droppable:o,draggables:a,afterCritical:c}),h=iv(i,o)?o:mq(o,i,a),f=hq({draggable:i,destination:h,newPageBorderBoxCenter:u,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?d:null}var p=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],y=function(){var g=r.descriptor.index;return r.descriptor.id===i.descriptor.id||p?g:g+1}(),v=X0(o.axis,i.displaceBy);return s1({draggable:i,insideDestination:s,destination:o,viewport:l,displacedBy:v,last:Vx,index:y})},koe=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,s=t.draggable,i=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,c=t.afterCritical,d=Eoe({isMovingForward:e,pageBorderBoxCenter:r,source:i,droppables:o,viewport:l});if(!d)return null;var u=sv(d.descriptor.id,a),h=Toe({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:u,afterCritical:c}),f=Doe({previousPageBorderBoxCenter:r,destination:d,draggable:s,draggables:a,moveRelativeTo:h,insideDestination:u,viewport:l,afterCritical:c});if(!f)return null;var p=zj({impact:f,draggable:s,droppable:d,draggables:a,afterCritical:c}),y=AT({pageBorderBoxCenter:p,draggable:s,viewport:l});return{clientSelection:y,impact:f,scrollJumpRequest:null}},Uo=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},Ooe=function(e,r){var s=Uo(e);return s?r[s]:null},Roe=function(t){var e=t.state,r=t.type,s=Ooe(e.impact,e.dimensions.droppables),i=!!s,a=e.dimensions.droppables[e.critical.droppable.id],o=s||a,l=o.axis.direction,c=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!i)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,f=e.dimensions,p=f.draggables,y=f.droppables;return c?Coe({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,destination:o,draggables:p,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):koe({isMovingForward:d,previousPageBorderBoxCenter:h,draggable:u,isOver:o,draggables:p,droppables:y,viewport:e.viewport,afterCritical:e.afterCritical})};function em(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function pq(t){var e=jl(t.top,t.bottom),r=jl(t.left,t.right);return function(i){return e(i.y)&&r(i.x)}}function Loe(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Moe(t){var e=t.pageBorderBox,r=t.draggable,s=t.candidates,i=r.page.borderBox.center,a=s.map(function(o){var l=o.axis,c=km(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Ux(i,c)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function Foe(t){var e=t.pageBorderBox,r=t.draggable,s=t.droppables,i=Fj(s).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!Loe(e,o))return!1;if(pq(o)(e.center))return!0;var l=a.axis,c=o.center[l.crossAxisLine],d=e[l.crossAxisStart],u=e[l.crossAxisEnd],h=jl(o[l.crossAxisStart],o[l.crossAxisEnd]),f=h(d),p=h(u);return!f&&!p?!0:f?d<c:u>c});return i.length?i.length===1?i[0].descriptor.id:Moe({pageBorderBox:e,draggable:r,candidates:i}):null}var gq=function(e,r){return nc(Y0(e,r))},$oe=function(t,e){var r=t.frame;return r?gq(e,r.scroll.diff.value):e};function vq(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function Boe(t){var e=t.draggable,r=t.closest,s=t.inHomeList;return r?s&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var zoe=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,s=t.destination,i=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,c=s.axis,d=X0(s.axis,r.displaceBy),u=d.value,h=e[c.start],f=e[c.end],p=Bj(r,i),y=uf(p,function(g){var b=g.descriptor.id,j=g.page.borderBox.center[c.line],w=tf(b,l),C=vq({displaced:a,id:b});return w?C?f<=j:h<j-u:C?f<=j+u:h<j}),v=Boe({draggable:r,closest:y,inHomeList:iv(r,s)});return s1({draggable:r,insideDestination:i,destination:s,viewport:o,last:a,displacedBy:d,index:v})},qoe=4,Uoe=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,s=t.previousImpact,i=t.destination,a=t.insideDestination,o=t.afterCritical;if(!i.isCombineEnabled)return null;var l=i.axis,c=X0(i.axis,e.displaceBy),d=c.value,u=r[l.start],h=r[l.end],f=Bj(e,a),p=uf(f,function(v){var g=v.descriptor.id,b=v.page.borderBox,j=b[l.size],w=j/qoe,C=tf(g,o),E=vq({displaced:s.displaced,id:g});return C?E?h>b[l.start]+w&&h<b[l.end]-w:u>b[l.start]-d+w&&u<b[l.end]-d-w:E?h>b[l.start]+d+w&&h<b[l.end]+d-w:u>b[l.start]+w&&u<b[l.end]-w});if(!p)return null;var y={displacedBy:c,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:i.descriptor.id}}};return y},xq=function(t){var e=t.pageOffset,r=t.draggable,s=t.draggables,i=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,c=gq(r.page.borderBox,e),d=Foe({pageBorderBox:c,draggable:r,droppables:i});if(!d)return noe;var u=i[d],h=sv(u.descriptor.id,s),f=$oe(u,c);return Uoe({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:a,destination:u,insideDestination:h,afterCritical:l})||zoe({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:u,insideDestination:h,last:a.displaced,viewport:o,afterCritical:l})},CT=function(t,e){var r;return yt({},t,(r={},r[e.descriptor.id]=e,r))},Voe=function(e){var r=e.previousImpact,s=e.impact,i=e.droppables,a=Uo(r),o=Uo(s);if(!a||a===o)return i;var l=i[a];if(!l.subject.withPlaceholder)return i;var c=Ioe(l);return CT(i,c)},Hoe=function(t){var e=t.draggable,r=t.draggables,s=t.droppables,i=t.previousImpact,a=t.impact,o=Voe({previousImpact:i,impact:a,droppables:s}),l=Uo(a);if(!l)return o;var c=s[l];if(iv(e,c)||c.subject.withPlaceholder)return o;var d=mq(c,e,r);return CT(o,d)},vx=function(t){var e=t.state,r=t.clientSelection,s=t.dimensions,i=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=i||e.viewport,c=s||e.dimensions,d=r||e.current.client.selection,u=Fo(d,e.initial.client.selection),h={offset:u,selection:d,borderBoxCenter:qi(e.initial.client.borderBoxCenter,u)},f={selection:qi(h.selection,l.scroll.current),borderBoxCenter:qi(h.borderBoxCenter,l.scroll.current),offset:qi(h.offset,l.scroll.diff.value)},p={client:h,page:f};if(e.phase==="COLLECTING")return yt({phase:"COLLECTING"},e,{dimensions:c,viewport:l,current:p});var y=c.draggables[e.critical.draggable.id],v=a||xq({pageOffset:f.offset,draggable:y,draggables:c.draggables,droppables:c.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),g=Hoe({draggable:y,impact:v,previousImpact:e.impact,draggables:c.draggables,droppables:c.droppables}),b=yt({},e,{current:p,dimensions:{draggables:c.draggables,droppables:g},impact:v,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return b};function Woe(t,e){return t.map(function(r){return e[r]})}var yq=function(t){var e=t.impact,r=t.viewport,s=t.draggables,i=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=Woe(o.all,s),c=Hx({afterDragging:l,destination:i,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return yt({},e,{displaced:c})},bq=function(t){var e=t.impact,r=t.draggable,s=t.droppable,i=t.draggables,a=t.viewport,o=t.afterCritical,l=zj({impact:e,draggable:r,draggables:i,droppable:s,afterCritical:o});return AT({pageBorderBoxCenter:l,draggable:r,viewport:a})},jq=function(t){var e=t.state,r=t.dimensions,s=t.viewport;e.movementMode!=="SNAP"&&At();var i=e.impact,a=s||e.viewport,o=r||e.dimensions,l=o.draggables,c=o.droppables,d=l[e.critical.draggable.id],u=Uo(i);u||At();var h=c[u],f=yq({impact:i,viewport:a,destination:h,draggables:l}),p=bq({impact:f,draggable:d,droppable:h,draggables:l,viewport:a,afterCritical:e.afterCritical});return vx({impact:f,clientSelection:p,state:e,dimensions:o,viewport:a})},Goe=function(t){return{index:t.index,droppableId:t.droppableId}},wq=function(t){var e=t.draggable,r=t.home,s=t.draggables,i=t.viewport,a=X0(r.axis,e.displaceBy),o=sv(r.descriptor.id,s),l=o.indexOf(e);l===-1&&At();var c=o.slice(l+1),d=c.reduce(function(p,y){return p[y.descriptor.id]=!0,p},{}),u={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:d},h=Hx({afterDragging:c,destination:r,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:h,displacedBy:a,at:{type:"REORDER",destination:Goe(e.descriptor)}};return{impact:f,afterCritical:u}},Koe=function(t,e){return{draggables:t.draggables,droppables:CT(t.droppables,e)}},Yoe=function(t){var e=t.draggable,r=t.offset,s=t.initialWindowScroll,i=Jb(e.client,r),a=e1(i,s),o=yt({},e,{placeholder:yt({},e.placeholder,{client:i}),client:i,page:a});return o},Xoe=function(t){var e=t.frame;return e||At(),e},Zoe=function(t){var e=t.additions,r=t.updatedDroppables,s=t.viewport,i=s.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],c=Xoe(l),d=c.scroll.diff.value,u=qi(i,d),h=Yoe({draggable:a,offset:u,initialWindowScroll:s.scroll.initial});return h})},Qoe=function(t){var e=t.state,r=t.published,s=r.modified.map(function(w){var C=e.dimensions.droppables[w.droppableId],E=yT(C,w.scroll);return E}),i=yt({},e.dimensions.droppables,{},sq(s)),a=iq(Zoe({additions:r.additions,updatedDroppables:i,viewport:e.viewport})),o=yt({},e.dimensions.draggables,{},a);r.removals.forEach(function(w){delete o[w]});var l={droppables:i,draggables:o},c=Uo(e.impact),d=c?l.droppables[c]:null,u=l.draggables[e.critical.draggable.id],h=l.droppables[e.critical.droppable.id],f=wq({draggable:u,home:h,draggables:o,viewport:e.viewport}),p=f.impact,y=f.afterCritical,v=d&&d.isCombineEnabled?e.impact:p,g=xq({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:e.viewport,afterCritical:y}),b=yt({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:g,onLiftImpact:p,dimensions:l,afterCritical:y,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return b;var j=yt({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return j},jE=function(e){return e.movementMode==="SNAP"},cN=function(e,r,s){var i=Koe(e.dimensions,r);return!jE(e)||s?vx({state:e,dimensions:i}):jq({state:e,dimensions:i})};function dN(t){return t.isDragging&&t.movementMode==="SNAP"?yt({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var bk={phase:"IDLE",completed:null,shouldFlush:!1},Joe=function(t,e){if(t===void 0&&(t=bk),e.type==="FLUSH")return yt({},bk,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&At();var r=e.payload,s=r.critical,i=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,c=o.draggables[s.draggable.id],d=o.droppables[s.droppable.id],u={selection:i,borderBoxCenter:c.client.borderBox.center,offset:Pi},h={client:u,page:{selection:qi(u.selection,a.scroll.initial),borderBoxCenter:qi(u.selection,a.scroll.initial),offset:qi(u.selection,a.scroll.diff.value)}},f=Fj(o.droppables).every(function(Pe){return!Pe.isFixedOnPage}),p=wq({draggable:c,home:d,draggables:o.draggables,viewport:a}),y=p.impact,v=p.afterCritical,g={phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:f,impact:y,afterCritical:v,onLiftImpact:y,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return g}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&At();var b=yt({phase:"COLLECTING"},t,{phase:"COLLECTING"});return b}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||At(),Qoe({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;em(t)||At();var j=e.payload.client;return Uh(j,t.current.client.selection)?t:vx({state:t,clientSelection:j,impact:jE(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return dN(t);em(t)||At();var w=e.payload,C=w.id,E=w.newScroll,N=t.dimensions.droppables[C];if(!N)return t;var A=yT(N,E);return cN(t,A,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;em(t)||At();var _=e.payload,k=_.id,F=_.isEnabled,I=t.dimensions.droppables[k];I||At(),I.isEnabled===F&&At();var T=yt({},I,{isEnabled:F});return cN(t,T,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;em(t)||At();var R=e.payload,O=R.id,z=R.isCombineEnabled,q=t.dimensions.droppables[O];q||At(),q.isCombineEnabled===z&&At();var B=yt({},q,{isCombineEnabled:z});return cN(t,B,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;em(t)||At(),t.isWindowScrollAllowed||At();var K=e.payload.newScroll;if(Uh(t.viewport.scroll.current,K))return dN(t);var Y=uq(t.viewport,K);return jE(t)?jq({state:t,viewport:Y}):vx({state:t,viewport:Y})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!em(t))return t;var J=e.payload.maxScroll;if(Uh(J,t.viewport.scroll.max))return t;var H=yt({},t.viewport,{scroll:yt({},t.viewport.scroll,{max:J})});return yt({phase:"DRAGGING"},t,{viewport:H})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&At();var $=Roe({state:t,type:e.type});return $?vx({state:t,impact:$.impact,clientSelection:$.clientSelection,scrollJumpRequest:$.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var W=e.payload.reason;t.phase!=="COLLECTING"&&At();var te=yt({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:W});return te}if(e.type==="DROP_ANIMATE"){var ee=e.payload,ne=ee.completed,ae=ee.dropDuration,ve=ee.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||At();var xe={phase:"DROP_ANIMATING",completed:ne,dropDuration:ae,newHomeClientOffset:ve,dimensions:t.dimensions};return xe}if(e.type==="DROP_COMPLETE"){var Se=e.payload.completed;return{phase:"IDLE",completed:Se,shouldFlush:!1}}return t},ele=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},tle=function(e){return{type:"LIFT",payload:e}},rle=function(e){return{type:"INITIAL_PUBLISH",payload:e}},nle=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},sle=function(){return{type:"COLLECTION_STARTING",payload:null}},ile=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},ale=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},ole=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Nq=function(e){return{type:"MOVE",payload:e}},lle=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},cle=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},dle=function(){return{type:"MOVE_UP",payload:null}},ule=function(){return{type:"MOVE_DOWN",payload:null}},hle=function(){return{type:"MOVE_RIGHT",payload:null}},fle=function(){return{type:"MOVE_LEFT",payload:null}},ET=function(){return{type:"FLUSH",payload:null}},mle=function(e){return{type:"DROP_ANIMATE",payload:e}},PT=function(e){return{type:"DROP_COMPLETE",payload:e}},Sq=function(e){return{type:"DROP",payload:e}},ple=function(e){return{type:"DROP_PENDING",payload:e}},Aq=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},gle=function(t){return function(e){var r=e.getState,s=e.dispatch;return function(i){return function(a){if(a.type!=="LIFT"){i(a);return}var o=a.payload,l=o.id,c=o.clientSelection,d=o.movementMode,u=r();u.phase==="DROP_ANIMATING"&&s(PT({completed:u.completed})),r().phase!=="IDLE"&&At(),s(ET()),s(ele({draggableId:l,movementMode:d}));var h={shouldPublishImmediately:d==="SNAP"},f={draggableId:l,scrollOptions:h},p=t.startPublishing(f),y=p.critical,v=p.dimensions,g=p.viewport;s(rle({critical:y,dimensions:v,clientSelection:c,movementMode:d,viewport:g}))}}}},vle=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},TT={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wx={opacity:{drop:0,combining:.7},scale:{drop:.75}},_T={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Yf=_T.outOfTheWay+"s "+TT.outOfTheWay,xx={fluid:"opacity "+Yf,snap:"transform "+Yf+", opacity "+Yf,drop:function(e){var r=e+"s "+TT.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Yf,placeholder:"height "+Yf+", width "+Yf+", margin "+Yf},jk=function(e){return Uh(e,Pi)?null:"translate("+e.x+"px, "+e.y+"px)"},wE={moveTo:jk,drop:function(e,r){var s=jk(e);return s?r?s+" scale("+Wx.scale.drop+")":s:null}},NE=_T.minDropTime,Cq=_T.maxDropTime,xle=Cq-NE,wk=1500,yle=.6,ble=function(t){var e=t.current,r=t.destination,s=t.reason,i=Ux(e,r);if(i<=0)return NE;if(i>=wk)return Cq;var a=i/wk,o=NE+xle*a,l=s==="CANCEL"?o*yle:o;return Number(l.toFixed(2))},jle=function(t){var e=t.impact,r=t.draggable,s=t.dimensions,i=t.viewport,a=t.afterCritical,o=s.draggables,l=s.droppables,c=Uo(e),d=c?l[c]:null,u=l[r.descriptor.droppableId],h=bq({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:d||u,viewport:i}),f=Fo(h,r.client.borderBox.center);return f},wle=function(t){var e=t.draggables,r=t.reason,s=t.lastImpact,i=t.home,a=t.viewport,o=t.onLiftImpact;if(!s.at||r!=="DROP"){var l=yq({draggables:e,impact:o,destination:i,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(s.at.type==="REORDER")return{impact:s,didDropInsideDroppable:!0};var c=yt({},s,{displaced:Vx});return{impact:c,didDropInsideDroppable:!0}},Nle=function(t){var e=t.getState,r=t.dispatch;return function(s){return function(i){if(i.type!=="DROP"){s(i);return}var a=e(),o=i.payload.reason;if(a.phase==="COLLECTING"){r(ple({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&At(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||At();var c=a.critical,d=a.dimensions,u=d.draggables[a.critical.draggable.id],h=wle({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=h.impact,p=h.didDropInsideDroppable,y=p?jT(f):null,v=p?$j(f):null,g={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:o,mode:a.movementMode,destination:y,combine:v},j=jle({impact:f,draggable:u,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),w={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:f},C=!Uh(a.current.client.offset,j)||!!b.combine;if(!C){r(PT({completed:w}));return}var E=ble({current:a.current.client.offset,destination:j,reason:o}),N={newHomeClientOffset:j,dropDuration:E,completed:w};r(mle(N))}}}},Eq=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Sle(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function Ale(t){var e=t.onWindowScroll;function r(){e(Eq())}var s=qx(r),i=Sle(s),a=qh;function o(){return a!==qh}function l(){o()&&At(),a=yl(window,[i])}function c(){o()||At(),s.cancel(),a(),a=qh}return{start:l,stop:c,isActive:o}}var Cle=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Ele=function(t){var e=Ale({onWindowScroll:function(s){t.dispatch(lle({newScroll:s}))}});return function(r){return function(s){!e.isActive()&&s.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&Cle(s)&&e.stop(),r(s)}}},Ple=function(t){var e=!1,r=!1,s=setTimeout(function(){r=!0}),i=function(o){e||r||(e=!0,t(o),clearTimeout(s))};return i.wasCalled=function(){return e},i},Tle=function(){var t=[],e=function(a){var o=bT(t,function(d){return d.timerId===a});o===-1&&At();var l=t.splice(o,1),c=l[0];c.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},s=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:s}},_le=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},Ile=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},Dle=function(e,r){if(e===r)return!0;var s=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,i=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return s&&i},Uv=function(e,r){r()},ib=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},uN=function(e,r,s,i){if(!e){s(i(r));return}var a=Ple(s),o={announce:a};e(r,o),a.wasCalled()||s(i(r))},kle=function(t,e){var r=Tle(),s=null,i=function(f,p){s&&At(),Uv("onBeforeCapture",function(){var y=t().onBeforeCapture;if(y){var v={draggableId:f,mode:p};y(v)}})},a=function(f,p){s&&At(),Uv("onBeforeDragStart",function(){var y=t().onBeforeDragStart;y&&y(ib(f,p))})},o=function(f,p){s&&At();var y=ib(f,p);s={mode:p,lastCritical:f,lastLocation:y.source,lastCombine:null},r.add(function(){Uv("onDragStart",function(){return uN(t().onDragStart,y,e,Fb.onDragStart)})})},l=function(f,p){var y=jT(p),v=$j(p);s||At();var g=!Dle(f,s.lastCritical);g&&(s.lastCritical=f);var b=!_le(s.lastLocation,y);b&&(s.lastLocation=y);var j=!Ile(s.lastCombine,v);if(j&&(s.lastCombine=v),!(!g&&!b&&!j)){var w=yt({},ib(f,s.mode),{combine:v,destination:y});r.add(function(){Uv("onDragUpdate",function(){return uN(t().onDragUpdate,w,e,Fb.onDragUpdate)})})}},c=function(){s||At(),r.flush()},d=function(f){s||At(),s=null,Uv("onDragEnd",function(){return uN(t().onDragEnd,f,e,Fb.onDragEnd)})},u=function(){if(s){var f=yt({},ib(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});d(f)}};return{beforeCapture:i,beforeStart:a,start:o,update:l,flush:c,drop:d,abort:u}},Ole=function(t,e){var r=kle(t,e);return function(s){return function(i){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),i(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),i(a),r.drop(l);return}if(i(a),a.type==="FLUSH"){r.abort();return}var c=s.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Rle=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var s=t.getState();s.phase!=="DROP_ANIMATING"&&At(),t.dispatch(PT({completed:s.completed}))}}},Lle=function(t){var e=null,r=null;function s(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(i){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&s(),i(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=t.getState();c.phase==="DROP_ANIMATING"&&t.dispatch(Aq())}};r=requestAnimationFrame(function(){r=null,e=yl(window,[o])})}}}},Mle=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},Fle=function(t){var e=!1;return function(){return function(r){return function(s){if(s.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(s.payload.critical.draggable.id),r(s),t.tryRestoreFocusRecorded();return}if(r(s),!!e){if(s.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(s.type==="DROP_COMPLETE"){e=!1;var i=s.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},$le=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Ble=function(t){return function(e){return function(r){return function(s){if($le(s)){t.stop(),r(s);return}if(s.type==="INITIAL_PUBLISH"){r(s);var i=e.getState();i.phase!=="DRAGGING"&&At(),t.start(i);return}r(s),t.scroll(e.getState())}}}},zle=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var s=t.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||t.dispatch(Sq({reason:s.reason})))}}}},qle=Uz,Ule=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,s=t.styleMarshal,i=t.getResponders,a=t.announce,o=t.autoScroller;return qz(Joe,qle(Vie(vle(s),Mle(e),gle(e),Nle,Rle,Lle,zle,Ble(o),Ele,Fle(r),Ole(i,a))))},hN=function(){return{additions:{},removals:{},modified:{}}};function Vle(t){var e=t.registry,r=t.callbacks,s=hN(),i=null,a=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var u=s,h=u.additions,f=u.removals,p=u.modified,y=Object.keys(h).map(function(b){return e.draggable.getById(b).getDimension(Pi)}).sort(function(b,j){return b.descriptor.index-j.descriptor.index}),v=Object.keys(p).map(function(b){var j=e.droppable.getById(b),w=j.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:w}}),g={additions:y,removals:Object.keys(f),modified:v};s=hN(),r.publish(g)}))},o=function(u){var h=u.descriptor.id;s.additions[h]=u,s.modified[u.descriptor.droppableId]=!0,s.removals[h]&&delete s.removals[h],a()},l=function(u){var h=u.descriptor;s.removals[h.id]=!0,s.modified[h.droppableId]=!0,s.additions[h.id]&&delete s.additions[h.id],a()},c=function(){i&&(cancelAnimationFrame(i),i=null,s=hN())};return{add:o,remove:l,stop:c}}var Pq=function(t){var e=t.scrollHeight,r=t.scrollWidth,s=t.height,i=t.width,a=Fo({x:r,y:e},{x:i,y:s}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},Tq=function(){var t=document.documentElement;return t||At(),t},_q=function(){var t=Tq(),e=Pq({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},Hle=function(){var t=Eq(),e=_q(),r=t.y,s=t.x,i=Tq(),a=i.clientWidth,o=i.clientHeight,l=s+a,c=r+o,d=nc({top:r,left:s,right:l,bottom:c}),u={frame:d,scroll:{initial:t,current:t,max:e,diff:{value:Pi,displacement:Pi}}};return u},Wle=function(t){var e=t.critical,r=t.scrollOptions,s=t.registry,i=Hle(),a=i.scroll.current,o=e.droppable,l=s.droppable.getAllByType(o.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,r)}),c=s.draggable.getAllByType(e.draggable.type).map(function(h){return h.getDimension(a)}),d={draggables:iq(c),droppables:sq(l)},u={dimensions:d,critical:e,viewport:i};return u};function Nk(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var s=t.droppable.getById(r.descriptor.droppableId);return s.descriptor.mode==="virtual"}var Gle=function(t,e){var r=null,s=Vle({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=function(p,y){t.droppable.exists(p)||At(),r&&e.updateDroppableIsEnabled({id:p,isEnabled:y})},a=function(p,y){r&&(t.droppable.exists(p)||At(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:y}))},o=function(p,y){r&&(t.droppable.exists(p)||At(),e.updateDroppableScroll({id:p,newScroll:y}))},l=function(p,y){r&&t.droppable.getById(p).callbacks.scroll(y)},c=function(){if(r){s.stop();var p=r.critical.droppable;t.droppable.getAllByType(p.type).forEach(function(y){return y.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(p){r||At();var y=r.critical.draggable;p.type==="ADDITION"&&Nk(t,y,p.value)&&s.add(p.value),p.type==="REMOVAL"&&Nk(t,y,p.value)&&s.remove(p.value)},u=function(p){r&&At();var y=t.draggable.getById(p.draggableId),v=t.droppable.getById(y.descriptor.droppableId),g={draggable:y.descriptor,droppable:v.descriptor},b=t.subscribe(d);return r={critical:g,unsubscribe:b},Wle({critical:g,registry:t,scrollOptions:p.scrollOptions})},h={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:u,stopPublishing:c};return h},Iq=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},Kle=function(t){window.scrollBy(t.x,t.y)},Yle=Ci(function(t){return Fj(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),Xle=function(e,r){var s=uf(Yle(r),function(i){return i.frame||At(),pq(i.frame.pageMarginBox)(e)});return s},Zle=function(t){var e=t.center,r=t.destination,s=t.droppables;if(r){var i=s[r];return i.frame?i:null}var a=Xle(e,s);return a},Vh={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Qle=function(t,e){var r=t[e.size]*Vh.startFromPercentage,s=t[e.size]*Vh.maxScrollAtPercentage,i={startScrollingFrom:r,maxScrollValueAt:s};return i},Dq=function(t){var e=t.startOfRange,r=t.endOfRange,s=t.current,i=r-e;if(i===0)return 0;var a=s-e,o=a/i;return o},IT=1,Jle=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return Vh.maxPixelScroll;if(t===e.startScrollingFrom)return IT;var r=Dq({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),s=1-r,i=Vh.maxPixelScroll*Vh.ease(s);return Math.ceil(i)},Sk=Vh.durationDampening.accelerateAt,Ak=Vh.durationDampening.stopDampeningAt,ece=function(t,e){var r=e,s=Ak,i=Date.now(),a=i-r;if(a>=Ak)return t;if(a<Sk)return IT;var o=Dq({startOfRange:Sk,endOfRange:s,current:a}),l=t*Vh.ease(o);return Math.ceil(l)},Ck=function(t){var e=t.distanceToEdge,r=t.thresholds,s=t.dragStartTime,i=t.shouldUseTimeDampening,a=Jle(e,r);return a===0?0:i?Math.max(ece(a,s),IT):a},Ek=function(t){var e=t.container,r=t.distanceToEdges,s=t.dragStartTime,i=t.axis,a=t.shouldUseTimeDampening,o=Qle(e,i),l=r[i.end]<r[i.start];return l?Ck({distanceToEdge:r[i.end],thresholds:o,dragStartTime:s,shouldUseTimeDampening:a}):-1*Ck({distanceToEdge:r[i.start],thresholds:o,dragStartTime:s,shouldUseTimeDampening:a})},tce=function(t){var e=t.container,r=t.subject,s=t.proposedScroll,i=r.height>e.height,a=r.width>e.width;return!a&&!i?s:a&&i?null:{x:a?0:s.x,y:i?0:s.y}},rce=rq(function(t){return t===0?0:t}),kq=function(t){var e=t.dragStartTime,r=t.container,s=t.subject,i=t.center,a=t.shouldUseTimeDampening,o={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},l=Ek({container:r,distanceToEdges:o,dragStartTime:e,axis:wT,shouldUseTimeDampening:a}),c=Ek({container:r,distanceToEdges:o,dragStartTime:e,axis:lq,shouldUseTimeDampening:a}),d=rce({x:c,y:l});if(Uh(d,Pi))return null;var u=tce({container:r,subject:s,proposedScroll:d});return u?Uh(u,Pi)?null:u:null},nce=rq(function(t){return t===0?0:t>0?1:-1}),DT=function(){var t=function(r,s){return r<0?r:r>s?r-s:0};return function(e){var r=e.current,s=e.max,i=e.change,a=qi(r,i),o={x:t(a.x,s.x),y:t(a.y,s.y)};return Uh(o,Pi)?null:o}}(),Oq=function(e){var r=e.max,s=e.current,i=e.change,a={x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)},o=nce(i),l=DT({max:a,current:s,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},kT=function(e,r){return Oq({current:e.scroll.current,max:e.scroll.max,change:r})},sce=function(e,r){if(!kT(e,r))return null;var s=e.scroll.max,i=e.scroll.current;return DT({current:i,max:s,change:r})},OT=function(e,r){var s=e.frame;return s?Oq({current:s.scroll.current,max:s.scroll.max,change:r}):!1},ice=function(e,r){var s=e.frame;return!s||!OT(e,r)?null:DT({current:s.scroll.current,max:s.scroll.max,change:r})},ace=function(t){var e=t.viewport,r=t.subject,s=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=kq({dragStartTime:i,container:e.frame,subject:r,center:s,shouldUseTimeDampening:a});return o&&kT(e,o)?o:null},oce=function(t){var e=t.droppable,r=t.subject,s=t.center,i=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=kq({dragStartTime:i,container:o.pageMarginBox,subject:r,center:s,shouldUseTimeDampening:a});return l&&OT(e,l)?l:null},Pk=function(t){var e=t.state,r=t.dragStartTime,s=t.shouldUseTimeDampening,i=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],c=l.page.marginBox;if(e.isWindowScrollAllowed){var d=e.viewport,u=ace({dragStartTime:r,viewport:d,subject:c,center:o,shouldUseTimeDampening:s});if(u){i(u);return}}var h=Zle({center:o,destination:Uo(e.impact),droppables:e.dimensions.droppables});if(h){var f=oce({dragStartTime:r,droppable:h,subject:c,center:o,shouldUseTimeDampening:s});f&&a(h.descriptor.id,f)}},lce=function(t){var e=t.scrollWindow,r=t.scrollDroppable,s=qx(e),i=qx(r),a=null,o=function(u){a||At();var h=a,f=h.shouldUseTimeDampening,p=h.dragStartTime;Pk({state:u,scrollWindow:s,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:f})},l=function(u){a&&At();var h=Date.now(),f=!1,p=function(){f=!0};Pk({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),a={dragStartTime:h,shouldUseTimeDampening:f},f&&o(u)},c=function(){a&&(s.cancel(),i.cancel(),a=null)};return{start:l,stop:c,scroll:o}},cce=function(t){var e=t.move,r=t.scrollDroppable,s=t.scrollWindow,i=function(d,u){var h=qi(d.current.client.selection,u);e({client:h})},a=function(d,u){if(!OT(d,u))return u;var h=ice(d,u);if(!h)return r(d.descriptor.id,u),null;var f=Fo(u,h);r(d.descriptor.id,f);var p=Fo(u,f);return p},o=function(d,u,h){if(!d||!kT(u,h))return h;var f=sce(u,h);if(!f)return s(h),null;var p=Fo(h,f);s(p);var y=Fo(h,p);return y},l=function(d){var u=d.scrollJumpRequest;if(u){var h=Uo(d.impact);h||At();var f=a(d.dimensions.droppables[h],u);if(f){var p=d.viewport,y=o(d.isWindowScrollAllowed,p,f);y&&i(d,y)}}};return l},dce=function(t){var e=t.scrollDroppable,r=t.scrollWindow,s=t.move,i=lce({scrollWindow:r,scrollDroppable:e}),a=cce({move:s,scrollWindow:r,scrollDroppable:e}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&a(d)}},l={scroll:o,start:i.start,stop:i.stop};return l},yg="data-rbd",bg=function(){var t=yg+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),SE=function(){var t=yg+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),uce=function(){var t=yg+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),Tk={contextId:yg+"-scroll-container-context-id"},hce=function(e){return function(r){return"["+r+'="'+e+'"]'}},Vv=function(e,r){return e.map(function(s){var i=s.styles[r];return i?s.selector+" { "+i+" }":""}).join(" ")},fce="pointer-events: none;",mce=function(t){var e=hce(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(bg.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:fce,dropAnimating:l}}}(),s=function(){var l=`
      transition: `+xx.outOfTheWay+`;
    `;return{selector:e(SE.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),i={selector:e(uce.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[s,r,i,a];return{always:Vv(o,"always"),resting:Vv(o,"resting"),dragging:Vv(o,"dragging"),dropAnimating:Vv(o,"dropAnimating"),userCancel:Vv(o,"userCancel")}},Vo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,fN=function(){var e=document.querySelector("head");return e||At(),e},_k=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function pce(t,e){var r=nn(function(){return mce(t)},[t]),s=S.useRef(null),i=S.useRef(null),a=er(Ci(function(h){var f=i.current;f||At(),f.textContent=h}),[]),o=er(function(h){var f=s.current;f||At(),f.textContent=h},[]);Vo(function(){!s.current&&!i.current||At();var h=_k(e),f=_k(e);return s.current=h,i.current=f,h.setAttribute(yg+"-always",t),f.setAttribute(yg+"-dynamic",t),fN().appendChild(h),fN().appendChild(f),o(r.always),a(r.resting),function(){var p=function(v){var g=v.current;g||At(),fN().removeChild(g),v.current=null};p(s),p(i)}},[e,o,a,r.always,r.resting,t]);var l=er(function(){return a(r.dragging)},[a,r.dragging]),c=er(function(h){if(h==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),d=er(function(){i.current&&a(r.resting)},[a,r.resting]),u=nn(function(){return{dragging:l,dropping:c,resting:d}},[l,c,d]);return u}var Rq=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function qj(t){return t instanceof Rq(t).HTMLElement}function gce(t,e){var r="["+bg.contextId+'="'+t+'"]',s=nq(document.querySelectorAll(r));if(!s.length)return null;var i=uf(s,function(a){return a.getAttribute(bg.draggableId)===e});return!i||!qj(i)?null:i}function vce(t){var e=S.useRef({}),r=S.useRef(null),s=S.useRef(null),i=S.useRef(!1),a=er(function(f,p){var y={id:f,focus:p};return e.current[f]=y,function(){var g=e.current,b=g[f];b!==y&&delete g[f]}},[]),o=er(function(f){var p=gce(t,f);p&&p!==document.activeElement&&p.focus()},[t]),l=er(function(f,p){r.current===f&&(r.current=p)},[]),c=er(function(){s.current||i.current&&(s.current=requestAnimationFrame(function(){s.current=null;var f=r.current;f&&o(f)}))},[o]),d=er(function(f){r.current=null;var p=document.activeElement;p&&p.getAttribute(bg.draggableId)===f&&(r.current=f)},[]);Vo(function(){return i.current=!0,function(){i.current=!1;var f=s.current;f&&cancelAnimationFrame(f)}},[]);var u=nn(function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}},[a,d,c,l]);return u}function xce(){var t={draggables:{},droppables:{}},e=[];function r(h){return e.push(h),function(){var p=e.indexOf(h);p!==-1&&e.splice(p,1)}}function s(h){e.length&&e.forEach(function(f){return f(h)})}function i(h){return t.draggables[h]||null}function a(h){var f=i(h);return f||At(),f}var o={register:function(f){t.draggables[f.descriptor.id]=f,s({type:"ADDITION",value:f})},update:function(f,p){var y=t.draggables[p.descriptor.id];y&&y.uniqueId===f.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:function(f){var p=f.descriptor.id,y=i(p);y&&f.uniqueId===y.uniqueId&&(delete t.draggables[p],s({type:"REMOVAL",value:f}))},getById:a,findById:i,exists:function(f){return!!i(f)},getAllByType:function(f){return n1(t.draggables).filter(function(p){return p.descriptor.type===f})}};function l(h){return t.droppables[h]||null}function c(h){var f=l(h);return f||At(),f}var d={register:function(f){t.droppables[f.descriptor.id]=f},unregister:function(f){var p=l(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete t.droppables[f.descriptor.id]},getById:c,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return n1(t.droppables).filter(function(p){return p.descriptor.type===f})}};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:d,subscribe:r,clean:u}}function yce(){var t=nn(xce,[]);return S.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var RT=be.createContext(null),i1=function(){var t=document.body;return t||At(),t},bce={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},jce=function(e){return"rbd-announcement-"+e};function wce(t){var e=nn(function(){return jce(t)},[t]),r=S.useRef(null);S.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),yt(a.style,bce),i1().appendChild(a),function(){setTimeout(function(){var c=i1();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var s=er(function(i){var a=r.current;if(a){a.textContent=i;return}},[]);return s}var Nce=0,Sce={separator:"::"};function LT(t,e){return e===void 0&&(e=Sce),nn(function(){return""+t+e.separator+Nce++},[e.separator,t])}function Ace(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function Cce(t){var e=t.contextId,r=t.text,s=LT("hidden-text",{separator:"-"}),i=nn(function(){return Ace({contextId:e,uniqueId:s})},[s,e]);return S.useEffect(function(){var o=document.createElement("div");return o.id=i,o.textContent=r,o.style.display="none",i1().appendChild(o),function(){var c=i1();c.contains(o)&&c.removeChild(o)}},[i,r]),i}var Uj=be.createContext(null);function Lq(t){var e=S.useRef(t);return S.useEffect(function(){e.current=t}),e}function Ece(){var t=null;function e(){return!!t}function r(o){return o===t}function s(o){t&&At();var l={abandon:o};return t=l,l}function i(){t||At(),t=null}function a(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:r,claim:s,release:i,tryAbandon:a}}var Pce=9,Tce=13,MT=27,Mq=32,_ce=33,Ice=34,Dce=35,kce=36,Oce=37,Rce=38,Lce=39,Mce=40,ab,Fce=(ab={},ab[Tce]=!0,ab[Pce]=!0,ab),Fq=function(t){Fce[t.keyCode]&&t.preventDefault()},Vj=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=uf(e,function(s){return"on"+s in document});return r||t}(),$q=0,Ik=5;function $ce(t,e){return Math.abs(e.x-t.x)>=Ik||Math.abs(e.y-t.y)>=Ik}var Dk={type:"IDLE"};function Bce(t){var e=t.cancel,r=t.completed,s=t.getPhase,i=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,c=o.clientX,d=o.clientY;if(l===$q){var u={x:c,y:d},h=s();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(u);return}h.type!=="PENDING"&&At();var f=h.point;if($ce(f,u)){o.preventDefault();var p=h.actions.fluidLift(u);i({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(o){var l=s();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){s().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=s();if(l.type==="PENDING"){e();return}if(o.keyCode===MT){o.preventDefault(),e();return}Fq(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){s().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=s();if(l.type==="IDLE"&&At(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Vj,fn:e}]}function zce(t){var e=S.useRef(Dk),r=S.useRef(qh),s=nn(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===$q&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var f=t.findClosestDraggableId(h);if(f){var p=t.tryGetLock(f,o,{sourceEvent:h});if(p){h.preventDefault();var y={x:h.clientX,y:h.clientY};r.current(),d(p,y)}}}}}},[t]),i=nn(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var f=t.findClosestDraggableId(h);if(f){var p=t.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||t.canGetLock(f)&&h.preventDefault())}}}}},[t]),a=er(function(){var h={passive:!1,capture:!0};r.current=yl(window,[i,s],h)},[i,s]),o=er(function(){var u=e.current;u.type!=="IDLE"&&(e.current=Dk,r.current(),a())},[a]),l=er(function(){var u=e.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),c=er(function(){var h={capture:!0,passive:!1},f=Bce({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(y){e.current=y}});r.current=yl(window,f,h)},[l,o]),d=er(function(h,f){e.current.type!=="IDLE"&&At(),e.current={type:"PENDING",point:f,actions:h},c()},[c]);Vo(function(){return a(),function(){r.current()}},[a])}var Lp;function qce(){}var Uce=(Lp={},Lp[Ice]=!0,Lp[_ce]=!0,Lp[kce]=!0,Lp[Dce]=!0,Lp);function Vce(t,e){function r(){e(),t.cancel()}function s(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===MT){a.preventDefault(),r();return}if(a.keyCode===Mq){a.preventDefault(),s();return}if(a.keyCode===Mce){a.preventDefault(),t.moveDown();return}if(a.keyCode===Rce){a.preventDefault(),t.moveUp();return}if(a.keyCode===Lce){a.preventDefault(),t.moveRight();return}if(a.keyCode===Oce){a.preventDefault(),t.moveLeft();return}if(Uce[a.keyCode]){a.preventDefault();return}Fq(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Vj,fn:r}]}function Hce(t){var e=S.useRef(qce),r=nn(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Mq)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,u,{sourceEvent:a});if(!l)return;a.preventDefault();var c=!0,d=l.snapLift();e.current();function u(){c||At(),c=!1,e.current(),s()}e.current=yl(window,Vce(d,u),{capture:!0,passive:!1})}}},[t]),s=er(function(){var a={passive:!1,capture:!0};e.current=yl(window,[r],a)},[r]);Vo(function(){return s(),function(){e.current()}},[s])}var mN={type:"IDLE"},Wce=120,Gce=.15;function Kce(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(r().type!=="DRAGGING"){e();return}i.keyCode===MT&&i.preventDefault(),e()}},{eventName:Vj,fn:e}]}function Yce(t){var e=t.cancel,r=t.completed,s=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=s();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],c=l.clientX,d=l.clientY,u={x:c,y:d};a.preventDefault(),o.actions.move(u)}},{eventName:"touchend",fn:function(a){var o=s();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(s().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=s();o.type==="IDLE"&&At();var l=a.touches[0];if(l){var c=l.force>=Gce;if(c){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&e();return}if(d){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:Vj,fn:e}]}function Xce(t){var e=S.useRef(mN),r=S.useRef(qh),s=er(function(){return e.current},[]),i=er(function(p){e.current=p},[]),a=nn(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var y=t.findClosestDraggableId(p);if(y){var v=t.tryGetLock(y,l,{sourceEvent:p});if(v){var g=p.touches[0],b=g.clientX,j=g.clientY,w={x:b,y:j};r.current(),h(v,w)}}}}}},[t]),o=er(function(){var p={capture:!0,passive:!1};r.current=yl(window,[a],p)},[a]),l=er(function(){var f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),i(mN),r.current(),o())},[o,i]),c=er(function(){var f=e.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),d=er(function(){var p={capture:!0,passive:!1},y={cancel:c,completed:l,getPhase:s},v=yl(window,Yce(y),p),g=yl(window,Kce(y),p);r.current=function(){v(),g()}},[c,s,l]),u=er(function(){var p=s();p.type!=="PENDING"&&At();var y=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:y,hasMoved:!1})},[s,i]),h=er(function(p,y){s().type!=="IDLE"&&At();var v=setTimeout(u,Wce);i({type:"PENDING",point:y,actions:p,longPressTimerId:v}),d()},[d,s,i,u]);Vo(function(){return o(),function(){r.current();var y=s();y.type==="PENDING"&&(clearTimeout(y.longPressTimerId),i(mN))}},[s,o,i]),Vo(function(){var p=yl(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var Zce={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Bq(t,e){if(e==null)return!1;var r=!!Zce[e.tagName.toLowerCase()];if(r)return!0;var s=e.getAttribute("contenteditable");return s==="true"||s===""?!0:e===t?!1:Bq(t,e.parentElement)}function Qce(t,e){var r=e.target;return qj(r)?Bq(t,r):!1}var Jce=function(t){return nc(t.getBoundingClientRect()).center};function ede(t){return t instanceof Rq(t).Element}var tde=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=uf(e,function(s){return s in Element.prototype});return r||t}();function zq(t,e){return t==null?null:t[tde](e)?t:zq(t.parentElement,e)}function rde(t,e){return t.closest?t.closest(e):zq(t,e)}function nde(t){return"["+bg.contextId+'="'+t+'"]'}function sde(t,e){var r=e.target;if(!ede(r))return null;var s=nde(t),i=rde(r,s);return!i||!qj(i)?null:i}function ide(t,e){var r=sde(t,e);return r?r.getAttribute(bg.draggableId):null}function ade(t,e){var r="["+SE.contextId+'="'+t+'"]',s=nq(document.querySelectorAll(r)),i=uf(s,function(a){return a.getAttribute(SE.id)===e});return!i||!qj(i)?null:i}function ode(t){t.preventDefault()}function ob(t){var e=t.expected,r=t.phase,s=t.isLockActive;return t.shouldWarn,!(!s()||e!==r)}function qq(t){var e=t.lockAPI,r=t.store,s=t.registry,i=t.draggableId;if(e.isClaimed())return!1;var a=s.draggable.findById(i);return!(!a||!a.options.isEnabled||!Iq(r.getState(),i))}function lde(t){var e=t.lockAPI,r=t.contextId,s=t.store,i=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,c=qq({lockAPI:e,store:s,registry:i,draggableId:a});if(!c)return null;var d=i.draggable.getById(a),u=ade(r,d.descriptor.id);if(!u||l&&!d.options.canDragInteractiveElements&&Qce(u,l))return null;var h=e.claim(o||qh),f="PRE_DRAG";function p(){return d.options.shouldRespectForcePress}function y(){return e.isActive(h)}function v(N,A){ob({expected:N,phase:f,isLockActive:y,shouldWarn:!0})&&s.dispatch(A())}var g=v.bind(null,"DRAGGING");function b(N){function A(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(A(),f!=="PRE_DRAG"&&At()),s.dispatch(tle(N.liftActionArgs)),f="DRAGGING";function _(k,F){if(F===void 0&&(F={shouldBlockNextClick:!1}),N.cleanup(),F.shouldBlockNextClick){var I=yl(window,[{eventName:"click",fn:ode,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(I)}A(),s.dispatch(Sq({reason:k}))}return yt({isActive:function(){return ob({expected:"DRAGGING",phase:f,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(F){return _("DROP",F)},cancel:function(F){return _("CANCEL",F)}},N.actions)}function j(N){var A=qx(function(k){g(function(){return Nq({client:k})})}),_=b({liftActionArgs:{id:a,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return A.cancel()},actions:{move:A}});return yt({},_,{move:A})}function w(){var N={moveUp:function(){return g(dle)},moveRight:function(){return g(hle)},moveDown:function(){return g(ule)},moveLeft:function(){return g(fle)}};return b({liftActionArgs:{id:a,clientSelection:Jce(u),movementMode:"SNAP"},cleanup:qh,actions:N})}function C(){var N=ob({expected:"PRE_DRAG",phase:f,isLockActive:y,shouldWarn:!0});N&&e.release()}var E={isActive:function(){return ob({expected:"PRE_DRAG",phase:f,isLockActive:y,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:j,snapLift:w,abort:C};return E}var cde=[zce,Hce,Xce];function dde(t){var e=t.contextId,r=t.store,s=t.registry,i=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?cde:[],i||[]),l=S.useState(function(){return Ece()})[0],c=er(function(j,w){j.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);Vo(function(){var j=r.getState(),w=r.subscribe(function(){var C=r.getState();c(j,C),j=C});return w},[l,r,c]),Vo(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=er(function(b){return qq({lockAPI:l,registry:s,store:r,draggableId:b})},[l,s,r]),u=er(function(b,j,w){return lde({lockAPI:l,registry:s,contextId:e,store:r,draggableId:b,forceSensorStop:j,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[e,l,s,r]),h=er(function(b){return ide(e,b)},[e]),f=er(function(b){var j=s.draggable.findById(b);return j?j.options:null},[s.draggable]),p=er(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(ET()))},[l,r]),y=er(l.isClaimed,[l]),v=nn(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:y}},[d,u,h,f,p,y]),g=0;g<o.length;g++)o[g](v)}var ude=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Hv(t){return t.current||At(),t.current}function hde(t){var e=t.contextId,r=t.setCallbacks,s=t.sensors,i=t.nonce,a=t.dragHandleUsageInstructions,o=S.useRef(null),l=Lq(t),c=er(function(){return ude(l.current)},[l]),d=wce(e),u=Cce({contextId:e,text:a}),h=pce(e,i),f=er(function(k){Hv(o).dispatch(k)},[]),p=nn(function(){return XD({publishWhileDragging:nle,updateDroppableScroll:ile,updateDroppableIsEnabled:ale,updateDroppableIsCombineEnabled:ole,collectionStarting:sle},f)},[f]),y=yce(),v=nn(function(){return Gle(y,p)},[y,p]),g=nn(function(){return dce(yt({scrollWindow:Kle,scrollDroppable:v.scrollDroppable},XD({move:Nq},f)))},[v.scrollDroppable,f]),b=vce(e),j=nn(function(){return Ule({announce:d,autoScroller:g,dimensionMarshal:v,focusMarshal:b,getResponders:c,styleMarshal:h})},[d,g,v,b,c,h]);o.current=j;var w=er(function(){var k=Hv(o),F=k.getState();F.phase!=="IDLE"&&k.dispatch(ET())},[]),C=er(function(){var k=Hv(o).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),E=nn(function(){return{isDragging:C,tryAbort:w}},[C,w]);r(E);var N=er(function(k){return Iq(Hv(o).getState(),k)},[]),A=er(function(){return em(Hv(o).getState())},[]),_=nn(function(){return{marshal:v,focus:b,contextId:e,canLift:N,isMovementAllowed:A,dragHandleUsageInstructionsId:u,registry:y}},[e,v,u,b,N,A,y]);return dde({contextId:e,store:j,registry:y,customSensors:s,enableDefaultSensors:t.enableDefaultSensors!==!1}),S.useEffect(function(){return w},[w]),be.createElement(Uj.Provider,{value:_},be.createElement(Jie,{context:RT,store:j},t.children))}var fde=0;function mde(){return nn(function(){return""+fde++},[])}function pde(t){var e=mde(),r=t.dragHandleUsageInstructions||Fb.dragHandleUsageInstructions;return be.createElement(Hae,null,function(s){return be.createElement(hde,{nonce:t.nonce,contextId:e,setCallbacks:s,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var Uq=function(e){return function(r){return e===r}},gde=Uq("scroll"),vde=Uq("auto"),kk=function(e,r){return r(e.overflowX)||r(e.overflowY)},xde=function(e){var r=window.getComputedStyle(e),s={overflowX:r.overflowX,overflowY:r.overflowY};return kk(s,gde)||kk(s,vde)},yde=function(){return!1},bde=function t(e){return e==null?null:e===document.body?yde()?e:null:e===document.documentElement?null:xde(e)?e:t(e.parentElement)},AE=function(t){return{x:t.scrollLeft,y:t.scrollTop}},jde=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},wde=function(t){var e=bde(t),r=jde(t);return{closestScrollable:e,isFixedOnPage:r}},Nde=function(t){var e=t.descriptor,r=t.isEnabled,s=t.isCombineEnabled,i=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,c=t.closest,d=function(){if(!c)return null;var p=c.scrollSize,y=c.client,v=Pq({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:y.paddingBox.height,width:y.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:y,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:v,diff:{value:Pi,displacement:Pi}}}}(),u=a==="vertical"?wT:lq,h=xg({page:l,withPlaceholder:null,axis:u,frame:d}),f={descriptor:e,isCombineEnabled:s,isFixedOnPage:i,axis:u,isEnabled:r,client:o,page:l,frame:d,subject:h};return f},Sde=function(e,r){var s=Qz(e);if(!r||e!==r)return s;var i=s.paddingBox.top-r.scrollTop,a=s.paddingBox.left-r.scrollLeft,o=i+r.scrollHeight,l=a+r.scrollWidth,c={top:i,right:l,bottom:o,left:a},d=vT(c,s.border),u=xT({borderBox:d,margin:s.margin,border:s.border,padding:s.padding});return u},Ade=function(t){var e=t.ref,r=t.descriptor,s=t.env,i=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,c=t.shouldClipSubject,d=s.closestScrollable,u=Sde(e,d),h=e1(u,i),f=function(){if(!d)return null;var y=Qz(d),v={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:y,page:e1(y,i),scroll:AE(d),scrollSize:v,shouldClipSubject:c}}(),p=Nde({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:a,client:u,page:h,closest:f});return p},Cde={passive:!1},Ede={passive:!0},Ok=function(t){return t.shouldPublishImmediately?Cde:Ede};function a1(t){var e=S.useContext(t);return e||At(),e}var lb=function(e){return e&&e.env.closestScrollable||null};function Pde(t){var e=S.useRef(null),r=a1(Uj),s=LT("droppable"),i=r.registry,a=r.marshal,o=Lq(t),l=nn(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),c=S.useRef(l),d=nn(function(){return Ci(function(C,E){e.current||At();var N={x:C,y:E};a.updateDroppableScroll(l.id,N)})},[l.id,a]),u=er(function(){var C=e.current;return!C||!C.env.closestScrollable?Pi:AE(C.env.closestScrollable)},[]),h=er(function(){var C=u();d(C.x,C.y)},[u,d]),f=nn(function(){return qx(h)},[h]),p=er(function(){var C=e.current,E=lb(C);C&&E||At();var N=C.scrollOptions;if(N.shouldPublishImmediately){h();return}f()},[f,h]),y=er(function(C,E){e.current&&At();var N=o.current,A=N.getDroppableRef();A||At();var _=wde(A),k={ref:A,descriptor:l,env:_,scrollOptions:E};e.current=k;var F=Ade({ref:A,descriptor:l,env:_,windowScroll:C,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),I=_.closestScrollable;return I&&(I.setAttribute(Tk.contextId,r.contextId),I.addEventListener("scroll",p,Ok(k.scrollOptions))),F},[r.contextId,l,p,o]),v=er(function(){var C=e.current,E=lb(C);return C&&E||At(),AE(E)},[]),g=er(function(){var C=e.current;C||At();var E=lb(C);e.current=null,E&&(f.cancel(),E.removeAttribute(Tk.contextId),E.removeEventListener("scroll",p,Ok(C.scrollOptions)))},[p,f]),b=er(function(C){var E=e.current;E||At();var N=lb(E);N||At(),N.scrollTop+=C.y,N.scrollLeft+=C.x},[]),j=nn(function(){return{getDimensionAndWatchScroll:y,getScrollWhileDragging:v,dragStopped:g,scroll:b}},[g,y,v,b]),w=nn(function(){return{uniqueId:s,descriptor:l,callbacks:j}},[j,l,s]);Vo(function(){return c.current=w.descriptor,i.droppable.register(w),function(){e.current&&g(),i.droppable.unregister(w)}},[j,l,g,w,a,i.droppable]),Vo(function(){e.current&&a.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Vo(function(){e.current&&a.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function pN(){}var Rk={width:0,height:0,margin:Zae},Tde=function(e){var r=e.isAnimatingOpenOnMount,s=e.placeholder,i=e.animate;return r||i==="close"?Rk:{height:s.client.borderBox.height,width:s.client.borderBox.width,margin:s.client.margin}},_de=function(e){var r=e.isAnimatingOpenOnMount,s=e.placeholder,i=e.animate,a=Tde({isAnimatingOpenOnMount:r,placeholder:s,animate:i});return{display:s.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?xx.placeholder:null}};function Ide(t){var e=S.useRef(null),r=er(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),s=t.animate,i=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=S.useState(t.animate==="open"),c=l[0],d=l[1];S.useEffect(function(){return c?s!=="open"?(r(),d(!1),pN):e.current?pN:(e.current=setTimeout(function(){e.current=null,d(!1)}),r):pN},[s,c,r]);var u=er(function(f){f.propertyName==="height"&&(i(),s==="close"&&a())},[s,a,i]),h=_de({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return be.createElement(t.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":o,onTransitionEnd:u,ref:t.innerRef})}var Dde=be.memo(Ide),FT=be.createContext(null),kde=function(t){zz(e,t);function e(){for(var s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return s=t.call.apply(t,[this].concat(a))||this,s.state={isVisible:!!s.props.on,data:s.props.on,animate:s.props.shouldAnimate&&s.props.on?"open":"none"},s.onClose=function(){s.state.animate==="close"&&s.setState({isVisible:!1})},s}e.getDerivedStateFromProps=function(i,a){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},e}(be.PureComponent),Lk={dragging:5e3,dropAnimating:4500},Ode=function(e,r){return r?xx.drop(r.duration):e?xx.snap:xx.fluid},Rde=function(e,r){return e?r?Wx.opacity.drop:Wx.opacity.combining:null},Lde=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function Mde(t){var e=t.dimension,r=e.client,s=t.offset,i=t.combineWith,a=t.dropping,o=!!i,l=Lde(t),c=!!a,d=c?wE.drop(s,o):wE.moveTo(s),u={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Ode(l,a),transform:d,opacity:Rde(o,c),zIndex:c?Lk.dropAnimating:Lk.dragging,pointerEvents:"none"};return u}function Fde(t){return{transform:wE.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function $de(t){return t.type==="DRAGGING"?Mde(t):Fde(t)}function Bde(t,e,r){r===void 0&&(r=Pi);var s=window.getComputedStyle(e),i=e.getBoundingClientRect(),a=Zz(i,s),o=e1(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:s.display},c={x:a.marginBox.width,y:a.marginBox.height},d={descriptor:t,placeholder:l,displaceBy:c,client:a,page:o};return d}function zde(t){var e=LT("draggable"),r=t.descriptor,s=t.registry,i=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,c=nn(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),d=er(function(p){var y=i();return y||At(),Bde(r,y,p)},[r,i]),u=nn(function(){return{uniqueId:e,descriptor:r,options:c,getDimension:d}},[r,d,c,e]),h=S.useRef(u),f=S.useRef(!0);Vo(function(){return s.draggable.register(h.current),function(){return s.draggable.unregister(h.current)}},[s.draggable]),Vo(function(){if(f.current){f.current=!1;return}var p=h.current;h.current=u,s.draggable.update(u,p)},[u,s.draggable])}function qde(t){t.preventDefault()}function Ude(t){var e=S.useRef(null),r=er(function(k){e.current=k},[]),s=er(function(){return e.current},[]),i=a1(Uj),a=i.contextId,o=i.dragHandleUsageInstructionsId,l=i.registry,c=a1(FT),d=c.type,u=c.droppableId,h=nn(function(){return{id:t.draggableId,index:t.index,type:d,droppableId:u}},[t.draggableId,t.index,d,u]),f=t.children,p=t.draggableId,y=t.isEnabled,v=t.shouldRespectForcePress,g=t.canDragInteractiveElements,b=t.isClone,j=t.mapped,w=t.dropAnimationFinished;if(!b){var C=nn(function(){return{descriptor:h,registry:l,getDraggableRef:s,canDragInteractiveElements:g,shouldRespectForcePress:v,isEnabled:y}},[h,l,s,g,v,y]);zde(C)}var E=nn(function(){return y?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:qde}:null},[a,o,p,y]),N=er(function(k){j.type==="DRAGGING"&&j.dropping&&k.propertyName==="transform"&&w()},[w,j]),A=nn(function(){var k=$de(j),F=j.type==="DRAGGING"&&j.dropping?N:null,I={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":p,style:k,onTransitionEnd:F},dragHandleProps:E};return I},[a,E,p,j,N,r]),_=nn(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(A,j.snapshot,_)}var Vq=function(t,e){return t===e},Hq=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},Vde=function(e){return e.combine?e.combine.draggableId:null},Hde=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Wde(){var t=Ci(function(i,a){return{x:i,y:a}}),e=Ci(function(i,a,o,l,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=Ci(function(i,a,o,l,c,d,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:a,offset:i,dimension:o,forceShouldAnimate:u,snapshot:e(a,l,c,d,null)}}}),s=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,c=a.dimensions.draggables[o.draggableId],d=Uo(a.impact),u=Hde(a.impact),h=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,c,o.isClone,d,u,h)}if(a.phase==="DROP_ANIMATING"){var f=a.completed;if(f.result.draggableId!==o.draggableId)return null;var p=o.isClone,y=a.dimensions.draggables[o.draggableId],v=f.result,g=v.mode,b=Hq(v),j=Vde(v),w=a.dropDuration,C={duration:w,curve:TT.drop,moveTo:a.newHomeClientOffset,opacity:j?Wx.opacity.drop:null,scale:j?Wx.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:y,dropping:C,draggingOver:b,combineWith:j,mode:g,forceShouldAnimate:null,snapshot:e(g,p,b,j,C)}}}return null};return s}function Wq(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var Gde={mapped:{type:"SECONDARY",offset:Pi,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Wq(null)}};function Kde(){var t=Ci(function(o,l){return{x:o,y:l}}),e=Ci(Wq),r=Ci(function(o,l,c){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:e(l)}}}),s=function(l){return l?r(Pi,l,!0):null},i=function(l,c,d,u){var h=d.displaced.visible[l],f=!!(u.inVirtualList&&u.effected[l]),p=$j(d),y=p&&p.draggableId===l?c:null;if(!h){if(!f)return s(y);if(d.displaced.invisible[l])return null;var v=nv(u.displacedBy.point),g=t(v.x,v.y);return r(g,y,!0)}if(f)return s(y);var b=d.displacedBy.point,j=t(b.x,b.y);return r(j,y,h.shouldAnimate)},a=function(l,c){if(l.isDragging)return l.critical.draggable.id===c.draggableId?null:i(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===c.draggableId?null:i(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return a}var Yde=function(){var e=Wde(),r=Kde(),s=function(a,o){return e(a,o)||r(a,o)||Gde};return s},Xde={dropAnimationFinished:Aq},Zde=Yz(Yde,Xde,null,{context:RT,pure:!0,areStatePropsEqual:Vq})(Ude);function Gq(t){var e=a1(FT),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:be.createElement(Zde,t)}function Qde(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,s=!!t.shouldRespectForcePress;return be.createElement(Gq,yt({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:s}))}function Jde(t){var e=S.useContext(Uj);e||At();var r=e.contextId,s=e.isMovementAllowed,i=S.useRef(null),a=S.useRef(null),o=t.children,l=t.droppableId,c=t.type,d=t.mode,u=t.direction,h=t.ignoreContainerClipping,f=t.isDropDisabled,p=t.isCombineEnabled,y=t.snapshot,v=t.useClone,g=t.updateViewportMaxScroll,b=t.getContainerForClone,j=er(function(){return i.current},[]),w=er(function(I){i.current=I},[]);er(function(){return a.current},[]);var C=er(function(I){a.current=I},[]),E=er(function(){s()&&g({maxScroll:_q()})},[s,g]);Pde({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:h,getDroppableRef:j});var N=be.createElement(kde,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(I){var T=I.onClose,R=I.data,O=I.animate;return be.createElement(Dde,{placeholder:R,onClose:T,innerRef:C,animate:O,contextId:r,onTransitionEnd:E})}),A=nn(function(){return{innerRef:w,placeholder:N,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,N,w]),_=v?v.dragging.draggableId:null,k=nn(function(){return{droppableId:l,type:c,isUsingCloneFor:_}},[l,_,c]);function F(){if(!v)return null;var I=v.dragging,T=v.render,R=be.createElement(Gq,{draggableId:I.draggableId,index:I.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(O,z){return T(O,z,I)});return yj.createPortal(R,b())}return be.createElement(FT.Provider,{value:k},o(A,y),F())}var gN=function(e,r){return e===r.droppable.type},Mk=function(e,r){return r.draggables[e.draggable.id]},eue=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=yt({},e,{shouldAnimatePlaceholder:!1}),s=Ci(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),i=Ci(function(o,l,c,d,u,h){var f=u.descriptor.id,p=u.descriptor.droppableId===o;if(p){var y=h?{render:h,dragging:s(u.descriptor)}:null,v={isDraggingOver:c,draggingOverWith:c?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:y}}if(!l)return r;if(!d)return e;var g={isDraggingOver:c,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:g,useClone:null}}),a=function(l,c){var d=c.droppableId,u=c.type,h=!c.isDropDisabled,f=c.renderClone;if(l.isDragging){var p=l.critical;if(!gN(u,p))return r;var y=Mk(p,l.dimensions),v=Uo(l.impact)===d;return i(d,h,v,v,y,f)}if(l.phase==="DROP_ANIMATING"){var g=l.completed;if(!gN(u,g.critical))return r;var b=Mk(g.critical,l.dimensions);return i(d,h,Hq(g.result)===d,Uo(g.impact)===d,b,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var j=l.completed;if(!gN(u,j.critical))return r;var w=Uo(j.impact)===d,C=!!(j.impact.at&&j.impact.at.type==="COMBINE"),E=j.critical.droppable.id===d;return w?C?e:r:E?e:r}return r};return a},tue={updateViewportMaxScroll:cle};function rue(){return document.body||At(),document.body}var nue={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:rue},Kq=Yz(eue,tue,null,{context:RT,pure:!0,areStatePropsEqual:Vq})(Jde);Kq.defaultProps=nue;const CE={dealStages:["New","Qualified","Proposal Sent","Negotiation","Closed Won","Closed Lost"],defaultDeal:{expectedCloseDate:new Date().toISOString().split("T")[0]},sampleDeals:[{id:"deal-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",stage:"Qualified",amount:35e3,source:"Referral",type:"New Sale",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:75,expectedCloseDate:"2024-02-15",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-20T14:22:00Z",notes:"Customer very interested, ready to move forward with financing",activities:[{id:"activity-001",type:"Call",description:"Initial qualification call",date:"2024-01-10T10:00:00Z",userId:"rep-001"},{id:"activity-002",type:"Meeting",description:"Product demonstration",date:"2024-01-15T14:00:00Z",userId:"rep-001"}]},{id:"deal-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",stage:"Proposal Sent",amount:62e3,source:"Trade Show",type:"New Sale",priority:"Medium",repId:"rep-002",repName:"Avery Seller",probability:60,expectedCloseDate:"2024-02-28",createdAt:"2024-01-05T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z",notes:"Proposal sent, waiting for customer decision",activities:[{id:"activity-003",type:"Email",description:"Sent detailed proposal",date:"2024-01-18T09:00:00Z",userId:"rep-002"}]},{id:"deal-003",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",customerPhone:"(555) 456-7890",vehicleId:"veh-003",vehicleInfo:"2023 Grand Design Solitude 310GK",stage:"Negotiation",amount:48e3,source:"Online",type:"Trade-in",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:85,expectedCloseDate:"2024-02-10",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z",notes:"Negotiating trade-in value, close to agreement",activities:[{id:"activity-004",type:"Meeting",description:"Trade-in appraisal",date:"2024-01-20T11:00:00Z",userId:"rep-001"}]}],metrics:{totalDeals:156,totalValue:875e4}},Fk=[{stage:Ft.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:Ft.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:Ft.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:Ft.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:Ft.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:Ft.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:Ft.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function sue({deals:t,onDealStageChange:e,onDealClick:r}){const{tenant:s}=lo(),[i,a]=S.useState(null);s?.settings?.dealStages||CE.dealStages;const[o,l]=S.useState(s?.deals||CE.sampleDeals),c=g=>{switch(g){case Pn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pn.WON:return"bg-green-50 text-green-700 border-green-200";case Pn.LOST:return"bg-red-50 text-red-700 border-red-200";case Pn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=g=>{switch(g){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=g=>new Date(g.expectedCloseDate)<new Date&&g.status===Pn.ACTIVE,h=g=>{if(a(null),!g.destination||g.source.droppableId===g.destination.droppableId)return;const b=g.draggableId,j=g.destination.droppableId;e(b,j)},f=g=>{a(g.draggableId)},p=g=>t.filter(b=>b.stage===g),y=g=>p(g).reduce((b,j)=>b+j.value,0),v=g=>p(g).reduce((b,j)=>b+j.value*j.probability/100,0);return n.jsxs("div",{className:"space-y-6 pb-10",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:Fk.map(g=>{const b=p(g.stage),j=y(g.stage),w=v(g.stage);return n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{className:"pb-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:pt("w-3 h-3 rounded-full",g.color)}),n.jsx("span",{className:"text-xs text-muted-foreground",children:b.length})]}),n.jsx(Ne,{className:"text-sm font-medium",children:g.name})]}),n.jsx(pe,{className:"pt-0",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"text-lg font-bold",children:Fe(j)}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",Fe(w)]})]})})]},g.stage)})}),n.jsx(pde,{onDragEnd:h,onDragStart:f,children:n.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:Fk.map(g=>n.jsx(Kq,{droppableId:g.stage,children:(b,j)=>n.jsxs("div",{ref:b.innerRef,...b.droppableProps,className:pt("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",j.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx("div",{className:pt("w-3 h-3 rounded-full",g.color)}),n.jsx("h3",{className:"font-semibold text-sm",children:g.name})]}),p(g.stage).map((w,C)=>n.jsx(Qde,{draggableId:w.id,index:C,children:(E,N)=>n.jsx(me,{ref:E.innerRef,...E.draggableProps,...E.dragHandleProps,className:pt("cursor-pointer transition-all hover:shadow-md",N.isDragging&&"rotate-3 shadow-lg",i===w.id&&"opacity-50"),onClick:()=>r(w),children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:w.name}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:w.customerName})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-bold text-primary",children:Fe(w.value)}),n.jsx(Ve,{className:pt("ri-badge-status text-xs",d(w.priority)),children:w.priority.toUpperCase()})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ar,{className:"h-3 w-3"}),n.jsxs("span",{children:[w.probability,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Br,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:new Date(w.expectedCloseDate).toLocaleDateString()})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ve,{className:pt("ri-badge-status text-xs",c(w.status)),children:w.status.toUpperCase()}),u(w)&&n.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[n.jsx(Xh,{className:"h-3 w-3 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},w.id)},w.id)),b.placeholder]})},g.stage))})})]})}function iue(t){const{tenant:e}=useTenant(),r=e?.dealMetrics||CE.metrics;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx(rr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Fe(r.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),r.totalDeals," active deals"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(Ar,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Fe(r.wonValue)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(ic,{className:"h-3 w-3 mr-1"}),r.wonDeals," deals closed"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Win Rate"}),n.jsx(ic,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[r.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Industry average: 27%"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),n.jsx(rr,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Fe(r.averageDealSize)}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),r.averageSalesCycle.toFixed(0)," day cycle"]})]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Stage Conversion Rates"}),n.jsx(Ge,{children:"Conversion rates and average time spent in each stage"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-6",children:r.conversionRates.map((s,i)=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[s.fromStage.replace("_"," ")," → ",s.toStage.replace("_"," ")]}),n.jsxs("span",{className:`text-sm font-bold ${getConversionColor(s.rate)}`,children:[s.rate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[n.jsx(Dr,{className:"h-3 w-3"}),n.jsxs("span",{children:[s.averageDuration,"h avg"]})]})]}),n.jsx(uc,{value:s.rate,className:"h-2"})]},`${s.fromStage}-${s.toStage}`))})})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Pipeline Health"}),n.jsx(Ge,{children:"Key performance indicators"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ar,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-900",children:"Win Rate"})]}),n.jsxs("span",{className:"text-lg font-bold text-green-600",children:[r.winRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rr,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Deal Size"})]}),n.jsx("span",{className:"text-lg font-bold text-blue-600",children:Fe(r.averageDealSize)})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Dr,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sales Cycle"})]}),n.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[r.averageSalesCycle.toFixed(0)," days"]})]})]})})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Deal Breakdown"}),n.jsx(Ge,{children:"Current pipeline composition"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deals"}),n.jsx("span",{className:"font-bold",children:r.totalDeals})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Won Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-green-600",children:r.wonDeals}),n.jsxs("span",{className:"text-xs text-green-600",children:["(",Fe(r.wonValue),")"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Lost Deals"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-bold text-red-600",children:r.lostDeals}),n.jsxs("span",{className:"text-xs text-red-600",children:["(",Fe(r.lostValue),")"]})]})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Active Pipeline"}),n.jsx("span",{className:"font-bold text-primary",children:Fe(r.totalValue-r.wonValue-r.lostValue)})]})})]})})]})]})]})}const aue=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],oue=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],lue=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function cue({deals:t,winLossReports:e,onCreateReport:r}){const[s,i]=S.useState(!1),[a,o]=S.useState(null),[l,c]=S.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=t.filter(N=>N.status==="won"||N.status==="lost"),u=t.filter(N=>N.status==="won"),h=t.filter(N=>N.status==="lost"),f=d.length>0?u.length/d.length*100:0,p=u.length>0?u.reduce((N,A)=>N+A.value,0)/u.length:0,y=h.length>0?h.reduce((N,A)=>N+A.value,0)/h.length:0,v=N=>{o(N),c({...l,outcome:N.status==="won"?"won":"lost"}),i(!0)},g=()=>{a&&(r(a.id,l.outcome,l),i(!1),o(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},b=(N,A,_)=>{A.trim()&&!N.includes(A.trim())&&_([...N,A.trim()])},j=(N,A,_)=>{_(N.filter((k,F)=>F!==A))},w=N=>{const A=e.filter(k=>k.outcome===N),_={};return A.forEach(k=>{_[k.primaryReason]=(_[k.primaryReason]||0)+1}),Object.entries(_).sort(([,k],[,F])=>F-k).slice(0,5).map(([k,F])=>({reason:k,count:F,percentage:A.length>0?F/A.length*100:0}))},C=w("won"),E=w("lost");return n.jsxs("div",{className:"space-y-6",children:[s&&a&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Win/Loss Report"}),n.jsxs(Ge,{children:[a.name," - ",Fe(a.value)]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>i(!1),children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Outcome"}),n.jsxs(nt,{value:l.outcome,onValueChange:N=>c(A=>({...A,outcome:N})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"won",children:"Won"}),n.jsx(he,{value:"lost",children:"Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Primary Reason"}),n.jsxs(nt,{value:l.primaryReason,onValueChange:N=>c(A=>({...A,primaryReason:N})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select primary reason"})}),n.jsx(tt,{children:(l.outcome==="won"?aue:oue).map(N=>n.jsx(he,{value:N,children:N},N))})]})]}),l.outcome==="lost"&&n.jsxs("div",{children:[n.jsx(ue,{children:"Competitor Won"}),n.jsxs(nt,{value:l.competitorWon,onValueChange:N=>c(A=>({...A,competitorWon:N})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select competitor"})}),n.jsx(tt,{children:lue.map(N=>n.jsx(he,{value:N,children:N},N))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Customer Feedback"}),n.jsx(kr,{value:l.feedback,onChange:N=>c(A=>({...A,feedback:N.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Lessons Learned"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{placeholder:"Add a lesson learned",onKeyDown:N=>{if(N.key==="Enter"){N.preventDefault();const A=N.currentTarget;b(l.lessonsLearned,A.value,_=>c(k=>({...k,lessonsLearned:_}))),A.value=""}}}),n.jsx(re,{type:"button",variant:"outline",onClick:N=>{const A=N.currentTarget.previousElementSibling;b(l.lessonsLearned,A.value,_=>c(k=>({...k,lessonsLearned:_}))),A.value=""},children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.lessonsLearned.map((N,A)=>n.jsxs(Ve,{variant:"secondary",className:"flex items-center gap-1",children:[N,n.jsx(Cr,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(l.lessonsLearned,A,_=>c(k=>({...k,lessonsLearned:_})))})]},A))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Action Items"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{placeholder:"Add an action item",onKeyDown:N=>{if(N.key==="Enter"){N.preventDefault();const A=N.currentTarget;b(l.actionItems,A.value,_=>c(k=>({...k,actionItems:_}))),A.value=""}}}),n.jsx(re,{type:"button",variant:"outline",onClick:N=>{const A=N.currentTarget.previousElementSibling;b(l.actionItems,A.value,_=>c(k=>({...k,actionItems:_}))),A.value=""},children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.actionItems.map((N,A)=>n.jsxs(Ve,{variant:"secondary",className:"flex items-center gap-1",children:[N,n.jsx(Cr,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(l.actionItems,A,_=>c(k=>({...k,actionItems:_})))})]},A))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsxs(re,{onClick:g,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),n.jsx(ic,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[f.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),n.jsx(Ar,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:u.length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),Fe(p)," avg"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),n.jsx(O2,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:h.length}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(O2,{className:"h-3 w-3 mr-1"}),Fe(y)," avg"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Reports"}),n.jsx(Es,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:e.length}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),n.jsxs(fn,{defaultValue:"analysis",className:"space-y-6",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"analysis",children:"Analysis"}),n.jsx(dt,{value:"closed-deals",children:"Closed Deals"}),n.jsx(dt,{value:"reports",children:"Reports"})]}),n.jsxs(ht,{value:"analysis",className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ar,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),n.jsx(Ge,{children:"Top reasons for winning deals"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:C.length>0?C.map((N,A)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:N.reason}),n.jsxs("span",{className:"text-sm text-green-600",children:[N.percentage.toFixed(0),"%"]})]}),n.jsx(uc,{value:N.percentage,className:"h-2"})]},A)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(O2,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),n.jsx(Ge,{children:"Top reasons for losing deals"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:E.length>0?E.map((N,A)=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:N.reason}),n.jsxs("span",{className:"text-sm text-red-600",children:[N.percentage.toFixed(0),"%"]})]}),n.jsx(uc,{value:N.percentage,className:"h-2"})]},A)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Lessons Learned"}),n.jsx(Ge,{children:"Key insights from win/loss reports"})]}),n.jsx(pe,{children:e.length>0?n.jsx("div",{className:"space-y-4",children:e.slice(0,5).map((N,A)=>n.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[N.outcome==="won"?n.jsx(Ve,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):n.jsx(Ve,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),n.jsx("span",{className:"text-sm font-medium",children:N.primaryReason})]}),n.jsx("div",{className:"space-y-2",children:N.lessonsLearned.map((_,k)=>n.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",_]},k))})]},A))}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),n.jsx(ht,{value:"closed-deals",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recently Closed Deals"}),n.jsx(Ge,{children:"Deals that have been won or lost"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:d.length>0?d.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:N.name}),n.jsx(Ve,{className:N.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:N.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",N.customerName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Value:"})," ",Fe(N.value)]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Closed:"})," ",N.actualCloseDate?wt(N.actualCloseDate):"N/A"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Rep:"})," ",N.assignedTo]})]})]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>v(N),className:"shadow-sm",children:[n.jsx(Dt,{className:"h-3 w-3 mr-1"}),"Report"]})]},N.id)):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),n.jsx(ht,{value:"reports",className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Win/Loss Reports"}),n.jsx(Ge,{children:"Detailed reports on won and lost deals"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:e.length>0?e.map(N=>{const A=t.find(_=>_.id===N.dealId);return n.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:N.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:N.outcome.toUpperCase()}),n.jsx("h3",{className:"font-semibold",children:A?.name||"Unknown Deal"})]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:wt(N.reportedAt)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Primary:"})," ",N.primaryReason]}),N.secondaryReasons.length>0&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Secondary:"})," ",N.secondaryReasons.join(", ")]}),N.competitorWon&&n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Competitor:"})," ",N.competitorWon]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N.feedback})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),n.jsx("ul",{className:"text-sm space-y-1",children:N.lessonsLearned.map((_,k)=>n.jsxs("li",{children:["• ",_]},k))})]}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),n.jsx("ul",{className:"text-sm space-y-1",children:N.actionItems.map((_,k)=>n.jsxs("li",{children:["• ",_]},k))})]})]})]})]},N.id)}):n.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function due({deal:t,onClose:e,onEdit:r}){const s=l=>{switch(l){case Pn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pn.WON:return"bg-green-50 text-green-700 border-green-200";case Pn.LOST:return"bg-red-50 text-red-700 border-red-200";case Pn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=l=>{switch(l){case ed.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case ed.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case ed.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ed.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},a=l=>{switch(l){case Ft.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case Ft.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ft.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case Ft.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case Ft.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case Ft.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case Ft.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=l=>new Date(l.expectedCloseDate)<new Date&&l.status===Pn.ACTIVE;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:t.name}),n.jsx(Ge,{children:"Deal details and information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>r(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",s(t.status)),children:t.status.toUpperCase()}),n.jsx(Ve,{className:pt("ri-badge-status",a(t.stage)),children:t.stage.replace("_"," ").toUpperCase()}),n.jsx(Ve,{className:pt("ri-badge-status",i(t.priority)),children:t.priority.toUpperCase()}),o(t)&&n.jsxs(Ve,{className:"bg-red-50 text-red-700 border-red-200",children:[n.jsx(ao,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),t.requiresApproval&&n.jsx(Ve,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),n.jsxs(fn,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"products",children:"Products"}),n.jsx(dt,{value:"history",children:"History"})]}),n.jsxs(ht,{value:"overview",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:t.customerName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),n.jsx("p",{className:"font-bold text-primary text-lg",children:Fe(t.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ic,{className:"h-4 w-4 text-blue-500"}),n.jsxs("p",{className:"font-medium",children:[t.probability,"%"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Br,{className:"h-4 w-4 text-purple-500"}),n.jsx("p",{className:"font-medium",children:wt(t.expectedCloseDate)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vs,{className:"h-4 w-4 text-green-500"}),n.jsx("p",{className:"font-medium",children:t.assignedTo||"Unassigned"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vu,{className:"h-4 w-4 text-orange-500"}),n.jsx("p",{className:"font-medium",children:t.territoryId||"No Territory"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Dr,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:wt(t.createdAt)})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Dr,{className:"h-4 w-4 text-blue-500"}),n.jsx("p",{className:"font-medium",children:wt(t.updatedAt)})]})]})]}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.notes})})]}),Object.keys(t.customFields||{}).length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),n.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(t.customFields||{}).map(([l,c])=>n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"text-sm",children:c?.toString()})]},l))})]})]}),n.jsxs(ht,{value:"products",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),t.products&&t.products.length>0?n.jsxs("div",{className:"space-y-3",children:[t.products.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ai,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"font-medium",children:l.productName})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Quantity: ",l.quantity]}),n.jsxs("span",{children:["Unit Price: ",Fe(l.unitPrice)]}),l.discount>0&&n.jsxs("span",{className:"text-green-600",children:["Discount: ",Fe(l.discount)]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold",children:Fe(l.total)})})]},l.id)),n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:Fe(t.value)})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ai,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added to this deal"}),n.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),n.jsxs(ht,{value:"history",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),t.stageHistory&&t.stageHistory.length>0?n.jsx("div",{className:"space-y-3",children:t.stageHistory.map((l,c)=>n.jsxs("div",{className:"relative",children:[c<t.stageHistory.length-1&&n.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:c+1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:l.fromStage?`${l.fromStage.replace("_"," ")} → ${l.toStage.replace("_"," ")}`:`Started at ${l.toStage.replace("_"," ")}`}),n.jsx("span",{className:"text-xs text-muted-foreground",children:wt(l.changedAt)})]}),l.duration!==void 0&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",l.duration," hours"]}),l.notes&&n.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:l.notes})]})]})]},c))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Dr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No stage history available"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{variant:"outline",onClick:e,children:"Close"}),n.jsxs(re,{onClick:()=>r(t),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function uue({territories:t,salesReps:e,deals:r,onCreateTerritory:s,onUpdateTerritory:i,onDeleteTerritory:a}){const[o,l]=S.useState(!1),[c,d]=S.useState(null),[u,h]=S.useState({name:"",type:Ch.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[f,p]=S.useState({field:"",operator:"equals",value:"",priority:1}),y=()=>{d(null),h({name:"",type:Ch.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),l(!0)},v=N=>{d(N),h({name:N.name,type:N.type,description:N.description,assignedTo:[...N.assignedTo],rules:[...N.rules],isActive:N.isActive}),l(!0)},g=()=>{u.name&&(c?i(c.id,u):s(u),l(!1),d(null),h({name:"",type:Ch.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},b=()=>{if(!f.field||!f.operator)return;const N={id:Math.random().toString(36).substr(2,9),field:f.field,operator:f.operator,value:f.value,priority:f.priority||1};h(A=>({...A,rules:[...A.rules||[],N]})),p({field:"",operator:"equals",value:"",priority:1})},j=N=>{h(A=>({...A,rules:A.rules?.filter(_=>_.id!==N)||[]}))},w=(N,A)=>{h(A?_=>({..._,assignedTo:[..._.assignedTo||[],N]}):_=>({..._,assignedTo:_.assignedTo?.filter(k=>k!==N)||[]}))},C=N=>r.filter(_=>_.territoryId===N).length,E=N=>{const A=t.find(_=>_.id===N);return A?e.filter(_=>A.assignedTo.includes(_.id)):[]};return n.jsxs("div",{className:"space-y-6",children:[o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:c?"Edit Territory":"Create Territory"}),n.jsx(Ge,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Territory Name *"}),n.jsx(Te,{id:"name",value:u.name,onChange:N=>h(A=>({...A,name:N.target.value})),placeholder:"e.g., North Region"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"type",children:"Territory Type"}),n.jsxs(nt,{value:u.type,onValueChange:N=>h(A=>({...A,type:N})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:Ch.GEOGRAPHIC,children:"Geographic"}),n.jsx(he,{value:Ch.INDUSTRY,children:"Industry"}),n.jsx(he,{value:Ch.ACCOUNT_SIZE,children:"Account Size"}),n.jsx(he,{value:Ch.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"description",children:"Description"}),n.jsx(kr,{id:"description",value:u.description,onChange:N=>h(A=>({...A,description:N.target.value})),placeholder:"Describe the territory",rows:3})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx(ue,{children:"Territory Rules"})}),n.jsxs("div",{className:"space-y-4",children:[u.rules?.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:N.field}),n.jsx("span",{className:"text-muted-foreground",children:N.operator}),n.jsx("span",{children:N.value.toString()})]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",N.priority]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>j(N.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]},N.id)),n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Field"}),n.jsxs(nt,{value:f.field,onValueChange:N=>p(A=>({...A,field:N})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select field"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"state",children:"State"}),n.jsx(he,{value:"zipCode",children:"Zip Code"}),n.jsx(he,{value:"country",children:"Country"}),n.jsx(he,{value:"industry",children:"Industry"}),n.jsx(he,{value:"dealSize",children:"Deal Size"}),n.jsx(he,{value:"productType",children:"Product Type"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Operator"}),n.jsxs(nt,{value:f.operator,onValueChange:N=>p(A=>({...A,operator:N})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"equals",children:"Equals"}),n.jsx(he,{value:"contains",children:"Contains"}),n.jsx(he,{value:"starts_with",children:"Starts With"}),n.jsx(he,{value:"in_range",children:"In Range"}),n.jsx(he,{value:"greater_than",children:"Greater Than"}),n.jsx(he,{value:"less_than",children:"Less Than"})]})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ue,{children:"Value"}),n.jsx(Te,{value:f.value?.toString()||"",onChange:N=>p(A=>({...A,value:N.target.value})),placeholder:"Rule value"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(ue,{children:"Priority"}),n.jsxs(nt,{value:f.priority?.toString()||"1",onValueChange:N=>p(A=>({...A,priority:parseInt(N)})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"1",children:"1 - Highest"}),n.jsx(he,{value:"2",children:"2"}),n.jsx(he,{value:"3",children:"3"}),n.jsx(he,{value:"4",children:"4"}),n.jsx(he,{value:"5",children:"5 - Lowest"})]})]})]}),n.jsx("div",{className:"flex justify-end mt-4",children:n.jsxs(re,{onClick:b,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"mb-2 block",children:"Assign Sales Reps"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:e.map(N=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:`rep-${N.id}`,checked:u.assignedTo?.includes(N.id),onCheckedChange:A=>w(N.id,!!A)}),n.jsx(ue,{htmlFor:`rep-${N.id}`,className:"text-sm cursor-pointer",children:N.name})]},N.id))})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"isActive",checked:u.isActive,onCheckedChange:N=>h(A=>({...A,isActive:!!N}))}),n.jsx(ue,{htmlFor:"isActive",children:"Active territory"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),n.jsxs(re,{onClick:g,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),n.jsxs(re,{onClick:y,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),n.jsxs("div",{className:"space-y-6",children:[t.map(N=>n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ne,{children:N.name}),n.jsx(Ve,{className:N.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:N.isActive?"Active":"Inactive"}),n.jsx(Ve,{variant:"outline",children:N.type.replace("_"," ")})]}),n.jsx(Ge,{className:"mt-1",children:N.description})]}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>v(N),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx(pe,{children:n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),n.jsxs("div",{className:"space-y-2",children:[N.rules.map(A=>n.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:A.field}),n.jsx("span",{className:"text-muted-foreground",children:A.operator}),n.jsx("span",{children:A.value.toString()})]})},A.id)),N.rules.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),n.jsxs("div",{className:"space-y-2",children:[E(N.id).map(A=>n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[n.jsx(gs,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:A.name})]},A.id)),N.assignedTo.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),n.jsx("span",{className:"font-bold text-blue-700",children:C(N.id)})]}),n.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),n.jsx("span",{className:"font-bold text-green-700",children:N.assignedTo.length})]})]})]})]})})]},N.id)),t.length===0&&n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(vu,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),n.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),n.jsxs(re,{onClick:y,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function hue({deals:t,approvalWorkflows:e,onApprove:r,onReject:s,onEscalate:i}){const[a,o]=S.useState("pending"),[l,c]=S.useState(null),[d,u]=S.useState(""),h=j=>{switch(j){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=j=>{switch(j){case"pending":return n.jsx(Dr,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(hn,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(zo,{className:"h-4 w-4 text-red-500"});case"escalated":return n.jsx(ao,{className:"h-4 w-4 text-orange-500"});default:return n.jsx(Dr,{className:"h-4 w-4 text-gray-500"})}},p=j=>e.filter(w=>w.status===j),y=j=>t.find(w=>w.id===j),v=()=>{if(!l)return;const j=l.steps.find(w=>w.stepNumber===l.currentStep);j&&(r(l.id,j.id,d),u(""),c(null))},g=()=>{if(!l)return;const j=l.steps.find(w=>w.stepNumber===l.currentStep);j&&(s(l.id,j.id,d),u(""),c(null))},b=()=>{if(!l)return;const j=l.steps.find(w=>w.stepNumber===l.currentStep);j&&(i(l.id,j.id,d),u(""),c(null))};return n.jsxs("div",{className:"space-y-6",children:[l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Approval Request"}),n.jsx(Ge,{children:y(l.dealId)?.name||"Unknown Deal"})]}),n.jsx(Ve,{className:pt("ri-badge-status",h(l.status)),children:l.status.toUpperCase()})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const j=y(l.dealId);return j?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),n.jsx("p",{className:"text-sm",children:j.customerName})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-sm font-bold",children:Fe(j.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),n.jsx("p",{className:"text-sm",children:j.stage.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),n.jsx("p",{className:"text-sm",children:j.assignedTo})]})]}):null})()})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Type:"}),n.jsx("p",{className:"text-sm",children:l.workflowType.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsx("p",{className:"text-sm",children:l.requestedBy})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:wt(l.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),n.jsxs("p",{className:"text-sm",children:[l.currentStep," of ",l.totalSteps]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"comments",children:"Comments"}),n.jsx(kr,{id:"comments",value:d,onChange:j=>u(j.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),n.jsx("div",{className:"space-y-4",children:l.steps.map((j,w)=>{const C=j.stepNumber===l.currentStep,E=j.stepNumber<l.currentStep;return n.jsxs("div",{className:pt("p-3 rounded-lg border-2",C?"border-primary bg-primary/5":E?"border-muted bg-muted/10":"border-dashed border-muted"),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:j.stepNumber}),n.jsx("span",{className:"font-medium",children:j.approverRole.replace("_"," ")})]}),n.jsxs(Ve,{className:pt("ri-badge-status",h(j.status)),children:[f(j.status),n.jsx("span",{className:"ml-1",children:j.status.toUpperCase()})]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",j.requiredApprovals," approval(s) from ",j.approverIds.length," approver(s)"]}),j.currentApprovals.length>0&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),j.currentApprovals.map((N,A)=>n.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[N.action==="approve"?n.jsx(qZ,{className:"h-3 w-3 text-green-500 mt-0.5"}):N.action==="reject"?n.jsx(zZ,{className:"h-3 w-3 text-red-500 mt-0.5"}):n.jsx(ao,{className:"h-3 w-3 text-orange-500 mt-0.5"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:N.approverId}),n.jsx("div",{className:"text-muted-foreground",children:wt(N.actionDate)}),N.comments&&n.jsx("div",{className:"mt-1 italic",children:N.comments})]})]},A))]})]},j.id)})})]}),l.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"comments",children:"Comments"}),n.jsx(kr,{id:"comments",value:d,onChange:j=>u(j.target.value),placeholder:"Add your comments here...",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),n.jsxs(re,{variant:"outline",onClick:b,children:[n.jsx(ao,{className:"h-4 w-4 mr-2"}),"Escalate"]}),n.jsxs(re,{variant:"destructive",onClick:g,children:[n.jsx(zo,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(re,{variant:"default",onClick:v,children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),l.status!=="pending"&&n.jsx("div",{className:"flex justify-end pt-6 border-t",children:n.jsx(re,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),n.jsxs(fn,{value:a,onValueChange:o,className:"space-y-6",children:[n.jsxs(sn,{children:[n.jsxs(dt,{value:"pending",children:["Pending",n.jsx(Ve,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:p("pending").length})]}),n.jsxs(dt,{value:"approved",children:["Approved",n.jsx(Ve,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:p("approved").length})]}),n.jsxs(dt,{value:"rejected",children:["Rejected",n.jsx(Ve,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:p("rejected").length})]}),n.jsxs(dt,{value:"escalated",children:["Escalated",n.jsx(Ve,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:p("escalated").length})]})]}),n.jsx(ht,{value:"pending",className:"space-y-4",children:p("pending").length>0?p("pending").map(j=>{const w=y(j.dealId);return w?n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(j),children:n.jsxs(pe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:w.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),n.jsxs(Ve,{className:pt("ri-badge-status",h(j.status)),children:[f(j.status),n.jsx("span",{className:"ml-1",children:j.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Fe(w.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),n.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[n.jsx(vs,{className:"h-4 w-4 text-blue-500"}),n.jsx("span",{className:"text-sm",children:j.requestedBy})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:wt(j.requestedAt)})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),n.jsxs("span",{className:"text-sm",children:[j.currentStep," of ",j.totalSteps]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:j.steps.map((C,E)=>{const N=C.stepNumber<j.currentStep,A=C.stepNumber===j.currentStep;return n.jsxs(be.Fragment,{children:[n.jsx("div",{className:pt("flex items-center justify-center w-8 h-8 rounded-full",N?"bg-primary text-primary-foreground":A?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:C.stepNumber}),E<j.steps.length-1&&n.jsx(z4,{className:"h-4 w-4 text-muted-foreground"})]},C.id)})})]})]})},j.id):null}):n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Dr,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),n.jsx(ht,{value:"approved",className:"space-y-4",children:p("approved").length>0?p("approved").map(j=>{const w=y(j.dealId);return w?n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(j),children:n.jsxs(pe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:w.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),n.jsxs(Ve,{className:pt("ri-badge-status",h(j.status)),children:[f(j.status),n.jsx("span",{className:"ml-1",children:j.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Fe(w.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:j.completedAt?wt(j.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:j.workflowType.replace("_"," ")})]})]})]})},j.id):null}):n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(hn,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),n.jsx(ht,{value:"rejected",className:"space-y-4",children:p("rejected").length>0?p("rejected").map(j=>{const w=y(j.dealId);return w?n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(j),children:n.jsxs(pe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:w.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),n.jsxs(Ve,{className:pt("ri-badge-status",h(j.status)),children:[f(j.status),n.jsx("span",{className:"ml-1",children:j.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Fe(w.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),n.jsx("p",{className:"text-sm",children:j.completedAt?wt(j.completedAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:j.workflowType.replace("_"," ")})]})]})]})},j.id):null}):n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(zo,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),n.jsx(ht,{value:"escalated",className:"space-y-4",children:p("escalated").length>0?p("escalated").map(j=>{const w=y(j.dealId);return w?n.jsx(me,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(j),children:n.jsxs(pe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:w.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),n.jsxs(Ve,{className:pt("ri-badge-status",h(j.status)),children:[f(j.status),n.jsx("span",{className:"ml-1",children:j.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),n.jsx("p",{className:"text-lg font-bold text-primary",children:Fe(w.value)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),n.jsx("p",{className:"text-sm",children:wt(j.requestedAt)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),n.jsx("p",{className:"text-sm capitalize",children:j.workflowType.replace("_"," ")})]})]})]})},j.id):null}):n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(ao,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),n.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function fue({deal:t,customers:e,salesReps:r,territories:s,products:i,onSave:a,onCancel:o}){const{toast:l}=Gt(),[c,d]=S.useState(!1),[u,h]=S.useState({name:"",customerId:"",customerName:"",stage:Ft.PROSPECTING,status:Pn.ACTIVE,priority:ed.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+720*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[f,p]=S.useState(!1),[y,v]=S.useState(!1),[g,b]=S.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});S.useEffect(()=>{t&&h({...t,expectedCloseDate:new Date(t.expectedCloseDate)})},[t]),S.useEffect(()=>{if(u.customerId){const A=e.find(_=>_.id===u.customerId);A&&h(_=>({..._,customerName:`${A.firstName} ${A.lastName}`}))}},[u.customerId,e]),S.useEffect(()=>{if(u.products&&u.products.length>0){const A=u.products.reduce((_,k)=>_+k.total,0);h(_=>({..._,value:A}))}},[u.products]),S.useEffect(()=>{const A=g.quantity||1,_=g.unitPrice||0,k=g.discount||0,F=A*_-k;b(I=>({...I,total:F}))},[g.quantity,g.unitPrice,g.discount]);const j=async A=>{if(A.preventDefault(),!u.name||!u.customerId||!u.expectedCloseDate){l({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}d(!0);try{await a(u),l({title:"Success",description:`Deal ${t?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${t?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},w=()=>{if(!g.productId||!g.productName){l({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const A={id:Math.random().toString(36).substr(2,9),productId:g.productId,productName:g.productName,quantity:g.quantity||1,unitPrice:g.unitPrice||0,discount:g.discount||0,total:g.total||0};h(_=>({..._,products:[..._.products||[],A]})),b({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),p(!1)},C=A=>{h(_=>({..._,products:_.products?.filter(k=>k.id!==A)||[]}))},E=A=>{const _=i.find(k=>k.id===A);_&&b({productId:_.id,productName:_.name,quantity:1,unitPrice:_.price,discount:0,total:_.price})},N=A=>{h(_=>({..._,customerId:A.id,customerName:`${A.firstName} ${A.lastName}`})),v(!1),l({title:"Customer Added",description:`${A.firstName} ${A.lastName} has been added as a customer.`})};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[y&&n.jsx(rv,{onClose:()=>v(!1),onSuccess:N}),n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Deal":"Create Deal"}),n.jsx(Ge,{children:t?"Update deal details":"Create a new sales deal"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:o,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(ic,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Deal Name *"}),n.jsx(Te,{id:"name",value:u.name,onChange:A=>h(_=>({..._,name:A.target.value})),placeholder:"Enter deal name"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(nt,{value:u.customerId||"",onValueChange:A=>h(_=>({..._,customerId:A})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select customer"})}),n.jsxs(tt,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(re,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>v(!0),children:[n.jsx(Dt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),e.map(A=>n.jsxs(he,{value:A.id,children:[A.firstName," ",A.lastName]},A.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"stage",children:"Stage"}),n.jsxs(nt,{value:u.stage,onValueChange:A=>h(_=>({..._,stage:A,probability:A===Ft.PROSPECTING?10:A===Ft.QUALIFICATION?25:A===Ft.NEEDS_ANALYSIS?40:A===Ft.PROPOSAL?60:A===Ft.NEGOTIATION?80:A===Ft.CLOSED_WON?100:A===Ft.CLOSED_LOST?0:10})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:Ft.PROSPECTING,children:"Prospecting"}),n.jsx(he,{value:Ft.QUALIFICATION,children:"Qualification"}),n.jsx(he,{value:Ft.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(he,{value:Ft.PROPOSAL,children:"Proposal"}),n.jsx(he,{value:Ft.NEGOTIATION,children:"Negotiation"}),n.jsx(he,{value:Ft.CLOSED_WON,children:"Closed Won"}),n.jsx(he,{value:Ft.CLOSED_LOST,children:"Closed Lost"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"priority",children:"Priority"}),n.jsxs(nt,{value:u.priority,onValueChange:A=>h(_=>({..._,priority:A})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:ed.LOW,children:"Low"}),n.jsx(he,{value:ed.MEDIUM,children:"Medium"}),n.jsx(he,{value:ed.HIGH,children:"High"}),n.jsx(he,{value:ed.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"probability",children:"Probability (%)"}),n.jsx(Te,{id:"probability",type:"number",min:"0",max:"100",value:u.probability,onChange:A=>h(_=>({..._,probability:parseInt(A.target.value)||0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),n.jsx(Te,{id:"expectedCloseDate",type:"date",value:u.expectedCloseDate?new Date(u.expectedCloseDate).toISOString().split("T")[0]:"",onChange:A=>h(_=>({..._,expectedCloseDate:new Date(A.target.value)}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"assignedTo",children:"Assigned To"}),n.jsxs(nt,{value:u.assignedTo,onValueChange:A=>h(_=>({..._,assignedTo:A})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select sales rep"})}),n.jsx(tt,{children:r.map(A=>n.jsx(he,{value:A.id,children:A.name},A.id))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"territoryId",children:"Territory"}),n.jsxs(nt,{value:u.territoryId,onValueChange:A=>h(_=>({..._,territoryId:A})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select territory"})}),n.jsx(tt,{children:s.map(A=>n.jsx(he,{value:A.id,children:A.name},A.id))})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[n.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Products"]}),n.jsxs(re,{type:"button",onClick:()=>p(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),f&&n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Product"}),n.jsxs(nt,{onValueChange:E,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select product"})}),n.jsx(tt,{children:i.map(A=>n.jsxs(he,{value:A.id,children:[A.name," - ",Fe(A.price)]},A.id))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Quantity"}),n.jsx(Te,{type:"number",min:"1",value:g.quantity,onChange:A=>b(_=>({..._,quantity:parseInt(A.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Unit Price"}),n.jsx(Te,{type:"number",min:"0",step:"0.01",value:g.unitPrice,onChange:A=>b(_=>({..._,unitPrice:parseFloat(A.target.value)||0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Discount"}),n.jsx(Te,{type:"number",min:"0",step:"0.01",value:g.discount,onChange:A=>b(_=>({..._,discount:parseFloat(A.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Fe(g.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),n.jsx(re,{type:"button",onClick:w,children:"Add Product"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:u.products&&u.products.length>0?u.products.map(A=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:A.productName}),n.jsxs(Ve,{variant:"outline",children:[A.quantity," × ",Fe(A.unitPrice)]})]}),A.discount>0&&n.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",Fe(A.discount)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Fe(A.total)}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},A.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ai,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No products added yet"}),n.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),u.products&&u.products.length>0&&n.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),n.jsx("span",{className:"text-lg font-bold text-primary",children:Fe(u.value||0)})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),n.jsx(kr,{value:u.notes,onChange:A=>h(_=>({..._,notes:A.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"requiresApproval",checked:u.requiresApproval,onCheckedChange:A=>h(_=>({..._,requiresApproval:!!A}))}),n.jsx(ue,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:o,disabled:c,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Deal"]})})]})]})})]})]})}function $k(){const{deals:t,territories:e,approvalWorkflows:r,winLossReports:s,createDeal:i,updateDealStage:a,createApprovalWorkflow:o,createWinLossReport:l,getDealMetrics:c}=$ie(),{leads:d,salesReps:u}=Au(),{vehicles:h}=df(),[f,p]=S.useState(""),[y,v]=S.useState("all"),[g,b]=S.useState("all"),[j,w]=S.useState(null),[C,E]=S.useState(!1),[N,A]=S.useState("pipeline"),[_,k]=S.useState(!1),{toast:F}=Gt(),I=$=>{switch($){case Pn.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case Pn.WON:return"bg-green-50 text-green-700 border-green-200";case Pn.LOST:return"bg-red-50 text-red-700 border-red-200";case Pn.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Pn.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},T=t.filter($=>{const W=$.name.toLowerCase().includes(f.toLowerCase())||$.customerName.toLowerCase().includes(f.toLowerCase()),te=y==="all"||$.stage===y,ee=g==="all"||$.assignedTo===g;return W&&te&&ee}),R=async($,W)=>{try{await a($,W);const te=t.find(ee=>ee.id===$);te&&F({title:"Deal Stage Updated",description:`${te.name} moved to ${W.replace("_"," ").toLowerCase()}`})}catch{F({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},O=$=>{w($),k(!0)},z=()=>{w(null),E(!0)},q=$=>{w($),E(!0)},B=async $=>{j?await a(j.id,$.stage||j.stage):await i($),E(!1),w(null)},K=async($,W)=>{await o($,W)},Y=async($,W,te)=>{await l($,W,te)},J=c(),H=h.map($=>({id:$.id,name:`${$.year} ${$.make} ${$.model}`,price:$.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return n.jsxs("div",{className:"space-y-8",children:[_&&j&&n.jsx(due,{deal:j,onClose:()=>k(!1),onEdit:q}),C&&n.jsx(fue,{deal:j||void 0,customers:d,salesReps:u,territories:e,products:H,onSave:B,onCancel:()=>{E(!1),w(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),n.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),n.jsxs(re,{className:"shadow-sm",onClick:z,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),n.jsx(rr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Fe(J.totalValue)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),J.totalDeals," active deals"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),n.jsx(ic,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[J.winRate.toFixed(1),"%"]}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),J.wonDeals," won deals"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),n.jsx(rr,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Fe(J.averageDealSize)}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),J.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Territories"}),n.jsx(vu,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:e.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(gs,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),n.jsxs(fn,{value:N,onValueChange:A,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-5",children:[n.jsx(dt,{value:"pipeline",children:"Pipeline"}),n.jsx(dt,{value:"deals",children:"Deals"}),n.jsx(dt,{value:"analytics",children:"Analytics"}),n.jsx(dt,{value:"territories",children:"Territories"}),n.jsx(dt,{value:"approvals",children:"Approvals"})]}),n.jsx(ht,{value:"pipeline",className:"space-y-6",children:n.jsx(sue,{deals:t,onDealStageChange:R,onDealClick:O})}),n.jsxs(ht,{value:"deals",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search deals...",value:f,onChange:$=>p($.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:y,onValueChange:v,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Stage"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Stages"}),n.jsx(he,{value:Ft.PROSPECTING,children:"Prospecting"}),n.jsx(he,{value:Ft.QUALIFICATION,children:"Qualification"}),n.jsx(he,{value:Ft.NEEDS_ANALYSIS,children:"Needs Analysis"}),n.jsx(he,{value:Ft.PROPOSAL,children:"Proposal"}),n.jsx(he,{value:Ft.NEGOTIATION,children:"Negotiation"}),n.jsx(he,{value:Ft.CLOSED_WON,children:"Closed Won"}),n.jsx(he,{value:Ft.CLOSED_LOST,children:"Closed Lost"})]})]}),n.jsxs(nt,{value:g,onValueChange:b,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Sales Rep"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Reps"}),u.map($=>n.jsx(he,{value:$.id,children:$.name},$.id))]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"text-xl",children:["Deals (",T.length,")"]}),n.jsx(Ge,{children:"Manage your sales pipeline and deal progression"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[T.map($=>n.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>q($),children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:$.name}),n.jsx(Ve,{className:pt("ri-badge-status",I($.status)),children:$.status.toUpperCase()}),n.jsx(Ve,{variant:"outline",children:$.stage.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(gs,{className:"h-3 w-3 mr-2 text-blue-500"}),$.customerName]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(rr,{className:"h-3 w-3 mr-2 text-green-500"}),Fe($.value)]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(ic,{className:"h-3 w-3 mr-2 text-purple-500"}),$.probability,"% probability"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(vu,{className:"h-3 w-3 mr-2 text-orange-500"}),e.find(W=>W.id===$.territoryId)?.name||"No Territory"]})]}),$.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:$.notes})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:W=>{W.stopPropagation(),O($)},children:"View"}),$.requiresApproval&&n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:W=>{W.stopPropagation(),K($.id,"deal_value")},children:"Request Approval"})]})]},$.id)),T.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(ic,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deals found"}),n.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),n.jsx(ht,{value:"analytics",className:"space-y-6",children:n.jsxs(fn,{defaultValue:"metrics",className:"space-y-6",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"metrics",children:"Deal Metrics"}),n.jsx(dt,{value:"win-loss",children:"Win/Loss Analysis"})]}),n.jsx(ht,{value:"metrics",children:n.jsx(iue,{metrics:J})}),n.jsx(ht,{value:"win-loss",children:n.jsx(cue,{deals:t,winLossReports:s,onCreateReport:Y})})]})}),n.jsx(ht,{value:"territories",className:"space-y-6",children:n.jsx(uue,{territories:e,salesReps:u,deals:t,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),n.jsx(ht,{value:"approvals",className:"space-y-6",children:n.jsx(hue,{deals:t,approvalWorkflows:r,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function mue(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx($k,{})}),n.jsx(Ut,{path:"/*",element:n.jsx($k,{})})]})}var En=(t=>(t.TEXT="text",t.DATE="date",t.SIGNATURE="signature",t.CHECKBOX="checkbox",t))(En||{});const vN="JVBERi0xLjQKMSAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL1R5cGUgL1BhZ2VzCi9LaWRzIFszIDAgUl0KL0NvdW50IDEKPD4KZW5kb2JqCjMgMCBvYmoKPDwKL1R5cGUgL1BhZ2UKL1BhcmVudCAyIDAgUgovTWVkaWFCb3ggWzAgMCA2MTIgNzkyXQovUmVzb3VyY2VzIDw8Ci9Gb250IDw8Ci9GMSA0IDAgUgo+Pgo+PgovQ29udGVudHMgNSAwIFIKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9CYXNlRm9udCAvSGVsdmV0aWNhCj4+CmVuZG9iago1IDAgb2JqCjw8Ci9MZW5ndGggNDQKPj4Kc3RyZWFtCkJUCi9GMSAxMiBUZgoxMDAgNzAwIFRkCihTYW1wbGUgUERGKSBUagpFVApzdHJlYW0KZW5kb2JqCnhyZWYKMCA2CjAwMDAwMDAwMDAgNjU1MzUgZiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAwMDAwMDU4IDAwMDAwIG4gCjAwMDAwMDAxMTUgMDAwMDAgbiAKMDAwMDAwMDI0NSAwMDAwMCBuIAowMDAwMDAwMzIyIDAwMDAwIG4gCnRyYWlsZXIKPDwKL1NpemUgNgovUm9vdCAxIDAgUgo+PgpzdGFydHhyZWYKNDE0CiUlRU9G",xN=[{id:"template-001",name:"Standard Purchase Agreement",description:"Standard vehicle purchase agreement template",pdfBase64:vN,fields:[{id:"field-001",type:En.TEXT,label:"Customer Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter customer name"},{id:"field-002",type:En.DATE,label:"Agreement Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-003",type:En.TEXT,label:"Vehicle VIN",x:100,y:200,width:250,height:30,required:!0,defaultValue:"",placeholder:"Enter VIN number"},{id:"field-004",type:En.SIGNATURE,label:"Customer Signature",x:100,y:400,width:200,height:60,required:!0},{id:"field-005",type:En.CHECKBOX,label:"Terms Accepted",x:100,y:350,width:20,height:20,required:!0,checkboxLabel:"I agree to the terms and conditions"}],createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-15T14:30:00Z",isActive:!0},{id:"template-002",name:"Lease Agreement Template",description:"Standard lease agreement for RV rentals",pdfBase64:vN,fields:[{id:"field-006",type:En.TEXT,label:"Lessee Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter lessee name"},{id:"field-007",type:En.DATE,label:"Lease Start Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-008",type:En.DATE,label:"Lease End Date",x:350,y:200,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-009",type:En.TEXT,label:"Monthly Payment",x:100,y:250,width:150,height:30,required:!0,defaultValue:"$",placeholder:"Enter amount"},{id:"field-010",type:En.SIGNATURE,label:"Lessee Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-12T11:00:00Z",updatedAt:"2024-01-18T16:45:00Z",isActive:!0},{id:"template-003",name:"Service Agreement",description:"Service agreement template for maintenance contracts",pdfBase64:vN,fields:[{id:"field-011",type:En.TEXT,label:"Service Provider",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter service provider name"},{id:"field-012",type:En.TEXT,label:"Service Description",x:100,y:200,width:400,height:60,required:!0,defaultValue:"",placeholder:"Describe services to be provided"},{id:"field-013",type:En.CHECKBOX,label:"Emergency Service",x:100,y:280,width:20,height:20,required:!1,checkboxLabel:"Include 24/7 emergency service"},{id:"field-014",type:En.SIGNATURE,label:"Authorized Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-08T09:00:00Z",updatedAt:"2024-01-20T12:15:00Z",isActive:!0}],yN="agreement_templates";function $T(){const[t,e]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState(null);S.useEffect(()=>{try{const b=Bn(yN,[]);b.length===0?(e(xN),rn(yN,xN)):e(b)}catch(b){console.error("Error loading templates:",b),a("Failed to load templates"),e(xN)}finally{s(!1)}},[]);const o=S.useCallback(b=>{try{rn(yN,b),e(b),a(null)}catch(j){console.error("Error saving templates:",j),a("Failed to save templates")}},[]),l=S.useCallback(()=>t,[t]),c=S.useCallback(b=>t.find(j=>j.id===b),[t]),d=S.useCallback(b=>{const j={...b,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},w=[...t,j];return o(w),j},[t,o]),u=S.useCallback((b,j)=>{const w=t.map(C=>C.id===b?{...C,...j,updatedAt:new Date().toISOString()}:C);return o(w),w.find(C=>C.id===b)},[t,o]),h=S.useCallback(b=>{const j=t.filter(w=>w.id!==b);o(j)},[t,o]),f=S.useCallback(b=>{const j=t.find(E=>E.id===b);if(!j)throw new Error("Template not found");const w={...j,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Copy of ${j.name}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),fields:j.fields.map(E=>({...E,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))},C=[...t,w];return o(C),w},[t,o]),p=S.useCallback((b,j)=>{u(b,{fields:j})},[u]),y=S.useCallback((b,j)=>{const w=c(b);if(!w)return;const C=[...w.fields,j];u(b,{fields:C})},[c,u]),v=S.useCallback((b,j)=>{const w=c(b);if(!w)return;const C=w.fields.filter(E=>E.id!==j);u(b,{fields:C})},[c,u]),g=S.useCallback((b,j,w)=>{const C=c(b);if(!C)return;const E=C.fields.map(N=>N.id===j?{...N,...w}:N);u(b,{fields:E})},[c,u]);return{templates:t,loading:r,error:i,getTemplates:l,getTemplate:c,addTemplate:d,updateTemplate:u,deleteTemplate:h,duplicateTemplate:f,updateTemplateFields:p,addFieldToTemplate:y,removeFieldFromTemplate:v,updateFieldInTemplate:g}}function pue({onSelect:t,onClose:e,onCreateNew:r}){const{templates:s,loading:i}=$T(),[a,o]=S.useState(""),l=s.filter(u=>u.isActive&&(u.name.toLowerCase().includes(a.toLowerCase())||u.description?.toLowerCase().includes(a.toLowerCase()))),c=u=>{t(u),e()},d=()=>{e(),r&&r()};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:"Select Agreement Template"}),n.jsx(Ge,{children:"Choose a template to start your new agreement"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search templates...",value:a,onChange:u=>o(u.target.value),className:"pl-10 shadow-sm"})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:i?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.length>0?n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:l.map(u=>n.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/50",onClick:()=>c(u),children:[n.jsx(je,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ne,{className:"text-base",children:u.name}),u.description&&n.jsx(Ge,{className:"mt-1 text-sm",children:u.description})]}),n.jsx(Ve,{variant:"default",className:"ml-2",children:"Active"})]})}),n.jsxs(pe,{className:"pt-0",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(yr,{className:"h-4 w-4 mr-1"}),u.fields.length," fields"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-4 w-4 mr-1"}),wt(u.updatedAt)]})]}),n.jsx("div",{className:"mt-3",children:n.jsx(re,{size:"sm",className:"w-full",onClick:h=>{h.stopPropagation(),c(u)},children:"Use This Template"})})]})]},u.id))}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:a?"No templates found":"No templates available"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:a?"Try adjusting your search terms":"Create your first template to get started"}),r&&n.jsxs(re,{onClick:d,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create New Template"]})]})}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[n.jsx(yr,{className:"h-4 w-4 mr-1"}),l.length," template",l.length!==1?"s":""," available"]}),n.jsxs("div",{className:"flex space-x-3",children:[r&&n.jsxs(re,{variant:"outline",onClick:d,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create New Template"]}),n.jsx(re,{variant:"outline",onClick:e,children:"Cancel"})]})]})]})]})})}function gue(){const t=lf(),{toast:e}=Gt(),{templates:r,loading:s,deleteTemplate:i,duplicateTemplate:a}=$T(),[o,l]=S.useState(""),[c,d]=S.useState(null),u=r.filter(v=>v.name.toLowerCase().includes(o.toLowerCase())||v.description?.toLowerCase().includes(o.toLowerCase())),h=()=>{t("/agreements/templates/new")},f=v=>{t(`/agreements/templates/edit/${v}`)},p=async v=>{try{const g=a(v);e({title:"Template Duplicated",description:`Created "${g.name}" successfully.`})}catch{e({title:"Error",description:"Failed to duplicate template.",variant:"destructive"})}},y=async v=>{try{i(v),d(null),e({title:"Template Deleted",description:"Template has been removed successfully."})}catch{e({title:"Error",description:"Failed to delete template.",variant:"destructive"})}};return s?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"ri-page-header",children:[n.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),n.jsx("p",{className:"ri-page-description",children:"Manage your agreement templates"})]}),n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):n.jsxs("div",{className:"space-y-6",children:[c&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Delete Template"}),n.jsx(Ge,{children:"Are you sure you want to delete this template? This action cannot be undone."})]}),n.jsx(pe,{children:n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(re,{variant:"outline",onClick:()=>d(null),children:"Cancel"}),n.jsx(re,{variant:"destructive",onClick:()=>y(c),children:"Delete"})]})})]})}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),n.jsx("p",{className:"ri-page-description",children:"Create and manage reusable agreement templates"})]}),n.jsxs(re,{onClick:h,className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),n.jsx(me,{className:"shadow-sm",children:n.jsx(pe,{className:"pt-6",children:n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search templates...",value:o,onChange:v=>l(v.target.value),className:"ri-search-input"})]})})})}),u.length>0?n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(v=>n.jsxs(me,{className:"shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(Ne,{className:"text-lg",children:v.name}),v.description&&n.jsx(Ge,{className:"mt-1",children:v.description})]}),n.jsx("div",{className:"flex items-center space-x-1",children:n.jsx(Ve,{variant:v.isActive?"default":"secondary",children:v.isActive?"Active":"Inactive"})})]})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(yr,{className:"h-4 w-4 mr-1"}),v.fields.length," fields"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-4 w-4 mr-1"}),wt(v.updatedAt)]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>f(v.id),className:"flex-1 mr-2",children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>p(v.id),title:"Duplicate",children:n.jsx(Sj,{className:"h-3 w-3"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>d(v.id),title:"Delete",className:"text-red-600 hover:text-red-700",children:n.jsx(rs,{className:"h-3 w-3"})})]})]})]})]},v.id))}):n.jsx(me,{className:"shadow-sm",children:n.jsxs(pe,{className:"text-center py-12",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:o?"No templates found":"No templates yet"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:o?"Try adjusting your search terms":"Create your first agreement template to get started"}),!o&&n.jsxs(re,{onClick:h,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Your First Template"]})]})})]})}const vue="modulepreload",xue=function(t){return"/"+t},Bk={},o1=function(e,r,s){let i=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=c(r.map(d=>{if(d=xue(d),d in Bk)return;Bk[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":vue,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},zk=[{type:En.TEXT,label:"Text Field",icon:"Type",defaultSize:{width:200,height:30}},{type:En.DATE,label:"Date Field",icon:"Calendar",defaultSize:{width:150,height:30}},{type:En.SIGNATURE,label:"Signature",icon:"PenTool",defaultSize:{width:200,height:60}},{type:En.CHECKBOX,label:"Checkbox",icon:"CheckSquare",defaultSize:{width:20,height:20}}];function bN({type:t,className:e="h-4 w-4"}){switch(t){case En.TEXT:return n.jsx(V3,{className:e});case En.DATE:return n.jsx(Br,{className:e});case En.SIGNATURE:return n.jsx(MZ,{className:e});case En.CHECKBOX:return n.jsx(wj,{className:e});default:return n.jsx(V3,{className:e})}}function qk(){const{templateId:t}=aX(),e=lf(),{toast:r}=Gt(),{getTemplate:s,addTemplate:i,updateTemplate:a}=$T(),[o,l]=S.useState(null),[c,d]=S.useState(""),[u,h]=S.useState(""),[f,p]=S.useState(null),[y,v]=S.useState(!1),[g,b]=S.useState({x:0,y:0}),[j,w]=S.useState(null),[C,E]=S.useState(""),[N,A]=S.useState(!1),_=S.useRef(null),k=S.useRef(null),F=S.useRef(null);S.useEffect(()=>{if(t){const H=s(t);H?(l(H),d(H.name),h(H.description||""),E(H.pdfBase64)):(r({title:"Template Not Found",description:"The requested template could not be found.",variant:"destructive"}),e("/agreements/templates"))}else l({id:"",name:"",description:"",pdfBase64:"",fields:[],createdAt:"",updatedAt:"",isActive:!0})},[t,s,e,r]);const I=S.useCallback(async()=>{if(!(!C||!_.current))try{const H=await o1(()=>Promise.resolve().then(()=>TY),[]);H.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${H.version}/pdf.worker.min.js`;const $=_.current,W=$.getContext("2d");if(!W)return;const te=atob(C),ee=new Uint8Array(te.length);for(let Se=0;Se<te.length;Se++)ee[Se]=te.charCodeAt(Se);const ae=await(await H.getDocument({data:ee}).promise).getPage(1),ve=ae.getViewport({scale:1.5});$.width=ve.width,$.height=ve.height;const xe={canvasContext:W,viewport:ve};await ae.render(xe).promise}catch(H){console.error("Error rendering PDF:",H),r({title:"PDF Rendering Error",description:"Failed to render the PDF. Please try uploading a different file.",variant:"destructive"})}},[C,r]);S.useEffect(()=>{C&&I()},[C,I]);const T=H=>{const $=H.target.files?.[0];if(!$)return;if($.type!=="application/pdf"){r({title:"Invalid File Type",description:"Please upload a PDF file.",variant:"destructive"});return}w($);const W=new FileReader;W.onload=te=>{const ne=(te.target?.result).split(",")[1];E(ne)},W.readAsDataURL($)},R=(H,$,W)=>{if(!o)return;const te=zk.find(ae=>ae.type===H);if(!te)return;const ee={id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:H,label:`${te.label} ${o.fields.length+1}`,x:$,y:W,width:te.defaultSize.width,height:te.defaultSize.height,required:!1,...H===En.TEXT&&{defaultValue:"",placeholder:"Enter text"},...H===En.DATE&&{format:"MM/dd/yyyy"},...H===En.CHECKBOX&&{defaultChecked:!1,checkboxLabel:"Check this box"}},ne={...o,fields:[...o.fields,ee]};l(ne),p(ee)},O=H=>{if(!_.current||!F.current)return;const $=F.current.getBoundingClientRect(),W=H.clientX-$.left,te=H.clientY-$.top,ee=o?.fields.find(ne=>W>=ne.x&&W<=ne.x+ne.width&&te>=ne.y&&te<=ne.y+ne.height);p(ee||null)},z=(H,$)=>{H.stopPropagation(),p($),v(!0);const W=F.current?.getBoundingClientRect();W&&b({x:H.clientX-W.left-$.x,y:H.clientY-W.top-$.y})},q=S.useCallback(H=>{if(!y||!f||!F.current||!o)return;const $=F.current.getBoundingClientRect(),W=Math.max(0,H.clientX-$.left-g.x),te=Math.max(0,H.clientY-$.top-g.y),ee=o.fields.map(ne=>ne.id===f.id?{...ne,x:W,y:te}:ne);l({...o,fields:ee}),p({...f,x:W,y:te})},[y,f,g,o]),B=S.useCallback(()=>{v(!1)},[]);S.useEffect(()=>{if(y)return document.addEventListener("mousemove",q),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",B)}},[y,q,B]);const K=(H,$,W)=>{if(!o)return;const te=o.fields.map(ne=>ne.id===H?{...ne,[$]:W}:ne),ee={...o,fields:te};l(ee),f?.id===H&&p({...f,[$]:W})},Y=H=>{if(!o)return;const $=o.fields.filter(W=>W.id!==H);l({...o,fields:$}),f?.id===H&&p(null)},J=async()=>{if(!o||!c.trim()){r({title:"Validation Error",description:"Please provide a template name.",variant:"destructive"});return}if(!C){r({title:"Validation Error",description:"Please upload a PDF file.",variant:"destructive"});return}A(!0);try{const H={name:c,description:u,pdfBase64:C,fields:o.fields,isActive:!0};t?(a(t,H),r({title:"Template Updated",description:"Template has been saved successfully."})):(i(H),r({title:"Template Created",description:"Template has been created successfully."})),e("/agreements/templates")}catch{r({title:"Save Error",description:"Failed to save template. Please try again.",variant:"destructive"})}finally{A(!1)}};return o?n.jsx(X9,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>e("/agreements/templates"),children:[n.jsx(KC,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:t?"Edit Template":"Create Template"}),n.jsx("p",{className:"ri-page-description",children:"Design your agreement template with interactive fields"})]})]}),n.jsx(re,{onClick:J,disabled:N,children:N?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Template"]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsx(Ne,{className:"text-lg",children:"Template Information"})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"templateName",children:"Template Name *"}),n.jsx(Te,{id:"templateName",value:c,onChange:H=>d(H.target.value),placeholder:"Enter template name",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"templateDescription",children:"Description"}),n.jsx(kr,{id:"templateDescription",value:u,onChange:H=>h(H.target.value),placeholder:"Enter template description",className:"shadow-sm",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"PDF Document"}),n.jsxs("div",{className:"mt-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>k.current?.click(),className:"w-full",children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),j?j.name:"Upload PDF"]}),n.jsx("input",{ref:k,type:"file",accept:".pdf",onChange:T,className:"hidden"})]})]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-lg",children:"Field Toolbox"}),n.jsx(Ge,{children:"Click on a field type, then click on the PDF to place it"})]}),n.jsx(pe,{className:"space-y-3",children:zk.map(H=>n.jsxs(re,{variant:"outline",className:"w-full justify-start",onClick:()=>{const $=_.current?_.current.width/2-H.defaultSize.width/2:100,W=_.current?_.current.height/2-H.defaultSize.height/2:100;R(H.type,$,W)},children:[n.jsx(bN,{type:H.type,className:"h-4 w-4 mr-2"}),H.label]},H.type))})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs(Ne,{className:"text-lg",children:["Fields (",o.fields.length,")"]})}),n.jsx(pe,{children:o.fields.length>0?n.jsx("div",{className:"space-y-2",children:o.fields.map(H=>n.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md border cursor-pointer transition-colors ${f?.id===H.id?"bg-primary/10 border-primary":"hover:bg-accent"}`,onClick:()=>p(H),children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bN,{type:H.type,className:"h-3 w-3"}),n.jsx("span",{className:"text-sm font-medium",children:H.label}),H.required&&n.jsx(Ve,{variant:"secondary",className:"text-xs",children:"Required"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:$=>{$.stopPropagation(),Y(H.id)},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:n.jsx(rs,{className:"h-3 w-3"})})]},H.id))}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No fields added yet. Use the toolbox to add fields."})})]})]}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-lg",children:"Template Preview"}),n.jsx(Ge,{children:"Click to select fields, drag to move them"})]}),n.jsx(pe,{children:n.jsx("div",{ref:F,className:"relative border rounded-lg overflow-auto bg-gray-50",style:{minHeight:"600px"},onClick:O,children:C?n.jsxs(n.Fragment,{children:[n.jsx("canvas",{ref:_,className:"block mx-auto",style:{maxWidth:"100%",height:"auto"}}),o.fields.map(H=>n.jsxs("div",{className:`absolute border-2 cursor-move flex items-center justify-center text-xs font-medium bg-white/80 ${f?.id===H.id?"border-primary bg-primary/10":"border-gray-400 hover:border-gray-600"}`,style:{left:H.x,top:H.y,width:H.width,height:H.height},onMouseDown:$=>z($,H),children:[n.jsx(bN,{type:H.type,className:"h-3 w-3 mr-1"}),H.label]},H.id))]}):n.jsx("div",{className:"flex items-center justify-center h-96 text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx(hd,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("p",{children:"Upload a PDF to start designing your template"})]})})})})]})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs(Ne,{className:"text-lg",children:[n.jsx(Nl,{className:"h-4 w-4 mr-2 inline"}),"Field Properties"]})}),n.jsx(pe,{children:f?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldLabel",children:"Field Label"}),n.jsx(Te,{id:"fieldLabel",value:f.label,onChange:H=>K(f.id,"label",H.target.value),className:"shadow-sm"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"fieldRequired",checked:f.required,onCheckedChange:H=>K(f.id,"required",H)}),n.jsx(ue,{htmlFor:"fieldRequired",children:"Required field"})]}),f.type===En.TEXT&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldDefaultValue",children:"Default Value"}),n.jsx(Te,{id:"fieldDefaultValue",value:f.defaultValue||"",onChange:H=>K(f.id,"defaultValue",H.target.value),className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldPlaceholder",children:"Placeholder"}),n.jsx(Te,{id:"fieldPlaceholder",value:f.placeholder||"",onChange:H=>K(f.id,"placeholder",H.target.value),className:"shadow-sm"})]})]}),f.type===En.DATE&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldFormat",children:"Date Format"}),n.jsx(Te,{id:"fieldFormat",value:f.format||"MM/dd/yyyy",onChange:H=>K(f.id,"format",H.target.value),className:"shadow-sm"})]}),f.type===En.CHECKBOX&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"fieldDefaultChecked",checked:f.defaultChecked||!1,onCheckedChange:H=>K(f.id,"defaultChecked",H)}),n.jsx(ue,{htmlFor:"fieldDefaultChecked",children:"Default checked"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldCheckboxLabel",children:"Checkbox Label"}),n.jsx(Te,{id:"fieldCheckboxLabel",value:f.checkboxLabel||"",onChange:H=>K(f.id,"checkboxLabel",H.target.value),className:"shadow-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldWidth",children:"Width"}),n.jsx(Te,{id:"fieldWidth",type:"number",value:f.width,onChange:H=>K(f.id,"width",parseInt(H.target.value)),className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldHeight",children:"Height"}),n.jsx(Te,{id:"fieldHeight",type:"number",value:f.height,onChange:H=>K(f.id,"height",parseInt(H.target.value)),className:"shadow-sm"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldX",children:"X Position"}),n.jsx(Te,{id:"fieldX",type:"number",value:f.x,onChange:H=>K(f.id,"x",parseInt(H.target.value)),className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldY",children:"Y Position"}),n.jsx(Te,{id:"fieldY",type:"number",value:f.y,onChange:H=>K(f.id,"y",parseInt(H.target.value)),className:"shadow-sm"})]})]}),n.jsxs(re,{variant:"destructive",size:"sm",onClick:()=>Y(f.id),className:"w-full",children:[n.jsx(rs,{className:"h-3 w-3 mr-2"}),"Delete Field"]})]}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Select a field to edit its properties"})})]})})]})]})}):n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}function Uk(){const t=lf(),{toast:e}=Gt(),[r,s]=S.useState(""),[i]=S.useState(Wp.sampleAgreements),[a,o]=S.useState("all"),[l,c]=S.useState(!1),[d,u]=S.useState(null),[h,f]=S.useState(null),[p,y]=S.useState("all"),v=i.filter(A=>{const _=A.customerName?.toLowerCase().includes(r.toLowerCase())||A.vehicleInfo?.toLowerCase().includes(r.toLowerCase())||A.id.toLowerCase().includes(r.toLowerCase()),k=a==="all"||A.type===a,F=p==="all"||A.status===p;return _&&k&&F}),g=A=>{const _=Wp.agreementStatuses.find(k=>k.value===A);return _?n.jsx(Ve,{className:_.color,children:_.label}):null},b=A=>{u(A),setShowNewAgreementForm(!0)},j=()=>{t("/agreements/templates/new"),t("/agreements/templates/new")},w=A=>{const _=Wp.agreementTypes.find(k=>k.value===A);return _?_.label:A},C=A=>{e({title:"Opening Agreement",description:`Opening agreement ${A} for review`})},E=A=>{e({title:"Signature Request Sent",description:`Signature request sent for agreement ${A}`})},N=A=>{e({description:`Downloading agreement ${A}`})};return n.jsxs("div",{className:"space-y-6",children:[l&&n.jsx(pue,{onSelect:b,onClose:()=>c(!1),onCreateNew:j}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),n.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and digital signatures"})]}),n.jsxs(re,{className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Agreement",n.jsxs(re,{variant:"outline",onClick:()=>t("/agreements/templates"),className:"shadow-sm",children:[n.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Manage Templates"]})]})]})}),n.jsx(me,{className:"shadow-sm",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{className:"ri-search-input shadow-sm",placeholder:"Search agreements...",value:r,onChange:A=>s(A.target.value)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:a,onChange:A=>o(A.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[n.jsx("option",{value:"all",children:"All Types"}),Wp.agreementTypes.map(A=>n.jsx("option",{value:A.value,children:A.label},A.value))]}),n.jsxs("select",{value:p,onChange:A=>y(A.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[n.jsx("option",{value:"all",children:"All Statuses"}),Wp.agreementStatuses.map(A=>n.jsx("option",{value:A.value,children:A.label},A.value))]})]})]})})}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Agreements"}),n.jsxs(Ge,{children:[v.length," agreement",v.length!==1?"s":""," found"]})]}),n.jsxs(pe,{children:[n.jsxs(W0,{children:[n.jsx(G0,{children:n.jsxs(ac,{children:[n.jsx(Gr,{children:"Agreement ID"}),n.jsx(Gr,{children:"Customer"}),n.jsx(Gr,{children:"Type"}),n.jsx(Gr,{children:"Vehicle"}),n.jsx(Gr,{children:"Status"}),n.jsx(Gr,{children:"Amount"}),n.jsx(Gr,{children:"Created"}),n.jsx(Gr,{children:"Actions"})]})}),n.jsx(K0,{children:v.map(A=>n.jsxs(ac,{children:[n.jsx(Vr,{className:"font-medium",children:A.id}),n.jsx(Vr,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:A.customerName}),n.jsx("div",{className:"text-sm text-muted-foreground",children:A.customerEmail})]})}),n.jsx(Vr,{children:n.jsx(Ve,{variant:"outline",children:w(A.type)})}),n.jsx(Vr,{children:n.jsx("div",{className:"text-sm",children:A.vehicleInfo||"N/A"})}),n.jsx(Vr,{children:g(A.status)}),n.jsx(Vr,{children:A.totalAmount?Fe(A.totalAmount):"N/A"}),n.jsx(Vr,{children:wt(A.createdAt)}),n.jsx(Vr,{children:n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>C(A.id),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>N(A.id),children:n.jsx(Ma,{className:"h-4 w-4"})}),A.status==="PENDING"&&n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>E(A.id),children:n.jsx(Bo,{className:"h-4 w-4"})})]})})]},A.id))})]}),v.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No agreements found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})}function yue(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(Uk,{})}),n.jsx(Ut,{path:"/templates",element:n.jsx(gue,{})}),n.jsx(Ut,{path:"/templates/new",element:n.jsx(qk,{})}),n.jsx(Ut,{path:"/templates/edit/:templateId",element:n.jsx(qk,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(Uk,{})})]})}function Yq(){const[t,e]=S.useState([]),[r,s]=S.useState(!1);S.useEffect(()=>{i()},[]);const i=()=>{const g=Bn("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:zi.MEDIUM,status:ps.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:zi.HIGH,status:ps.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);e(g)},a=g=>{rn("renter-insight-service-tickets",g)};return{tickets:t,loading:r,getTicketsByCustomerId:g=>t.filter(b=>b.customerId===g),getTicketsByVehicleId:g=>t.filter(b=>b.vehicleId===g),getTicketById:g=>t.find(b=>b.id===g),createTicket:async g=>{s(!0);try{const b={id:Math.random().toString(36).substr(2,9),customerId:g.customerId||"",vehicleId:g.vehicleId,title:g.title||"",description:g.description||"",priority:g.priority||zi.MEDIUM,status:g.status||ps.OPEN,assignedTo:g.assignedTo,scheduledDate:g.scheduledDate,parts:g.parts||[],labor:g.labor||[],notes:g.notes||"",customFields:g.customFields||{},createdAt:new Date,updatedAt:new Date},j=[...t,b];return e(j),a(j),b}finally{s(!1)}},updateTicket:async(g,b)=>{const j=t.map(w=>w.id===g?{...w,...b,updatedAt:new Date}:w);e(j),a(j)},deleteTicket:async g=>{const b=t.filter(j=>j.id!==g);e(b),a(b)},updateTicketStatus:async(g,b)=>{const j=t.map(w=>w.id===g?{...w,status:b,completedDate:b===ps.COMPLETED?new Date:w.completedDate,updatedAt:new Date}:w);e(j),a(j)},assignTechnician:async(g,b)=>{const j=t.map(w=>w.id===g?{...w,assignedTo:b,updatedAt:new Date}:w);e(j),a(j)},addPart:async(g,b)=>{if(!t.find(E=>E.id===g))return null;const w={id:Math.random().toString(36).substr(2,9),partNumber:b.partNumber||"",description:b.description||"",quantity:b.quantity||1,unitCost:b.unitCost||0,total:b.total||0},C=t.map(E=>E.id===g?{...E,parts:[...E.parts,w],updatedAt:new Date}:E);return e(C),a(C),w},addLabor:async(g,b)=>{if(!t.find(E=>E.id===g))return null;const w={id:Math.random().toString(36).substr(2,9),description:b.description||"",hours:b.hours||1,rate:b.rate||85,total:b.total||85},C=t.map(E=>E.id===g?{...E,labor:[...E.labor,w],updatedAt:new Date}:E);return e(C),a(C),w}}}function bue({ticket:t,onSave:e,onCancel:r}){const{toast:s}=Gt(),{vehicles:i}=df(),{leads:a}=Au(),[o,l]=S.useState(!1),[c,d]=S.useState(!1),[u,h]=S.useState({customerId:"",vehicleId:"",title:"",description:"",priority:zi.MEDIUM,status:ps.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[f,p]=S.useState(!1),[y,v]=S.useState(!1),[g,b]=S.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[j,w]=S.useState({description:"",hours:1,rate:85,total:85});S.useEffect(()=>{t&&h({...t,customFields:{...t.customFields,warrantyStatus:t.customFields?.warrantyStatus||"not_covered",estimatedCompletionDate:t.customFields?.estimatedCompletionDate||"",customerAuthorization:t.customFields?.customerAuthorization||!1,technicianNotes:t.customFields?.technicianNotes||"",customerPortalAccess:t.customFields?.customerPortalAccess!==!1}})},[t]),S.useEffect(()=>{const O=g.quantity||1,z=g.unitCost||0;b(q=>({...q,total:O*z}))},[g.quantity,g.unitCost]),S.useEffect(()=>{const O=j.hours||1,z=j.rate||85;w(q=>({...q,total:O*z}))},[j.hours,j.rate]);const C=async O=>{if(O.preventDefault(),!u.customerId||!u.title||!u.description){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l(!0);try{await e(u),s({title:"Success",description:`Service ticket ${t?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${t?"update":"create"} service ticket`,variant:"destructive"})}finally{l(!1)}},E=O=>{O==="add-new"?d(!0):h(z=>({...z,customerId:O}))},N=O=>{h(z=>({...z,customerId:O.id})),d(!1),s({title:"Customer Added",description:`${O.firstName} ${O.lastName} has been added as a customer.`})},A=()=>{if(!g.partNumber||!g.description){s({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const O={id:Math.random().toString(36).substr(2,9),partNumber:g.partNumber||"",description:g.description||"",quantity:g.quantity||1,unitCost:g.unitCost||0,total:g.total||0};h(z=>({...z,parts:[...z.parts||[],O]})),b({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),p(!1)},_=O=>{h(z=>({...z,parts:z.parts?.filter(q=>q.id!==O)||[]}))},k=()=>{if(!j.description){s({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const O={id:Math.random().toString(36).substr(2,9),description:j.description||"",hours:j.hours||1,rate:j.rate||85,total:j.total||85};h(z=>({...z,labor:[...z.labor||[],O]})),w({description:"",hours:1,rate:85,total:85}),v(!1)},F=O=>{h(z=>({...z,labor:z.labor?.filter(q=>q.id!==O)||[]}))},T=(()=>{const O=u.parts?.reduce((q,B)=>q+B.total,0)||0,z=u.labor?.reduce((q,B)=>q+B.total,0)||0;return{partsTotal:O,laborTotal:z,grandTotal:O+z}})(),R=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&n.jsx(rv,{onClose:()=>d(!1),onSuccess:N}),n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Service Ticket":"Create Service Ticket"}),n.jsx(Ge,{children:t?"Update service ticket details":"Create a new service ticket"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:C,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(nt,{value:u.customerId,onValueChange:E,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select customer"})}),n.jsxs(tt,{children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(re,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>E("add-new"),children:[n.jsx(Dt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),a.map(O=>n.jsxs(he,{value:O.id,children:[O.firstName," ",O.lastName]},O.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicleId",children:"Vehicle"}),n.jsxs(nt,{value:u.vehicleId,onValueChange:O=>h(z=>({...z,vehicleId:O})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select vehicle (optional)"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"No Vehicle"}),i.map(O=>n.jsxs(he,{value:O.id,children:[O.year," ",O.make," ",O.model]},O.id))]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"title",children:"Service Title *"}),n.jsx(Te,{id:"title",value:u.title,onChange:O=>h(z=>({...z,title:O.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"description",children:"Description *"}),n.jsx(kr,{id:"description",value:u.description,onChange:O=>h(z=>({...z,description:O.target.value})),placeholder:"Describe the service needed",rows:3})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"priority",children:"Priority"}),n.jsxs(nt,{value:u.priority,onValueChange:O=>h(z=>({...z,priority:O})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:zi.LOW,children:"Low"}),n.jsx(he,{value:zi.MEDIUM,children:"Medium"}),n.jsx(he,{value:zi.HIGH,children:"High"}),n.jsx(he,{value:zi.URGENT,children:"Urgent"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:u.status,onValueChange:O=>h(z=>({...z,status:O})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:ps.OPEN,children:"Open"}),n.jsx(he,{value:ps.IN_PROGRESS,children:"In Progress"}),n.jsx(he,{value:ps.WAITING_PARTS,children:"Waiting for Parts"}),n.jsx(he,{value:ps.COMPLETED,children:"Completed"}),n.jsx(he,{value:ps.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"assignedTo",children:"Assigned Technician"}),n.jsxs(nt,{value:u.assignedTo,onValueChange:O=>h(z=>({...z,assignedTo:O})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select technician"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"Unassigned"}),R.map(O=>n.jsx(he,{value:O.id,children:O.name},O.id))]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"scheduledDate",children:"Scheduled Date"}),n.jsx(Te,{id:"scheduledDate",type:"date",value:u.scheduledDate?new Date(u.scheduledDate).toISOString().split("T")[0]:"",onChange:O=>h(z=>({...z,scheduledDate:O.target.value?new Date(O.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),n.jsx(Te,{id:"estimatedCompletionDate",type:"date",value:u.customFields?.estimatedCompletionDate||"",onChange:O=>h(z=>({...z,customFields:{...z.customFields,estimatedCompletionDate:O.target.value}}))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"warrantyStatus",children:"Warranty Status"}),n.jsxs(nt,{value:u.customFields?.warrantyStatus||"not_covered",onValueChange:O=>h(z=>({...z,customFields:{...z.customFields,warrantyStatus:O}})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"covered",children:"Covered by Warranty"}),n.jsx(he,{value:"partial",children:"Partially Covered"}),n.jsx(he,{value:"not_covered",children:"Not Covered"}),n.jsx(he,{value:"extended",children:"Extended Warranty"}),n.jsx(he,{value:"expired",children:"Warranty Expired"})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[n.jsx(tr,{id:"customerAuthorization",checked:u.customFields?.customerAuthorization||!1,onCheckedChange:O=>h(z=>({...z,customFields:{...z.customFields,customerAuthorization:!!O}}))}),n.jsx(ue,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),n.jsxs(re,{type:"button",onClick:()=>p(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),f&&n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"partNumber",children:"Part Number *"}),n.jsx(Te,{id:"partNumber",value:g.partNumber,onChange:O=>b(z=>({...z,partNumber:O.target.value})),placeholder:"e.g., AC-COMP-001"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"partDescription",children:"Description *"}),n.jsx(Te,{id:"partDescription",value:g.description,onChange:O=>b(z=>({...z,description:O.target.value})),placeholder:"e.g., AC Compressor"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"partQuantity",children:"Quantity"}),n.jsx(Te,{id:"partQuantity",type:"number",min:"1",value:g.quantity,onChange:O=>b(z=>({...z,quantity:parseInt(O.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"partUnitCost",children:"Unit Cost"}),n.jsx(Te,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:g.unitCost,onChange:O=>b(z=>({...z,unitCost:parseFloat(O.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Fe(g.total||0)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),n.jsx(re,{type:"button",onClick:A,children:"Add Part"})]})]})]})}),n.jsx("div",{className:"space-y-3",children:u.parts&&u.parts.length>0?u.parts.map(O=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:O.description}),n.jsx(Ve,{variant:"outline",children:O.partNumber})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",O.quantity," × ",Fe(O.unitCost)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Fe(O.total)}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(O.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},O.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(xl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No parts added yet"}),n.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),n.jsxs(re,{type:"button",onClick:()=>v(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),y&&n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"md:col-span-3",children:[n.jsx(ue,{htmlFor:"laborDescription",children:"Description *"}),n.jsx(Te,{id:"laborDescription",value:j.description,onChange:O=>w(z=>({...z,description:O.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"laborHours",children:"Hours"}),n.jsx(Te,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:j.hours,onChange:O=>w(z=>({...z,hours:parseFloat(O.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"laborRate",children:"Hourly Rate"}),n.jsx(Te,{id:"laborRate",type:"number",step:"0.01",min:"0",value:j.rate,onChange:O=>w(z=>({...z,rate:parseFloat(O.target.value)||85}))})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Total"}),n.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:Fe(j.total||0)})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancel"}),n.jsx(re,{type:"button",onClick:k,children:"Add Labor"})]})]})}),n.jsx("div",{className:"space-y-3",children:u.labor&&u.labor.length>0?u.labor.map(O=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:O.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[O.hours," hours × ",Fe(O.rate),"/hr"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Fe(O.total)}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(O.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},O.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Dr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No labor added yet"}),n.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),(u.parts?.length>0||u.labor?.length>0)&&n.jsx(me,{className:"bg-muted/30",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Parts Total:"}),n.jsx("span",{children:Fe(T.partsTotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Labor Total:"}),n.jsx("span",{children:Fe(T.laborTotal)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Grand Total:"}),n.jsx("span",{children:Fe(T.grandTotal)})]})]})})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"technicianNotes",children:"Technician Notes"}),n.jsx(kr,{id:"technicianNotes",value:u.customFields?.technicianNotes||"",onChange:O=>h(z=>({...z,customFields:{...z.customFields,technicianNotes:O.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Customer Notes"}),n.jsx(kr,{id:"notes",value:u.notes,onChange:O=>h(z=>({...z,notes:O.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"customerPortalAccess",checked:u.customFields?.customerPortalAccess!==!1,onCheckedChange:O=>h(z=>({...z,customFields:{...z.customFields,customerPortalAccess:!!O}}))}),n.jsx(ue,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,disabled:o,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Ticket"]})})]})]})})]})]})}function jue({ticketId:t,onUpdate:e,onClose:r}){const{toast:s}=Gt(),[i,a]=S.useState(!1),[o,l]=S.useState(!1),[c,d]=S.useState(no.formDefaults.status),[u,h]=S.useState(""),f=no.sampleTickets.find(g=>g.id===t)||no.sampleTickets[0],p=g=>no.statusColors[g]||"bg-gray-100 text-gray-800",y=g=>no.priorityColors[g]||"bg-gray-100 text-gray-800",v=async()=>{l(!0);try{e&&e(t,{status:c}),s({title:"Status Updated",description:`Ticket status changed to ${c}`})}catch{s({title:"Error",description:"Failed to update ticket status",variant:"destructive"})}finally{l(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:f.title}),n.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",f.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>a(!i),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),i?"Cancel":"Edit"]}),r&&n.jsx(re,{variant:"outline",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:p(f.status),children:f.status}),n.jsxs(Ve,{className:y(f.priority),children:[f.priority," Priority"]})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Ticket Information"})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer:"}),n.jsx("span",{className:"font-medium",children:f.customerName})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Assigned to:"}),n.jsx("span",{className:"font-medium",children:f.assignedTechName})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled:"}),n.jsx("span",{className:"font-medium",children:hx(f.scheduledDate)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Dr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Created:"}),n.jsx("span",{className:"font-medium",children:hx(f.createdAt)})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:f.description})]})]})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Update Status"})}),n.jsx(pe,{children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{className:"w-48",children:n.jsx(st,{})}),n.jsx(tt,{children:no.defaultStatuses.map(g=>n.jsx(he,{value:g,children:g},g))})]})}),n.jsxs(re,{onClick:v,disabled:o,size:"sm",children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Parts"})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-3",children:f.parts.map(g=>n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:g.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",g.quantity]})]}),n.jsx("p",{className:"font-medium",children:Fe(g.cost*g.quantity)})]},g.id))})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Labor"})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-3",children:f.labor.map(g=>n.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:g.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.hours," hrs @ ",Fe(g.rate),"/hr"]})]}),n.jsx("p",{className:"font-medium",children:Fe(g.hours*g.rate)})]},g.id))})})]})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(rr,{className:"h-5 w-5 mr-2"}),"Total Cost"]})}),n.jsx(pe,{children:n.jsx("div",{className:"text-2xl font-bold",children:Fe(f.totalCost)})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Timeline"})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:f.timeline.map(g=>n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"font-medium",children:g.action}),n.jsx("p",{className:"text-sm text-muted-foreground",children:hx(g.timestamp)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:g.details}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",g.user]})]})]},g.id))})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2"}),"Notes"]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(kr,{value:u,onChange:g=>h(g.target.value),placeholder:f.notes||"Add notes about this service ticket...",rows:4}),n.jsxs(re,{onClick:()=>console.log("Save notes:",u),children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Notes"]})]})})]})]})}function wue({customerId:t}){const[e,r]=S.useState(""),[s,i]=S.useState("all"),[a,o]=S.useState("all"),c=(t?no.sampleTickets.filter(f=>f.customerId===t):no.sampleTickets).filter(f=>{const p=f.title.toLowerCase().includes(e.toLowerCase())||f.description.toLowerCase().includes(e.toLowerCase()),y=s==="all"||f.status===s,v=a==="all"||f.category===a;return p&&y&&v}),d=f=>no.statusColors[f]||"bg-gray-100 text-gray-800",u=f=>no.priorityColors[f]||"bg-gray-100 text-gray-800",h=f=>{switch(f){case"Completed":return n.jsx(hn,{className:"h-4 w-4"});case"In Progress":return n.jsx(Dr,{className:"h-4 w-4"});default:return n.jsx(Xh,{className:"h-4 w-4"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Tickets"}),n.jsx("p",{className:"text-muted-foreground",children:"View and track your service requests"})]})}),n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(Te,{placeholder:"Search tickets...",value:e,onChange:f=>r(f.target.value),className:"pl-10"})]}),n.jsxs(nt,{value:s,onValueChange:i,children:[n.jsx(et,{className:"w-48",children:n.jsx(st,{placeholder:"All statuses"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Statuses"}),no.defaultStatuses.map(f=>n.jsx(he,{value:f,children:f},f))]})]}),n.jsxs(nt,{value:a,onValueChange:o,children:[n.jsx(et,{className:"w-48",children:n.jsx(st,{placeholder:"All categories"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Categories"}),no.categoryOptions.map(f=>n.jsx(he,{value:f,children:f},f))]})]})]})})}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(f=>n.jsxs(me,{className:"hover:shadow-md transition-shadow",children:[n.jsx(je,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ne,{className:"text-lg",children:f.title}),n.jsxs(Ge,{className:"text-sm",children:["#",f.id]})]}),n.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[n.jsx(Ve,{className:d(f.status),children:n.jsxs("div",{className:"flex items-center space-x-1",children:[h(f.status),n.jsx("span",{children:f.status})]})}),n.jsx(Ve,{variant:"outline",className:u(f.priority),children:f.priority})]})]})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.description}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center space-x-2 text-sm",children:n.jsx(Ve,{variant:"secondary",children:f.category})}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[n.jsx(vs,{className:"h-4 w-4"}),n.jsx("span",{children:no.technicianOptions.find(p=>p.id===f.assignedTo)?.name||f.assignedTo})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[n.jsx(Br,{className:"h-4 w-4"}),n.jsx("span",{children:hx(f.scheduledDate)})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[n.jsx(Dr,{className:"h-4 w-4"}),n.jsxs("span",{children:[f.estimatedHours,"h estimated"]})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2",children:[n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Created ",hx(f.createdAt)]}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Ts,{className:"h-4 w-4 mr-1"}),"View"]})]})]})]},f.id))}),c.length===0&&n.jsx(me,{children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Xh,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tickets found"}),n.jsx("p",{className:"text-muted-foreground",children:e||s!=="all"||a!=="all"?"Try adjusting your search criteria":"No service tickets have been created yet"})]})})})]})}function Nue(){const{tickets:t,createTicket:e,updateTicket:r}=Yq(),{toast:s}=Gt(),[i,a]=S.useState(""),[o,l]=S.useState("all"),[c,d]=S.useState("all"),[u,h]=S.useState(!1),[f,p]=S.useState(!1),[y,v]=S.useState(!1),[g,b]=S.useState(!1),[j,w]=S.useState(null),C=R=>{switch(R){case ps.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case ps.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ps.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case ps.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case ps.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=R=>{switch(R){case zi.LOW:return"bg-green-50 text-green-700 border-green-200";case zi.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case zi.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case zi.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},N=t.filter(R=>R.title.toLowerCase().includes(i.toLowerCase())||R.description.toLowerCase().includes(i.toLowerCase())||R.customerId.toLowerCase().includes(i.toLowerCase())||R.id.toLowerCase().includes(i.toLowerCase())).filter(R=>o==="all"||R.status===o).filter(R=>c==="all"||R.priority===c),A=()=>{w(null),h(!0)},_=R=>{w(R),h(!0),p(!1)},k=R=>{w(R),p(!0)},F=R=>{w(R),v(!0)},I=async R=>{try{j?(await r(j.id,R),s({title:"Success",description:"Service ticket updated successfully"})):(await e(R),s({title:"Success",description:"Service ticket created successfully"})),h(!1),w(null)}catch{s({title:"Error",description:`Failed to ${j?"update":"create"} service ticket`,variant:"destructive"})}},T=R=>{s({title:"Customer Added",description:`${R.firstName} ${R.lastName} has been added.`}),w(null),b(!1),h(!0)};return n.jsxs("div",{className:"space-y-8",children:[g&&n.jsx(rv,{onClose:()=>b(!1),onSuccess:T}),u&&n.jsx(bue,{ticket:j||void 0,onSave:I,onCancel:()=>{h(!1),w(null)}}),f&&j&&n.jsx(jue,{ticket:j,onClose:()=>p(!1),onEdit:_}),y&&j&&n.jsx(wue,{ticket:j,onClose:()=>v(!1)}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),n.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),n.jsxs(re,{className:"shadow-sm",onClick:A,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),n.jsx(xl,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(xl,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(R=>R.status===ps.IN_PROGRESS).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),n.jsx(xl,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(R=>R.status===ps.WAITING_PARTS).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Revenue"}),n.jsx(rr,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Fe(t.reduce((R,O)=>R+O.parts.reduce((z,q)=>z+q.total,0)+O.labor.reduce((z,q)=>z+q.total,0),0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search service tickets...",value:i,onChange:R=>a(R.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(nt,{value:o,onValueChange:l,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:ps.OPEN,children:"Open"}),n.jsx(he,{value:ps.IN_PROGRESS,children:"In Progress"}),n.jsx(he,{value:ps.WAITING_PARTS,children:"Waiting Parts"}),n.jsx(he,{value:ps.COMPLETED,children:"Completed"}),n.jsx(he,{value:ps.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Priority"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Priorities"}),n.jsx(he,{value:zi.LOW,children:"Low"}),n.jsx(he,{value:zi.MEDIUM,children:"Medium"}),n.jsx(he,{value:zi.HIGH,children:"High"}),n.jsx(he,{value:zi.URGENT,children:"Urgent"})]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Service Tickets"}),n.jsx(Ge,{children:"Manage service requests and maintenance schedules"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[N.map(R=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:R.title}),n.jsx(Ve,{className:pt("ri-badge-status",E(R.priority)),children:R.priority.toUpperCase()}),n.jsx(Ve,{className:pt("ri-badge-status",C(R.status)),children:R.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(vs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:R.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(vs,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Assigned:"}),n.jsx("span",{className:"ml-1",children:R.assignedTo||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:R.scheduledDate?wt(R.scheduledDate):"Not scheduled"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Dr,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:wt(R.createdAt)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:R.description}),R.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})]}),n.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[n.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Parts:"})," ",Fe(R.parts.reduce((O,z)=>O+z.total,0))]}),n.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Labor:"})," ",Fe(R.labor.reduce((O,z)=>O+z.total,0))]}),n.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[n.jsx("span",{className:"font-medium",children:"Total:"})," ",Fe(R.parts.reduce((O,z)=>O+z.total,0)+R.labor.reduce((O,z)=>O+z.total,0))]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k(R),children:"View"}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>_(R),children:"Edit"}),R.customFields?.customerPortalAccess!==!1&&n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>F(R),children:"Customer View"})]})]},R.id)),N.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(xl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No service tickets found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Sue(){return n.jsx(Vi,{children:n.jsx(Ut,{path:"/*",element:n.jsx(Nue,{})})})}function Xq(){const[t,e]=S.useState([]),[r,s]=S.useState(!1);S.useEffect(()=>{i()},[]);const i=()=>{const g=Bn("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:_r.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:_r.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);e(g)},a=g=>{rn("renter-insight-deliveries",g)};return{deliveries:t,loading:r,getDeliveriesByCustomerId:g=>t.filter(b=>b.customerId===g),getDeliveriesByVehicleId:g=>t.filter(b=>b.vehicleId===g),getDeliveryById:g=>t.find(b=>b.id===g),createDelivery:async g=>{s(!0);try{const b={id:Math.random().toString(36).substr(2,9),customerId:g.customerId||"",vehicleId:g.vehicleId||"",status:g.status||_r.SCHEDULED,scheduledDate:g.scheduledDate||new Date,deliveredDate:g.deliveredDate,address:g.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:g.driver||"",notes:g.notes||"",customFields:g.customFields||{},createdAt:new Date,updatedAt:new Date},j=[...t,b];return e(j),a(j),b}finally{s(!1)}},updateDelivery:async(g,b)=>{const j=t.map(w=>w.id===g?{...w,...b,updatedAt:new Date}:w);e(j),a(j)},deleteDelivery:async g=>{const b=t.filter(j=>j.id!==g);e(b),a(b)},updateDeliveryStatus:async(g,b)=>{const j=t.map(w=>w.id===g?{...w,status:b,deliveredDate:b===_r.DELIVERED?new Date:w.deliveredDate,updatedAt:new Date}:w);e(j),a(j)},sendNotification:async(g,b,j)=>{if(!t.find(E=>E.id===g))return;const C=t.map(E=>E.id===g?{...E,customFields:{...E.customFields,customerNotified:new Date().toISOString(),notificationMethod:b==="sms"?"SMS":"Email",lastNotificationMessage:j},updatedAt:new Date}:E);return e(C),a(C),await new Promise(E=>setTimeout(E,1e3)),!0},updateETA:async(g,b)=>{if(!t.find(C=>C.id===g))return;const w=t.map(C=>C.id===g?{...C,customFields:{...C.customFields,estimatedArrival:b,etaUpdated:new Date().toISOString()},updatedAt:new Date}:C);e(w),a(w)},addDeliveryPhotos:async(g,b,j)=>{if(!t.find(N=>N.id===g))return;const C=b.map((N,A)=>({url:N,caption:j[A]||""})),E=t.map(N=>N.id===g?{...N,customFields:{...N.customFields,deliveryPhotos:[...N.customFields?.deliveryPhotos||[],...b],photoDetails:[...N.customFields?.photoDetails||[],...C]},updatedAt:new Date}:N);e(E),a(E)}}}const iu={deliveryStatuses:["Pending","Scheduled","In Transit","Delivered","Rescheduled","Cancelled"],deliveryTypes:["Home Delivery","RV Park Delivery","Customer Pickup"],checklistItems:["VIN matched","Skirting Installed","Electric Connected","Water Connected","Walkthrough Completed","Customer Signed"],driverNames:["John Smith","Maria Lopez","Dan Cooper"],photoInstructions:["Front view","Side view","Setup complete","Interior"]},Aue=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function jg(t,e,r){const s=Cue(t),{webkitRelativePath:i}=t,a=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof s.path!="string"&&Vk(s,"path",a),Vk(s,"relativePath",a),s}function Cue(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const s=e.split(".").pop().toLowerCase(),i=Aue.get(s);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function Vk(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Eue=[".DS_Store","Thumbs.db"];function Pue(t){return Vm(this,void 0,void 0,function*(){return l1(t)&&Tue(t.dataTransfer)?kue(t.dataTransfer,t.type):_ue(t)?Iue(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?Due(t):[]})}function Tue(t){return l1(t)}function _ue(t){return l1(t)&&l1(t.target)}function l1(t){return typeof t=="object"&&t!==null}function Iue(t){return EE(t.target.files).map(e=>jg(e))}function Due(t){return Vm(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>jg(r))})}function kue(t,e){return Vm(this,void 0,void 0,function*(){if(t.items){const r=EE(t.items).filter(i=>i.kind==="file");if(e!=="drop")return r;const s=yield Promise.all(r.map(Oue));return Hk(Zq(s))}return Hk(EE(t.files).map(r=>jg(r)))})}function Hk(t){return t.filter(e=>Eue.indexOf(e.name)===-1)}function EE(t){if(t===null)return[];const e=[];for(let r=0;r<t.length;r++){const s=t[r];e.push(s)}return e}function Oue(t){if(typeof t.webkitGetAsEntry!="function")return Wk(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Qq(e):Wk(t,e)}function Zq(t){return t.reduce((e,r)=>[...e,...Array.isArray(r)?Zq(r):[r]],[])}function Wk(t,e){return Vm(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,jg(o)}}const s=t.getAsFile();if(!s)throw new Error(`${t} is not a File`);return jg(s,(r=e?.fullPath)!==null&&r!==void 0?r:void 0)})}function Rue(t){return Vm(this,void 0,void 0,function*(){return t.isDirectory?Qq(t):Lue(t)})}function Qq(t){const e=t.createReader();return new Promise((r,s)=>{const i=[];function a(){e.readEntries(o=>Vm(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Rue));i.push(l),a()}else try{const l=yield Promise.all(i);r(l)}catch(l){s(l)}}),o=>{s(o)})}a()})}function Lue(t){return Vm(this,void 0,void 0,function*(){return new Promise((e,r)=>{t.file(s=>{const i=jg(s,t.fullPath);e(i)},s=>{r(s)})})})}var cb={},Gk;function Mue(){return Gk||(Gk=1,cb.__esModule=!0,cb.default=function(t,e){if(t&&e){var r=Array.isArray(e)?e:e.split(",");if(r.length===0)return!0;var s=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return r.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):i===l})}return!0}),cb}var Fue=Mue();const jN=Kr(Fue);function Kk(t){return zue(t)||Bue(t)||eU(t)||$ue()}function $ue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zue(t){if(Array.isArray(t))return PE(t)}function Yk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Xk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(r),!0).forEach(function(s){Jq(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Jq(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gx(t,e){return Vue(t)||Uue(t,e)||eU(t,e)||que()}function que(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eU(t,e){if(t){if(typeof t=="string")return PE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PE(t,e)}}function PE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Uue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],i=!0,a=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw l}}return s}}function Vue(t){if(Array.isArray(t))return t}var Hue=typeof jN=="function"?jN:jN.default,Wue="file-invalid-type",Gue="file-too-large",Kue="file-too-small",Yue="too-many-files",Xue=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(","),s=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:Wue,message:"File type must be ".concat(s)}},Zk=function(e){return{code:Gue,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Qk=function(e){return{code:Kue,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Zue={code:Yue,message:"Too many files"};function tU(t,e){var r=t.type==="application/x-moz-file"||Hue(t,e);return[r,r?null:Xue(e)]}function rU(t,e,r){if(im(t.size))if(im(e)&&im(r)){if(t.size>r)return[!1,Zk(r)];if(t.size<e)return[!1,Qk(e)]}else{if(im(e)&&t.size<e)return[!1,Qk(e)];if(im(r)&&t.size>r)return[!1,Zk(r)]}return[!0,null]}function im(t){return t!=null}function Que(t){var e=t.files,r=t.accept,s=t.minSize,i=t.maxSize,a=t.multiple,o=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(c){var d=tU(c,r),u=Gx(d,1),h=u[0],f=rU(c,s,i),p=Gx(f,1),y=p[0],v=l?l(c):null;return h&&y&&!v})}function c1(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function db(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Jk(t){t.preventDefault()}function Jue(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function ehe(t){return t.indexOf("Edge/")!==-1}function the(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Jue(t)||ehe(t)}function Gc(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(s){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return e.some(function(l){return!c1(s)&&l&&l.apply(void 0,[s].concat(a)),c1(s)})}}function rhe(){return"showOpenFilePicker"in window}function nhe(t){if(im(t)){var e=Object.entries(t).filter(function(r){var s=Gx(r,2),i=s[0],a=s[1],o=!0;return nU(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(sU))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(r,s){var i=Gx(s,2),a=i[0],o=i[1];return Xk(Xk({},r),{},Jq({},a,o))},{});return[{description:"Files",accept:e}]}return t}function she(t){if(im(t))return Object.entries(t).reduce(function(e,r){var s=Gx(r,2),i=s[0],a=s[1];return[].concat(Kk(e),[i],Kk(a))},[]).filter(function(e){return nU(e)||sU(e)}).join(",")}function ihe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function ahe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function nU(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function sU(t){return/^.*\.[\w]+$/.test(t)}var ohe=["children"],lhe=["open"],che=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],dhe=["refKey","onChange","onClick"];function uhe(t){return mhe(t)||fhe(t)||iU(t)||hhe()}function hhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mhe(t){if(Array.isArray(t))return TE(t)}function wN(t,e){return vhe(t)||ghe(t,e)||iU(t,e)||phe()}function phe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iU(t,e){if(t){if(typeof t=="string")return TE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TE(t,e)}}function TE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function ghe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s=[],i=!0,a=!1,o,l;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(s.push(o.value),!(e&&s.length===e));i=!0);}catch(c){a=!0,l=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw l}}return s}}function vhe(t){if(Array.isArray(t))return t}function eO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function ms(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(r),!0).forEach(function(s){_E(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function _E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d1(t,e){if(t==null)return{};var r=xhe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function xhe(t,e){if(t==null)return{};var r={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var BT=S.forwardRef(function(t,e){var r=t.children,s=d1(t,ohe),i=Hj(s),a=i.open,o=d1(i,lhe);return S.useImperativeHandle(e,function(){return{open:a}},[a]),be.createElement(S.Fragment,null,r(ms(ms({},o),{},{open:a})))});BT.displayName="Dropzone";var aU={disabled:!1,getFilesFromEvent:Pue,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};BT.defaultProps=aU;BT.propTypes={children:Xt.func,accept:Xt.objectOf(Xt.arrayOf(Xt.string)),multiple:Xt.bool,preventDropOnDocument:Xt.bool,noClick:Xt.bool,noKeyboard:Xt.bool,noDrag:Xt.bool,noDragEventsBubbling:Xt.bool,minSize:Xt.number,maxSize:Xt.number,maxFiles:Xt.number,disabled:Xt.bool,getFilesFromEvent:Xt.func,onFileDialogCancel:Xt.func,onFileDialogOpen:Xt.func,useFsAccessApi:Xt.bool,autoFocus:Xt.bool,onDragEnter:Xt.func,onDragLeave:Xt.func,onDragOver:Xt.func,onDrop:Xt.func,onDropAccepted:Xt.func,onDropRejected:Xt.func,onError:Xt.func,validator:Xt.func};var IE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Hj(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ms(ms({},aU),t),r=e.accept,s=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,l=e.multiple,c=e.maxFiles,d=e.onDragEnter,u=e.onDragLeave,h=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,y=e.onDropRejected,v=e.onFileDialogCancel,g=e.onFileDialogOpen,b=e.useFsAccessApi,j=e.autoFocus,w=e.preventDropOnDocument,C=e.noClick,E=e.noKeyboard,N=e.noDrag,A=e.noDragEventsBubbling,_=e.onError,k=e.validator,F=S.useMemo(function(){return she(r)},[r]),I=S.useMemo(function(){return nhe(r)},[r]),T=S.useMemo(function(){return typeof g=="function"?g:tO},[g]),R=S.useMemo(function(){return typeof v=="function"?v:tO},[v]),O=S.useRef(null),z=S.useRef(null),q=S.useReducer(yhe,IE),B=wN(q,2),K=B[0],Y=B[1],J=K.isFocused,H=K.isFileDialogActive,$=S.useRef(typeof window<"u"&&window.isSecureContext&&b&&rhe()),W=function(){!$.current&&H&&setTimeout(function(){if(z.current){var ut=z.current.files;ut.length||(Y({type:"closeDialog"}),R())}},300)};S.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[z,H,R,$]);var te=S.useRef([]),ee=function(ut){O.current&&O.current.contains(ut.target)||(ut.preventDefault(),te.current=[])};S.useEffect(function(){return w&&(document.addEventListener("dragover",Jk,!1),document.addEventListener("drop",ee,!1)),function(){w&&(document.removeEventListener("dragover",Jk),document.removeEventListener("drop",ee))}},[O,w]),S.useEffect(function(){return!s&&j&&O.current&&O.current.focus(),function(){}},[O,j,s]);var ne=S.useCallback(function(Ze){_?_(Ze):console.error(Ze)},[_]),ae=S.useCallback(function(Ze){Ze.preventDefault(),Ze.persist(),lt(Ze),te.current=[].concat(uhe(te.current),[Ze.target]),db(Ze)&&Promise.resolve(i(Ze)).then(function(ut){if(!(c1(Ze)&&!A)){var Et=ut.length,kt=Et>0&&Que({files:ut,accept:F,minSize:o,maxSize:a,multiple:l,maxFiles:c,validator:k}),Kt=Et>0&&!kt;Y({isDragAccept:kt,isDragReject:Kt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Ze)}}).catch(function(ut){return ne(ut)})},[i,d,ne,A,F,o,a,l,c,k]),ve=S.useCallback(function(Ze){Ze.preventDefault(),Ze.persist(),lt(Ze);var ut=db(Ze);if(ut&&Ze.dataTransfer)try{Ze.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Ze),!1},[h,A]),xe=S.useCallback(function(Ze){Ze.preventDefault(),Ze.persist(),lt(Ze);var ut=te.current.filter(function(kt){return O.current&&O.current.contains(kt)}),Et=ut.indexOf(Ze.target);Et!==-1&&ut.splice(Et,1),te.current=ut,!(ut.length>0)&&(Y({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),db(Ze)&&u&&u(Ze))},[O,u,A]),Se=S.useCallback(function(Ze,ut){var Et=[],kt=[];Ze.forEach(function(Kt){var Vt=tU(Kt,F),nr=wN(Vt,2),Nt=nr[0],Yr=nr[1],wr=rU(Kt,o,a),xs=wN(wr,2),Xr=xs[0],an=xs[1],di=k?k(Kt):null;if(Nt&&Xr&&!di)Et.push(Kt);else{var Rr=[Yr,an];di&&(Rr=Rr.concat(di)),kt.push({file:Kt,errors:Rr.filter(function(ho){return ho})})}}),(!l&&Et.length>1||l&&c>=1&&Et.length>c)&&(Et.forEach(function(Kt){kt.push({file:Kt,errors:[Zue]})}),Et.splice(0)),Y({acceptedFiles:Et,fileRejections:kt,isDragReject:kt.length>0,type:"setFiles"}),f&&f(Et,kt,ut),kt.length>0&&y&&y(kt,ut),Et.length>0&&p&&p(Et,ut)},[Y,l,F,o,a,c,f,p,y,k]),Pe=S.useCallback(function(Ze){Ze.preventDefault(),Ze.persist(),lt(Ze),te.current=[],db(Ze)&&Promise.resolve(i(Ze)).then(function(ut){c1(Ze)&&!A||Se(ut,Ze)}).catch(function(ut){return ne(ut)}),Y({type:"reset"})},[i,Se,ne,A]),Ce=S.useCallback(function(){if($.current){Y({type:"openDialog"}),T();var Ze={multiple:l,types:I};window.showOpenFilePicker(Ze).then(function(ut){return i(ut)}).then(function(ut){Se(ut,null),Y({type:"closeDialog"})}).catch(function(ut){ihe(ut)?(R(ut),Y({type:"closeDialog"})):ahe(ut)?($.current=!1,z.current?(z.current.value=null,z.current.click()):ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ne(ut)});return}z.current&&(Y({type:"openDialog"}),T(),z.current.value=null,z.current.click())},[Y,T,R,b,Se,ne,I,l]),He=S.useCallback(function(Ze){!O.current||!O.current.isEqualNode(Ze.target)||(Ze.key===" "||Ze.key==="Enter"||Ze.keyCode===32||Ze.keyCode===13)&&(Ze.preventDefault(),Ce())},[O,Ce]),Ke=S.useCallback(function(){Y({type:"focus"})},[]),we=S.useCallback(function(){Y({type:"blur"})},[]),oe=S.useCallback(function(){C||(the()?setTimeout(Ce,0):Ce())},[C,Ce]),it=function(ut){return s?null:ut},_e=function(ut){return E?null:it(ut)},qe=function(ut){return N?null:it(ut)},lt=function(ut){A&&ut.stopPropagation()},vt=S.useMemo(function(){return function(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Ze.refKey,Et=ut===void 0?"ref":ut,kt=Ze.role,Kt=Ze.onKeyDown,Vt=Ze.onFocus,nr=Ze.onBlur,Nt=Ze.onClick,Yr=Ze.onDragEnter,wr=Ze.onDragOver,xs=Ze.onDragLeave,Xr=Ze.onDrop,an=d1(Ze,che);return ms(ms(_E({onKeyDown:_e(Gc(Kt,He)),onFocus:_e(Gc(Vt,Ke)),onBlur:_e(Gc(nr,we)),onClick:it(Gc(Nt,oe)),onDragEnter:qe(Gc(Yr,ae)),onDragOver:qe(Gc(wr,ve)),onDragLeave:qe(Gc(xs,xe)),onDrop:qe(Gc(Xr,Pe)),role:typeof kt=="string"&&kt!==""?kt:"presentation"},Et,O),!s&&!E?{tabIndex:0}:{}),an)}},[O,He,Ke,we,oe,ae,ve,xe,Pe,E,N,s]),xt=S.useCallback(function(Ze){Ze.stopPropagation()},[]),Ot=S.useMemo(function(){return function(){var Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Ze.refKey,Et=ut===void 0?"ref":ut,kt=Ze.onChange,Kt=Ze.onClick,Vt=d1(Ze,dhe),nr=_E({accept:F,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:it(Gc(kt,Pe)),onClick:it(Gc(Kt,xt)),tabIndex:-1},Et,z);return ms(ms({},nr),Vt)}},[z,r,l,Pe,s]);return ms(ms({},K),{},{isFocused:J&&!s,getRootProps:vt,getInputProps:Ot,rootRef:O,inputRef:z,open:it(Ce)})}function yhe(t,e){switch(e.type){case"focus":return ms(ms({},t),{},{isFocused:!0});case"blur":return ms(ms({},t),{},{isFocused:!1});case"openDialog":return ms(ms({},IE),{},{isFileDialogActive:!0});case"closeDialog":return ms(ms({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return ms(ms({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ms(ms({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ms({},IE);default:return t}}function tO(){}function oU({delivery:t,vehicles:e,customers:r,onSave:s,onCancel:i}){const{toast:a}=Gt(),[o,l]=S.useState(!1),[c,d]=S.useState(t?.type||iu.deliveryTypes[0]),[u,h]=S.useState(t?.status||iu.deliveryStatuses[0]),[f,p]=S.useState(t?.scheduledDate?new Date(t.scheduledDate).toISOString().split("T")[0]:""),[y,v]=S.useState(!1),[g,b]=S.useState({customerId:"",vehicleId:"",status:_r.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}}),[j,w]=S.useState(t?.notes||""),[C,E]=S.useState(()=>{const T={};return iu.checklistItems.forEach(R=>{T[R]=!1}),{...T,...t?.checklist}});S.useEffect(()=>{t&&b({...t,customFields:{...t.customFields,contactPhone:t.customFields?.contactPhone||"",contactEmail:t.customFields?.contactEmail||"",sendSMSUpdates:t.customFields?.sendSMSUpdates!==!1,sendEmailUpdates:t.customFields?.sendEmailUpdates!==!1,estimatedArrival:t.customFields?.estimatedArrival||"",departureTime:t.customFields?.departureTime||"",departureNotes:t.customFields?.departureNotes||"",deliveryNotes:t.customFields?.deliveryNotes||"",deliveryPhotos:t.customFields?.deliveryPhotos||[]}})},[t]);const{getRootProps:N,getInputProps:A}=Hj({accept:{"image/*":[]},onDrop:T=>{const R=T.map(O=>URL.createObjectURL(O));b(O=>({...O,customFields:{...O.customFields,deliveryPhotos:[...O.customFields?.deliveryPhotos||[],...R]}})),a({title:"Photos Added",description:`Added ${T.length} delivery photos`})}}),_=T=>{T==="__add_new_customer__"?v(!0):b(R=>({...R,customerId:T}))},k=T=>{b(R=>({...R,customerId:T.id})),v(!1),a({title:"Customer Added",description:`${T.firstName} ${T.lastName} has been added as a customer.`})},F=async T=>{if(T.preventDefault(),!g.customerId||!g.vehicleId||!g.scheduledDate){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!g.address?.street||!g.address?.city||!g.address?.state||!g.address?.zipCode){a({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}l(!0);try{await s(g),a({title:"Success",description:`Delivery ${t?"updated":"scheduled"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"schedule"} delivery`,variant:"destructive"})}finally{l(!1)}},I=T=>{b(R=>({...R,customFields:{...R.customFields,deliveryPhotos:R.customFields?.deliveryPhotos?.filter(O=>O!==T)||[]}}))};return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[y&&n.jsx(rv,{onClose:()=>v(!1),onSuccess:k}),n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Delivery":"Schedule Delivery"}),n.jsx(Ge,{children:t?"Update delivery details":"Schedule a new delivery"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:F,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(nt,{value:g.customerId,onValueChange:_,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select customer"})}),n.jsxs(tt,{className:"z-50",children:[n.jsx("div",{className:"px-2 py-1.5",children:n.jsxs(re,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>_("__add_new_customer__"),children:[n.jsx(Dt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),n.jsx("div",{className:"px-2 py-1 border-t"}),r.map(T=>n.jsx(he,{value:T.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{children:[T.firstName," ",T.lastName]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:T.phone})]})},T.id)),r.length===0&&n.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicleId",children:"Vehicle *"}),n.jsxs(nt,{value:g.vehicleId,onValueChange:T=>b(R=>({...R,vehicleId:T})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select vehicle"})}),n.jsx(tt,{className:"z-50",children:e.map(T=>n.jsxs(he,{value:T.id,children:[T.year," ",T.make," ",T.model]},T.id))})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),n.jsx(Te,{id:"scheduledDate",type:"date",value:g.scheduledDate?new Date(g.scheduledDate).toISOString().split("T")[0]:"",onChange:T=>b(R=>({...R,scheduledDate:T.target.value?new Date(T.target.value):new Date}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),n.jsx(Te,{id:"estimatedArrival",type:"time",value:g.customFields?.estimatedArrival||"",onChange:T=>b(R=>({...R,customFields:{...R.customFields,estimatedArrival:T.target.value}}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"deliveryType",children:"Delivery Type"}),n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select delivery type"})}),n.jsx(tt,{children:iu.deliveryTypes.map(T=>n.jsx(he,{value:T,children:T},T))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:u,onValueChange:h,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select status"})}),n.jsx(tt,{children:iu.deliveryStatuses.map(T=>n.jsx(he,{value:T,children:T},T))})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"driver",children:"Driver"}),n.jsx(Te,{id:"driver",value:g.driver||"",onChange:T=>b(R=>({...R,driver:T.target.value})),placeholder:"Driver name"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"street",children:"Street Address *"}),n.jsx(Te,{id:"street",value:g.address?.street||"",onChange:T=>b(R=>({...R,address:{...R.address,street:T.target.value}})),placeholder:"123 Main St"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"city",children:"City *"}),n.jsx(Te,{id:"city",value:g.address?.city||"",onChange:T=>b(R=>({...R,address:{...R.address,city:T.target.value}})),placeholder:"City"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"state",children:"State *"}),n.jsx(Te,{id:"state",value:g.address?.state||"",onChange:T=>b(R=>({...R,address:{...R.address,state:T.target.value}})),placeholder:"State"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"zipCode",children:"Zip Code *"}),n.jsx(Te,{id:"zipCode",value:g.address?.zipCode||"",onChange:T=>b(R=>({...R,address:{...R.address,zipCode:T.target.value}})),placeholder:"Zip Code"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"country",children:"Country"}),n.jsx(Te,{id:"country",value:g.address?.country||"USA",onChange:T=>b(R=>({...R,address:{...R.address,country:T.target.value}})),placeholder:"Country"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"contactPhone",children:"Contact Phone"}),n.jsx(Te,{id:"contactPhone",value:g.customFields?.contactPhone||"",onChange:T=>b(R=>({...R,customFields:{...R.customFields,contactPhone:T.target.value}})),placeholder:"(555) 123-4567"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"contactEmail",children:"Contact Email"}),n.jsx(Te,{id:"contactEmail",type:"email",value:g.customFields?.contactEmail||"",onChange:T=>b(R=>({...R,customFields:{...R.customFields,contactEmail:T.target.value}})),placeholder:"customer@example.com"})]})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"sendSMSUpdates",checked:g.customFields?.sendSMSUpdates!==!1,onCheckedChange:T=>b(R=>({...R,customFields:{...R.customFields,sendSMSUpdates:!!T}}))}),n.jsx(ue,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"sendEmailUpdates",checked:g.customFields?.sendEmailUpdates!==!1,onCheckedChange:T=>b(R=>({...R,customFields:{...R.customFields,sendEmailUpdates:!!T}}))}),n.jsx(ue,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(g.status===_r.IN_TRANSIT||g.status===_r.DELIVERED)&&n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"departureTime",children:"Departure Time"}),n.jsx(Te,{id:"departureTime",type:"datetime-local",value:g.customFields?.departureTime||"",onChange:T=>b(R=>({...R,customFields:{...R.customFields,departureTime:T.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"departureNotes",children:"Departure Notes"}),n.jsx(Te,{id:"departureNotes",value:g.customFields?.departureNotes||"",onChange:T=>b(R=>({...R,customFields:{...R.customFields,departureNotes:T.target.value}})),placeholder:"Notes about departure"})]})]}),g.status===_r.DELIVERED&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"deliveredDate",children:"Delivery Date"}),n.jsx(Te,{id:"deliveredDate",type:"datetime-local",value:g.deliveredDate?new Date(g.deliveredDate).toISOString().slice(0,16):"",onChange:T=>b(R=>({...R,deliveredDate:T.target.value?new Date(T.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Delivery Notes"}),n.jsx(kr,{id:"notes",value:g.notes||"",onChange:T=>b(R=>({...R,notes:T.target.value})),placeholder:"Add any notes about this delivery",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Delivery Checklist"}),n.jsx("div",{className:"space-y-2 mt-2",children:iu.checklistItems.map(T=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{checked:C[T]||!1,onCheckedChange:R=>E(O=>({...O,[T]:!!R}))}),n.jsx(ue,{className:"text-sm",children:T})]},T))})]})]}),(g.status===_r.DELIVERED||g.status===_r.IN_TRANSIT)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),n.jsxs("div",{...N(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...A()}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),g.customFields?.deliveryPhotos&&g.customFields.deliveryPhotos.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:g.customFields.deliveryPhotos.map((T,R)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:T,alt:`Delivery photo ${R+1}`,className:"h-24 w-full object-cover rounded-md"}),n.jsx(re,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>I(T),children:n.jsx(Cr,{className:"h-3 w-3"})})]},R))})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Scheduling..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function bhe({delivery:t,onAddMilestone:e}){const s=(()=>{try{const i=[],a=t.customFields||{},o=c=>c?new Date(c):new Date;return i.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${wt(t.scheduledDate)}`,date:o(t.createdAt),icon:Br}),[_r.IN_TRANSIT,_r.DELIVERED].includes(t.status)&&(i.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(t.scheduledDate).getTime()-864e5),icon:hn}),i.push({id:"in_transit",title:"In Transit",description:a.departureNotes||"Vehicle has left the dealership",date:o(a.departureTime),icon:io})),a.etaUpdated&&a.estimatedArrival&&i.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${a.estimatedArrival}`,date:o(a.etaUpdated),icon:Dr}),a.customerNotified&&i.push({id:"customer_notified",title:"Customer Notified",description:`${a.notificationMethod||"SMS"} notification sent to customer`,date:o(a.customerNotified),icon:Ps}),t.status===_r.DELIVERED&&(i.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:o(t.deliveredDate),icon:vu}),i.push({id:"delivered",title:"Delivery Confirmed",description:a.deliveryNotes||"Delivery completed successfully",date:o(t.deliveredDate),icon:hn}),Array.isArray(a.deliveryPhotos)&&a.deliveryPhotos.length>0&&i.push({id:"photos",title:"Delivery Photos",description:`${a.deliveryPhotos.length} photo(s) captured`,date:o(t.deliveredDate),icon:td})),Array.from(new Map(i.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(i){return console.error("Failed to generate milestones:",i),[]}})();return n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(io,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),n.jsx(Ge,{children:"Track the progress of this delivery"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"relative pl-8 space-y-8",children:[n.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),s.map((i,a)=>{const o=i.icon;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:pt("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:n.jsx(o,{className:"h-3 w-3"})}),n.jsxs("div",{className:"mb-1 flex items-center",children:[n.jsx("h3",{className:"text-base font-semibold",children:i.title}),n.jsx(Ve,{className:"ml-2 text-xs",variant:"outline",children:wt(i.date)})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),i.id==="photos"&&t.customFields?.deliveryPhotos&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.customFields.deliveryPhotos.map((l,c)=>n.jsx("img",{src:l,alt:`Delivery photo ${c+1}`,className:"h-20 w-full object-cover rounded-md"},c))})]},i.id)})]})})]})}var pa=Uint8Array,$o=Uint16Array,zT=Int32Array,Wj=new pa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gj=new pa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DE=new pa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lU=function(t,e){for(var r=new $o(31),s=0;s<31;++s)r[s]=e+=1<<t[s-1];for(var i=new zT(r[30]),s=1;s<30;++s)for(var a=r[s];a<r[s+1];++a)i[a]=a-r[s]<<5|s;return{b:r,r:i}},cU=lU(Wj,2),dU=cU.b,kE=cU.r;dU[28]=258,kE[258]=28;var uU=lU(Gj,0),jhe=uU.b,rO=uU.r,OE=new $o(32768);for(var ts=0;ts<32768;++ts){var wh=(ts&43690)>>1|(ts&21845)<<1;wh=(wh&52428)>>2|(wh&13107)<<2,wh=(wh&61680)>>4|(wh&3855)<<4,OE[ts]=((wh&65280)>>8|(wh&255)<<8)>>1}var od=function(t,e,r){for(var s=t.length,i=0,a=new $o(e);i<s;++i)t[i]&&++a[t[i]-1];var o=new $o(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(r){l=new $o(1<<e);var c=15-e;for(i=0;i<s;++i)if(t[i])for(var d=i<<4|t[i],u=e-t[i],h=o[t[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[OE[h]>>c]=d}else for(l=new $o(s),i=0;i<s;++i)t[i]&&(l[i]=OE[o[t[i]-1]++]>>15-t[i]);return l},rf=new pa(288);for(var ts=0;ts<144;++ts)rf[ts]=8;for(var ts=144;ts<256;++ts)rf[ts]=9;for(var ts=256;ts<280;++ts)rf[ts]=7;for(var ts=280;ts<288;++ts)rf[ts]=8;var Kx=new pa(32);for(var ts=0;ts<32;++ts)Kx[ts]=5;var whe=od(rf,9,0),Nhe=od(rf,9,1),She=od(Kx,5,0),Ahe=od(Kx,5,1),NN=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Yl=function(t,e,r){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&r},SN=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},qT=function(t){return(t+7)/8|0},hU=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new pa(t.subarray(e,r))},Che=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ql=function(t,e,r){var s=new Error(e||Che[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,Ql),!r)throw s;return s},Ehe=function(t,e,r,s){var i=t.length,a=0;if(!i||e.f&&!e.l)return r||new pa(0);var o=!r,l=o||e.i!=2,c=e.i;o&&(r=new pa(i*3));var d=function(Pe){var Ce=r.length;if(Pe>Ce){var He=new pa(Math.max(Ce*2,Pe));He.set(r),r=He}},u=e.f||0,h=e.p||0,f=e.b||0,p=e.l,y=e.d,v=e.m,g=e.n,b=i*8;do{if(!p){u=Yl(t,h,1);var j=Yl(t,h+1,3);if(h+=3,j)if(j==1)p=Nhe,y=Ahe,v=9,g=5;else if(j==2){var N=Yl(t,h,31)+257,A=Yl(t,h+10,15)+4,_=N+Yl(t,h+5,31)+1;h+=14;for(var k=new pa(_),F=new pa(19),I=0;I<A;++I)F[DE[I]]=Yl(t,h+I*3,7);h+=A*3;for(var T=NN(F),R=(1<<T)-1,O=od(F,T,1),I=0;I<_;){var z=O[Yl(t,h,R)];h+=z&15;var w=z>>4;if(w<16)k[I++]=w;else{var q=0,B=0;for(w==16?(B=3+Yl(t,h,3),h+=2,q=k[I-1]):w==17?(B=3+Yl(t,h,7),h+=3):w==18&&(B=11+Yl(t,h,127),h+=7);B--;)k[I++]=q}}var K=k.subarray(0,N),Y=k.subarray(N);v=NN(K),g=NN(Y),p=od(K,v,1),y=od(Y,g,1)}else Ql(1);else{var w=qT(h)+4,C=t[w-4]|t[w-3]<<8,E=w+C;if(E>i){c&&Ql(0);break}l&&d(f+C),r.set(t.subarray(w,E),f),e.b=f+=C,e.p=h=E*8,e.f=u;continue}if(h>b){c&&Ql(0);break}}l&&d(f+131072);for(var J=(1<<v)-1,H=(1<<g)-1,$=h;;$=h){var q=p[SN(t,h)&J],W=q>>4;if(h+=q&15,h>b){c&&Ql(0);break}if(q||Ql(2),W<256)r[f++]=W;else if(W==256){$=h,p=null;break}else{var te=W-254;if(W>264){var I=W-257,ee=Wj[I];te=Yl(t,h,(1<<ee)-1)+dU[I],h+=ee}var ne=y[SN(t,h)&H],ae=ne>>4;ne||Ql(3),h+=ne&15;var Y=jhe[ae];if(ae>3){var ee=Gj[ae];Y+=SN(t,h)&(1<<ee)-1,h+=ee}if(h>b){c&&Ql(0);break}l&&d(f+131072);var ve=f+te;if(f<Y){var xe=a-Y,Se=Math.min(Y,ve);for(xe+f<0&&Ql(3);f<Se;++f)r[f]=s[xe+f]}for(;f<ve;++f)r[f]=r[f-Y]}}e.l=p,e.p=$,e.b=f,e.f=u,p&&(u=1,e.m=v,e.d=y,e.n=g)}while(!u);return f!=r.length&&o?hU(r,0,f):r.subarray(0,f)},Jd=function(t,e,r){r<<=e&7;var s=e/8|0;t[s]|=r,t[s+1]|=r>>8},Wv=function(t,e,r){r<<=e&7;var s=e/8|0;t[s]|=r,t[s+1]|=r>>8,t[s+2]|=r>>16},AN=function(t,e){for(var r=[],s=0;s<t.length;++s)t[s]&&r.push({s,f:t[s]});var i=r.length,a=r.slice();if(!i)return{t:mU,l:0};if(i==1){var o=new pa(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(E,N){return E.f-N.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=i-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=a[0].s,s=1;s<i;++s)a[s].s>f&&(f=a[s].s);var p=new $o(f+1),y=RE(r[u-1],p,0);if(y>e){var s=0,v=0,g=y-e,b=1<<g;for(a.sort(function(N,A){return p[A.s]-p[N.s]||N.f-A.f});s<i;++s){var j=a[s].s;if(p[j]>e)v+=b-(1<<y-p[j]),p[j]=e;else break}for(v>>=g;v>0;){var w=a[s].s;p[w]<e?v-=1<<e-p[w]++-1:++s}for(;s>=0&&v;--s){var C=a[s].s;p[C]==e&&(--p[C],++v)}y=e}return{t:new pa(p),l:y}},RE=function(t,e,r){return t.s==-1?Math.max(RE(t.l,e,r+1),RE(t.r,e,r+1)):e[t.s]=r},nO=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new $o(++e),s=0,i=t[0],a=1,o=function(c){r[s++]=c},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[l]}return{c:r.subarray(0,s),n:e}},Gv=function(t,e){for(var r=0,s=0;s<e.length;++s)r+=t[s]*e[s];return r},fU=function(t,e,r){var s=r.length,i=qT(e+2);t[i]=s&255,t[i+1]=s>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<s;++a)t[i+a+4]=r[a];return(i+4+s)*8},sO=function(t,e,r,s,i,a,o,l,c,d,u){Jd(e,u++,r),++i[256];for(var h=AN(i,15),f=h.t,p=h.l,y=AN(a,15),v=y.t,g=y.l,b=nO(f),j=b.c,w=b.n,C=nO(v),E=C.c,N=C.n,A=new $o(19),_=0;_<j.length;++_)++A[j[_]&31];for(var _=0;_<E.length;++_)++A[E[_]&31];for(var k=AN(A,7),F=k.t,I=k.l,T=19;T>4&&!F[DE[T-1]];--T);var R=d+5<<3,O=Gv(i,rf)+Gv(a,Kx)+o,z=Gv(i,f)+Gv(a,v)+o+14+3*T+Gv(A,F)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&R<=O&&R<=z)return fU(e,u,t.subarray(c,c+d));var q,B,K,Y;if(Jd(e,u,1+(z<O)),u+=2,z<O){q=od(f,p,0),B=f,K=od(v,g,0),Y=v;var J=od(F,I,0);Jd(e,u,w-257),Jd(e,u+5,N-1),Jd(e,u+10,T-4),u+=14;for(var _=0;_<T;++_)Jd(e,u+3*_,F[DE[_]]);u+=3*T;for(var H=[j,E],$=0;$<2;++$)for(var W=H[$],_=0;_<W.length;++_){var te=W[_]&31;Jd(e,u,J[te]),u+=F[te],te>15&&(Jd(e,u,W[_]>>5&127),u+=W[_]>>12)}}else q=whe,B=rf,K=She,Y=Kx;for(var _=0;_<l;++_){var ee=s[_];if(ee>255){var te=ee>>18&31;Wv(e,u,q[te+257]),u+=B[te+257],te>7&&(Jd(e,u,ee>>23&31),u+=Wj[te]);var ne=ee&31;Wv(e,u,K[ne]),u+=Y[ne],ne>3&&(Wv(e,u,ee>>5&8191),u+=Gj[ne])}else Wv(e,u,q[ee]),u+=B[ee]}return Wv(e,u,q[256]),u+B[256]},Phe=new zT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),mU=new pa(0),The=function(t,e,r,s,i,a){var o=a.z||t.length,l=new pa(s+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(s,l.length-i),d=a.l,u=(a.r||0)&7;if(e){u&&(c[0]=a.r>>3);for(var h=Phe[e-1],f=h>>13,p=h&8191,y=(1<<r)-1,v=a.p||new $o(32768),g=a.h||new $o(y+1),b=Math.ceil(r/3),j=2*b,w=function(Ke){return(t[Ke]^t[Ke+1]<<b^t[Ke+2]<<j)&y},C=new zT(25e3),E=new $o(288),N=new $o(32),A=0,_=0,k=a.i||0,F=0,I=a.w||0,T=0;k+2<o;++k){var R=w(k),O=k&32767,z=g[R];if(v[O]=z,g[R]=O,I<=k){var q=o-k;if((A>7e3||F>24576)&&(q>423||!d)){u=sO(t,c,0,C,E,N,_,F,T,k-T,u),F=A=_=0,T=k;for(var B=0;B<286;++B)E[B]=0;for(var B=0;B<30;++B)N[B]=0}var K=2,Y=0,J=p,H=O-z&32767;if(q>2&&R==w(k-H))for(var $=Math.min(f,q)-1,W=Math.min(32767,k),te=Math.min(258,q);H<=W&&--J&&O!=z;){if(t[k+K]==t[k+K-H]){for(var ee=0;ee<te&&t[k+ee]==t[k+ee-H];++ee);if(ee>K){if(K=ee,Y=H,ee>$)break;for(var ne=Math.min(H,ee-2),ae=0,B=0;B<ne;++B){var ve=k-H+B&32767,xe=v[ve],Se=ve-xe&32767;Se>ae&&(ae=Se,z=ve)}}}O=z,z=v[O],H+=O-z&32767}if(Y){C[F++]=268435456|kE[K]<<18|rO[Y];var Pe=kE[K]&31,Ce=rO[Y]&31;_+=Wj[Pe]+Gj[Ce],++E[257+Pe],++N[Ce],I=k+K,++A}else C[F++]=t[k],++E[t[k]]}}for(k=Math.max(k,I);k<o;++k)C[F++]=t[k],++E[t[k]];u=sO(t,c,d,C,E,N,_,F,T,k-T,u),d||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=g,a.p=v,a.i=k,a.w=I)}else{for(var k=a.w||0;k<o+d;k+=65535){var He=k+65535;He>=o&&(c[u/8|0]=d,He=o),u=fU(c,u+1,t.subarray(k,He))}a.i=o}return hU(l,0,s+qT(u)+i)},pU=function(){var t=1,e=0;return{p:function(r){for(var s=t,i=e,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=s+=r[o];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}t=s,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},_he=function(t,e,r,s,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new pa(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return The(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,s,i)},gU=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Ihe=function(t,e){var r=e.level,s=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=s<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=pU();i.p(e.dictionary),gU(t,2,i.d())}},Dhe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ql(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ql(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function LE(t,e){e||(e={});var r=pU();r.p(t);var s=_he(t,e,e.dictionary?6:2,4);return Ihe(s,e),gU(s,s.length-4,r.d()),s}function khe(t,e){return Ehe(t.subarray(Dhe(t),-4),{i:2},e,e)}var Ohe=typeof TextDecoder<"u"&&new TextDecoder,Rhe=0;try{Ohe.decode(mU,{stream:!0}),Rhe=1}catch{}var mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function CN(){mr.console&&typeof mr.console.log=="function"&&mr.console.log.apply(mr.console,arguments)}var kn={log:CN,warn:function(t){mr.console&&(typeof mr.console.warn=="function"?mr.console.warn.apply(mr.console,arguments):CN.call(null,arguments))},error:function(t){mr.console&&(typeof mr.console.error=="function"?mr.console.error.apply(mr.console,arguments):CN(t))}};function EN(t,e,r){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){tm(s.response,e,r)},s.onerror=function(){kn.error("could not download file")},s.send()}function iO(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ub(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var yx,ME,tm=mr.saveAs||((typeof window>"u"?"undefined":un(window))!=="object"||window!==mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var s=mr.URL||mr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?iO(i.href)?EN(t,e,r):ub(i,i.target="_blank"):ub(i)):(i.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){ub(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(iO(t))EN(t,e,r);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){ub(s)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:un(a)!=="object"&&(kn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return EN(t,e,r);var i=t.type==="application/octet-stream",a=/constructor/i.test(mr.HTMLElement)||mr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":un(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},l.readAsDataURL(t)}else{var c=mr.URL||mr.webkitURL,d=c.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function vU(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var i=r[s].re,a=r[s].process,o=i.exec(t);o&&(e=a(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function PN(t,e){var r=t[0],s=t[1],i=t[2],a=t[3];r=ia(r,s,i,a,e[0],7,-680876936),a=ia(a,r,s,i,e[1],12,-389564586),i=ia(i,a,r,s,e[2],17,606105819),s=ia(s,i,a,r,e[3],22,-1044525330),r=ia(r,s,i,a,e[4],7,-176418897),a=ia(a,r,s,i,e[5],12,1200080426),i=ia(i,a,r,s,e[6],17,-1473231341),s=ia(s,i,a,r,e[7],22,-45705983),r=ia(r,s,i,a,e[8],7,1770035416),a=ia(a,r,s,i,e[9],12,-1958414417),i=ia(i,a,r,s,e[10],17,-42063),s=ia(s,i,a,r,e[11],22,-1990404162),r=ia(r,s,i,a,e[12],7,1804603682),a=ia(a,r,s,i,e[13],12,-40341101),i=ia(i,a,r,s,e[14],17,-1502002290),r=aa(r,s=ia(s,i,a,r,e[15],22,1236535329),i,a,e[1],5,-165796510),a=aa(a,r,s,i,e[6],9,-1069501632),i=aa(i,a,r,s,e[11],14,643717713),s=aa(s,i,a,r,e[0],20,-373897302),r=aa(r,s,i,a,e[5],5,-701558691),a=aa(a,r,s,i,e[10],9,38016083),i=aa(i,a,r,s,e[15],14,-660478335),s=aa(s,i,a,r,e[4],20,-405537848),r=aa(r,s,i,a,e[9],5,568446438),a=aa(a,r,s,i,e[14],9,-1019803690),i=aa(i,a,r,s,e[3],14,-187363961),s=aa(s,i,a,r,e[8],20,1163531501),r=aa(r,s,i,a,e[13],5,-1444681467),a=aa(a,r,s,i,e[2],9,-51403784),i=aa(i,a,r,s,e[7],14,1735328473),r=oa(r,s=aa(s,i,a,r,e[12],20,-1926607734),i,a,e[5],4,-378558),a=oa(a,r,s,i,e[8],11,-2022574463),i=oa(i,a,r,s,e[11],16,1839030562),s=oa(s,i,a,r,e[14],23,-35309556),r=oa(r,s,i,a,e[1],4,-1530992060),a=oa(a,r,s,i,e[4],11,1272893353),i=oa(i,a,r,s,e[7],16,-155497632),s=oa(s,i,a,r,e[10],23,-1094730640),r=oa(r,s,i,a,e[13],4,681279174),a=oa(a,r,s,i,e[0],11,-358537222),i=oa(i,a,r,s,e[3],16,-722521979),s=oa(s,i,a,r,e[6],23,76029189),r=oa(r,s,i,a,e[9],4,-640364487),a=oa(a,r,s,i,e[12],11,-421815835),i=oa(i,a,r,s,e[15],16,530742520),r=la(r,s=oa(s,i,a,r,e[2],23,-995338651),i,a,e[0],6,-198630844),a=la(a,r,s,i,e[7],10,1126891415),i=la(i,a,r,s,e[14],15,-1416354905),s=la(s,i,a,r,e[5],21,-57434055),r=la(r,s,i,a,e[12],6,1700485571),a=la(a,r,s,i,e[3],10,-1894986606),i=la(i,a,r,s,e[10],15,-1051523),s=la(s,i,a,r,e[1],21,-2054922799),r=la(r,s,i,a,e[8],6,1873313359),a=la(a,r,s,i,e[15],10,-30611744),i=la(i,a,r,s,e[6],15,-1560198380),s=la(s,i,a,r,e[13],21,1309151649),r=la(r,s,i,a,e[4],6,-145523070),a=la(a,r,s,i,e[11],10,-1120210379),i=la(i,a,r,s,e[2],15,718787259),s=la(s,i,a,r,e[9],21,-343485551),t[0]=Mh(r,t[0]),t[1]=Mh(s,t[1]),t[2]=Mh(i,t[2]),t[3]=Mh(a,t[3])}function Kj(t,e,r,s,i,a){return e=Mh(Mh(e,t),Mh(s,a)),Mh(e<<i|e>>>32-i,r)}function ia(t,e,r,s,i,a,o){return Kj(e&r|~e&s,t,e,i,a,o)}function aa(t,e,r,s,i,a,o){return Kj(e&s|r&~s,t,e,i,a,o)}function oa(t,e,r,s,i,a,o){return Kj(e^r^s,t,e,i,a,o)}function la(t,e,r,s,i,a,o){return Kj(r^(e|~s),t,e,i,a,o)}function xU(t){var e,r=t.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)PN(s,Lhe(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(PN(s,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,PN(s,i),s}function Lhe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}yx=mr.atob.bind(mr),ME=mr.btoa.bind(mr);var aO="0123456789abcdef".split("");function Mhe(t){for(var e="",r=0;r<4;r++)e+=aO[t>>8*r+4&15]+aO[t>>8*r&15];return e}function Fhe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function FE(t){return xU(t).map(Fhe).join("")}var $he=function(t){for(var e=0;e<t.length;e++)t[e]=Mhe(t[e]);return t.join("")}(xU("hello"))!="5d41402abc4b2a76b9719d911017c592";function Mh(t,e){if($he){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $E(t,e){var r,s,i,a;if(t!==r){for(var o=(i=t,a=1+(256/t.length>>0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=t,s=l}else l=s;var h=e.length,f=0,p=0,y="";for(c=0;c<h;c++)p=(p+(u=l[f=(f+1)%256]))%256,l[f]=l[p],l[p]=u,o=l[(l[f]+l[p])%256],y+=String.fromCharCode(e.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var oO={print:4,modify:8,copy:16,"annot-forms":32};function Gp(t,e,r,s){this.v=1,this.r=2;var i=192;t.forEach(function(l){if(oO.perm!==void 0)throw new Error("Invalid permission: "+l);i+=oO[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=FE(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=$E(this.encryptionKey,this.padding)}function Kp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,s=0;s<r;s++){var i=t.charCodeAt(s);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[s]}return e}function lO(t){if(un(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,s,i){if(i=i||!1,typeof r!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[s,!!i],a},this.unsubscribe=function(r){for(var s in e)if(e[s][r])return delete e[s][r],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[r]){var o=e[r][a];try{o[0].apply(t,s)}catch(l){mr.console&&kn.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yx(t){if(!(this instanceof Yx))return new Yx(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function yU(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ih(t,e,r,s,i){if(!(this instanceof Ih))return new Ih(t,e,r,s,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,yU.call(this,s,i)}function cm(t,e,r,s,i){if(!(this instanceof cm))return new cm(t,e,r,s,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,yU.call(this,s,i)}function sr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",u=null;un(t=t||{})==="object"&&(r=t.orientation,s=t.unit||s,i=t.format||i,a=t.compress||t.compressPdf||a,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),o=t.filters||(a===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=lO;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(U){y=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var b=p.__private__.getPageFormat=function(U){return g[U]};i=i||"a4";var j={COMPAT:"compat",ADVANCED:"advanced"},w=j.COMPAT;function C(){this.saveGraphicsState(),oe(new Zt(Nt,0,0,-Nt,0,Ic()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),d="n",w=j.ADVANCED}function E(){this.restoreGraphicsState(),d="S",w=j.COMPAT}var N=p.__private__.combineFontStyleAndFontWeight=function(U,ie){if(U=="bold"&&ie=="normal"||U=="bold"&&ie==400||U=="normal"&&ie=="italic"||U=="bold"&&ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ie&&(U=ie==400||ie==="normal"?U==="italic"?"italic":"normal":ie!=700&&ie!=="bold"||U!=="normal"?(ie==700?"bold":ie)+""+U:"bold"),U};p.advancedAPI=function(U){var ie=w===j.COMPAT;return ie&&C.call(this),typeof U!="function"||(U(this),ie&&E.call(this)),this},p.compatAPI=function(U){var ie=w===j.ADVANCED;return ie&&E.call(this),typeof U!="function"||(U(this),ie&&C.call(this)),this},p.isAdvancedAPI=function(){return w===j.ADVANCED};var A,_=function(U){if(w!==j.ADVANCED)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=p.roundToPrecision=p.__private__.roundToPrecision=function(U,ie){var Ae=e||ie;if(isNaN(U)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ae).replace(/0+$/,"")};A=p.hpf=p.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return k(U,16)};var F=p.f2=p.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return k(U,2)},I=p.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return k(U,3)},T=p.scale=p.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===j.COMPAT?U*Nt:w===j.ADVANCED?U:void 0},R=function(U){return w===j.COMPAT?Ic()-U:w===j.ADVANCED?U:void 0},O=function(U){return T(R(U))};p.__private__.setPrecision=p.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var z,q="00000000000000000000000000000000",B=p.__private__.getFileId=function(){return q},K=p.__private__.setFileId=function(U){return q=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Gn=new Gp(u.userPermissions,u.userPassword,u.ownerPassword,q)),q};p.setFileId=function(U){return K(U),this},p.getFileId=function(){return B()};var Y=p.__private__.convertDateToPDFDate=function(U){var ie=U.getTimezoneOffset(),Ae=ie<0?"+":"-",Ie=Math.floor(Math.abs(ie/60)),$e=Math.abs(ie%60),Qe=[Ae,te(Ie),"'",te($e),"'"].join("");return["D:",U.getFullYear(),te(U.getMonth()+1),te(U.getDate()),te(U.getHours()),te(U.getMinutes()),te(U.getSeconds()),Qe].join("")},J=p.__private__.convertPDFDateToDate=function(U){var ie=parseInt(U.substr(2,4),10),Ae=parseInt(U.substr(6,2),10)-1,Ie=parseInt(U.substr(8,2),10),$e=parseInt(U.substr(10,2),10),Qe=parseInt(U.substr(12,2),10),ft=parseInt(U.substr(14,2),10);return new Date(ie,Ae,Ie,$e,Qe,ft,0)},H=p.__private__.setCreationDate=function(U){var ie;if(U===void 0&&(U=new Date),U instanceof Date)ie=Y(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ie=U}return z=ie},$=p.__private__.getCreationDate=function(U){var ie=z;return U==="jsDate"&&(ie=J(z)),ie};p.setCreationDate=function(U){return H(U),this},p.getCreationDate=function(U){return $(U)};var W,te=p.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},ee=p.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},ne=0,ae=[],ve=[],xe=0,Se=[],Pe=[],Ce=!1,He=ve,Ke=function(){ne=0,xe=0,ve=[],ae=[],Se=[],Cl=Hn(),mo=Hn()};p.__private__.setCustomOutputDestination=function(U){Ce=!0,He=U};var we=function(U){Ce||(He=U)};p.__private__.resetCustomOutputDestination=function(){Ce=!1,He=ve};var oe=p.__private__.out=function(U){return U=U.toString(),xe+=U.length+1,He.push(U),He},it=p.__private__.write=function(U){return oe(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},_e=p.__private__.getArrayBuffer=function(U){for(var ie=U.length,Ae=new ArrayBuffer(ie),Ie=new Uint8Array(Ae);ie--;)Ie[ie]=U.charCodeAt(ie);return Ae},qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return qe};var lt=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(U){return lt=w===j.ADVANCED?U/Nt:U,this};var vt,xt=p.__private__.getFontSize=p.getFontSize=function(){return w===j.COMPAT?lt:lt*Nt},Ot=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(U){return Ot=U,this},p.__private__.getR2L=p.getR2L=function(){return Ot};var Ze,ut=p.__private__.setZoomMode=function(U){var ie=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))vt=U;else if(isNaN(U)){if(ie.indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');vt=U}else vt=parseInt(U,10)};p.__private__.getZoomMode=function(){return vt};var Et,kt=p.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Ze=U};p.__private__.getPageMode=function(){return Ze};var Kt=p.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');Et=U};p.__private__.getLayoutMode=function(){return Et},p.__private__.setDisplayMode=p.setDisplayMode=function(U,ie,Ae){return ut(U),Kt(ie),kt(Ae),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(U){if(Object.keys(Vt).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[U]},p.__private__.getDocumentProperties=function(){return Vt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(U){for(var ie in Vt)Vt.hasOwnProperty(ie)&&U[ie]&&(Vt[ie]=U[ie]);return this},p.__private__.setDocumentProperty=function(U,ie){if(Object.keys(Vt).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[U]=ie};var nr,Nt,Yr,wr,xs,Xr={},an={},di=[],Rr={},ho={},Ln={},ui={},Hi=null,Un=0,gr=[],Zr=new lO(p),yc=t.hotfixes||[],Hs={},Fa={},fo=[],Zt=function U(ie,Ae,Ie,$e,Qe,ft){if(!(this instanceof U))return new U(ie,Ae,Ie,$e,Qe,ft);isNaN(ie)&&(ie=1),isNaN(Ae)&&(Ae=0),isNaN(Ie)&&(Ie=0),isNaN($e)&&($e=1),isNaN(Qe)&&(Qe=0),isNaN(ft)&&(ft=0),this._matrix=[ie,Ae,Ie,$e,Qe,ft]};Object.defineProperty(Zt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Zt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Zt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Zt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Zt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Zt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Zt.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(Zt.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(Zt.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(Zt.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(Zt.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(Zt.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(Zt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zt.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(U)},Zt.prototype.multiply=function(U){var ie=U.sx*this.sx+U.shy*this.shx,Ae=U.sx*this.shy+U.shy*this.sy,Ie=U.shx*this.sx+U.sy*this.shx,$e=U.shx*this.shy+U.sy*this.sy,Qe=U.tx*this.sx+U.ty*this.shx+this.tx,ft=U.tx*this.shy+U.ty*this.sy+this.ty;return new Zt(ie,Ae,Ie,$e,Qe,ft)},Zt.prototype.decompose=function(){var U=this.sx,ie=this.shy,Ae=this.shx,Ie=this.sy,$e=this.tx,Qe=this.ty,ft=Math.sqrt(U*U+ie*ie),_t=(U/=ft)*Ae+(ie/=ft)*Ie;Ae-=U*_t,Ie-=ie*_t;var Yt=Math.sqrt(Ae*Ae+Ie*Ie);return _t/=Yt,U*(Ie/=Yt)<ie*(Ae/=Yt)&&(U=-U,ie=-ie,_t=-_t,ft=-ft),{scale:new Zt(ft,0,0,Yt,0,0),translate:new Zt(1,0,0,1,$e,Qe),rotate:new Zt(U,ie,-ie,U,0,0),skew:new Zt(1,0,_t,1,0,0)}},Zt.prototype.toString=function(U){return this.join(" ")},Zt.prototype.inversed=function(){var U=this.sx,ie=this.shy,Ae=this.shx,Ie=this.sy,$e=this.tx,Qe=this.ty,ft=1/(U*Ie-ie*Ae),_t=Ie*ft,Yt=-ie*ft,Nr=-Ae*ft,br=U*ft;return new Zt(_t,Yt,Nr,br,-_t*$e-Nr*Qe,-Yt*$e-br*Qe)},Zt.prototype.applyToPoint=function(U){var ie=U.x*this.sx+U.y*this.shx+this.tx,Ae=U.x*this.shy+U.y*this.sy+this.ty;return new Qo(ie,Ae)},Zt.prototype.applyToRectangle=function(U){var ie=this.applyToPoint(U),Ae=this.applyToPoint(new Qo(U.x+U.w,U.y+U.h));return new _c(ie.x,ie.y,Ae.x-ie.x,Ae.y-ie.y)},Zt.prototype.clone=function(){var U=this.sx,ie=this.shy,Ae=this.shx,Ie=this.sy,$e=this.tx,Qe=this.ty;return new Zt(U,ie,Ae,Ie,$e,Qe)},p.Matrix=Zt;var ga=p.matrixMult=function(U,ie){return ie.multiply(U)},Wi=new Zt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Wi;var Gi=function(U,ie){if(!ho[U]){var Ae=(ie instanceof Ih?"Sh":"P")+(Object.keys(Rr).length+1).toString(10);ie.id=Ae,ho[U]=Ae,Rr[Ae]=ie,Zr.publish("addPattern",ie)}};p.ShadingPattern=Ih,p.TilingPattern=cm,p.addShadingPattern=function(U,ie){return _("addShadingPattern()"),Gi(U,ie),this},p.beginTilingPattern=function(U){_("beginTilingPattern()"),cp(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},p.endTilingPattern=function(U,ie){_("endTilingPattern()"),ie.stream=Pe[W].join(`
`),Gi(U,ie),Zr.publish("endTilingPattern",ie),fo.pop().restore()};var Vn=p.__private__.newObject=function(){var U=Hn();return hi(U,!0),U},Hn=p.__private__.newObjectDeferred=function(){return ne++,ae[ne]=function(){return xe},ne},hi=function(U,ie){return ie=typeof ie=="boolean"&&ie,ae[U]=xe,ie&&oe(U+" 0 obj"),U},bc=p.__private__.newAdditionalObject=function(){var U={objId:Hn(),content:""};return Se.push(U),U},Cl=Hn(),mo=Hn(),po=p.__private__.decodeColorString=function(U){var ie=U.split(" ");if(ie.length!==2||ie[1]!=="g"&&ie[1]!=="G")ie.length===5&&(ie[4]==="k"||ie[4]==="K")&&(ie=[(1-ie[0])*(1-ie[3]),(1-ie[1])*(1-ie[3]),(1-ie[2])*(1-ie[3]),"r"]);else{var Ae=parseFloat(ie[0]);ie=[Ae,Ae,Ae,"r"]}for(var Ie="#",$e=0;$e<3;$e++)Ie+=("0"+Math.floor(255*parseFloat(ie[$e])).toString(16)).slice(-2);return Ie},Qs=p.__private__.encodeColorString=function(U){var ie;typeof U=="string"&&(U={ch1:U});var Ae=U.ch1,Ie=U.ch2,$e=U.ch3,Qe=U.ch4,ft=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var _t=new vU(Ae);if(_t.ok)Ae=_t.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var Yt=parseInt(Ae.substr(1),16);Ae=Yt>>16&255,Ie=Yt>>8&255,$e=255&Yt}if(Ie===void 0||Qe===void 0&&Ae===Ie&&Ie===$e)if(typeof Ae=="string")ie=Ae+" "+ft[0];else switch(U.precision){case 2:ie=F(Ae/255)+" "+ft[0];break;case 3:default:ie=I(Ae/255)+" "+ft[0]}else if(Qe===void 0||un(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return ie=["1.","1.","1.",ft[1]].join(" ");if(typeof Ae=="string")ie=[Ae,Ie,$e,ft[1]].join(" ");else switch(U.precision){case 2:ie=[F(Ae/255),F(Ie/255),F($e/255),ft[1]].join(" ");break;default:case 3:ie=[I(Ae/255),I(Ie/255),I($e/255),ft[1]].join(" ")}}else if(typeof Ae=="string")ie=[Ae,Ie,$e,Qe,ft[2]].join(" ");else switch(U.precision){case 2:ie=[F(Ae),F(Ie),F($e),F(Qe),ft[2]].join(" ");break;case 3:default:ie=[I(Ae),I(Ie),I($e),I(Qe),ft[2]].join(" ")}return ie},go=p.__private__.getFilters=function(){return o},va=p.__private__.putStream=function(U){var ie=(U=U||{}).data||"",Ae=U.filters||go(),Ie=U.alreadyAppliedFilters||[],$e=U.addLength1||!1,Qe=ie.length,ft=U.objectId,_t=function(fi){return fi};if(u!==null&&ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(_t=Gn.encryptor(ft,0));var Yt={};Ae===!0&&(Ae=["FlateEncode"]);var Nr=U.additionalKeyValues||[],br=(Yt=sr.API.processDataByFilters!==void 0?sr.API.processDataByFilters(ie,Ae):{data:ie,reverseChain:[]}).reverseChain+(Array.isArray(Ie)?Ie.join(" "):Ie.toString());if(Yt.data.length!==0&&(Nr.push({key:"Length",value:Yt.data.length}),$e===!0&&Nr.push({key:"Length1",value:Qe})),br.length!=0)if(br.split("/").length-1==1)Nr.push({key:"Filter",value:br});else{Nr.push({key:"Filter",value:"["+br+"]"});for(var Mr=0;Mr<Nr.length;Mr+=1)if(Nr[Mr].key==="DecodeParms"){for(var Kn=[],ns=0;ns<Yt.reverseChain.split("/").length-1;ns+=1)Kn.push("null");Kn.push(Nr[Mr].value),Nr[Mr].value="["+Kn.join(" ")+"]"}}oe("<<");for(var ys=0;ys<Nr.length;ys++)oe("/"+Nr[ys].key+" "+Nr[ys].value);oe(">>"),Yt.data.length!==0&&(oe("stream"),oe(_t(Yt.data)),oe("endstream"))},Go=p.__private__.putPage=function(U){var ie=U.number,Ae=U.data,Ie=U.objId,$e=U.contentsObjId;hi(Ie,!0),oe("<</Type /Page"),oe("/Parent "+U.rootDictionaryObjId+" 0 R"),oe("/Resources "+U.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(A(U.mediaBox.bottomLeftX))+" "+parseFloat(A(U.mediaBox.bottomLeftY))+" "+A(U.mediaBox.topRightX)+" "+A(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&oe("/CropBox ["+A(U.cropBox.bottomLeftX)+" "+A(U.cropBox.bottomLeftY)+" "+A(U.cropBox.topRightX)+" "+A(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&oe("/BleedBox ["+A(U.bleedBox.bottomLeftX)+" "+A(U.bleedBox.bottomLeftY)+" "+A(U.bleedBox.topRightX)+" "+A(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&oe("/TrimBox ["+A(U.trimBox.bottomLeftX)+" "+A(U.trimBox.bottomLeftY)+" "+A(U.trimBox.topRightX)+" "+A(U.trimBox.topRightY)+"]"),U.artBox!==null&&oe("/ArtBox ["+A(U.artBox.bottomLeftX)+" "+A(U.artBox.bottomLeftY)+" "+A(U.artBox.topRightX)+" "+A(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&oe("/UserUnit "+U.userUnit),Zr.publish("putPage",{objId:Ie,pageContext:gr[ie],pageNumber:ie,page:Ae}),oe("/Contents "+$e+" 0 R"),oe(">>"),oe("endobj");var Qe=Ae.join(`
`);return w===j.ADVANCED&&(Qe+=`
Q`),hi($e,!0),va({data:Qe,filters:go(),objectId:$e}),oe("endobj"),Ie},jc=p.__private__.putPages=function(){var U,ie,Ae=[];for(U=1;U<=Un;U++)gr[U].objId=Hn(),gr[U].contentsObjId=Hn();for(U=1;U<=Un;U++)Ae.push(Go({number:U,data:Pe[U],objId:gr[U].objId,contentsObjId:gr[U].contentsObjId,mediaBox:gr[U].mediaBox,cropBox:gr[U].cropBox,bleedBox:gr[U].bleedBox,trimBox:gr[U].trimBox,artBox:gr[U].artBox,userUnit:gr[U].userUnit,rootDictionaryObjId:Cl,resourceDictionaryObjId:mo}));hi(Cl,!0),oe("<</Type /Pages");var Ie="/Kids [";for(ie=0;ie<Un;ie++)Ie+=Ae[ie]+" 0 R ";oe(Ie+"]"),oe("/Count "+Un),oe(">>"),oe("endobj"),Zr.publish("postPutPages")},bd=function(U){Zr.publish("putFont",{font:U,out:oe,newObject:Vn,putStream:va}),U.isAlreadyPutted!==!0&&(U.objectNumber=Vn(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+Kp(U.postScriptName)),oe("/Subtype /Type1"),typeof U.encoding=="string"&&oe("/Encoding /"+U.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},jd=function(){for(var U in Xr)Xr.hasOwnProperty(U)&&(h===!1||h===!0&&f.hasOwnProperty(U))&&bd(Xr[U])},wd=function(U){U.objectNumber=Vn();var ie=[];ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Form"}),ie.push({key:"BBox",value:"["+[A(U.x),A(U.y),A(U.x+U.width),A(U.y+U.height)].join(" ")+"]"}),ie.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ae=U.pages[1].join(`
`);va({data:Ae,additionalKeyValues:ie,objectId:U.objectNumber}),oe("endobj")},_u=function(){for(var U in Hs)Hs.hasOwnProperty(U)&&wd(Hs[U])},tp=function(U,ie){var Ae,Ie=[],$e=1/(ie-1);for(Ae=0;Ae<1;Ae+=$e)Ie.push(Ae);if(Ie.push(1),U[0].offset!=0){var Qe={offset:0,color:U[0].color};U.unshift(Qe)}if(U[U.length-1].offset!=1){var ft={offset:1,color:U[U.length-1].color};U.push(ft)}for(var _t="",Yt=0,Nr=0;Nr<Ie.length;Nr++){for(Ae=Ie[Nr];Ae>U[Yt+1].offset;)Yt++;var br=U[Yt].offset,Mr=(Ae-br)/(U[Yt+1].offset-br),Kn=U[Yt].color,ns=U[Yt+1].color;_t+=ee(Math.round((1-Mr)*Kn[0]+Mr*ns[0]).toString(16))+ee(Math.round((1-Mr)*Kn[1]+Mr*ns[1]).toString(16))+ee(Math.round((1-Mr)*Kn[2]+Mr*ns[2]).toString(16))}return _t.trim()},Wn=function(U,ie){ie||(ie=21);var Ae=Vn(),Ie=tp(U.colors,ie),$e=[];$e.push({key:"FunctionType",value:"0"}),$e.push({key:"Domain",value:"[0.0 1.0]"}),$e.push({key:"Size",value:"["+ie+"]"}),$e.push({key:"BitsPerSample",value:"8"}),$e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),va({data:Ie,additionalKeyValues:$e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),oe("endobj"),U.objectNumber=Vn(),oe("<< /ShadingType "+U.type),oe("/ColorSpace /DeviceRGB");var Qe="/Coords ["+A(parseFloat(U.coords[0]))+" "+A(parseFloat(U.coords[1]))+" ";U.type===2?Qe+=A(parseFloat(U.coords[2]))+" "+A(parseFloat(U.coords[3])):Qe+=A(parseFloat(U.coords[2]))+" "+A(parseFloat(U.coords[3]))+" "+A(parseFloat(U.coords[4]))+" "+A(parseFloat(U.coords[5])),oe(Qe+="]"),U.matrix&&oe("/Matrix ["+U.matrix.toString()+"]"),oe("/Function "+Ae+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},mv=function(U,ie){var Ae=Hn(),Ie=Vn();ie.push({resourcesOid:Ae,objectOid:Ie}),U.objectNumber=Ie;var $e=[];$e.push({key:"Type",value:"/Pattern"}),$e.push({key:"PatternType",value:"1"}),$e.push({key:"PaintType",value:"1"}),$e.push({key:"TilingType",value:"1"}),$e.push({key:"BBox",value:"["+U.boundingBox.map(A).join(" ")+"]"}),$e.push({key:"XStep",value:A(U.xStep)}),$e.push({key:"YStep",value:A(U.yStep)}),$e.push({key:"Resources",value:Ae+" 0 R"}),U.matrix&&$e.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),va({data:U.stream,additionalKeyValues:$e,objectId:U.objectNumber}),oe("endobj")},wc=function(U){var ie;for(ie in Rr)Rr.hasOwnProperty(ie)&&(Rr[ie]instanceof Ih?Wn(Rr[ie]):Rr[ie]instanceof cm&&mv(Rr[ie],U))},xf=function(U){for(var ie in U.objectNumber=Vn(),oe("<<"),U)switch(ie){case"opacity":oe("/ca "+F(U[ie]));break;case"stroke-opacity":oe("/CA "+F(U[ie]))}oe(">>"),oe("endobj")},Iu=function(){var U;for(U in Ln)Ln.hasOwnProperty(U)&&xf(Ln[U])},yf=function(){for(var U in oe("/XObject <<"),Hs)Hs.hasOwnProperty(U)&&Hs[U].objectNumber>=0&&oe("/"+U+" "+Hs[U].objectNumber+" 0 R");Zr.publish("putXobjectDict"),oe(">>")},rp=function(){Gn.oid=Vn(),oe("<<"),oe("/Filter /Standard"),oe("/V "+Gn.v),oe("/R "+Gn.r),oe("/U <"+Gn.toHexString(Gn.U)+">"),oe("/O <"+Gn.toHexString(Gn.O)+">"),oe("/P "+Gn.P),oe(">>"),oe("endobj")},Nd=function(){for(var U in oe("/Font <<"),Xr)Xr.hasOwnProperty(U)&&(h===!1||h===!0&&f.hasOwnProperty(U))&&oe("/"+U+" "+Xr[U].objectNumber+" 0 R");oe(">>")},$a=function(){if(Object.keys(Rr).length>0){for(var U in oe("/Shading <<"),Rr)Rr.hasOwnProperty(U)&&Rr[U]instanceof Ih&&Rr[U].objectNumber>=0&&oe("/"+U+" "+Rr[U].objectNumber+" 0 R");Zr.publish("putShadingPatternDict"),oe(">>")}},Du=function(U){if(Object.keys(Rr).length>0){for(var ie in oe("/Pattern <<"),Rr)Rr.hasOwnProperty(ie)&&Rr[ie]instanceof p.TilingPattern&&Rr[ie].objectNumber>=0&&Rr[ie].objectNumber<U&&oe("/"+ie+" "+Rr[ie].objectNumber+" 0 R");Zr.publish("putTilingPatternDict"),oe(">>")}},xa=function(){if(Object.keys(Ln).length>0){var U;for(U in oe("/ExtGState <<"),Ln)Ln.hasOwnProperty(U)&&Ln[U].objectNumber>=0&&oe("/"+U+" "+Ln[U].objectNumber+" 0 R");Zr.publish("putGStateDict"),oe(">>")}},cs=function(U){hi(U.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nd(),$a(),Du(U.objectOid),xa(),yf(),oe(">>"),oe("endobj")},np=function(){var U=[];jd(),Iu(),_u(),wc(U),Zr.publish("putResources"),U.forEach(cs),cs({resourcesOid:mo,objectOid:Number.MAX_SAFE_INTEGER}),Zr.publish("postPutResources")},sp=function(){Zr.publish("putAdditionalObjects");for(var U=0;U<Se.length;U++){var ie=Se[U];hi(ie.objId,!0),oe(ie.content),oe("endobj")}Zr.publish("postPutAdditionalObjects")},Sd=function(U){an[U.fontName]=an[U.fontName]||{},an[U.fontName][U.fontStyle]=U.id},Nc=function(U,ie,Ae,Ie,$e){var Qe={id:"F"+(Object.keys(Xr).length+1).toString(10),postScriptName:U,fontName:ie,fontStyle:Ae,encoding:Ie,isStandardFont:$e||!1,metadata:{}};return Zr.publish("addFont",{font:Qe,instance:this}),Xr[Qe.id]=Qe,Sd(Qe),Qe.id},Ad=function(U){for(var ie=0,Ae=qe.length;ie<Ae;ie++){var Ie=Nc.call(this,U[ie][0],U[ie][1],U[ie][2],qe[ie][3],!0);h===!1&&(f[Ie]=!0);var $e=U[ie][0].split("-");Sd({id:Ie,fontName:$e[0],fontStyle:$e[1]||""})}Zr.publish("addFonts",{fonts:Xr,dictionary:an})},Ki=function(U){return U.foo=function(){try{return U.apply(this,arguments)}catch(Ie){var ie=Ie.stack||"";~ie.indexOf(" at ")&&(ie=ie.split(" at ")[1]);var Ae="Error in function "+ie.split(`
`)[0].split("<")[0]+": "+Ie.message;if(!mr.console)throw new Error(Ae);mr.console.error(Ae,Ie),mr.alert&&alert(Ae)}},U.foo.bar=U,U.foo},ku=function(U,ie){var Ae,Ie,$e,Qe,ft,_t,Yt,Nr,br;if($e=(ie=ie||{}).sourceEncoding||"Unicode",ft=ie.outputEncoding,(ie.autoencode||ft)&&Xr[nr].metadata&&Xr[nr].metadata[$e]&&Xr[nr].metadata[$e].encoding&&(Qe=Xr[nr].metadata[$e].encoding,!ft&&Xr[nr].encoding&&(ft=Xr[nr].encoding),!ft&&Qe.codePages&&(ft=Qe.codePages[0]),typeof ft=="string"&&(ft=Qe[ft]),ft)){for(Yt=!1,_t=[],Ae=0,Ie=U.length;Ae<Ie;Ae++)(Nr=ft[U.charCodeAt(Ae)])?_t.push(String.fromCharCode(Nr)):_t.push(U[Ae]),_t[Ae].charCodeAt(0)>>8&&(Yt=!0);U=_t.join("")}for(Ae=U.length;Yt===void 0&&Ae!==0;)U.charCodeAt(Ae-1)>>8&&(Yt=!0),Ae--;if(!Yt)return U;for(_t=ie.noBOM?[]:[254,255],Ae=0,Ie=U.length;Ae<Ie;Ae++){if((br=(Nr=U.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+U+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_t.push(br),_t.push(Nr-(br<<8))}return String.fromCharCode.apply(void 0,_t)},Yi=p.__private__.pdfEscape=p.pdfEscape=function(U,ie){return ku(U,ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cd=p.__private__.beginPage=function(U){Pe[++Un]=[],gr[Un]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Sc(Un),we(Pe[W])},bf=function(U,ie){var Ae,Ie,$e;switch(r=ie||r,typeof U=="string"&&(Ae=b(U.toLowerCase()),Array.isArray(Ae)&&(Ie=Ae[0],$e=Ae[1])),Array.isArray(U)&&(Ie=U[0]*Nt,$e=U[1]*Nt),isNaN(Ie)&&(Ie=i[0],$e=i[1]),(Ie>14400||$e>14400)&&(kn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ie=Math.min(14400,Ie),$e=Math.min(14400,$e)),i=[Ie,$e],r.substr(0,1)){case"l":$e>Ie&&(i=[$e,Ie]);break;case"p":Ie>$e&&(i=[$e,Ie])}Cd(i),Id(Sf),oe(Xi),Cf!==0&&oe(Cf+" J"),kd!==0&&oe(kd+" j"),Zr.publish("addPage",{pageNumber:Un})},jf=function(U){U>0&&U<=Un&&(Pe.splice(U,1),gr.splice(U,1),Un--,W>Un&&(W=Un),this.setPage(W))},Sc=function(U){U>0&&U<=Un&&(W=U)},pv=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Pe.length-1},Ou=function(U,ie,Ae){var Ie,$e=void 0;return Ae=Ae||{},U=U!==void 0?U:Xr[nr].fontName,ie=ie!==void 0?ie:Xr[nr].fontStyle,Ie=U.toLowerCase(),an[Ie]!==void 0&&an[Ie][ie]!==void 0?$e=an[Ie][ie]:an[U]!==void 0&&an[U][ie]!==void 0?$e=an[U][ie]:Ae.disableWarning===!1&&kn.warn("Unable to look up font label for font '"+U+"', '"+ie+"'. Refer to getFontList() for available fonts."),$e||Ae.noFallback||($e=an.times[ie])==null&&($e=an.times.normal),$e},Qr=p.__private__.putInfo=function(){var U=Vn(),ie=function(Ie){return Ie};for(var Ae in u!==null&&(ie=Gn.encryptor(U,0)),oe("<<"),oe("/Producer ("+Yi(ie("jsPDF "+sr.version))+")"),Vt)Vt.hasOwnProperty(Ae)&&Vt[Ae]&&oe("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+Yi(ie(Vt[Ae]))+")");oe("/CreationDate ("+Yi(ie(z))+")"),oe(">>"),oe("endobj")},Ru=p.__private__.putCatalog=function(U){var ie=(U=U||{}).rootDictionaryObjId||Cl;switch(Vn(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+ie+" 0 R"),vt||(vt="fullwidth"),vt){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+vt;Ae.substr(Ae.length-1)==="%"&&(vt=parseInt(vt)/100),typeof vt=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+F(vt)+"]")}switch(Et||(Et="continuous"),Et){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}Ze&&oe("/PageMode /"+Ze),Zr.publish("putCatalog"),oe(">>"),oe("endobj")},ip=p.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ne+1)),oe("/Root "+ne+" 0 R"),oe("/Info "+(ne-1)+" 0 R"),u!==null&&oe("/Encrypt "+Gn.oid+" 0 R"),oe("/ID [ <"+q+"> <"+q+"> ]"),oe(">>")},wf=p.__private__.putHeader=function(){oe("%PDF-"+y),oe("%ºß¬à")},ap=p.__private__.putXRef=function(){var U="0000000000";oe("xref"),oe("0 "+(ne+1)),oe("0000000000 65535 f ");for(var ie=1;ie<=ne;ie++)typeof ae[ie]=="function"?oe((U+ae[ie]()).slice(-10)+" 00000 n "):ae[ie]!==void 0?oe((U+ae[ie]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Ko=p.__private__.buildDocument=function(){Ke(),we(ve),Zr.publish("buildDocument"),wf(),jc(),sp(),np(),u!==null&&rp(),Qr(),Ru();var U=xe;return ap(),ip(),oe("startxref"),oe(""+U),oe("%%EOF"),we(Pe[W]),ve.join(`
`)},Ed=p.__private__.getBlob=function(U){return new Blob([_e(U)],{type:"application/pdf"})},Ac=p.output=p.__private__.output=Ki(function(U,ie){switch(typeof(ie=ie||{})=="string"?ie={filename:ie}:ie.filename=ie.filename||"generated.pdf",U){case void 0:return Ko();case"save":p.save(ie.filename);break;case"arraybuffer":return _e(Ko());case"blob":return Ed(Ko());case"bloburi":case"bloburl":if(mr.URL!==void 0&&typeof mr.URL.createObjectURL=="function")return mr.URL&&mr.URL.createObjectURL(Ed(Ko()))||void 0;kn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",Ie=Ko();try{Ae=ME(Ie)}catch{Ae=ME(unescape(encodeURIComponent(Ie)))}return"data:application/pdf;filename="+ie.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var $e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ie.pdfObjectUrl&&($e=ie.pdfObjectUrl,Qe="");var ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$e+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ie)+");<\/script></body></html>",_t=mr.open();return _t!==null&&_t.document.write(ft),_t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mr)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ie.filename+'" width="500px" height="400px" /></body></html>',Nr=mr.open();if(Nr!==null){Nr.document.write(Yt);var br=this;Nr.document.documentElement.querySelector("#pdfViewer").onload=function(){Nr.document.title=ie.filename,Nr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return Nr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ie)+'"></iframe></body></html>',Kn=mr.open();if(Kn!==null&&(Kn.document.write(Mr),Kn.document.title=ie.filename),Kn||typeof safari>"u")return Kn;break;case"datauri":case"dataurl":return mr.document.location.href=this.output("datauristring",ie);default:return null}}),Pd=function(U){return Array.isArray(yc)===!0&&yc.indexOf(U)>-1};switch(s){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=Pd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Nt=s}var Gn=null;H(),K();var Yo=function(U){return u!==null?Gn.encryptor(U,0):function(ie){return ie}},vo=p.__private__.getPageInfo=p.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[U].objId,pageNumber:U,pageContext:gr[U]}},lr=p.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ie in gr)if(gr[ie].objId===U)break;return vo(ie)},Td=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:gr[W].objId,pageNumber:W,pageContext:gr[W]}};p.addPage=function(){return bf.apply(this,arguments),this},p.setPage=function(){return Sc.apply(this,arguments),we.call(this,Pe[W]),this},p.insertPage=function(U){return this.addPage(),this.movePage(W,U),this},p.movePage=function(U,ie){var Ae,Ie;if(U>ie){Ae=Pe[U],Ie=gr[U];for(var $e=U;$e>ie;$e--)Pe[$e]=Pe[$e-1],gr[$e]=gr[$e-1];Pe[ie]=Ae,gr[ie]=Ie,this.setPage(ie)}else if(U<ie){Ae=Pe[U],Ie=gr[U];for(var Qe=U;Qe<ie;Qe++)Pe[Qe]=Pe[Qe+1],gr[Qe]=gr[Qe+1];Pe[ie]=Ae,gr[ie]=Ie,this.setPage(ie)}return this},p.deletePage=function(){return jf.apply(this,arguments),this},p.__private__.text=p.text=function(U,ie,Ae,Ie,$e){var Qe,ft,_t,Yt,Nr,br,Mr,Kn,ns,ys=(Ie=Ie||{}).scope||this;if(typeof U=="number"&&typeof ie=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var fi=Ae;Ae=ie,ie=U,U=fi}if(arguments[3]instanceof Zt?(_("The transform parameter of text() with a Matrix value"),ns=$e):(_t=arguments[4],Yt=arguments[5],un(Mr=arguments[3])==="object"&&Mr!==null||(typeof _t=="string"&&(Yt=_t,_t=null),typeof Mr=="string"&&(Yt=Mr,Mr=null),typeof Mr=="number"&&(_t=Mr,Mr=null),Ie={flags:Mr,angle:_t,align:Yt})),isNaN(ie)||isNaN(Ae)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return ys;var Ws="",jo=!1,ba=typeof Ie.lineHeightFactor=="number"?Ie.lineHeightFactor:_d,qa=ys.internal.scaleFactor;function Dc(An){return An=An.split("	").join(Array(Ie.TabLen||9).join(" ")),Yi(An,Mr)}function Tf(An){for(var pn,is=An.concat(),bs=[],tl=is.length;tl--;)typeof(pn=is.shift())=="string"?bs.push(pn):Array.isArray(An)&&(pn.length===1||pn[1]===void 0&&pn[2]===void 0)?bs.push(pn[0]):bs.push([pn[0],pn[1],pn[2]]);return bs}function Hu(An,pn){var is;if(typeof An=="string")is=pn(An)[0];else if(Array.isArray(An)){for(var bs,tl,th=An.concat(),zd=[],Df=th.length;Df--;)typeof(bs=th.shift())=="string"?zd.push(pn(bs)[0]):Array.isArray(bs)&&typeof bs[0]=="string"&&(tl=pn(bs[0],bs[1],bs[2]),zd.push([tl[0],tl[1],tl[2]]));is=zd}return is}var Od=!1,Wu=!0;if(typeof U=="string")Od=!0;else if(Array.isArray(U)){var Gu=U.concat();ft=[];for(var Rd,ss=Gu.length;ss--;)(typeof(Rd=Gu.shift())!="string"||Array.isArray(Rd)&&typeof Rd[0]!="string")&&(Wu=!1);Od=Wu}if(Od===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var Ku=lt/ys.internal.scaleFactor,Yu=Ku*(ba-1);switch(Ie.baseline){case"bottom":Ae-=Yu;break;case"top":Ae+=Ku-Yu;break;case"hanging":Ae+=Ku-2*Yu;break;case"middle":Ae+=Ku/2-Yu}if((br=Ie.maxWidth||0)>0&&(typeof U=="string"?U=ys.splitTextToSize(U,br):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(An,pn){return An.concat(ys.splitTextToSize(pn,br))},[]))),Qe={text:U,x:ie,y:Ae,options:Ie,mutex:{pdfEscape:Yi,activeFontKey:nr,fonts:Xr,activeFontSize:lt}},Zr.publish("preProcessText",Qe),U=Qe.text,_t=(Ie=Qe.options).angle,!(ns instanceof Zt)&&_t&&typeof _t=="number"){_t*=Math.PI/180,Ie.rotationDirection===0&&(_t=-_t),w===j.ADVANCED&&(_t=-_t);var Xu=Math.cos(_t),Zu=Math.sin(_t);ns=new Zt(Xu,Zu,-Zu,Xu,0,0)}else _t&&_t instanceof Zt&&(ns=_t);w!==j.ADVANCED||ns||(ns=Wi),(Nr=Ie.charSpace||Tc)!==void 0&&(Ws+=A(T(Nr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kn=Ie.horizontalScale)!==void 0&&(Ws+=A(100*Kn)+` Tz
`),Ie.lang;var _i=-1,Ld=Ie.renderingMode!==void 0?Ie.renderingMode:Ie.stroke,Tl=ys.internal.getCurrentPageInfo().pageContext;switch(Ld){case 0:case!1:case"fill":_i=0;break;case 1:case!0:case"stroke":_i=1;break;case 2:case"fillThenStroke":_i=2;break;case 3:case"invisible":_i=3;break;case 4:case"fillAndAddForClipping":_i=4;break;case 5:case"strokeAndAddPathForClipping":_i=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_i=6;break;case 7:case"addToPathForClipping":_i=7}var dp=Tl.usedRenderingMode!==void 0?Tl.usedRenderingMode:-1;_i!==-1?Ws+=_i+` Tr
`:dp!==-1&&(Ws+=`0 Tr
`),_i!==-1&&(Tl.usedRenderingMode=_i),Yt=Ie.align||"left";var Ii,Qu=lt*ba,_f=ys.internal.pageSize.getWidth(),Ju=Xr[nr];Nr=Ie.charSpace||Tc,br=Ie.maxWidth||0,Mr=Object.assign({autoencode:!0,noBOM:!0},Ie.flags);var Jo=[],kc=function(An){return ys.getStringUnitWidth(An,{font:Ju,charSpace:Nr,fontSize:lt,doKerning:!1})*lt/qa};if(Object.prototype.toString.call(U)==="[object Array]"){var Di;ft=Tf(U),Yt!=="left"&&(Ii=ft.map(kc));var mi,Oc=0;if(Yt==="right"){ie-=Ii[0],U=[],ss=ft.length;for(var _l=0;_l<ss;_l++)_l===0?(mi=Ba(ie),Di=za(Ae)):(mi=T(Oc-Ii[_l]),Di=-Qu),U.push([ft[_l],mi,Di]),Oc=Ii[_l]}else if(Yt==="center"){ie-=Ii[0]/2,U=[],ss=ft.length;for(var Il=0;Il<ss;Il++)Il===0?(mi=Ba(ie),Di=za(Ae)):(mi=T((Oc-Ii[Il])/2),Di=-Qu),U.push([ft[Il],mi,Di]),Oc=Ii[Il]}else if(Yt==="left"){U=[],ss=ft.length;for(var eh=0;eh<ss;eh++)U.push(ft[eh])}else if(Yt==="justify"&&Ju.encoding==="Identity-H"){U=[],ss=ft.length,br=br!==0?br:_f;for(var Dl=0,Jr=0;Jr<ss;Jr++)if(Di=Jr===0?za(Ae):-Qu,mi=Jr===0?Ba(ie):Dl,Jr<ss-1){var kl=T((br-Ii[Jr])/(ft[Jr].split(" ").length-1)),pi=ft[Jr].split(" ");U.push([pi[0]+" ",mi,Di]),Dl=0;for(var ja=1;ja<pi.length;ja++){var Md=(kc(pi[ja-1]+" "+pi[ja])-kc(pi[ja]))*qa+kl;ja==pi.length-1?U.push([pi[ja],Md,0]):U.push([pi[ja]+" ",Md,0]),Dl-=Md}}else U.push([ft[Jr],mi,Di]);U.push(["",Dl,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],ss=ft.length,br=br!==0?br:_f,Jr=0;Jr<ss;Jr++)Di=Jr===0?za(Ae):-Qu,mi=Jr===0?Ba(ie):0,Jr<ss-1?Jo.push(A(T((br-Ii[Jr])/(ft[Jr].split(" ").length-1)))):Jo.push(0),U.push([ft[Jr],mi,Di])}}var If=typeof Ie.R2L=="boolean"?Ie.R2L:Ot;If===!0&&(U=Hu(U,function(An,pn,is){return[An.split("").reverse().join(""),pn,is]})),Qe={text:U,x:ie,y:Ae,options:Ie,mutex:{pdfEscape:Yi,activeFontKey:nr,fonts:Xr,activeFontSize:lt}},Zr.publish("postProcessText",Qe),U=Qe.text,jo=Qe.mutex.isHex||!1;var Fd=Xr[nr].encoding;Fd!=="WinAnsiEncoding"&&Fd!=="StandardEncoding"||(U=Hu(U,function(An,pn,is){return[Dc(An),pn,is]})),ft=Tf(U),U=[];for(var $d,Bd,wa,Ol=0,el=1,Rl=Array.isArray(ft[0])?el:Ol,Ll="",Rc=function(An,pn,is){var bs="";return is instanceof Zt?(is=typeof Ie.angle=="number"?ga(is,new Zt(1,0,0,1,An,pn)):ga(new Zt(1,0,0,1,An,pn),is),w===j.ADVANCED&&(is=ga(new Zt(1,0,0,-1,0,0),is)),bs=is.join(" ")+` Tm
`):bs=A(An)+" "+A(pn)+` Td
`,bs},Js=0;Js<ft.length;Js++){switch(Ll="",Rl){case el:wa=(jo?"<":"(")+ft[Js][0]+(jo?">":")"),$d=parseFloat(ft[Js][1]),Bd=parseFloat(ft[Js][2]);break;case Ol:wa=(jo?"<":"(")+ft[Js]+(jo?">":")"),$d=Ba(ie),Bd=za(Ae)}Jo!==void 0&&Jo[Js]!==void 0&&(Ll=Jo[Js]+` Tw
`),Js===0?U.push(Ll+Rc($d,Bd,ns)+wa):Rl===Ol?U.push(Ll+wa):Rl===el&&U.push(Ll+Rc($d,Bd,ns)+wa)}U=Rl===Ol?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Zi=`BT
/`;return Zi+=nr+" "+lt+` Tf
`,Zi+=A(lt*ba)+` TL
`,Zi+=_s+`
`,Zi+=Ws,Zi+=U,oe(Zi+="ET"),f[nr]=!0,ys};var Xo=p.__private__.clip=p.clip=function(U){return oe(U==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Xo("evenodd")},p.__private__.discardPath=p.discardPath=function(){return oe("n"),this};var Zo=p.__private__.isValidStyle=function(U){var ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ie=!0),ie};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(U){return Zo(U)&&(d=U),this};var Nf=p.__private__.getStyle=p.getStyle=function(U){var ie=d;switch(U){case"D":case"S":ie="S";break;case"F":ie="f";break;case"FD":case"DF":ie="B";break;case"f":case"f*":case"B":case"B*":ie=U}return ie},Cc=p.close=function(){return oe("h"),this};p.stroke=function(){return oe("S"),this},p.fill=function(U){return Lu("f",U),this},p.fillEvenOdd=function(U){return Lu("f*",U),this},p.fillStroke=function(U){return Lu("B",U),this},p.fillStrokeEvenOdd=function(U){return Lu("B*",U),this};var Lu=function(U,ie){un(ie)==="object"?op(ie,U):oe(U)},Mu=function(U){U===null||w===j.ADVANCED&&U===void 0||(U=Nf(U),oe(U))};function Fu(U,ie,Ae,Ie,$e){var Qe=new cm(ie||this.boundingBox,Ae||this.xStep,Ie||this.yStep,this.gState,$e||this.matrix);Qe.stream=this.stream;var ft=U+"$$"+this.cloneIndex+++"$$";return Gi(ft,Qe),Qe}var op=function(U,ie){var Ae=ho[U.key],Ie=Rr[Ae];if(Ie instanceof Ih)oe("q"),oe(gv(ie)),Ie.gState&&p.setGState(Ie.gState),oe(U.matrix.toString()+" cm"),oe("/"+Ae+" sh"),oe("Q");else if(Ie instanceof cm){var $e=new Zt(1,0,0,-1,0,Ic());U.matrix&&($e=$e.multiply(U.matrix||Wi),Ae=Fu.call(Ie,U.key,U.boundingBox,U.xStep,U.yStep,$e).id),oe("q"),oe("/Pattern cs"),oe("/"+Ae+" scn"),Ie.gState&&p.setGState(Ie.gState),oe(ie),oe("Q")}},gv=function(U){switch(U){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},El=p.moveTo=function(U,ie){return oe(A(T(U))+" "+A(O(ie))+" m"),this},xo=p.lineTo=function(U,ie){return oe(A(T(U))+" "+A(O(ie))+" l"),this},ya=p.curveTo=function(U,ie,Ae,Ie,$e,Qe){return oe([A(T(U)),A(O(ie)),A(T(Ae)),A(O(Ie)),A(T($e)),A(O(Qe)),"c"].join(" ")),this};p.__private__.line=p.line=function(U,ie,Ae,Ie,$e){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||isNaN(Ie)||!Zo($e))throw new Error("Invalid arguments passed to jsPDF.line");return w===j.COMPAT?this.lines([[Ae-U,Ie-ie]],U,ie,[1,1],$e||"S"):this.lines([[Ae-U,Ie-ie]],U,ie,[1,1]).stroke()},p.__private__.lines=p.lines=function(U,ie,Ae,Ie,$e,Qe){var ft,_t,Yt,Nr,br,Mr,Kn,ns,ys,fi,Ws,jo;if(typeof U=="number"&&(jo=Ae,Ae=ie,ie=U,U=jo),Ie=Ie||[1,1],Qe=Qe||!1,isNaN(ie)||isNaN(Ae)||!Array.isArray(U)||!Array.isArray(Ie)||!Zo($e)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(El(ie,Ae),ft=Ie[0],_t=Ie[1],Nr=U.length,fi=ie,Ws=Ae,Yt=0;Yt<Nr;Yt++)(br=U[Yt]).length===2?(fi=br[0]*ft+fi,Ws=br[1]*_t+Ws,xo(fi,Ws)):(Mr=br[0]*ft+fi,Kn=br[1]*_t+Ws,ns=br[2]*ft+fi,ys=br[3]*_t+Ws,fi=br[4]*ft+fi,Ws=br[5]*_t+Ws,ya(Mr,Kn,ns,ys,fi,Ws));return Qe&&Cc(),Mu($e),this},p.path=function(U){for(var ie=0;ie<U.length;ie++){var Ae=U[ie],Ie=Ae.c;switch(Ae.op){case"m":El(Ie[0],Ie[1]);break;case"l":xo(Ie[0],Ie[1]);break;case"c":ya.apply(this,Ie);break;case"h":Cc()}}return this},p.__private__.rect=p.rect=function(U,ie,Ae,Ie,$e){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||isNaN(Ie)||!Zo($e))throw new Error("Invalid arguments passed to jsPDF.rect");return w===j.COMPAT&&(Ie=-Ie),oe([A(T(U)),A(O(ie)),A(T(Ae)),A(T(Ie)),"re"].join(" ")),Mu($e),this},p.__private__.triangle=p.triangle=function(U,ie,Ae,Ie,$e,Qe,ft){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||isNaN(Ie)||isNaN($e)||isNaN(Qe)||!Zo(ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-U,Ie-ie],[$e-Ae,Qe-Ie],[U-$e,ie-Qe]],U,ie,[1,1],ft,!0),this},p.__private__.roundedRect=p.roundedRect=function(U,ie,Ae,Ie,$e,Qe,ft){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||isNaN(Ie)||isNaN($e)||isNaN(Qe)||!Zo(ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _t=4/3*(Math.SQRT2-1);return $e=Math.min($e,.5*Ae),Qe=Math.min(Qe,.5*Ie),this.lines([[Ae-2*$e,0],[$e*_t,0,$e,Qe-Qe*_t,$e,Qe],[0,Ie-2*Qe],[0,Qe*_t,-$e*_t,Qe,-$e,Qe],[2*$e-Ae,0],[-$e*_t,0,-$e,-Qe*_t,-$e,-Qe],[0,2*Qe-Ie],[0,-Qe*_t,$e*_t,-Qe,$e,-Qe]],U+$e,ie,[1,1],ft,!0),this},p.__private__.ellipse=p.ellipse=function(U,ie,Ae,Ie,$e){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||isNaN(Ie)||!Zo($e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*Ae,ft=4/3*(Math.SQRT2-1)*Ie;return El(U+Ae,ie),ya(U+Ae,ie-ft,U+Qe,ie-Ie,U,ie-Ie),ya(U-Qe,ie-Ie,U-Ae,ie-ft,U-Ae,ie),ya(U-Ae,ie+ft,U-Qe,ie+Ie,U,ie+Ie),ya(U+Qe,ie+Ie,U+Ae,ie+ft,U+Ae,ie),Mu($e),this},p.__private__.circle=p.circle=function(U,ie,Ae,Ie){if(isNaN(U)||isNaN(ie)||isNaN(Ae)||!Zo(Ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ie,Ae,Ae,Ie)},p.setFont=function(U,ie,Ae){return Ae&&(ie=N(ie,Ae)),nr=Ou(U,ie,{disableWarning:!1}),this};var $u=p.__private__.getFont=p.getFont=function(){return Xr[Ou.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var U,ie,Ae={};for(U in an)if(an.hasOwnProperty(U))for(ie in Ae[U]=[],an[U])an[U].hasOwnProperty(ie)&&Ae[U].push(ie);return Ae},p.addFont=function(U,ie,Ae,Ie,$e){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?$e=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(Ae=N(Ae,Ie)),$e=$e||"Identity-H",Nc.call(this,U,ie,Ae,$e)};var _d,Sf=t.lineWidth||.200025,Ec=p.__private__.getLineWidth=p.getLineWidth=function(){return Sf},Id=p.__private__.setLineWidth=p.setLineWidth=function(U){return Sf=U,oe(A(T(U))+" w"),this};p.__private__.setLineDash=sr.API.setLineDash=sr.API.setLineDashPattern=function(U,ie){if(U=U||[],ie=ie||0,isNaN(ie)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ae){return A(T(Ae))}).join(" "),ie=A(T(ie)),oe("["+U+"] "+ie+" d"),this};var Bu=p.__private__.getLineHeight=p.getLineHeight=function(){return lt*_d};p.__private__.getLineHeight=p.getLineHeight=function(){return lt*_d};var Af=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(_d=U),this},yo=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return _d};Af(t.lineHeight);var Ba=p.__private__.getHorizontalCoordinate=function(U){return T(U)},za=p.__private__.getVerticalCoordinate=function(U){return w===j.ADVANCED?U:gr[W].mediaBox.topRightY-gr[W].mediaBox.bottomLeftY-T(U)},lp=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(U){return A(Ba(U))},bo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(U){return A(za(U))},Xi=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return po(Xi)},p.__private__.setStrokeColor=p.setDrawColor=function(U,ie,Ae,Ie){return Xi=Qs({ch1:U,ch2:ie,ch3:Ae,ch4:Ie,pdfColorType:"draw",precision:2}),oe(Xi),this};var zu=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return po(zu)},p.__private__.setFillColor=p.setFillColor=function(U,ie,Ae,Ie){return zu=Qs({ch1:U,ch2:ie,ch3:Ae,ch4:Ie,pdfColorType:"fill",precision:2}),oe(zu),this};var _s=t.textColor||"0 g",Pc=p.__private__.getTextColor=p.getTextColor=function(){return po(_s)};p.__private__.setTextColor=p.setTextColor=function(U,ie,Ae,Ie){return _s=Qs({ch1:U,ch2:ie,ch3:Ae,ch4:Ie,pdfColorType:"text",precision:3}),this};var Tc=t.charSpace,Dd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tc||0)};p.__private__.setCharSpace=p.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tc=U,this};var Cf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(U){var ie=p.CapJoinStyles[U];if(ie===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cf=ie,oe(ie+" J"),this};var kd=0;p.__private__.setLineJoin=p.setLineJoin=function(U){var ie=p.CapJoinStyles[U];if(ie===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kd=ie,oe(ie+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(A(T(U))+" M"),this},p.GState=Yx,p.setGState=function(U){(U=typeof U=="string"?Ln[ui[U]]:qu(null,U)).equals(Hi)||(oe("/"+U.id+" gs"),Hi=U)};var qu=function(U,ie){if(!U||!ui[U]){var Ae=!1;for(var Ie in Ln)if(Ln.hasOwnProperty(Ie)&&Ln[Ie].equals(ie)){Ae=!0;break}if(Ae)ie=Ln[Ie];else{var $e="GS"+(Object.keys(Ln).length+1).toString(10);Ln[$e]=ie,ie.id=$e}return U&&(ui[U]=ie.id),Zr.publish("addGState",ie),ie}};p.addGState=function(U,ie){return qu(U,ie),this},p.saveGraphicsState=function(){return oe("q"),di.push({key:nr,size:lt,color:_s}),this},p.restoreGraphicsState=function(){oe("Q");var U=di.pop();return nr=U.key,lt=U.size,_s=U.color,Hi=null,this},p.setCurrentTransformationMatrix=function(U){return oe(U.toString()+" cm"),this},p.comment=function(U){return oe("#"+U),this};var Qo=function(U,ie){var Ae=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(Qe){isNaN(Qe)||(Ae=parseFloat(Qe))}});var Ie=ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ie},set:function(Qe){isNaN(Qe)||(Ie=parseFloat(Qe))}});var $e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $e},set:function(Qe){$e=Qe.toString()}}),this},_c=function(U,ie,Ae,Ie){Qo.call(this,U,ie),this.type="rect";var $e=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $e},set:function(ft){isNaN(ft)||($e=parseFloat(ft))}});var Qe=Ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(ft){isNaN(ft)||(Qe=parseFloat(ft))}}),this},Uu=function(){this.page=Un,this.currentPage=W,this.pages=Pe.slice(0),this.pagesContext=gr.slice(0),this.x=Yr,this.y=wr,this.matrix=xs,this.width=Pl(W),this.height=Ic(W),this.outputDestination=He,this.id="",this.objectNumber=-1};Uu.prototype.restore=function(){Un=this.page,W=this.currentPage,gr=this.pagesContext,Pe=this.pages,Yr=this.x,wr=this.y,xs=this.matrix,Ef(W,this.width),Pf(W,this.height),He=this.outputDestination};var cp=function(U,ie,Ae,Ie,$e){fo.push(new Uu),Un=W=0,Pe=[],Yr=U,wr=ie,xs=$e,Cd([Ae,Ie])},vv=function(U){if(Fa[U])fo.pop().restore();else{var ie=new Uu,Ae="Xo"+(Object.keys(Hs).length+1).toString(10);ie.id=Ae,Fa[U]=Ae,Hs[Ae]=ie,Zr.publish("addFormObject",ie),fo.pop().restore()}};for(var Vu in p.beginFormObject=function(U,ie,Ae,Ie,$e){return cp(U,ie,Ae,Ie,$e),this},p.endFormObject=function(U){return vv(U),this},p.doFormObject=function(U,ie){var Ae=Hs[Fa[U]];return oe("q"),oe(ie.toString()+" cm"),oe("/"+Ae.id+" Do"),oe("Q"),this},p.getFormObject=function(U){var ie=Hs[Fa[U]];return{x:ie.x,y:ie.y,width:ie.width,height:ie.height,matrix:ie.matrix}},p.save=function(U,ie){return U=U||"generated.pdf",(ie=ie||{}).returnPromise=ie.returnPromise||!1,ie.returnPromise===!1?(tm(Ed(Ko()),U),typeof tm.unload=="function"&&mr.setTimeout&&setTimeout(tm.unload,911),this):new Promise(function(Ae,Ie){try{var $e=tm(Ed(Ko()),U);typeof tm.unload=="function"&&mr.setTimeout&&setTimeout(tm.unload,911),Ae($e)}catch(Qe){Ie(Qe.message)}})},sr.API)sr.API.hasOwnProperty(Vu)&&(Vu==="events"&&sr.API.events.length?function(U,ie){var Ae,Ie,$e;for($e=ie.length-1;$e!==-1;$e--)Ae=ie[$e][0],Ie=ie[$e][1],U.subscribe.apply(U,[Ae].concat(typeof Ie=="function"?[Ie]:Ie))}(Zr,sr.API.events):p[Vu]=sr.API[Vu]);var Pl=p.getPageWidth=function(U){return(gr[U=U||W].mediaBox.topRightX-gr[U].mediaBox.bottomLeftX)/Nt},Ef=p.setPageWidth=function(U,ie){gr[U].mediaBox.topRightX=ie*Nt+gr[U].mediaBox.bottomLeftX},Ic=p.getPageHeight=function(U){return(gr[U=U||W].mediaBox.topRightY-gr[U].mediaBox.bottomLeftY)/Nt},Pf=p.setPageHeight=function(U,ie){gr[U].mediaBox.topRightY=ie*Nt+gr[U].mediaBox.bottomLeftY};return p.internal={pdfEscape:Yi,getStyle:Nf,getFont:$u,getFontSize:xt,getCharSpace:Dd,getTextColor:Pc,getLineHeight:Bu,getLineHeightFactor:yo,getLineWidth:Ec,write:it,getHorizontalCoordinate:Ba,getVerticalCoordinate:za,getCoordinateString:lp,getVerticalCoordinateString:bo,collections:{},newObject:Vn,newAdditionalObject:bc,newObjectDeferred:Hn,newObjectDeferredBegin:hi,getFilters:go,putStream:va,events:Zr,scaleFactor:Nt,pageSize:{getWidth:function(){return Pl(W)},setWidth:function(U){Ef(W,U)},getHeight:function(){return Ic(W)},setHeight:function(U){Pf(W,U)}},encryptionOptions:u,encryption:Gn,getEncryptor:Yo,output:Ac,getNumberOfPages:pv,pages:Pe,out:oe,f2:F,f3:I,getPageInfo:vo,getPageInfoByObjId:lr,getCurrentPageInfo:Td,getPDFVersion:v,Point:Qo,Rectangle:_c,Matrix:Zt,hasHotfix:Pd},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Pl(W)},set:function(U){Ef(W,U)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ic(W)},set:function(U){Pf(W,U)},enumerable:!0,configurable:!0}),Ad.call(p,qe),nr="F1",bf(i,r),Zr.publish("initialized"),p}Gp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Gp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gp.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Gp.prototype.processOwnerPassword=function(t,e){return $E(FE(e).substr(0,5),t)},Gp.prototype.encryptor=function(t,e){var r=FE(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return $E(r,s)}},Yx.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||un(t)!==un(this))return!1;var s=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;s++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&s--;return s===0},sr.API={events:[]},sr.version="2.5.2";var Ss=sr.API,UT=1,Km=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Er=function(t){return t.toFixed(2)},Nh=function(t){return t.toFixed(5)};Ss.__acroform__={};var co=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},cO=function(t){return t*UT},Kc=function(t){var e=new jU,r=Bt.internal.getHeight(t)||0,s=Bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Er(s)),Number(Er(r))],e},Bhe=Ss.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},zhe=Ss.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},qhe=Ss.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},$s=Ss.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qhe(t,e-1)},Bs=Ss.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bhe(t,e-1)},zs=Ss.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zhe(t,e-1)},Uhe=Ss.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,i=t[0],a=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=s(a+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=s(a)||0,[Number(Er(c.lowerLeft_X)),Number(Er(c.lowerLeft_Y)),Number(Er(c.upperRight_X)),Number(Er(c.upperRight_Y))]},Vhe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,s=BE(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Er(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Kc(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},BE=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,s={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var a=r,o=Bt.internal.getHeight(t)||0;o=o<0?-o:o;var l=Bt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(I,T,R){if(I+1<i.length){var O=T+" "+i[I+1][0];return hb(O,t,R).width<=l-4}return!1};a++;e:for(;a>0;){e="",a--;var d,u,h=hb("3",t,a).height,f=t.multiline?o-a:(o-h)/2,p=f+=2,y=0,v=0,g=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+hb(e,t,a=12).width+", FieldWidth:"+l+`
`;break}for(var b="",j=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var C=!1;if(i[w].length!==1&&g!==i[w].length-1){if((h+2)*(j+2)+2>o)continue e;b+=i[w][g],C=!0,v=w,w--}else{b=(b+=i[w][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var E=parseInt(w),N=c(E,b,a),A=w>=i.length-1;if(N&&!A){b+=" ",g=0;continue}if(N||A){if(A)v=E;else if(t.multiline&&(h+2)*(j+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(j+2)+2>o)continue e;v=E}}for(var _="",k=y;k<=v;k++){var F=i[k];if(t.multiline){if(k===v){_+=F[g]+" ",g=(g+1)%F.length;continue}if(k===y){_+=F[F.length-1]+" ";continue}}_+=F[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,u=hb(_,t,a).width,t.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}e+=Er(d)+" "+Er(p)+` Td
`,e+="("+Km(_)+`) Tj
`,e+=-Er(d)+` 0 Td
`,p=-(a+2),u=0,y=C?v:v+1,j++,b=""}break}return s.text=e,s.fontSize=a,s},hb=function(t,e,r){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Hhe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Whe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Ghe=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var s=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),un(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[s]}},Khe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(gc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Hhe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");UT=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new wU,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];a.objId=void 0,a.hasAnnotation&&Whe(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(s,i){var a=!s;for(var o in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Uhe(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Bt.createDefaultAppearanceStream(l),un(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=Vhe(l);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var p=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,l)),h+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,l)),h+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&Ghe(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},bU=Ss.__acroform__.arrayToPdfArray=function(t,e,r){var s=function(o){return o};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),un(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(s=r.internal.getEncryptor(e)),i+="("+Km(s(t[a].toString()))+")"):i+=t[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},TN=function(t,e,r){var s=function(i){return i};return e!==void 0&&r&&(s=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Km(s(t))+")"},nd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nd.prototype.toString=function(){return this.objId+" 0 R"},nd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},nd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var s=e[r],i=this[s];i&&(Array.isArray(i)?t.push({key:s,value:bU(i,this.objId,this.scope)}):i instanceof nd?(i.scope=this.scope,t.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:s,value:i}))}return t};var jU=function(){nd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};co(jU,nd);var wU=function(){nd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Km(r(t))+")"}},set:function(r){t=r}})};co(wU,nd);var gc=function t(){nd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$s(e,3)},set:function(b){b?this.F=Bs(e,3):this.F=zs(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(b){s=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(b){s[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(b){s[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(b){s[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(b){s[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof u1)return;a="FieldObject"+t.FieldNum++}var b=function(j){return j};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Km(b(a))+")"},set:function(b){a=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(b){a=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/UT:d},set:function(b){d=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof u1||this instanceof Hh))return TN(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=b}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ai?f:TN(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=this instanceof ai?b:b.substr(0,1)==="("?Mp(b.substr(1,b.length-2)):Mp(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?Mp(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof ai?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ai?p:TN(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof ai?b:b.substr(0,1)==="("?Mp(b.substr(1,b.length-2)):Mp(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ai?Mp(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof ai?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,1)},set:function(b){b?this.Ff=Bs(this.Ff,1):this.Ff=zs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,2)},set:function(b){b?this.Ff=Bs(this.Ff,2):this.Ff=zs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,3)},set:function(b){b?this.Ff=Bs(this.Ff,3):this.Ff=zs(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};co(gc,nd);var ym=function(){gc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bU(e,this.objId,this.scope)},set:function(r){var s,i;i=[],typeof(s=r)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(s,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,18)},set:function(r){r?this.Ff=Bs(this.Ff,18):this.Ff=zs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Bs(this.Ff,19):this.Ff=zs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,20)},set:function(r){r?(this.Ff=Bs(this.Ff,20),e.sort()):this.Ff=zs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,22)},set:function(r){r?this.Ff=Bs(this.Ff,22):this.Ff=zs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(r){r?this.Ff=Bs(this.Ff,23):this.Ff=zs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,27)},set:function(r){r?this.Ff=Bs(this.Ff,27):this.Ff=zs(this.Ff,27)}}),this.hasAppearanceStream=!1};co(ym,gc);var bm=function(){ym.call(this),this.fontName="helvetica",this.combo=!1};co(bm,ym);var jm=function(){bm.call(this),this.combo=!0};co(jm,bm);var bx=function(){jm.call(this),this.edit=!0};co(bx,jm);var ai=function(){gc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,15)},set:function(r){r?this.Ff=Bs(this.Ff,15):this.Ff=zs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,16)},set:function(r){r?this.Ff=Bs(this.Ff,16):this.Ff=zs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,17)},set:function(r){r?this.Ff=Bs(this.Ff,17):this.Ff=zs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(r){r?this.Ff=Bs(this.Ff,26):this.Ff=zs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,i=[];for(s in i.push("<<"),e)i.push("/"+s+" ("+Km(r(e[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){un(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};co(ai,gc);var jx=function(){ai.call(this),this.pushButton=!0};co(jx,ai);var wm=function(){ai.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};co(wm,ai);var u1=function(){var t,e;gc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),s)o.push("/"+a+" ("+Km(i(s[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){un(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};co(u1,gc),wm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},wm.prototype.createOption=function(t){var e=new u1;return e.Parent=this,e.optionName=t,this.Kids.push(e),Yhe.call(this.scope,e),e};var wx=function(){ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};co(wx,ai);var Hh=function(){gc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,13)},set:function(e){e?this.Ff=Bs(this.Ff,13):this.Ff=zs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,21)},set:function(e){e?this.Ff=Bs(this.Ff,21):this.Ff=zs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,23)},set:function(e){e?this.Ff=Bs(this.Ff,23):this.Ff=zs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,24)},set:function(e){e?this.Ff=Bs(this.Ff,24):this.Ff=zs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,25)},set:function(e){e?this.Ff=Bs(this.Ff,25):this.Ff=zs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,26)},set:function(e){e?this.Ff=Bs(this.Ff,26):this.Ff=zs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};co(Hh,gc);var Nx=function(){Hh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$s(this.Ff,14)},set:function(t){t?this.Ff=Bs(this.Ff,14):this.Ff=zs(this.Ff,14)}}),this.password=!0};co(Nx,Hh);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=[],s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=BE(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Er(Bt.internal.getWidth(t))+" "+Er(Bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Er(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Kc(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=[],a=Bt.internal.getHeight(t),o=Bt.internal.getWidth(t),l=BE(t,t.caption);return i.push("1 g"),i.push("0 0 "+Er(o)+" "+Er(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Er(o-1)+" "+Er(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Er(l.fontSize)+" Tf "+s),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Er(Bt.internal.getWidth(t))+" "+Er(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Circle.YesNormal,e.D[t]=Bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Kc(t);e.scope=t.scope;var r=[],s=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var i=Bt.internal.Bezier_C,a=Number((s*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Nh(Bt.internal.getWidth(t)/2)+" "+Nh(Bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=[],s=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*Bt.internal.Bezier_C).toFixed(5)),o=Number((s*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Nh(Bt.internal.getWidth(t)/2)+" "+Nh(Bt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Nh(Bt.internal.getWidth(t)/2)+" "+Nh(Bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=[],s=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Nh(Bt.internal.getWidth(t)/2)+" "+Nh(Bt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Cross.YesNormal,e.D[t]=Bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Kc(t);e.scope=t.scope;var r=[],s=Bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Er(Bt.internal.getWidth(t)-2)+" "+Er(Bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Er(s.x1.x)+" "+Er(s.x1.y)+" m"),r.push(Er(s.x2.x)+" "+Er(s.x2.y)+" l"),r.push(Er(s.x4.x)+" "+Er(s.x4.y)+" m"),r.push(Er(s.x3.x)+" "+Er(s.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=Bt.internal.calculateCross(t),s=[];return s.push("0.749023 g"),s.push("0 0 "+Er(Bt.internal.getWidth(t))+" "+Er(Bt.internal.getHeight(t))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Er(Bt.internal.getWidth(t)-2)+" "+Er(Bt.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(Er(r.x1.x)+" "+Er(r.x1.y)+" m"),s.push(Er(r.x2.x)+" "+Er(r.x2.y)+" l"),s.push(Er(r.x4.x)+" "+Er(r.x4.y)+" m"),s.push(Er(r.x3.x)+" "+Er(r.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Kc(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Er(Bt.internal.getWidth(t))+" "+Er(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Bt.internal.getWidth(t),r=Bt.internal.getHeight(t),s=Math.min(e,r);return{x1:{x:(e-s)/2,y:(r-s)/2+s},x2:{x:(e-s)/2+s,y:(r-s)/2},x3:{x:(e-s)/2,y:(r-s)/2},x4:{x:(e-s)/2+s,y:(r-s)/2+s}}}},Bt.internal.getWidth=function(t){var e=0;return un(t)==="object"&&(e=cO(t.Rect[2])),e},Bt.internal.getHeight=function(t){var e=0;return un(t)==="object"&&(e=cO(t.Rect[3])),e};var Yhe=Ss.addField=function(t){if(Khe(this,t),!(t instanceof gc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ss.AcroFormChoiceField=ym,Ss.AcroFormListBox=bm,Ss.AcroFormComboBox=jm,Ss.AcroFormEditBox=bx,Ss.AcroFormButton=ai,Ss.AcroFormPushButton=jx,Ss.AcroFormRadioButton=wm,Ss.AcroFormCheckBox=wx,Ss.AcroFormTextField=Hh,Ss.AcroFormPasswordField=Nx,Ss.AcroFormAppearance=Bt,Ss.AcroForm={ChoiceField:ym,ListBox:bm,ComboBox:jm,EditBox:bx,Button:ai,PushButton:jx,RadioButton:wm,CheckBox:wx,TextField:Hh,PasswordField:Nx,Appearance:Bt},sr.AcroForm={ChoiceField:ym,ListBox:bm,ComboBox:jm,EditBox:bx,Button:ai,PushButton:jx,RadioButton:wm,CheckBox:wx,TextField:Hh,PasswordField:Nx,Appearance:Bt};var Xhe=sr.AcroForm;function NU(t){return t.reduce(function(e,r,s){return e[r]=s,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(I,T){var R,O,z,q,B,K=e;if((T=T||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(N(I))for(B in r)for(z=r[B],R=0;R<z.length;R+=1){for(q=!0,O=0;O<z[R].length;O+=1)if(z[R][O]!==void 0&&z[R][O]!==I[O]){q=!1;break}if(q===!0){K=B;break}}else for(B in r)for(z=r[B],R=0;R<z.length;R+=1){for(q=!0,O=0;O<z[R].length;O+=1)if(z[R][O]!==void 0&&z[R][O]!==I.charCodeAt(O)){q=!1;break}if(q===!0){K=B;break}}return K===e&&T!==e&&(K=T),K},i=function I(T){for(var R=this.internal.write,O=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:T.width}),q.push({key:"Height",value:T.height}),T.colorSpace===g.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===g.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var B="",K=0,Y=T.transparency.length;K<Y;K++)B+=T.transparency[K]+" "+T.transparency[K]+" ";q.push({key:"Mask",value:"["+B+"]"})}T.sMask!==void 0&&q.push({key:"SMask",value:T.objectId+1+" 0 R"});var J=T.filter!==void 0?["/"+T.filter]:void 0;if(O({data:T.data,additionalKeyValues:q,alreadyAppliedFilters:J,objectId:T.objectId}),R("endobj"),"sMask"in T&&T.sMask!==void 0){var H="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,$={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:H,data:T.sMask};"filter"in T&&($.filter=T.filter),I.call(this,$)}if(T.colorSpace===g.INDEXED){var W=this.internal.newObject();O({data:_(new Uint8Array(T.palette)),objectId:W}),R("endobj")}},a=function(){var I=this.internal.collections.addImage_images;for(var T in I)i.call(this,I[T])},o=function(){var I,T=this.internal.collections.addImage_images,R=this.internal.write;for(var O in T)R("/I"+(I=T[O]).index,I.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var I=this.internal.collections.addImage_images;return l.call(this),I},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(I){return typeof t["process"+I.toUpperCase()]=="function"},h=function(I){return un(I)==="object"&&I.nodeType===1},f=function(I,T){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var R=""+I.getAttribute("src");if(R.indexOf("data:image/")===0)return yx(unescape(R).split("base64,").pop());var O=t.loadFile(R,!0);if(O!==void 0)return O}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var z;switch(T){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return yx(I.toDataURL(z,1).split("base64,").pop())}},p=function(I){var T=this.internal.collections.addImage_images;if(T){for(var R in T)if(I===T[R].alias)return T[R]}},y=function(I,T,R){return I||T||(I=-96,T=-96),I<0&&(I=-1*R.width*72/I/this.internal.scaleFactor),T<0&&(T=-1*R.height*72/T/this.internal.scaleFactor),I===0&&(I=T*R.width/R.height),T===0&&(T=I*R.height/R.width),[I,T]},v=function(I,T,R,O,z,q){var B=y.call(this,R,O,z),K=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,J=c.call(this);if(R=B[0],O=B[1],J[z.index]=z,q){q*=Math.PI/180;var H=Math.cos(q),$=Math.sin(q),W=function(ee){return ee.toFixed(4)},te=[W(H),W($),W(-1*$),W(H),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,K(I),Y(T+O),"cm"].join(" ")),this.internal.write(te.join(" ")),this.internal.write([K(R),"0","0",K(O),"0","0","cm"].join(" "))):this.internal.write([K(R),"0","0",K(O),K(I),Y(T+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(I){var T,R,O=0;if(typeof I=="string")for(R=I.length,T=0;T<R;T++)O=(O<<5)-O+I.charCodeAt(T),O|=0;else if(N(I))for(R=I.byteLength/2,T=0;T<R;T++)O=(O<<5)-O+I[T],O|=0;return O},w=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var T=!0;return I.length===0&&(T=!1),I.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(T=!1),T},C=t.__addimage__.extractImageFromDataUrl=function(I){var T=(I=I||"").split("base64,"),R=null;if(T.length===2){var O=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(T[0]);Array.isArray(O)&&(R={mimeType:O[1],charset:O[2],data:T[1]})}return R},E=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return E()&&I instanceof ArrayBuffer};var N=t.__addimage__.isArrayBufferView=function(I){return E()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},A=t.__addimage__.binaryStringToUint8Array=function(I){for(var T=I.length,R=new Uint8Array(T),O=0;O<T;O++)R[O]=I.charCodeAt(O);return R},_=t.__addimage__.arrayBufferToBinaryString=function(I){for(var T="",R=N(I)?I:new Uint8Array(I),O=0;O<R.length;O+=8192)T+=String.fromCharCode.apply(null,R.subarray(O,O+8192));return T};t.addImage=function(){var I,T,R,O,z,q,B,K,Y;if(typeof arguments[1]=="number"?(T=e,R=arguments[1],O=arguments[2],z=arguments[3],q=arguments[4],B=arguments[5],K=arguments[6],Y=arguments[7]):(T=arguments[1],R=arguments[2],O=arguments[3],z=arguments[4],q=arguments[5],B=arguments[6],K=arguments[7],Y=arguments[8]),un(I=arguments[0])==="object"&&!h(I)&&"imageData"in I){var J=I;I=J.imageData,T=J.format||T||e,R=J.x||R||0,O=J.y||O||0,z=J.w||J.width||z,q=J.h||J.height||q,B=J.alias||B,K=J.compression||K,Y=J.rotation||J.angle||Y}var H=this.internal.getFilters();if(K===void 0&&H.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(R)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var $=k.call(this,I,T,B,K);return v.call(this,R,O,z,q,$,Y),this};var k=function(I,T,R,O){var z,q,B;if(typeof I=="string"&&s(I)===e){I=unescape(I);var K=F(I,!1);(K!==""||(K=t.loadFile(I,!0))!==void 0)&&(I=K)}if(h(I)&&(I=f(I,T)),T=s(I,T),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((B=R)==null||B.length===0)&&(R=function(Y){return typeof Y=="string"||N(Y)?j(Y):N(Y.data)?j(Y.data):null}(I)),(z=p.call(this,R))||(E()&&(I instanceof Uint8Array||T==="RGBA"||(q=I,I=A(I))),z=this["process"+T.toUpperCase()](I,d.call(this),R,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:b.NONE}(O),q)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},F=t.__addimage__.convertBase64ToBinaryString=function(I,T){var R;T=typeof T!="boolean"||T;var O,z="";if(typeof I=="string"){O=(R=C(I))!==null?R.data:I;try{z=yx(O)}catch(q){if(T)throw w(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(I){var T,R,O="";if(h(I)&&(I=f(I)),typeof I=="string"&&s(I)===e&&((O=F(I,!1))===""&&(O=t.loadFile(I)||""),I=O),R=s(I),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!E()||I instanceof Uint8Array||(I=A(I)),!(T=this["process"+R.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=R,T}})(sr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};sr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var s,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((s=d[h]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){s=d[f];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),j=s.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+p(b(s.contents))+")",a+=" /Popup "+g.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+p(b(j))+") >>",v.content=a;var w=v.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+w,s.open&&(a+=" /Open true"),a+=" >>",g.content=a,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var C=s.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(s.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(s.options.name){var E=this.annotations._nameMap[s.options.name];s.options.pageNumber=E.page,s.options.top=E.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",a="",s.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(s.options.url))+") >>";else if(s.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,a+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var N=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),a+=" /XYZ "+s.options.left+" "+N+" "+s.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},t.link=function(r,s,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(s),w:c(r+i),h:d(s+a)},options:o,type:"link"})},t.textWithLink=function(r,s,i,a){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,s,i,a),i+=.2*d,a.align==="center"&&(s-=c/2),a.align==="right"&&(s-=c),this.link(s,i-d,l,o,a),c},t.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(sr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=t.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&i.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&a(v)&&e[v.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(v){var g=0,b=r,j="",w=0;for(g=0;g<v.length;g+=1)b[v.charCodeAt(g)]!==void 0?(w++,typeof(b=b[v.charCodeAt(g)])=="number"&&(j+=String.fromCharCode(b),b=r,w=0),g===v.length-1&&(b=r,j+=v.charAt(g-(w-1)),g-=w-1,w=0)):(b=r,j+=v.charAt(g-w),g-=w,w=0);return j};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&s[v.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(v,g,b){return o(v)?a(v)===!1?-1:!d(v)||!o(g)&&!o(b)||!o(b)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(b)&&d(b)?3:l(v)||!o(b)?1:2:-1},p=function(v){var g=0,b=0,j=0,w="",C="",E="",N=(v=v||"").split("\\s+"),A=[];for(g=0;g<N.length;g+=1){for(A.push(""),b=0;b<N[g].length;b+=1)w=N[g][b],C=N[g][b-1],E=N[g][b+1],o(w)?(j=f(w,C,E),A[g]+=j!==-1?String.fromCharCode(e[w.charCodeAt(0)][j]):w):A[g]+=w;A[g]=h(A[g])}return A.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var j=0;for(b=[],j=0;j<g.length;j+=1)Array.isArray(g[j])?b.push([p(g[j][0]),g[j][1],g[j][2]]):b.push([p(g[j])]);v=b}else v=p(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",y])}(sr.API),sr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,s){var i;if((r=r||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(sr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=d.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,C){return w.concat(g.splitTextToSize(C,b))},[])):c=Array.isArray(c)?c:[c];for(var j=0;j<c.length;j++)p<(v=this.getStringUnitWidth(c[j],{font:h})*u)&&(p=v);return p!==0&&(y=c.length),{w:p/=f,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,h,f){if(s.call(this),!u)throw new Error("No data for PDF table.");var p,y,v,g,b=[],j=[],w=[],C={},E={},N=[],A=[],_=(f=f||{}).autoSize||!1,k=f.printHeaders!==!1,F=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,I=f.margins||Object.assign({width:this.getPageWidth()},e),T=typeof f.padding=="number"?f.padding:3,R=f.headerBackgroundColor||"#c8c8c8",O=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=O,this.setFontSize(F),h==null)j=b=Object.keys(u[0]),w=b.map(function(){return"left"});else if(Array.isArray(h)&&un(h[0])==="object")for(b=h.map(function(J){return J.name}),j=h.map(function(J){return J.prompt||J.name||""}),w=h.map(function(J){return J.align||"left"}),p=0;p<h.length;p+=1)E[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(j=b=h,w=b.map(function(){return"left"}));if(_||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<b.length;p+=1){for(C[g=b[p]]=u.map(function(J){return J[g]}),this.setFont(void 0,"bold"),N.push(this.getTextDimensions(j[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=C[g],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)N.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[g]=Math.max.apply(null,N)+T+T,N=[]}if(k){var z={};for(p=0;p<b.length;p+=1)z[b[p]]={},z[b[p]].text=j[p],z[b[p]].align=w[p];var q=l.call(this,z,E);A=b.map(function(J){return new a(c,d,E[J],q,z[J].text,void 0,z[J].align)}),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var B=h.reduce(function(J,H){return J[H.name]=H.align,J},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var K=l.call(this,u[p],E);for(v=0;v<b.length;v+=1){var Y=u[p][b[v]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:v,data:Y},this),o.call(this,new a(c,d,E[b[v]],K,Y,p+2,B[b[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/f+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(sr.API);var SU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},AU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zE=NU(AU),CU=[100,200,300,400,500,600,700,800,900],Zhe=NU(CU);function qE(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return SU[a=a||"normal"]?a:"normal"}(t.style),s=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(a){return typeof zE[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:s,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,s].join(" ")}}}function dO(t,e,r,s){var i;for(i=r;i>=0&&i<e.length;i+=s)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=s)if(t[e[i]])return t[e[i]]}var Qhe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uO={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hO(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Jhe(t,e,r){for(var s=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},Qhe,r.genericFontFamilies||{}),a=null,o=null,l=0;l<e.length;++l)if(i[(a=qE(e[l])).family]&&(a.family=i[a.family]),t.hasOwnProperty(a.family)){o=t[a.family];break}if(!(o=o||t[s]))throw new Error("Could not find a font-family for the rule '"+hO(a)+"' and default family '"+s+"'.");if(o=function(c,d){if(d[c])return d[c];var u=zE[c],h=u<=zE.normal?-1:1,f=dO(d,AU,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(a.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=SU[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=Zhe[c],h=dO(d,CU,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+hO(a)+"'.");return o}function fO(t){return t.trimLeft()}function efe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function tfe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var fb,mO,pO,_N=["times"];(function(t){var e,r,s,i,a,o,l,c,d,u=function($){return $=$||{},this.isStrokeTransparent=$.isStrokeTransparent||!1,this.strokeOpacity=$.strokeOpacity||1,this.strokeStyle=$.strokeStyle||"#000000",this.fillStyle=$.fillStyle||"#000000",this.isFillTransparent=$.isFillTransparent||!1,this.fillOpacity=$.fillOpacity||1,this.font=$.font||"10px sans-serif",this.textBaseline=$.textBaseline||"alphabetic",this.textAlign=$.textAlign||"left",this.lineWidth=$.lineWidth||1,this.lineJoin=$.lineJoin||"miter",this.lineCap=$.lineCap||"butt",this.path=$.path||[],this.transform=$.transform!==void 0?$.transform.clone():new c,this.globalCompositeOperation=$.globalCompositeOperation||"normal",this.globalAlpha=$.globalAlpha||1,this.clip_path=$.clip_path||[],this.currentPoint=$.currentPoint||new o,this.miterLimit=$.miterLimit||10,this.lastPoint=$.lastPoint||new o,this.lineDashOffset=$.lineDashOffset||0,this.lineDash=$.lineDash||[],this.margin=$.margin||[0,0,0,0],this.prevPageLastElemOffset=$.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $.ignoreClearRect!="boolean"||$.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function($){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=$;Object.defineProperty(this,"pdf",{get:function(){return W}});var te=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return te},set:function(we){te=!!we}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(we){ee=!!we}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(we){isNaN(we)||(ne=we)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(we){isNaN(we)||(ae=we)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(we){var oe;typeof we=="number"?oe=[we,we,we,we]:((oe=new Array(4))[0]=we[0],oe[1]=we.length>=2?we[1]:oe[0],oe[2]=we.length>=3?we[2]:oe[0],oe[3]=we.length>=4?we[3]:oe[1]),d.margin=oe}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(we){ve=we}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(we){xe=we}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(we){Se=we}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(we){we instanceof u&&(d=we)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(we){d.path=we}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(we){Pe=we}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(we){var oe;oe=f(we),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(we){var oe=f(we);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(we){["butt","round","square"].indexOf(we)!==-1&&(this.ctx.lineCap=we,this.pdf.setLineCap(we))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(we){isNaN(we)||(this.ctx.lineWidth=we,this.pdf.setLineWidth(we))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(we){["bevel","round","miter"].indexOf(we)!==-1&&(this.ctx.lineJoin=we,this.pdf.setLineJoin(we))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(we){isNaN(we)||(this.ctx.miterLimit=we,this.pdf.setMiterLimit(we))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(we){this.ctx.textBaseline=we}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(we){["right","end","center","left","start"].indexOf(we)!==-1&&(this.ctx.textAlign=we)}});var Ce=null;function He(we,oe){if(Ce===null){var it=function(_e){var qe=[];return Object.keys(_e).forEach(function(lt){_e[lt].forEach(function(vt){var xt=null;switch(vt){case"bold":xt={family:lt,weight:"bold"};break;case"italic":xt={family:lt,style:"italic"};break;case"bolditalic":xt={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:lt}}xt!==null&&(xt.ref={name:lt,style:vt},qe.push(xt))})}),qe}(we.getFontList());Ce=function(_e){for(var qe={},lt=0;lt<_e.length;++lt){var vt=qE(_e[lt]),xt=vt.family,Ot=vt.stretch,Ze=vt.style,ut=vt.weight;qe[xt]=qe[xt]||{},qe[xt][Ot]=qe[xt][Ot]||{},qe[xt][Ot][Ze]=qe[xt][Ot][Ze]||{},qe[xt][Ot][Ze][ut]=vt}return qe}(it.concat(oe))}return Ce}var Ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ke},set:function(we){Ce=null,Ke=we}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(we){var oe;if(this.ctx.font=we,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(we))!==null){var it=oe[1],_e=(oe[2],oe[3]),qe=oe[4],lt=(oe[5],oe[6]),vt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(vt==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:vt==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var xt=function(Vt){var nr,Nt,Yr=[],wr=Vt.trim();if(wr==="")return _N;if(wr in uO)return[uO[wr]];for(;wr!=="";){switch(Nt=null,nr=(wr=fO(wr)).charAt(0)){case'"':case"'":Nt=efe(wr.substring(1),nr);break;default:Nt=tfe(wr)}if(Nt===null||(Yr.push(Nt[0]),(wr=fO(Nt[1]))!==""&&wr.charAt(0)!==","))return _N;wr=wr.replace(/^,/,"")}return Yr}(lt);if(this.fontFaces){var Ot=Jhe(He(this.pdf,this.fontFaces),xt.map(function(Vt){return{family:Vt,stretch:"normal",weight:_e,style:it}}));this.pdf.setFont(Ot.ref.name,Ot.ref.style)}else{var Ze="";(_e==="bold"||parseInt(_e,10)>=700||it==="bold")&&(Ze="bold"),it==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ut="",Et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<xt.length;kt++){if(this.pdf.internal.getFont(xt[kt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ut=xt[kt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(xt[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=xt[kt],Ze="bold";else if(this.pdf.internal.getFont(xt[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=xt[kt],Ze="normal";break}}if(ut===""){for(var Kt=0;Kt<xt.length;Kt++)if(Et[xt[Kt]]){ut=Et[xt[Kt]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(we){this.ctx.globalCompositeOperation=we}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(we){this.ctx.globalAlpha=we}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(we){this.ctx.lineDashOffset=we,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(we){this.ctx.lineDash=we,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(we){this.ctx.ignoreClearRect=!!we}})};h.prototype.setLineDash=function($){this.lineDash=$},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function($,W){if(isNaN($)||isNaN(W))throw kn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var te=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"mt",x:te.x,y:te.y}),this.ctx.lastPoint=new o($,W)},h.prototype.closePath=function(){var $=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&un(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){$=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o($.x,$.y)},h.prototype.lineTo=function($,W){if(isNaN($)||isNaN(W))throw kn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var te=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"lt",x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function($,W,te,ee){if(isNaN(te)||isNaN(ee)||isNaN($)||isNaN(W))throw kn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(te,ee)),ae=this.ctx.transform.applyToPoint(new o($,W));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.bezierCurveTo=function($,W,te,ee,ne,ae){if(isNaN(ne)||isNaN(ae)||isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee))throw kn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(ne,ae)),xe=this.ctx.transform.applyToPoint(new o($,W)),Se=this.ctx.transform.applyToPoint(new o(te,ee));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Se.x,y2:Se.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},h.prototype.arc=function($,W,te,ee,ne,ae){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee)||isNaN(ne))throw kn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o($,W));$=ve.x,W=ve.y;var xe=this.ctx.transform.applyToPoint(new o(0,te)),Se=this.ctx.transform.applyToPoint(new o(0,0));te=Math.sqrt(Math.pow(xe.x-Se.x,2)+Math.pow(xe.y-Se.y,2))}Math.abs(ne-ee)>=2*Math.PI&&(ee=0,ne=2*Math.PI),this.path.push({type:"arc",x:$,y:W,radius:te,startAngle:ee,endAngle:ne,counterclockwise:ae})},h.prototype.arcTo=function($,W,te,ee,ne){throw new Error("arcTo not implemented.")},h.prototype.rect=function($,W,te,ee){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee))throw kn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($,W),this.lineTo($+te,W),this.lineTo($+te,W+ee),this.lineTo($,W+ee),this.lineTo($,W),this.lineTo($+te,W),this.lineTo($,W)},h.prototype.fillRect=function($,W,te,ee){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee))throw kn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($,W,te,ee),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},h.prototype.strokeRect=function($,W,te,ee){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee))throw kn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect($,W,te,ee),this.stroke())},h.prototype.clearRect=function($,W,te,ee){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee))throw kn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($,W,te,ee))},h.prototype.save=function($){$=typeof $!="boolean"||$;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),$){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},h.prototype.restore=function($){$=typeof $!="boolean"||$;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,te=0;te<this.pdf.internal.getNumberOfPages();te++)this.pdf.setPage(te+1),this.pdf.internal.out("Q");this.pdf.setPage(W),$&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function($){var W,te,ee,ne;if($.isCanvasGradient===!0&&($=$.getColor()),!$)return{r:0,g:0,b:0,a:0,style:$};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($))W=0,te=0,ee=0,ne=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($);if(ae!==null)W=parseInt(ae[1]),te=parseInt(ae[2]),ee=parseInt(ae[3]),ne=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($))!==null)W=parseInt(ae[1]),te=parseInt(ae[2]),ee=parseInt(ae[3]),ne=parseFloat(ae[4]);else{if(ne=1,typeof $=="string"&&$.charAt(0)!=="#"){var ve=new vU($);$=ve.ok?ve.toHex():"#000000"}$.length===4?(W=$.substring(1,2),W+=W,te=$.substring(2,3),te+=te,ee=$.substring(3,4),ee+=ee):(W=$.substring(1,3),te=$.substring(3,5),ee=$.substring(5,7)),W=parseInt(W,16),te=parseInt(te,16),ee=parseInt(ee,16)}}return{r:W,g:te,b:ee,a:ne,style:$}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function($,W,te,ee){if(isNaN(W)||isNaN(te)||typeof $!="string")throw kn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var ne=K(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;T.call(this,{text:$,x:W,y:te,scale:ae,angle:ne,align:this.textAlign,maxWidth:ee})}},h.prototype.strokeText=function($,W,te,ee){if(isNaN(W)||isNaN(te)||typeof $!="string")throw kn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){ee=isNaN(ee)?void 0:ee;var ne=K(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;T.call(this,{text:$,x:W,y:te,scale:ae,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:ee})}},h.prototype.measureText=function($){if(typeof $!="string")throw kn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,te=this.pdf.internal.scaleFactor,ee=W.internal.getFontSize(),ne=W.getStringUnitWidth($)*ee/W.internal.scaleFactor,ae=function(ve){var xe=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new ae({width:ne*=Math.round(96*te/72*1e4)/1e4})},h.prototype.scale=function($,W){if(isNaN($)||isNaN(W))throw kn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var te=new c($,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(te)},h.prototype.rotate=function($){if(isNaN($))throw kn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos($),Math.sin($),-Math.sin($),Math.cos($),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function($,W){if(isNaN($)||isNaN(W))throw kn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var te=new c(1,0,0,1,$,W);this.ctx.transform=this.ctx.transform.multiply(te)},h.prototype.transform=function($,W,te,ee,ne,ae){if(isNaN($)||isNaN(W)||isNaN(te)||isNaN(ee)||isNaN(ne)||isNaN(ae))throw kn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new c($,W,te,ee,ne,ae);this.ctx.transform=this.ctx.transform.multiply(ve)},h.prototype.setTransform=function($,W,te,ee,ne,ae){$=isNaN($)?1:$,W=isNaN(W)?0:W,te=isNaN(te)?0:te,ee=isNaN(ee)?1:ee,ne=isNaN(ne)?0:ne,ae=isNaN(ae)?0:ae,this.ctx.transform=new c($,W,te,ee,ne,ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function($,W,te,ee,ne,ae,ve,xe,Se){var Pe=this.pdf.getImageProperties($),Ce=1,He=1,Ke=1,we=1;ee!==void 0&&xe!==void 0&&(Ke=xe/ee,we=Se/ne,Ce=Pe.width/ee*xe/ee,He=Pe.height/ne*Se/ne),ae===void 0&&(ae=W,ve=te,W=0,te=0),ee!==void 0&&xe===void 0&&(xe=ee,Se=ne),ee===void 0&&xe===void 0&&(xe=Pe.width,Se=Pe.height);for(var oe,it=this.ctx.transform.decompose(),_e=K(it.rotate.shx),qe=new c,lt=(qe=(qe=(qe=qe.multiply(it.translate)).multiply(it.skew)).multiply(it.scale)).applyToRectangle(new l(ae-W*Ke,ve-te*we,ee*Ce,ne*He)),vt=g.call(this,lt),xt=[],Ot=0;Ot<vt.length;Ot+=1)xt.indexOf(vt[Ot])===-1&&xt.push(vt[Ot]);if(w(xt),this.autoPaging)for(var Ze=xt[0],ut=xt[xt.length-1],Et=Ze;Et<ut+1;Et++){this.pdf.setPage(Et);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Kt=Et===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=Et===1?0:Vt+(Et-2)*nr;if(this.ctx.clip_path.length!==0){var Yr=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(oe,this.posX+this.margin[3],-Nt+Kt+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Yr}var wr=JSON.parse(JSON.stringify(lt));wr=j([wr],this.posX+this.margin[3],-Nt+Kt+this.ctx.prevPageLastElemOffset)[0];var xs=(Et>Ze||Et<ut)&&v.call(this);xs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,nr,null).clip().discardPath()),this.pdf.addImage($,"JPEG",wr.x,wr.y,wr.w,wr.h,null,null,_e),xs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,_e)};var g=function($,W,te){var ee=[];W=W||this.pdf.internal.pageSize.width,te=te||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch($.type){default:case"mt":case"lt":ee.push(Math.floor(($.y+ne)/te)+1);break;case"arc":ee.push(Math.floor(($.y+ne-$.radius)/te)+1),ee.push(Math.floor(($.y+ne+$.radius)/te)+1);break;case"qct":var ae=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x,$.y);ee.push(Math.floor((ae.y+ne)/te)+1),ee.push(Math.floor((ae.y+ae.h+ne)/te)+1);break;case"bct":var ve=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$.x1,$.y1,$.x2,$.y2,$.x,$.y);ee.push(Math.floor((ve.y+ne)/te)+1),ee.push(Math.floor((ve.y+ve.h+ne)/te)+1);break;case"rect":ee.push(Math.floor(($.y+ne)/te)+1),ee.push(Math.floor(($.y+$.h+ne)/te)+1)}for(var xe=0;xe<ee.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[xe];)b.call(this);return ee},b=function(){var $=this.fillStyle,W=this.strokeStyle,te=this.font,ee=this.lineCap,ne=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=$,this.strokeStyle=W,this.font=te,this.lineCap=ee,this.lineWidth=ne,this.lineJoin=ae},j=function($,W,te){for(var ee=0;ee<$.length;ee++)switch($[ee].type){case"bct":$[ee].x2+=W,$[ee].y2+=te;case"qct":$[ee].x1+=W,$[ee].y1+=te;case"mt":case"lt":case"arc":default:$[ee].x+=W,$[ee].y+=te}return $},w=function($){return $.sort(function(W,te){return W-te})},C=function($,W){for(var te,ee,ne=this.fillStyle,ae=this.strokeStyle,ve=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),Pe=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Ke=[],we=0;we<He.length;we++)if(He[we].x!==void 0)for(var oe=g.call(this,He[we]),it=0;it<oe.length;it+=1)Ke.indexOf(oe[it])===-1&&Ke.push(oe[it]);for(var _e=0;_e<Ke.length;_e++)for(;this.pdf.internal.getNumberOfPages()<Ke[_e];)b.call(this);if(w(Ke),this.autoPaging)for(var qe=Ke[0],lt=Ke[Ke.length-1],vt=qe;vt<lt+1;vt++){this.pdf.setPage(vt),this.fillStyle=ne,this.strokeStyle=ae,this.lineCap=ve,this.lineWidth=Se,this.lineJoin=Pe;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=vt===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=vt===1?0:Ze+(vt-2)*ut;if(this.ctx.clip_path.length!==0){var kt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(te,this.posX+this.margin[3],-Et+Ot+this.ctx.prevPageLastElemOffset),E.call(this,$,!0),this.path=kt}if(ee=JSON.parse(JSON.stringify(Ce)),this.path=j(ee,this.posX+this.margin[3],-Et+Ot+this.ctx.prevPageLastElemOffset),W===!1||vt===0){var Kt=(vt>qe||vt<lt)&&v.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,ut,null).clip().discardPath()),E.call(this,$,W),Kt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Se,E.call(this,$,W),this.lineWidth=xe;this.path=Ce},E=function($,W){if(($!=="stroke"||W||!y.call(this))&&($==="stroke"||W||!p.call(this))){for(var te,ee,ne=[],ae=this.path,ve=0;ve<ae.length;ve++){var xe=ae[ve];switch(xe.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:xe,deltas:[],abs:[]});break;case"lt":var Se=ne.length;if(ae[ve-1]&&!isNaN(ae[ve-1].x)&&(te=[xe.x-ae[ve-1].x,xe.y-ae[ve-1].y],Se>0)){for(;Se>=0;Se--)if(ne[Se-1].close!==!0&&ne[Se-1].begin!==!0){ne[Se-1].deltas.push(te),ne[Se-1].abs.push(xe);break}}break;case"bct":te=[xe.x1-ae[ve-1].x,xe.y1-ae[ve-1].y,xe.x2-ae[ve-1].x,xe.y2-ae[ve-1].y,xe.x-ae[ve-1].x,xe.y-ae[ve-1].y],ne[ne.length-1].deltas.push(te);break;case"qct":var Pe=ae[ve-1].x+2/3*(xe.x1-ae[ve-1].x),Ce=ae[ve-1].y+2/3*(xe.y1-ae[ve-1].y),He=xe.x+2/3*(xe.x1-xe.x),Ke=xe.y+2/3*(xe.y1-xe.y),we=xe.x,oe=xe.y;te=[Pe-ae[ve-1].x,Ce-ae[ve-1].y,He-ae[ve-1].x,Ke-ae[ve-1].y,we-ae[ve-1].x,oe-ae[ve-1].y],ne[ne.length-1].deltas.push(te);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(xe)}}ee=W?null:$==="stroke"?"stroke":"fill";for(var it=!1,_e=0;_e<ne.length;_e++)if(ne[_e].arc)for(var qe=ne[_e].abs,lt=0;lt<qe.length;lt++){var vt=qe[lt];vt.type==="arc"?_.call(this,vt.x,vt.y,vt.radius,vt.startAngle,vt.endAngle,vt.counterclockwise,void 0,W,!it):R.call(this,vt.x,vt.y),it=!0}else if(ne[_e].close===!0)this.pdf.internal.out("h"),it=!1;else if(ne[_e].begin!==!0){var xt=ne[_e].start.x,Ot=ne[_e].start.y;O.call(this,ne[_e].deltas,xt,Ot),it=!0}ee&&k.call(this,ee),W&&F.call(this)}},N=function($){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,te=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $-te;case"top":return $+W-te;case"hanging":return $+W-2*te;case"middle":return $+W/2-te;case"ideographic":return $;case"alphabetic":default:return $}},A=function($){return $+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var $=function(){};return $.colorStops=[],$.addColorStop=function(W,te){this.colorStops.push([W,te])},$.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$.isCanvasGradient=!0,$},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function($,W,te,ee,ne,ae,ve,xe,Se){for(var Pe=q.call(this,te,ee,ne,ae),Ce=0;Ce<Pe.length;Ce++){var He=Pe[Ce];Ce===0&&(Se?I.call(this,He.x1+$,He.y1+W):R.call(this,He.x1+$,He.y1+W)),z.call(this,$,W,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}xe?F.call(this):k.call(this,ve)},k=function($){switch($){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},I=function($,W){this.pdf.internal.out(r($)+" "+s(W)+" m")},T=function($){var W;switch($.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var te=this.pdf.getTextDimensions($.text),ee=N.call(this,$.y),ne=A.call(this,ee)-te.h,ae=this.ctx.transform.applyToPoint(new o($.x,ee)),ve=this.ctx.transform.decompose(),xe=new c;xe=(xe=(xe=xe.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Se,Pe,Ce,He=this.ctx.transform.applyToRectangle(new l($.x,ee,te.w,te.h)),Ke=xe.applyToRectangle(new l($.x,ne,te.w,te.h)),we=g.call(this,Ke),oe=[],it=0;it<we.length;it+=1)oe.indexOf(we[it])===-1&&oe.push(we[it]);if(w(oe),this.autoPaging)for(var _e=oe[0],qe=oe[oe.length-1],lt=_e;lt<qe+1;lt++){this.pdf.setPage(lt);var vt=lt===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ot-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],Et=ut-this.margin[3],kt=lt===1?0:xt+(lt-2)*Ze;if(this.ctx.clip_path.length!==0){var Kt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Se,this.posX+this.margin[3],-1*kt+vt),E.call(this,"fill",!0),this.path=Kt}var Vt=j([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-kt+vt+this.ctx.prevPageLastElemOffset)[0];$.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*$.scale),Ce=this.lineWidth,this.lineWidth=Ce*$.scale);var nr=this.autoPaging!=="text";if(nr||Vt.y+Vt.h<=Ot){if(nr||Vt.y>=vt&&Vt.x<=ut){var Nt=nr?$.text:this.pdf.splitTextToSize($.text,$.maxWidth||ut-Vt.x)[0],Yr=j([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-kt+vt+this.ctx.prevPageLastElemOffset)[0],wr=nr&&(lt>_e||lt<qe)&&v.call(this);wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,Ze,null).clip().discardPath()),this.pdf.text(Nt,Yr.x,Yr.y,{angle:$.angle,align:W,renderingMode:$.renderingMode}),wr&&this.pdf.restoreGraphicsState()}}else Vt.y<Ot&&(this.ctx.prevPageLastElemOffset+=Ot-Vt.y);$.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ce)}else $.scale>=.01&&(Pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Pe*$.scale),Ce=this.lineWidth,this.lineWidth=Ce*$.scale),this.pdf.text($.text,ae.x+this.posX,ae.y+this.posY,{angle:$.angle,align:W,renderingMode:$.renderingMode,maxWidth:$.maxWidth}),$.scale>=.01&&(this.pdf.setFontSize(Pe),this.lineWidth=Ce)},R=function($,W,te,ee){te=te||0,ee=ee||0,this.pdf.internal.out(r($+te)+" "+s(W+ee)+" l")},O=function($,W,te){return this.pdf.lines($,W,te,null,null)},z=function($,W,te,ee,ne,ae,ve,xe){this.pdf.internal.out([e(i(te+$)),e(a(ee+W)),e(i(ne+$)),e(a(ae+W)),e(i(ve+$)),e(a(xe+W)),"c"].join(" "))},q=function($,W,te,ee){for(var ne=2*Math.PI,ae=Math.PI/2;W>te;)W-=ne;var ve=Math.abs(te-W);ve<ne&&ee&&(ve=ne-ve);for(var xe=[],Se=ee?-1:1,Pe=W;ve>1e-5;){var Ce=Pe+Se*Math.min(ve,ae);xe.push(B.call(this,$,Pe,Ce)),ve-=Math.abs(Ce-Pe),Pe=Ce}return xe},B=function($,W,te){var ee=(te-W)/2,ne=$*Math.cos(ee),ae=$*Math.sin(ee),ve=ne,xe=-ae,Se=ve*ve+xe*xe,Pe=Se+ve*ne+xe*ae,Ce=4/3*(Math.sqrt(2*Se*Pe)-Pe)/(ve*ae-xe*ne),He=ve-Ce*xe,Ke=xe+Ce*ve,we=He,oe=-Ke,it=ee+W,_e=Math.cos(it),qe=Math.sin(it);return{x1:$*Math.cos(W),y1:$*Math.sin(W),x2:He*_e-Ke*qe,y2:He*qe+Ke*_e,x3:we*_e-oe*qe,y3:we*qe+oe*_e,x4:$*Math.cos(te),y4:$*Math.sin(te)}},K=function($){return 180*$/Math.PI},Y=function($,W,te,ee,ne,ae){var ve=$+.5*(te-$),xe=W+.5*(ee-W),Se=ne+.5*(te-ne),Pe=ae+.5*(ee-ae),Ce=Math.min($,ne,ve,Se),He=Math.max($,ne,ve,Se),Ke=Math.min(W,ae,xe,Pe),we=Math.max(W,ae,xe,Pe);return new l(Ce,Ke,He-Ce,we-Ke)},J=function($,W,te,ee,ne,ae,ve,xe){var Se,Pe,Ce,He,Ke,we,oe,it,_e,qe,lt,vt,xt,Ot,Ze=te-$,ut=ee-W,Et=ne-te,kt=ae-ee,Kt=ve-ne,Vt=xe-ae;for(Pe=0;Pe<41;Pe++)_e=(oe=(Ce=$+(Se=Pe/40)*Ze)+Se*((Ke=te+Se*Et)-Ce))+Se*(Ke+Se*(ne+Se*Kt-Ke)-oe),qe=(it=(He=W+Se*ut)+Se*((we=ee+Se*kt)-He))+Se*(we+Se*(ae+Se*Vt-we)-it),Pe==0?(lt=_e,vt=qe,xt=_e,Ot=qe):(lt=Math.min(lt,_e),vt=Math.min(vt,qe),xt=Math.max(xt,_e),Ot=Math.max(Ot,qe));return new l(Math.round(lt),Math.round(vt),Math.round(xt-lt),Math.round(Ot-vt))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $,W,te=($=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:$,lineDashOffset:W}));this.prevLineDash!==te&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=te)}}})(sr.API),function(t){var e=function(a){var o,l,c,d,u,h,f,p,y,v;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(u=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(v=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,p+33,y+33,v+33)):l.push(122);return function(g,b){for(var j=b;j>0;j--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,d,u,h=String,f="length",p=255,y="charCodeAt",v="slice",g="replace";for(a[v](-2),a=a[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(a+=o="uuuuu"[v](a[f]%5||5))[f];u>d;d+=5)l=52200625*(a[y](d)-33)+614125*(a[y](d+1)-33)+7225*(a[y](d+2)-33)+85*(a[y](d+3)-33)+(a[y](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(b,j){for(var w=j;w>0;w--)b.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return a=(o=LE(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(sr.API),function(t){t.loadFile=function(e,r,s){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,p=function(y){var v=y.length,g=[],b=String.fromCharCode;for(f=0;f<v;f+=1)g.push(b(255&y.charCodeAt(f)));return g.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(i,a,o)}catch{}return l}(e,r,s)},t.loadImageFile=t.loadFile}(sr.API),function(t){function e(){return(mr.html2canvas?Promise.resolve(mr.html2canvas):o1(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(mr.DOMPurify?Promise.resolve(mr.DOMPurify):o1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var l=un(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],y=p.src.find(function(v){return v.format==="truetype"});y&&c.addFont(y.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(s(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return a.convert(u,this.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,sr.getPageSize=function(o,l,c){if(un(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,y=0,v=0;if(f.hasOwnProperty(h))y=f[h][1]/u,v=f[h][0]/u;else try{y=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>y&&(p=v,v=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:l,k:u,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(qE):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(sr.API),sr.API.addJS=function(t){return pO=t,this.internal.events.subscribe("postPutResources",function(){fb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mO=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+pO+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fb!==void 0&&mO!==void 0&&this.internal.out("/Names <</JavaScript "+fb+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(a=0;a<d;a++){var h=r.internal.newObject();u.push(h);var f=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<u.length;a++)r.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,i,a){var o={title:i,options:a,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<s.children.length;a++){var o=s.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),a>0&&this.line("/Prev "+this.makeRef(s.children[a-1])),a<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,i){for(var a=0;a<i.children.length;a++)s.count++,this.count_r(s,i.children[a]);return s.count}}])}(sr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,s,i,a,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var f,p=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,v={width:0,height:0,numcomponents:1},g=4;g<y;g+=2){if(g+=p,e.indexOf(h.charCodeAt(g+1))!==-1){f=256*h.charCodeAt(g+5)+h.charCodeAt(g+6),v={width:256*h.charCodeAt(g+7)+h.charCodeAt(g+8),height:f,numcomponents:h.charCodeAt(g+9)};break}p=256*h.charCodeAt(g+2)+h.charCodeAt(g+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:i}}return u}}(sr.API);var Fp,mb,gO,vO,xO,rfe=function(){var t,e,r;function s(a){var o,l,c,d,u,h,f,p,y,v,g,b,j,w;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var C,E;for(E=[],C=0;C<4;++C)E.push(String.fromCharCode(this.data[this.pos++]));return E}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),a=h?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(j=0;0<=v?j<v:j>v;0<=v?++j:--j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(g=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,g.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,g.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(a){var o,l;for(l=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)l.push(this.data[this.pos++]);return l},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function u(h,f,p,y){var v,g,b,j,w,C,E,N,A,_,k,F,I,T,R,O,z,q,B,K,Y,J=Math.ceil((d.width-h)/p),H=Math.ceil((d.height-f)/y),$=d.width==J&&d.height==H;for(T=o*J,F=$?l:new Uint8Array(T*H),C=a.length,I=0,g=0;I<H&&c<C;){switch(a[c++]){case 0:for(j=z=0;z<T;j=z+=1)F[g++]=a[c++];break;case 1:for(j=q=0;q<T;j=q+=1)v=a[c++],w=j<o?0:F[g-o],F[g++]=(v+w)%256;break;case 2:for(j=B=0;B<T;j=B+=1)v=a[c++],b=(j-j%o)/o,R=I&&F[(I-1)*T+b*o+j%o],F[g++]=(R+v)%256;break;case 3:for(j=K=0;K<T;j=K+=1)v=a[c++],b=(j-j%o)/o,w=j<o?0:F[g-o],R=I&&F[(I-1)*T+b*o+j%o],F[g++]=(v+Math.floor((w+R)/2))%256;break;case 4:for(j=Y=0;Y<T;j=Y+=1)v=a[c++],b=(j-j%o)/o,w=j<o?0:F[g-o],I===0?R=O=0:(R=F[(I-1)*T+b*o+j%o],O=b&&F[(I-1)*T+(b-1)*o+j%o]),E=w+R-O,N=Math.abs(E-w),_=Math.abs(E-R),k=Math.abs(E-O),A=N<=_&&N<=k?w:_<=k?R:O,F[g++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!$){var W=((f+I*y)*d.width+h)*o,te=I*T;for(j=0;j<J;j+=1){for(var ee=0;ee<o;ee+=1)l[W++]=F[te++];W+=(p-1)*o}}I++}}return a=khe(a),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},s.prototype.decodePalette=function(){var a,o,l,c,d,u,h,f,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,a=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[a++])!=null?p:255;return d},s.prototype.copyToImageData=function(a,o){var l,c,d,u,h,f,p,y,v,g,b;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=a.data||a).length,h=v||o,u=f=0,c===1)for(;u<y;)p=v?4*o[u/4]:f,g=h[p++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?h[p++]:255,f=p;else for(;u<y;)p=v?4*o[u/4]:f,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,f=p},s.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(mr)==="[object Window]"){try{e=mr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(a){var o;if(i()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(a){var o,l,c,d,u,h,f,p;if(this.animation){for(p=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=a.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=t(c));return p}},s.prototype.renderFrame=function(a,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),d?.disposeOp===1?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&a.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},s.prototype.animate=function(a){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,y;if(p=l++%d,y=c[p],f.renderFrame(a,p),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,y.delay)})()},s.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},s.prototype.render=function(a){var o,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nfe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,s=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var l=null,c=null;a&&(l=e,c=o,e+=3*o);var d=!0,u=[],h=0,f=null,p=0,y=null;for(this.width=r,this.height=s;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],(1&v)==0&&(f=null),p=v>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,C=t[e++],E=C>>6&1,N=1<<(7&C)+1,A=l,_=c,k=!1;C>>7&&(k=!0,A=e,_=N,e+=3*N);var F=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}u.push({x:g,y:b,width:j,height:w,has_local_palette:k,palette_offset:A,palette_size:_,data_offset:F,data_length:e-F,transparent_index:f,interlaced:!!E,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,R){var O=this.frameInfo(T),z=O.width*O.height,q=new Uint8Array(z);yO(t,O.data_offset,q,z);var B=O.palette_offset,K=O.transparent_index;K===null&&(K=256);var Y=O.width,J=r-Y,H=Y,$=4*(O.y*r+O.x),W=4*((O.y+O.height)*r+O.x),te=$,ee=4*J;O.interlaced===!0&&(ee+=4*r*7);for(var ne=8,ae=0,ve=q.length;ae<ve;++ae){var xe=q[ae];if(H===0&&(H=Y,(te+=ee)>=W&&(ee=4*J+4*r*(ne-1),te=$+(Y+J)*(ne<<1),ne>>=1)),xe===K)te+=4;else{var Se=t[B+3*xe],Pe=t[B+3*xe+1],Ce=t[B+3*xe+2];R[te++]=Ce,R[te++]=Pe,R[te++]=Se,R[te++]=255}--H}},this.decodeAndBlitFrameRGBA=function(T,R){var O=this.frameInfo(T),z=O.width*O.height,q=new Uint8Array(z);yO(t,O.data_offset,q,z);var B=O.palette_offset,K=O.transparent_index;K===null&&(K=256);var Y=O.width,J=r-Y,H=Y,$=4*(O.y*r+O.x),W=4*((O.y+O.height)*r+O.x),te=$,ee=4*J;O.interlaced===!0&&(ee+=4*r*7);for(var ne=8,ae=0,ve=q.length;ae<ve;++ae){var xe=q[ae];if(H===0&&(H=Y,(te+=ee)>=W&&(ee=4*J+4*r*(ne-1),te=$+(Y+J)*(ne<<1),ne>>=1)),xe===K)te+=4;else{var Se=t[B+3*xe],Pe=t[B+3*xe+1],Ce=t[B+3*xe+2];R[te++]=Se,R[te++]=Pe,R[te++]=Ce,R[te++]=255}--H}}}function yO(t,e,r,s){for(var i=t[e++],a=1<<i,o=a+1,l=o+1,c=i+1,d=(1<<c)-1,u=0,h=0,f=0,p=t[e++],y=new Int32Array(4096),v=null;;){for(;u<16&&p!==0;)h|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<c)break;var g=h&d;if(h>>=c,u-=c,g!==a){if(g===o)break;for(var b=g<l?g:v,j=0,w=b;w>a;)w=y[w]>>8,++j;var C=w;if(f+j+(b!==g?1:0)>s)return void kn.log("Warning, gif stream longer than expected.");r[f++]=C;var E=f+=j;for(b!==g&&(r[f++]=C),w=b;j--;)w=y[w],r[--E]=255&w,w>>=8;v!==null&&l<4096&&(y[l++]=v<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=i+1))-1,v=null}return f!==s&&kn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function IN(t){var e,r,s,i,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),y=new Array(64),v=[],g=0,b=7,j=new Array(64),w=new Array(64),C=new Array(64),E=new Array(256),N=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q($,W){for(var te=0,ee=0,ne=new Array,ae=1;ae<=16;ae++){for(var ve=1;ve<=$[ae];ve++)ne[W[ee]]=[],ne[W[ee]][0]=te,ne[W[ee]][1]=ae,ee++,te++;te*=2}return ne}function B($){for(var W=$[0],te=$[1]-1;te>=0;)W&1<<te&&(g|=1<<b),te--,--b<0&&(g==255?(K(255),K(0)):K(g),b=7,g=0)}function K($){v.push($)}function Y($){K($>>8&255),K(255&$)}function J($,W,te,ee,ne){for(var ae,ve=ne[0],xe=ne[240],Se=function(qe,lt){var vt,xt,Ot,Ze,ut,Et,kt,Kt,Vt,nr,Nt=0;for(Vt=0;Vt<8;++Vt){vt=qe[Nt],xt=qe[Nt+1],Ot=qe[Nt+2],Ze=qe[Nt+3],ut=qe[Nt+4],Et=qe[Nt+5],kt=qe[Nt+6];var Yr=vt+(Kt=qe[Nt+7]),wr=vt-Kt,xs=xt+kt,Xr=xt-kt,an=Ot+Et,di=Ot-Et,Rr=Ze+ut,ho=Ze-ut,Ln=Yr+Rr,ui=Yr-Rr,Hi=xs+an,Un=xs-an;qe[Nt]=Ln+Hi,qe[Nt+4]=Ln-Hi;var gr=.707106781*(Un+ui);qe[Nt+2]=ui+gr,qe[Nt+6]=ui-gr;var Zr=.382683433*((Ln=ho+di)-(Un=Xr+wr)),yc=.5411961*Ln+Zr,Hs=1.306562965*Un+Zr,Fa=.707106781*(Hi=di+Xr),fo=wr+Fa,Zt=wr-Fa;qe[Nt+5]=Zt+yc,qe[Nt+3]=Zt-yc,qe[Nt+1]=fo+Hs,qe[Nt+7]=fo-Hs,Nt+=8}for(Nt=0,Vt=0;Vt<8;++Vt){vt=qe[Nt],xt=qe[Nt+8],Ot=qe[Nt+16],Ze=qe[Nt+24],ut=qe[Nt+32],Et=qe[Nt+40],kt=qe[Nt+48];var ga=vt+(Kt=qe[Nt+56]),Wi=vt-Kt,Gi=xt+kt,Vn=xt-kt,Hn=Ot+Et,hi=Ot-Et,bc=Ze+ut,Cl=Ze-ut,mo=ga+bc,po=ga-bc,Qs=Gi+Hn,go=Gi-Hn;qe[Nt]=mo+Qs,qe[Nt+32]=mo-Qs;var va=.707106781*(go+po);qe[Nt+16]=po+va,qe[Nt+48]=po-va;var Go=.382683433*((mo=Cl+hi)-(go=Vn+Wi)),jc=.5411961*mo+Go,bd=1.306562965*go+Go,jd=.707106781*(Qs=hi+Vn),wd=Wi+jd,_u=Wi-jd;qe[Nt+40]=_u+jc,qe[Nt+24]=_u-jc,qe[Nt+8]=wd+bd,qe[Nt+56]=wd-bd,Nt++}for(Vt=0;Vt<64;++Vt)nr=qe[Vt]*lt[Vt],p[Vt]=nr>0?nr+.5|0:nr-.5|0;return p}($,W),Pe=0;Pe<64;++Pe)y[A[Pe]]=Se[Pe];var Ce=y[0]-te;te=y[0],Ce==0?B(ee[0]):(B(ee[f[ae=32767+Ce]]),B(h[ae]));for(var He=63;He>0&&y[He]==0;)He--;if(He==0)return B(ve),te;for(var Ke,we=1;we<=He;){for(var oe=we;y[we]==0&&we<=He;)++we;var it=we-oe;if(it>=16){Ke=it>>4;for(var _e=1;_e<=Ke;++_e)B(xe);it&=15}ae=32767+y[we],B(ne[(it<<4)+f[ae]]),B(h[ae]),we++}return He!=63&&B(ve),te}function H($){$=Math.min(Math.max($,1),100),a!=$&&(function(W){for(var te=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ne=o((te[ee]*W+50)/100);ne=Math.min(Math.max(ne,1),255),l[A[ee]]=ne}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var xe=o((ae[ve]*W+50)/100);xe=Math.min(Math.max(xe,1),255),c[A[ve]]=xe}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,Ce=0;Ce<8;Ce++)for(var He=0;He<8;He++)d[Pe]=1/(l[A[Pe]]*Se[Ce]*Se[He]*8),u[Pe]=1/(c[A[Pe]]*Se[Ce]*Se[He]*8),Pe++}($<50?Math.floor(5e3/$):Math.floor(200-2*$)),a=$)}this.encode=function($,W){W&&H(W),v=new Array,g=0,b=7,Y(65496),Y(65504),Y(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),Y(1),Y(1),K(0),K(0),function(){Y(65499),Y(132),K(0);for(var xt=0;xt<64;xt++)K(l[xt]);K(1);for(var Ot=0;Ot<64;Ot++)K(c[Ot])}(),function(xt,Ot){Y(65472),Y(17),K(8),Y(Ot),Y(xt),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}($.width,$.height),function(){Y(65476),Y(418),K(0);for(var xt=0;xt<16;xt++)K(_[xt+1]);for(var Ot=0;Ot<=11;Ot++)K(k[Ot]);K(16);for(var Ze=0;Ze<16;Ze++)K(F[Ze+1]);for(var ut=0;ut<=161;ut++)K(I[ut]);K(1);for(var Et=0;Et<16;Et++)K(T[Et+1]);for(var kt=0;kt<=11;kt++)K(R[kt]);K(17);for(var Kt=0;Kt<16;Kt++)K(O[Kt+1]);for(var Vt=0;Vt<=161;Vt++)K(z[Vt])}(),Y(65498),Y(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var te=0,ee=0,ne=0;g=0,b=7,this.encode.displayName="_encode_";for(var ae,ve,xe,Se,Pe,Ce,He,Ke,we,oe=$.data,it=$.width,_e=$.height,qe=4*it,lt=0;lt<_e;){for(ae=0;ae<qe;){for(Pe=qe*lt+ae,He=-1,Ke=0,we=0;we<64;we++)Ce=Pe+(Ke=we>>3)*qe+(He=4*(7&we)),lt+Ke>=_e&&(Ce-=qe*(lt+1+Ke-_e)),ae+He>=qe&&(Ce-=ae+He-qe+4),ve=oe[Ce++],xe=oe[Ce++],Se=oe[Ce++],j[we]=(N[ve]+N[xe+256>>0]+N[Se+512>>0]>>16)-128,w[we]=(N[ve+768>>0]+N[xe+1024>>0]+N[Se+1280>>0]>>16)-128,C[we]=(N[ve+1280>>0]+N[xe+1536>>0]+N[Se+1792>>0]>>16)-128;te=J(j,d,te,e,s),ee=J(w,u,ee,r,i),ne=J(C,u,ne,r,i),ae+=32}lt+=8}if(b>=0){var vt=[];vt[1]=b+1,vt[0]=(1<<b+1)-1,B(vt)}return Y(65497),new Uint8Array(v)},t=t||50,function(){for(var $=String.fromCharCode,W=0;W<256;W++)E[W]=$(W)}(),e=q(_,k),r=q(T,R),s=q(F,I),i=q(O,z),function(){for(var $=1,W=2,te=1;te<=15;te++){for(var ee=$;ee<W;ee++)f[32767+ee]=te,h[32767+ee]=[],h[32767+ee][1]=te,h[32767+ee][0]=ee;for(var ne=-(W-1);ne<=-$;ne++)f[32767+ne]=te,h[32767+ne]=[],h[32767+ne][1]=te,h[32767+ne][0]=W-1+ne;$<<=1,W<<=1}}(),function(){for(var $=0;$<256;$++)N[$]=19595*$,N[$+256>>0]=38470*$,N[$+512>>0]=7471*$+32768,N[$+768>>0]=-11059*$,N[$+1024>>0]=-21709*$,N[$+1280>>0]=32768*$+8421375,N[$+1536>>0]=-27439*$,N[$+1792>>0]=-5329*$}(),H(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bO(t){function e(_){if(!_)throw Error("assert :P")}function r(_,k,F){for(var I=0;4>I;I++)if(_[k+I]!=F.charCodeAt(I))return!0;return!1}function s(_,k,F,I,T){for(var R=0;R<T;R++)_[k+R]=F[I+R]}function i(_,k,F,I){for(var T=0;T<I;T++)_[k+T]=F}function a(_){return new Int32Array(_)}function o(_,k){for(var F=[],I=0;I<_;I++)F.push(new k);return F}function l(_,k){var F=[];return function I(T,R,O){for(var z=O[R],q=0;q<z&&(T.push(O.length>R+1?[]:new k),!(O.length<R+1));q++)I(T[q],R+1,O)}(F,0,_),F}var c=function(){var _=this;function k(D,M){for(var G=1<<M-1>>>0;D&G;)G>>>=1;return G?(D&G-1)+G:D}function F(D,M,G,Q,se){e(!(Q%G));do D[M+(Q-=G)]=se;while(0<Q)}function I(D,M,G,Q,se){if(e(2328>=se),512>=se)var le=a(512);else if((le=a(se))==null)return 0;return function(de,fe,ge,ye,De,Be){var ze,Me,ct=fe,Xe=1<<ge,Oe=a(16),Re=a(16);for(e(De!=0),e(ye!=null),e(de!=null),e(0<ge),Me=0;Me<De;++Me){if(15<ye[Me])return 0;++Oe[ye[Me]]}if(Oe[0]==De)return 0;for(Re[1]=0,ze=1;15>ze;++ze){if(Oe[ze]>1<<ze)return 0;Re[ze+1]=Re[ze]+Oe[ze]}for(Me=0;Me<De;++Me)ze=ye[Me],0<ye[Me]&&(Be[Re[ze]++]=Me);if(Re[15]==1)return(ye=new T).g=0,ye.value=Be[0],F(de,ct,1,Xe,ye),Xe;var rt,Je=-1,at=Xe-1,It=0,Ct=1,Qt=1,Tt=1<<ge;for(Me=0,ze=1,De=2;ze<=ge;++ze,De<<=1){if(Ct+=Qt<<=1,0>(Qt-=Oe[ze]))return 0;for(;0<Oe[ze];--Oe[ze])(ye=new T).g=ze,ye.value=Be[Me++],F(de,ct+It,De,Tt,ye),It=k(It,ze)}for(ze=ge+1,De=2;15>=ze;++ze,De<<=1){if(Ct+=Qt<<=1,0>(Qt-=Oe[ze]))return 0;for(;0<Oe[ze];--Oe[ze]){if(ye=new T,(It&at)!=Je){for(ct+=Tt,rt=1<<(Je=ze)-ge;15>Je&&!(0>=(rt-=Oe[Je]));)++Je,rt<<=1;Xe+=Tt=1<<(rt=Je-ge),de[fe+(Je=It&at)].g=rt+ge,de[fe+Je].value=ct-fe-Je}ye.g=ze-ge,ye.value=Be[Me++],F(de,ct+(It>>ge),De,Tt,ye),It=k(It,ze)}}return Ct!=2*Re[15]-1?0:Xe}(D,M,G,Q,se,le)}function T(){this.value=this.g=0}function R(){this.value=this.g=0}function O(){this.G=o(5,T),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ss,R)}function z(D,M,G,Q){e(D!=null),e(M!=null),e(2147483648>Q),D.Ca=254,D.I=0,D.b=-8,D.Ka=0,D.oa=M,D.pa=G,D.Jd=M,D.Yc=G+Q,D.Zc=4<=Q?G+Q-4+1:G,ae(D)}function q(D,M){for(var G=0;0<M--;)G|=xe(D,128)<<M;return G}function B(D,M){var G=q(D,M);return ve(D)?-G:G}function K(D,M,G,Q){var se,le=0;for(e(D!=null),e(M!=null),e(4294967288>Q),D.Sb=Q,D.Ra=0,D.u=0,D.h=0,4<Q&&(Q=4),se=0;se<Q;++se)le+=M[G+se]<<8*se;D.Ra=le,D.bb=Q,D.oa=M,D.pa=G}function Y(D){for(;8<=D.u&&D.bb<D.Sb;)D.Ra>>>=8,D.Ra+=D.oa[D.pa+D.bb]<<Xu-8>>>0,++D.bb,D.u-=8;te(D)&&(D.h=1,D.u=0)}function J(D,M){if(e(0<=M),!D.h&&M<=Yu){var G=W(D)&Ku[M];return D.u+=M,Y(D),G}return D.h=1,D.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(D){return D.Ra>>>(D.u&Xu-1)>>>0}function te(D){return e(D.bb<=D.Sb),D.h||D.bb==D.Sb&&D.u>Xu}function ee(D,M){D.u=M,D.h=te(D)}function ne(D){D.u>=Zu&&(e(D.u>=Zu),Y(D))}function ae(D){e(D!=null&&D.oa!=null),D.pa<D.Zc?(D.I=(D.oa[D.pa++]|D.I<<8)>>>0,D.b+=8):(e(D!=null&&D.oa!=null),D.pa<D.Yc?(D.b+=8,D.I=D.oa[D.pa++]|D.I<<8):D.Ka?D.b=0:(D.I<<=8,D.b+=8,D.Ka=1))}function ve(D){return q(D,1)}function xe(D,M){var G=D.Ca;0>D.b&&ae(D);var Q=D.b,se=G*M>>>8,le=(D.I>>>Q>se)+0;for(le?(G-=se,D.I-=se+1<<Q>>>0):G=se+1,Q=G,se=0;256<=Q;)se+=8,Q>>=8;return Q=7^se+_i[Q],D.b-=Q,D.Ca=(G<<Q)-1,le}function Se(D,M,G){D[M+0]=G>>24&255,D[M+1]=G>>16&255,D[M+2]=G>>8&255,D[M+3]=G>>0&255}function Pe(D,M){return D[M+0]<<0|D[M+1]<<8}function Ce(D,M){return Pe(D,M)|D[M+2]<<16}function He(D,M){return Pe(D,M)|Pe(D,M+2)<<16}function Ke(D,M){var G=1<<M;return e(D!=null),e(0<M),D.X=a(G),D.X==null?0:(D.Mb=32-M,D.Xa=M,1)}function we(D,M){e(D!=null),e(M!=null),e(D.Xa==M.Xa),s(M.X,0,D.X,0,1<<M.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function it(D,M,G,Q){e(G!=null),e(Q!=null);var se=G[0],le=Q[0];return se==0&&(se=(D*le+M/2)/M),le==0&&(le=(M*se+D/2)/D),0>=se||0>=le?0:(G[0]=se,Q[0]=le,1)}function _e(D,M){return D+(1<<M)-1>>>M}function qe(D,M){return((4278255360&D)+(4278255360&M)>>>0&4278255360)+((16711935&D)+(16711935&M)>>>0&16711935)>>>0}function lt(D,M){_[M]=function(G,Q,se,le,de,fe,ge){var ye;for(ye=0;ye<de;++ye){var De=_[D](fe[ge+ye-1],se,le+ye);fe[ge+ye]=qe(G[Q+ye],De)}}}function vt(){this.ud=this.hd=this.jd=0}function xt(D,M){return((4278124286&(D^M))>>>1)+(D&M)>>>0}function Ot(D){return 0<=D&&256>D?D:0>D?0:255<D?255:void 0}function Ze(D,M){return Ot(D+(D-M+.5>>1))}function ut(D,M,G){return Math.abs(M-G)-Math.abs(D-G)}function Et(D,M,G,Q,se,le,de){for(Q=le[de-1],G=0;G<se;++G)le[de+G]=Q=qe(D[M+G],Q)}function kt(D,M,G,Q,se){var le;for(le=0;le<G;++le){var de=D[M+le],fe=de>>8&255,ge=16711935&(ge=(ge=16711935&de)+((fe<<16)+fe));Q[se+le]=(4278255360&de)+ge>>>0}}function Kt(D,M){M.jd=D>>0&255,M.hd=D>>8&255,M.ud=D>>16&255}function Vt(D,M,G,Q,se,le){var de;for(de=0;de<Q;++de){var fe=M[G+de],ge=fe>>>8,ye=fe,De=255&(De=(De=fe>>>16)+((D.jd<<24>>24)*(ge<<24>>24)>>>5));ye=255&(ye=(ye=ye+((D.hd<<24>>24)*(ge<<24>>24)>>>5))+((D.ud<<24>>24)*(De<<24>>24)>>>5)),se[le+de]=(4278255360&fe)+(De<<16)+ye}}function nr(D,M,G,Q,se){_[M]=function(le,de,fe,ge,ye,De,Be,ze,Me){for(ge=Be;ge<ze;++ge)for(Be=0;Be<Me;++Be)ye[De++]=se(fe[Q(le[de++])])},_[D]=function(le,de,fe,ge,ye,De,Be){var ze=8>>le.b,Me=le.Ea,ct=le.K[0],Xe=le.w;if(8>ze)for(le=(1<<le.b)-1,Xe=(1<<ze)-1;de<fe;++de){var Oe,Re=0;for(Oe=0;Oe<Me;++Oe)Oe&le||(Re=Q(ge[ye++])),De[Be++]=se(ct[Re&Xe]),Re>>=ze}else _["VP8LMapColor"+G](ge,ye,ct,Xe,De,Be,de,fe,Me)}}function Nt(D,M,G,Q,se){for(G=M+G;M<G;){var le=D[M++];Q[se++]=le>>16&255,Q[se++]=le>>8&255,Q[se++]=le>>0&255}}function Yr(D,M,G,Q,se){for(G=M+G;M<G;){var le=D[M++];Q[se++]=le>>16&255,Q[se++]=le>>8&255,Q[se++]=le>>0&255,Q[se++]=le>>24&255}}function wr(D,M,G,Q,se){for(G=M+G;M<G;){var le=(de=D[M++])>>16&240|de>>12&15,de=de>>0&240|de>>28&15;Q[se++]=le,Q[se++]=de}}function xs(D,M,G,Q,se){for(G=M+G;M<G;){var le=(de=D[M++])>>16&248|de>>13&7,de=de>>5&224|de>>3&31;Q[se++]=le,Q[se++]=de}}function Xr(D,M,G,Q,se){for(G=M+G;M<G;){var le=D[M++];Q[se++]=le>>0&255,Q[se++]=le>>8&255,Q[se++]=le>>16&255}}function an(D,M,G,Q,se,le){if(le==0)for(G=M+G;M<G;)Se(Q,((le=D[M++])[0]>>24|le[1]>>8&65280|le[2]<<8&16711680|le[3]<<24)>>>0),se+=32;else s(Q,se,D,M,G)}function di(D,M){_[M][0]=_[D+"0"],_[M][1]=_[D+"1"],_[M][2]=_[D+"2"],_[M][3]=_[D+"3"],_[M][4]=_[D+"4"],_[M][5]=_[D+"5"],_[M][6]=_[D+"6"],_[M][7]=_[D+"7"],_[M][8]=_[D+"8"],_[M][9]=_[D+"9"],_[M][10]=_[D+"10"],_[M][11]=_[D+"11"],_[M][12]=_[D+"12"],_[M][13]=_[D+"13"],_[M][14]=_[D+"0"],_[M][15]=_[D+"0"]}function Rr(D){return D==nh||D==qd||D==Rf||D==Lf}function ho(){this.eb=[],this.size=this.A=this.fb=0}function Ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ui(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ho,this.f.kb=new Ln,this.sd=null}function Hi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(D){return alert("todo:WebPSamplerProcessPlane"),D.T}function Zr(D,M){var G=D.T,Q=M.ba.f.RGBA,se=Q.eb,le=Q.fb+D.ka*Q.A,de=Ji[M.ba.S],fe=D.y,ge=D.O,ye=D.f,De=D.N,Be=D.ea,ze=D.W,Me=M.cc,ct=M.dc,Xe=M.Mc,Oe=M.Nc,Re=D.ka,rt=D.ka+D.T,Je=D.U,at=Je+1>>1;for(Re==0?de(fe,ge,null,null,ye,De,Be,ze,ye,De,Be,ze,se,le,null,null,Je):(de(M.ec,M.fc,fe,ge,Me,ct,Xe,Oe,ye,De,Be,ze,se,le-Q.A,se,le,Je),++G);Re+2<rt;Re+=2)Me=ye,ct=De,Xe=Be,Oe=ze,De+=D.Rc,ze+=D.Rc,le+=2*Q.A,de(fe,(ge+=2*D.fa)-D.fa,fe,ge,Me,ct,Xe,Oe,ye,De,Be,ze,se,le-Q.A,se,le,Je);return ge+=D.fa,D.j+rt<D.o?(s(M.ec,M.fc,fe,ge,Je),s(M.cc,M.dc,ye,De,at),s(M.Mc,M.Nc,Be,ze,at),G--):1&rt||de(fe,ge,null,null,ye,De,Be,ze,ye,De,Be,ze,se,le+Q.A,null,null,Je),G}function yc(D,M,G){var Q=D.F,se=[D.J];if(Q!=null){var le=D.U,de=M.ba.S,fe=de==Of||de==Rf;M=M.ba.f.RGBA;var ge=[0],ye=D.ka;ge[0]=D.T,D.Kb&&(ye==0?--ge[0]:(--ye,se[0]-=D.width),D.j+D.ka+D.T==D.o&&(ge[0]=D.o-D.j-ye));var De=M.eb;ye=M.fb+ye*M.A,D=pn(Q,se[0],D.width,le,ge,De,ye+(fe?0:3),M.A),e(G==ge),D&&Rr(de)&&Zi(De,ye,fe,le,ge,M.A)}return 0}function Hs(D){var M=D.ma,G=M.ba.S,Q=11>G,se=G==Lc||G==kf||G==Of||G==Cn||G==12||Rr(G);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Wu(M.Oa,D,se?11:12))return 0;if(se&&Rr(G)&&ft(),D.da)alert("todo:use_scaling");else{if(Q){if(M.Ib=gr,D.Kb){if(G=D.U+1>>1,M.memory=a(D.U+2*G),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+D.U,M.Mc=M.cc,M.Nc=M.dc+G,M.Ib=Zr,ft()}}else alert("todo:EmitYUV");se&&(M.Jb=yc,Q&&$e())}if(Q&&!ei){for(D=0;256>D;++D)ea[D]=89858*(D-128)+wo>>Ml,ta[D]=-22014*(D-128)+wo,oh[D]=-45773*(D-128),Wd[D]=113618*(D-128)+wo>>Ml;for(D=gn;D<yn;++D)M=76283*(D-16)+wo>>Ml,pp[D-gn]=ba(M,255),uy[D-gn]=ba(M+8>>4,15);ei=1}return 1}function Fa(D){var M=D.ma,G=D.U,Q=D.T;return e(!(1&D.ka)),0>=G||0>=Q?0:(G=M.Ib(D,M),M.Jb!=null&&M.Jb(D,M,G),M.Dc+=G,1)}function fo(D){D.ma.memory=null}function Zt(D,M,G,Q){return J(D,8)!=47?0:(M[0]=J(D,14)+1,G[0]=J(D,14)+1,Q[0]=J(D,1),J(D,3)!=0?0:!D.h)}function ga(D,M){if(4>D)return D+1;var G=D-2>>1;return(2+(1&D)<<G)+J(M,G)+1}function Wi(D,M){return 120<M?M-120:1<=(G=((G=Dw[M-1])>>4)*D+(8-(15&G)))?G:1;var G}function Gi(D,M,G){var Q=W(G),se=D[M+=255&Q].g-8;return 0<se&&(ee(G,G.u+8),Q=W(G),M+=D[M].value,M+=Q&(1<<se)-1),ee(G,G.u+D[M].g),D[M].value}function Vn(D,M,G){return G.g+=D.g,G.value+=D.value<<M>>>0,e(8>=G.g),D.g}function Hn(D,M,G){var Q=D.xc;return e((M=Q==0?0:D.vc[D.md*(G>>Q)+(M>>Q)])<D.Wb),D.Ya[M]}function hi(D,M,G,Q){var se=D.ab,le=D.c*M,de=D.C;M=de+M;var fe=G,ge=Q;for(Q=D.Ta,G=D.Ua;0<se--;){var ye=D.gc[se],De=de,Be=M,ze=fe,Me=ge,ct=(ge=Q,fe=G,ye.Ea);switch(e(De<Be),e(Be<=ye.nc),ye.hc){case 2:dp(ze,Me,(Be-De)*ct,ge,fe);break;case 0:var Xe=De,Oe=Be,Re=ge,rt=fe,Je=(Tt=ye).Ea;Xe==0&&(Ld(ze,Me,null,null,1,Re,rt),Et(ze,Me+1,0,0,Je-1,Re,rt+1),Me+=Je,rt+=Je,++Xe);for(var at=1<<Tt.b,It=at-1,Ct=_e(Je,Tt.b),Qt=Tt.K,Tt=Tt.w+(Xe>>Tt.b)*Ct;Xe<Oe;){var Hr=Qt,Wr=Tt,zr=1;for(Tl(ze,Me,Re,rt-Je,1,Re,rt);zr<Je;){var Tr=(zr&~It)+at;Tr>Je&&(Tr=Je),(0,Jo[Hr[Wr++]>>8&15])(ze,Me+ +zr,Re,rt+zr-Je,Tr-zr,Re,rt+zr),zr=Tr}Me+=Je,rt+=Je,++Xe&It||(Tt+=Ct)}Be!=ye.nc&&s(ge,fe-ct,ge,fe+(Be-De-1)*ct,ct);break;case 1:for(ct=ze,Oe=Me,Je=(ze=ye.Ea)-(rt=ze&~(Re=(Me=1<<ye.b)-1)),Xe=_e(ze,ye.b),at=ye.K,ye=ye.w+(De>>ye.b)*Xe;De<Be;){for(It=at,Ct=ye,Qt=new vt,Tt=Oe+rt,Hr=Oe+ze;Oe<Tt;)Kt(It[Ct++],Qt),kc(Qt,ct,Oe,Me,ge,fe),Oe+=Me,fe+=Me;Oe<Hr&&(Kt(It[Ct++],Qt),kc(Qt,ct,Oe,Je,ge,fe),Oe+=Je,fe+=Je),++De&Re||(ye+=Xe)}break;case 3:if(ze==ge&&Me==fe&&0<ye.b){for(Oe=ge,ze=ct=fe+(Be-De)*ct-(rt=(Be-De)*_e(ye.Ea,ye.b)),Me=ge,Re=fe,Xe=[],rt=(Je=rt)-1;0<=rt;--rt)Xe[rt]=Me[Re+rt];for(rt=Je-1;0<=rt;--rt)Oe[ze+rt]=Xe[rt];Ii(ye,De,Be,ge,ct,ge,fe)}else Ii(ye,De,Be,ze,Me,ge,fe)}fe=Q,ge=G}ge!=G&&s(Q,G,fe,ge,le)}function bc(D,M){var G=D.V,Q=D.Ba+D.c*D.C,se=M-D.C;if(e(M<=D.l.o),e(16>=se),0<se){var le=D.l,de=D.Ta,fe=D.Ua,ge=le.width;if(hi(D,se,G,Q),se=fe=[fe],e((G=D.C)<(Q=M)),e(le.v<le.va),Q>le.o&&(Q=le.o),G<le.j){var ye=le.j-G;G=le.j,se[0]+=ye*ge}if(G>=Q?G=0:(se[0]+=4*le.v,le.ka=G-le.j,le.U=le.va-le.v,le.T=Q-G,G=1),G){if(fe=fe[0],11>(G=D.ca).S){var De=G.f.RGBA,Be=(Q=G.S,se=le.U,le=le.T,ye=De.eb,De.A),ze=le;for(De=De.fb+D.Ma*De.A;0<ze--;){var Me=de,ct=fe,Xe=se,Oe=ye,Re=De;switch(Q){case up:Di(Me,ct,Xe,Oe,Re);break;case Lc:mi(Me,ct,Xe,Oe,Re);break;case nh:mi(Me,ct,Xe,Oe,Re),Zi(Oe,Re,0,Xe,1,0);break;case ay:Il(Me,ct,Xe,Oe,Re);break;case kf:an(Me,ct,Xe,Oe,Re,1);break;case qd:an(Me,ct,Xe,Oe,Re,1),Zi(Oe,Re,0,Xe,1,0);break;case Of:an(Me,ct,Xe,Oe,Re,0);break;case Rf:an(Me,ct,Xe,Oe,Re,0),Zi(Oe,Re,1,Xe,1,0);break;case Cn:Oc(Me,ct,Xe,Oe,Re);break;case Lf:Oc(Me,ct,Xe,Oe,Re),An(Oe,Re,Xe,1,0);break;case hp:_l(Me,ct,Xe,Oe,Re);break;default:e(0)}fe+=ge,De+=Be}D.Ma+=le}else alert("todo:EmitRescaledRowsYUVA");e(D.Ma<=G.height)}}D.C=M,e(D.C<=D.i)}function Cl(D){var M;if(0<D.ua)return 0;for(M=0;M<D.Wb;++M){var G=D.Ya[M].G,Q=D.Ya[M].H;if(0<G[1][Q[1]+0].g||0<G[2][Q[2]+0].g||0<G[3][Q[3]+0].g)return 0}return 1}function mo(D,M,G,Q,se,le){if(D.Z!=0){var de=D.qd,fe=D.rd;for(e(gi[D.Z]!=null);M<G;++M)gi[D.Z](de,fe,Q,se,Q,se,le),de=Q,fe=se,se+=le;D.qd=de,D.rd=fe}}function po(D,M){var G=D.l.ma,Q=G.Z==0||G.Z==1?D.l.j:D.C;if(Q=D.C<Q?Q:D.C,e(M<=D.l.o),M>Q){var se=D.l.width,le=G.ca,de=G.tb+se*Q,fe=D.V,ge=D.Ba+D.c*Q,ye=D.gc;e(D.ab==1),e(ye[0].hc==3),_f(ye[0],Q,M,fe,ge,le,de),mo(G,Q,M,le,de,se)}D.C=D.Ma=M}function Qs(D,M,G,Q,se,le,de){var fe=D.$/Q,ge=D.$%Q,ye=D.m,De=D.s,Be=G+D.$,ze=Be;se=G+Q*se;var Me=G+Q*le,ct=280+De.ua,Xe=D.Pb?fe:16777216,Oe=0<De.ua?De.Wa:null,Re=De.wc,rt=Be<Me?Hn(De,ge,fe):null;e(D.C<le),e(Me<=se);var Je=!1;e:for(;;){for(;Je||Be<Me;){var at=0;if(fe>=Xe){var It=Be-G;e((Xe=D).Pb),Xe.wd=Xe.m,Xe.xd=It,0<Xe.s.ua&&we(Xe.s.Wa,Xe.s.vb),Xe=fe+mp}if(ge&Re||(rt=Hn(De,ge,fe)),e(rt!=null),rt.Qb&&(M[Be]=rt.qb,Je=!0),!Je)if(ne(ye),rt.jc){at=ye,It=M;var Ct=Be,Qt=rt.pd[W(at)&ss-1];e(rt.jc),256>Qt.g?(ee(at,at.u+Qt.g),It[Ct]=Qt.value,at=0):(ee(at,at.u+Qt.g-256),e(256<=Qt.value),at=Qt.value),at==0&&(Je=!0)}else at=Gi(rt.G[0],rt.H[0],ye);if(ye.h)break;if(Je||256>at){if(!Je)if(rt.nd)M[Be]=(rt.qb|at<<8)>>>0;else{if(ne(ye),Je=Gi(rt.G[1],rt.H[1],ye),ne(ye),It=Gi(rt.G[2],rt.H[2],ye),Ct=Gi(rt.G[3],rt.H[3],ye),ye.h)break;M[Be]=(Ct<<24|Je<<16|at<<8|It)>>>0}if(Je=!1,++Be,++ge>=Q&&(ge=0,++fe,de!=null&&fe<=le&&!(fe%16)&&de(D,fe),Oe!=null))for(;ze<Be;)at=M[ze++],Oe.X[(506832829*at&4294967295)>>>Oe.Mb]=at}else if(280>at){if(at=ga(at-256,ye),It=Gi(rt.G[4],rt.H[4],ye),ne(ye),It=Wi(Q,It=ga(It,ye)),ye.h)break;if(Be-G<It||se-Be<at)break e;for(Ct=0;Ct<at;++Ct)M[Be+Ct]=M[Be+Ct-It];for(Be+=at,ge+=at;ge>=Q;)ge-=Q,++fe,de!=null&&fe<=le&&!(fe%16)&&de(D,fe);if(e(Be<=se),ge&Re&&(rt=Hn(De,ge,fe)),Oe!=null)for(;ze<Be;)at=M[ze++],Oe.X[(506832829*at&4294967295)>>>Oe.Mb]=at}else{if(!(at<ct))break e;for(Je=at-280,e(Oe!=null);ze<Be;)at=M[ze++],Oe.X[(506832829*at&4294967295)>>>Oe.Mb]=at;at=Be,e(!(Je>>>(It=Oe).Xa)),M[at]=It.X[Je],Je=!0}Je||e(ye.h==te(ye))}if(D.Pb&&ye.h&&Be<se)e(D.m.h),D.a=5,D.m=D.wd,D.$=D.xd,0<D.s.ua&&we(D.s.vb,D.s.Wa);else{if(ye.h)break e;de?.(D,fe>le?le:fe),D.a=0,D.$=Be-G}return 1}return D.a=3,0}function go(D){e(D!=null),D.vc=null,D.yc=null,D.Ya=null;var M=D.Wa;M!=null&&(M.X=null),D.vb=null,e(D!=null)}function va(){var D=new vv;return D==null?null:(D.a=0,D.xb=ih,di("Predictor","VP8LPredictors"),di("Predictor","VP8LPredictors_C"),di("PredictorAdd","VP8LPredictorsAdd"),di("PredictorAdd","VP8LPredictorsAdd_C"),dp=kt,kc=Vt,Di=Nt,mi=Yr,Oc=wr,_l=xs,Il=Xr,_.VP8LMapColor32b=Qu,_.VP8LMapColor8b=Ju,D)}function Go(D,M,G,Q,se){var le=1,de=[D],fe=[M],ge=Q.m,ye=Q.s,De=null,Be=0;e:for(;;){if(G)for(;le&&J(ge,1);){var ze=de,Me=fe,ct=Q,Xe=1,Oe=ct.m,Re=ct.gc[ct.ab],rt=J(Oe,2);if(ct.Oc&1<<rt)le=0;else{switch(ct.Oc|=1<<rt,Re.hc=rt,Re.Ea=ze[0],Re.nc=Me[0],Re.K=[null],++ct.ab,e(4>=ct.ab),rt){case 0:case 1:Re.b=J(Oe,3)+2,Xe=Go(_e(Re.Ea,Re.b),_e(Re.nc,Re.b),0,ct,Re.K),Re.K=Re.K[0];break;case 3:var Je,at=J(Oe,8)+1,It=16<at?0:4<at?1:2<at?2:3;if(ze[0]=_e(Re.Ea,It),Re.b=It,Je=Xe=Go(at,1,0,ct,Re.K)){var Ct,Qt=at,Tt=Re,Hr=1<<(8>>Tt.b),Wr=a(Hr);if(Wr==null)Je=0;else{var zr=Tt.K[0],Tr=Tt.w;for(Wr[0]=Tt.K[0][0],Ct=1;Ct<1*Qt;++Ct)Wr[Ct]=qe(zr[Tr+Ct],Wr[Ct-1]);for(;Ct<4*Hr;++Ct)Wr[Ct]=0;Tt.K[0]=null,Tt.K[0]=Wr,Je=1}}Xe=Je;break;case 2:break;default:e(0)}le=Xe}}if(de=de[0],fe=fe[0],le&&J(ge,1)&&!(le=1<=(Be=J(ge,4))&&11>=Be)){Q.a=3;break e}var vn;if(vn=le)t:{var bn,pr,Yn,Ri=Q,ds=de,Is=fe,on=Be,vi=G,xi=Ri.m,Xn=Ri.s,Ds=[null],ti=1,ra=0,Ha=ly[on];r:for(;;){if(vi&&J(xi,1)){var Zn=J(xi,3)+2,js=_e(ds,Zn),Na=_e(Is,Zn),$c=js*Na;if(!Go(js,Na,0,Ri,Ds))break r;for(Ds=Ds[0],Xn.xc=Zn,bn=0;bn<$c;++bn){var $l=Ds[bn]>>8&65535;Ds[bn]=$l,$l>=ti&&(ti=$l+1)}}if(xi.h)break r;for(pr=0;5>pr;++pr){var ln=Ud[pr];!pr&&0<on&&(ln+=1<<on),ra<ln&&(ra=ln)}var sl=o(ti*Ha,T),gp=ti,Nv=o(gp,O);if(Nv==null)var Wa=null;else e(65536>=gp),Wa=Nv;var Ga=a(ra);if(Wa==null||Ga==null||sl==null){Ri.a=1;break r}var Kd=sl;for(bn=Yn=0;bn<ti;++bn){var Ka=Wa[bn],Bl=Ka.G,Yd=Ka.H,lh=0,Sa=1,ch=0;for(pr=0;5>pr;++pr){ln=Ud[pr],Bl[pr]=Kd,Yd[pr]=Yn,!pr&&0<on&&(ln+=1<<on);s:{var Bc,zl=ln,dh=Ri,il=Ga,fy=Kd,Sv=Yn,Dn=0,No=dh.m,Av=J(No,1);if(i(il,0,0,zl),Av){var Cv=J(No,1)+1,vp=J(No,1),xp=J(No,vp==0?1:8);il[xp]=1,Cv==2&&(il[xp=J(No,8)]=1);var al=1}else{var Mn=a(19),ws=J(No,4)+4;if(19<ws){dh.a=3;var us=0;break s}for(Bc=0;Bc<ws;++Bc)Mn[Iw[Bc]]=J(No,3);var uh=void 0,ql=void 0,hh=dh,Mw=Mn,ks=zl,yp=il,zf=0,ol=hh.m,So=8,Aa=o(128,T);n:for(;I(Aa,0,7,Mw,19);){if(J(ol,1)){var qf=2+2*J(ol,3);if((uh=2+J(ol,qf))>ks)break n}else uh=ks;for(ql=0;ql<ks&&uh--;){ne(ol);var bp=Aa[0+(127&W(ol))];ee(ol,ol.u+bp.g);var zc=bp.value;if(16>zc)yp[ql++]=zc,zc!=0&&(So=zc);else{var my=zc==16,Ev=zc-16,py=fp[Ev],Pv=J(ol,Mf[Ev])+py;if(ql+Pv>ks)break n;for(var gy=my?So:0;0<Pv--;)yp[ql++]=gy}}zf=1;break n}zf||(hh.a=3),al=zf}(al=al&&!No.h)&&(Dn=I(fy,Sv,8,il,zl)),al&&Dn!=0?us=Dn:(dh.a=3,us=0)}if(us==0)break r;if(Sa&&oy[pr]==1&&(Sa=Kd[Yn].g==0),lh+=Kd[Yn].g,Yn+=us,3>=pr){var fh,jp=Ga[0];for(fh=1;fh<ln;++fh)Ga[fh]>jp&&(jp=Ga[fh]);ch+=jp}}if(Ka.nd=Sa,Ka.Qb=0,Sa&&(Ka.qb=(Bl[3][Yd[3]+0].value<<24|Bl[1][Yd[1]+0].value<<16|Bl[2][Yd[2]+0].value)>>>0,lh==0&&256>Bl[0][Yd[0]+0].value&&(Ka.Qb=1,Ka.qb+=Bl[0][Yd[0]+0].value<<8)),Ka.jc=!Ka.Qb&&6>ch,Ka.jc){var Uf,Ca=Ka;for(Uf=0;Uf<ss;++Uf){var Ul=Uf,Ao=Ca.pd[Ul],Xd=Ca.G[0][Ca.H[0]+Ul];256<=Xd.value?(Ao.g=Xd.g+256,Ao.value=Xd.value):(Ao.g=0,Ao.value=0,Ul>>=Vn(Xd,8,Ao),Ul>>=Vn(Ca.G[1][Ca.H[1]+Ul],16,Ao),Ul>>=Vn(Ca.G[2][Ca.H[2]+Ul],0,Ao),Vn(Ca.G[3][Ca.H[3]+Ul],24,Ao))}}}Xn.vc=Ds,Xn.Wb=ti,Xn.Ya=Wa,Xn.yc=sl,vn=1;break t}vn=0}if(!(le=vn)){Q.a=3;break e}if(0<Be){if(ye.ua=1<<Be,!Ke(ye.Wa,Be)){Q.a=1,le=0;break e}}else ye.ua=0;var wp=Q,Np=de,vy=fe,Sp=wp.s,Ap=Sp.xc;if(wp.c=Np,wp.i=vy,Sp.md=_e(Np,Ap),Sp.wc=Ap==0?-1:(1<<Ap)-1,G){Q.xb=nl;break e}if((De=a(de*fe))==null){Q.a=1,le=0;break e}le=(le=Qs(Q,De,0,de,fe,fe,null))&&!ge.h;break e}return le?(se!=null?se[0]=De:(e(De==null),e(G)),Q.$=0,G||go(ye)):go(ye),le}function jc(D,M){var G=D.c*D.i,Q=G+M+16*M;return e(D.c<=M),D.V=a(Q),D.V==null?(D.Ta=null,D.Ua=0,D.a=1,0):(D.Ta=D.V,D.Ua=D.Ba+G+M,1)}function bd(D,M){var G=D.C,Q=M-G,se=D.V,le=D.Ba+D.c*G;for(e(M<=D.l.o);0<Q;){var de=16<Q?16:Q,fe=D.l.ma,ge=D.l.width,ye=ge*de,De=fe.ca,Be=fe.tb+ge*G,ze=D.Ta,Me=D.Ua;hi(D,de,se,le),is(ze,Me,De,Be,ye),mo(fe,G,G+de,De,Be,ge),Q-=de,se+=de*D.c,G+=de}e(G==M),D.C=D.Ma=M}function jd(){this.ub=this.yd=this.td=this.Rb=0}function wd(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _u(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function tp(){this.Yb=function(){var D=[];return function M(G,Q,se){for(var le=se[Q],de=0;de<le&&(G.push(se.length>Q+1?[]:0),!(se.length<Q+1));de++)M(G[de],Q+1,se)}(D,0,[3,11]),D}()}function Wn(){this.jb=a(3),this.Wc=l([4,8],tp),this.Xc=l([4,17],tp)}function mv(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function wc(){this.ld=this.La=this.dd=this.tc=0}function xf(){this.Na=this.la=0}function Iu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rp(){this.uc=this.M=this.Nb=0,this.wa=Array(new wc),this.Y=0,this.ya=Array(new yf),this.aa=0,this.l=new Du}function Nd(){this.y=a(16),this.f=a(8),this.ea=a(8)}function $a(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new jd,this.Kc=new wd,this.ed=new mv,this.Qa=new _u,this.Ic=this.$c=this.Aa=0,this.D=new rp,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,Iu),this.Pa=new Wn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nd),this.Hd=0,this.rb=Array(new xf),this.sb=0,this.wa=Array(new wc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yf),this.L=this.aa=0,this.gd=l([4,2],wc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Du(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xa(){var D=new $a;return D!=null&&(D.a=0,D.sc="OK",D.cb=0,D.Xb=0,Vd||(Vd=Sd)),D}function cs(D,M,G){return D.a==0&&(D.a=M,D.sc=G,D.cb=0),0}function np(D,M,G){return 3<=G&&D[M+0]==157&&D[M+1]==1&&D[M+2]==42}function sp(D,M){if(D==null)return 0;if(D.a=0,D.sc="OK",M==null)return cs(D,2,"null VP8Io passed to VP8GetHeaders()");var G=M.data,Q=M.w,se=M.ha;if(4>se)return cs(D,7,"Truncated header.");var le=G[Q+0]|G[Q+1]<<8|G[Q+2]<<16,de=D.Od;if(de.Rb=!(1&le),de.td=le>>1&7,de.yd=le>>4&1,de.ub=le>>5,3<de.td)return cs(D,3,"Incorrect keyframe parameters.");if(!de.yd)return cs(D,4,"Frame not displayable.");Q+=3,se-=3;var fe=D.Kc;if(de.Rb){if(7>se)return cs(D,7,"cannot parse picture header");if(!np(G,Q,se))return cs(D,3,"Bad code word");fe.c=16383&(G[Q+4]<<8|G[Q+3]),fe.Td=G[Q+4]>>6,fe.i=16383&(G[Q+6]<<8|G[Q+5]),fe.Ud=G[Q+6]>>6,Q+=7,se-=7,D.za=fe.c+15>>4,D.Ub=fe.i+15>>4,M.width=fe.c,M.height=fe.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((le=D.Pa).jb,0,255,le.jb.length),e((le=D.Qa)!=null),le.Cb=0,le.Bb=0,le.Fb=1,i(le.Zb,0,0,le.Zb.length),i(le.Lb,0,0,le.Lb)}if(de.ub>se)return cs(D,7,"bad partition length");z(le=D.m,G,Q,de.ub),Q+=de.ub,se-=de.ub,de.Rb&&(fe.Ld=ve(le),fe.Kd=ve(le)),fe=D.Qa;var ge,ye=D.Pa;if(e(le!=null),e(fe!=null),fe.Cb=ve(le),fe.Cb){if(fe.Bb=ve(le),ve(le)){for(fe.Fb=ve(le),ge=0;4>ge;++ge)fe.Zb[ge]=ve(le)?B(le,7):0;for(ge=0;4>ge;++ge)fe.Lb[ge]=ve(le)?B(le,6):0}if(fe.Bb)for(ge=0;3>ge;++ge)ye.jb[ge]=ve(le)?q(le,8):255}else fe.Bb=0;if(le.Ka)return cs(D,3,"cannot parse segment header");if((fe=D.ed).zd=ve(le),fe.Tb=q(le,6),fe.wb=q(le,3),fe.Pc=ve(le),fe.Pc&&ve(le)){for(ye=0;4>ye;++ye)ve(le)&&(fe.vd[ye]=B(le,6));for(ye=0;4>ye;++ye)ve(le)&&(fe.od[ye]=B(le,6))}if(D.L=fe.Tb==0?0:fe.zd?1:2,le.Ka)return cs(D,3,"cannot parse filter header");var De=se;if(se=ge=Q,Q=ge+De,fe=De,D.Xb=(1<<q(D.m,2))-1,De<3*(ye=D.Xb))G=7;else{for(ge+=3*ye,fe-=3*ye,De=0;De<ye;++De){var Be=G[se+0]|G[se+1]<<8|G[se+2]<<16;Be>fe&&(Be=fe),z(D.Jc[+De],G,ge,Be),ge+=Be,fe-=Be,se+=3}z(D.Jc[+ye],G,ge,fe),G=ge<Q?0:5}if(G!=0)return cs(D,G,"cannot parse partitions");for(G=q(ge=D.m,7),se=ve(ge)?B(ge,4):0,Q=ve(ge)?B(ge,4):0,fe=ve(ge)?B(ge,4):0,ye=ve(ge)?B(ge,4):0,ge=ve(ge)?B(ge,4):0,De=D.Qa,Be=0;4>Be;++Be){if(De.Cb){var ze=De.Zb[Be];De.Fb||(ze+=G)}else{if(0<Be){D.pb[Be]=D.pb[0];continue}ze=G}var Me=D.pb[Be];Me.Sc[0]=sh[ba(ze+se,127)],Me.Sc[1]=Ff[ba(ze+0,127)],Me.Eb[0]=2*sh[ba(ze+Q,127)],Me.Eb[1]=101581*Ff[ba(ze+fe,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=sh[ba(ze+ye,117)],Me.Qc[1]=Ff[ba(ze+ge,127)],Me.lc=ze+ge}if(!de.Rb)return cs(D,4,"Not a key frame.");for(ve(le),de=D.Pa,G=0;4>G;++G){for(se=0;8>se;++se)for(Q=0;3>Q;++Q)for(fe=0;11>fe;++fe)ye=xe(le,Ow[G][se][Q][fe])?q(le,8):dy[G][se][Q][fe],de.Wc[G][se].Yb[Q][fe]=ye;for(se=0;17>se;++se)de.Xc[G][se]=de.Wc[G][bv[se]]}return D.kc=ve(le),D.kc&&(D.Bd=q(le,8)),D.cb=1}function Sd(D,M,G,Q,se,le,de){var fe=M[se].Yb[G];for(G=0;16>se;++se){if(!xe(D,fe[G+0]))return se;for(;!xe(D,fe[G+1]);)if(fe=M[++se].Yb[0],G=0,se==16)return 16;var ge=M[se+1].Yb;if(xe(D,fe[G+2])){var ye=D,De=0;if(xe(ye,(ze=fe)[(Be=G)+3]))if(xe(ye,ze[Be+6])){for(fe=0,Be=2*(De=xe(ye,ze[Be+8]))+(ze=xe(ye,ze[Be+9+De])),De=0,ze=xv[Be];ze[fe];++fe)De+=De+xe(ye,ze[fe]);De+=3+(8<<Be)}else xe(ye,ze[Be+7])?(De=7+2*xe(ye,165),De+=xe(ye,145)):De=5+xe(ye,159);else De=xe(ye,ze[Be+4])?3+xe(ye,ze[Be+5]):2;fe=ge[2]}else De=1,fe=ge[1];ge=de+yv[se],0>(ye=D).b&&ae(ye);var Be,ze=ye.b,Me=(Be=ye.Ca>>1)-(ye.I>>ze)>>31;--ye.b,ye.Ca+=Me,ye.Ca|=1,ye.I-=(Be+1&Me)<<ze,le[ge]=((De^Me)-Me)*Q[(0<se)+0]}return 16}function Nc(D){var M=D.rb[D.sb-1];M.la=0,M.Na=0,i(D.zc,0,0,D.zc.length),D.ja=0}function Ad(D,M){if(D==null)return 0;if(M==null)return cs(D,2,"NULL VP8Io parameter in VP8Decode().");if(!D.cb&&!sp(D,M))return 0;if(e(D.cb),M.ac==null||M.ac(M)){M.ob&&(D.L=0);var G=Gd[D.L];if(D.L==2?(D.yb=0,D.zb=0):(D.yb=M.v-G>>4,D.zb=M.j-G>>4,0>D.yb&&(D.yb=0),0>D.zb&&(D.zb=0)),D.Va=M.o+15+G>>4,D.Hb=M.va+15+G>>4,D.Hb>D.za&&(D.Hb=D.za),D.Va>D.Ub&&(D.Va=D.Ub),0<D.L){var Q=D.ed;for(G=0;4>G;++G){var se;if(D.Qa.Cb){var le=D.Qa.Lb[G];D.Qa.Fb||(le+=Q.Tb)}else le=Q.Tb;for(se=0;1>=se;++se){var de=D.gd[G][se],fe=le;if(Q.Pc&&(fe+=Q.vd[0],se&&(fe+=Q.od[0])),0<(fe=0>fe?0:63<fe?63:fe)){var ge=fe;0<Q.wb&&(ge=4<Q.wb?ge>>2:ge>>1)>9-Q.wb&&(ge=9-Q.wb),1>ge&&(ge=1),de.dd=ge,de.tc=2*fe+ge,de.ld=40<=fe?2:15<=fe?1:0}else de.tc=0;de.La=se}}}G=0}else cs(D,6,"Frame setup failed"),G=D.a;if(G=G==0){if(G){D.$c=0,0<D.Aa||(D.Ic=Fl);e:{G=D.Ic,Q=4*(ge=D.za);var ye=32*ge,De=ge+1,Be=0<D.L?ge*(0<D.Aa?2:1):0,ze=(D.Aa==2?2:1)*ge;if((de=Q+832+(se=3*(16*G+Gd[D.L])/2*ye)+(le=D.Fa!=null&&0<D.Fa.length?D.Kc.c*D.Kc.i:0))!=de)G=0;else{if(de>D.Vb){if(D.Vb=0,D.Ec=a(de),D.Fc=0,D.Ec==null){G=cs(D,1,"no memory during frame initialization.");break e}D.Vb=de}de=D.Ec,fe=D.Fc,D.Ac=de,D.Bc=fe,fe+=Q,D.Gd=o(ye,Nd),D.Hd=0,D.rb=o(De+1,xf),D.sb=1,D.wa=Be?o(Be,wc):null,D.Y=0,D.D.Nb=0,D.D.wa=D.wa,D.D.Y=D.Y,0<D.Aa&&(D.D.Y+=ge),e(!0),D.oc=de,D.pc=fe,fe+=832,D.ya=o(ze,yf),D.aa=0,D.D.ya=D.ya,D.D.aa=D.aa,D.Aa==2&&(D.D.aa+=ge),D.R=16*ge,D.B=8*ge,ge=(ye=Gd[D.L])*D.R,ye=ye/2*D.B,D.sa=de,D.ta=fe+ge,D.qa=D.sa,D.ra=D.ta+16*G*D.R+ye,D.Ha=D.qa,D.Ia=D.ra+8*G*D.B+ye,D.$c=0,fe+=se,D.mb=le?de:null,D.nb=le?fe:null,e(fe+le<=D.Fc+D.Vb),Nc(D),i(D.Ac,D.Bc,0,Q),G=1}}if(G){if(M.ka=0,M.y=D.sa,M.O=D.ta,M.f=D.qa,M.N=D.ra,M.ea=D.Ha,M.Vd=D.Ia,M.fa=D.R,M.Rc=D.B,M.F=null,M.J=0,!Df){for(G=-255;255>=G;++G)bs[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)tl[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)th[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)zd[255+G]=0>G?0:255<G?255:G;Df=1}eh=Qr,Dl=jf,kl=Sc,pi=pv,ja=Ou,Jr=bf,Md=zu,If=_s,Fd=Dd,$d=Cf,Bd=Pc,wa=Tc,Ol=kd,el=qu,Rl=yo,Ll=Ba,Rc=za,Js=lp,Va[0]=Zo,Va[1]=ip,Va[2]=Td,Va[3]=Xo,Va[4]=Nf,Va[5]=Lu,Va[6]=Cc,Va[7]=Mu,Va[8]=op,Va[9]=Fu,Oi[0]=Pd,Oi[1]=ap,Oi[2]=Ko,Oi[3]=Ed,Oi[4]=Gn,Oi[5]=Yo,Oi[6]=vo,Qi[0]=ya,Qi[1]=wf,Qi[2]=gv,Qi[3]=El,Qi[4]=_d,Qi[5]=$u,Qi[6]=Sf,G=1}else G=0}G&&(G=function(Me,ct){for(Me.M=0;Me.M<Me.Va;++Me.M){var Xe,Oe=Me.Jc[Me.M&Me.Xb],Re=Me.m,rt=Me;for(Xe=0;Xe<rt.za;++Xe){var Je=Re,at=rt,It=at.Ac,Ct=at.Bc+4*Xe,Qt=at.zc,Tt=at.ya[at.aa+Xe];if(at.Qa.Bb?Tt.$b=xe(Je,at.Pa.jb[0])?2+xe(Je,at.Pa.jb[2]):xe(Je,at.Pa.jb[1]):Tt.$b=0,at.kc&&(Tt.Ad=xe(Je,at.Bd)),Tt.Za=!xe(Je,145)+0,Tt.Za){var Hr=Tt.Ob,Wr=0;for(at=0;4>at;++at){var zr,Tr=Qt[0+at];for(zr=0;4>zr;++zr){Tr=kw[It[Ct+zr]][Tr];for(var vn=cy[xe(Je,Tr[0])];0<vn;)vn=cy[2*vn+xe(Je,Tr[vn])];Tr=-vn,It[Ct+zr]=Tr}s(Hr,Wr,It,Ct,4),Wr+=4,Qt[0+at]=Tr}}else Tr=xe(Je,156)?xe(Je,128)?1:3:xe(Je,163)?2:0,Tt.Ob[0]=Tr,i(It,Ct,Tr,4),i(Qt,0,Tr,4);Tt.Dd=xe(Je,142)?xe(Je,114)?xe(Je,183)?1:3:2:0}if(rt.m.Ka)return cs(Me,7,"Premature end-of-partition0 encountered.");for(;Me.ja<Me.za;++Me.ja){if(rt=Oe,Je=(Re=Me).rb[Re.sb-1],It=Re.rb[Re.sb+Re.ja],Xe=Re.ya[Re.aa+Re.ja],Ct=Re.kc?Xe.Ad:0)Je.la=It.la=0,Xe.Za||(Je.Na=It.Na=0),Xe.Hc=0,Xe.Gc=0,Xe.ia=0;else{var bn,pr;if(Je=It,It=rt,Ct=Re.Pa.Xc,Qt=Re.ya[Re.aa+Re.ja],Tt=Re.pb[Qt.$b],at=Qt.ad,Hr=0,Wr=Re.rb[Re.sb-1],Tr=zr=0,i(at,Hr,0,384),Qt.Za)var Yn=0,Ri=Ct[3];else{vn=a(16);var ds=Je.Na+Wr.Na;if(ds=Vd(It,Ct[1],ds,Tt.Eb,0,vn,0),Je.Na=Wr.Na=(0<ds)+0,1<ds)eh(vn,0,at,Hr);else{var Is=vn[0]+3>>3;for(vn=0;256>vn;vn+=16)at[Hr+vn]=Is}Yn=1,Ri=Ct[0]}var on=15&Je.la,vi=15&Wr.la;for(vn=0;4>vn;++vn){var xi=1&vi;for(Is=pr=0;4>Is;++Is)on=on>>1|(xi=(ds=Vd(It,Ri,ds=xi+(1&on),Tt.Sc,Yn,at,Hr))>Yn)<<7,pr=pr<<2|(3<ds?3:1<ds?2:at[Hr+0]!=0),Hr+=16;on>>=4,vi=vi>>1|xi<<7,zr=(zr<<8|pr)>>>0}for(Ri=on,Yn=vi>>4,bn=0;4>bn;bn+=2){for(pr=0,on=Je.la>>4+bn,vi=Wr.la>>4+bn,vn=0;2>vn;++vn){for(xi=1&vi,Is=0;2>Is;++Is)ds=xi+(1&on),on=on>>1|(xi=0<(ds=Vd(It,Ct[2],ds,Tt.Qc,0,at,Hr)))<<3,pr=pr<<2|(3<ds?3:1<ds?2:at[Hr+0]!=0),Hr+=16;on>>=2,vi=vi>>1|xi<<5}Tr|=pr<<4*bn,Ri|=on<<4<<bn,Yn|=(240&vi)<<bn}Je.la=Ri,Wr.la=Yn,Qt.Hc=zr,Qt.Gc=Tr,Qt.ia=43690&Tr?0:Tt.ia,Ct=!(zr|Tr)}if(0<Re.L&&(Re.wa[Re.Y+Re.ja]=Re.gd[Xe.$b][Xe.Za],Re.wa[Re.Y+Re.ja].La|=!Ct),rt.Ka)return cs(Me,7,"Premature end-of-file encountered.")}if(Nc(Me),Re=ct,rt=1,Xe=(Oe=Me).D,Je=0<Oe.L&&Oe.M>=Oe.zb&&Oe.M<=Oe.Va,Oe.Aa==0)e:{if(Xe.M=Oe.M,Xe.uc=Je,Hu(Oe,Xe),rt=1,Xe=(pr=Oe.D).Nb,Je=(Tr=Gd[Oe.L])*Oe.R,It=Tr/2*Oe.B,vn=16*Xe*Oe.R,Is=8*Xe*Oe.B,Ct=Oe.sa,Qt=Oe.ta-Je+vn,Tt=Oe.qa,at=Oe.ra-It+Is,Hr=Oe.Ha,Wr=Oe.Ia-It+Is,vi=(on=pr.M)==0,zr=on>=Oe.Va-1,Oe.Aa==2&&Hu(Oe,pr),pr.uc)for(xi=(ds=Oe).D.M,e(ds.D.uc),pr=ds.yb;pr<ds.Hb;++pr){Yn=pr,Ri=xi;var Xn=(Ds=(ln=ds).D).Nb;bn=ln.R;var Ds=Ds.wa[Ds.Y+Yn],ti=ln.sa,ra=ln.ta+16*Xn*bn+16*Yn,Ha=Ds.dd,Zn=Ds.tc;if(Zn!=0)if(e(3<=Zn),ln.L==1)0<Yn&&Ll(ti,ra,bn,Zn+4),Ds.La&&Js(ti,ra,bn,Zn),0<Ri&&Rl(ti,ra,bn,Zn+4),Ds.La&&Rc(ti,ra,bn,Zn);else{var js=ln.B,Na=ln.qa,$c=ln.ra+8*Xn*js+8*Yn,$l=ln.Ha,ln=ln.Ia+8*Xn*js+8*Yn;Xn=Ds.ld,0<Yn&&(If(ti,ra,bn,Zn+4,Ha,Xn),$d(Na,$c,$l,ln,js,Zn+4,Ha,Xn)),Ds.La&&(wa(ti,ra,bn,Zn,Ha,Xn),el(Na,$c,$l,ln,js,Zn,Ha,Xn)),0<Ri&&(Md(ti,ra,bn,Zn+4,Ha,Xn),Fd(Na,$c,$l,ln,js,Zn+4,Ha,Xn)),Ds.La&&(Bd(ti,ra,bn,Zn,Ha,Xn),Ol(Na,$c,$l,ln,js,Zn,Ha,Xn))}}if(Oe.ia&&alert("todo:DitherRow"),Re.put!=null){if(pr=16*on,on=16*(on+1),vi?(Re.y=Oe.sa,Re.O=Oe.ta+vn,Re.f=Oe.qa,Re.N=Oe.ra+Is,Re.ea=Oe.Ha,Re.W=Oe.Ia+Is):(pr-=Tr,Re.y=Ct,Re.O=Qt,Re.f=Tt,Re.N=at,Re.ea=Hr,Re.W=Wr),zr||(on-=Tr),on>Re.o&&(on=Re.o),Re.F=null,Re.J=null,Oe.Fa!=null&&0<Oe.Fa.length&&pr<on&&(Re.J=Pf(Oe,Re,pr,on-pr),Re.F=Oe.mb,Re.F==null&&Re.F.length==0)){rt=cs(Oe,3,"Could not decode alpha data.");break e}pr<Re.j&&(Tr=Re.j-pr,pr=Re.j,e(!(1&Tr)),Re.O+=Oe.R*Tr,Re.N+=Oe.B*(Tr>>1),Re.W+=Oe.B*(Tr>>1),Re.F!=null&&(Re.J+=Re.width*Tr)),pr<on&&(Re.O+=Re.v,Re.N+=Re.v>>1,Re.W+=Re.v>>1,Re.F!=null&&(Re.J+=Re.v),Re.ka=pr-Re.j,Re.U=Re.va-Re.v,Re.T=on-pr,rt=Re.put(Re))}Xe+1!=Oe.Ic||zr||(s(Oe.sa,Oe.ta-Je,Ct,Qt+16*Oe.R,Je),s(Oe.qa,Oe.ra-It,Tt,at+8*Oe.B,It),s(Oe.Ha,Oe.Ia-It,Hr,Wr+8*Oe.B,It))}if(!rt)return cs(Me,6,"Output aborted.")}return 1}(D,M)),M.bc!=null&&M.bc(M),G&=1}return G?(D.cb=0,G):0}function Ki(D,M,G,Q,se){se=D[M+G+32*Q]+(se>>3),D[M+G+32*Q]=-256&se?0>se?0:255:se}function ku(D,M,G,Q,se,le){Ki(D,M,0,G,Q+se),Ki(D,M,1,G,Q+le),Ki(D,M,2,G,Q-le),Ki(D,M,3,G,Q-se)}function Yi(D){return(20091*D>>16)+D}function Cd(D,M,G,Q){var se,le=0,de=a(16);for(se=0;4>se;++se){var fe=D[M+0]+D[M+8],ge=D[M+0]-D[M+8],ye=(35468*D[M+4]>>16)-Yi(D[M+12]),De=Yi(D[M+4])+(35468*D[M+12]>>16);de[le+0]=fe+De,de[le+1]=ge+ye,de[le+2]=ge-ye,de[le+3]=fe-De,le+=4,M++}for(se=le=0;4>se;++se)fe=(D=de[le+0]+4)+de[le+8],ge=D-de[le+8],ye=(35468*de[le+4]>>16)-Yi(de[le+12]),Ki(G,Q,0,0,fe+(De=Yi(de[le+4])+(35468*de[le+12]>>16))),Ki(G,Q,1,0,ge+ye),Ki(G,Q,2,0,ge-ye),Ki(G,Q,3,0,fe-De),le++,Q+=32}function bf(D,M,G,Q){var se=D[M+0]+4,le=35468*D[M+4]>>16,de=Yi(D[M+4]),fe=35468*D[M+1]>>16;ku(G,Q,0,se+de,D=Yi(D[M+1]),fe),ku(G,Q,1,se+le,D,fe),ku(G,Q,2,se-le,D,fe),ku(G,Q,3,se-de,D,fe)}function jf(D,M,G,Q,se){Cd(D,M,G,Q),se&&Cd(D,M+16,G,Q+4)}function Sc(D,M,G,Q){Dl(D,M+0,G,Q,1),Dl(D,M+32,G,Q+128,1)}function pv(D,M,G,Q){var se;for(D=D[M+0]+4,se=0;4>se;++se)for(M=0;4>M;++M)Ki(G,Q,M,se,D)}function Ou(D,M,G,Q){D[M+0]&&pi(D,M+0,G,Q),D[M+16]&&pi(D,M+16,G,Q+4),D[M+32]&&pi(D,M+32,G,Q+128),D[M+48]&&pi(D,M+48,G,Q+128+4)}function Qr(D,M,G,Q){var se,le=a(16);for(se=0;4>se;++se){var de=D[M+0+se]+D[M+12+se],fe=D[M+4+se]+D[M+8+se],ge=D[M+4+se]-D[M+8+se],ye=D[M+0+se]-D[M+12+se];le[0+se]=de+fe,le[8+se]=de-fe,le[4+se]=ye+ge,le[12+se]=ye-ge}for(se=0;4>se;++se)de=(D=le[0+4*se]+3)+le[3+4*se],fe=le[1+4*se]+le[2+4*se],ge=le[1+4*se]-le[2+4*se],ye=D-le[3+4*se],G[Q+0]=de+fe>>3,G[Q+16]=ye+ge>>3,G[Q+32]=de-fe>>3,G[Q+48]=ye-ge>>3,Q+=64}function Ru(D,M,G){var Q,se=M-32,le=ki,de=255-D[se-1];for(Q=0;Q<G;++Q){var fe,ge=le,ye=de+D[M-1];for(fe=0;fe<G;++fe)D[M+fe]=ge[ye+D[se+fe]];M+=32}}function ip(D,M){Ru(D,M,4)}function wf(D,M){Ru(D,M,8)}function ap(D,M){Ru(D,M,16)}function Ko(D,M){var G;for(G=0;16>G;++G)s(D,M+32*G,D,M-32,16)}function Ed(D,M){var G;for(G=16;0<G;--G)i(D,M,D[M-1],16),M+=32}function Ac(D,M,G){var Q;for(Q=0;16>Q;++Q)i(M,G+32*Q,D,16)}function Pd(D,M){var G,Q=16;for(G=0;16>G;++G)Q+=D[M-1+32*G]+D[M+G-32];Ac(Q>>5,D,M)}function Gn(D,M){var G,Q=8;for(G=0;16>G;++G)Q+=D[M-1+32*G];Ac(Q>>4,D,M)}function Yo(D,M){var G,Q=8;for(G=0;16>G;++G)Q+=D[M+G-32];Ac(Q>>4,D,M)}function vo(D,M){Ac(128,D,M)}function lr(D,M,G){return D+2*M+G+2>>2}function Td(D,M){var G,Q=M-32;for(Q=new Uint8Array([lr(D[Q-1],D[Q+0],D[Q+1]),lr(D[Q+0],D[Q+1],D[Q+2]),lr(D[Q+1],D[Q+2],D[Q+3]),lr(D[Q+2],D[Q+3],D[Q+4])]),G=0;4>G;++G)s(D,M+32*G,Q,0,Q.length)}function Xo(D,M){var G=D[M-1],Q=D[M-1+32],se=D[M-1+64],le=D[M-1+96];Se(D,M+0,16843009*lr(D[M-1-32],G,Q)),Se(D,M+32,16843009*lr(G,Q,se)),Se(D,M+64,16843009*lr(Q,se,le)),Se(D,M+96,16843009*lr(se,le,le))}function Zo(D,M){var G,Q=4;for(G=0;4>G;++G)Q+=D[M+G-32]+D[M-1+32*G];for(Q>>=3,G=0;4>G;++G)i(D,M+32*G,Q,4)}function Nf(D,M){var G=D[M-1+0],Q=D[M-1+32],se=D[M-1+64],le=D[M-1-32],de=D[M+0-32],fe=D[M+1-32],ge=D[M+2-32],ye=D[M+3-32];D[M+0+96]=lr(Q,se,D[M-1+96]),D[M+1+96]=D[M+0+64]=lr(G,Q,se),D[M+2+96]=D[M+1+64]=D[M+0+32]=lr(le,G,Q),D[M+3+96]=D[M+2+64]=D[M+1+32]=D[M+0+0]=lr(de,le,G),D[M+3+64]=D[M+2+32]=D[M+1+0]=lr(fe,de,le),D[M+3+32]=D[M+2+0]=lr(ge,fe,de),D[M+3+0]=lr(ye,ge,fe)}function Cc(D,M){var G=D[M+1-32],Q=D[M+2-32],se=D[M+3-32],le=D[M+4-32],de=D[M+5-32],fe=D[M+6-32],ge=D[M+7-32];D[M+0+0]=lr(D[M+0-32],G,Q),D[M+1+0]=D[M+0+32]=lr(G,Q,se),D[M+2+0]=D[M+1+32]=D[M+0+64]=lr(Q,se,le),D[M+3+0]=D[M+2+32]=D[M+1+64]=D[M+0+96]=lr(se,le,de),D[M+3+32]=D[M+2+64]=D[M+1+96]=lr(le,de,fe),D[M+3+64]=D[M+2+96]=lr(de,fe,ge),D[M+3+96]=lr(fe,ge,ge)}function Lu(D,M){var G=D[M-1+0],Q=D[M-1+32],se=D[M-1+64],le=D[M-1-32],de=D[M+0-32],fe=D[M+1-32],ge=D[M+2-32],ye=D[M+3-32];D[M+0+0]=D[M+1+64]=le+de+1>>1,D[M+1+0]=D[M+2+64]=de+fe+1>>1,D[M+2+0]=D[M+3+64]=fe+ge+1>>1,D[M+3+0]=ge+ye+1>>1,D[M+0+96]=lr(se,Q,G),D[M+0+64]=lr(Q,G,le),D[M+0+32]=D[M+1+96]=lr(G,le,de),D[M+1+32]=D[M+2+96]=lr(le,de,fe),D[M+2+32]=D[M+3+96]=lr(de,fe,ge),D[M+3+32]=lr(fe,ge,ye)}function Mu(D,M){var G=D[M+0-32],Q=D[M+1-32],se=D[M+2-32],le=D[M+3-32],de=D[M+4-32],fe=D[M+5-32],ge=D[M+6-32],ye=D[M+7-32];D[M+0+0]=G+Q+1>>1,D[M+1+0]=D[M+0+64]=Q+se+1>>1,D[M+2+0]=D[M+1+64]=se+le+1>>1,D[M+3+0]=D[M+2+64]=le+de+1>>1,D[M+0+32]=lr(G,Q,se),D[M+1+32]=D[M+0+96]=lr(Q,se,le),D[M+2+32]=D[M+1+96]=lr(se,le,de),D[M+3+32]=D[M+2+96]=lr(le,de,fe),D[M+3+64]=lr(de,fe,ge),D[M+3+96]=lr(fe,ge,ye)}function Fu(D,M){var G=D[M-1+0],Q=D[M-1+32],se=D[M-1+64],le=D[M-1+96];D[M+0+0]=G+Q+1>>1,D[M+2+0]=D[M+0+32]=Q+se+1>>1,D[M+2+32]=D[M+0+64]=se+le+1>>1,D[M+1+0]=lr(G,Q,se),D[M+3+0]=D[M+1+32]=lr(Q,se,le),D[M+3+32]=D[M+1+64]=lr(se,le,le),D[M+3+64]=D[M+2+64]=D[M+0+96]=D[M+1+96]=D[M+2+96]=D[M+3+96]=le}function op(D,M){var G=D[M-1+0],Q=D[M-1+32],se=D[M-1+64],le=D[M-1+96],de=D[M-1-32],fe=D[M+0-32],ge=D[M+1-32],ye=D[M+2-32];D[M+0+0]=D[M+2+32]=G+de+1>>1,D[M+0+32]=D[M+2+64]=Q+G+1>>1,D[M+0+64]=D[M+2+96]=se+Q+1>>1,D[M+0+96]=le+se+1>>1,D[M+3+0]=lr(fe,ge,ye),D[M+2+0]=lr(de,fe,ge),D[M+1+0]=D[M+3+32]=lr(G,de,fe),D[M+1+32]=D[M+3+64]=lr(Q,G,de),D[M+1+64]=D[M+3+96]=lr(se,Q,G),D[M+1+96]=lr(le,se,Q)}function gv(D,M){var G;for(G=0;8>G;++G)s(D,M+32*G,D,M-32,8)}function El(D,M){var G;for(G=0;8>G;++G)i(D,M,D[M-1],8),M+=32}function xo(D,M,G){var Q;for(Q=0;8>Q;++Q)i(M,G+32*Q,D,8)}function ya(D,M){var G,Q=8;for(G=0;8>G;++G)Q+=D[M+G-32]+D[M-1+32*G];xo(Q>>4,D,M)}function $u(D,M){var G,Q=4;for(G=0;8>G;++G)Q+=D[M+G-32];xo(Q>>3,D,M)}function _d(D,M){var G,Q=4;for(G=0;8>G;++G)Q+=D[M-1+32*G];xo(Q>>3,D,M)}function Sf(D,M){xo(128,D,M)}function Ec(D,M,G){var Q=D[M-G],se=D[M+0],le=3*(se-Q)+rl[1020+D[M-2*G]-D[M+G]],de=rh[112+(le+4>>3)];D[M-G]=ki[255+Q+rh[112+(le+3>>3)]],D[M+0]=ki[255+se-de]}function Id(D,M,G,Q){var se=D[M+0],le=D[M+G];return Ua[255+D[M-2*G]-D[M-G]]>Q||Ua[255+le-se]>Q}function Bu(D,M,G,Q){return 4*Ua[255+D[M-G]-D[M+0]]+Ua[255+D[M-2*G]-D[M+G]]<=Q}function Af(D,M,G,Q,se){var le=D[M-3*G],de=D[M-2*G],fe=D[M-G],ge=D[M+0],ye=D[M+G],De=D[M+2*G],Be=D[M+3*G];return 4*Ua[255+fe-ge]+Ua[255+de-ye]>Q?0:Ua[255+D[M-4*G]-le]<=se&&Ua[255+le-de]<=se&&Ua[255+de-fe]<=se&&Ua[255+Be-De]<=se&&Ua[255+De-ye]<=se&&Ua[255+ye-ge]<=se}function yo(D,M,G,Q){var se=2*Q+1;for(Q=0;16>Q;++Q)Bu(D,M+Q,G,se)&&Ec(D,M+Q,G)}function Ba(D,M,G,Q){var se=2*Q+1;for(Q=0;16>Q;++Q)Bu(D,M+Q*G,1,se)&&Ec(D,M+Q*G,1)}function za(D,M,G,Q){var se;for(se=3;0<se;--se)yo(D,M+=4*G,G,Q)}function lp(D,M,G,Q){var se;for(se=3;0<se;--se)Ba(D,M+=4,G,Q)}function bo(D,M,G,Q,se,le,de,fe){for(le=2*le+1;0<se--;){if(Af(D,M,G,le,de))if(Id(D,M,G,fe))Ec(D,M,G);else{var ge=D,ye=M,De=G,Be=ge[ye-2*De],ze=ge[ye-De],Me=ge[ye+0],ct=ge[ye+De],Xe=ge[ye+2*De],Oe=27*(rt=rl[1020+3*(Me-ze)+rl[1020+Be-ct]])+63>>7,Re=18*rt+63>>7,rt=9*rt+63>>7;ge[ye-3*De]=ki[255+ge[ye-3*De]+rt],ge[ye-2*De]=ki[255+Be+Re],ge[ye-De]=ki[255+ze+Oe],ge[ye+0]=ki[255+Me-Oe],ge[ye+De]=ki[255+ct-Re],ge[ye+2*De]=ki[255+Xe-rt]}M+=Q}}function Xi(D,M,G,Q,se,le,de,fe){for(le=2*le+1;0<se--;){if(Af(D,M,G,le,de))if(Id(D,M,G,fe))Ec(D,M,G);else{var ge=D,ye=M,De=G,Be=ge[ye-De],ze=ge[ye+0],Me=ge[ye+De],ct=rh[112+((Xe=3*(ze-Be))+4>>3)],Xe=rh[112+(Xe+3>>3)],Oe=ct+1>>1;ge[ye-2*De]=ki[255+ge[ye-2*De]+Oe],ge[ye-De]=ki[255+Be+Xe],ge[ye+0]=ki[255+ze-ct],ge[ye+De]=ki[255+Me-Oe]}M+=Q}}function zu(D,M,G,Q,se,le){bo(D,M,G,1,16,Q,se,le)}function _s(D,M,G,Q,se,le){bo(D,M,1,G,16,Q,se,le)}function Pc(D,M,G,Q,se,le){var de;for(de=3;0<de;--de)Xi(D,M+=4*G,G,1,16,Q,se,le)}function Tc(D,M,G,Q,se,le){var de;for(de=3;0<de;--de)Xi(D,M+=4,1,G,16,Q,se,le)}function Dd(D,M,G,Q,se,le,de,fe){bo(D,M,se,1,8,le,de,fe),bo(G,Q,se,1,8,le,de,fe)}function Cf(D,M,G,Q,se,le,de,fe){bo(D,M,1,se,8,le,de,fe),bo(G,Q,1,se,8,le,de,fe)}function kd(D,M,G,Q,se,le,de,fe){Xi(D,M+4*se,se,1,8,le,de,fe),Xi(G,Q+4*se,se,1,8,le,de,fe)}function qu(D,M,G,Q,se,le,de,fe){Xi(D,M+4,1,se,8,le,de,fe),Xi(G,Q+4,1,se,8,le,de,fe)}function Qo(){this.ba=new ui,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _c(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Uu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function cp(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new T}function vv(){this.xb=this.a=0,this.l=new Du,this.ca=new ui,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new cp,this.ab=0,this.gc=o(4,Uu),this.Oc=0}function Vu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Du,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Pl(D,M,G,Q,se,le,de){for(D=D==null?0:D[M+0],M=0;M<de;++M)se[le+M]=D+G[Q+M]&255,D=se[le+M]}function Ef(D,M,G,Q,se,le,de){var fe;if(D==null)Pl(null,null,G,Q,se,le,de);else for(fe=0;fe<de;++fe)se[le+fe]=D[M+fe]+G[Q+fe]&255}function Ic(D,M,G,Q,se,le,de){if(D==null)Pl(null,null,G,Q,se,le,de);else{var fe,ge=D[M+0],ye=ge,De=ge;for(fe=0;fe<de;++fe)ye=De+(ge=D[M+fe])-ye,De=G[Q+fe]+(-256&ye?0>ye?0:255:ye)&255,ye=ge,se[le+fe]=De}}function Pf(D,M,G,Q){var se=M.width,le=M.o;if(e(D!=null&&M!=null),0>G||0>=Q||G+Q>le)return null;if(!D.Cc){if(D.ga==null){var de;if(D.ga=new Vu,(de=D.ga==null)||(de=M.width*M.o,e(D.Gb.length==0),D.Gb=a(de),D.Uc=0,D.Gb==null?de=0:(D.mb=D.Gb,D.nb=D.Uc,D.rc=null,de=1),de=!de),!de){de=D.ga;var fe=D.Fa,ge=D.P,ye=D.qc,De=D.mb,Be=D.nb,ze=ge+1,Me=ye-1,ct=de.l;if(e(fe!=null&&De!=null&&M!=null),gi[0]=null,gi[1]=Pl,gi[2]=Ef,gi[3]=Ic,de.ca=De,de.tb=Be,de.c=M.width,de.i=M.height,e(0<de.c&&0<de.i),1>=ye)M=0;else if(de.$a=fe[ge+0]>>0&3,de.Z=fe[ge+0]>>2&3,de.Lc=fe[ge+0]>>4&3,ge=fe[ge+0]>>6&3,0>de.$a||1<de.$a||4<=de.Z||1<de.Lc||ge)M=0;else if(ct.put=Fa,ct.ac=Hs,ct.bc=fo,ct.ma=de,ct.width=M.width,ct.height=M.height,ct.Da=M.Da,ct.v=M.v,ct.va=M.va,ct.j=M.j,ct.o=M.o,de.$a)e:{e(de.$a==1),M=va();t:for(;;){if(M==null){M=0;break e}if(e(de!=null),de.mc=M,M.c=de.c,M.i=de.i,M.l=de.l,M.l.ma=de,M.l.width=de.c,M.l.height=de.i,M.a=0,K(M.m,fe,ze,Me),!Go(de.c,de.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Cl(M.s)?(de.ic=1,fe=M.c*M.i,M.Ta=null,M.Ua=0,M.V=a(fe),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(de.ic=0,M=jc(M,de.c)),!M))break t;M=1;break e}de.mc=null,M=0}else M=Me>=de.c*de.i;de=!M}if(de)return null;D.ga.Lc!=1?D.Ga=0:Q=le-G}e(D.ga!=null),e(G+Q<=le);e:{if(M=(fe=D.ga).c,le=fe.l.o,fe.$a==0){if(ze=D.rc,Me=D.Vc,ct=D.Fa,ge=D.P+1+G*M,ye=D.mb,De=D.nb+G*M,e(ge<=D.P+D.qc),fe.Z!=0)for(e(gi[fe.Z]!=null),de=0;de<Q;++de)gi[fe.Z](ze,Me,ct,ge,ye,De,M),ze=ye,Me=De,De+=M,ge+=M;else for(de=0;de<Q;++de)s(ye,De,ct,ge,M),ze=ye,Me=De,De+=M,ge+=M;D.rc=ze,D.Vc=Me}else{if(e(fe.mc!=null),M=G+Q,e((de=fe.mc)!=null),e(M<=de.i),de.C>=M)M=1;else if(fe.ic||$e(),fe.ic){fe=de.V,ze=de.Ba,Me=de.c;var Xe=de.i,Oe=(ct=1,ge=de.$/Me,ye=de.$%Me,De=de.m,Be=de.s,de.$),Re=Me*Xe,rt=Me*M,Je=Be.wc,at=Oe<rt?Hn(Be,ye,ge):null;e(Oe<=Re),e(M<=Xe),e(Cl(Be));t:for(;;){for(;!De.h&&Oe<rt;){if(ye&Je||(at=Hn(Be,ye,ge)),e(at!=null),ne(De),256>(Xe=Gi(at.G[0],at.H[0],De)))fe[ze+Oe]=Xe,++Oe,++ye>=Me&&(ye=0,++ge<=M&&!(ge%16)&&po(de,ge));else{if(!(280>Xe)){ct=0;break t}Xe=ga(Xe-256,De);var It,Ct=Gi(at.G[4],at.H[4],De);if(ne(De),!(Oe>=(Ct=Wi(Me,Ct=ga(Ct,De)))&&Re-Oe>=Xe)){ct=0;break t}for(It=0;It<Xe;++It)fe[ze+Oe+It]=fe[ze+Oe+It-Ct];for(Oe+=Xe,ye+=Xe;ye>=Me;)ye-=Me,++ge<=M&&!(ge%16)&&po(de,ge);Oe<rt&&ye&Je&&(at=Hn(Be,ye,ge))}e(De.h==te(De))}po(de,ge>M?M:ge);break t}!ct||De.h&&Oe<Re?(ct=0,de.a=De.h?5:3):de.$=Oe,M=ct}else M=Qs(de,de.V,de.Ba,de.c,de.i,M,bd);if(!M){Q=0;break e}}G+Q>=le&&(D.Cc=1),Q=1}if(!Q)return null;if(D.Cc&&((Q=D.ga)!=null&&(Q.mc=null),D.ga=null,0<D.Ga))return alert("todo:WebPDequantizeLevels"),null}return D.nb+G*se}function U(D,M,G,Q,se,le){for(;0<se--;){var de,fe=D,ge=M+(G?1:0),ye=D,De=M+(G?0:3);for(de=0;de<Q;++de){var Be=ye[De+4*de];Be!=255&&(Be*=32897,fe[ge+4*de+0]=fe[ge+4*de+0]*Be>>23,fe[ge+4*de+1]=fe[ge+4*de+1]*Be>>23,fe[ge+4*de+2]=fe[ge+4*de+2]*Be>>23)}M+=le}}function ie(D,M,G,Q,se){for(;0<Q--;){var le;for(le=0;le<G;++le){var de=D[M+2*le+0],fe=15&(ye=D[M+2*le+1]),ge=4369*fe,ye=(240&ye|ye>>4)*ge>>16;D[M+2*le+0]=(240&de|de>>4)*ge>>16&240|(15&de|de<<4)*ge>>16>>4&15,D[M+2*le+1]=240&ye|fe}M+=se}}function Ae(D,M,G,Q,se,le,de,fe){var ge,ye,De=255;for(ye=0;ye<se;++ye){for(ge=0;ge<Q;++ge){var Be=D[M+ge];le[de+4*ge]=Be,De&=Be}M+=G,de+=fe}return De!=255}function Ie(D,M,G,Q,se){var le;for(le=0;le<se;++le)G[Q+le]=D[M+le]>>8}function $e(){Zi=U,An=ie,pn=Ae,is=Ie}function Qe(D,M,G){_[D]=function(Q,se,le,de,fe,ge,ye,De,Be,ze,Me,ct,Xe,Oe,Re,rt,Je){var at,It=Je-1>>1,Ct=fe[ge+0]|ye[De+0]<<16,Qt=Be[ze+0]|Me[ct+0]<<16;e(Q!=null);var Tt=3*Ct+Qt+131074>>2;for(M(Q[se+0],255&Tt,Tt>>16,Xe,Oe),le!=null&&(Tt=3*Qt+Ct+131074>>2,M(le[de+0],255&Tt,Tt>>16,Re,rt)),at=1;at<=It;++at){var Hr=fe[ge+at]|ye[De+at]<<16,Wr=Be[ze+at]|Me[ct+at]<<16,zr=Ct+Hr+Qt+Wr+524296,Tr=zr+2*(Hr+Qt)>>3;Tt=Tr+Ct>>1,Ct=(zr=zr+2*(Ct+Wr)>>3)+Hr>>1,M(Q[se+2*at-1],255&Tt,Tt>>16,Xe,Oe+(2*at-1)*G),M(Q[se+2*at-0],255&Ct,Ct>>16,Xe,Oe+(2*at-0)*G),le!=null&&(Tt=zr+Qt>>1,Ct=Tr+Wr>>1,M(le[de+2*at-1],255&Tt,Tt>>16,Re,rt+(2*at-1)*G),M(le[de+2*at+0],255&Ct,Ct>>16,Re,rt+(2*at+0)*G)),Ct=Hr,Qt=Wr}1&Je||(Tt=3*Ct+Qt+131074>>2,M(Q[se+Je-1],255&Tt,Tt>>16,Xe,Oe+(Je-1)*G),le!=null&&(Tt=3*Qt+Ct+131074>>2,M(le[de+Je-1],255&Tt,Tt>>16,Re,rt+(Je-1)*G)))}}function ft(){Ji[up]=Rw,Ji[Lc]=Mc,Ji[ay]=Lw,Ji[kf]=ah,Ji[Of]=Hd,Ji[Cn]=$f,Ji[hp]=jv,Ji[nh]=Mc,Ji[qd]=ah,Ji[Rf]=Hd,Ji[Lf]=$f}function _t(D){return D&-16384?0>D?0:255:D>>Fc}function Yt(D,M){return _t((19077*D>>8)+(26149*M>>8)-14234)}function Nr(D,M,G){return _t((19077*D>>8)-(6419*M>>8)-(13320*G>>8)+8708)}function br(D,M){return _t((19077*D>>8)+(33050*M>>8)-17685)}function Mr(D,M,G,Q,se){Q[se+0]=Yt(D,G),Q[se+1]=Nr(D,M,G),Q[se+2]=br(D,M)}function Kn(D,M,G,Q,se){Q[se+0]=br(D,M),Q[se+1]=Nr(D,M,G),Q[se+2]=Yt(D,G)}function ns(D,M,G,Q,se){var le=Nr(D,M,G);M=le<<3&224|br(D,M)>>3,Q[se+0]=248&Yt(D,G)|le>>5,Q[se+1]=M}function ys(D,M,G,Q,se){var le=240&br(D,M)|15;Q[se+0]=240&Yt(D,G)|Nr(D,M,G)>>4,Q[se+1]=le}function fi(D,M,G,Q,se){Q[se+0]=255,Mr(D,M,G,Q,se+1)}function Ws(D,M,G,Q,se){Kn(D,M,G,Q,se),Q[se+3]=255}function jo(D,M,G,Q,se){Mr(D,M,G,Q,se),Q[se+3]=255}function ba(D,M){return 0>D?0:D>M?M:D}function qa(D,M,G){_[D]=function(Q,se,le,de,fe,ge,ye,De,Be){for(var ze=De+(-2&Be)*G;De!=ze;)M(Q[se+0],le[de+0],fe[ge+0],ye,De),M(Q[se+1],le[de+0],fe[ge+0],ye,De+G),se+=2,++de,++ge,De+=2*G;1&Be&&M(Q[se+0],le[de+0],fe[ge+0],ye,De)}}function Dc(D,M,G){return G==0?D==0?M==0?6:5:M==0?4:0:G}function Tf(D,M,G,Q,se){switch(D>>>30){case 3:Dl(M,G,Q,se,0);break;case 2:Jr(M,G,Q,se);break;case 1:pi(M,G,Q,se)}}function Hu(D,M){var G,Q,se=M.M,le=M.Nb,de=D.oc,fe=D.pc+40,ge=D.oc,ye=D.pc+584,De=D.oc,Be=D.pc+600;for(G=0;16>G;++G)de[fe+32*G-1]=129;for(G=0;8>G;++G)ge[ye+32*G-1]=129,De[Be+32*G-1]=129;for(0<se?de[fe-1-32]=ge[ye-1-32]=De[Be-1-32]=129:(i(de,fe-32-1,127,21),i(ge,ye-32-1,127,9),i(De,Be-32-1,127,9)),Q=0;Q<D.za;++Q){var ze=M.ya[M.aa+Q];if(0<Q){for(G=-1;16>G;++G)s(de,fe+32*G-4,de,fe+32*G+12,4);for(G=-1;8>G;++G)s(ge,ye+32*G-4,ge,ye+32*G+4,4),s(De,Be+32*G-4,De,Be+32*G+4,4)}var Me=D.Gd,ct=D.Hd+Q,Xe=ze.ad,Oe=ze.Hc;if(0<se&&(s(de,fe-32,Me[ct].y,0,16),s(ge,ye-32,Me[ct].f,0,8),s(De,Be-32,Me[ct].ea,0,8)),ze.Za){var Re=de,rt=fe-32+16;for(0<se&&(Q>=D.za-1?i(Re,rt,Me[ct].y[15],4):s(Re,rt,Me[ct+1].y,0,4)),G=0;4>G;G++)Re[rt+128+G]=Re[rt+256+G]=Re[rt+384+G]=Re[rt+0+G];for(G=0;16>G;++G,Oe<<=2)Re=de,rt=fe+wv[G],Va[ze.Ob[G]](Re,rt),Tf(Oe,Xe,16*+G,Re,rt)}else if(Re=Dc(Q,se,ze.Ob[0]),Oi[Re](de,fe),Oe!=0)for(G=0;16>G;++G,Oe<<=2)Tf(Oe,Xe,16*+G,de,fe+wv[G]);for(G=ze.Gc,Re=Dc(Q,se,ze.Dd),Qi[Re](ge,ye),Qi[Re](De,Be),Oe=Xe,Re=ge,rt=ye,255&(ze=G>>0)&&(170&ze?kl(Oe,256,Re,rt):ja(Oe,256,Re,rt)),ze=De,Oe=Be,255&(G>>=8)&&(170&G?kl(Xe,320,ze,Oe):ja(Xe,320,ze,Oe)),se<D.Ub-1&&(s(Me[ct].y,0,de,fe+480,16),s(Me[ct].f,0,ge,ye+224,8),s(Me[ct].ea,0,De,Be+224,8)),G=8*le*D.B,Me=D.sa,ct=D.ta+16*Q+16*le*D.R,Xe=D.qa,ze=D.ra+8*Q+G,Oe=D.Ha,Re=D.Ia+8*Q+G,G=0;16>G;++G)s(Me,ct+G*D.R,de,fe+32*G,16);for(G=0;8>G;++G)s(Xe,ze+G*D.B,ge,ye+32*G,8),s(Oe,Re+G*D.B,De,Be+32*G,8)}}function Od(D,M,G,Q,se,le,de,fe,ge){var ye=[0],De=[0],Be=0,ze=ge!=null?ge.kd:0,Me=ge??new _c;if(D==null||12>G)return 7;Me.data=D,Me.w=M,Me.ha=G,M=[M],G=[G],Me.gb=[Me.gb];e:{var ct=M,Xe=G,Oe=Me.gb;if(e(D!=null),e(Xe!=null),e(Oe!=null),Oe[0]=0,12<=Xe[0]&&!r(D,ct[0],"RIFF")){if(r(D,ct[0]+8,"WEBP")){Oe=3;break e}var Re=He(D,ct[0]+4);if(12>Re||4294967286<Re){Oe=3;break e}if(ze&&Re>Xe[0]-8){Oe=7;break e}Oe[0]=Re,ct[0]+=12,Xe[0]-=12}Oe=0}if(Oe!=0)return Oe;for(Re=0<Me.gb[0],G=G[0];;){e:{var rt=D;Xe=M,Oe=G;var Je=ye,at=De,It=ct=[0];if((Tt=Be=[Be])[0]=0,8>Oe[0])Oe=7;else{if(!r(rt,Xe[0],"VP8X")){if(He(rt,Xe[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var Ct=He(rt,Xe[0]+8),Qt=1+Ce(rt,Xe[0]+12);if(2147483648<=Qt*(rt=1+Ce(rt,Xe[0]+15))){Oe=3;break e}It!=null&&(It[0]=Ct),Je!=null&&(Je[0]=Qt),at!=null&&(at[0]=rt),Xe[0]+=18,Oe[0]-=18,Tt[0]=1}Oe=0}}if(Be=Be[0],ct=ct[0],Oe!=0)return Oe;if(Xe=!!(2&ct),!Re&&Be)return 3;if(le!=null&&(le[0]=!!(16&ct)),de!=null&&(de[0]=Xe),fe!=null&&(fe[0]=0),de=ye[0],ct=De[0],Be&&Xe&&ge==null){Oe=0;break}if(4>G){Oe=7;break}if(Re&&Be||!Re&&!Be&&!r(D,M[0],"ALPH")){G=[G],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{Ct=D,Oe=M,Re=G;var Tt=Me.gb;Je=Me.na,at=Me.P,It=Me.Sa,Qt=22,e(Ct!=null),e(Re!=null),rt=Oe[0];var Hr=Re[0];for(e(Je!=null),e(It!=null),Je[0]=null,at[0]=null,It[0]=0;;){if(Oe[0]=rt,Re[0]=Hr,8>Hr){Oe=7;break e}var Wr=He(Ct,rt+4);if(4294967286<Wr){Oe=3;break e}var zr=8+Wr+1&-2;if(Qt+=zr,0<Tt&&Qt>Tt){Oe=3;break e}if(!r(Ct,rt,"VP8 ")||!r(Ct,rt,"VP8L")){Oe=0;break e}if(Hr[0]<zr){Oe=7;break e}r(Ct,rt,"ALPH")||(Je[0]=Ct,at[0]=rt+8,It[0]=Wr),rt+=zr,Hr-=zr}}if(G=G[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Oe!=0)break}G=[G],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Tt=D,Oe=M,Re=G,Je=Me.gb[0],at=Me.Ja,It=Me.xa,Ct=Oe[0],rt=!r(Tt,Ct,"VP8 "),Qt=!r(Tt,Ct,"VP8L"),e(Tt!=null),e(Re!=null),e(at!=null),e(It!=null),8>Re[0])Oe=7;else{if(rt||Qt){if(Tt=He(Tt,Ct+4),12<=Je&&Tt>Je-12){Oe=3;break e}if(ze&&Tt>Re[0]-8){Oe=7;break e}at[0]=Tt,Oe[0]+=8,Re[0]-=8,It[0]=Qt}else It[0]=5<=Re[0]&&Tt[Ct+0]==47&&!(Tt[Ct+4]>>5),at[0]=Re[0];Oe=0}if(G=G[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],M=M[0],Oe!=0)break;if(4294967286<Me.Ja)return 3;if(fe==null||Xe||(fe[0]=Me.xa?2:1),de=[de],ct=[ct],Me.xa){if(5>G){Oe=7;break}fe=de,ze=ct,Xe=le,D==null||5>G?D=0:5<=G&&D[M+0]==47&&!(D[M+4]>>5)?(Re=[0],Tt=[0],Je=[0],K(at=new $,D,M,G),Zt(at,Re,Tt,Je)?(fe!=null&&(fe[0]=Re[0]),ze!=null&&(ze[0]=Tt[0]),Xe!=null&&(Xe[0]=Je[0]),D=1):D=0):D=0}else{if(10>G){Oe=7;break}fe=ct,D==null||10>G||!np(D,M+3,G-3)?D=0:(ze=D[M+0]|D[M+1]<<8|D[M+2]<<16,Xe=16383&(D[M+7]<<8|D[M+6]),D=16383&(D[M+9]<<8|D[M+8]),1&ze||3<(ze>>1&7)||!(ze>>4&1)||ze>>5>=Me.Ja||!Xe||!D?D=0:(de&&(de[0]=Xe),fe&&(fe[0]=D),D=1))}if(!D||(de=de[0],ct=ct[0],Be&&(ye[0]!=de||De[0]!=ct)))return 3;ge!=null&&(ge[0]=Me,ge.offset=M-ge.w,e(4294967286>M-ge.w),e(ge.offset==ge.ha-G));break}return Oe==0||Oe==7&&Be&&ge==null?(le!=null&&(le[0]|=Me.na!=null&&0<Me.na.length),Q!=null&&(Q[0]=de),se!=null&&(se[0]=ct),0):Oe}function Wu(D,M,G){var Q=M.width,se=M.height,le=0,de=0,fe=Q,ge=se;if(M.Da=D!=null&&0<D.Da,M.Da&&(fe=D.cd,ge=D.bd,le=D.v,de=D.j,11>G||(le&=-2,de&=-2),0>le||0>de||0>=fe||0>=ge||le+fe>Q||de+ge>se))return 0;if(M.v=le,M.j=de,M.va=le+fe,M.o=de+ge,M.U=fe,M.T=ge,M.da=D!=null&&0<D.da,M.da){if(!it(fe,ge,G=[D.ib],le=[D.hb]))return 0;M.ib=G[0],M.hb=le[0]}return M.ob=D!=null&&D.ob,M.Kb=D==null||!D.Sd,M.da&&(M.ob=M.ib<3*Q/4&&M.hb<3*se/4,M.Kb=0),1}function Gu(D){if(D==null)return 2;if(11>D.S){var M=D.f.RGBA;M.fb+=(D.height-1)*M.A,M.A=-M.A}else M=D.f.kb,D=D.height,M.O+=(D-1)*M.fa,M.fa=-M.fa,M.N+=(D-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(D-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(D-1)*M.lb,M.lb=-M.lb);return 0}function Rd(D,M,G,Q){if(Q==null||0>=D||0>=M)return 2;if(G!=null){if(G.Da){var se=G.cd,le=G.bd,de=-2&G.v,fe=-2&G.j;if(0>de||0>fe||0>=se||0>=le||de+se>D||fe+le>M)return 2;D=se,M=le}if(G.da){if(!it(D,M,se=[G.ib],le=[G.hb]))return 2;D=se[0],M=le[0]}}Q.width=D,Q.height=M;e:{var ge=Q.width,ye=Q.height;if(D=Q.S,0>=ge||0>=ye||!(D>=up&&13>D))D=2;else{if(0>=Q.Rd&&Q.sd==null){de=le=se=M=0;var De=(fe=ge*Bf[D])*ye;if(11>D||(le=(ye+1)/2*(M=(ge+1)/2),D==12&&(de=(se=ge)*ye)),(ye=a(De+2*le+de))==null){D=1;break e}Q.sd=ye,11>D?((ge=Q.f.RGBA).eb=ye,ge.fb=0,ge.A=fe,ge.size=De):((ge=Q.f.kb).y=ye,ge.O=0,ge.fa=fe,ge.Fd=De,ge.f=ye,ge.N=0+De,ge.Ab=M,ge.Cd=le,ge.ea=ye,ge.W=0+De+le,ge.Db=M,ge.Ed=le,D==12&&(ge.F=ye,ge.J=0+De+2*le),ge.Tc=de,ge.lb=se)}if(M=1,se=Q.S,le=Q.width,de=Q.height,se>=up&&13>se)if(11>se)D=Q.f.RGBA,M&=(fe=Math.abs(D.A))*(de-1)+le<=D.size,M&=fe>=le*Bf[se],M&=D.eb!=null;else{D=Q.f.kb,fe=(le+1)/2,De=(de+1)/2,ge=Math.abs(D.fa),ye=Math.abs(D.Ab);var Be=Math.abs(D.Db),ze=Math.abs(D.lb),Me=ze*(de-1)+le;M&=ge*(de-1)+le<=D.Fd,M&=ye*(De-1)+fe<=D.Cd,M=(M&=Be*(De-1)+fe<=D.Ed)&ge>=le&ye>=fe&Be>=fe,M&=D.y!=null,M&=D.f!=null,M&=D.ea!=null,se==12&&(M&=ze>=le,M&=Me<=D.Tc,M&=D.F!=null)}else M=0;D=M?0:2}}return D!=0||G!=null&&G.fd&&(D=Gu(Q)),D}var ss=64,Ku=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yu=24,Xu=32,Zu=8,_i=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(D){return D},_.Predictor2=function(D,M,G){return M[G+0]},_.Predictor3=function(D,M,G){return M[G+1]},_.Predictor4=function(D,M,G){return M[G-1]},_.Predictor5=function(D,M,G){return xt(xt(D,M[G+1]),M[G+0])},_.Predictor6=function(D,M,G){return xt(D,M[G-1])},_.Predictor7=function(D,M,G){return xt(D,M[G+0])},_.Predictor8=function(D,M,G){return xt(M[G-1],M[G+0])},_.Predictor9=function(D,M,G){return xt(M[G+0],M[G+1])},_.Predictor10=function(D,M,G){return xt(xt(D,M[G-1]),xt(M[G+0],M[G+1]))},_.Predictor11=function(D,M,G){var Q=M[G+0];return 0>=ut(Q>>24&255,D>>24&255,(M=M[G-1])>>24&255)+ut(Q>>16&255,D>>16&255,M>>16&255)+ut(Q>>8&255,D>>8&255,M>>8&255)+ut(255&Q,255&D,255&M)?Q:D},_.Predictor12=function(D,M,G){var Q=M[G+0];return(Ot((D>>24&255)+(Q>>24&255)-((M=M[G-1])>>24&255))<<24|Ot((D>>16&255)+(Q>>16&255)-(M>>16&255))<<16|Ot((D>>8&255)+(Q>>8&255)-(M>>8&255))<<8|Ot((255&D)+(255&Q)-(255&M)))>>>0},_.Predictor13=function(D,M,G){var Q=M[G-1];return(Ze((D=xt(D,M[G+0]))>>24&255,Q>>24&255)<<24|Ze(D>>16&255,Q>>16&255)<<16|Ze(D>>8&255,Q>>8&255)<<8|Ze(D>>0&255,Q>>0&255))>>>0};var Ld=_.PredictorAdd0;_.PredictorAdd1=Et,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var Tl=_.PredictorAdd2;nr("ColorIndexInverseTransform","MapARGB","32b",function(D){return D>>8&255},function(D){return D}),nr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(D){return D},function(D){return D>>8&255});var dp,Ii=_.ColorIndexInverseTransform,Qu=_.MapARGB,_f=_.VP8LColorIndexInverseTransformAlpha,Ju=_.MapAlpha,Jo=_.VP8LPredictorsAdd=[];Jo.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var kc,Di,mi,Oc,_l,Il,eh,Dl,Jr,kl,pi,ja,Md,If,Fd,$d,Bd,wa,Ol,el,Rl,Ll,Rc,Js,Zi,An,pn,is,bs=a(511),tl=a(2041),th=a(225),zd=a(767),Df=0,rl=tl,rh=th,ki=zd,Ua=bs,up=0,Lc=1,ay=2,kf=3,Of=4,Cn=5,hp=6,nh=7,qd=8,Rf=9,Lf=10,Mf=[2,3,7],fp=[3,3,11],Ud=[280,256,256,256,40],oy=[0,1,1,1,0],Iw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ly=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mp=8,sh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ff=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vd=null,xv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yv=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],cy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dy=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],kw=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ow=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Oi=[],Va=[],Qi=[],nl=1,ih=2,gi=[],Ji=[];Qe("UpsampleRgbLinePair",Mr,3),Qe("UpsampleBgrLinePair",Kn,3),Qe("UpsampleRgbaLinePair",jo,4),Qe("UpsampleBgraLinePair",Ws,4),Qe("UpsampleArgbLinePair",fi,4),Qe("UpsampleRgba4444LinePair",ys,2),Qe("UpsampleRgb565LinePair",ns,2);var Rw=_.UpsampleRgbLinePair,Lw=_.UpsampleBgrLinePair,Mc=_.UpsampleRgbaLinePair,ah=_.UpsampleBgraLinePair,Hd=_.UpsampleArgbLinePair,$f=_.UpsampleRgba4444LinePair,jv=_.UpsampleRgb565LinePair,Ml=16,wo=1<<Ml-1,gn=-227,yn=482,Fc=6,ei=0,ea=a(256),Wd=a(256),oh=a(256),ta=a(256),pp=a(yn-gn),uy=a(yn-gn);qa("YuvToRgbRow",Mr,3),qa("YuvToBgrRow",Kn,3),qa("YuvToRgbaRow",jo,4),qa("YuvToBgraRow",Ws,4),qa("YuvToArgbRow",fi,4),qa("YuvToRgba4444Row",ys,2),qa("YuvToRgb565Row",ns,2);var wv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gd=[0,2,8],hy=[8,7,6,4,4,2,2,2,1,1,1,1],Fl=1;this.WebPDecodeRGBA=function(D,M,G,Q,se){var le=Lc,de=new Qo,fe=new ui;de.ba=fe,fe.S=le,fe.width=[fe.width],fe.height=[fe.height];var ge=fe.width,ye=fe.height,De=new Hi;if(De==null||D==null)var Be=2;else e(De!=null),Be=Od(D,M,G,De.width,De.height,De.Pd,De.Qd,De.format,null);if(Be!=0?ge=0:(ge!=null&&(ge[0]=De.width[0]),ye!=null&&(ye[0]=De.height[0]),ge=1),ge){fe.width=fe.width[0],fe.height=fe.height[0],Q!=null&&(Q[0]=fe.width),se!=null&&(se[0]=fe.height);e:{if(Q=new Du,(se=new _c).data=D,se.w=M,se.ha=G,se.kd=1,M=[0],e(se!=null),((D=Od(se.data,se.w,se.ha,null,null,null,M,null,se))==0||D==7)&&M[0]&&(D=4),(M=D)==0){if(e(de!=null),Q.data=se.data,Q.w=se.w+se.offset,Q.ha=se.ha-se.offset,Q.put=Fa,Q.ac=Hs,Q.bc=fo,Q.ma=de,se.xa){if((D=va())==null){de=1;break e}if(function(ze,Me){var ct=[0],Xe=[0],Oe=[0];t:for(;;){if(ze==null)return 0;if(Me==null)return ze.a=2,0;if(ze.l=Me,ze.a=0,K(ze.m,Me.data,Me.w,Me.ha),!Zt(ze.m,ct,Xe,Oe)){ze.a=3;break t}if(ze.xb=ih,Me.width=ct[0],Me.height=Xe[0],!Go(ct[0],Xe[0],1,ze,null))break t;return 1}return e(ze.a!=0),0}(D,Q)){if(Q=(M=Rd(Q.width,Q.height,de.Oa,de.ba))==0){t:{Q=D;r:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((G=Q.l)!=null),e((se=G.ma)!=null),Q.xb!=0){if(Q.ca=se.ba,Q.tb=se.tb,e(Q.ca!=null),!Wu(se.Oa,G,kf)){Q.a=2;break r}if(!jc(Q,G.width)||G.da)break r;if((G.da||Rr(Q.ca.S))&&$e(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&$e()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!Ke(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break r}Q.xb=0}if(!Qs(Q,Q.V,Q.Ba,Q.c,Q.i,G.o,bc))break r;se.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(M=D.a)}else M=D.a}else{if((D=new xa)==null){de=1;break e}if(D.Fa=se.na,D.P=se.P,D.qc=se.Sa,sp(D,Q)){if((M=Rd(Q.width,Q.height,de.Oa,de.ba))==0){if(D.Aa=0,G=de.Oa,e((se=D)!=null),G!=null){if(0<(ge=0>(ge=G.Md)?0:100<ge?255:255*ge/100)){for(ye=De=0;4>ye;++ye)12>(Be=se.pb[ye]).lc&&(Be.ia=ge*hy[0>Be.lc?0:Be.lc]>>3),De|=Be.ia;De&&(alert("todo:VP8InitRandom"),se.ia=1)}se.Ga=G.Id,100<se.Ga?se.Ga=100:0>se.Ga&&(se.Ga=0)}Ad(D,Q)||(M=D.a)}}else M=D.a}M==0&&de.Oa!=null&&de.Oa.fd&&(M=Gu(de.ba))}de=M}le=de!=0?null:11>le?fe.f.RGBA.eb:fe.f.kb.y}else le=null;return le};var Bf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(_,k){for(var F="",I=0;I<4;I++)F+=String.fromCharCode(_[k++]);return F}function u(_,k){return(_[k+0]<<0|_[k+1]<<8|_[k+2]<<16)>>>0}function h(_,k){return(_[k+0]<<0|_[k+1]<<8|_[k+2]<<16|_[k+3]<<24)>>>0}new c;var f=[0],p=[0],y=[],v=new c,g=t,b=function(_,k){var F={},I=0,T=!1,R=0,O=0;if(F.frames=[],!function(W,te,ee,ne){for(var ae=0;ae<ne;ae++)if(W[te+ae]!=ee.charCodeAt(ae))return!0;return!1}(_,k,"RIFF",4)){var z,q;for(h(_,k+=4),k+=8;k<_.length;){var B=d(_,k),K=h(_,k+=4);k+=4;var Y=K+(1&K);switch(B){case"VP8 ":case"VP8L":F.frames[I]===void 0&&(F.frames[I]={}),($=F.frames[I]).src_off=T?O:k-8,$.src_size=R+K+8,I++,T&&(T=!1,R=0,O=0);break;case"VP8X":($=F.header={}).feature_flags=_[k];var J=k+4;$.canvas_width=1+u(_,J),J+=3,$.canvas_height=1+u(_,J),J+=3;break;case"ALPH":T=!0,R=Y+8,O=k-8;break;case"ANIM":($=F.header).bgcolor=h(_,k),J=k+4,$.loop_count=(z=_)[(q=J)+0]<<0|z[q+1]<<8,J+=2;break;case"ANMF":var H,$;($=F.frames[I]={}).offset_x=2*u(_,k),k+=3,$.offset_y=2*u(_,k),k+=3,$.width=1+u(_,k),k+=3,$.height=1+u(_,k),k+=3,$.duration=u(_,k),k+=3,H=_[k++],$.dispose=1&H,$.blend=H>>1&1}B!="ANMF"&&(k+=Y)}return F}}(g,0);b.response=g,b.rgbaoutput=!0,b.dataurl=!1;var j=b.header?b.header:null,w=b.frames?b.frames:null;if(j){j.loop_counter=j.loop_count,f=[j.canvas_height],p=[j.canvas_width];for(var C=0;C<w.length&&w[C].blend!=0;C++);}var E=w[0],N=v.WebPDecodeRGBA(g,E.src_off,E.src_size,p,f);E.rgba=N,E.imgwidth=p[0],E.imgheight=f[0];for(var A=0;A<p[0]*f[0]*4;A++)y[A]=N[A];return this.width=p,this.height=f,this.data=y,this}(function(t){var e=function(){return typeof LE=="function"},r=function(f,p,y,v){var g=4,b=o;switch(v){case t.image_compression.FAST:g=1,b=a;break;case t.image_compression.MEDIUM:g=6,b=l;break;case t.image_compression.SLOW:g=9,b=c}f=s(f,p,y,b);var j=LE(f,{level:g});return t.__addimage__.arrayBufferToBinaryString(j)},s=function(f,p,y,v){for(var g,b,j,w=f.length/p,C=new Uint8Array(f.length+w),E=u(),N=0;N<w;N+=1){if(j=N*p,g=f.subarray(j,j+p),v)C.set(v(g,y,b),j+N);else{for(var A,_=E.length,k=[];A<_;A+=1)k[A]=E[A](g,y,b);var F=h(k.concat());C.set(k[F],j+N)}b=g}return C},i=function(f){var p=Array.apply([],f);return p.unshift(0),p},a=function(f,p){var y,v=[],g=f.length;v[0]=1;for(var b=0;b<g;b+=1)y=f[b-p]||0,v[b+1]=f[b]-y+256&255;return v},o=function(f,p,y){var v,g=[],b=f.length;g[0]=2;for(var j=0;j<b;j+=1)v=y&&y[j]||0,g[j+1]=f[j]-v+256&255;return g},l=function(f,p,y){var v,g,b=[],j=f.length;b[0]=3;for(var w=0;w<j;w+=1)v=f[w-p]||0,g=y&&y[w]||0,b[w+1]=f[w]+256-(v+g>>>1)&255;return b},c=function(f,p,y){var v,g,b,j,w=[],C=f.length;w[0]=4;for(var E=0;E<C;E+=1)v=f[E-p]||0,g=y&&y[E]||0,b=y&&y[E-p]||0,j=d(v,g,b),w[E+1]=f[E]-j+256&255;return w},d=function(f,p,y){if(f===p&&p===y)return f;var v=Math.abs(p-y),g=Math.abs(f-y),b=Math.abs(f+p-y-y);return v<=g&&v<=b?f:g<=b?p:y},u=function(){return[i,a,o,l,c]},h=function(f){var p=f.map(function(y){return y.reduce(function(v,g){return v+Math.abs(g)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(f,p,y,v){var g,b,j,w,C,E,N,A,_,k,F,I,T,R,O,z=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(j=new rfe(f)).imgData,b=j.bits,g=j.colorSpace,C=j.colors,[4,6].indexOf(j.colorType)!==-1){if(j.bits===8){_=(A=j.pixelBitlength==32?new Uint32Array(j.decodePixels().buffer):j.pixelBitlength==16?new Uint16Array(j.decodePixels().buffer):new Uint8Array(j.decodePixels().buffer)).length,F=new Uint8Array(_*j.colors),k=new Uint8Array(_);var B,K=j.pixelBitlength-j.bits;for(R=0,O=0;R<_;R++){for(T=A[R],B=0;B<K;)F[O++]=T>>>B&255,B+=j.bits;k[R]=T>>>B&255}}if(j.bits===16){_=(A=new Uint32Array(j.decodePixels().buffer)).length,F=new Uint8Array(_*(32/j.pixelBitlength)*j.colors),k=new Uint8Array(_*(32/j.pixelBitlength)),I=j.colors>1,R=0,O=0;for(var Y=0;R<_;)T=A[R++],F[O++]=T>>>0&255,I&&(F[O++]=T>>>16&255,T=A[R++],F[O++]=T>>>0&255),k[Y++]=T>>>16&255;b=8}v!==t.image_compression.NONE&&e()?(f=r(F,j.width*j.colors,j.colors,v),N=r(k,j.width,1,v)):(f=F,N=k,z=void 0)}if(j.colorType===3&&(g=this.color_spaces.INDEXED,E=j.palette,j.transparency.indexed)){var J=j.transparency.indexed,H=0;for(R=0,_=J.length;R<_;++R)H+=J[R];if((H/=255)===_-1&&J.indexOf(0)!==-1)w=[J.indexOf(0)];else if(H!==_){for(A=j.decodePixels(),k=new Uint8Array(A.length),R=0,_=A.length;R<_;R++)k[R]=J[A[R]];N=r(k,j.width,1)}}var $=function(W){var te;switch(W){case t.image_compression.FAST:te=11;break;case t.image_compression.MEDIUM:te=13;break;case t.image_compression.SLOW:te=14;break;default:te=12}return te}(v);return z===this.decode.FLATE_DECODE&&(q="/Predictor "+$+" "),q+="/Colors "+C+" /BitsPerComponent "+b+" /Columns "+j.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(N&&this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),{alias:y,data:f,index:p,filter:z,decodeParameters:q,transparency:w,palette:E,sMask:N,predictor:$,width:j.width,height:j.height,bitsPerComponent:b,colorSpace:g}}}})(sr.API),function(t){t.processGIF89A=function(e,r,s,i){var a=new nfe(e),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new IN(100).encode(d,100);return t.processJPEG.call(this,u,r,s,i)},t.processGIF87A=t.processGIF89A}(sr.API),Xl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:s,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){kn.log("bit decode error:"+r)}},Xl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Xl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*i*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Xl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*s;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Xl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&e)/e*255|0,c=(a>>10&e)/e*255|0,d=a>>15?255:0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=t}},Xl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/e*255|0,u=i*this.width*4+4*a;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=t}},Xl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Xl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=s,this.data[l+3]=o}},Xl.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,s,i){var a=new Xl(e,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new IN(100).encode(c,100);return t.processJPEG.call(this,d,r,s,i)}}(sr.API),bO.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,s,i){var a=new bO(e),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new IN(100).encode(c,100);return t.processJPEG.call(this,d,r,s,i)}}(sr.API),sr.API.processRGBA=function(t,e,r){for(var s=t.data,i=s.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,d=0;d<i;d+=4){var u=s[d],h=s[d+1],f=s[d+2],p=s[d+3];a[l++]=u,a[l++]=h,a[l++]=f,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},sr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fp=sr.API,mb=Fp.getCharWidthsArray=function(t,e){var r,s,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=e.doKerning!==!1,f=0,p=t.length,y=0,v=l[0]||c,g=[];for(r=0;r<p;r++)s=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/a)||0)/1e3):(f=h&&un(d[s])==="object"&&!isNaN(parseInt(d[s][y],10))?d[s][y]/u:0,g.push((l[s]||v)/c+f)),y=s;return g},gO=Fp.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Fp.processArabic&&(t=Fp.processArabic(t)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(t,r,i)/r:mb.apply(this,arguments).reduce(function(a,o){return a+o},0)},vO=function(t,e,r,s){for(var i=[],a=0,o=t.length,l=0;a!==o&&l+e[a]<r;)l+=e[a],a++;i.push(t.slice(0,a));var c=a;for(l=0;a!==o;)l+e[a]>s&&(i.push(t.slice(c,a)),l=0,c=a),l+=e[a],a++;return c!==a&&i.push(t.slice(c,a)),i},xO=function(t,e,r){r||(r={});var s,i,a,o,l,c,d,u=[],h=[u],f=r.textIndent||0,p=0,y=0,v=t.split(" "),g=mb.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),j=[];v.map(function(C){(C=C.split(/\s*\n/)).length>1?j=j.concat(C.map(function(E,N){return(N&&E.length?`
`:"")+E})):j.push(C[0])}),v=j,c=gO.apply(this,[b,r])}for(a=0,o=v.length;a<o;a++){var w=0;if(s=v[a],c&&s[0]==`
`&&(s=s.substr(1),w=1),f+p+(y=(i=mb.apply(this,[s,r])).reduce(function(C,E){return C+E},0))>e||w){if(y>e){for(l=vO.apply(this,[s,i,e-(f+p),e]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);y=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(C,E){return C+E},0)}else u=[s];h.push(u),f=y+c,p=g}else u.push(s),f+=p+y,p=g}return d=c?function(C,E){return(E?b:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},Fp.splitTextToSize=function(t,e,r){var s,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(xO.apply(this,[s[l],o,a]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},s={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],s["0123456789abcdef"[i]]=e[i];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,p,y,v,g=["{"];for(var b in h){if(f=h[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=a(b).slice(2)).slice(0,-1)+s[p.slice(-1)]),typeof f=="number")f<0?(y=a(f).slice(3),v="-"):(y=a(f).slice(2),v=""),y=v+y.slice(0,-1)+s[y.slice(-1)];else{if(un(f)!=="object")throw new Error("Don't know what to do with value type "+un(f)+".");y=o(f)}g.push(p+y)}return g.push("}"),g.join("")},l=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,y,v,g={},b=1,j=g,w=[],C="",E="",N=h.length-1,A=1;A<N;A+=1)(v=h[A])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(v):v=="{"?(w.push([j,y]),j={},y=void 0):v=="}"?((p=w.pop())[0][p[1]]=j,y=void 0,j=p[0]):v=="-"?b=-1:y===void 0?r.hasOwnProperty(v)?(C+=r[v],y=parseInt(C,16)*b,b=1,C=""):C+=v:r.hasOwnProperty(v)?(E+=r[v],j[y]=parseInt(E,16)*b,b=1,y=void 0,E=""):E+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var y=d.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(sr.API),function(t){var e=function(r){for(var s=r.length,i=new Uint8Array(s),a=0;a<s;a++)i[a]=r.charCodeAt(a);return i};t.API.events.push(["addFont",function(r){var s=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(yx(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,s)}}])}(sr),function(t){function e(){return(mr.canvg?Promise.resolve(mr.canvg):o1(()=>import("./index.es-DXQcT65c.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}sr.API.addSvgAsImage=function(r,s,i,a,o,l,c,d){if(isNaN(s)||isNaN(i))throw kn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw kn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=a,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(y){return y.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),s,i,a,o,c,d)})}}(),sr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(e,r);return this},sr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var s,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(y,v){var g,b=!1;for(g=0;g<y.length;g+=1)y[g]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(un(t)==="object"){for(i in t)if(a=t[i],f(l,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&f(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(d=0;d<a.length;d+=1)if(s=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(u=0;u<a[d].length;u+=1)typeof a[d][u]!="number"&&(s=!1);s===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(sr.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=a.length;h<f;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},s=function(a){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(a).sort(function(p,y){return p-y})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<f.length;y++)p+=String.fromCharCode(f[y]);var v=d();u({data:p,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Kp(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var j=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Kp(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Kp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+j+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var y=d();u({data:f,addLength1:!0,objectId:y}),c("endobj");var v=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Kp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Kp(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,d=a.y,u=a.options||{},h=a.mutex||{},f=h.pdfEscape,p=h.activeFontKey,y=h.fonts,v=p,g="",b=0,j="",w=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(j=l,v=p,Array.isArray(l)&&(j=l[0]),b=0;b<j.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[j[b].charCodeAt(0)]),o||j[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?g+=j[b]:g+="";var C="";return parseInt(v.slice(1))<14||w==="WinAnsiEncoding"?C=f(g,v).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(C=r(g,y[v])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};e.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(sr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,s){return e.call(this),this.internal.vFS[r]=s,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(sr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(s){var i,a,o,l,c,d,u,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,w=0;this.__bidiEngine__={};var C=function(I){var T=I.charCodeAt(),R=T>>8,O=v[R];return O!==void 0?h[256*O+(255&T)]:R===252||R===253?"AL":b.test(R)?"L":R===8?"R":"N"},E=function(I){for(var T,R=0;R<I.length;R++){if((T=C(I.charAt(R)))==="L")return!1;if(T==="R")return!0}return!1},N=function(I,T,R,O){var z,q,B,K,Y=T[O];switch(Y){case"L":case"R":j=!1;break;case"N":case"AN":break;case"EN":j&&(Y="AN");break;case"AL":j=!0,Y="R";break;case"WS":Y="N";break;case"CS":O<1||O+1>=T.length||(z=R[O-1])!=="EN"&&z!=="AN"||(q=T[O+1])!=="EN"&&q!=="AN"?Y="N":j&&(q="AN"),Y=q===z?q:"N";break;case"ES":Y=(z=O>0?R[O-1]:"B")==="EN"&&O+1<T.length&&T[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&R[O-1]==="EN"){Y="EN";break}if(j){Y="N";break}for(B=O+1,K=T.length;B<K&&T[B]==="ET";)B++;Y=B<K&&T[B]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(K=T.length,B=O+1;B<K&&T[B]==="NSM";)B++;if(B<K){var J=I[O],H=J>=1425&&J<=2303||J===64286;if(z=T[B],H&&(z==="R"||z==="AL")){Y="R";break}}}Y=O<1||(z=T[O-1])==="B"?"N":R[O-1];break;case"B":j=!1,i=!0,Y=w;break;case"S":a=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"BN":Y="N"}return Y},A=function(I,T,R){var O=I.split("");return R&&_(O,R,{hiLevel:w}),O.reverse(),T&&T.reverse(),O.join("")},_=function(I,T,R){var O,z,q,B,K,Y=-1,J=I.length,H=0,$=[],W=w?p:f,te=[];for(j=!1,i=!1,a=!1,z=0;z<J;z++)te[z]=C(I[z]);for(q=0;q<J;q++){if(K=H,$[q]=N(I,te,$,q),O=240&(H=W[K][y[$[q]]]),H&=15,T[q]=B=W[H][5],O>0)if(O===16){for(z=Y;z<q;z++)T[z]=1;Y=-1}else Y=-1;if(W[H][6])Y===-1&&(Y=q);else if(Y>-1){for(z=Y;z<q;z++)T[z]=B;Y=-1}te[q]==="B"&&(T[q]=0),R.hiLevel|=B}a&&function(ee,ne,ae){for(var ve=0;ve<ae;ve++)if(ee[ve]==="S"){ne[ve]=w;for(var xe=ve-1;xe>=0&&ee[xe]==="WS";xe--)ne[xe]=w}}(te,T,J)},k=function(I,T,R,O,z){if(!(z.hiLevel<I)){if(I===1&&w===1&&!i)return T.reverse(),void(R&&R.reverse());for(var q,B,K,Y,J=T.length,H=0;H<J;){if(O[H]>=I){for(K=H+1;K<J&&O[K]>=I;)K++;for(Y=H,B=K-1;Y<B;Y++,B--)q=T[Y],T[Y]=T[B],T[B]=q,R&&(q=R[Y],R[Y]=R[B],R[B]=q);H=K}H++}}},F=function(I,T,R){var O=I.split(""),z={hiLevel:w};return R||(R=[]),_(O,R,z),function(q,B,K){if(K.hiLevel!==0&&u)for(var Y,J=0;J<q.length;J++)B[J]===1&&(Y=g.indexOf(q[J]))>=0&&(q[J]=g[Y+1])}(O,R,z),k(2,O,T,R,z),k(1,O,T,R,z),O.join("")};return this.__bidiEngine__.doBidiReorder=function(I,T,R){if(function(z,q){if(q)for(var B=0;B<z.length;B++)q[B]=B;l===void 0&&(l=E(z)),d===void 0&&(d=E(z))}(I,T),o||!c||d)if(o&&c&&l^d)w=l?1:0,I=A(I,T,R);else if(!o&&c&&d)w=l?1:0,I=F(I,T,R),I=A(I,T);else if(!o||l||c||d){if(o&&!c&&l^d)I=A(I,T),l?(w=0,I=F(I,T,R)):(w=1,I=F(I,T,R),I=A(I,T));else if(o&&l&&!c&&d)w=1,I=F(I,T,R),I=A(I,T);else if(!o&&!c&&l^d){var O=u;l?(w=1,I=F(I,T,R),w=0,u=!1,I=F(I,T,R),u=O):(w=0,I=F(I,T,R),I=A(I,T),w=1,u=!1,I=F(I,T,R),u=O,I=A(I,T))}}else w=0,I=F(I,T,R);else w=l?1:0,I=F(I,T,R);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,c=I.isOutputVisual,l=I.isInputRtl,d=I.isOutputRtl,u=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(s){var i=s.text,a=(s.x,s.y,s.options||{}),o=(s.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);s.text=o}else s.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(sr),sr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new nf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new xfe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new sfe(this.contents),this.head=new afe(this),this.name=new ufe(this),this.cmap=new EU(this),this.toUnicode={},this.hhea=new ofe(this),this.maxp=new hfe(this),this.hmtx=new ffe(this),this.post=new cfe(this),this.os2=new lfe(this),this.loca=new vfe(this),this.glyf=new mfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,s,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),(32768&(r=i>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,s){var i,a,o,l;for(o=0,a=0,l=(e=""+e).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},t}();var vc,nf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,s;for(s=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},t.prototype.writeString=function(e){var r,s,i;for(i=[],r=0,s=e.length;0<=s?r<s:r>s;r=0<=s?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,s,i,a,o,l,c;return e=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*s+4294967296*i+16777216*a+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,s;return r=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,s;for(r=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)r.push(this.readByte());return r},t.prototype.write=function(e){var r,s,i,a;for(a=[],s=0,i=e.length;s<i;s++)r=e[s],a.push(this.writeByte(r));return a},t}(),sfe=function(){var t;function e(r){var s,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(r){var s,i,a,o,l,c,d,u,h,f,p,y,v;for(v in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(i=new nf).writeInt(this.scalarType),i.writeShort(p),i.writeShort(h),i.writeShort(o),i.writeShort(u),a=16*p,d=i.pos+a,l=null,y=[],r)for(f=r[v],i.writeString(v),i.writeInt(t(f)),i.writeInt(d),i.writeInt(f.length),y=y.concat(f),v==="head"&&(l=d),d+=f.length;d%4;)y.push(0),d++;return i.write(y),s=2981146554-t(i.data),i.pos=l+8,i.writeUInt32(s),i.data},t=function(r){var s,i,a,o;for(r=PU.call(r);r.length%4;)r.push(0);for(a=new nf(r),i=0,s=0,o=r.length;s<o;s=s+=4)i+=a.readUInt32();return 4294967295&i},e}(),ife={}.hasOwnProperty,vd=function(t,e){for(var r in e)ife.call(e,r)&&(t[r]=e[r]);function s(){this.constructor=t}return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};vc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var afe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var s;return(s=new nf).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},e}(),jO=function(){function t(e,r){var s,i,a,o,l,c,d,u,h,f,p,y,v,g,b,j,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),f=p/2,e.pos+=6,a=function(){var C,E;for(E=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)E.push(e.readUInt16());return E}(),e.pos+=2,v=function(){var C,E;for(E=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)E.push(e.readUInt16());return E}(),d=function(){var C,E;for(E=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)E.push(e.readUInt16());return E}(),u=function(){var C,E;for(E=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)E.push(e.readUInt16());return E}(),i=(this.length-e.pos+this.offset)/2,l=function(){var C,E;for(E=[],c=C=0;0<=i?C<i:C>i;c=0<=i?++C:--C)E.push(e.readUInt16());return E}(),c=b=0,w=a.length;b<w;c=++b)for(g=a[c],s=j=y=v[c];y<=g?j<=g:j>=g;s=y<=g?++j:--j)u[c]===0?o=s+d[c]:(o=l[u[c]/2+(s-y)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}e.pos=h}return t.encode=function(e,r){var s,i,a,o,l,c,d,u,h,f,p,y,v,g,b,j,w,C,E,N,A,_,k,F,I,T,R,O,z,q,B,K,Y,J,H,$,W,te,ee,ne,ae,ve,xe,Se,Pe,Ce;switch(O=new nf,o=Object.keys(e).sort(function(He,Ke){return He-Ke}),r){case"macroman":for(v=0,g=function(){var He=[];for(y=0;y<256;++y)He.push(0);return He}(),j={0:0},a={},z=0,Y=o.length;z<Y;z++)j[xe=e[i=o[z]]]==null&&(j[xe]=++v),a[i]={old:e[i],new:j[e[i]]},g[i]=j[e[i]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(g),{charMap:a,subtable:O.data,maxGlyphID:v+1};case"unicode":for(T=[],h=[],w=0,j={},s={},b=d=null,q=0,J=o.length;q<J;q++)j[E=e[i=o[q]]]==null&&(j[E]=++w),s[i]={old:E,new:j[E]},l=j[E]-i,b!=null&&l===d||(b&&h.push(b),T.push(i),d=l),b=i;for(b&&h.push(b),h.push(65535),T.push(65535),F=2*(k=T.length),_=2*Math.pow(Math.log(k)/Math.LN2,2),f=Math.log(_/2)/Math.LN2,A=2*k-_,c=[],N=[],p=[],y=B=0,H=T.length;B<H;y=++B){if(I=T[y],u=h[y],I===65535){c.push(0),N.push(0);break}if(I-(R=s[I].new)>=32768)for(c.push(0),N.push(2*(p.length+k-y)),i=K=I;I<=u?K<=u:K>=u;i=I<=u?++K:--K)p.push(s[i].new);else c.push(R-I),N.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*k+2*p.length),O.writeUInt16(0),O.writeUInt16(F),O.writeUInt16(_),O.writeUInt16(f),O.writeUInt16(A),ae=0,$=h.length;ae<$;ae++)i=h[ae],O.writeUInt16(i);for(O.writeUInt16(0),ve=0,W=T.length;ve<W;ve++)i=T[ve],O.writeUInt16(i);for(Se=0,te=c.length;Se<te;Se++)l=c[Se],O.writeUInt16(l);for(Pe=0,ee=N.length;Pe<ee;Pe++)C=N[Pe],O.writeUInt16(C);for(Ce=0,ne=p.length;Ce<ne;Ce++)v=p[Ce],O.writeUInt16(v);return{charMap:s,subtable:O.data,maxGlyphID:w+1}}},t}(),EU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="cmap",e.prototype.parse=function(r){var s,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)s=new jO(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(r,s){var i,a;return s==null&&(s="macroman"),i=jO.encode(r,s),(a=new nf).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},e}(),ofe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),lfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,i;for(i=[],s=0;s<10;++s)i.push(r.readByte());return i}(),this.charRange=function(){var s,i;for(i=[],s=0;s<4;++s)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,i;for(i=[],s=0;s<2;s=++s)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),cfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="post",e.prototype.parse=function(r){var s,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(i=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)s=r.readByte(),a.push(this.names.push(r.readString(s)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},e}(),dfe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ufe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="name",e.prototype.parse=function(r){var s,i,a,o,l,c,d,u,h,f,p;for(r.pos=this.offset,r.readShort(),s=r.readShort(),c=r.readShort(),i=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,f=i.length;h<f;o=++h)a=i[o],r.pos=a.offset,u=r.readString(a.length),l=new dfe(u,a),d[p=a.nameID]==null&&(d[p]=[]),d[a.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),hfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),ffe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var s,i,a,o,l,c,d;for(r.pos=this.offset,this.metrics=[],s=0,c=this.file.hhea.numberOfMetrics;0<=c?s<c:s>c;s=0<=c?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],s=u=0;0<=a?u<a:u>a;s=0<=a?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],d=[],s=l=0;0<=a?l<a:l>a;s=0<=a?++l:--l)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),PU=[].slice,mfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var s,i,a,o,l,c,d,u,h,f;return r in this.cache?this.cache[r]:(o=this.file.loca,s=this.file.contents,i=o.indexOf(r),(a=o.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+i,l=(c=new nf(s.read(a))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new gfe(c,u,f,d,h):new pfe(c,l,u,f,d,h),this.cache[r]))},e.prototype.encode=function(r,s,i){var a,o,l,c,d;for(l=[],o=[],c=0,d=s.length;c<d;c++)a=r[s[c]],o.push(l.length),a&&(l=l.concat(a.encode(i)));return o.push(l.length),{table:l,offsets:o}},e}(),pfe=function(){function t(e,r,s,i,a,o){this.raw=e,this.numberOfContours=r,this.xMin=s,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),gfe=function(){function t(e,r,s,i,a){var o,l;for(this.raw=e,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,s;for(r=new nf(PU.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),vfe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vd(e,vc),e.prototype.tag="loca",e.prototype.parse=function(r){var s,i;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(r.readUInt32());return o}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,s){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,l=0;l<i.length;++l)if(i[l]=a,o<s.length&&s[o]==l){++o,i[l]=a;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(a+=d)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},e}(),xfe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,s,i,a;for(r in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)s=a[r],e[r]=i[s];return e},t.prototype.glyphsFor=function(e){var r,s,i,a,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[a=e[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(s=i[a])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))s=c[a],i[a]=s;return i},t.prototype.encode=function(e,r){var s,i,a,o,l,c,d,u,h,f,p,y,v,g,b;for(i in s=EU.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},b=s.charMap)p[(c=b[i]).old]=c.new;for(y in f=s.maxGlyphID,o)y in p||(p[y]=f++);return u=function(j){var w,C;for(w in C={},j)C[j[w]]=w;return C}(p),h=Object.keys(u).sort(function(j,w){return j-w}),v=function(){var j,w,C;for(C=[],j=0,w=h.length;j<w;j++)l=h[j],C.push(u[l]);return C}(),a=this.font.glyf.encode(o,v,p),d=this.font.loca.encode(a.offsets,v),g={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();sr.API.PDFObject=function(){var t;function e(){}return t=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},e.convert=function(r){var s,i,a,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)s=r[l],d.push(e.convert(s));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+e.convert(o));return a.push(">>"),a.join(`
`)}return""+r},e}();const yfe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Xhe,AcroFormAppearance:Bt,AcroFormButton:ai,AcroFormCheckBox:wx,AcroFormChoiceField:ym,AcroFormComboBox:jm,AcroFormEditBox:bx,AcroFormListBox:bm,AcroFormPasswordField:Nx,AcroFormPushButton:jx,AcroFormRadioButton:wm,AcroFormTextField:Hh,GState:Yx,ShadingPattern:Ih,TilingPattern:cm,default:sr,jsPDF:sr},Symbol.toStringTag,{value:"Module"}));var $b={exports:{}};const bfe=FG(yfe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var wO=$b.exports,NO;function jfe(){return NO||(NO=1,function(t,e){(function(s,i){t.exports=i(function(){try{return bfe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof wO<"u"?wO:typeof window<"u"?window:typeof self<"u"?self:nx,function(r){return function(){var s={172:function(l,c){var d=this&&this.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(v[b]=g[b])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function v(){this.constructor=p}p.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var u=function(){function f(p,y,v){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=v,this.doc=p.getDocument()}return f}();c.HookData=u;var h=function(f){d(p,f);function p(y,v,g,b,j,w){var C=f.call(this,y,v,w)||this;return C.cell=g,C.row=b,C.column=j,C.section=b.section,C}return p}(u);c.CellHookData=h},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var u=d(4),h=d(136),f=d(744),p=d(776),y=d(664),v=d(972);function g(b){b.API.autoTable=function(){for(var j=[],w=0;w<arguments.length;w++)j[w]=arguments[w];var C;j.length===1?C=j[0]:(console.error("Use of deprecated autoTable initiation"),C=j[2]||{},C.columns=j[0],C.body=j[1]);var E=(0,p.parseInput)(this,C),N=(0,v.createTable)(this,E);return(0,y.drawTable)(this,N),this},b.API.lastAutoTable=!1,b.API.previousAutoTable=!1,b.API.autoTable.previous=!1,b.API.autoTableText=function(j,w,C,E){(0,h.default)(j,w,C,E,this)},b.API.autoTableSetDefaults=function(j){return f.DocHandler.setDefaults(j,this),this},b.autoTableSetDefaults=function(j,w){f.DocHandler.setDefaults(j,w)},b.API.autoTableHtmlToJson=function(j,w){var C;if(w===void 0&&(w=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var E=new f.DocHandler(this),N=(0,u.parseHtml)(E,j,window,w,!1),A=N.head,_=N.body,k=((C=A[0])===null||C===void 0?void 0:C.map(function(F){return F.content}))||[];return{columns:k,rows:_,data:_}},b.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var j=this.lastAutoTable;return j&&j.finalY?j.finalY:0},b.API.autoTableAddPageContent=function(j){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),b.API.autoTable.globalDefaults||(b.API.autoTable.globalDefaults={}),b.API.autoTable.globalDefaults.addPageContent=j,this},b.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=g},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,h,f,p,y){p=p||{};var v=1.15,g=y.internal.scaleFactor,b=y.internal.getFontSize()/g,j=y.getLineHeightFactor?y.getLineHeightFactor():v,w=b*j,C=/\r\n|\r|\n/g,E="",N=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(E=typeof u=="string"?u.split(C):u,N=E.length||1),f+=b*(2-v),p.valign==="middle"?f-=N/2*w:p.valign==="bottom"&&(f-=N*w),p.halign==="center"||p.halign==="right"){var A=b;if(p.halign==="center"&&(A*=.5),E&&N>=1){for(var _=0;_<E.length;_++)y.text(E[_],h-y.getStringUnitWidth(E[_])*A,f),f+=w;return y}h-=y.getStringUnitWidth(u)*A}return p.halign==="justify"?y.text(u,h,f,{maxWidth:p.maxWidth||100,align:"justify"}):y.text(u,h,f),y}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(y,v,g){g.applyStyles(v,!0);var b=Array.isArray(y)?y:[y],j=b.map(function(w){return g.getTextWidth(w)}).reduce(function(w,C){return Math.max(w,C)},0);return j}c.getStringWidth=d;function u(y,v,g,b){var j=v.settings.tableLineWidth,w=v.settings.tableLineColor;y.applyStyles({lineWidth:j,lineColor:w});var C=h(j,!1);C&&y.rect(g.x,g.y,v.getWidth(y.pageSize().width),b.y-g.y,C)}c.addTableBorder=u;function h(y,v){var g=y>0,b=v||v===0;return g&&b?"DF":g?"S":b?"F":null}c.getFillStyle=h;function f(y,v){var g,b,j,w;if(y=y||v,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=v}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(g=y.left)!==null&&g!==void 0?g:v,top:(b=y.top)!==null&&b!==void 0?b:v,right:(j=y.right)!==null&&j!==void 0?j:v,bottom:(w=y.bottom)!==null&&w!==void 0?w:v}):(typeof y!="number"&&(y=v),{top:y,right:y,bottom:y,left:y})}c.parseSpacing=f;function p(y,v){var g=f(v.settings.margin,0);return y.pageSize().width-(g.left+g.right)}c.getPageAvailableWidth=p},796:function(l,c){var d=this&&this.__extends||function(){var p=function(y,v){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var j in b)Object.prototype.hasOwnProperty.call(b,j)&&(g[j]=b[j])},p(y,v)};return function(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");p(y,v);function g(){this.constructor=y}y.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var u=function(p){d(y,p);function y(v){var g=p.call(this)||this;return g._element=v,g}return y}(Array);c.HtmlRowInput=u;function h(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=h;function f(p){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[p]}c.getTheme=f},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var u=d(420);function h(g,b,j,w,C){var E={},N=1.3333333333333333,A=p(b,function(Y){return C.getComputedStyle(Y).backgroundColor});A!=null&&(E.fillColor=A);var _=p(b,function(Y){return C.getComputedStyle(Y).color});_!=null&&(E.textColor=_);var k=v(w,j);k&&(E.cellPadding=k);var F="borderTopColor",I=N*j,T=w.borderTopWidth;if(w.borderBottomWidth===T&&w.borderRightWidth===T&&w.borderLeftWidth===T){var R=(parseFloat(T)||0)/I;R&&(E.lineWidth=R)}else E.lineWidth={top:(parseFloat(w.borderTopWidth)||0)/I,right:(parseFloat(w.borderRightWidth)||0)/I,bottom:(parseFloat(w.borderBottomWidth)||0)/I,left:(parseFloat(w.borderLeftWidth)||0)/I},E.lineWidth.top||(E.lineWidth.right?F="borderRightColor":E.lineWidth.bottom?F="borderBottomColor":E.lineWidth.left&&(F="borderLeftColor"));var O=p(b,function(Y){return C.getComputedStyle(Y)[F]});O!=null&&(E.lineColor=O);var z=["left","right","center","justify"];z.indexOf(w.textAlign)!==-1&&(E.halign=w.textAlign),z=["middle","bottom","top"],z.indexOf(w.verticalAlign)!==-1&&(E.valign=w.verticalAlign);var q=parseInt(w.fontSize||"");isNaN(q)||(E.fontSize=q/N);var B=f(w);B&&(E.fontStyle=B);var K=(w.fontFamily||"").toLowerCase();return g.indexOf(K)!==-1&&(E.font=K),E}c.parseCss=h;function f(g){var b="";return(g.fontWeight==="bold"||g.fontWeight==="bolder"||parseInt(g.fontWeight)>=700)&&(b="bold"),(g.fontStyle==="italic"||g.fontStyle==="oblique")&&(b+="italic"),b}function p(g,b){var j=y(g,b);if(!j)return null;var w=j.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!w||!Array.isArray(w))return null;var C=[parseInt(w[1]),parseInt(w[2]),parseInt(w[3])],E=parseInt(w[4]);return E===0||isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function y(g,b){var j=b(g);return j==="rgba(0, 0, 0, 0)"||j==="transparent"||j==="initial"||j==="inherit"?g.parentElement==null?null:y(g.parentElement,b):j}function v(g,b){var j=[g.paddingTop,g.paddingRight,g.paddingBottom,g.paddingLeft],w=96/(72/b),C=(parseInt(g.lineHeight)-parseInt(g.fontSize))/b/2,E=j.map(function(A){return parseInt(A||"0")/w}),N=(0,u.parseSpacing)(E,0);return C>N.top&&(N.top=C),C>N.bottom&&(N.bottom=C),N}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},u=function(){function h(f){this.jsPDFDocument=f,this.userStyles={textColor:f.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:f.internal.getFontSize(),fontStyle:f.internal.getFont().fontStyle,font:f.internal.getFont().fontName,lineWidth:f.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:f.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(f,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=f:d=f},h.unifyColor=function(f){return Array.isArray(f)?f:typeof f=="number"?[f,f,f]:typeof f=="string"?[f]:null},h.prototype.applyStyles=function(f,p){var y,v,g;p===void 0&&(p=!1),f.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(f.fontStyle);var b=this.jsPDFDocument.internal.getFont(),j=b.fontStyle,w=b.fontName;if(f.font&&(w=f.font),f.fontStyle){j=f.fontStyle;var C=this.getFontList()[w];C&&C.indexOf(j)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(C[0]),j=C[0])}if(this.jsPDFDocument.setFont(w,j),f.fontSize&&this.jsPDFDocument.setFontSize(f.fontSize),!p){var E=h.unifyColor(f.fillColor);E&&(y=this.jsPDFDocument).setFillColor.apply(y,E),E=h.unifyColor(f.textColor),E&&(v=this.jsPDFDocument).setTextColor.apply(v,E),E=h.unifyColor(f.lineColor),E&&(g=this.jsPDFDocument).setDrawColor.apply(g,E),typeof f.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(f.lineWidth)}},h.prototype.splitTextToSize=function(f,p,y){return this.jsPDFDocument.splitTextToSize(f,p,y)},h.prototype.rect=function(f,p,y,v,g){return this.jsPDFDocument.rect(f,p,y,v,g)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(f){return this.jsPDFDocument.getTextWidth(f)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(f){this.jsPDFDocument.setPage(f)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return d||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var f=this.jsPDFDocument.internal.pageSize;return f.width==null&&(f={width:f.getWidth(),height:f.getHeight()}),f},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var f=this.jsPDFDocument;return f.getLineHeightFactor?f.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(f){return f/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var f=this.jsPDFDocument.internal.getCurrentPageInfo();return f?f.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();c.DocHandler=u},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var u=d(903),h=d(796);function f(v,g,b,j,w){var C,E;j===void 0&&(j=!1),w===void 0&&(w=!1);var N;typeof g=="string"?N=b.document.querySelector(g):N=g;var A=Object.keys(v.getFontList()),_=v.scaleFactor(),k=[],F=[],I=[];if(!N)return console.error("Html table could not be found with input: ",g),{head:k,body:F,foot:I};for(var T=0;T<N.rows.length;T++){var R=N.rows[T],O=(E=(C=R?.parentElement)===null||C===void 0?void 0:C.tagName)===null||E===void 0?void 0:E.toLowerCase(),z=p(A,_,b,R,j,w);z&&(O==="thead"?k.push(z):O==="tfoot"?I.push(z):F.push(z))}return{head:k,body:F,foot:I}}c.parseHtml=f;function p(v,g,b,j,w,C){for(var E=new h.HtmlRowInput(j),N=0;N<j.cells.length;N++){var A=j.cells[N],_=b.getComputedStyle(A);if(w||_.display!=="none"){var k=void 0;C&&(k=(0,u.parseCss)(v,A,g,_,b)),E.push({rowSpan:A.rowSpan,colSpan:A.colSpan,styles:k,_element:A,content:y(A)})}}var F=b.getComputedStyle(j);if(E.length>0&&(w||F.display!=="none"))return E}function y(v){var g=v.cloneNode(!0);return g.innerHTML=g.innerHTML.replace(/\n/g,"").replace(/ +/g," "),g.innerHTML=g.innerHTML.split(/<br.*?>/).map(function(b){return b.trim()}).join(`
`),g.innerText||g.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var u=d(4),h=d(356),f=d(420),p=d(744),y=d(792);function v(N,A){var _=new p.DocHandler(N),k=_.getDocumentOptions(),F=_.getGlobalOptions();(0,y.default)(_,F,k,A);var I=(0,h.assign)({},F,k,A),T;typeof window<"u"&&(T=window);var R=g(F,k,A),O=b(F,k,A),z=j(_,I),q=C(_,I,T);return{id:A.tableId,content:q,hooks:O,styles:R,settings:z}}c.parseInput=v;function g(N,A,_){for(var k={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},F=function(O){if(O==="columnStyles"){var z=N[O],q=A[O],B=_[O];k.columnStyles=(0,h.assign)({},z,q,B)}else{var K=[N,A,_],Y=K.map(function(J){return J[O]||{}});k[O]=(0,h.assign)({},Y[0],Y[1],Y[2])}},I=0,T=Object.keys(k);I<T.length;I++){var R=T[I];F(R)}return k}function b(N,A,_){for(var k=[N,A,_],F={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},I=0,T=k;I<T.length;I++){var R=T[I];R.didParseCell&&F.didParseCell.push(R.didParseCell),R.willDrawCell&&F.willDrawCell.push(R.willDrawCell),R.didDrawCell&&F.didDrawCell.push(R.didDrawCell),R.willDrawPage&&F.willDrawPage.push(R.willDrawPage),R.didDrawPage&&F.didDrawPage.push(R.didDrawPage)}return F}function j(N,A){var _,k,F,I,T,R,O,z,q,B,K,Y,J=(0,f.parseSpacing)(A.margin,40/N.scaleFactor()),H=(_=w(N,A.startY))!==null&&_!==void 0?_:J.top,$;A.showFoot===!0?$="everyPage":A.showFoot===!1?$="never":$=(k=A.showFoot)!==null&&k!==void 0?k:"everyPage";var W;A.showHead===!0?W="everyPage":A.showHead===!1?W="never":W=(F=A.showHead)!==null&&F!==void 0?F:"everyPage";var te=(I=A.useCss)!==null&&I!==void 0?I:!1,ee=A.theme||(te?"plain":"striped"),ne=!!A.horizontalPageBreak,ae=(T=A.horizontalPageBreakRepeat)!==null&&T!==void 0?T:null;return{includeHiddenHtml:(R=A.includeHiddenHtml)!==null&&R!==void 0?R:!1,useCss:te,theme:ee,startY:H,margin:J,pageBreak:(O=A.pageBreak)!==null&&O!==void 0?O:"auto",rowPageBreak:(z=A.rowPageBreak)!==null&&z!==void 0?z:"auto",tableWidth:(q=A.tableWidth)!==null&&q!==void 0?q:"auto",showHead:W,showFoot:$,tableLineWidth:(B=A.tableLineWidth)!==null&&B!==void 0?B:0,tableLineColor:(K=A.tableLineColor)!==null&&K!==void 0?K:200,horizontalPageBreak:ne,horizontalPageBreakRepeat:ae,horizontalPageBreakBehaviour:(Y=A.horizontalPageBreakBehaviour)!==null&&Y!==void 0?Y:"afterAllRows"}}function w(N,A){var _=N.getLastAutoTable(),k=N.scaleFactor(),F=N.pageNumber(),I=!1;if(_&&_.startPageNumber){var T=_.startPageNumber+_.pageNumber-1;I=T===F}return typeof A=="number"?A:(A==null||A===!1)&&I&&_?.finalY!=null?_.finalY+20/k:null}function C(N,A,_){var k=A.head||[],F=A.body||[],I=A.foot||[];if(A.html){var T=A.includeHiddenHtml;if(_){var R=(0,u.parseHtml)(N,A.html,_,T,A.useCss)||{};k=R.head||k,F=R.body||k,I=R.foot||k}else console.error("Cannot parse html in non browser environment")}var O=A.columns||E(k,F,I);return{columns:O,head:k,body:F,foot:I}}function E(N,A,_){var k=N[0]||A[0]||_[0]||[],F=[];return Object.keys(k).filter(function(I){return I!=="_element"}).forEach(function(I){var T=1,R;Array.isArray(k)?R=k[parseInt(I)]:R=k[I],typeof R=="object"&&!Array.isArray(R)&&(T=R?.colSpan||1);for(var O=0;O<T;O++){var z=void 0;Array.isArray(k)?z=F.length:z=I+(O>0?"_".concat(O):"");var q={dataKey:z};F.push(q)}}),F}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(h,f,p,y){for(var v=function(w){w&&typeof w!="object"&&console.error("The options parameter should be of type object, is: "+typeof w),typeof w.extendWidth<"u"&&(w.tableWidth=w.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof w.margins<"u"&&(typeof w.margin>"u"&&(w.margin=w.margins),console.error("Use of deprecated option: margins, use margin instead.")),w.startY&&typeof w.startY!="number"&&(console.error("Invalid value for startY option",w.startY),delete w.startY),!w.didDrawPage&&(w.afterPageContent||w.beforePageContent||w.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),w.didDrawPage=function(I){h.applyStyles(h.userStyles),w.beforePageContent&&w.beforePageContent(I),h.applyStyles(h.userStyles),w.afterPageContent&&w.afterPageContent(I),h.applyStyles(h.userStyles),w.afterPageAdd&&I.pageNumber>1&&I.afterPageAdd(I),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(I){w[I]&&console.error('The "'.concat(I,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(I){var T=I[0],R=I[1];w[R]&&(console.error("Use of deprecated option ".concat(R,". Use ").concat(T," instead")),w[T]=w[R])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(I){var T=typeof I=="string"?I:I[0],R=typeof I=="string"?I:I[1];typeof w[T]<"u"&&(typeof w.styles[R]>"u"&&(w.styles[R]=w[T]),console.error("Use of deprecated option: "+T+", use the style "+R+" instead."))});for(var C=0,E=["styles","bodyStyles","headStyles","footStyles"];C<E.length;C++){var N=E[C];u(w[N]||{})}for(var A=w.columnStyles||{},_=0,k=Object.keys(A);_<k.length;_++){var F=k[_];u(A[F]||{})}},g=0,b=[f,p,y];g<b.length;g++){var j=b[g];v(j)}}c.default=d;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var u=d(796),h=d(172),f=d(420),p=function(){function b(j,w){this.pageNumber=1,this.pageCount=1,this.id=j.id,this.settings=j.settings,this.styles=j.styles,this.hooks=j.hooks,this.columns=w.columns,this.head=w.head,this.body=w.body,this.foot=w.foot}return b.prototype.getHeadHeight=function(j){return this.head.reduce(function(w,C){return w+C.getMaxCellHeight(j)},0)},b.prototype.getFootHeight=function(j){return this.foot.reduce(function(w,C){return w+C.getMaxCellHeight(j)},0)},b.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},b.prototype.callCellHooks=function(j,w,C,E,N,A){for(var _=0,k=w;_<k.length;_++){var F=k[_],I=new h.CellHookData(j,this,C,E,N,A),T=F(I)===!1;if(C.text=Array.isArray(C.text)?C.text:[C.text],T)return!1}return!0},b.prototype.callEndPageHooks=function(j,w){j.applyStyles(j.userStyles);for(var C=0,E=this.hooks.didDrawPage;C<E.length;C++){var N=E[C];N(new h.HookData(j,this,w))}},b.prototype.callWillDrawPageHooks=function(j,w){for(var C=0,E=this.hooks.willDrawPage;C<E.length;C++){var N=E[C];N(new h.HookData(j,this,w))}},b.prototype.getWidth=function(j){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var w=this.columns.reduce(function(E,N){return E+N.wrappedWidth},0);return w}else{var C=this.settings.margin;return j-C.left-C.right}},b}();c.Table=p;var y=function(){function b(j,w,C,E,N){N===void 0&&(N=!1),this.height=0,this.raw=j,j instanceof u.HtmlRowInput&&(this.raw=j._element,this.element=j._element),this.index=w,this.section=C,this.cells=E,this.spansMultiplePages=N}return b.prototype.getMaxCellHeight=function(j){var w=this;return j.reduce(function(C,E){var N;return Math.max(C,((N=w.cells[E.index])===null||N===void 0?void 0:N.height)||0)},0)},b.prototype.hasRowSpan=function(j){var w=this;return j.filter(function(C){var E=w.cells[C.index];return E?E.rowSpan>1:!1}).length>0},b.prototype.canEntireRowFit=function(j,w){return this.getMaxCellHeight(w)<=j},b.prototype.getMinimumRowHeight=function(j,w){var C=this;return j.reduce(function(E,N){var A=C.cells[N.index];if(!A)return 0;var _=w.getLineHeight(A.styles.fontSize),k=A.padding("vertical"),F=k+_;return F>E?F:E},0)},b}();c.Row=y;var v=function(){function b(j,w,C){var E,N;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=w,this.section=C,this.raw=j;var A=j;j!=null&&typeof j=="object"&&!Array.isArray(j)?(this.rowSpan=j.rowSpan||1,this.colSpan=j.colSpan||1,A=(N=(E=j.content)!==null&&E!==void 0?E:j.title)!==null&&N!==void 0?N:j,j._element&&(this.raw=j._element)):(this.rowSpan=1,this.colSpan=1);var _=A!=null?""+A:"",k=/\r\n|\r|\n/g;this.text=_.split(k)}return b.prototype.getTextPos=function(){var j;if(this.styles.valign==="top")j=this.y+this.padding("top");else if(this.styles.valign==="bottom")j=this.y+this.height-this.padding("bottom");else{var w=this.height-this.padding("vertical");j=this.y+w/2+this.padding("top")}var C;if(this.styles.halign==="right")C=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var E=this.width-this.padding("horizontal");C=this.x+E/2+this.padding("left")}else C=this.x+this.padding("left");return{x:C,y:j}},b.prototype.getContentHeight=function(j,w){w===void 0&&(w=1.15);var C=Array.isArray(this.text)?this.text.length:1,E=this.styles.fontSize/j*w,N=C*E+this.padding("vertical");return Math.max(N,this.styles.minCellHeight)},b.prototype.padding=function(j){var w=(0,f.parseSpacing)(this.styles.cellPadding,0);return j==="vertical"?w.top+w.bottom:j==="horizontal"?w.left+w.right:w[j]},b}();c.Cell=v;var g=function(){function b(j,w,C){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=j,this.raw=w,this.index=C}return b.prototype.getMaxCustomCellWidth=function(j){for(var w=0,C=0,E=j.allRows();C<E.length;C++){var N=E[C],A=N.cells[this.index];A&&typeof A.styles.cellWidth=="number"&&(w=Math.max(w,A.styles.cellWidth))}return w},b}();c.Column=g},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(u,h,f,p,y){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var v=Object(u),g=1;g<arguments.length;g++){var b=arguments[g];if(b!=null)for(var j in b)Object.prototype.hasOwnProperty.call(b,j)&&(v[j]=b[j])}return v}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var u=d(744),h=d(260),f=d(324),p=d(796),y=d(356);function v(N,A){var _=new u.DocHandler(N),k=g(A,_.scaleFactor()),F=new h.Table(A,k);return(0,f.calculateWidths)(_,F),_.applyStyles(_.userStyles),F}c.createTable=v;function g(N,A){var _=N.content,k=C(_.columns);if(_.head.length===0){var F=j(k,"head");F&&_.head.push(F)}if(_.foot.length===0){var F=j(k,"foot");F&&_.foot.push(F)}var I=N.settings.theme,T=N.styles;return{columns:k,head:b("head",_.head,k,T,I,A),body:b("body",_.body,k,T,I,A),foot:b("foot",_.foot,k,T,I,A)}}function b(N,A,_,k,F,I){var T={},R=A.map(function(O,z){for(var q=0,B={},K=0,Y=0,J=0,H=_;J<H.length;J++){var $=H[J];if(T[$.index]==null||T[$.index].left===0)if(Y===0){var W=void 0;Array.isArray(O)?W=O[$.index-K-q]:W=O[$.dataKey];var te={};typeof W=="object"&&!Array.isArray(W)&&(te=W?.styles||{});var ee=E(N,$,z,F,k,I,te),ne=new h.Cell(W,ee,N);B[$.dataKey]=ne,B[$.index]=ne,Y=ne.colSpan-1,T[$.index]={left:ne.rowSpan-1,times:Y}}else Y--,K++;else T[$.index].left--,Y=T[$.index].times,q++}return new h.Row(O,z,N,B)});return R}function j(N,A){var _={};return N.forEach(function(k){if(k.raw!=null){var F=w(A,k.raw);F!=null&&(_[k.dataKey]=F)}}),Object.keys(_).length>0?_:null}function w(N,A){if(N==="head"){if(typeof A=="object")return A.header||A.title||null;if(typeof A=="string"||typeof A=="number")return A}else if(N==="foot"&&typeof A=="object")return A.footer;return null}function C(N){return N.map(function(A,_){var k,F,I;return typeof A=="object"?I=(F=(k=A.dataKey)!==null&&k!==void 0?k:A.key)!==null&&F!==void 0?F:_:I=_,new h.Column(I,A,_)})}function E(N,A,_,k,F,I,T){var R=(0,p.getTheme)(k),O;N==="head"?O=F.headStyles:N==="body"?O=F.bodyStyles:N==="foot"&&(O=F.footStyles);var z=(0,y.assign)({},R.table,R[N],F.styles,O),q=F.columnStyles[A.dataKey]||F.columnStyles[A.index]||{},B=N==="body"?q:{},K=N==="body"&&_%2===0?(0,y.assign)({},R.alternateRow,F.alternateRowStyles):{},Y=(0,p.defaultStyles)(I),J=(0,y.assign)({},Y,z,K,B);return(0,y.assign)(J,T)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var u=d(420),h=d(260),f=d(744),p=d(356),y=d(136),v=d(224);function g(q,B){var K=B.settings,Y=K.startY,J=K.margin,H={x:J.left,y:Y},$=B.getHeadHeight(B.columns)+B.getFootHeight(B.columns),W=Y+J.bottom+$;if(K.pageBreak==="avoid"){var te=B.body,ee=te.reduce(function(ve,xe){return ve+xe.height},0);W+=ee}var ne=new f.DocHandler(q);(K.pageBreak==="always"||K.startY!=null&&W>ne.pageSize().height)&&(z(ne),H.y=J.top),B.callWillDrawPageHooks(ne,H);var ae=(0,p.assign)({},H);B.startPageNumber=ne.pageNumber(),K.horizontalPageBreak?b(ne,B,ae,H):(ne.applyStyles(ne.userStyles),(K.showHead==="firstPage"||K.showHead==="everyPage")&&B.head.forEach(function(ve){return F(ne,B,ve,H,B.columns)}),ne.applyStyles(ne.userStyles),B.body.forEach(function(ve,xe){var Se=xe===B.body.length-1;k(ne,B,ve,Se,ae,H,B.columns)}),ne.applyStyles(ne.userStyles),(K.showFoot==="lastPage"||K.showFoot==="everyPage")&&B.foot.forEach(function(ve){return F(ne,B,ve,H,B.columns)})),(0,u.addTableBorder)(ne,B,ae,H),B.callEndPageHooks(ne,H),B.finalY=H.y,q.lastAutoTable=B,q.previousAutoTable=B,q.autoTable&&(q.autoTable.previous=B),ne.applyStyles(ne.userStyles)}c.drawTable=g;function b(q,B,K,Y){var J=(0,v.calculateAllColumnsCanFitInPage)(q,B),H=B.settings;if(H.horizontalPageBreakBehaviour==="afterAllRows")J.forEach(function(ee,ne){q.applyStyles(q.userStyles),ne>0?O(q,B,K,Y,ee.columns,!0):j(q,B,Y,ee.columns),w(q,B,K,Y,ee.columns),E(q,B,Y,ee.columns)});else for(var $=-1,W=J[0],te=function(){var ee=$;if(W){q.applyStyles(q.userStyles);var ne=W.columns;$>=0?O(q,B,K,Y,ne,!0):j(q,B,Y,ne),ee=C(q,B,$+1,Y,ne),E(q,B,Y,ne)}var ae=ee-$;J.slice(1).forEach(function(ve){q.applyStyles(q.userStyles),O(q,B,K,Y,ve.columns,!0),C(q,B,$+1,Y,ve.columns,ae),E(q,B,Y,ve.columns)}),$=ee};$<B.body.length-1;)te()}function j(q,B,K,Y){var J=B.settings;q.applyStyles(q.userStyles),(J.showHead==="firstPage"||J.showHead==="everyPage")&&B.head.forEach(function(H){return F(q,B,H,K,Y)})}function w(q,B,K,Y,J){q.applyStyles(q.userStyles),B.body.forEach(function(H,$){var W=$===B.body.length-1;k(q,B,H,W,K,Y,J)})}function C(q,B,K,Y,J,H){q.applyStyles(q.userStyles),H=H??B.body.length;var $=Math.min(K+H,B.body.length),W=-1;return B.body.slice(K,$).forEach(function(te,ee){var ne=K+ee===B.body.length-1,ae=R(q,B,ne,Y);te.canEntireRowFit(ae,J)&&(F(q,B,te,Y,J),W=K+ee)}),W}function E(q,B,K,Y){var J=B.settings;q.applyStyles(q.userStyles),(J.showFoot==="lastPage"||J.showFoot==="everyPage")&&B.foot.forEach(function(H){return F(q,B,H,K,Y)})}function N(q,B,K){var Y=K.getLineHeight(q.styles.fontSize),J=q.padding("vertical"),H=Math.floor((B-J)/Y);return Math.max(0,H)}function A(q,B,K,Y){var J={};q.spansMultiplePages=!0,q.height=0;for(var H=0,$=0,W=K.columns;$<W.length;$++){var te=W[$],ee=q.cells[te.index];if(ee){Array.isArray(ee.text)||(ee.text=[ee.text]);var ne=new h.Cell(ee.raw,ee.styles,ee.section);ne=(0,p.assign)(ne,ee),ne.text=[];var ae=N(ee,B,Y);ee.text.length>ae&&(ne.text=ee.text.splice(ae,ee.text.length));var ve=Y.scaleFactor(),xe=Y.getLineHeightFactor();ee.contentHeight=ee.getContentHeight(ve,xe),ee.contentHeight>=B&&(ee.contentHeight=B,ne.styles.minCellHeight-=B),ee.contentHeight>q.height&&(q.height=ee.contentHeight),ne.contentHeight=ne.getContentHeight(ve,xe),ne.contentHeight>H&&(H=ne.contentHeight),J[te.index]=ne}}var Se=new h.Row(q.raw,-1,q.section,J,!0);Se.height=H;for(var Pe=0,Ce=K.columns;Pe<Ce.length;Pe++){var te=Ce[Pe],ne=Se.cells[te.index];ne&&(ne.height=Se.height);var ee=q.cells[te.index];ee&&(ee.height=q.height)}return Se}function _(q,B,K,Y){var J=q.pageSize().height,H=Y.settings.margin,$=H.top+H.bottom,W=J-$;B.section==="body"&&(W-=Y.getHeadHeight(Y.columns)+Y.getFootHeight(Y.columns));var te=B.getMinimumRowHeight(Y.columns,q),ee=te<K;if(te>W)return console.error("Will not be able to print row ".concat(B.index," correctly since it's minimum height is larger than page height")),!0;if(!ee)return!1;var ne=B.hasRowSpan(Y.columns),ae=B.getMaxCellHeight(Y.columns)>W;return ae?(ne&&console.error("The content of row ".concat(B.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ne||Y.settings.rowPageBreak==="avoid")}function k(q,B,K,Y,J,H,$){var W=R(q,B,Y,H);if(K.canEntireRowFit(W,$))F(q,B,K,H,$);else if(_(q,K,W,B)){var te=A(K,W,B,q);F(q,B,K,H,$),O(q,B,J,H,$),k(q,B,te,Y,J,H,$)}else O(q,B,J,H,$),k(q,B,K,Y,J,H,$)}function F(q,B,K,Y,J){Y.x=B.settings.margin.left;for(var H=0,$=J;H<$.length;H++){var W=$[H],te=K.cells[W.index];if(!te){Y.x+=W.width;continue}q.applyStyles(te.styles),te.x=Y.x,te.y=Y.y;var ee=B.callCellHooks(q,B.hooks.willDrawCell,te,K,W,Y);if(ee===!1){Y.x+=W.width;continue}I(q,te,Y);var ne=te.getTextPos();(0,y.default)(te.text,ne.x,ne.y,{halign:te.styles.halign,valign:te.styles.valign,maxWidth:Math.ceil(te.width-te.padding("left")-te.padding("right"))},q.getDocument()),B.callCellHooks(q,B.hooks.didDrawCell,te,K,W,Y),Y.x+=W.width}Y.y+=K.height}function I(q,B,K){var Y=B.styles;if(q.getDocument().setFillColor(q.getDocument().getFillColor()),typeof Y.lineWidth=="number"){var J=(0,u.getFillStyle)(Y.lineWidth,Y.fillColor);J&&q.rect(B.x,K.y,B.width,B.height,J)}else typeof Y.lineWidth=="object"&&(Y.fillColor&&q.rect(B.x,K.y,B.width,B.height,"F"),T(q,B,K,Y.lineWidth))}function T(q,B,K,Y){var J,H,$,W;Y.top&&(J=K.x,H=K.y,$=K.x+B.width,W=K.y,Y.right&&($+=.5*Y.right),Y.left&&(J-=.5*Y.left),te(Y.top,J,H,$,W)),Y.bottom&&(J=K.x,H=K.y+B.height,$=K.x+B.width,W=K.y+B.height,Y.right&&($+=.5*Y.right),Y.left&&(J-=.5*Y.left),te(Y.bottom,J,H,$,W)),Y.left&&(J=K.x,H=K.y,$=K.x,W=K.y+B.height,Y.top&&(H-=.5*Y.top),Y.bottom&&(W+=.5*Y.bottom),te(Y.left,J,H,$,W)),Y.right&&(J=K.x+B.width,H=K.y,$=K.x+B.width,W=K.y+B.height,Y.top&&(H-=.5*Y.top),Y.bottom&&(W+=.5*Y.bottom),te(Y.right,J,H,$,W));function te(ee,ne,ae,ve,xe){q.getDocument().setLineWidth(ee),q.getDocument().line(ne,ae,ve,xe,"S")}}function R(q,B,K,Y){var J=B.settings.margin.bottom,H=B.settings.showFoot;return(H==="everyPage"||H==="lastPage"&&K)&&(J+=B.getFootHeight(B.columns)),q.pageSize().height-Y.y-J}function O(q,B,K,Y,J,H){J===void 0&&(J=[]),H===void 0&&(H=!1),q.applyStyles(q.userStyles),B.settings.showFoot==="everyPage"&&!H&&B.foot.forEach(function(W){return F(q,B,W,Y,J)}),B.callEndPageHooks(q,Y);var $=B.settings.margin;(0,u.addTableBorder)(q,B,K,Y),z(q),B.pageNumber++,B.pageCount++,Y.x=$.left,Y.y=$.top,K.y=$.top,B.callWillDrawPageHooks(q,Y),B.settings.showHead==="everyPage"&&(B.head.forEach(function(W){return F(q,B,W,Y,J)}),q.applyStyles(q.userStyles))}c.addPage=O;function z(q){var B=q.pageNumber();q.setPage(B+1);var K=q.pageNumber();return K===B?(q.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var u=d(420);function h(p,y,v){var g;v===void 0&&(v={});var b=(0,u.getPageAvailableWidth)(p,y),j=new Map,w=[],C=[],E=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?E=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(E=[y.settings.horizontalPageBreakRepeat]),E.forEach(function(k){var F=y.columns.find(function(I){return I.dataKey===k||I.index===k});F&&!j.has(F.index)&&(j.set(F.index,!0),w.push(F.index),C.push(y.columns[F.index]),b-=F.wrappedWidth)});for(var N=!0,A=(g=v?.start)!==null&&g!==void 0?g:0;A<y.columns.length;){if(j.has(A)){A++;continue}var _=y.columns[A].wrappedWidth;if(N||b>=_)N=!1,w.push(A),C.push(y.columns[A]),b-=_;else break;A++}return{colIndexes:w,columns:C,lastIndex:A-1}}function f(p,y){for(var v=[],g=0;g<y.columns.length;g++){var b=h(p,y,{start:g});b.columns.length&&(v.push(b),g=b.lastIndex)}return v}c.calculateAllColumnsCanFitInPage=f},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var u=d(420);function h(w,C){f(w,C);var E=[],N=0;C.columns.forEach(function(_){var k=_.getMaxCustomCellWidth(C);k?_.width=k:(_.width=_.wrappedWidth,E.push(_)),N+=_.width});var A=C.getWidth(w.pageSize().width)-N;A&&(A=p(E,A,function(_){return Math.max(_.minReadableWidth,_.minWidth)})),A&&(A=p(E,A,function(_){return _.minWidth})),A=Math.abs(A),!C.settings.horizontalPageBreak&&A>.1/w.scaleFactor()&&(A=A<1?A:Math.round(A),console.warn("Of the table content, ".concat(A," units width could not fit page"))),v(C),g(C,w),y(C)}c.calculateWidths=h;function f(w,C){var E=w.scaleFactor(),N=C.settings.horizontalPageBreak,A=(0,u.getPageAvailableWidth)(w,C);C.allRows().forEach(function(_){for(var k=0,F=C.columns;k<F.length;k++){var I=F[k],T=_.cells[I.index];if(T){var R=C.hooks.didParseCell;C.callCellHooks(w,R,T,_,I,null);var O=T.padding("horizontal");T.contentWidth=(0,u.getStringWidth)(T.text,T.styles,w)+O;var z=(0,u.getStringWidth)(T.text.join(" ").split(/[^\S\u00A0]+/),T.styles,w);if(T.minReadableWidth=z+T.padding("horizontal"),typeof T.styles.cellWidth=="number")T.minWidth=T.styles.cellWidth,T.wrappedWidth=T.styles.cellWidth;else if(T.styles.cellWidth==="wrap"||N===!0)T.contentWidth>A?(T.minWidth=A,T.wrappedWidth=A):(T.minWidth=T.contentWidth,T.wrappedWidth=T.contentWidth);else{var q=10/E;T.minWidth=T.styles.minCellWidth||q,T.wrappedWidth=T.contentWidth,T.minWidth>T.wrappedWidth&&(T.wrappedWidth=T.minWidth)}}}}),C.allRows().forEach(function(_){for(var k=0,F=C.columns;k<F.length;k++){var I=F[k],T=_.cells[I.index];if(T&&T.colSpan===1)I.wrappedWidth=Math.max(I.wrappedWidth,T.wrappedWidth),I.minWidth=Math.max(I.minWidth,T.minWidth),I.minReadableWidth=Math.max(I.minReadableWidth,T.minReadableWidth);else{var R=C.styles.columnStyles[I.dataKey]||C.styles.columnStyles[I.index]||{},O=R.cellWidth||R.minCellWidth;O&&typeof O=="number"&&(I.minWidth=O,I.wrappedWidth=O)}T&&(T.colSpan>1&&!I.minWidth&&(I.minWidth=T.minWidth),T.colSpan>1&&!I.wrappedWidth&&(I.wrappedWidth=T.minWidth))}})}function p(w,C,E){for(var N=C,A=w.reduce(function(q,B){return q+B.wrappedWidth},0),_=0;_<w.length;_++){var k=w[_],F=k.wrappedWidth/A,I=N*F,T=k.width+I,R=E(k),O=T<R?R:T;C-=O-k.width,k.width=O}if(C=Math.round(C*1e10)/1e10,C){var z=w.filter(function(q){return C<0?q.width>E(q):!0});z.length&&(C=p(z,C,E))}return C}c.resizeColumns=p;function y(w){for(var C={},E=1,N=w.allRows(),A=0;A<N.length;A++)for(var _=N[A],k=0,F=w.columns;k<F.length;k++){var I=F[k],T=C[I.index];if(E>1)E--,delete _.cells[I.index];else if(T)T.cell.height+=_.height,E=T.cell.colSpan,delete _.cells[I.index],T.left--,T.left<=1&&delete C[I.index];else{var R=_.cells[I.index];if(!R)continue;if(R.height=_.height,R.rowSpan>1){var O=N.length-A,z=R.rowSpan>O?O:R.rowSpan;C[I.index]={cell:R,left:z,row:_}}}}}function v(w){for(var C=w.allRows(),E=0;E<C.length;E++)for(var N=C[E],A=null,_=0,k=0,F=0;F<w.columns.length;F++){var I=w.columns[F];if(k-=1,k>1&&w.columns[F+1])_+=I.width,delete N.cells[I.index];else if(A){var T=A;delete N.cells[I.index],A=null,T.width=I.width+_}else{var T=N.cells[I.index];if(!T)continue;if(k=T.colSpan,_=0,T.colSpan>1){A=T,_+=I.width;continue}T.width=I.width+_}}}function g(w,C){for(var E={count:0,height:0},N=0,A=w.allRows();N<A.length;N++){for(var _=A[N],k=0,F=w.columns;k<F.length;k++){var I=F[k],T=_.cells[I.index];if(T){C.applyStyles(T.styles,!0);var R=T.width-T.padding("horizontal");if(T.styles.overflow==="linebreak")T.text=C.splitTextToSize(T.text,R+1/C.scaleFactor(),{fontSize:T.styles.fontSize});else if(T.styles.overflow==="ellipsize")T.text=b(T.text,R,T.styles,C,"...");else if(T.styles.overflow==="hidden")T.text=b(T.text,R,T.styles,C,"");else if(typeof T.styles.overflow=="function"){var O=T.styles.overflow(T.text,R);typeof O=="string"?T.text=[O]:T.text=O}T.contentHeight=T.getContentHeight(C.scaleFactor(),C.getLineHeightFactor());var z=T.contentHeight/T.rowSpan;T.rowSpan>1&&E.count*E.height<z*T.rowSpan?E={height:z,count:T.rowSpan}:E&&E.count>0&&E.height>z&&(z=E.height),z>_.height&&(_.height=z)}}E.count--}}function b(w,C,E,N,A){return w.map(function(_){return j(_,C,E,N,A)})}c.ellipsize=b;function j(w,C,E,N,A){var _=1e4*N.scaleFactor();if(C=Math.ceil(C*_)/_,C>=(0,u.getStringWidth)(w,E,N))return w;for(;C<(0,u.getStringWidth)(w+A,E,N)&&!(w.length<=1);)w=w.substring(0,w.length-1);return w.trim()+A}},964:function(l){if(typeof r>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=r}},i={};function a(l){var c=i[l];if(c!==void 0)return c.exports;var d=i[l]={exports:{}};return s[l].call(d.exports,d,d.exports,a),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=a(340),d=a(776),u=a(664),h=a(972),f=a(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return f.Table}});var p=a(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var y=a(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return y.Row}});function v(C){(0,c.default)(C)}l.applyPlugin=v;function g(C,E){var N=(0,d.parseInput)(C,E),A=(0,h.createTable)(C,N);(0,u.drawTable)(C,A)}function b(C,E){var N=(0,d.parseInput)(C,E);return(0,h.createTable)(C,N)}l.__createTable=b;function j(C,E){(0,u.drawTable)(C,E)}l.__drawTable=j;try{var w=a(964);w.jsPDF&&(w=w.jsPDF),v(w)}catch{}l.default=g}(),o}()})}($b)),$b.exports}jfe();function wfe({delivery:t,vehicle:e,onClose:r,onEdit:s,onSendNotification:i}){const{toast:a}=Gt(),[o,l]=S.useState("details"),[c,d]=S.useState(!1),u=p=>{switch(p){case _r.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case _r.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case _r.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case _r.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=async p=>{if(i){d(!0);try{await i(t.id,p),a({title:"Notification Sent",description:`${p==="sms"?"SMS":"Email"} notification sent successfully`})}catch{a({title:"Error",description:`Failed to send ${p==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},f=()=>{try{const p=new sr;if(p.setFontSize(20),p.text("Delivery Information Sheet",105,15,{align:"center"}),p.setFontSize(12),p.text(`Delivery #: ${t.id}`,20,30),p.text(`Status: ${t.status.replace("_"," ")}`,20,40),p.text(`Scheduled Date: ${wt(t.scheduledDate)}`,20,50),p.setFontSize(16),p.text("Vehicle Information",20,65),p.setFontSize(12),e?(p.text(`Vehicle: ${e.year} ${e.make} ${e.model}`,20,75),p.text(`VIN: ${e.vin}`,20,85)):p.text(`Vehicle ID: ${t.vehicleId}`,20,75),p.setFontSize(16),p.text("Delivery Address",20,105),p.setFontSize(12),p.text(`${t.address.street}`,20,115),p.text(`${t.address.city}, ${t.address.state} ${t.address.zipCode}`,20,125),p.text(`${t.address.country}`,20,135),p.setFontSize(16),p.text("Contact Information",20,155),p.setFontSize(12),p.text(`Customer ID: ${t.customerId}`,20,165),t.customFields?.contactPhone&&p.text(`Phone: ${t.customFields.contactPhone}`,20,175),t.customFields?.contactEmail&&p.text(`Email: ${t.customFields.contactEmail}`,20,185),t.notes){p.setFontSize(16),p.text("Delivery Notes",20,205),p.setFontSize(12);const y=p.splitTextToSize(t.notes,170);p.text(y,20,215)}p.setFontSize(16),p.text("Signatures",20,245),p.setFontSize(12),p.text("Driver: _______________________________",20,255),p.text("Customer: _____________________________",20,270),p.save(`delivery-${t.id}.pdf`),a({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(p){console.error("Error generating PDF:",p),a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:"Delivery Details"}),n.jsxs(Ge,{children:["Delivery #",t.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>s(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{children:[n.jsxs(fn,{value:o,onValueChange:l,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"details",children:"Details"}),n.jsx(dt,{value:"timeline",children:"Timeline"}),n.jsx(dt,{value:"photos",children:"Photos"})]}),n.jsxs(ht,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",u(t.status)),children:t.status.replace("_"," ").toUpperCase()}),t.driver&&n.jsxs(Ve,{variant:"outline",children:["Driver: ",t.driver]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:t.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:e?`${e.year} ${e.make} ${e.model}`:t.vehicleId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),n.jsx("p",{className:"font-medium",children:wt(t.scheduledDate)})]}),t.deliveredDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),n.jsx("p",{className:"font-medium",children:wt(t.deliveredDate)})]}),t.customFields?.estimatedArrival&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),n.jsx("p",{className:"font-medium",children:t.customFields.estimatedArrival})]}),t.customFields?.departureTime&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),n.jsx("p",{className:"font-medium",children:new Date(t.customFields.departureTime).toLocaleString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),n.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[n.jsx("p",{children:t.address.street}),n.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),n.jsx("p",{children:t.address.country})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[t.customFields?.contactPhone&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(q0,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:t.customFields.contactPhone})]}),t.customFields?.contactEmail&&n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:t.customFields.contactEmail})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),n.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Ps,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["SMS Updates: ",t.customFields?.sendSMSUpdates!==!1?"Enabled":"Disabled"]})]}),n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[n.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Email Updates: ",t.customFields?.sendEmailUpdates!==!1?"Enabled":"Disabled"]})]})]})]}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===_r.SCHEDULED||t.status===_r.IN_TRANSIT)&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>h("sms"),disabled:c||!t.customFields?.contactPhone,children:[n.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>h("email"),disabled:c||!t.customFields?.contactEmail,children:[n.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:f,children:[n.jsx(Cj,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),n.jsx(ht,{value:"timeline",children:n.jsx(bhe,{delivery:t})}),n.jsxs(ht,{value:"photos",className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),t.customFields?.deliveryPhotos&&t.customFields.deliveryPhotos.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.customFields.deliveryPhotos.map((p,y)=>n.jsx("div",{className:"overflow-hidden rounded-md",children:n.jsx("img",{src:p,alt:`Delivery photo ${y+1}`,className:"w-full h-auto object-cover"})},y))}):n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(td,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No delivery photos available"}),t.status!==_r.DELIVERED&&n.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(re,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(re,{onClick:()=>s(t),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function Nfe({delivery:t,onSend:e,onCancel:r}){const{toast:s}=Gt(),[i,a]=S.useState(!1),[o,l]=S.useState("sms"),[c,d]=S.useState(""),[u,h]=S.useState(""),[f,p]=S.useState(""),y=t.customer?.name||"Customer",v=t.vehicle?`${t.vehicle.year||""} ${t.vehicle.make||""} ${t.vehicle.model||""}`.trim():"your Home/RV",g=!!t.customer?.phone,b=!!t.customer?.email,j=()=>{try{const C=u||new Date(t.scheduledDate).toLocaleDateString(),E=c||"the scheduled time";return o==="sms"?`Hi ${y}, your delivery of ${v} is scheduled for ${C} at ${E}. Reply HELP for assistance or STOP to opt out.`:`Dear ${y},

We're writing to confirm the delivery of ${v} scheduled for ${C} at ${E}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(C){return console.error("Failed to generate default message:",C),""}};S.useEffect(()=>{try{const C=j();p(C)}catch(C){console.error("Message generation error:",C)}},[o,c,u]);const w=async C=>{if(C.preventDefault(),!f.trim()){s({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!u||!c){s({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(o==="sms"&&!g){s({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(o==="email"&&!b){s({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}a(!0);try{await e(t.id,{type:o,estimatedArrival:`${u}T${c}`,message:f,updateDelivery:!0}),s({title:"Notification Sent",description:`${o.toUpperCase()} sent successfully.`}),r()}catch(E){console.error("Notification send failed:",E),s({title:"Error",description:`Failed to send ${o==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{a(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Send ETA Notification"}),n.jsx(Ge,{children:"Notify the customer about delivery status"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{children:[n.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",n.jsx("strong",{children:y}),n.jsx("br",{}),"Home/RV: ",n.jsx("strong",{children:v}),n.jsx("br",{}),o==="sms"&&!g&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid phone number on file"}),o==="email"&&!b&&n.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid email address on file"})]}),n.jsxs("form",{onSubmit:w,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notificationType",children:"Notification Type"}),n.jsxs(nt,{value:o,onValueChange:C=>l(C),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{className:"z-50",children:[n.jsx(he,{value:"sms",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ps,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"SMS"})]})}),n.jsx(he,{value:"email",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ui,{className:"h-4 w-4 mr-2"}),n.jsx("span",{children:"Email"})]})})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"w-1/2",children:[n.jsx(ue,{htmlFor:"arrivalDate",children:"Arrival Date"}),n.jsx(Te,{id:"arrivalDate",type:"date",value:u,onChange:C=>h(C.target.value)})]}),n.jsxs("div",{className:"w-1/2",children:[n.jsx(ue,{htmlFor:"arrivalTime",children:"Arrival Time"}),n.jsx(Te,{id:"arrivalTime",type:"time",value:c,onChange:C=>d(C.target.value)})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"driver",children:"Assign Driver"}),n.jsxs(nt,{defaultValue:iu.driverNames[0],children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select driver"})}),n.jsx(tt,{children:iu.driverNames.map(C=>n.jsx(he,{value:C,children:C},C))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"message",children:"Message"}),n.jsx(kr,{id:"message",value:f,onChange:C=>p(C.target.value),rows:o==="sms"?3:6,maxLength:o==="sms"?160:void 0}),o==="sms"&&n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[f.length," characters"]}),n.jsxs("span",{children:[160-f.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function Sfe({onCapture:t,onCancel:e}){const{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState([]),[l,c]=S.useState([]),[d,u]=S.useState([]),[h,f]=S.useState(!1),p=S.useRef(null);S.useRef(null);const y=async N=>new Promise(A=>{const _=new Image;_.onload=()=>{const k=document.createElement("canvas"),F=k.getContext("2d"),I=800,T=I/_.width;k.width=I,k.height=_.height*T,F?.drawImage(_,0,0,k.width,k.height),A(k.toDataURL("image/jpeg",.7))},_.src=N}),{getRootProps:v,getInputProps:g}=Hj({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async N=>{try{const A=N.map(k=>new Promise(F=>{const I=new FileReader;I.onload=async()=>{const T=await y(I.result);F(T)},I.readAsDataURL(k)})),_=await Promise.all(A);o(k=>[...k,..._]),c(k=>[...k,..._.map(()=>"")]),u(k=>[...k,..._.map(()=>[])]),r({title:"Upload Successful",description:`${N.length} photo(s) added.`})}catch(A){console.error("File processing error:",A),r({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:N=>{r({title:"Upload Failed",description:N.message,variant:"destructive"})}}),b=()=>{p.current?.srcObject&&(p.current.srcObject.getTracks().forEach(N=>N.stop()),p.current.srcObject=null,f(!1),r({title:"Camera Stopped"}))},j=(N,A)=>{c(_=>{const k=[..._];return k[N]=A,k})},w=(N,A)=>{const _=A.split(",").map(k=>k.trim()).filter(Boolean);u(k=>{const F=[...k];return F[N]=_,F})},C=N=>{o(A=>A.filter((_,k)=>k!==N)),c(A=>A.filter((_,k)=>k!==N)),u(A=>A.filter((_,k)=>k!==N))},E=async()=>{if(!a.length){r({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}i(!0);try{await t(a,l,d),r({title:"Photos Saved",description:`${a.length} photo(s) saved.`})}catch(N){console.error("Save error:",N),r({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{i(!1),b()}};return S.useEffect(()=>()=>{b()},[]),n.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(je,{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Delivery Photo Capture"}),n.jsx(Ge,{children:"Take or upload photos and add optional captions & tags"})]}),n.jsx(re,{size:"sm",variant:"ghost",onClick:e,children:n.jsx(Cr,{className:"w-4 h-4"})})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Photo Instructions"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:iu.photoInstructions.map((N,A)=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),n.jsx("span",{children:N})]},A))})]}),a.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",a.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.map((N,A)=>n.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:N,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${A+1}`}),n.jsx(re,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>C(A),children:n.jsx(Cr,{className:"w-4 h-4"})})]}),n.jsx(ue,{htmlFor:`caption-${A}`,children:"Caption"}),n.jsx(Te,{id:`caption-${A}`,value:l[A]||"",placeholder:"Optional caption",onChange:_=>j(A,_.target.value)}),n.jsx(ue,{htmlFor:`tags-${A}`,children:"Tags (comma-separated)"}),n.jsx(Te,{id:`tags-${A}`,value:d[A]?.join(", ")||"",placeholder:"e.g. front, side, receipt",onChange:_=>w(A,_.target.value)})]},A))})]}),n.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[n.jsx(re,{onClick:e,variant:"outline",disabled:s,children:"Cancel"}),n.jsxs(re,{onClick:E,disabled:s||a.length===0,children:[s?n.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):n.jsx(Nj,{className:"w-4 h-4 mr-2"}),s?"Saving...":"Save Photos"]})]})]})]})})}function Afe({delivery:t,className:e}){const r=S.useRef(null);return S.useEffect(()=>{if(r.current){const s=r.current;s.innerHTML="";const i=document.createElement("div");i.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",i.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${t.address.street}</div>
              <div class="text-sm">${t.address.city}, ${t.address.state} ${t.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${t.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${t.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,s.appendChild(i)}},[t]),n.jsxs(me,{className:e,children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(vu,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Ge,{children:"Track delivery location and route"})]}),n.jsx(pe,{children:n.jsx("div",{ref:r,className:"h-64 w-full",children:n.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(io,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function Cfe({deliveries:t,onScheduleDelivery:e}){const r=t.length,s=t.filter(f=>f.status===_r.SCHEDULED).length,i=t.filter(f=>f.status===_r.IN_TRANSIT).length,a=t.filter(f=>f.status===_r.DELIVERED).length,o=new Date,l=new Date(o.getTime()+10080*60*1e3),c=t.filter(f=>f.status===_r.SCHEDULED&&f.scheduledDate>=o&&f.scheduledDate<=l).sort((f,p)=>f.scheduledDate.getTime()-p.scheduledDate.getTime()),d=t.filter(f=>f.status===_r.IN_TRANSIT).sort((f,p)=>f.scheduledDate.getTime()-p.scheduledDate.getTime()),u=new Date(o.getTime()-720*60*60*1e3),h=t.filter(f=>f.status===_r.DELIVERED&&f.deliveredDate&&f.deliveredDate>=u).sort((f,p)=>(p.deliveredDate?.getTime()||0)-(f.deliveredDate?.getTime()||0)).slice(0,5);return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:r,icon:n.jsx(io,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:s,icon:n.jsx(Br,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:i,icon:n.jsx(io,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:a,icon:n.jsx(hn,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((f,p)=>n.jsxs(me,{className:`${f.bg} border-0 shadow-sm`,children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:f.title}),f.icon]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-gray-900",children:f.count}),n.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),f.description]})]})]},p))}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ne,{children:"Upcoming Deliveries"}),n.jsxs(re,{size:"sm",onClick:e,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),n.jsx(Ge,{children:"Deliveries scheduled for the next 7 days"})]}),n.jsx(pe,{children:c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(f=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(Br,{className:"h-5 w-5 text-blue-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:wt(f.scheduledDate)})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",f.customerId]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[f.address.city,", ",f.address.state]})]})]},f.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Br,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No upcoming deliveries"}),n.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"In-Transit Deliveries"}),n.jsx(Ge,{children:"Deliveries currently on the road"})]}),n.jsx(pe,{children:d.length>0?n.jsx("div",{className:"space-y-4",children:d.map(f=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(io,{className:"h-5 w-5 text-yellow-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",f.customFields?.estimatedArrival||"Unknown"]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",f.driver||"Unassigned"]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[f.address.city,", ",f.address.state]})]})]},f.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(io,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No deliveries in transit"})]})})]})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[n.jsx("div",{className:"md:col-span-2",children:d.length>0?n.jsx(Afe,{delivery:d[0]}):n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(vu,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),n.jsx(Ge,{children:"No active deliveries to display"})]}),n.jsx(pe,{children:n.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:n.jsxs("div",{className:"text-center",children:[n.jsx(vu,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Recent Deliveries"}),n.jsx(Ge,{children:"Recently completed deliveries"})]}),n.jsx(pe,{children:h.length>0?n.jsx("div",{className:"space-y-4",children:h.map(f=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[n.jsx(hn,{className:"h-5 w-5 text-green-500 mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"font-medium",children:["Delivery #",f.id]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:f.deliveredDate?wt(f.deliveredDate):"Unknown"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",f.customerId]})]})]},f.id))}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function SO(){const{deliveries:t,createDelivery:e,updateDelivery:r,updateDeliveryStatus:s,sendNotification:i,updateETA:a,addDeliveryPhotos:o}=Xq(),{vehicles:l}=df(),{leads:c}=Au(),{toast:d}=Gt(),[u,h]=S.useState(""),[f,p]=S.useState("all"),[y,v]=S.useState(!1),[g,b]=S.useState(!1),[j,w]=S.useState(!1),[C,E]=S.useState(!1),[N,A]=S.useState(null),_=B=>{switch(B){case _r.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case _r.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case _r.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case _r.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},k=t.filter(B=>B.id.toLowerCase().includes(u.toLowerCase())||B.customerId.toLowerCase().includes(u.toLowerCase())||B.address.city.toLowerCase().includes(u.toLowerCase())).filter(B=>f==="all"||B.status===f),F=()=>{A(null),v(!0)},I=B=>{A(B),v(!0),b(!1)},T=B=>{A(B),b(!0)},R=async B=>{try{N?(await r(N.id,B),d({title:"Success",description:"Delivery updated successfully"})):(await e(B),d({title:"Success",description:"Delivery scheduled successfully"})),v(!1),A(null)}catch{d({title:"Error",description:`Failed to ${N?"update":"schedule"} delivery`,variant:"destructive"})}},O=async(B,K)=>{try{return K.estimatedArrival&&await a(B,K.estimatedArrival),await i(B,K.type,K.message),!0}catch(Y){throw console.error("Error sending notification:",Y),Y}},z=async(B,K)=>{if(N)try{await o(N.id,B,K),N.status===_r.IN_TRANSIT&&await s(N.id,_r.DELIVERED),E(!1),d({title:"Photos Added",description:`${B.length} photos added to delivery`})}catch{d({title:"Error",description:"Failed to add photos",variant:"destructive"})}},q=B=>l.find(K=>K.id===B);return n.jsxs("div",{className:"space-y-8",children:[y&&n.jsx(oU,{delivery:N||void 0,vehicles:l,customers:c,onSave:R,onCancel:()=>{v(!1),A(null)}}),g&&N&&n.jsx(wfe,{delivery:N,vehicle:q(N.vehicleId),onClose:()=>b(!1),onEdit:I,onSendNotification:async(B,K)=>{b(!1),w(!0)}}),j&&N&&n.jsx(Nfe,{delivery:N,onSend:O,onCancel:()=>{w(!1),b(!0)}}),C&&N&&n.jsx(Sfe,{onCapture:z,onCancel:()=>{E(!1),b(!0)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),n.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),n.jsxs(re,{className:"shadow-sm",onClick:F,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),n.jsx(io,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),n.jsx(io,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.filter(B=>B.status===_r.SCHEDULED).length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Br,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),n.jsx(io,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(B=>B.status===_r.IN_TRANSIT).length}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(io,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Delivered"}),n.jsx(io,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(B=>B.status===_r.DELIVERED).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),n.jsx(Ps,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(B=>B.customFields?.customerNotified).length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search deliveries...",value:u,onChange:B=>h(B.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("select",{value:f,onChange:B=>p(B.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:_r.SCHEDULED,children:"Scheduled"}),n.jsx("option",{value:_r.IN_TRANSIT,children:"In Transit"}),n.jsx("option",{value:_r.DELIVERED,children:"Delivered"}),n.jsx("option",{value:_r.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Deliveries"}),n.jsx(Ge,{children:"Track and manage vehicle deliveries"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[k.map(B=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",B.id]}),n.jsx(Ve,{className:pt("ri-badge-status",_(B.status)),children:B.status.replace("_"," ").toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(vs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:B.customerId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(vs,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Driver:"}),n.jsx("span",{className:"ml-1",children:B.driver||"Not assigned"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Scheduled:"}),n.jsx("span",{className:"ml-1",children:wt(B.scheduledDate)})]}),B.deliveredDate&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Delivered:"}),n.jsx("span",{className:"ml-1",children:wt(B.deliveredDate)})]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[n.jsx(vu,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.address.street,", ",B.address.city,", ",B.address.state," ",B.address.zipCode]})]}),B.notes&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",B.notes]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(B),children:[n.jsx(Ts,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(B),children:"Edit"}),B.status===_r.IN_TRANSIT&&n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{A(B),E(!0)},children:[n.jsx(td,{className:"h-3 w-3 mr-1"}),"Photos"]}),(B.status===_r.SCHEDULED||B.status===_r.IN_TRANSIT)&&n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{A(B),w(!0)},children:[n.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},B.id)),k.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(io,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No deliveries found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function Efe(){const{deliveries:t}=Xq(),[e,r]=S.useState(!1);return n.jsxs(n.Fragment,{children:[e&&n.jsx(oU,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>r(!1)}),n.jsx(Cfe,{deliveries:t,onScheduleDelivery:()=>r(!0)})]})}function Pfe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(Efe,{})}),n.jsx(Ut,{path:"/list",element:n.jsx(SO,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(SO,{})})]})}var sc=(t=>(t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.APPROVED="approved",t.REJECTED="rejected",t))(sc||{}),fs=(t=>(t.PENDING="pending",t.PASSED="passed",t.FAILED="failed",t.NA="na",t))(fs||{}),Po=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(Po||{}),Bb=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.RESOLVED="resolved",t.VERIFIED="verified",t))(Bb||{}),UE=(t=>(t.INSPECTOR="inspector",t.MANAGER="manager",t.QUALITY_CONTROL="quality_control",t))(UE||{});function Tfe(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState(!1);S.useEffect(()=>{o()},[]);const o=()=>{const I=Bn("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:ur.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:ur.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),T=Bn("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:sc.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:fs.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:fs.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:Po.MEDIUM,status:Bb.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);e(I),s(T)},l=I=>{rn("renter-insight-pdi-templates",I)},c=I=>{rn("renter-insight-pdi-inspections",I)};return{templates:t,inspections:r,loading:i,getTemplatesByVehicleType:I=>t.filter(T=>T.vehicleType===I&&T.isActive),getTemplateById:I=>t.find(T=>T.id===I),createTemplate:async I=>{a(!0);try{const T={id:Math.random().toString(36).substr(2,9),name:I.name||"",description:I.description||"",vehicleType:I.vehicleType||ur.RV,isActive:I.isActive??!0,sections:I.sections||[],createdAt:new Date,updatedAt:new Date},R=[...t,T];return e(R),l(R),T}finally{a(!1)}},updateTemplate:async(I,T)=>{const R=t.map(O=>O.id===I?{...O,...T,updatedAt:new Date}:O);e(R),l(R)},deleteTemplate:async I=>{const T=t.filter(R=>R.id!==I);e(T),l(T)},createTemplateSection:async(I,T)=>{const R=t.find(B=>B.id===I);if(!R)return null;const O={id:Math.random().toString(36).substr(2,9),templateId:I,name:T.name||"",description:T.description||"",orderIndex:T.orderIndex||R.sections.length+1,items:T.items||[],createdAt:new Date},z={...R,sections:[...R.sections,O],updatedAt:new Date},q=t.map(B=>B.id===I?z:B);return e(q),l(q),O},createTemplateItem:async(I,T)=>{const R=t.findIndex($=>$.sections.some(W=>W.id===I));if(R===-1)return null;const O=t[R],z=O.sections.findIndex($=>$.id===I);if(z===-1)return null;const q=O.sections[z],B={id:Math.random().toString(36).substr(2,9),sectionId:I,name:T.name||"",description:T.description||"",itemType:T.itemType||"checkbox",isRequired:T.isRequired??!0,orderIndex:T.orderIndex||q.items.length+1,createdAt:new Date},K={...q,items:[...q.items,B]},Y=[...O.sections];Y[z]=K;const J={...O,sections:Y,updatedAt:new Date},H=[...t];return H[R]=J,e(H),l(H),B},getInspectionsByVehicleId:I=>r.filter(T=>T.vehicleId===I),getInspectionById:I=>r.find(T=>T.id===I),createInspection:async I=>{a(!0);try{const T=t.find(q=>q.id===I.templateId);if(!T)throw new Error("Template not found");const R=[];T.sections.forEach(q=>{q.items.forEach(B=>{R.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:B.id,templateItem:B,status:fs.PENDING,createdAt:new Date,updatedAt:new Date})})});const O={id:Math.random().toString(36).substr(2,9),templateId:I.templateId||"",template:T||void 0,vehicleId:I.vehicleId||"",inspectorId:I.inspectorId||"",status:sc.IN_PROGRESS,startedAt:new Date,notes:I.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};R.forEach(q=>{q.inspectionId=O.id}),O.items=R;const z=[...r,O];return s(z),c(z),O}finally{a(!1)}},updateInspection:async(I,T)=>{const R=r.map(O=>O.id===I?{...O,...T,updatedAt:new Date}:O);s(R),c(R)},updateInspectionItem:async(I,T,R)=>{const O=r.findIndex(J=>J.id===I);if(O===-1)return;const z=r[O],q=z.items.findIndex(J=>J.id===T);if(q===-1)return;const B=[...z.items];B[q]={...B[q],...R,updatedAt:new Date};const K={...z,items:B,updatedAt:new Date},Y=[...r];Y[O]=K,s(Y),c(Y)},completeInspection:async(I,T)=>{const R=r.findIndex(K=>K.id===I);if(R===-1)return;const O=r[R];if(!O.items.every(K=>!t.flatMap(J=>J.sections).flatMap(J=>J.items).find(J=>J.id===K.templateItemId)?.isRequired||K.status!==fs.PENDING))throw new Error("All required items must be completed");const q={...O,status:sc.COMPLETED,completedAt:new Date,notes:T||O.notes,updatedAt:new Date},B=[...r];B[R]=q,s(B),c(B)},createDefect:async(I,T)=>{const R=r.findIndex(K=>K.id===I);if(R===-1)return null;const O=r[R],z={id:Math.random().toString(36).substr(2,9),inspectionId:I,inspectionItemId:T.inspectionItemId,title:T.title||"",description:T.description||"",severity:T.severity||Po.MEDIUM,status:Bb.OPEN,assignedTo:T.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},q={...O,defects:[...O.defects,z],updatedAt:new Date},B=[...r];return B[R]=q,s(B),c(B),z},updateDefect:async(I,T,R)=>{const O=r.findIndex(J=>J.id===I);if(O===-1)return;const z=r[O],q=z.defects.findIndex(J=>J.id===T);if(q===-1)return;const B=[...z.defects];B[q]={...B[q],...R,updatedAt:new Date};const K={...z,defects:B,updatedAt:new Date},Y=[...r];Y[O]=K,s(Y),c(Y)},resolveDefect:async(I,T,R)=>{const O=r.findIndex(J=>J.id===I);if(O===-1)return;const z=r[O],q=z.defects.findIndex(J=>J.id===T);if(q===-1)return;const B=[...z.defects];B[q]={...B[q],status:Bb.RESOLVED,resolvedAt:new Date,resolutionNotes:R,updatedAt:new Date};const K={...z,defects:B,updatedAt:new Date},Y=[...r];Y[O]=K,s(Y),c(Y)},addPhoto:async(I,T)=>{const R=r.findIndex(K=>K.id===I);if(R===-1)return null;const O=r[R],z={id:Math.random().toString(36).substr(2,9),inspectionId:I,inspectionItemId:T.inspectionItemId,defectId:T.defectId,url:T.url||"",caption:T.caption,createdAt:new Date},q={...O,photos:[...O.photos,z],updatedAt:new Date},B=[...r];return B[R]=q,s(B),c(B),z},addSignoff:async(I,T)=>{const R=r.findIndex(Y=>Y.id===I);if(R===-1)return null;const O=r[R],z={id:Math.random().toString(36).substr(2,9),inspectionId:I,userId:T.userId||"",role:T.role||UE.INSPECTOR,signatureUrl:T.signatureUrl,notes:T.notes,signedAt:new Date,createdAt:new Date};let q=O.status;T.role===UE.MANAGER&&(q=sc.APPROVED);const B={...O,signoffs:[...O.signoffs,z],status:q,updatedAt:new Date},K=[...r];return K[R]=B,s(K),c(K),z}}}function _fe({templates:t,onCreateTemplate:e,onEditTemplate:r,onDeleteTemplate:s,onDuplicateTemplate:i,onViewTemplate:a}){const[o,l]=S.useState(""),[c,d]=S.useState("all"),u=t.filter(f=>{const p=f.name.toLowerCase().includes(o.toLowerCase())||f.description?.toLowerCase().includes(o.toLowerCase()),y=c==="all"||f.vehicleType===c;return p&&y}),h=f=>f.replace("_"," ").toUpperCase();return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search templates...",value:o,onChange:f=>l(f.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:c,onChange:f=>d(f.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"rv",children:"RV"}),n.jsx("option",{value:"motorhome",children:"Motorhome"}),n.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),n.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),n.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(re,{onClick:e,className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"text-xl",children:["PDI Templates (",u.length,")"]}),n.jsx(Ge,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[u.map(f=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:f.name}),n.jsx(Ve,{variant:"outline",children:h(f.vehicleType)}),f.isActive?n.jsx(Ve,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Ve,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:f.description}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(YC,{className:"h-3 w-3 mr-1 text-blue-500"}),f.sections.length," sections"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(wj,{className:"h-3 w-3 mr-1 text-green-500"}),f.sections.reduce((p,y)=>p+y.items.length,0)," items"]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(f),children:"View"}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(f),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(f),children:[n.jsx(Sj,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(f.id),children:n.jsx(rs,{className:"h-3 w-3"})})]})]},f.id)),u.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(YC,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No templates found"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}const As={checklistStatuses:["Not Started","In Progress","Complete","Failed","Pending Review","Approved"],sampleInspections:[{id:"pdi-001",unitId:"unit-001",unitInfo:"2023 Forest River Cherokee 274RK",stockNumber:"RV-2023-001",vin:"1FUJBBCK5NLBXXXXX",technicianId:"tech-001",technicianName:"Mike Johnson",status:"Complete",templateId:"template-rv-standard",templateName:"Standard RV PDI",startedDate:"2024-01-15T08:00:00Z",completedDate:"2024-01-15T14:30:00Z",findings:[{category:"Exterior",item:"Body Condition",status:"Pass",notes:"No visible damage or defects"},{category:"Interior",item:"Appliances",status:"Fail",notes:"Refrigerator not cooling properly - needs service"},{category:"Electrical",item:"12V Systems",status:"Pass",notes:"All lights and outlets functioning"},{category:"Plumbing",item:"Water System",status:"Pass",notes:"No leaks detected, pressure test passed"}],overallNotes:"Unit ready for delivery pending refrigerator repair. Estimated 2-day delay.",customerNotified:!0,deliveryApproved:!1,photos:[{id:"photo-001",category:"Exterior",description:"Front view",url:"/mock/pdi-photo-1.jpg"},{id:"photo-002",category:"Interior",description:"Kitchen area",url:"/mock/pdi-photo-2.jpg"}]},{id:"pdi-002",unitId:"unit-002",unitInfo:"2024 Keystone Montana 3761FL",stockNumber:"RV-2024-005",vin:"4X4TWHBK5PNxxxxxx",technicianId:"tech-002",technicianName:"Sarah Davis",status:"In Progress",templateId:"template-fifthwheel",templateName:"Fifth Wheel PDI",startedDate:"2024-01-16T09:00:00Z",completedDate:null,findings:[{category:"Exterior",item:"Slide-out Operation",status:"Pass",notes:"All slides operate smoothly"},{category:"Interior",item:"HVAC System",status:"Pass",notes:"AC and furnace both operational"}],overallNotes:"Inspection in progress - approximately 60% complete",customerNotified:!1,deliveryApproved:!1,photos:[]}],formDefaults:{unitId:"",technicianId:"",templateId:"template-rv-standard",status:"Not Started",startedDate:"",notes:"",customerNotified:!1,deliveryApproved:!1},templateOptions:[{id:"template-rv-standard",name:"Standard RV PDI",description:"Comprehensive inspection for travel trailers and motorhomes",unitTypes:["Travel Trailer","Motorhome","Toy Hauler"]},{id:"template-fifthwheel",name:"Fifth Wheel PDI",description:"Specialized inspection for fifth wheel trailers",unitTypes:["Fifth Wheel"]},{id:"template-manufactured-home",name:"Manufactured Home PDI",description:"Complete inspection for manufactured housing units",unitTypes:["Single Wide","Double Wide","Triple Wide"]},{id:"template-park-model",name:"Park Model PDI",description:"Inspection checklist for park model homes",unitTypes:["Park Model"]}],inspectionCategories:[{id:"exterior",name:"Exterior",items:["Body Condition","Paint/Graphics","Windows/Doors","Awnings","Slide-out Operation","Tires/Wheels","Hitch/Coupling","Exterior Lights","Storage Compartments"]},{id:"interior",name:"Interior",items:["Flooring","Walls/Ceiling","Furniture/Cabinetry","Appliances","Window Treatments","Interior Lights","Safety Equipment","Entertainment Systems"]},{id:"electrical",name:"Electrical",items:["12V Systems","120V Systems","Battery Condition","Converter/Inverter","Solar System","Generator","Shore Power Connection","GFCI Outlets"]},{id:"plumbing",name:"Plumbing",items:["Water System","Hot Water Heater","Toilet Operation","Shower/Tub","Kitchen Sink","Water Pump","Holding Tanks","Exterior Water Connection"]},{id:"hvac",name:"HVAC",items:["Air Conditioning","Furnace Operation","Ventilation Fans","Thermostat","Ductwork","Filters","Vents/Returns"]},{id:"safety",name:"Safety & Compliance",items:["Smoke Detectors","Carbon Monoxide Detector","Fire Extinguisher","Emergency Exits","Propane System","Brake System","Safety Chains","Compliance Labels"]}],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Exterior"]},{id:"tech-004",name:"Lisa Chen",specialties:["Interior","Safety"]}],statusColors:{"Not Started":"bg-gray-100 text-gray-800","In Progress":"bg-blue-100 text-blue-800",Complete:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800","Pending Review":"bg-yellow-100 text-yellow-800",Approved:"bg-emerald-100 text-emerald-800"},findingStatusColors:{Pass:"bg-green-100 text-green-800",Fail:"bg-red-100 text-red-800","N/A":"bg-gray-100 text-gray-800",Pending:"bg-yellow-100 text-yellow-800"}};function Ife({template:t,onSave:e,onCancel:r}){const{toast:s}=Gt(),[i,a]=S.useState(!1),[o,l]=S.useState({name:t?.name||As.formDefaults.unitId,description:t?.description||"",unitTypes:t?.unitTypes||[],categories:[],vehicleType:ur.RV,isActive:!0,sections:[]}),[c,d]=S.useState(!1),[u,h]=S.useState({name:"",description:"",items:[]}),[f,p]=S.useState(!1),[y,v]=S.useState(null),[g,b]=S.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});[...new Set(As.templateOptions.flatMap(I=>I.unitTypes))];const j=async I=>{if(I.preventDefault(),!o.name){s({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!o.vehicleType){s({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!o.sections||o.sections.length===0){s({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const T=o.sections.filter(R=>!R.items||R.items.length===0);if(T.length>0){s({title:"Validation Error",description:`Section "${T[0].name}" must have at least one item`,variant:"destructive"});return}a(!0);try{await e(o),s({title:"Success",description:`Template ${t?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${t?"update":"create"} template`,variant:"destructive"})}finally{a(!1)}},w=()=>{if(!u.name){s({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const I={id:Math.random().toString(36).substr(2,9),templateId:t?.id||"",name:u.name,description:u.description||"",orderIndex:(o.sections?.length||0)+1,items:[],createdAt:new Date};l(T=>({...T,sections:[...T.sections||[],I]})),h({name:"",description:"",items:[]}),d(!1)},C=I=>{l(T=>({...T,sections:T.sections?.filter(R=>R.id!==I)||[]}))},E=I=>{const T=[...o.sections||[]],R=T.findIndex(O=>O.id===I);R<=0||([T[R-1],T[R]]=[T[R],T[R-1]],T.forEach((O,z)=>{O.orderIndex=z+1}),l(O=>({...O,sections:T})))},N=I=>{const T=[...o.sections||[]],R=T.findIndex(O=>O.id===I);R===-1||R>=T.length-1||([T[R],T[R+1]]=[T[R+1],T[R]],T.forEach((O,z)=>{O.orderIndex=z+1}),l(O=>({...O,sections:T})))},A=I=>{if(!g.name){s({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const T=[...o.sections||[]],R=T.findIndex(q=>q.id===I);if(R===-1)return;const O=T[R],z={id:Math.random().toString(36).substr(2,9),sectionId:I,name:g.name,description:g.description||"",itemType:g.itemType||"checkbox",isRequired:g.isRequired??!0,orderIndex:(O.items?.length||0)+1,createdAt:new Date};O.items=[...O.items||[],z],T[R]=O,l(q=>({...q,sections:T})),b({name:"",description:"",itemType:"checkbox",isRequired:!0}),p(!1)},_=(I,T)=>{const R=[...o.sections||[]],O=R.findIndex(q=>q.id===I);if(O===-1)return;const z=R[O];z.items=z.items.filter(q=>q.id!==T),R[O]=z,l(q=>({...q,sections:R}))},k=(I,T)=>{const R=[...o.sections||[]],O=R.findIndex(K=>K.id===I);if(O===-1)return;const z=R[O],q=[...z.items],B=q.findIndex(K=>K.id===T);B<=0||([q[B-1],q[B]]=[q[B],q[B-1]],q.forEach((K,Y)=>{K.orderIndex=Y+1}),z.items=q,R[O]=z,l(K=>({...K,sections:R})))},F=(I,T)=>{const R=[...o.sections||[]],O=R.findIndex(K=>K.id===I);if(O===-1)return;const z=R[O],q=[...z.items],B=q.findIndex(K=>K.id===T);B===-1||B>=q.length-1||([q[B],q[B+1]]=[q[B+1],q[B]],q.forEach((K,Y)=>{K.orderIndex=Y+1}),z.items=q,R[O]=z,l(K=>({...K,sections:R})))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Template":"Create Template"}),n.jsx(Ge,{children:t?"Update PDI template details":"Create a new PDI template"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),n.jsxs("div",{children:[n.jsx(ue,{children:"Base Template"}),n.jsxs(nt,{value:"",onValueChange:I=>{const T=As.templateOptions.find(R=>R.id===I);T&&l(R=>({...R,name:T.name,description:T.description,unitTypes:T.unitTypes}))},children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Start from existing template (optional)"})}),n.jsx(tt,{children:As.templateOptions.map(I=>n.jsx(he,{value:I.id,children:I.name},I.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a template to copy its settings as a starting point"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Categories"}),As.inspectionCategories.map(I=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:`category-${I.id}`,checked:o.categories.includes(I.name),onCheckedChange:T=>{l(T?R=>({...R,categories:[...R.categories,I.name]}):R=>({...R,categories:R.categories.filter(O=>O!==I.name)}))}}),n.jsx(ue,{htmlFor:`category-${I.id}`,className:"text-sm",children:I.name})]},I.id))]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Template Name *"}),n.jsx(Te,{id:"name",value:o.name,onChange:I=>l(T=>({...T,name:I.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),n.jsxs(nt,{value:o.vehicleType,onValueChange:I=>l(T=>({...T,vehicleType:I})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:ur.RV,children:"RV"}),n.jsx(he,{value:ur.MOTORHOME,children:"Motorhome"}),n.jsx(he,{value:ur.TRAVEL_TRAILER,children:"Travel Trailer"}),n.jsx(he,{value:ur.FIFTH_WHEEL,children:"Fifth Wheel"}),n.jsx(he,{value:ur.TOY_HAULER,children:"Toy Hauler"}),n.jsx(he,{value:ur.SINGLE_WIDE,children:"Single Wide MH"}),n.jsx(he,{value:ur.DOUBLE_WIDE,children:"Double Wide MH"}),n.jsx(he,{value:ur.TRIPLE_WIDE,children:"Triple Wide MH"}),n.jsx(he,{value:ur.PARK_MODEL,children:"Park Model"}),n.jsx(he,{value:ur.MODULAR_HOME,children:"Modular Home"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"description",children:"Description"}),n.jsx(kr,{id:"description",value:o.description,onChange:I=>l(T=>({...T,description:I.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"isActive",checked:o.isActive,onCheckedChange:I=>l(T=>({...T,isActive:!!I}))}),n.jsx(ue,{htmlFor:"isActive",children:"Active template"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),n.jsxs(re,{type:"button",onClick:()=>d(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&n.jsx(me,{className:"border-dashed",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"sectionName",children:"Section Name *"}),n.jsx(Te,{id:"sectionName",value:u.name,onChange:I=>h(T=>({...T,name:I.target.value})),placeholder:"e.g., Exterior Inspection"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"sectionDescription",children:"Description"}),n.jsx(kr,{id:"sectionDescription",value:u.description,onChange:I=>h(T=>({...T,description:I.target.value})),placeholder:"Describe this section",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),n.jsx(re,{type:"button",onClick:w,children:"Add Section"})]})]})})}),n.jsxs("div",{className:"space-y-6",children:[o.sections?.map(I=>n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-lg",children:I.name}),I.description&&n.jsx(Ge,{children:I.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(I.id),disabled:I.orderIndex<=1,children:n.jsx(Th,{className:"h-4 w-4"})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(I.id),disabled:I.orderIndex>=(o.sections?.length||0),children:n.jsx(Ph,{className:"h-4 w-4"})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(I.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",I.items.length,")"]}),n.jsxs(re,{type:"button",size:"sm",variant:"outline",onClick:()=>{v(I.id),p(!0)},children:[n.jsx(Dt,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),f&&y===I.id&&n.jsx(me,{className:"border-dashed",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"itemName",children:"Item Name *"}),n.jsx(Te,{id:"itemName",value:g.name,onChange:T=>b(R=>({...R,name:T.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"itemType",children:"Item Type"}),n.jsxs(nt,{value:g.itemType,onValueChange:T=>b(R=>({...R,itemType:T})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"checkbox",children:"Checkbox"}),n.jsx(he,{value:"text",children:"Text Input"}),n.jsx(he,{value:"number",children:"Number Input"}),n.jsx(he,{value:"photo",children:"Photo Upload"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"itemDescription",children:"Description"}),n.jsx(kr,{id:"itemDescription",value:g.description,onChange:T=>b(R=>({...R,description:T.target.value})),placeholder:"Describe this inspection item",rows:2})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"isRequired",checked:g.isRequired,onCheckedChange:T=>b(R=>({...R,isRequired:!!T}))}),n.jsx(ue,{htmlFor:"isRequired",children:"Required item"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>{p(!1),v(null)},children:"Cancel"}),n.jsx(re,{type:"button",onClick:()=>A(I.id),children:"Add Item"})]})]})})}),n.jsxs("div",{className:"space-y-2",children:[I.items.map(T=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:T.name}),n.jsx(Ve,{variant:"outline",className:"text-xs",children:T.itemType}),T.isRequired&&n.jsx(Ve,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),T.description&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:T.description})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(I.id,T.id),disabled:T.orderIndex<=1,children:n.jsx(Th,{className:"h-3 w-3"})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(I.id,T.id),disabled:T.orderIndex>=I.items.length,children:n.jsx(Ph,{className:"h-3 w-3"})}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(I.id,T.id),children:n.jsx(rs,{className:"h-3 w-3 text-red-500"})})]})]},T.id)),I.items.length===0&&n.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(wj,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},I.id)),(!o.sections||o.sections.length===0)&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(YC,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No sections added yet"}),n.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Template"]})})]})]})})]})})}function Dfe({onNewInspection:t,onViewInspection:e,onEditInspection:r}){const[s,i]=S.useState(""),[a,o]=S.useState("all"),[l,c]=S.useState("all"),d=As.sampleInspections,u=y=>As.statusColors[y]||"bg-gray-100 text-gray-800",h=y=>{switch(y){case"Complete":return n.jsx(hn,{className:"h-4 w-4 text-green-600"});case"In Progress":return n.jsx(Dr,{className:"h-4 w-4 text-blue-600"});case"Failed":return n.jsx(zo,{className:"h-4 w-4 text-red-600"});default:return n.jsx(Dr,{className:"h-4 w-4 text-gray-600"})}},f=d.filter(y=>{const v=y.unitInfo.toLowerCase().includes(s.toLowerCase())||y.stockNumber.toLowerCase().includes(s.toLowerCase())||y.technicianName.toLowerCase().includes(s.toLowerCase()),g=a==="all"||y.status===a,b=l==="all"||y.technicianId===l;return v&&g&&b}),p=y=>{if(!y.findings||y.findings.length===0)return 0;const v=y.findings.filter(g=>g.status==="Pass"||g.status==="Fail").length;return Math.round(v/y.findings.length*100)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PDI Inspections"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage pre-delivery inspections for RVs and vehicles"})]}),n.jsxs(re,{onClick:t,children:[n.jsx(Dt,{className:"mr-2 h-4 w-4"}),"New Inspection"]})]}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Inspection List"}),n.jsx(Ge,{children:"View and manage all PDI inspections"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(qn,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search inspections...",value:s,onChange:y=>i(y.target.value),className:"pl-8"})]}),n.jsxs(nt,{value:a,onValueChange:o,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"All statuses"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Statuses"}),As.checklistStatuses.map(y=>n.jsx(he,{value:y,children:y},y))]})]}),n.jsxs(nt,{value:l,onValueChange:c,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"All technicians"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Technicians"}),As.technicianOptions.map(y=>n.jsx(he,{value:y.id,children:y.name},y.id))]})]})]}),n.jsxs(W0,{children:[n.jsx(G0,{children:n.jsxs(ac,{children:[n.jsx(Gr,{children:"Unit Info"}),n.jsx(Gr,{children:"Stock #"}),n.jsx(Gr,{children:"Technician"}),n.jsx(Gr,{children:"Status"}),n.jsx(Gr,{children:"Progress"}),n.jsx(Gr,{children:"Started"}),n.jsx(Gr,{children:"Completed"}),n.jsx(Gr,{children:"Actions"})]})}),n.jsx(K0,{children:f.map(y=>n.jsxs(ac,{children:[n.jsx(Vr,{className:"font-medium",children:y.unitInfo}),n.jsx(Vr,{children:y.stockNumber}),n.jsx(Vr,{children:y.technicianName}),n.jsx(Vr,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[h(y.status),n.jsx(Ve,{className:u(y.status),children:y.status})]})}),n.jsx(Vr,{children:n.jsxs("div",{className:"text-sm",children:[p(y),"% Complete"]})}),n.jsx(Vr,{children:wt(y.startedDate)}),n.jsx(Vr,{children:y.completedDate?wt(y.completedDate):"-"}),n.jsx(Vr,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"outline",size:"sm",onClick:()=>e(y.id),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>r(y.id),children:n.jsx(Nn,{className:"h-4 w-4"})})]})})]},y.id))})]}),f.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inspections found matching your criteria."})]})]})]})}function kfe({inspection:t,vehicles:e,onSave:r,onComplete:s,onUpdateItem:i,onAddDefect:a,onAddPhoto:o,onCancel:l}){const{toast:c}=Gt(),[d,u]=S.useState(!1),[h,f]=S.useState("checklist"),[p,y]=S.useState(t.notes||""),[v,g]=S.useState(!1),[b,j]=S.useState(null),[w,C]=S.useState({title:"",description:"",severity:Po.MEDIUM}),[E,N]=S.useState(!1),[A,_]=S.useState(""),[k,F]=S.useState({unitId:t?.unitId||As.formDefaults.unitId,technicianId:t?.technicianId||As.formDefaults.technicianId,templateId:t?.templateId||As.formDefaults.templateId,status:t?.status||As.formDefaults.status,startedDate:t?.startedDate||As.formDefaults.startedDate,notes:t?.notes||As.formDefaults.notes,customerNotified:t?.customerNotified||As.formDefaults.customerNotified,deliveryApproved:t?.deliveryApproved||As.formDefaults.deliveryApproved});S.useEffect(()=>{y(t.notes||"")},[t]);const{getRootProps:I,getInputProps:T}=Hj({accept:{"image/*":[]},onDrop:H=>{if(H.length===0)return;const $=H[0],W=URL.createObjectURL($);B(W)}}),R=async()=>{u(!0);try{await r({notes:p}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{u(!1)}},O=async()=>{const H=t.items.filter($=>$.templateItem?.isRequired&&$.status===fs.PENDING);if(H.length>0){c({title:"Incomplete Inspection",description:`${H.length} required items are still pending`,variant:"destructive"});return}u(!0);try{await s(t.id,p),c({title:"Success",description:"Inspection completed successfully"}),l()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{u(!1)}},z=async(H,$,W,te)=>{try{await i(t.id,H,{status:$,value:W,notes:te}),$===fs.FAILED&&(j(H),g(!0))}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},q=async()=>{if(!w.title||!w.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await a(t.id,{...w,inspectionItemId:b||void 0}),C({title:"",description:"",severity:Po.MEDIUM}),j(null),g(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},B=async H=>{try{await o(t.id,{url:H,inspectionItemId:b||void 0,caption:A}),_(""),N(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},K=H=>{switch(H){case fs.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case fs.PASSED:return"bg-green-50 text-green-700 border-green-200";case fs.FAILED:return"bg-red-50 text-red-700 border-red-200";case fs.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},Y=H=>{switch(H){case Po.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case Po.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Po.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Po.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},J=e.find(H=>H.id===t.vehicleId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"PDI Inspection"}),n.jsx(Ge,{children:J?`${J.year} ${J.make} ${J.model}`:t.vehicleId})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",t.status===sc.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":t.status===sc.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":t.status===sc.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:t.status.replace("_"," ").toUpperCase()}),n.jsx(re,{variant:"ghost",size:"sm",onClick:l,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsx(pe,{children:n.jsxs(fn,{value:h,onValueChange:f,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"checklist",children:"Checklist"}),n.jsxs(dt,{value:"defects",children:["Defects",t.defects.length>0&&n.jsx(Ve,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:t.defects.length})]}),n.jsxs(dt,{value:"photos",children:["Photos",t.photos.length>0&&n.jsx(Ve,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:t.photos.length})]})]}),n.jsxs(ht,{value:"checklist",className:"space-y-6",children:[v&&n.jsxs(me,{className:"border-2 border-red-200",children:[n.jsxs(je,{className:"bg-red-50",children:[n.jsxs(Ne,{className:"text-lg text-red-700 flex items-center",children:[n.jsx(ao,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),n.jsx(Ge,{className:"text-red-600",children:"Record details about the issue found"})]}),n.jsxs(pe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defectTitle",children:"Defect Title *"}),n.jsx(Te,{id:"defectTitle",value:w.title,onChange:H=>C($=>({...$,title:H.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defectDescription",children:"Description *"}),n.jsx(kr,{id:"defectDescription",value:w.description,onChange:H=>C($=>({...$,description:H.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"defectSeverity",children:"Severity"}),n.jsxs(nt,{value:w.severity,onValueChange:H=>C($=>({...$,severity:H})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:Po.LOW,children:"Low"}),n.jsx(he,{value:Po.MEDIUM,children:"Medium"}),n.jsx(he,{value:Po.HIGH,children:"High"}),n.jsx(he,{value:Po.CRITICAL,children:"Critical"})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>{g(!1),j(null)},children:"Cancel"}),n.jsx(re,{type:"button",onClick:q,children:"Add Defect"})]})]})]}),E&&n.jsxs(me,{className:"border-2 border-blue-200",children:[n.jsxs(je,{className:"bg-blue-50",children:[n.jsxs(Ne,{className:"text-lg text-blue-700 flex items-center",children:[n.jsx(td,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),n.jsx(Ge,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),n.jsxs(pe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{...I(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[n.jsx("input",{...T()}),n.jsx(mg,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"photoCaption",children:"Caption (Optional)"}),n.jsx(Te,{id:"photoCaption",value:A,onChange:H=>_(H.target.value),placeholder:"e.g., Front view of vehicle"})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:()=>{N(!1),j(null),_("")},children:"Cancel"}),n.jsx(re,{type:"button",onClick:()=>{B("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),t.template?.sections.map(H=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:H.name}),H.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:H.description}),n.jsx("div",{className:"space-y-3",children:H.items.map($=>{const W=t.items.find(te=>te.templateItemId===$.id);return W?n.jsx(me,{className:"shadow-sm",children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("h4",{className:"font-medium",children:$.name}),$.isRequired&&n.jsx(Ve,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),n.jsx(Ve,{className:pt("ri-badge-status text-xs",K(W.status)),children:W.status.toUpperCase()})]}),$.description&&n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:$.description}),$.itemType==="text"&&n.jsx("div",{className:"mb-3",children:n.jsx(Te,{value:W.value||"",onChange:te=>z(W.id,fs.PASSED,te.target.value),placeholder:"Enter text"})}),$.itemType==="number"&&n.jsx("div",{className:"mb-3",children:n.jsx(Te,{type:"number",value:W.value||"",onChange:te=>z(W.id,fs.PASSED,te.target.value),placeholder:"Enter number"})}),$.itemType==="photo"&&n.jsxs("div",{className:"mb-3",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{j(W.id),N(!0)},children:[n.jsx(td,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),t.photos.filter(te=>te.inspectionItemId===W.id).length>0&&n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.photos.filter(te=>te.inspectionItemId===W.id).map(te=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:te.url,alt:te.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),te.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:te.caption})]},te.id))})]}),W.notes&&n.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",W.notes]})}),W.status!==fs.PENDING&&n.jsx("div",{className:"mb-3",children:n.jsx(kr,{value:W.notes||"",onChange:te=>z(W.id,W.status,W.value,te.target.value),placeholder:"Add notes (optional)",rows:2})})]}),$.itemType==="checkbox"&&n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsxs(re,{variant:W.status===fs.PASSED?"default":"outline",size:"sm",onClick:()=>z(W.id,fs.PASSED),className:W.status===fs.PASSED?"":"border-green-200 text-green-700",children:[n.jsx(hn,{className:"h-4 w-4 mr-1"}),"Pass"]}),n.jsxs(re,{variant:W.status===fs.FAILED?"default":"outline",size:"sm",onClick:()=>z(W.id,fs.FAILED),className:W.status===fs.FAILED?"":"border-red-200 text-red-700",children:[n.jsx(zo,{className:"h-4 w-4 mr-1"}),"Fail"]}),n.jsx(re,{variant:W.status===fs.NA?"default":"outline",size:"sm",onClick:()=>z(W.id,fs.NA),className:W.status===fs.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},$.id):null})})]},H.id)),n.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),n.jsx(kr,{id:"inspectionNotes",value:p,onChange:H=>y(H.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(re,{type:"button",variant:"outline",onClick:l,disabled:d,children:"Cancel"}),n.jsxs(re,{type:"button",onClick:R,disabled:d,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),n.jsxs(re,{type:"button",onClick:O,disabled:d||t.status!=="in_progress",children:[n.jsx(Mx,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),n.jsxs(ht,{value:"defects",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),n.jsxs(re,{size:"sm",onClick:()=>{j(null),g(!0)},children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),t.defects.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(ao,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No defects reported"}),n.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):n.jsx("div",{className:"space-y-4",children:t.defects.map(H=>n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-semibold",children:H.title}),n.jsx(Ve,{className:pt("ri-badge-status",Y(H.severity)),children:H.severity.toUpperCase()}),n.jsx(Ve,{className:H.status==="open"?"bg-red-50 text-red-700 border-red-200":H.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":H.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:H.status.replace("_"," ").toUpperCase()})]})})}),n.jsxs(pe,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:H.description}),t.photos.filter($=>$.defectId===H.id).length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.photos.filter($=>$.defectId===H.id).map($=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:$.url,alt:$.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),$.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:$.caption})]},$.id))})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:H.assignedTo?n.jsxs("span",{children:["Assigned to: ",H.assignedTo]}):n.jsx("span",{children:"Unassigned"})}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{j(null),N(!0)},children:[n.jsx(td,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},H.id))})]}),n.jsxs(ht,{value:"photos",className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),n.jsxs(re,{size:"sm",onClick:()=>{j(null),N(!0)},children:[n.jsx(td,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),t.photos.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(mg,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No photos added"}),n.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.photos.map(H=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:H.url,alt:H.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),H.caption&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:H.caption})]},H.id))})]})]})})]})})}function Ofe({inspectionId:t,onEdit:e,onApprove:r}){const s=As.sampleInspections.find(l=>l.id===t)||As.sampleInspections[0],i=l=>As.statusColors[l]||As.findingStatusColors[l]||"bg-gray-100 text-gray-800",a=()=>{const l=s.findings.length,c=s.findings.filter(d=>d.status!=="Pending").length;return Math.round(c/l*100)},o=s.findings.reduce((l,c)=>(l[c.category]||(l[c.category]=[]),l[c.category].push(c),l),{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"PDI Inspection Report"}),n.jsx("p",{className:"text-muted-foreground",children:s.unitInfo})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ve,{className:i(s.status),children:s.status}),e&&n.jsx(re,{variant:"outline",onClick:e,children:"Edit"}),r&&s.status==="Complete"&&n.jsx(re,{onClick:r,children:"Approve for Delivery"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsx(me,{children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Technician"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s.technicianName})]})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Completed"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s.completedDate?wt(s.completedDate):"In Progress"})]})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yr,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Template"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s.templateName})]})]})})}),n.jsx(me,{children:n.jsx(pe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(td,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Progress"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(uc,{value:a(),className:"w-16"}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[a(),"%"]})]})]})]})})})]}),n.jsxs(fn,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"checklist",children:"Checklist"}),n.jsx(dt,{value:"notes",children:"Notes"})]}),n.jsx(ht,{value:"overview",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Unit Information"})}),n.jsxs(pe,{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Stock Number:"}),n.jsx("span",{className:"font-medium",children:s.stockNumber})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"VIN:"}),n.jsx("span",{className:"font-medium",children:s.vin})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Started:"}),n.jsx("span",{className:"font-medium",children:wt(s.startedDate)})]}),s.completedDate&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Completed:"}),n.jsx("span",{className:"font-medium",children:wt(s.completedDate)})]})]})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Inspection Summary"})}),n.jsxs(pe,{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Items:"}),n.jsx("span",{className:"font-medium",children:s.findings.length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Passed:"}),n.jsx("span",{className:"font-medium text-green-600",children:s.findings.filter(l=>l.status==="Pass").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Failed:"}),n.jsx("span",{className:"font-medium text-red-600",children:s.findings.filter(l=>l.status==="Fail").length})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Customer Notified:"}),n.jsx("span",{className:"font-medium",children:s.customerNotified?"Yes":"No"})]})]})]})]})}),n.jsx(ht,{value:"checklist",className:"space-y-4",children:As.inspectionCategories.map(l=>{const c=o[l.name]||[];return n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{className:"text-lg",children:l.name})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3",children:[c.map((d,u)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:d.item}),n.jsx(Ve,{className:i(d.status),children:d.status})]}),d.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.notes})]}),n.jsx("div",{className:"ml-4",children:d.status==="Pass"?n.jsx(hn,{className:"h-5 w-5 text-green-600"}):d.status==="Fail"?n.jsx(zo,{className:"h-5 w-5 text-red-600"}):n.jsx(Dr,{className:"h-5 w-5 text-yellow-600"})})]},u)),c.length===0&&n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No items inspected in this category"})]})})]},l.id)})}),n.jsxs(ht,{value:"notes",className:"space-y-4",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Overall Notes"})}),n.jsx(pe,{children:n.jsx("p",{className:"text-sm leading-relaxed",children:s.overallNotes||"No additional notes provided."})})]}),s.findings.filter(l=>l.notes).length>0&&n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Item-Specific Notes"})}),n.jsx(pe,{className:"space-y-3",children:s.findings.filter(l=>l.notes).map((l,c)=>n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium",children:l.item}),n.jsx(Ve,{className:i(l.status),children:l.status})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:l.notes})]},c))})]})]})]})]})}function Rfe({templates:t,vehicles:e,currentUserId:r,onCreateInspection:s,onCancel:i}){const{toast:a}=Gt(),[o,l]=S.useState(!1),[c,d]=S.useState(""),[u,h]=S.useState(""),[f,p]=S.useState(""),[y,v]=S.useState([]);S.useEffect(()=>{if(c){const b=e.find(j=>j.id===c);if(b){const j=b.type,w=t.filter(C=>C.isActive&&C.vehicleType===j);v(w),w.length===1?h(w[0].id):h("")}}else v([]),h("")},[c,t,e]);const g=async b=>{if(b.preventDefault(),!c){a({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!u){a({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}l(!0);try{await s({templateId:u,vehicleId:c,inspectorId:r,notes:f}),a({title:"Success",description:"Inspection created successfully"})}catch{a({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"New PDI Inspection"}),n.jsx(Ge,{children:"Create a new pre-delivery inspection"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"vehicle",children:"Vehicle *"}),n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select a home/vehicle"})}),n.jsx(tt,{children:e.map(b=>n.jsxs(he,{value:b.id,children:[b.year," ",b.make," ",b.model," - ",b.vin]},b.id))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"template",children:"Inspection Template *"}),n.jsxs(nt,{value:u,onValueChange:h,disabled:y.length===0,children:[n.jsx(et,{children:n.jsx(st,{placeholder:y.length===0?"Select a home/vehicle first":"Select a template"})}),n.jsx(tt,{children:y.map(b=>n.jsx(he,{value:b.id,children:b.name},b.id))})]}),y.length===0&&c&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(kr,{id:"notes",value:f,onChange:b=>p(b.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o||!c||!u,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Mx,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function AO(){const{templates:t,inspections:e,createTemplate:r,updateTemplate:s,deleteTemplate:i,createInspection:a,updateInspection:o,updateInspectionItem:l,completeInspection:c,createDefect:d,addPhoto:u,addSignoff:h}=Tfe(),{vehicles:f}=df(),{user:p}=Qg(),{toast:y}=Gt(),[v,g]=S.useState("inspections"),[b,j]=S.useState(!1),[w,C]=S.useState(!1),[E,N]=S.useState(!1),[A,_]=S.useState(!1),[k,F]=S.useState(null),[I,T]=S.useState(null),R=()=>{F(null),j(!0)},O=oe=>{F(oe),j(!0)},z=oe=>{F(oe),j(!0)},q=async oe=>{if(window.confirm("Are you sure you want to delete this template?"))try{await i(oe),y({title:"Success",description:"Template deleted successfully"})}catch{y({title:"Error",description:"Failed to delete template",variant:"destructive"})}},B=async oe=>{try{const it={...oe,id:void 0,name:`${oe.name} (Copy)`};await r(it),y({title:"Success",description:"Template duplicated successfully"})}catch{y({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},K=async oe=>{try{k?await s(k.id,oe):await r(oe),j(!1),F(null)}catch{y({title:"Error",description:`Failed to ${k?"update":"create"} template`,variant:"destructive"})}},Y=()=>{N(!0)},J=async oe=>{try{const it=await a(oe);N(!1),T(it),C(!0)}catch{y({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},H=oe=>{T(oe),_(!0)},$=oe=>{T(oe),C(!0)},W=async oe=>{if(I)try{await o(I.id,oe),y({title:"Success",description:"Inspection saved successfully"})}catch{y({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},te=async(oe,it)=>{try{await c(oe,it),C(!1),T(null),y({title:"Success",description:"Inspection completed successfully"})}catch{y({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},ee=async(oe,it,_e)=>{try{await l(oe,it,_e)}catch{y({title:"Error",description:"Failed to update item",variant:"destructive"})}},ne=async(oe,it)=>{try{await d(oe,it)}catch{y({title:"Error",description:"Failed to add defect",variant:"destructive"})}},ae=async(oe,it)=>{try{await u(oe,it)}catch{y({title:"Error",description:"Failed to add photo",variant:"destructive"})}},ve=async(oe,it)=>{try{await h(oe,{...it,userId:p?.id||"current-user"})}catch{y({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},xe=t.length,Se=t.filter(oe=>oe.isActive).length,Pe=e.length,Ce=e.filter(oe=>oe.status===sc.COMPLETED||oe.status===sc.APPROVED).length,He=e.filter(oe=>oe.status===sc.IN_PROGRESS).length,Ke=e.reduce((oe,it)=>oe+it.defects.length,0),we=e.reduce((oe,it)=>oe+it.defects.filter(_e=>_e.status==="open"||_e.status==="in_progress").length,0);return e.reduce((oe,it)=>oe+it.photos.length,0),n.jsxs("div",{className:"space-y-8",children:[b&&n.jsx(Ife,{template:k||void 0,onSave:K,onCancel:()=>{j(!1),F(null)}}),E&&n.jsx(Rfe,{templates:t,vehicles:f,currentUserId:p?.id||"current-user",onCreateInspection:J,onCancel:()=>N(!1)}),w&&I&&n.jsx(kfe,{inspection:I,vehicles:f,onSave:W,onComplete:te,onUpdateItem:ee,onAddDefect:ne,onAddPhoto:ae,onCancel:()=>{C(!1),T(null)}}),A&&I&&n.jsx(Ofe,{inspection:I,vehicles:f,onAddSignoff:ve,onClose:()=>{_(!1),T(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),n.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),n.jsxs(re,{className:"shadow-sm",onClick:Y,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),n.jsx(Mx,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Pe}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),Ce," completed"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),n.jsx(Mx,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:He}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),n.jsx(ao,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:we}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),Ke," total defects"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Templates"}),n.jsx(wj,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:xe}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),Se," active"]})]})]})]}),n.jsxs(fn,{value:v,onValueChange:g,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-2",children:[n.jsx(dt,{value:"inspections",children:"Inspections"}),n.jsx(dt,{value:"templates",children:"Templates"})]}),n.jsx(ht,{value:"inspections",children:n.jsx(Dfe,{inspections:e,onCreateInspection:Y,onViewInspection:H,onContinueInspection:$})}),n.jsx(ht,{value:"templates",children:n.jsx(_fe,{templates:t,onCreateTemplate:R,onEditTemplate:O,onDeleteTemplate:q,onDuplicateTemplate:B,onViewTemplate:z})})]})]})}function Lfe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(AO,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(AO,{})})]})}function Mfe(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState([]),[o,l]=S.useState(!1);S.useEffect(()=>{c()},[]);const c=()=>{const T=Bn("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:tn.PERCENTAGE,rate:.05,amount:6875,status:fr.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:tn.FLAT,rate:0,amount:2500,status:fr.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),R=Bn("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),O=Bn("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:tn.PERCENTAGE,rate:.05,amount:6875,status:fr.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:fr.PENDING},newValue:{status:fr.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);e(T),s(R),a(O)},d=T=>{rn("renter-insight-commissions",T)},u=T=>{rn("renter-insight-commission-rules",T)},h=T=>{rn("renter-insight-commission-audit",T)},f=T=>t.filter(R=>R.salesPersonId===T),p=T=>t.filter(R=>R.dealId===T),y=T=>t.find(R=>R.id===T),v=T=>r.find(R=>R.id===T),g=T=>i.filter(R=>R.commissionId===T).sort((R,O)=>O.timestamp.getTime()-R.timestamp.getTime()),b=async(T,R,O)=>{l(!0);try{const z={id:Math.random().toString(36).substr(2,9),salesPersonId:T.salesPersonId||"",dealId:T.dealId||"",type:T.type||tn.PERCENTAGE,rate:T.rate||0,amount:T.amount||0,status:fr.PENDING,notes:T.notes||"",customFields:T.customFields||{},createdAt:new Date,updatedAt:new Date},q=[...t,z];e(q),d(q);const B={id:Math.random().toString(36).substr(2,9),commissionId:z.id,userId:R,userName:O,action:"created",newValue:{...z},timestamp:new Date},K=[...i,B];return a(K),h(K),z}finally{l(!1)}},j=async(T,R,O,z,q)=>{const B=t.find($=>$.id===T);if(!B)return null;const K={...B,...R,updatedAt:new Date},Y=t.map($=>$.id===T?K:$);e(Y),d(Y);const J={id:Math.random().toString(36).substr(2,9),commissionId:T,userId:O,userName:z,action:"updated",previousValue:{...B},newValue:R,notes:q,timestamp:new Date},H=[...i,J];return a(H),h(H),K};return{commissions:t,rules:r,auditTrail:i,loading:o,getCommissionsBySalesPerson:f,getCommissionsByDeal:p,getCommissionById:y,getRuleById:v,getAuditTrailByCommission:g,createCommission:b,updateCommission:j,approveCommission:async(T,R,O,z)=>j(T,{status:fr.APPROVED},R,O,z),rejectCommission:async(T,R,O,z)=>j(T,{status:fr.CANCELLED},R,O,z),markCommissionPaid:async(T,R,O,z)=>j(T,{status:fr.PAID,paidDate:new Date},R,O,z),createRule:async T=>{l(!0);try{let R;switch(T.type){case"flat":R={id:Math.random().toString(36).substr(2,9),name:T.name||"",type:"flat",amount:T.amount||0,isActive:T.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":R={id:Math.random().toString(36).substr(2,9),name:T.name||"",type:"percentage",rate:T.rate||0,isActive:T.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":R={id:Math.random().toString(36).substr(2,9),name:T.name||"",type:"tiered",tiers:T.tiers||[],isActive:T.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const O=[...r,R];return s(O),u(O),R}finally{l(!1)}},updateRule:async(T,R)=>{const O=r.find(B=>B.id===T);if(!O)return null;const z={...O,...R,updatedAt:new Date},q=r.map(B=>B.id===T?z:B);return s(q),u(q),z},deleteRule:async T=>{const R=r.filter(O=>O.id!==T);s(R),u(R)},calculateCommission:(T,R)=>{const O=r.find(z=>z.id===R);if(!O)return 0;switch(O.type){case"flat":return O.amount;case"percentage":return T*O.rate;case"tiered":const q=O.tiers.find(B=>T>=B.minAmount&&(B.maxAmount===void 0||T<B.maxAmount));return q?T*q.rate:0;default:return 0}},generateCommissionReport:T=>{let R=[...t];T.startDate&&(R=R.filter(z=>new Date(z.createdAt)>=new Date(T.startDate))),T.endDate&&(R=R.filter(z=>new Date(z.createdAt)<=new Date(T.endDate))),T.salesPersonId&&(R=R.filter(z=>z.salesPersonId===T.salesPersonId)),T.status&&(R=R.filter(z=>z.status===T.status)),T.type&&(R=R.filter(z=>z.type===T.type));const O={totalCommissions:R.length,totalAmount:R.reduce((z,q)=>z+q.amount,0),pendingAmount:R.filter(z=>z.status===fr.PENDING).reduce((z,q)=>z+q.amount,0),approvedAmount:R.filter(z=>z.status===fr.APPROVED).reduce((z,q)=>z+q.amount,0),paidAmount:R.filter(z=>z.status===fr.PAID).reduce((z,q)=>z+q.amount,0),byType:{flat:R.filter(z=>z.type===tn.FLAT).reduce((z,q)=>z+q.amount,0),percentage:R.filter(z=>z.type===tn.PERCENTAGE).reduce((z,q)=>z+q.amount,0),tiered:R.filter(z=>z.type===tn.TIERED).reduce((z,q)=>z+q.amount,0)}};return{commissions:R,summary:O}},exportCommissionsToCSV:T=>{const R=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],O=T.map(z=>[z.id,z.salesPersonId,z.dealId,z.type,z.rate,z.amount,z.status,z.paidDate?z.paidDate.toISOString():"",z.notes,z.createdAt.toISOString()]);return[R,...O]}}}function TU({commission:t,salesReps:e,deals:r,rules:s,onSave:i,onCancel:a}){const{toast:o}=Gt(),[l,c]=S.useState(!1),[d,u]=S.useState({salesPersonId:"",dealId:"",type:tn.PERCENTAGE,rate:.05,amount:0,notes:""}),[h,f]=S.useState(""),[p,y]=S.useState(0),[v,g]=S.useState("");S.useEffect(()=>{if(t){u({...t}),g("");const C=r.find(E=>E.id===t.dealId);C&&y(C.value)}},[t,r]),S.useEffect(()=>{if(d.dealId){const C=r.find(E=>E.id===d.dealId);C&&y(C.value)}},[d.dealId,r]),S.useEffect(()=>{if(h){const C=s.find(N=>N.id===h);if(!C)return;let E=0;switch(C.type){case"flat":E=C.amount,u(k=>({...k,type:tn.FLAT,rate:0,amount:E}));break;case"percentage":const N=C.rate;E=p*N,u(k=>({...k,type:tn.PERCENTAGE,rate:N,amount:E}));break;case"tiered":const _=C.tiers.find(k=>p>=k.minAmount&&(k.maxAmount===void 0||p<k.maxAmount));_&&(E=p*_.rate,u(k=>({...k,type:tn.TIERED,rate:_.rate,amount:E})));break}}else if(d.type===tn.PERCENTAGE){const C=p*(d.rate||0);u(E=>({...E,amount:C}))}},[h,p,d.rate,d.type,s]);const b=async C=>{if(C.preventDefault(),!d.salesPersonId||!d.dealId){o({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){o({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await i(d,v),o({title:"Success",description:`Commission ${t?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${t?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},j=C=>{f(C)},w=()=>{if(d.type===tn.PERCENTAGE){const C=p*(d.rate||0);u(E=>({...E,amount:C}))}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Commission":"Create Commission"}),n.jsx(Ge,{children:t?"Update commission details":"Create a new commission record"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:a,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"salesPersonId",children:"Sales Rep *"}),n.jsxs(nt,{value:d.salesPersonId,onValueChange:C=>u(E=>({...E,salesPersonId:C})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select sales rep"})}),n.jsx(tt,{className:"z-50",children:e.map(C=>n.jsx(he,{value:C.id,children:C.name},C.id))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"dealId",children:"Deal *"}),n.jsxs(nt,{value:d.dealId,onValueChange:C=>u(E=>({...E,dealId:C})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select deal"})}),n.jsx(tt,{className:"z-50",children:r.map(C=>n.jsxs(he,{value:C.id,children:[C.name," - ",Fe(C.value)]},C.id))})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"commissionRule",children:"Commission Rule"}),n.jsxs(nt,{value:h,onValueChange:j,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select rule or enter manually"})}),n.jsxs(tt,{className:"z-50",children:[n.jsx(he,{value:"",children:"Manual Entry"}),s.filter(C=>C.isActive).map(C=>n.jsxs(he,{value:C.id,children:[C.name," (",C.type,")"]},C.id))]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"dealValue",children:"Deal Value"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"dealValue",type:"number",value:p,onChange:C=>y(parseFloat(C.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"commissionType",children:"Commission Type"}),n.jsxs(nt,{value:d.type,onValueChange:C=>u(E=>({...E,type:C})),disabled:!!h,children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{className:"z-50",children:[n.jsx(he,{value:tn.FLAT,children:"Flat"}),n.jsx(he,{value:tn.PERCENTAGE,children:"Percentage"}),n.jsx(he,{value:tn.TIERED,children:"Tiered"})]})]})]})]}),d.type===tn.PERCENTAGE&&!h&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"rate",children:"Commission Rate (%)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Aj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:C=>u(E=>({...E,rate:parseFloat(C.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===tn.FLAT&&!h&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"amount",children:"Flat Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"amount",type:"number",value:d.amount||"",onChange:C=>u(E=>({...E,amount:parseFloat(C.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!h&&d.type===tn.PERCENTAGE&&n.jsx("div",{className:"flex justify-end",children:n.jsxs(re,{type:"button",variant:"outline",onClick:w,size:"sm",children:[n.jsx(_m,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"commissionAmount",children:"Commission Amount"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:C=>u(E=>({...E,amount:parseFloat(C.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Commission Notes"}),n.jsx(kr,{id:"notes",value:d.notes||"",onChange:C=>u(E=>({...E,notes:C.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),t&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"auditNotes",children:"Audit Notes"}),n.jsx(kr,{id:"auditNotes",value:v,onChange:C=>g(C.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Commission"]})})]})]})})]})})}function Ffe({auditEntries:t}){const e=i=>{switch(i){case"created":return n.jsx(Dt,{className:"h-4 w-4 text-blue-500"});case"updated":return n.jsx(Nn,{className:"h-4 w-4 text-yellow-500"});case"approved":return n.jsx(hn,{className:"h-4 w-4 text-green-500"});case"rejected":return n.jsx(zo,{className:"h-4 w-4 text-red-500"});case"paid":return n.jsx(rr,{className:"h-4 w-4 text-green-500"});default:return n.jsx(k2,{className:"h-4 w-4 text-gray-500"})}},r=i=>{switch(i){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},s=i=>{if(!i.previousValue&&!i.newValue)return null;const a=[];if(i.action==="created"&&i.newValue)return n.jsx("div",{className:"text-sm text-muted-foreground",children:n.jsx("p",{children:"Commission created with initial values"})});if(i.previousValue&&i.newValue)for(const[o,l]of Object.entries(i.newValue)){const c=i.previousValue[o];c!==l&&a.push(n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-medium capitalize",children:[o.replace(/([A-Z])/g," $1").trim(),": "]}),n.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),n.jsx("span",{className:"text-green-600",children:l})]},o))}return a.length>0?n.jsx("div",{className:"space-y-1",children:a}):null};return n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(k2,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),n.jsx(Ge,{children:"History of changes to this commission"})]}),n.jsx(pe,{children:t.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(k2,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No audit history available"})]}):n.jsx("div",{className:"space-y-4",children:t.map(i=>n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-0 top-1.5",children:e(i.action)}),n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx(Ve,{className:pt("ri-badge-status",r(i.action)),children:i.action.toUpperCase()}),n.jsx("span",{className:"text-sm text-muted-foreground",children:wt(i.timestamp)})]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:i.userName})," ",i.action," this commission"]}),s(i),i.notes&&n.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:i.notes})})]},i.id))})})]})}function $fe({commission:t,salesReps:e,deals:r,auditTrail:s,onClose:i,onEdit:a,onApprove:o,onReject:l,onMarkPaid:c}){const{toast:d}=Gt(),[u,h]=S.useState("details"),[f,p]=S.useState(""),[y,v]=S.useState(!1),g=A=>{switch(A){case fr.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case fr.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case fr.PAID:return"bg-green-50 text-green-700 border-green-200";case fr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},b=A=>{switch(A){case tn.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case tn.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case tn.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},j=async()=>{v(!0);try{await o(t.id,f),p(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{v(!1)}},w=async()=>{v(!0);try{await l(t.id,f),p(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{v(!1)}},C=async()=>{v(!0);try{await c(t.id,f),p(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{v(!1)}},E=e.find(A=>A.id===t.salesPersonId),N=r.find(A=>A.id===t.dealId);return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:"Commission Details"}),n.jsxs(Ge,{children:["Commission #",t.id]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>a(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{children:[n.jsxs(fn,{value:u,onValueChange:h,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-2",children:[n.jsx(dt,{value:"details",children:"Details"}),n.jsxs(dt,{value:"audit",children:["Audit Trail",s.length>0&&n.jsx(Ve,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:s.length})]})]}),n.jsxs(ht,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",g(t.status)),children:t.status.toUpperCase()}),n.jsx(Ve,{className:pt("ri-badge-status",b(t.type)),children:t.type.toUpperCase()}),n.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:Fe(t.amount)})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("p",{className:"font-medium",children:E?.name||t.salesPersonId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),n.jsx("p",{className:"font-medium",children:N?.name||t.dealId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),n.jsx("p",{className:"font-medium",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),n.jsx("p",{className:"font-medium text-primary",children:Fe(t.amount)})]}),t.type===tn.PERCENTAGE&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),n.jsxs("p",{className:"font-medium",children:[(t.rate*100).toFixed(2),"%"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),n.jsx("p",{className:"font-medium",children:wt(t.createdAt)})]}),t.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:wt(t.paidDate)})]})]}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===fr.PENDING||t.status===fr.APPROVED)&&n.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"actionNotes",children:"Action Notes"}),n.jsx(kr,{id:"actionNotes",value:f,onChange:A=>p(A.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[t.status===fr.PENDING&&n.jsxs(n.Fragment,{children:[n.jsxs(re,{variant:"outline",onClick:w,disabled:y,children:[n.jsx(zo,{className:"h-4 w-4 mr-2"}),"Reject"]}),n.jsxs(re,{onClick:j,disabled:y,children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),t.status===fr.APPROVED&&n.jsxs(re,{onClick:C,disabled:y,children:[n.jsx(rr,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),n.jsx(ht,{value:"audit",children:n.jsx(Ffe,{auditEntries:s})})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(re,{variant:"outline",onClick:i,children:"Close"}),n.jsxs(re,{onClick:()=>a(t),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function _U({rules:t,onCreateRule:e,onEditRule:r,onDeleteRule:s}){const[i,a]=S.useState(""),[o,l]=S.useState("all"),c=h=>{switch(h){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=t.filter(h=>{const f=h.name.toLowerCase().includes(i.toLowerCase()),p=o==="all"||h.type===o;return f&&p}),u=h=>{switch(h.type){case"flat":return`${Fe(h.amount)} flat rate`;case"percentage":return`${(h.rate*100).toFixed(2)}% of deal value`;case"tiered":const f=h.tiers;return f.length===0?"No tiers defined":`${f.length} tiers, ${(f[0].rate*100).toFixed(2)}% to ${(f[f.length-1].rate*100).toFixed(2)}%`;default:return""}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"ri-search-bar flex-1",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search rules...",value:i,onChange:h=>a(h.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:o,onChange:h=>l(h.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"flat",children:"Flat"}),n.jsx("option",{value:"percentage",children:"Percentage"}),n.jsx("option",{value:"tiered",children:"Tiered"})]}),n.jsxs(re,{onClick:e,className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),n.jsx(Ge,{children:"Define how commissions are calculated for different scenarios"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[d.map(h=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:h.name}),n.jsx(Ve,{className:pt("ri-badge-status",c(h.type)),children:h.type.toUpperCase()}),h.isActive?n.jsx(Ve,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):n.jsx(Ve,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),n.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:h.type==="flat"?n.jsxs("span",{className:"flex items-center",children:[n.jsx(rr,{className:"h-3 w-3 mr-1 text-blue-500"}),u(h)]}):h.type==="percentage"?n.jsxs("span",{className:"flex items-center",children:[n.jsx(Aj,{className:"h-3 w-3 mr-1 text-green-500"}),u(h)]}):n.jsxs("span",{className:"flex items-center",children:[n.jsx(_m,{className:"h-3 w-3 mr-1 text-purple-500"}),u(h)]})}),h.type==="tiered"&&n.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:h.tiers.map((f,p)=>n.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[Fe(f.minAmount),f.maxAmount?` - ${Fe(f.maxAmount)}`:"+",":",n.jsxs("span",{className:"font-semibold ml-1",children:[(f.rate*100).toFixed(2),"%"]})]},f.id))})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(h),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Edit"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>s(h.id),children:n.jsx(rs,{className:"h-3 w-3"})})]})]},h.id)),d.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(_m,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commission rules found"}),n.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}const Dh={ruleTypes:["Revenue","Unit","Bonus"],defaultSettings:{commissionType:"Percentage",rate:.05},salesReps:[{id:"rep-1",name:"Jamie Sales"},{id:"rep-2",name:"Morgan Closer"}],sampleRules:[{id:"rule-001",name:"5% on RV Sales",type:"Percentage",rate:.05,criteria:'vehicle.type === "RV"'}],sampleCommissions:[{id:"comm-001",repId:"rep-1",amount:1250,period:"June 2025",ruleId:"rule-001",saleAmount:25e3}]};function IU({onSubmit:t,onCancel:e}){const[r,s]=S.useState({name:"",type:Dh.defaultSettings.commissionType,rate:Dh.defaultSettings.rate,criteria:"",description:""}),i=a=>{a.preventDefault(),t(r)};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Create Commission Rule"}),n.jsx(Ge,{children:"Define a new commission calculation rule"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:e,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:i,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Rule Name"}),n.jsx(Te,{id:"name",value:r.name,onChange:a=>s({...r,name:a.target.value}),placeholder:"Enter rule name"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"type",children:"Rule Type"}),n.jsxs(nt,{value:r.type,onValueChange:a=>s({...r,type:a}),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select rule type"})}),n.jsx(tt,{children:Dh.ruleTypes.map(a=>n.jsx(he,{value:a,children:a},a))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"rate",children:"Commission Rate (%)"}),n.jsx(Te,{id:"rate",type:"number",value:r.rate*100,onChange:a=>s({...r,rate:parseFloat(a.target.value)/100}),min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"criteria",children:"Criteria"}),n.jsx(Te,{id:"criteria",value:r.criteria,onChange:a=>s({...r,criteria:a.target.value}),placeholder:"Enter criteria"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"description",children:"Description"}),n.jsx(kr,{id:"description",value:r.description,onChange:a=>s({...r,description:a.target.value}),placeholder:"Enter description"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),n.jsxs(re,{type:"submit",children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]})]})})]})})}function DU({salesReps:t,onGenerateReport:e,onExportCSV:r}){const{toast:s}=Gt(),[i,a]=S.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[o,l]=S.useState(!1),[c,d]=S.useState(null),[u,h]=S.useState("none"),f=()=>{try{const j=e(i);d(j),s({title:"Report Generated",description:`Generated report with ${j.commissions.length} commissions`})}catch{s({title:"Error",description:"Failed to generate report",variant:"destructive"})}},p=()=>{if(c)try{const j=r(c.commissions),w=vg.unparse(j),C=new Blob([w],{type:"text/csv;charset=utf-8;"}),E=URL.createObjectURL(C),N=document.createElement("a");N.href=E,N.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N),s({title:"Export Successful",description:"Commission report exported to CSV"})}catch{s({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},y=j=>{if(u==="none")return{"All Commissions":j};const w={};return j.forEach(C=>{let E="";switch(u){case"salesPerson":E=C.salesPersonId;break;case"status":E=C.status;break;case"type":E=C.type;break}w[E]||(w[E]=[]),w[E].push(C)}),w},v=j=>{switch(u){case"salesPerson":const w=t.find(C=>C.id===j);return w?w.name:j;case"status":return j.charAt(0).toUpperCase()+j.slice(1);case"type":return j.charAt(0).toUpperCase()+j.slice(1);default:return j}},g=j=>{switch(j){case fr.PENDING:return"Pending";case fr.APPROVED:return"Approved";case fr.PAID:return"Paid";case fr.CANCELLED:return"Cancelled";default:return j}},b=j=>{switch(j){case tn.FLAT:return"Flat";case tn.PERCENTAGE:return"Percentage";case tn.TIERED:return"Tiered";default:return j}};return n.jsx("div",{className:"space-y-6",children:n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Es,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),n.jsx(Ge,{children:"Generate detailed commission reports with custom filters"})]}),n.jsxs(re,{variant:"outline",onClick:()=>l(!o),className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),o?"Hide Filters":"Show Filters"]})]})}),n.jsxs(pe,{children:[o&&n.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"startDate",children:"Start Date"}),n.jsx(Te,{id:"startDate",type:"date",value:i.startDate?new Date(i.startDate).toISOString().split("T")[0]:"",onChange:j=>a(w=>({...w,startDate:j.target.value?new Date(j.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"endDate",children:"End Date"}),n.jsx(Te,{id:"endDate",type:"date",value:i.endDate?new Date(i.endDate).toISOString().split("T")[0]:"",onChange:j=>a(w=>({...w,endDate:j.target.value?new Date(j.target.value):void 0}))})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"salesPersonId",children:"Sales Rep"}),n.jsxs(nt,{value:i.salesPersonId||"",onValueChange:j=>a(w=>({...w,salesPersonId:j})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Sales Reps"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Sales Reps"}),t.map(j=>n.jsx(he,{value:j.id,children:j.name},j.id))]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:i.status||"",onValueChange:j=>a(w=>({...w,status:j})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Statuses"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Statuses"}),n.jsx(he,{value:fr.PENDING,children:"Pending"}),n.jsx(he,{value:fr.APPROVED,children:"Approved"}),n.jsx(he,{value:fr.PAID,children:"Paid"}),n.jsx(he,{value:fr.CANCELLED,children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"type",children:"Commission Type"}),n.jsxs(nt,{value:i.type||"",onValueChange:j=>a(w=>({...w,type:j})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Types"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Types"}),n.jsx(he,{value:tn.FLAT,children:"Flat"}),n.jsx(he,{value:tn.PERCENTAGE,children:"Percentage"}),n.jsx(he,{value:tn.TIERED,children:"Tiered"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(re,{onClick:f,children:[n.jsx(Es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!o&&n.jsx("div",{className:"flex justify-end mb-6",children:n.jsxs(re,{onClick:f,children:[n.jsx(Es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsx(me,{className:"shadow-sm bg-blue-50",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),n.jsx("div",{className:"text-sm text-blue-700 mt-1",children:Fe(c.summary.totalAmount)})]})})}),n.jsx(me,{className:"shadow-sm bg-yellow-50",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Fe(c.summary.pendingAmount)}),n.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),n.jsx(me,{className:"shadow-sm bg-green-50",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Fe(c.summary.paidAmount)}),n.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),n.jsx(me,{className:"shadow-sm bg-purple-50",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Fe(c.summary.approvedAmount)}),n.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(ue,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),n.jsxs(nt,{value:u,onValueChange:j=>h(j),children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"none",children:"No Grouping"}),n.jsx(he,{value:"salesPerson",children:"Sales Rep"}),n.jsx(he,{value:"status",children:"Status"}),n.jsx(he,{value:"type",children:"Commission Type"})]})]})]}),n.jsxs(re,{variant:"outline",onClick:p,disabled:!c,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),n.jsx("div",{className:"space-y-6",children:Object.entries(y(c.commissions)).map(([j,w])=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[u==="salesPerson"&&n.jsx(vs,{className:"h-4 w-4 mr-2 text-blue-500"}),u==="status"&&n.jsx(yr,{className:"h-4 w-4 mr-2 text-yellow-500"}),u==="type"&&n.jsx(Es,{className:"h-4 w-4 mr-2 text-purple-500"}),v(j),n.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",w.length," commissions, ",Fe(w.reduce((C,E)=>C+E.amount,0)),")"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),n.jsx("tbody",{children:w.map(C=>{const E=t.find(N=>N.id===C.salesPersonId);return n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-2",children:E?.name||C.salesPersonId}),n.jsx("td",{className:"p-2",children:C.dealId}),n.jsx("td",{className:"p-2",children:b(C.type)}),n.jsx("td",{className:"p-2 font-medium",children:Fe(C.amount)}),n.jsx("td",{className:"p-2",children:g(C.status)}),n.jsx("td",{className:"p-2",children:new Date(C.createdAt).toLocaleDateString()})]},C.id)})})]})})]},j))})]}),!c&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Es,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No report generated yet"}),n.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const pb=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],DN=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function Bfe(){const{commissions:t,rules:e,createCommission:r,updateCommission:s,approveCommission:i,rejectCommission:a,markCommissionPaid:o,createRule:l,updateRule:c,deleteRule:d,getAuditTrailByCommission:u,generateCommissionReport:h,exportCommissionsToCSV:f}=Mfe(),{user:p}=Qg(),{toast:y}=Gt(),[v,g]=S.useState(""),[b,j]=S.useState("all"),[w,C]=S.useState("commissions"),[E,N]=S.useState(!1),[A,_]=S.useState(!1),[k,F]=S.useState(!1),[I,T]=S.useState(null),[R,O]=S.useState(null),z=_e=>{switch(_e){case fr.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case fr.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case fr.PAID:return"bg-green-50 text-green-700 border-green-200";case fr.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},q=_e=>{switch(_e){case tn.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case tn.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case tn.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=_e=>{switch(_e){case fr.PENDING:return n.jsx(Dr,{className:"h-4 w-4 text-yellow-500"});case fr.APPROVED:return n.jsx(hn,{className:"h-4 w-4 text-blue-500"});case fr.PAID:return n.jsx(rr,{className:"h-4 w-4 text-green-500"});case fr.CANCELLED:return n.jsx(zo,{className:"h-4 w-4 text-red-500"});default:return null}},K=t.filter(_e=>{const qe=_e.salesPersonId.toLowerCase().includes(v.toLowerCase())||_e.dealId.toLowerCase().includes(v.toLowerCase())||_e.id.toLowerCase().includes(v.toLowerCase()),lt=b==="all"||_e.status===b;return qe&&lt}),Y=()=>{T(null),N(!0)},J=_e=>{T(_e),N(!0),_(!1)},H=_e=>{T(_e),_(!0)},$=async(_e,qe)=>{try{I?(await s(I.id,_e,p?.id||"current-user",p?.name||"Current User",qe),y({title:"Success",description:"Commission updated successfully"})):(await r(_e,p?.id||"current-user",p?.name||"Current User"),y({title:"Success",description:"Commission created successfully"})),N(!1),T(null)}catch{y({title:"Error",description:`Failed to ${I?"update":"create"} commission`,variant:"destructive"})}},W=async(_e,qe)=>{try{await i(_e,p?.id||"current-user",p?.name||"Current User",qe),y({title:"Success",description:"Commission approved successfully"})}catch{y({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},te=async(_e,qe)=>{try{await a(_e,p?.id||"current-user",p?.name||"Current User",qe),y({title:"Success",description:"Commission rejected successfully"})}catch{y({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},ee=async(_e,qe)=>{try{await o(_e,p?.id||"current-user",p?.name||"Current User",qe),y({title:"Success",description:"Commission marked as paid successfully"})}catch{y({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},ne=()=>{O(null),F(!0)},ae=_e=>{O(_e),F(!0)},ve=async _e=>{try{R?(await c(R.id,_e),y({title:"Success",description:"Commission rule updated successfully"})):(await l(_e),y({title:"Success",description:"Commission rule created successfully"})),F(!1),O(null)}catch{y({title:"Error",description:`Failed to ${R?"update":"create"} commission rule`,variant:"destructive"})}},xe=async _e=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await d(_e),y({title:"Success",description:"Commission rule deleted successfully"})}catch{y({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},Se=t.length,Pe=t.filter(_e=>_e.status===fr.PENDING).length,Ce=t.filter(_e=>_e.status===fr.APPROVED).length,He=t.filter(_e=>_e.status===fr.PAID).length,Ke=t.reduce((_e,qe)=>_e+qe.amount,0),we=t.filter(_e=>_e.status===fr.PENDING).reduce((_e,qe)=>_e+qe.amount,0),oe=t.filter(_e=>_e.status===fr.APPROVED).reduce((_e,qe)=>_e+qe.amount,0),it=t.filter(_e=>_e.status===fr.PAID).reduce((_e,qe)=>_e+qe.amount,0);return n.jsxs("div",{className:"space-y-8",children:[E&&n.jsx(TU,{commission:I||void 0,salesReps:pb,deals:DN,rules:e,onSave:$,onCancel:()=>{N(!1),T(null)}}),A&&I&&n.jsx($fe,{commission:I,salesReps:pb,deals:DN,auditTrail:u(I.id),onClose:()=>_(!1),onEdit:J,onApprove:W,onReject:te,onMarkPaid:ee}),k&&n.jsx(IU,{rule:R||void 0,onSave:ve,onCancel:()=>{F(!1),O(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),n.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),n.jsxs(re,{className:"shadow-sm",onClick:Y,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),n.jsx(rr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Fe(Ke)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(vs,{className:"h-3 w-3 mr-1"}),Se," commissions"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Dr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Fe(we)}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),Pe," pending approval"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Approved"}),n.jsx(hn,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Fe(oe)}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(hn,{className:"h-3 w-3 mr-1"}),Ce," approved"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Paid"}),n.jsx(rr,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Fe(it)}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(rr,{className:"h-3 w-3 mr-1"}),He," paid out"]})]})]})]}),n.jsxs(fn,{value:w,onValueChange:C,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"commissions",children:"Commissions"}),n.jsx(dt,{value:"rules",children:"Commission Rules"}),n.jsx(dt,{value:"reports",children:"Reports"})]}),n.jsxs(ht,{value:"commissions",className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search commissions...",value:v,onChange:_e=>g(_e.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:b,onValueChange:j,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:fr.PENDING,children:"Pending"}),n.jsx(he,{value:fr.APPROVED,children:"Approved"}),n.jsx(he,{value:fr.PAID,children:"Paid"}),n.jsx(he,{value:fr.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]}),n.jsxs(re,{onClick:Y,className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Commissions"}),n.jsx(Ge,{children:"Track and manage sales commissions"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[K.map(_e=>{const qe=pb.find(vt=>vt.id===_e.salesPersonId),lt=DN.find(vt=>vt.id===_e.dealId);return n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",_e.id]}),n.jsx(Ve,{className:pt("ri-badge-status",q(_e.type)),children:_e.type.toUpperCase()}),n.jsxs(Ve,{className:pt("ri-badge-status",z(_e.status)),children:[B(_e.status),n.jsx("span",{className:"ml-1",children:_e.status.toUpperCase()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(vs,{className:"h-3 w-3 mr-2 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Sales Rep:"}),n.jsx("span",{className:"ml-1",children:qe?.name||_e.salesPersonId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(rr,{className:"h-3 w-3 mr-2 text-green-500"}),n.jsx("span",{className:"font-medium",children:"Deal:"}),n.jsx("span",{className:"ml-1",children:lt?.name||_e.dealId})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(rr,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Amount:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:Fe(_e.amount)})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-2 text-orange-500"}),n.jsx("span",{className:"font-medium",children:"Created:"}),n.jsx("span",{className:"ml-1",children:wt(_e.createdAt)})]})]}),_e.notes&&n.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Notes:"})," ",_e.notes]})})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>H(_e),children:"View"}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>J(_e),children:"Edit"}),_e.status===fr.PENDING&&n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>W(_e.id),children:"Approve"}),_e.status===fr.APPROVED&&n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>ee(_e.id),children:"Mark Paid"})]})]},_e.id)}),K.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No commissions found"}),n.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),n.jsx(ht,{value:"rules",children:n.jsx(_U,{rules:e,onCreateRule:ne,onEditRule:ae,onDeleteRule:xe})}),n.jsx(ht,{value:"reports",children:n.jsx(DU,{salesReps:pb,onGenerateReport:h,onExportCSV:f})})]})]})}function zfe(){const[t,e]=S.useState("overview"),[r,s]=S.useState(!1),[i,a]=S.useState(!1),[o,l]=S.useState(null),c=Dh.sampleCommissions.map(f=>{const p=Dh.salesReps.find(v=>v.id===f.repId),y=Dh.sampleRules.find(v=>v.id===f.ruleId);return{...f,repName:p?.name||"Unknown Rep",ruleName:y?.name||"Unknown Rule",status:"Paid"}}),d=f=>{console.log("Creating commission:",f),s(!1)},u=f=>{console.log("Creating rule:",f),a(!1),l(null)},h=f=>{l(f),a(!0)};return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsxs("div",{className:"space-y-8",children:[r&&n.jsx(TU,{onSave:d,onCancel:()=>s(!1)}),i&&n.jsx(IU,{rule:o,onSave:u,onCancel:()=>{a(!1),l(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),n.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),n.jsxs(re,{className:"shadow-sm",onClick:()=>s(!0),children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),n.jsxs(fn,{value:t,onValueChange:e,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"rules",children:"Commission Rules"}),n.jsx(dt,{value:"reports",children:"Reports"})]}),n.jsxs(ht,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),n.jsx(rr,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"$2,125"}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(vs,{className:"h-3 w-3 mr-1"}),"2 commissions"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Paid Out"}),n.jsx(hn,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:"$1,250"}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(hn,{className:"h-3 w-3 mr-1"}),"1 payment"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Dr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"$875"}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),"1 pending"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Active Rules"}),n.jsx(Es,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"3"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),"commission rules"]})]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:"Recent Commissions"}),n.jsx(Ge,{children:"Latest commission calculations and payments"})]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",children:"View All"})]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[c.map(f=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:f.repName}),n.jsx(Ve,{variant:f.status==="Paid"?"default":"secondary",children:f.status})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.ruleName," - ",f.period]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sale: $",f.saleAmount?.toLocaleString()||"N/A"]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"text-lg font-semibold",children:["$",f.amount?.toLocaleString()||"N/A"]})})]},f.id)),c.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx("p",{children:"No commissions recorded"}),n.jsx("p",{className:"text-sm mt-1",children:"Commissions will appear here once sales are processed"})]})]})})]})]}),n.jsx(ht,{value:"rules",children:n.jsx(_U,{rules:Dh.sampleRules,onCreateRule:()=>a(!0),onEditRule:h,onDeleteRule:f=>console.log("Delete rule:",f)})}),n.jsx(ht,{value:"reports",children:n.jsx(DU,{salesReps:Dh.salesReps,onGenerateReport:f=>console.log("Generate report:",f),onExportCSV:()=>console.log("Export CSV")})})]})]})}),n.jsx(Ut,{path:"/*",element:n.jsx(Bfe,{})})]})}function CO(){const[t,e]=S.useState(""),[r,s]=S.useState(null),i=cT.sampleUsers,a=i.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())||u.email.toLowerCase().includes(t.toLowerCase())),o=u=>u.split(" ").map(h=>h.charAt(0)).join("").toUpperCase(),l=u=>{console.log("Edit user:",u)},c=u=>{console.log("Reset password for:",u)},d=u=>{const h=`/portalclient/?impersonateClientId=${u.id}`;window.open(h,"_blank")};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Client Portal Admin"}),n.jsx("p",{className:"ri-page-description",children:"Manage client portal access and settings"})]}),n.jsxs(re,{children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i.length}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.filter(u=>u.status==="Active").length," active users"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Active Users"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i.filter(u=>u.status==="Active").length}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(i.filter(u=>u.status==="Active").length/i.length*100),"% active rate"]})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Portal Features"}),n.jsx(Nl,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"5"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Available modules"})]})]})]}),n.jsxs(fn,{defaultValue:"users",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"users",children:"Users"}),n.jsx(dt,{value:"agreements",children:"Agreements"}),n.jsx(dt,{value:"settings",children:"Settings"})]}),n.jsx(ht,{value:"users",className:"space-y-4",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Portal Users"}),n.jsx(Ge,{children:"Manage client portal access and user accounts"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"ri-search-bar mb-6",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search users by name or email...",value:t,onChange:u=>e(u.target.value),className:"ri-search-input"})]}),n.jsxs("div",{className:"space-y-4",children:[a.map(u=>n.jsx("div",{className:"ri-table-row",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-primary",children:o(u.name)})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:u.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.email," • ",u.phone," • Last login: ",new Date(u.updatedAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:u.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:u.status}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(u.id),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>c(u.email),children:[n.jsx(tB,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>d(u),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Proxy as Client"]})]})]})},u.id)),a.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),i.length===0?n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"No portal users found"}),n.jsx("p",{className:"text-sm",children:"Users will appear here once they're added to the system"})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"No users found matching your search"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})]})]})]})]})}),n.jsx(ht,{value:"agreements",className:"space-y-4",children:n.jsx(Rz,{})}),n.jsx(ht,{value:"settings",className:"space-y-4",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Portal Settings"}),n.jsx(Ge,{children:"Configure client portal features and appearance"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Portal Features"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Loan Management"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to view loan details and payment history"})]}),n.jsx(Ve,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Agreement Signing"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable electronic signature capabilities"})]}),n.jsx(Ve,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Service Requests"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to submit service requests"})]}),n.jsx(Ve,{className:"bg-gray-100 text-gray-800",children:"Disabled"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Document Library"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide access to important documents"})]}),n.jsx(Ve,{className:"bg-green-100 text-green-800",children:"Enabled"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Appearance"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Portal Theme"}),n.jsx("div",{className:"mt-1",children:n.jsxs("select",{className:"w-full p-2 border rounded-md",children:[n.jsx("option",{children:"Light Theme"}),n.jsx("option",{children:"Dark Theme"}),n.jsx("option",{children:"Auto (System)"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Brand Color"}),n.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[n.jsx("input",{type:"color",value:"#3b82f6",className:"w-12 h-10 border rounded"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"#3b82f6"})]})]})]})]})]})})]})})]})]})}function qfe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(CO,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(CO,{})})]})}function kU(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState(!1);S.useEffect(()=>{o()},[]);const o=()=>{const C=Bn("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:xr.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:xr.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),E=Bn("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:Jc.CREDIT_CARD,status:cu.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);e(C),s(E)},l=C=>{rn("renter-insight-invoices",C)},c=C=>{rn("renter-insight-payments",C)},d=C=>t.filter(E=>E.customerId===C),u=C=>t.find(E=>E.id===C),h=C=>r.filter(E=>E.invoiceId===C),f=async C=>{a(!0);try{const E={id:Math.random().toString(36).substr(2,9),customerId:C.customerId||"",number:C.number||"",items:C.items||[],subtotal:C.subtotal||0,tax:C.tax||0,total:C.total||0,status:C.status||xr.DRAFT,dueDate:C.dueDate||new Date,notes:C.notes||"",customFields:C.customFields||{},createdAt:new Date,updatedAt:new Date},N=[...t,E];return e(N),l(N),E}finally{a(!1)}},p=async(C,E)=>{const N=t.map(A=>A.id===C?{...A,...E,updatedAt:new Date}:A);e(N),l(N)},y=async C=>{const E=t.filter(N=>N.id!==C);e(E),l(E)},v=async(C,E)=>{const N=t.map(A=>A.id===C?{...A,status:E,updatedAt:new Date}:A);e(N),l(N)},g=async(C,E)=>{const N=t.map(A=>A.id===C?{...A,status:xr.PAID,paidDate:new Date,paymentMethod:E,updatedAt:new Date}:A);e(N),l(N)};return{invoices:t,payments:r,loading:i,getInvoicesByCustomerId:d,getInvoiceById:u,getPaymentsByInvoiceId:h,createInvoice:f,updateInvoice:p,deleteInvoice:y,updateInvoiceStatus:v,markInvoiceAsPaid:g,sendInvoice:async C=>{const E=t.map(N=>N.id===C?{...N,status:xr.SENT,updatedAt:new Date}:N);e(E),l(E)},recordPayment:async C=>{a(!0);try{const E={id:Math.random().toString(36).substr(2,9),invoiceId:C.invoiceId||"",amount:C.amount||0,method:C.method||Jc.CREDIT_CARD,status:C.status||cu.COMPLETED,transactionId:C.transactionId,processedDate:C.processedDate||new Date,notes:C.notes||"",customFields:C.customFields||{},createdAt:new Date,updatedAt:new Date},N=[...r,E];return s(N),c(N),E.status===cu.COMPLETED&&await g(E.invoiceId,E.method),E}finally{a(!1)}},sendPaymentRequest:async C=>(await v(C,xr.SENT),await new Promise(E=>setTimeout(E,1e3)),!0)}}const Xf={formDefaults:{customerId:"",dueDate:"",recurrence:"Monthly",notes:"",paymentMethod:"ACH",lineItems:[{description:"",quantity:1,unitPrice:0}]}};function Ufe({invoice:t,onSave:e,onCancel:r}){const{toast:s}=Gt(),{leads:i}=Au(),[a,o]=S.useState(!1),[l,c]=S.useState({customerId:t?.customerId||Xf.formDefaults.customerId,number:t?.number||"",dueDate:t?.dueDate||Xf.formDefaults.dueDate,status:t?.status||xr.DRAFT,recurrence:t?.recurrence||Xf.formDefaults.recurrence,notes:t?.notes||Xf.formDefaults.notes,paymentMethod:t?.paymentMethod||Xf.formDefaults.paymentMethod,lineItems:t?.lineItems||Xf.formDefaults.lineItems,items:t?.items||[...Xf.formDefaults.lineItems],subtotal:t?.subtotal||0,tax:t?.tax||0,total:t?.total||0}),[d,u]=S.useState({description:"",quantity:1,unitPrice:0,total:0}),[h,f]=S.useState(.08);S.useEffect(()=>{t&&(c({...t,dueDate:new Date(t.dueDate)}),t.subtotal>0&&f(t.tax/t.subtotal))},[t]),S.useEffect(()=>{const g=d.quantity||1,b=d.unitPrice||0;u(j=>({...j,total:g*b}))},[d.quantity,d.unitPrice]),S.useEffect(()=>{if(l.items&&l.items.length>0){const g=l.items.reduce((w,C)=>w+C.total,0),b=g*h,j=g+b;c(w=>({...w,subtotal:g,tax:b,total:j}))}else c(g=>({...g,subtotal:0,tax:0,total:0}))},[l.items,h]);const p=async g=>{if(g.preventDefault(),!l.customerId||!l.number||!l.dueDate){s({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!l.items||l.items.length===0){s({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}o(!0);try{await e(l),s({title:"Success",description:`Invoice ${t?"updated":"created"} successfully`})}catch{s({title:"Error",description:`Failed to ${t?"update":"create"} invoice`,variant:"destructive"})}finally{o(!1)}},y=()=>{if(!d.description||!d.unitPrice){s({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const g={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(b=>({...b,items:[...b.items||[],g]})),u({description:"",quantity:1,unitPrice:0,total:0})},v=g=>{c(b=>({...b,items:b.items?.filter(j=>j.id!==g)||[]}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Invoice":"Create Invoice"}),n.jsx(Ge,{children:t?"Update invoice details":"Create a new invoice for your customer"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"customerId",children:"Customer *"}),n.jsxs(nt,{value:l.customerId,onValueChange:g=>c(b=>({...b,customerId:g})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select customer"})}),n.jsx(tt,{children:i.map(g=>n.jsxs(he,{value:g.id,children:[g.firstName," ",g.lastName]},g.id))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),n.jsx(Te,{id:"invoiceNumber",value:l.number,onChange:g=>c(b=>({...b,number:g.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"dueDate",children:"Due Date *"}),n.jsx(Te,{id:"dueDate",type:"date",value:l.dueDate?new Date(l.dueDate).toISOString().split("T")[0]:"",onChange:g=>c(b=>({...b,dueDate:g.target.value?new Date(g.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:l.status,onValueChange:g=>c(b=>({...b,status:g})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:xr.DRAFT,children:"Draft"}),n.jsx(he,{value:xr.SENT,children:"Sent"}),n.jsx(he,{value:xr.VIEWED,children:"Viewed"}),n.jsx(he,{value:xr.PAID,children:"Paid"}),n.jsx(he,{value:xr.OVERDUE,children:"Overdue"}),n.jsx(he,{value:xr.CANCELLED,children:"Cancelled"})]})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),n.jsxs(re,{type:"button",onClick:y,size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ue,{htmlFor:"description",children:"Description *"}),n.jsx(Te,{id:"description",value:d.description,onChange:g=>u(b=>({...b,description:g.target.value})),placeholder:"e.g., Service Labor"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"quantity",children:"Quantity"}),n.jsx(Te,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:g=>u(b=>({...b,quantity:parseInt(g.target.value)||1}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"unitPrice",children:"Unit Price"}),n.jsx(Te,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:g=>u(b=>({...b,unitPrice:parseFloat(g.target.value)||0}))})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Total: "}),n.jsx("span",{className:"font-bold",children:Fe(d.total||0)})]}),n.jsx(re,{type:"button",onClick:y,children:"Add Item"})]})]})}),n.jsx("div",{className:"space-y-3",children:l.items&&l.items.length>0?l.items.map(g=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:g.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",g.quantity," × ",Fe(g.unitPrice)]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"font-bold",children:Fe(g.total)}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(g.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},g.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(so,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No items added yet"}),n.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"taxRate",children:"Tax Rate (%)"}),n.jsx(Te,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:h*100,onChange:g=>f(parseFloat(g.target.value)/100||0)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Fe(l.subtotal||0)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Tax (",(h*100).toFixed(2),"%):"]}),n.jsx("span",{children:Fe(l.tax||0)})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Fe(l.total||0)})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Notes"}),n.jsx(kr,{id:"notes",value:l.notes,onChange:g=>c(b=>({...b,notes:g.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Invoice"]})})]})]})})]})})}function Vfe({invoiceId:t,invoiceTotal:e,remainingBalance:r,onSave:s,onCancel:i}){const{toast:a}=Gt(),[o,l]=S.useState(!1),[c,d]=S.useState({invoiceId:t,amount:r,method:Jc.CREDIT_CARD,status:cu.COMPLETED,processedDate:new Date,notes:""}),u=async h=>{if(h.preventDefault(),!c.amount||c.amount<=0){a({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>r){a({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}l(!0);try{await s(c),a({title:"Success",description:"Payment recorded successfully"})}catch{a({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(La,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),n.jsxs(Ge,{children:["Record a payment for invoice #",t]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"amount",children:"Payment Amount *"}),n.jsxs("div",{className:"relative",children:[n.jsx(rr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"amount",type:"number",step:"0.01",min:"0.01",max:r,value:c.amount,onChange:h=>d(f=>({...f,amount:parseFloat(h.target.value)||0})),className:"pl-10"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",Fe(r)]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"method",children:"Payment Method *"}),n.jsxs(nt,{value:c.method,onValueChange:h=>d(f=>({...f,method:h})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:Jc.CREDIT_CARD,children:"Credit Card"}),n.jsx(he,{value:Jc.BANK_TRANSFER,children:"Bank Transfer"}),n.jsx(he,{value:Jc.CASH,children:"Cash"}),n.jsx(he,{value:Jc.CHECK,children:"Check"}),n.jsx(he,{value:Jc.FINANCING,children:"Financing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Payment Status *"}),n.jsxs(nt,{value:c.status,onValueChange:h=>d(f=>({...f,status:h})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:cu.COMPLETED,children:"Completed"}),n.jsx(he,{value:cu.PENDING,children:"Pending"}),n.jsx(he,{value:cu.PROCESSING,children:"Processing"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"processedDate",children:"Payment Date *"}),n.jsx(Te,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:h=>d(f=>({...f,processedDate:h.target.value?new Date(h.target.value):void 0}))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"transactionId",children:"Transaction ID"}),n.jsx(Te,{id:"transactionId",value:c.transactionId||"",onChange:h=>d(f=>({...f,transactionId:h.target.value})),placeholder:"e.g., txn_1234567890"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"notes",children:"Notes"}),n.jsx(kr,{id:"notes",value:c.notes||"",onChange:h=>d(f=>({...f,notes:h.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function Hfe({invoice:t,payments:e,onClose:r,onEdit:s,onSendPaymentRequest:i,onRecordPayment:a}){const{toast:o}=Gt(),[l,c]=S.useState("details"),[d,u]=S.useState(!1),[h,f]=S.useState(!1),p=N=>{switch(N){case xr.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case xr.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case xr.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case xr.PAID:return"bg-green-50 text-green-700 border-green-200";case xr.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case xr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},y=N=>{switch(N){case"completed":return n.jsx(hn,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(Dr,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(Dr,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(zo,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(Xh,{className:"h-4 w-4 text-purple-500"});default:return null}},v=N=>{switch(N){case"credit_card":return n.jsx(La,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx(rr,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx(rr,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(so,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx(rr,{className:"h-4 w-4 text-purple-500"});default:return n.jsx(rr,{className:"h-4 w-4 text-gray-500"})}},g=()=>{try{const N=new sr;if(N.setFontSize(20),N.text("INVOICE",105,15,{align:"center"}),N.setFontSize(12),N.text(`Invoice #: ${t.number}`,20,30),N.text(`Date: ${wt(t.createdAt)}`,20,40),N.text(`Due Date: ${wt(t.dueDate)}`,20,50),N.text(`Status: ${t.status.toUpperCase()}`,20,60),N.setFontSize(14),N.text("Bill To:",20,75),N.setFontSize(12),N.text(`Customer ID: ${t.customerId}`,20,85),N.setFontSize(14),N.text("Invoice Items",20,105),N.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:t.items.map(A=>[A.description,A.quantity,Fe(A.unitPrice),Fe(A.total)]),foot:[["","","Subtotal:",Fe(t.subtotal)],["","","Tax:",Fe(t.tax)],["","","Total:",Fe(t.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),t.notes){const A=N.lastAutoTable.finalY||110;N.setFontSize(14),N.text("Notes",20,A+20),N.setFontSize(12);const _=N.splitTextToSize(t.notes,170);N.text(_,20,A+30)}N.save(`invoice-${t.number}.pdf`),o({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(N){console.error("Error generating PDF:",N),o({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},b=async()=>{if(i){u(!0);try{await i(t.id),o({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{o({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{u(!1)}}},j=async N=>{if(a)try{await a(N),f(!1)}catch(A){throw A}},w=e.filter(N=>N.invoiceId===t.id),C=w.reduce((N,A)=>N+A.amount,0),E=t.total-C;return n.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[h&&n.jsx(Vfe,{invoiceId:t.id,invoiceTotal:t.total,remainingBalance:E,onSave:j,onCancel:()=>f(!1)}),n.jsxs(me,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"text-xl",children:["Invoice #",t.number]}),n.jsx(Ge,{children:"Invoice details and payment information"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{onClick:()=>s(t),size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})]})}),n.jsxs(pe,{children:[n.jsxs(fn,{value:l,onValueChange:c,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"details",children:"Details"}),n.jsxs(dt,{value:"payments",children:["Payments",w.length>0&&n.jsx(Ve,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:w.length})]}),n.jsx(dt,{value:"history",children:"History"})]}),n.jsxs(ht,{value:"details",className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx(Ve,{className:pt("ri-badge-status",p(t.status)),children:t.status.toUpperCase()}),t.paidDate&&n.jsxs(Ve,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",wt(t.paidDate)]}),t.status===xr.OVERDUE&&n.jsx(Ve,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium",children:t.customerId})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),n.jsx("p",{className:"font-medium",children:t.number})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),n.jsx("p",{className:"font-medium",children:wt(t.createdAt)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),n.jsx("p",{className:"font-medium",children:wt(t.dueDate)})]}),t.paidDate&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),n.jsx("p",{className:"font-medium",children:wt(t.paidDate)})]}),t.paymentMethod&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),n.jsx("p",{className:"font-medium",children:t.paymentMethod})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),n.jsx("div",{className:"space-y-3",children:t.items.map((N,A)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium",children:N.description}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",N.quantity," × ",Fe(N.unitPrice)]})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg",children:Fe(N.total)})})]},N.id))})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsx("span",{children:Fe(t.subtotal)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsx("span",{children:Fe(t.tax)})]}),n.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Fe(t.total)})]}),w.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Paid:"}),n.jsx("span",{children:Fe(C)})]}),n.jsxs("div",{className:"flex justify-between font-bold",children:[n.jsx("span",{children:"Balance Due:"}),n.jsx("span",{children:Fe(E)})]})]})]})}),t.notes&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),n.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:n.jsx("p",{className:"text-sm",children:t.notes})})]})]}),n.jsxs(ht,{value:"payments",className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),n.jsx("div",{className:"flex space-x-2",children:t.status!==xr.PAID&&t.status!==xr.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(re,{onClick:b,disabled:d,size:"sm",variant:"outline",children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),a&&E>0&&n.jsxs(re,{onClick:()=>f(!0),size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),w.length>0?n.jsxs("div",{className:"space-y-4",children:[w.map(N=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsxs("h4",{className:"font-medium",children:["Payment #",N.id.substring(0,8)]}),n.jsx(Ve,{className:N.status==="completed"?"bg-green-50 text-green-700 border-green-200":N.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":N.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":N.status==="failed"?"bg-red-50 text-red-700 border-red-200":N.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:n.jsxs("span",{className:"flex items-center",children:[y(N.status),n.jsx("span",{className:"ml-1",children:N.status.toUpperCase()})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-3 w-3 mr-1 text-blue-500"}),n.jsx("span",{className:"font-medium",children:"Date:"}),n.jsx("span",{className:"ml-1",children:wt(N.processedDate)})]}),n.jsxs("div",{className:"flex items-center",children:[v(N.method),n.jsx("span",{className:"font-medium ml-1",children:"Method:"}),n.jsx("span",{className:"ml-1",children:N.method.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())})]}),N.transactionId&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(so,{className:"h-3 w-3 mr-1 text-purple-500"}),n.jsx("span",{className:"font-medium",children:"Transaction ID:"}),n.jsx("span",{className:"ml-1 font-mono text-xs",children:N.transactionId})]})]}),N.notes&&n.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:N.notes})]}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"font-bold text-lg text-green-600",children:Fe(N.amount)})})]},N.id)),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Invoice Total:"}),n.jsx("span",{children:Fe(t.total)})]}),n.jsxs("div",{className:"flex justify-between text-green-700",children:[n.jsx("span",{className:"font-medium",children:"Total Paid:"}),n.jsx("span",{children:Fe(C)})]}),n.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:"Balance Due:"}),n.jsx("span",{className:E>0?"text-red-700":"text-green-700",children:Fe(E)})]})]})})]}):n.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(La,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No payments recorded for this invoice"}),t.status!==xr.PAID&&t.status!==xr.CANCELLED&&a&&n.jsxs(re,{onClick:()=>f(!0),className:"mt-4",size:"sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),n.jsxs(me,{className:"bg-blue-50 border-blue-200",children:[n.jsxs(je,{className:"pb-2",children:[n.jsx(Ne,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),n.jsx(Ge,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-3 text-blue-700",children:[n.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),n.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),n.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),n.jsxs(ht,{value:"history",className:"space-y-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Created"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.createdAt)})]}),t.status!==xr.DRAFT&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Sent"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.updatedAt)})]}),t.status===xr.VIEWED&&n.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.updatedAt)})]}),t.status===xr.PAID&&t.paidDate&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),n.jsx("div",{className:"font-medium",children:"Payment Received"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.paidDate)})]}),t.status===xr.OVERDUE&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.dueDate)})]}),t.status===xr.CANCELLED&&n.jsxs("div",{className:"relative pl-6",children:[n.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),n.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:wt(t.updatedAt)})]})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[n.jsx(re,{variant:"outline",onClick:r,children:"Close"}),n.jsxs(re,{variant:"outline",onClick:g,children:[n.jsx(Cj,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),n.jsxs("div",{className:"flex space-x-2",children:[t.status===xr.DRAFT&&n.jsxs(re,{children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),t.status!==xr.PAID&&t.status!==xr.CANCELLED&&n.jsxs(n.Fragment,{children:[n.jsxs(re,{onClick:b,disabled:d,variant:"outline",children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),a&&E>0&&n.jsxs(re,{onClick:()=>f(!0),children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function Wfe({payments:t,onViewPaymentDetails:e}){const{toast:r}=Gt(),[s,i]=S.useState(""),[a,o]=S.useState("all"),[l,c]=S.useState("all"),[d,u]=S.useState("all"),h=A=>{switch(A){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=A=>{switch(A){case"completed":return n.jsx(hn,{className:"h-4 w-4 text-green-500"});case"pending":return n.jsx(Dr,{className:"h-4 w-4 text-yellow-500"});case"processing":return n.jsx(Dr,{className:"h-4 w-4 text-blue-500"});case"failed":return n.jsx(zo,{className:"h-4 w-4 text-red-500"});case"refunded":return n.jsx(so,{className:"h-4 w-4 text-purple-500"});default:return null}},p=A=>{switch(A){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return A}},y=A=>{switch(A){case"credit_card":return n.jsx(La,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return n.jsx(so,{className:"h-4 w-4 text-green-500"});case"cash":return n.jsx(so,{className:"h-4 w-4 text-green-500"});case"check":return n.jsx(so,{className:"h-4 w-4 text-blue-500"});case"financing":return n.jsx(so,{className:"h-4 w-4 text-purple-500"});default:return n.jsx(so,{className:"h-4 w-4 text-gray-500"})}},v=t.filter(A=>{const _=A.invoiceId.toLowerCase().includes(s.toLowerCase())||A.id.toLowerCase().includes(s.toLowerCase())||A.transactionId&&A.transactionId.toLowerCase().includes(s.toLowerCase()),k=a==="all"||A.status===a,F=l==="all"||A.method===l;let I=!0;const T=new Date,R=A.processedDate;if(d==="today")I=R.toDateString()===T.toDateString();else if(d==="this_week"){const O=new Date(T);O.setDate(T.getDate()-T.getDay());const z=new Date(O);z.setDate(O.getDate()+6),I=R>=O&&R<=z}else d==="this_month"&&(I=R.getMonth()===T.getMonth()&&R.getFullYear()===T.getFullYear());return _&&k&&F&&I}),g=()=>{const _=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...v.map(T=>[T.id,T.invoiceId,T.amount.toFixed(2),T.method,T.status,T.transactionId||"",T.processedDate.toISOString().split("T")[0],T.notes||""].join(","))].join(`
`),k=new Blob([_],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(k),I=document.createElement("a");I.href=F,I.setAttribute("download","payment_history.csv"),document.body.appendChild(I),I.click(),document.body.removeChild(I),r({title:"Export Successful",description:"Payment history exported to CSV"})},b=t.length,j=t.reduce((A,_)=>A+_.amount,0),w=t.filter(A=>A.status==="completed").length,C=t.filter(A=>A.status==="pending"||A.status==="processing").length,E=t.filter(A=>A.status==="failed").length,N=t.reduce((A,_)=>{const k=_.method;return A[k]||(A[k]=0),_.status==="completed"&&(A[k]+=_.amount),A},{});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),n.jsx(La,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:b}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[Fe(j)," processed"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Completed"}),n.jsx(hn,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:w}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(w/b*100||0).toFixed(1),"% success rate"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),n.jsx(Dr,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:C}),n.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-red-900",children:"Failed"}),n.jsx(zo,{className:"h-4 w-4 text-red-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-red-900",children:E}),n.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(E/b*100||0).toFixed(1),"% failure rate"]})]})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-lg",children:"Payment Methods"}),n.jsx(Ge,{children:"Breakdown of payments by method"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(N).map(([A,_])=>n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y(A),n.jsx("span",{className:"font-medium",children:p(A)})]}),n.jsx("div",{className:"text-2xl font-bold text-primary",children:Fe(_)}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.filter(k=>k.method===A&&k.status==="completed").length," payments"]})]},A)),Object.keys(N).length===0&&n.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"No payment data available"})})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(qn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search payments...",value:s,onChange:A=>i(A.target.value),className:"pl-10"})]}),n.jsxs(nt,{value:a,onValueChange:o,children:[n.jsx(et,{className:"w-[150px]",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:"completed",children:"Completed"}),n.jsx(he,{value:"pending",children:"Pending"}),n.jsx(he,{value:"processing",children:"Processing"}),n.jsx(he,{value:"failed",children:"Failed"}),n.jsx(he,{value:"refunded",children:"Refunded"})]})]}),n.jsxs(nt,{value:l,onValueChange:c,children:[n.jsx(et,{className:"w-[150px]",children:n.jsx(st,{placeholder:"Method"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Methods"}),n.jsx(he,{value:"credit_card",children:"Credit Card"}),n.jsx(he,{value:"bank_transfer",children:"Bank Transfer"}),n.jsx(he,{value:"cash",children:"Cash"}),n.jsx(he,{value:"check",children:"Check"}),n.jsx(he,{value:"financing",children:"Financing"})]})]}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{className:"w-[150px]",children:n.jsx(st,{placeholder:"Date"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Dates"}),n.jsx(he,{value:"today",children:"Today"}),n.jsx(he,{value:"this_week",children:"This Week"}),n.jsx(he,{value:"this_month",children:"This Month"})]})]}),n.jsxs(re,{variant:"outline",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Payment History"}),n.jsx(Ge,{children:"Track and manage customer payments"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:g,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export"]}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Cj,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),n.jsx(pe,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50",children:[n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),n.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),n.jsxs("tbody",{children:[v.map(A=>n.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"font-medium",children:["#",A.invoiceId.substring(0,8)]})}),n.jsx("td",{className:"p-3 font-medium",children:Fe(A.amount)}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[y(A.method),n.jsx("span",{children:p(A.method)})]})}),n.jsx("td",{className:"p-3",children:n.jsxs(Ve,{className:pt("flex items-center space-x-1",h(A.status)),children:[f(A.status),n.jsx("span",{children:A.status.charAt(0).toUpperCase()+A.status.slice(1)})]})}),n.jsx("td",{className:"p-3",children:wt(A.processedDate)}),n.jsx("td",{className:"p-3",children:n.jsx("span",{className:"font-mono text-xs",children:A.transactionId?A.transactionId:"-"})}),n.jsx("td",{className:"p-3",children:n.jsx("div",{className:"flex space-x-2",children:n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e?.(A),children:"View"})})})]},A.id)),v.length===0&&n.jsx("tr",{children:n.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[n.jsx(La,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function EO(){const{invoices:t,payments:e,createInvoice:r,updateInvoice:s,sendPaymentRequest:i,recordPayment:a}=kU(),{toast:o}=Gt(),[l,c]=S.useState(""),[d,u]=S.useState("all"),[h,f]=S.useState("invoices"),[p,y]=S.useState(!1),[v,g]=S.useState(!1),[b,j]=S.useState(null),w=I=>{switch(I){case xr.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case xr.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case xr.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case xr.PAID:return"bg-green-50 text-green-700 border-green-200";case xr.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case xr.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=t.filter(I=>I.number.toLowerCase().includes(l.toLowerCase())||I.customerId.toLowerCase().includes(l.toLowerCase())).filter(I=>d==="all"||I.status===d),E=()=>{j(null),y(!0)},N=I=>{j(I),y(!0),g(!1)},A=I=>{j(I),g(!0)},_=async I=>{try{b?(await s(b.id,I),o({title:"Success",description:"Invoice updated successfully"})):(await r(I),o({title:"Success",description:"Invoice created successfully"})),y(!1),j(null)}catch{o({title:"Error",description:`Failed to ${b?"update":"create"} invoice`,variant:"destructive"})}},k=async I=>{try{return await i(I),!0}catch(T){throw console.error("Error sending payment request:",T),T}},F=async I=>{try{return await a(I),o({title:"Success",description:"Payment recorded successfully"}),!0}catch(T){throw o({title:"Error",description:"Failed to record payment",variant:"destructive"}),T}};return n.jsxs("div",{className:"space-y-8",children:[p&&n.jsx(Ufe,{invoice:b||void 0,onSave:_,onCancel:()=>{y(!1),j(null)}}),v&&b&&n.jsx(Hfe,{invoice:b,payments:e.filter(I=>I.invoiceId===b.id),onClose:()=>g(!1),onEdit:N,onSendPaymentRequest:k,onRecordPayment:F}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),n.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),n.jsxs(re,{className:"shadow-sm",onClick:E,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),n.jsx(so,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),n.jsx(rr,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:Fe(t.filter(I=>I.status!=="Paid").reduce((I,T)=>I+T.totalAmount,0))}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Dr,{className:"h-3 w-3 mr-1"}),Fe(t.filter(I=>I.status==="Overdue").reduce((I,T)=>I+T.totalAmount,0))," overdue"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),n.jsx(so,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:Fe(t.filter(I=>I.status===xr.PAID).reduce((I,T)=>I+T.total,0))}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),n.jsx(La,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(hn,{className:"h-3 w-3 mr-1"}),e.filter(I=>I.status==="completed").length," successful payments"]})]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center space-x-2 text-blue-900",children:[n.jsx(La,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{children:"Zego Payment Integration"})]}),n.jsx(Ge,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),n.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),n.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),n.jsxs(fn,{value:h,onValueChange:f,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-2",children:[n.jsxs(dt,{value:"invoices",className:"flex items-center",children:[n.jsx(so,{className:"h-4 w-4 mr-2"}),"Invoices"]}),n.jsxs(dt,{value:"payments",className:"flex items-center",children:[n.jsx(La,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),n.jsxs(ht,{value:"invoices",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"ri-search-bar",children:[n.jsx(qn,{className:"ri-search-icon"}),n.jsx(Te,{placeholder:"Search invoices...",value:l,onChange:I=>c(I.target.value),className:"ri-search-input shadow-sm"})]}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{className:"w-40",children:n.jsx(st,{placeholder:"Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Status"}),n.jsx(he,{value:xr.DRAFT,children:"Draft"}),n.jsx(he,{value:xr.SENT,children:"Sent"}),n.jsx(he,{value:xr.VIEWED,children:"Viewed"}),n.jsx(he,{value:xr.PAID,children:"Paid"}),n.jsx(he,{value:xr.OVERDUE,children:"Overdue"}),n.jsx(he,{value:xr.CANCELLED,children:"Cancelled"})]})]}),n.jsxs(re,{variant:"outline",className:"shadow-sm",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Invoices"}),n.jsx(Ge,{children:"Manage invoices and track payments"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[C.map(I=>n.jsxs("div",{className:"ri-table-row",children:[n.jsx("div",{className:"flex items-center space-x-4 flex-1",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-foreground",children:I.number}),n.jsx(Ve,{className:pt("ri-badge-status",w(I.status)),children:I.status.toUpperCase()})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"}),n.jsx("span",{className:"ml-1",children:I.customerId})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Total:"}),n.jsx("span",{className:"ml-1 font-bold text-primary",children:Fe(I.total)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Due Date:"}),n.jsx("span",{className:"ml-1",children:wt(I.dueDate)})]}),I.paidDate&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Paid Date:"}),n.jsx("span",{className:"ml-1",children:wt(I.paidDate)})]})]}),n.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.items.length," item(s) - ",I.notes]}),I.paymentMethod&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",I.paymentMethod]})]})]})}),n.jsxs("div",{className:"ri-action-buttons",children:[n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(I),children:[n.jsx(Ts,{className:"h-3 w-3 mr-1"}),"View"]}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>N(I),children:"Edit"}),n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",children:[n.jsx(Ma,{className:"h-3 w-3 mr-1"}),"PDF"]}),I.status!==xr.PAID&&n.jsxs(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>k(I.id),children:[n.jsx(Bo,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},I.id)),C.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(so,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No invoices found"}),n.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),n.jsx(ht,{value:"payments",children:n.jsx(Wfe,{payments:e,onViewPaymentDetails:I=>{const T=t.find(R=>R.id===I.invoiceId);T&&(j(T),g(!0),setTimeout(()=>{const R=document.querySelector('[role="tablist"]');if(R){const O=Array.from(R.children).find(z=>z.textContent?.includes("Payments"));O&&O.click()}},100))}})})]})]})}function Gfe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(EO,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(EO,{})})]})}const Ms={branding:{logoUrl:"https://ajwaujikksxupqwatpfa.supabase.co/storage/v1/object/public/website-assets/11111111-1111-1111-1111-111111111111/branding/logoUrl-1752730074646.png",primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter",sideMenuColor:"#1e293b",portalName:"Customer Portal",portalLogo:null,fontOptions:[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}]},labelOverrides:{platformTypes:[{value:"rv",label:"RV Dealership"},{value:"mh",label:"Manufactured Housing"},{value:"both",label:"Both RV & Manufactured Housing"}],defaultLabels:{general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}}},customFields:{modules:["crm","inventory","quotes","agreements","service","delivery","invoices"],customFieldDefaults:{moduleSectionMap:{crm:["Lead Information","Contact Details","Preferences","Notes"],inventory:["Vehicle Details","Specifications","Pricing","Features"],quotes:["Quote Details","Terms","Pricing"],agreements:["Agreement Details","Terms","Conditions"],service:["Service Details","Customer Requirements","Technical Notes"],delivery:["Delivery Details","Customer Instructions","Logistics"],invoices:["Invoice Details","Payment Terms","Additional Charges"],default:["General","Details","Other"]}}},integrations:{emailProviders:[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],smsProviders:[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],webhookEvents:[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}]},notifications:{emailTypes:[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],smsTypes:[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],commonVariables:["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"]}};function Kfe({field:t,onSave:e,onCancel:r,modules:s}){const{toast:i}=Gt(),[a,o]=S.useState(!1),[l,c]=S.useState({name:"",type:pl.TEXT,required:!1,options:[],module:"",section:""}),[d,u]=S.useState("");S.useEffect(()=>{t&&c({...t})},[t]);const h=async v=>{if(v.preventDefault(),!l.name||!l.module||!l.section){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((l.type===pl.SELECT||l.type===pl.MULTISELECT)&&(!l.options||l.options.length===0)){i({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}o(!0);try{await e(l),i({title:"Success",description:`Custom field ${t?"updated":"created"} successfully`})}catch{i({title:"Error",description:`Failed to ${t?"update":"create"} custom field`,variant:"destructive"})}finally{o(!1)}},f=()=>{d.trim()&&!l.options?.includes(d.trim())&&(c(v=>({...v,options:[...v.options||[],d.trim()]})),u(""))},p=v=>{c(g=>({...g,options:g.options?.filter(b=>b!==v)||[]}))},y=v=>Ms.customFields.customFieldDefaults.moduleSectionMap[v]||Ms.customFields.customFieldDefaults.moduleSectionMap.default;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:t?"Edit Custom Field":"Add Custom Field"}),n.jsx(Ge,{children:t?"Update custom field details":"Create a new custom field"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Field Name *"}),n.jsx(Te,{id:"name",value:l.name,onChange:v=>c(g=>({...g,name:v.target.value})),placeholder:"e.g., Customer Budget"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"module",children:"Module *"}),n.jsxs(nt,{value:l.module,onValueChange:v=>{c(g=>({...g,module:v,section:""}))},children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select module"})}),n.jsx(tt,{children:s.map(v=>n.jsx(he,{value:v,children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"section",children:"Section *"}),n.jsxs(nt,{value:l.section,onValueChange:v=>c(g=>({...g,section:v})),disabled:!l.module,children:[n.jsx(et,{children:n.jsx(st,{placeholder:l.module?"Select section":"Select module first"})}),n.jsx(tt,{children:l.module&&y(l.module).map(v=>n.jsx(he,{value:v,children:v},v))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"type",children:"Field Type *"}),n.jsxs(nt,{value:l.type,onValueChange:v=>c(g=>({...g,type:v})),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:pl.TEXT,children:"Text"}),n.jsx(he,{value:pl.NUMBER,children:"Number"}),n.jsx(he,{value:pl.DATE,children:"Date"}),n.jsx(he,{value:pl.BOOLEAN,children:"Boolean"}),n.jsx(he,{value:pl.SELECT,children:"Select"}),n.jsx(he,{value:pl.MULTISELECT,children:"Multi-select"})]})]})]}),(l.type===pl.SELECT||l.type===pl.MULTISELECT)&&n.jsxs("div",{children:[n.jsx(ue,{children:"Options"}),n.jsxs("div",{className:"flex space-x-2 mb-2",children:[n.jsx(Te,{value:d,onChange:v=>u(v.target.value),placeholder:"Add an option",onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),f())}}),n.jsx(re,{type:"button",onClick:f,children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.options?.map((v,g)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:v}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>p(v),children:n.jsx(rs,{className:"h-3 w-3"})})]},g)),(!l.options||l.options.length===0)&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"required",checked:l.required,onCheckedChange:v=>c(g=>({...g,required:!!v}))}),n.jsx(ue,{htmlFor:"required",children:"Required field"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx(re,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Field"]})})]})]})})]})})}function Yfe(){const{tenant:t,updateTenant:e}=lo(),{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState(t?.branding.primaryColor||Ms.branding.primaryColor),[l,c]=S.useState(t?.branding.secondaryColor||Ms.branding.secondaryColor),[d,u]=S.useState(t?.branding.fontFamily||Ms.branding.fontFamily),[h,f]=S.useState(t?.branding.logo||Ms.branding.logoUrl),[p,y]=S.useState(t?.branding.sideMenuColor||Ms.branding.sideMenuColor),[v,g]=S.useState(t?.branding.sideMenuColor===null||!t?.branding.sideMenuColor),[b,j]=S.useState(t?.branding.logo||Ms.branding.logoUrl),[w,C]=S.useState(t?.branding.portalName||Ms.branding.portalName),[E,N]=S.useState(t?.branding.portalLogo||Ms.branding.portalLogo||""),[A,_]=S.useState(t?.branding.portalLogo||Ms.branding.portalLogo||""),k=S.useRef(null),F=S.useRef(null),I=Ms.branding.fontOptions,T=z=>{const q=z.target.files?.[0];if(q){const B=URL.createObjectURL(q);j(B),f(B)}},R=z=>{const q=z.target.files?.[0];if(q){const B=URL.createObjectURL(q);_(B),N(B)}},O=async()=>{i(!0);try{await e({branding:{...t?.branding,primaryColor:a,secondaryColor:l,fontFamily:d,logo:h,sideMenuColor:v?null:p,portalName:w,portalLogo:E}}),r({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{i(!1)}};return n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(J$,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),n.jsx(Ge,{children:"Customize your dealership's visual identity"})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"Company Logo"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:b?n.jsx("img",{src:b,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):n.jsx(mg,{className:"h-12 w-12 text-muted-foreground"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>k.current?.click(),children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),n.jsx(Te,{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:T}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",n.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),n.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Client Portal Branding"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Customize the branding for your client-facing portal"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"portalName",children:"Portal Name"}),n.jsx(Te,{id:"portalName",value:w,onChange:z=>C(z.target.value),placeholder:"e.g., Customer Portal",className:"shadow-sm"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This name will appear in the portal header and browser title"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"Portal Logo"}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:A?n.jsx("img",{src:A,alt:"Portal Logo",className:"max-w-full max-h-full object-contain"}):n.jsx(mg,{className:"h-12 w-12 text-muted-foreground"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(re,{variant:"outline",onClick:()=>F.current?.click(),children:[n.jsx(hd,{className:"h-4 w-4 mr-2"}),"Upload Portal Logo"]}),n.jsx(Te,{type:"file",ref:F,className:"hidden",accept:"image/*",onChange:R}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Portal-specific logo (optional). If not set, company logo will be used.",n.jsx("br",{}),"Recommended size: 200x200px. Max file size: 2MB."]})]})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"primaryColor",children:"Primary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Te,{type:"color",id:"primaryColor",value:a,onChange:z=>o(z.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Te,{value:a,onChange:z=>o(z.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"secondaryColor",children:"Secondary Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Te,{type:"color",id:"secondaryColor",value:l,onChange:z=>c(z.target.value),className:"w-16 h-10 shadow-sm"}),n.jsx(Te,{value:l,onChange:z=>c(z.target.value),className:"shadow-sm"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fontFamily",children:"Font Family"}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select font family"})}),n.jsx(tt,{children:I.map(z=>n.jsx(he,{value:z.value,children:z.label},z.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"sideMenuColor",children:"Side Menu Color"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx(Te,{type:"color",id:"sideMenuColor",value:p,onChange:z=>{y(z.target.value),g(!1)},className:"w-16 h-10 shadow-sm",disabled:v}),n.jsx(Te,{value:p,onChange:z=>{y(z.target.value),g(!1)},className:"shadow-sm",disabled:v})]}),n.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[n.jsx(tr,{id:"useDefaultSideMenuColor",checked:v,onCheckedChange:z=>g(!!z)}),n.jsx(ue,{htmlFor:"useDefaultSideMenuColor",className:"font-normal",children:"Use default theme color (matches primary site background)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The background color for your application's side navigation menu"})]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Text Preview"}),n.jsx("p",{children:"This is how your text will appear with the selected font."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Color Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:a},children:"Primary"}),n.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:l},children:"Secondary"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Button Preview"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:a},children:"Primary Button"}),n.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:l,color:l},children:"Secondary Button"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Side Menu Preview"}),n.jsx("div",{className:"w-full h-20 rounded-md flex items-center justify-center text-sm",style:{backgroundColor:v?"var(--background)":p,color:v||p&&JC(p)?"var(--foreground)":"white",border:v?"1px dashed var(--border)":"none"},children:"Side Menu Background"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-semibold",children:"Portal Preview"}),n.jsxs("div",{className:"border rounded-md p-4 bg-muted/20",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[A&&n.jsx("img",{src:A,alt:"Portal Logo",className:"w-8 h-8 object-contain"}),n.jsx("h5",{className:"font-semibold",children:w||"Customer Portal"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"This is how your client portal header will appear"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:O,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function Xfe(){const{tenant:t,updateTenant:e}=lo(),{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState("general"),[l,c]=S.useState(t?.settings?.labelOverrides||{}),[d,u]=S.useState(t?.settings?.platformType||"both"),h=Ms.labelOverrides.defaultLabels,f=(g,b,j)=>{c({...l,[`${g}.${b}`]:j})},p=(g,b)=>l[`${g}.${b}`]||"",y=g=>{const b={...l};Object.keys(b).forEach(j=>{j.startsWith(`${g}.`)&&delete b[j]}),c(b),r({title:"Labels Reset",description:`Default labels restored for ${g} module.`})},v=async()=>{i(!0);try{await e({settings:{...t?.settings,labelOverrides:l,platformType:d}}),r({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{r({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{i(!1)}};return n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(W4,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),n.jsx(Ge,{children:"Customize terminology throughout the platform"})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"platformType",children:"Platform Type"}),n.jsxs(nt,{value:d,onValueChange:u,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select platform type"})}),n.jsx(tt,{children:Ms.labelOverrides.platformTypes.map(g=>n.jsx(he,{value:g.value,children:g.label},g.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),n.jsxs(fn,{value:a,onValueChange:o,className:"space-y-4",children:[n.jsxs(sn,{className:"grid grid-cols-5",children:[n.jsx(dt,{value:"general",children:"General"}),n.jsx(dt,{value:"crm",children:"CRM"}),n.jsx(dt,{value:"inventory",children:"Inventory"}),n.jsx(dt,{value:"sales",children:"Sales"}),n.jsx(dt,{value:"service",children:"Service"})]}),Object.entries(h).map(([g,b])=>n.jsxs(ht,{value:g,className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[g," Labels"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>y(g),children:[n.jsx(eB,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(b).map(([j,w])=>{let C=w;return j==="vehicle"&&(d==="rv"?C="RV":d==="mh"?C="Home":C="Home/RV"),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:`${g}-${j}`,className:"capitalize",children:j.replace(/_/g," ")}),n.jsx("div",{className:"flex space-x-2",children:n.jsx(Te,{id:`${g}-${j}`,value:p(g,j),onChange:E=>f(g,j,E.target.value),placeholder:C,className:"shadow-sm"})}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",n.jsx("span",{className:"font-medium",children:C})]})]},j)})})]},g))]}),n.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(h.general).map(([g,b])=>{const j=p("general",g);let C=j||b;return g==="vehicle"&&!j&&(d==="rv"?C="RV":d==="mh"?C="Home":C="Home/RV"),n.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[n.jsxs("span",{className:"font-medium capitalize",children:[g.replace(/_/g," "),":"]})," ",n.jsx("span",{children:C})]},g)})})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:v,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function Zfe(){const{tenant:t,updateTenant:e}=lo(),{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState("email"),[l,c]=S.useState(t?.settings?.emailTemplates||[]),[d,u]=S.useState(null),[h,f]=S.useState(""),[p,y]=S.useState(""),[v,g]=S.useState(""),[b,j]=S.useState("welcome"),[w,C]=S.useState(t?.settings?.smsTemplates||[]),[E,N]=S.useState(null),[A,_]=S.useState(""),[k,F]=S.useState(""),[I,T]=S.useState("welcome"),[R,O]=S.useState(!1),[z,q]=S.useState("email"),[B,K]=S.useState(null),Y=Ms.notifications.emailTypes,J=Ms.notifications.smsTypes,H=Ms.notifications.commonVariables,$=()=>{u(null),f(""),y(""),g(""),j("welcome")},W=()=>{N(null),_(""),F(""),T("welcome")},te=we=>{u(we),f(we.name),y(we.subject),g(we.body),j(we.type)},ee=we=>{N(we),_(we.name),F(we.message),T(we.type)},ne=()=>{if(!h||!p||!v){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const we=/\{\{([^}]+)\}\}/g,oe=[];let it;for(;(it=we.exec(p+v))!==null;)oe.includes(it[1])||oe.push(it[1]);c(d?l.map(_e=>_e.id===d.id?{..._e,name:h,subject:p,body:v,type:b,variables:oe}:_e):[...l,{id:Math.random().toString(36).substring(2,9),name:h,subject:p,body:v,type:b,variables:oe,isActive:!0}]),$()},ae=()=>{if(!A||!k){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const we=/\{\{([^}]+)\}\}/g,oe=[];let it;for(;(it=we.exec(k))!==null;)oe.includes(it[1])||oe.push(it[1]);C(E?w.map(_e=>_e.id===E.id?{..._e,name:A,message:k,type:I,variables:oe}:_e):[...w,{id:Math.random().toString(36).substring(2,9),name:A,message:k,type:I,variables:oe,isActive:!0}]),W()},ve=we=>{c(l.filter(oe=>oe.id!==we))},xe=we=>{C(w.filter(oe=>oe.id!==we))},Se=we=>{c(l.map(oe=>oe.id===we?{...oe,isActive:!oe.isActive}:oe))},Pe=we=>{C(w.map(oe=>oe.id===we?{...oe,isActive:!oe.isActive}:oe))},Ce=(we,oe)=>{q(we),K(oe),O(!0)},He=we=>{a==="email"?g(v+we):F(k+we)},Ke=async()=>{i(!0);try{await e({settings:{...t?.settings,emailTemplates:l,smsTemplates:w}}),r({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{r({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{i(!1)}};return n.jsxs(n.Fragment,{children:[R&&B&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Template Preview"}),n.jsx(Ge,{children:B.name})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>O(!1),children:n.jsx(X,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-4",children:[z==="email"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Subject"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:B.subject})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Body"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:B.body})]})]}),z==="sms"&&n.jsxs("div",{children:[n.jsx(ue,{children:"Message"}),n.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:B.message})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Variables"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[B.variables.map((we,oe)=>n.jsx(Ve,{variant:"secondary",children:`{{${we}}}`},oe)),B.variables.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:()=>O(!1),children:"Close Preview"})})]})]})}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ui,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),n.jsx(Ge,{children:"Customize email and SMS notification templates"})]}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs(fn,{value:a,onValueChange:o,className:"space-y-4",children:[n.jsxs(sn,{className:"grid w-full grid-cols-2",children:[n.jsx(dt,{value:"email",children:"Email Templates"}),n.jsx(dt,{value:"sms",children:"SMS Templates"})]}),n.jsx(ht,{value:"email",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),n.jsxs(re,{variant:"outline",size:"sm",onClick:$,disabled:!d,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailName",children:"Template Name *"}),n.jsx(Te,{id:"emailName",value:h,onChange:we=>f(we.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailType",children:"Template Type"}),n.jsxs(nt,{value:b,onValueChange:j,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select template type"})}),n.jsx(tt,{children:Y.map(we=>n.jsx(he,{value:we.value,children:we.label},we.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailSubject",children:"Subject Line *"}),n.jsx(Te,{id:"emailSubject",value:p,onChange:we=>y(we.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ue,{htmlFor:"emailBody",children:"Email Body *"}),n.jsxs(nt,{value:"",onValueChange:we=>He(we),children:[n.jsx(et,{className:"w-[200px] shadow-sm",children:n.jsx(st,{placeholder:"Insert variable"})}),n.jsx(tt,{children:H.map(we=>n.jsx(he,{value:we,children:we},we))})]})]}),n.jsx(kr,{id:"emailBody",value:v,onChange:we=>g(we.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:$,children:"Cancel"}),n.jsx(re,{type:"button",onClick:ne,children:d?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),l.length>0?l.map(we=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:we.name}),n.jsx(Ve,{variant:"outline",children:Y.find(oe=>oe.value===we.type)?.label||we.type}),!we.isActive&&n.jsx(Ve,{variant:"secondary",children:"Inactive"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",we.subject]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Se(we.id),children:we.isActive?"Disable":"Enable"}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Ce("email",we),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>te(we),children:"Edit"}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>ve(we.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},we.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ui,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No email templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),n.jsx(ht,{value:"sms",className:"space-y-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),n.jsxs(re,{variant:"outline",size:"sm",onClick:W,disabled:!E,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),n.jsx(me,{className:"border-dashed",children:n.jsxs(pe,{className:"pt-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsName",children:"Template Name *"}),n.jsx(Te,{id:"smsName",value:A,onChange:we=>_(we.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsType",children:"Template Type"}),n.jsxs(nt,{value:I,onValueChange:T,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select template type"})}),n.jsx(tt,{children:J.map(we=>n.jsx(he,{value:we.value,children:we.label},we.value))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(ue,{htmlFor:"smsMessage",children:"Message *"}),n.jsxs(nt,{value:"",onValueChange:we=>He(we),children:[n.jsx(et,{className:"w-[200px] shadow-sm",children:n.jsx(st,{placeholder:"Insert variable"})}),n.jsx(tt,{children:H.map(we=>n.jsx(he,{value:we,children:we},we))})]})]}),n.jsx(kr,{id:"smsMessage",value:k,onChange:we=>F(we.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[n.jsxs("span",{children:[k.length," characters"]}),n.jsxs("span",{children:[160-k.length," remaining"]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{type:"button",variant:"outline",onClick:W,children:"Cancel"}),n.jsx(re,{type:"button",onClick:ae,children:E?"Update Template":"Add Template"})]})]})}),n.jsxs("div",{className:"space-y-3 mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),w.length>0?w.map(we=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium",children:we.name}),n.jsx(Ve,{variant:"outline",children:J.find(oe=>oe.value===we.type)?.label||we.type}),!we.isActive&&n.jsx(Ve,{variant:"secondary",children:"Inactive"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:we.message})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Pe(we.id),children:we.isActive?"Disable":"Enable"}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Ce("sms",we),children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>ee(we),children:"Edit"}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>xe(we.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]})]},we.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(Ps,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No SMS templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:Ke,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function Qfe(){const{tenant:t,updateTenant:e}=lo(),{toast:r}=Gt(),[s,i]=S.useState(!1),[a,o]=S.useState(t?.settings?.emailProvider||"default"),[l,c]=S.useState(t?.settings?.emailApiKey||""),[d,u]=S.useState(t?.settings?.emailFromAddress||""),[h,f]=S.useState(t?.settings?.emailFromName||""),[p,y]=S.useState(t?.settings?.smsProvider||"default"),[v,g]=S.useState(t?.settings?.smsApiKey||""),[b,j]=S.useState(t?.settings?.smsFromNumber||""),[w,C]=S.useState(t?.settings?.webhooks||[]),[E,N]=S.useState(""),[A,_]=S.useState(""),[k,F]=S.useState(t?.settings?.apiEnabled||!1),[I,T]=S.useState(t?.settings?.apiKey||""),[R,O]=S.useState(t?.settings?.allowedOrigins||[]),[z,q]=S.useState(""),B=Ms.integrations.emailProviders,K=Ms.integrations.smsProviders,Y=Ms.integrations.webhookEvents,J=()=>{!E||!A||(C([...w,{id:Math.random().toString(36).substring(2,9),event:E,url:A,active:!0}]),N(""),_(""))},H=ae=>{C(w.filter(ve=>ve.id!==ae))},$=ae=>{C(w.map(ve=>ve.id===ae?{...ve,active:!ve.active}:ve))},W=()=>{z&&(O([...R,z]),q(""))},te=ae=>{O(R.filter(ve=>ve!==ae))},ee=()=>{const ae=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(ve=>ve.toString(16).padStart(2,"0")).join("");T(ae)},ne=async()=>{i(!0);try{await e({settings:{...t?.settings,emailProvider:a,emailApiKey:l,emailFromAddress:d,emailFromName:h,smsProvider:p,smsApiKey:v,smsFromNumber:b,webhooks:w,apiEnabled:k,apiKey:I,allowedOrigins:R}}),r({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{i(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ui,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),n.jsx(Ge,{children:"Configure your email delivery service"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailProvider",children:"Provider"}),n.jsxs(nt,{value:a,onValueChange:o,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select email provider"})}),n.jsx(tt,{children:B.map(ae=>n.jsx(he,{value:ae.value,children:ae.label},ae.value))})]})]}),a!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailApiKey",children:"API Key"}),n.jsx(Te,{id:"emailApiKey",type:"password",value:l,onChange:ae=>c(ae.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailFromAddress",children:"From Email Address"}),n.jsx(Te,{id:"emailFromAddress",type:"email",value:d,onChange:ae=>u(ae.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"emailFromName",children:"From Name"}),n.jsx(Te,{id:"emailFromName",value:h,onChange:ae=>f(ae.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),a==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Ps,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),n.jsx(Ge,{children:"Configure your SMS delivery service"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsProvider",children:"Provider"}),n.jsxs(nt,{value:p,onValueChange:y,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select SMS provider"})}),n.jsx(tt,{children:K.map(ae=>n.jsx(he,{value:ae.value,children:ae.label},ae.value))})]})]}),p!=="default"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsApiKey",children:"API Key"}),n.jsx(Te,{id:"smsApiKey",type:"password",value:v,onChange:ae=>g(ae.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"smsFromNumber",children:"From Number"}),n.jsx(Te,{id:"smsFromNumber",value:b,onChange:ae=>j(ae.target.value),className:"shadow-sm",placeholder:"+1234567890"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),p==="default"&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:n.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(H3,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),n.jsx(Ge,{children:"Configure webhooks to receive event notifications"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"webhookEvent",children:"Event"}),n.jsxs(nt,{value:E,onValueChange:N,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select event"})}),n.jsx(tt,{children:Y.map(ae=>n.jsx(he,{value:ae.value,children:ae.label},ae.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"webhookUrl",children:"Webhook URL"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{id:"webhookUrl",value:A,onChange:ae=>_(ae.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),n.jsx(re,{type:"button",onClick:J,children:n.jsx(Dt,{className:"h-4 w-4"})})]})]})]}),n.jsx("div",{className:"space-y-3 mt-4",children:w.length>0?w.map(ae=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(tr,{checked:ae.active,onCheckedChange:()=>$(ae.id)}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:Y.find(ve=>ve.value===ae.event)?.label||ae.event}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ae.url})]})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>H(ae.id),children:n.jsx(rs,{className:"h-4 w-4 text-red-500"})})]},ae.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[n.jsx(H3,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No webhooks configured"}),n.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(V4,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),n.jsx(Ge,{children:"Configure API access for external integrations"})]}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"apiEnabled",checked:k,onCheckedChange:ae=>F(!!ae)}),n.jsx(ue,{htmlFor:"apiEnabled",children:"Enable API access"})]}),k&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"apiKey",children:"API Key"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{id:"apiKey",type:"password",value:I,onChange:ae=>T(ae.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),n.jsx(re,{type:"button",onClick:ee,children:"Generate"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{id:"allowedOrigins",value:z,onChange:ae=>q(ae.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),n.jsx(re,{type:"button",onClick:W,children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[R.map((ae,ve)=>n.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[n.jsx("span",{className:"mr-2",children:ae}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>te(ae),children:n.jsx(rs,{className:"h-3 w-3"})})]},ve)),R.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{onClick:ne,disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function PO(){const{tenant:t,getCustomFields:e,updateTenant:r,addCustomField:s,updateCustomField:i,deleteCustomField:a}=lo(),{toast:o}=Gt(),[l,c]=S.useState("general"),[d,u]=S.useState(!1),[h,f]=S.useState(null),[p,y]=S.useState(!1),[v,g]=S.useState(t?.name||""),[b,j]=S.useState(t?.domain||""),[w,C]=S.useState(t?.settings?.timezone||""),[E,N]=S.useState(t?.settings?.currency||""),A=[{id:"general",name:"General",icon:fg},{id:"branding",name:"Branding",icon:J$},{id:"labels",name:"Labels",icon:W4},{id:"notifications",name:"Notifications",icon:Ui},{id:"integrations",name:"Integrations",icon:V4},{id:"users",name:"Users",icon:gs},{id:"custom-fields",name:"Custom Fields",icon:Nl}],_=Ms.customFields.modules,k=t?.customFields||[];be.useEffect(()=>{t&&(g(t.name),j(t.domain),C(t.settings?.timezone||""),N(t.settings?.currency||""))},[t]);const F=()=>{f(null),u(!0)},I=H=>{f(H),u(!0)},T=async H=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await a(H),o({title:"Success",description:"Custom field deleted successfully"})}catch{o({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},R=async H=>{try{return h?await i(h.id,H):await s(H),u(!1),!0}catch{return!1}},O=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Company Information"}),n.jsx(Ge,{children:"Basic information about your dealership"})]}),n.jsx(pe,{className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),n.jsx(Te,{value:v,onChange:H=>g(H.target.value),className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),n.jsx(Te,{value:b,onChange:H=>j(H.target.value),className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),n.jsx(Te,{value:w,onChange:H=>C(H.target.value),className:"mt-1 shadow-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),n.jsx(Te,{value:E,onChange:H=>N(H.target.value),className:"mt-1 shadow-sm"})]})]})})]}),n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Business Hours"}),n.jsx(Ge,{children:"Set your dealership operating hours"})]}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:t?.settings.businessHours&&Object.entries(t.settings.businessHours).map(([H,$])=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"w-24 capitalize font-medium",children:H}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Te,{type:"time",defaultValue:$.open,disabled:$.closed,className:"w-32 shadow-sm"}),n.jsx("span",{className:"text-muted-foreground",children:"to"}),n.jsx(Te,{type:"time",defaultValue:$.close,disabled:$.closed,className:"w-32 shadow-sm"}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",defaultChecked:$.closed,className:"rounded"}),n.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},H))})})]})]}),z=()=>n.jsx(Yfe,{}),q=()=>n.jsx(Xfe,{}),B=()=>n.jsx(Zfe,{}),K=()=>n.jsx(Qfe,{}),Y=()=>n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"User Management"}),n.jsx(Ge,{children:"Manage user accounts and permissions"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),n.jsxs(re,{className:"shadow-sm",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:"Admin User"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Ve,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",children:n.jsx(Nn,{className:"h-3 w-3"})})]})]})})]})]}),J=()=>n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{className:"text-xl",children:"Custom Fields"}),n.jsx(Ge,{children:"Add custom fields to capture additional information"})]}),n.jsxs(re,{className:"shadow-sm",onClick:F,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[k.map(H=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:H.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[H.module," - ",H.section," - ",H.type,H.required&&n.jsx(Ve,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(H),children:"Edit"}),n.jsx(re,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(H.id),children:"Delete"})]})]},H.id)),k.length===0&&n.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return n.jsxs("div",{className:"space-y-8",children:[d&&n.jsx(Kfe,{field:h||void 0,onSave:R,onCancel:()=>u(!1),modules:_}),n.jsx("div",{className:"ri-page-header",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),n.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]})})}),n.jsx("div",{className:"border-b",children:n.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:A.map(H=>n.jsxs("button",{onClick:()=>c(H.id),className:pt("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===H.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[n.jsx(H.icon,{className:"h-4 w-4"}),n.jsx("span",{children:H.name})]},H.id))})}),n.jsxs("div",{children:[l==="general"&&O(),l==="branding"&&z(),l==="labels"&&q(),l==="notifications"&&B(),l==="integrations"&&K(),l==="users"&&Y(),l==="custom-fields"&&J()]})]},t?.updatedAt||t?.id)}function Jfe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(PO,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(PO,{})})]})}const kh={defaultPermissions:{crm:{read:!0,write:!0,delete:!1},inventory:{read:!0,write:!0,delete:!1},quotes:{read:!0,write:!0,delete:!1},agreements:{read:!0,write:!1,delete:!1},service:{read:!0,write:!0,delete:!1},delivery:{read:!0,write:!0,delete:!1},commissions:{read:!0,write:!1,delete:!1},portal:{read:!0,write:!1,delete:!1},invoices:{read:!0,write:!0,delete:!1},reports:{read:!0,write:!1,delete:!1}},sampleTenants:[{id:"tenant-001",name:"Sunshine RV Dealership",domain:"sunshine-rv.renterinsight.com",platformType:"RV",status:"Active",createdAt:"2023-06-15T10:30:00Z",lastActivity:"2024-01-20T14:22:00Z",userCount:12,storageUsed:1.2,monthlyApiCalls:45e3,subscription:{plan:"Professional",status:"Active",nextBilling:"2024-02-15T00:00:00Z",amount:299},settings:{timezone:"America/New_York",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},auditTrail:[{id:"audit-001",timestamp:"2024-01-20T14:22:00Z",action:"User Login",user:"admin@sunshine-rv.com",details:"Successful login from IP 192.168.1.100",module:"Authentication"},{id:"audit-002",timestamp:"2024-01-20T13:45:00Z",action:"Lead Created",user:"sales@sunshine-rv.com",details:"New lead: John Smith - Website inquiry",module:"CRM"},{id:"audit-003",timestamp:"2024-01-20T12:30:00Z",action:"Quote Generated",user:"sales@sunshine-rv.com",details:"Quote Q-2024-001 generated for customer ID: cust-123",module:"Quotes"},{id:"audit-004",timestamp:"2024-01-20T11:15:00Z",action:"Settings Updated",user:"admin@sunshine-rv.com",details:"Updated business hours configuration",module:"Settings"}]},{id:"tenant-002",name:"Mountain View Manufactured Homes",domain:"mountainview-mh.renterinsight.com",platformType:"MH",status:"Active",createdAt:"2023-08-22T09:15:00Z",lastActivity:"2024-01-19T16:45:00Z",userCount:8,storageUsed:.8,monthlyApiCalls:28e3,subscription:{plan:"Standard",status:"Active",nextBilling:"2024-02-22T00:00:00Z",amount:199},settings:{timezone:"America/Denver",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!1,service:!0,delivery:!0,commissions:!1,portal:!1,invoices:!0,reports:!0}},auditTrail:[{id:"audit-005",timestamp:"2024-01-19T16:45:00Z",action:"Inventory Updated",user:"manager@mountainview-mh.com",details:"Added new manufactured home: Stock #MH-2024-001",module:"Inventory"},{id:"audit-006",timestamp:"2024-01-19T15:20:00Z",action:"Service Ticket Created",user:"service@mountainview-mh.com",details:"Service ticket ST-001 created for customer maintenance",module:"Service"}]}],platformTypes:[{value:"RV",label:"RV Dealership"},{value:"MH",label:"Manufactured Housing"},{value:"RV & MH",label:"RV & Manufactured Housing"},{value:"Auto",label:"Auto Dealership"}]};function eme({onClose:t}){const{toast:e}=Gt(),[r,s]=S.useState(!1),[i,a]=S.useState(""),[o,l]=S.useState(""),[c,d]=S.useState(kh.platformTypes[0].value),[u,h]=S.useState(""),[f,p]=S.useState(""),[y,v]=S.useState({});be.useEffect(()=>{v(Object.keys(kh.defaultPermissions).reduce((w,C)=>(w[C]=kh.defaultPermissions[C].read,w),{}))},[]);const g=Object.keys(kh.defaultPermissions).map(w=>({key:w,label:w.charAt(0).toUpperCase()+w.slice(1).replace(/([A-Z])/g," $1")})),b=w=>{v(C=>({...C,[w]:!C[w]}))},j=async w=>{if(w.preventDefault(),!i||!o||!u||!f){e({title:"Validation Error",description:"All fields are required",variant:"destructive"});return}s(!0);try{await new Promise(C=>setTimeout(C,2e3)),e({title:"Success",description:"Tenant created successfully"}),t()}catch{e({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{s(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(fg,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),n.jsx(Ge,{children:"Create a new tenant with admin user and feature permissions"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:j,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"tenantName",children:"Tenant Name *"}),n.jsx(Te,{id:"tenantName",value:i,onChange:w=>a(w.target.value),placeholder:"e.g., Sunshine RV Dealership",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"domain",children:"Domain *"}),n.jsx(Te,{id:"domain",value:o,onChange:w=>l(w.target.value),placeholder:"e.g., sunshine-rv",className:"shadow-sm"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Will create: ",o||"your-domain",".renterinsight.com"]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"platformType",children:"Platform Type *"}),n.jsxs(nt,{value:c,onValueChange:d,children:[n.jsx(et,{className:"shadow-sm",children:n.jsx(st,{placeholder:"Select platform type"})}),n.jsx(tt,{children:kh.platformTypes.map(w=>n.jsx(he,{value:w.value,children:w.label},w.value))})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Admin User"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"adminName",children:"Admin Name *"}),n.jsx(Te,{id:"adminName",value:f,onChange:w=>p(w.target.value),placeholder:"e.g., John Smith",className:"shadow-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"adminEmail",children:"Admin Email *"}),n.jsx(Te,{id:"adminEmail",type:"email",value:u,onChange:w=>h(w.target.value),placeholder:"e.g., admin@sunshine-rv.com",className:"shadow-sm"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),n.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:g.map(w=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:`feature-${w.key}`,checked:y[w.key]||!1,onCheckedChange:()=>b(w.key)}),n.jsx(ue,{htmlFor:`feature-${w.key}`,className:"text-sm",children:w.label})]},w.key))})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[n.jsx(re,{type:"button",variant:"outline",onClick:t,disabled:r,children:"Cancel"}),n.jsx(re,{type:"submit",disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function tme({tenantId:t,onClose:e}){const{toast:r}=Gt(),[s,i]=S.useState(!1),a=kh.sampleTenants.find(d=>d.id===t)||kh.sampleTenants[0],o=async()=>{i(!0);try{await new Promise(d=>setTimeout(d,1e3)),r({title:"Tenant Suspended",description:`${a.name} has been suspended successfully.`})}catch{r({title:"Error",description:"Failed to suspend tenant",variant:"destructive"})}finally{i(!1)}},l=async()=>{if(confirm("Are you sure you want to delete this tenant? This action cannot be undone.")){i(!0);try{await new Promise(d=>setTimeout(d,1e3)),r({title:"Tenant Deleted",description:`${a.name} has been deleted successfully.`}),e()}catch{r({title:"Error",description:"Failed to delete tenant",variant:"destructive"})}finally{i(!1)}}},c=d=>{switch(d.toLowerCase()){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-2xl font-bold",children:a.name}),n.jsx(Ve,{className:c(a.status),children:a.status.toUpperCase()})]}),n.jsx("p",{className:"text-muted-foreground",children:a.domain})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:o,disabled:s,children:[n.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Suspend"]}),n.jsxs(re,{variant:"destructive",size:"sm",onClick:l,disabled:s,children:[n.jsx(rs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),n.jsxs(fn,{defaultValue:"overview",className:"space-y-4",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"overview",children:"Overview"}),n.jsx(dt,{value:"users",children:"Users"}),n.jsx(dt,{value:"settings",children:"Settings"}),n.jsx(dt,{value:"activity",children:"Activity"})]}),n.jsx(ht,{value:"overview",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Basic Information"}),n.jsx(fg,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Platform Type:"}),n.jsx("span",{children:kh.platformTypes.find(d=>d.value===a.platformType)?.label||a.platformType})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Created:"}),n.jsx("span",{children:wt(new Date(a.createdAt))})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Last Activity:"}),n.jsx("span",{children:wt(new Date(a.lastActivity))})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Users:"}),n.jsx("span",{children:a.userCount})]})]})})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Usage Statistics"}),n.jsx(Zp,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Storage Used:"}),n.jsxs("span",{children:[a.storageUsed," GB"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"API Calls (Monthly):"}),n.jsx("span",{children:a.monthlyApiCalls.toLocaleString()})]})]})})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Subscription"}),n.jsx(Nl,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),n.jsx("span",{children:a.subscription.plan})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Status:"}),n.jsx(Ve,{variant:a.subscription.status==="Active"?"default":"secondary",children:a.subscription.status})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),n.jsxs("span",{children:[Fe(a.subscription.amount),"/month"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Next Billing:"}),n.jsx("span",{children:wt(new Date(a.subscription.nextBilling))})]})]})})]})]})}),n.jsx(ht,{value:"users",className:"space-y-4",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Users"}),n.jsx(Ge,{children:"Manage users for this tenant"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"User management coming soon"})]})})]})}),n.jsx(ht,{value:"settings",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"General Settings"})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Timezone:"}),n.jsx("span",{children:a.settings.timezone})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),n.jsx("span",{children:a.settings.currency})]})]})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Features"})}),n.jsx(pe,{children:n.jsx("div",{className:"space-y-4",children:Object.entries(a.settings.features).map(([d,u])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"capitalize",children:d.charAt(0).toUpperCase()+d.slice(1).replace(/([A-Z])/g," $1")}),n.jsx(Ve,{variant:u?"default":"secondary",children:u?"Enabled":"Disabled"})]},d))})})]})]})}),n.jsx(ht,{value:"activity",className:"space-y-4",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Activity Log"}),n.jsx(Ge,{children:"Recent tenant activity"})]}),n.jsx(pe,{children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Zp,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),n.jsx("p",{children:"No recent activity"})]})})]})})]})]})}const rme=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],$p={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function nme(){const{hasRole:t}=Qg(),{toast:e}=Gt(),[r,s]=S.useState(rme),[i,a]=S.useState(""),[o,l]=S.useState(null),[c,d]=S.useState(!1),[u,h]=S.useState(!1);if(!t(mx.ADMIN))return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsx(me,{className:"w-full max-w-md shadow-sm",children:n.jsxs(je,{className:"text-center",children:[n.jsx(ao,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),n.jsx(Ne,{children:"Access Denied"}),n.jsx(Ge,{children:"You don't have permission to access the Platform Admin area."})]})})});r.filter(v=>v.name.toLowerCase().includes(i.toLowerCase())||v.domain.toLowerCase().includes(i.toLowerCase()));const f=()=>{d(!0)},p=v=>{try{const g={id:Math.random().toString(36).substring(2,9),...v,status:v.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};s(b=>[...b,g]),d(!1),e({title:"Tenant Created",description:`${v.name} has been created successfully.`})}catch{e({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},y=(v,g)=>{try{const b=r.map(j=>j.id===v?{...j,...g}:j);s(b),h(!1),e({title:"Tenant Updated",description:`${g.name} has been updated successfully.`})}catch{e({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return n.jsxs("div",{className:"space-y-8",children:[c&&n.jsx(eme,{onSave:p,onCancel:()=>d(!1)}),u&&o&&n.jsx(tme,{tenant:o,onSave:y,onClose:()=>{h(!1),l(null)}}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),n.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),n.jsxs("div",{children:[n.jsxs(re,{className:"shadow-sm",onClick:f,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Tenant"]}),n.jsxs(re,{onClick:()=>window.location.href="/admin/settings",className:"shadow-sm ml-2",children:[n.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Platform Settings"]})]})]})}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),n.jsx(fg,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:$p.totalTenants}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),n.jsx(fg,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:$p.activeTenants}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Zp,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),n.jsx(gs,{className:"h-4 w-4 text-purple-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-purple-900",children:$p.totalUsers}),n.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[n.jsx(gs,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),n.jsx(Zp,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:$p.systemUptime}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Zp,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),n.jsx(Zp,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:$p.avgResponseTime}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),n.jsx(ao,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:$p.errorRate}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]})]})}function sme({initialReportConfig:t,onGenerate:e,onExportCSV:r,isGenerating:s,hasData:i}){const{toast:a}=Gt(),[o,l]=S.useState({type:On.SALES,name:"Sales Report",dateRange:{startDate:"2023-01-01",endDate:new Date().toISOString().split("T")[0]},filters:{}}),c=u=>{if(u.preventDefault(),console.log("handleSubmit called from ReportGeneratorForm"),!o.name){a({title:"Validation Error",description:"Report name is required",variant:"destructive"});return}console.log("Calling onGenerate with config:",o),e(o)},d=u=>{let h="Custom Report";switch(u){case On.SALES:h="Sales Report";break;case On.INVENTORY:h="Inventory Report";break;case On.SERVICE:h="Service Report";break;case On.FINANCIAL:h="Financial Report";break}l(f=>({...f,type:u,name:h}))};return S.useEffect(()=>{t&&(console.log("ReportGeneratorForm useEffect triggered with initialReportConfig:",t),l(t))},[t]),n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{className:"flex items-center",children:[n.jsx(Es,{className:"h-5 w-5 mr-2 text-primary"}),"Generate Report"]}),n.jsx(Ge,{children:"Configure and generate custom reports"})]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:r,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),n.jsx(pe,{children:n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"reportType",children:"Report Type"}),n.jsxs(nt,{value:o.type,onValueChange:u=>d(u),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:On.SALES,children:"Sales Report"}),n.jsx(he,{value:On.INVENTORY,children:"Inventory Report"}),n.jsx(he,{value:On.SERVICE,children:"Service Report"}),n.jsx(he,{value:On.FINANCIAL,children:"Financial Report"}),n.jsx(he,{value:On.CUSTOM,children:"Custom Report"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"reportName",children:"Report Name"}),n.jsx(Te,{id:"reportName",value:o.name,onChange:u=>l(h=>({...h,name:u.target.value})),placeholder:"Enter report name"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"startDate",children:"Start Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Br,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"startDate",type:"date",value:o.dateRange.startDate,onChange:u=>l(h=>({...h,dateRange:{...h.dateRange,startDate:u.target.value}})),className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"endDate",children:"End Date"}),n.jsxs("div",{className:"relative",children:[n.jsx(Br,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"endDate",type:"date",value:o.dateRange.endDate,onChange:u=>l(h=>({...h,dateRange:{...h.dateRange,endDate:u.target.value}})),className:"pl-10"})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"salesRep",children:"Sales Rep"}),n.jsxs(nt,{value:o.filters.salesRep||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,salesRep:u||void 0}})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Sales Reps"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Sales Reps"}),n.jsx(he,{value:"rep-001",children:"John Smith"}),n.jsx(he,{value:"rep-002",children:"Sarah Johnson"}),n.jsx(he,{value:"rep-003",children:"Mike Davis"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsxs(nt,{value:o.filters.status||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,status:u||void 0}})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Statuses"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Statuses"}),n.jsx(he,{value:"active",children:"Active"}),n.jsx(he,{value:"completed",children:"Completed"}),n.jsx(he,{value:"cancelled",children:"Cancelled"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"location",children:"Location"}),n.jsxs(nt,{value:o.filters.location||"",onValueChange:u=>l(h=>({...h,filters:{...h.filters,location:u||void 0}})),children:[n.jsx(et,{children:n.jsx(st,{placeholder:"All Locations"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"",children:"All Locations"}),n.jsx(he,{value:"north",children:"North Region"}),n.jsx(he,{value:"south",children:"South Region"}),n.jsx(he,{value:"east",children:"East Region"}),n.jsx(he,{value:"west",children:"West Region"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsxs(re,{type:"button",variant:"outline",children:[n.jsx(fc,{className:"h-4 w-4 mr-2"}),"More Filters"]}),n.jsxs("div",{className:"flex space-x-2",children:[i&&n.jsxs(re,{type:"button",variant:"outline",onClick:r,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),n.jsx(re,{type:"submit",disabled:s,children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Es,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})})]})}const Qp={availableReports:[{id:"finance-summary",name:"Finance Summary",description:"Overview of financial performance and loan metrics",category:"Finance"},{id:"inventory-status",name:"Inventory Status",description:"Current inventory levels and vehicle availability",category:"Inventory"},{id:"quote-conversions",name:"Quote Conversions",description:"Quote generation and conversion rates",category:"Sales"},{id:"service-performance",name:"Service Ticket Performance",description:"Service ticket resolution times and customer satisfaction",category:"Service"},{id:"delivery-timelines",name:"Delivery Timelines",description:"Delivery scheduling and completion metrics",category:"Operations"},{id:"crm-pipeline",name:"CRM Pipeline Analysis",description:"Lead progression and sales pipeline performance",category:"CRM"},{id:"commission-summary",name:"Commission Summary",description:"Sales team commission tracking and payouts",category:"Finance"},{id:"customer-satisfaction",name:"Customer Satisfaction",description:"Customer feedback and satisfaction scores",category:"Service"}],reportCategories:["All","Finance","Inventory","Sales","Service","Operations","CRM"],timeRangeOptions:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"ytd",label:"Year to Date"},{value:"last_year",label:"Last Year"},{value:"custom",label:"Custom Range"}],chartTypes:[{value:"bar",label:"Bar Chart",icon:"BarChart3"},{value:"line",label:"Line Chart",icon:"LineChart"},{value:"pie",label:"Pie Chart",icon:"PieChart"},{value:"numberCard",label:"Number Cards",icon:"Hash"},{value:"table",label:"Data Table",icon:"Table"}],exportFormats:[{value:"pdf",label:"PDF",icon:"FileText"},{value:"excel",label:"Excel",icon:"FileSpreadsheet"},{value:"csv",label:"CSV",icon:"Download"}],sampleReportResults:{"finance-summary":{chartType:"bar",title:"Monthly Revenue",data:[{label:"Jan",value:125e3,color:"#3b82f6"},{label:"Feb",value:158e3,color:"#3b82f6"},{label:"Mar",value:143e3,color:"#3b82f6"},{label:"Apr",value:167e3,color:"#3b82f6"},{label:"May",value:189e3,color:"#3b82f6"},{label:"Jun",value:201e3,color:"#3b82f6"}],summary:{totalRevenue:1083e3,averageMonthly:180500,growth:12.5}},"inventory-status":{chartType:"pie",title:"Inventory by Status",data:[{label:"Available",value:45,color:"#10b981"},{label:"Pending",value:12,color:"#f59e0b"},{label:"Sold",value:28,color:"#3b82f6"},{label:"Service",value:8,color:"#ef4444"}],summary:{totalUnits:93,availableUnits:45,utilizationRate:51.6}},"quote-conversions":{chartType:"numberCard",title:"Quote Performance",data:[{label:"Quotes Sent",value:48,trend:"+12%",color:"blue"},{label:"Quotes Accepted",value:32,trend:"+8%",color:"green"},{label:"Conversion Rate",value:"66.7%",trend:"+2.1%",color:"green"},{label:"Avg Quote Value",value:"$45,250",trend:"+5%",color:"blue"}],summary:{totalQuotes:48,acceptedQuotes:32,conversionRate:66.7}},"service-performance":{chartType:"line",title:"Service Ticket Resolution",data:[{label:"Week 1",value:24,color:"#3b82f6"},{label:"Week 2",value:31,color:"#3b82f6"},{label:"Week 3",value:28,color:"#3b82f6"},{label:"Week 4",value:35,color:"#3b82f6"}],summary:{totalTickets:118,avgResolutionTime:2.3,customerSatisfaction:4.6}},"delivery-timelines":{chartType:"bar",title:"Delivery Performance",data:[{label:"On Time",value:78,color:"#10b981"},{label:"Delayed",value:12,color:"#f59e0b"},{label:"Cancelled",value:3,color:"#ef4444"}],summary:{totalDeliveries:93,onTimeRate:83.9,avgDeliveryTime:5.2}},"crm-pipeline":{chartType:"bar",title:"Sales Pipeline",data:[{label:"New Leads",value:45,color:"#6366f1"},{label:"Qualified",value:32,color:"#8b5cf6"},{label:"Proposal",value:18,color:"#a855f7"},{label:"Negotiation",value:12,color:"#c084fc"},{label:"Closed Won",value:8,color:"#10b981"}],summary:{totalLeads:115,conversionRate:7,avgDealSize:52e3}}},dashboardWidgets:[{id:"revenue-trend",title:"Revenue Trend",type:"line",size:"large",reportId:"finance-summary"},{id:"quote-conversion",title:"Quote Conversion",type:"numberCard",size:"medium",reportId:"quote-conversions"},{id:"inventory-status",title:"Inventory Status",type:"pie",size:"medium",reportId:"inventory-status"},{id:"service-tickets",title:"Service Performance",type:"bar",size:"medium",reportId:"service-performance"}],filterOptions:{dateRanges:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"this_quarter",label:"This Quarter"},{value:"last_quarter",label:"Last Quarter"},{value:"this_year",label:"This Year"},{value:"last_year",label:"Last Year"}],groupBy:[{value:"day",label:"By Day"},{value:"week",label:"By Week"},{value:"month",label:"By Month"},{value:"quarter",label:"By Quarter"},{value:"year",label:"By Year"}],salesReps:[{value:"all",label:"All Sales Reps"},{value:"john_smith",label:"John Smith"},{value:"sarah_johnson",label:"Sarah Johnson"},{value:"mike_davis",label:"Mike Davis"},{value:"lisa_chen",label:"Lisa Chen"}],vehicleTypes:[{value:"all",label:"All Types"},{value:"rv",label:"RV"},{value:"motorhome",label:"Motorhome"},{value:"travel_trailer",label:"Travel Trailer"},{value:"fifth_wheel",label:"Fifth Wheel"},{value:"manufactured_home",label:"Manufactured Home"}]},scheduledReports:[{id:"weekly-summary",name:"Weekly Performance Summary",reportId:"finance-summary",frequency:"weekly",recipients:["manager@company.com","owner@company.com"],format:"pdf",nextRun:"2024-01-22T09:00:00Z",isActive:!0},{id:"monthly-inventory",name:"Monthly Inventory Report",reportId:"inventory-status",frequency:"monthly",recipients:["inventory@company.com"],format:"excel",nextRun:"2024-02-01T08:00:00Z",isActive:!0}],reportTemplates:[{id:"executive-dashboard",name:"Executive Dashboard",description:"High-level overview for executives",widgets:["revenue-trend","quote-conversion","inventory-status"],isDefault:!0},{id:"sales-performance",name:"Sales Performance",description:"Detailed sales metrics and pipeline analysis",widgets:["quote-conversion","crm-pipeline"],isDefault:!1},{id:"operations-overview",name:"Operations Overview",description:"Service and delivery performance metrics",widgets:["service-tickets","inventory-status"],isDefault:!1}]};function ime({reportType:t,reportName:e,data:r,columns:s,onExportCSV:i}){const{tenant:a}=lo(),[o,l]=S.useState(""),[c,d]=S.useState("All"),u=r||[{id:"rpt-001",name:"Monthly Sales Summary",type:"finance-summary",category:"Finance",generatedAt:"2024-01-20T10:30:00Z",generatedBy:"John Smith",format:"PDF",size:"2.4 MB",status:"Completed"},{id:"rpt-002",name:"Inventory Status Report",type:"inventory-status",category:"Inventory",generatedAt:"2024-01-19T14:15:00Z",generatedBy:"Sarah Johnson",format:"Excel",size:"1.8 MB",status:"Completed"},{id:"rpt-003",name:"Quote Conversion Analysis",type:"quote-conversions",category:"Sales",generatedAt:"2024-01-18T09:45:00Z",generatedBy:"Mike Davis",format:"PDF",size:"3.1 MB",status:"Completed"},{id:"rpt-004",name:"Service Performance Review",type:"service-performance",category:"Service",generatedAt:"2024-01-17T16:20:00Z",generatedBy:"Lisa Chen",format:"CSV",size:"0.9 MB",status:"Processing"}],[h,f]=S.useState(null),[p,y]=S.useState("asc"),[v,g]=S.useState(1);[...r.filter(I=>Object.values(I).some(T=>T&&T.toString().toLowerCase().includes(o.toLowerCase())))].sort((I,T)=>{if(!h)return 0;const R=I[h],O=T[h];if(R===void 0||O===void 0)return 0;if(typeof R=="number"&&typeof O=="number")return p==="asc"?R-O:O-R;if(R instanceof Date&&O instanceof Date)return p==="asc"?R.getTime()-O.getTime():O.getTime()-R.getTime();const z=R.toString().toLowerCase(),q=O.toString().toLowerCase();return p==="asc"?z.localeCompare(q):q.localeCompare(z)});const j=["All",...Qp.reportCategories.filter(I=>I!=="All")],w=u.filter(I=>{const T=I.name.toLowerCase().includes(o.toLowerCase())||I.category.toLowerCase().includes(o.toLowerCase()),R=c==="All"||I.category===c;return T&&R}),C=I=>{switch(I.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=I=>{switch(I.toLowerCase()){case"pdf":return n.jsx(yr,{className:"h-4 w-4"});case"excel":return n.jsx(yr,{className:"h-4 w-4"});case"csv":return n.jsx(yr,{className:"h-4 w-4"});default:return n.jsx(yr,{className:"h-4 w-4"})}},N=I=>new Date(I).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=I=>Qp.availableReports.find(R=>R.id===I)?.name||I,_=I=>{console.log("Downloading report:",I)},k=I=>{console.log("Viewing report:",I)},F=I=>{console.log("Scheduling report:",I)};return n.jsxs(me,{className:"shadow-sm",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:e}),n.jsxs(Ge,{children:[r.length," records found"]})]}),n.jsxs(re,{variant:"outline",size:"sm",onClick:i,children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsx(qn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search results...",value:o,onChange:I=>{l(I.target.value),g(1)},className:"pl-10"})]})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("div",{className:"flex space-x-2",children:j.map(I=>n.jsx(re,{variant:c===I?"default":"outline",size:"sm",onClick:()=>d(I),children:I},I))})]})]}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(W0,{children:[n.jsx(G0,{children:n.jsxs(ac,{children:[n.jsx(Gr,{children:"Report Name"}),n.jsx(Gr,{children:"Type"}),n.jsx(Gr,{children:"Category"}),n.jsx(Gr,{children:"Generated"}),n.jsx(Gr,{children:"Generated By"}),n.jsx(Gr,{children:"Format"}),n.jsx(Gr,{children:"Size"}),n.jsx(Gr,{children:"Status"}),n.jsx(Gr,{className:"text-right",children:"Actions"})]})}),n.jsx(K0,{children:w.length>0?w.map(I=>n.jsxs(ac,{children:[n.jsx(Vr,{className:"font-medium",children:I.name}),n.jsx(Vr,{children:A(I.type)}),n.jsx(Vr,{children:n.jsx(Ve,{variant:"outline",children:I.category})}),n.jsx(Vr,{children:N(I.generatedAt)}),n.jsx(Vr,{children:I.generatedBy}),n.jsx(Vr,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[E(I.format),n.jsx("span",{children:I.format})]})}),n.jsx(Vr,{children:I.size}),n.jsx(Vr,{children:n.jsx(Ve,{className:C(I.status),children:I.status})}),n.jsx(Vr,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>k(I.id),disabled:I.status!=="Completed",children:n.jsx(Ts,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>_(I.id),disabled:I.status!=="Completed",children:n.jsx(Ma,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>F(I.id),children:n.jsx(Br,{className:"h-4 w-4"})})]})})]},I.id)):n.jsx(ac,{children:n.jsx(Vr,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:o||c!=="All"?"No reports match your search criteria":"No reports generated yet"})})})]})}),w.length>0&&n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",w.length," of ",u.length," reports"]}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Ma,{className:"h-4 w-4 mr-2"}),"Export Selected"]})]})]})]})}function ame(){const[t,e]=S.useState([]),[r,s]=S.useState([]),[i,a]=S.useState(!1),[o,l]=S.useState(null),{leads:c,salesReps:d}=Au(),{vehicles:u}=df(),{tickets:h}=Yq(),{invoices:f,payments:p}=kU(),y=async C=>{a(!0),l(C);try{const E=new Date(C.dateRange.startDate),N=new Date(C.dateRange.endDate);let A=[],_=[];switch(C.type){case On.SALES:A=v(E,N,C.filters),_=[{key:"id",label:"ID"},{key:"customerName",label:"Customer"},{key:"date",label:"Date",type:"date"},{key:"product",label:"Product"},{key:"salesRep",label:"Sales Rep"},{key:"amount",label:"Amount",type:"currency"},{key:"status",label:"Status"}];break;case On.INVENTORY:A=g(C.filters),_=[{key:"id",label:"ID"},{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year",type:"number"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price",type:"currency"},{key:"cost",label:"Cost",type:"currency"},{key:"location",label:"Location"}];break;case On.SERVICE:A=b(E,N,C.filters),_=[{key:"id",label:"Ticket ID"},{key:"title",label:"Title"},{key:"customer",label:"Customer"},{key:"vehicle",label:"Vehicle"},{key:"status",label:"Status"},{key:"createdAt",label:"Created",type:"date"},{key:"completedAt",label:"Completed",type:"date"},{key:"partsTotal",label:"Parts Total",type:"currency"},{key:"laborTotal",label:"Labor Total",type:"currency"},{key:"total",label:"Total",type:"currency"}];break;case On.FINANCIAL:A=j(E,N,C.filters),_=[{key:"date",label:"Date",type:"date"},{key:"type",label:"Type"},{key:"reference",label:"Reference"},{key:"customer",label:"Customer"},{key:"description",label:"Description"},{key:"income",label:"Income",type:"currency"},{key:"expense",label:"Expense",type:"currency"},{key:"balance",label:"Balance",type:"currency"}];break;default:A=[],_=[]}e(A),s(_)}catch(E){console.error("Error generating report:",E)}finally{a(!1)}},v=(C,E,N)=>c.filter(_=>{const k=new Date(_.createdAt),F=k>=C&&k<=E,I=!N.salesRep||_.assignedTo===N.salesRep,T=!N.status||_.status===N.status;return F&&I&&T}).map(_=>{const k=d.find(F=>F.id===_.assignedTo);return{id:_.id,customerName:`${_.firstName} ${_.lastName}`,date:_.createdAt,product:_.customFields?.interests||"N/A",salesRep:k?.name||"Unassigned",amount:_.customFields?.budget&&parseFloat(_.customFields.budget.replace(/[^0-9.]/g,""))||0,status:_.status}}),g=C=>u.filter(N=>{const A=!C.location||N.location.toLowerCase().includes(C.location.toLowerCase()),_=!C.status||N.status===C.status;return A&&_}).map(N=>({id:N.id,vin:N.vin,make:N.make,model:N.model,year:N.year,type:N.type,status:N.status,price:N.price,cost:N.cost,location:N.location})),b=(C,E,N)=>h.filter(_=>{const k=new Date(_.createdAt),F=k>=C&&k<=E,I=!N.status||_.status===N.status;return F&&I}).map(_=>{const k=_.parts.reduce((I,T)=>I+T.total,0),F=_.labor.reduce((I,T)=>I+T.total,0);return{id:_.id,title:_.title,customer:_.customerId,vehicle:_.vehicleId||"N/A",status:_.status,createdAt:_.createdAt,completedAt:_.completedDate,partsTotal:k,laborTotal:F,total:k+F}}),j=(C,E,N)=>{const A=[];return f.forEach(_=>{const k=new Date(_.createdAt);k>=C&&k<=E&&A.push({date:_.createdAt,type:"Invoice",reference:_.number,customer:_.customerId,description:`Invoice #${_.number}`,income:_.total,expense:0,balance:_.total})}),p.forEach(_=>{const k=new Date(_.processedDate);k>=C&&k<=E&&A.push({date:_.processedDate,type:"Payment",reference:_.id,customer:f.find(F=>F.id===_.invoiceId)?.customerId||"Unknown",description:`Payment for Invoice #${_.invoiceId}`,income:0,expense:_.amount,balance:-_.amount})}),A.sort((_,k)=>new Date(_.date).getTime()-new Date(k.date).getTime())};return{reportData:t,reportColumns:r,loading:i,currentReportConfig:o,generateReport:y,exportToCSV:()=>{if(!t.length||!r.length)return;const C=r.map(F=>F.label),E=t.map(F=>r.map(I=>{const T=F[I.key];switch(I.type){case"currency":return typeof T=="number"?T.toFixed(2):T;case"date":return T instanceof Date?T.toISOString().split("T")[0]:T;default:return T}})),N=vg.unparse({fields:C,data:E}),A=new Blob([N],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(A),k=document.createElement("a");k.href=_,k.setAttribute("download",`${o?.name||"report"}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k)}}}function OU(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=OU(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Ir(){for(var t,e,r=0,s="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=OU(t))&&(s&&(s+=" "),s+=e);return s}var kN,TO;function uo(){if(TO)return kN;TO=1;var t=Array.isArray;return kN=t,kN}var ON,_O;function RU(){if(_O)return ON;_O=1;var t=typeof nx=="object"&&nx&&nx.Object===Object&&nx;return ON=t,ON}var RN,IO;function xd(){if(IO)return RN;IO=1;var t=RU(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return RN=r,RN}var LN,DO;function Z0(){if(DO)return LN;DO=1;var t=xd(),e=t.Symbol;return LN=e,LN}var MN,kO;function ome(){if(kO)return MN;kO=1;var t=Z0(),e=Object.prototype,r=e.hasOwnProperty,s=e.toString,i=t?t.toStringTag:void 0;function a(o){var l=r.call(o,i),c=o[i];try{o[i]=void 0;var d=!0}catch{}var u=s.call(o);return d&&(l?o[i]=c:delete o[i]),u}return MN=a,MN}var FN,OO;function lme(){if(OO)return FN;OO=1;var t=Object.prototype,e=t.toString;function r(s){return e.call(s)}return FN=r,FN}var $N,RO;function Cu(){if(RO)return $N;RO=1;var t=Z0(),e=ome(),r=lme(),s="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:s:a&&a in Object(l)?e(l):r(l)}return $N=o,$N}var BN,LO;function Eu(){if(LO)return BN;LO=1;function t(e){return e!=null&&typeof e=="object"}return BN=t,BN}var zN,MO;function av(){if(MO)return zN;MO=1;var t=Cu(),e=Eu(),r="[object Symbol]";function s(i){return typeof i=="symbol"||e(i)&&t(i)==r}return zN=s,zN}var qN,FO;function VT(){if(FO)return qN;FO=1;var t=uo(),e=av(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function i(a,o){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:s.test(a)||!r.test(a)||o!=null&&a in Object(o)}return qN=i,qN}var UN,$O;function hf(){if($O)return UN;$O=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return UN=t,UN}var VN,BO;function HT(){if(BO)return VN;BO=1;var t=Cu(),e=hf(),r="[object AsyncFunction]",s="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var c=t(l);return c==s||c==i||c==r||c==a}return VN=o,VN}var HN,zO;function cme(){if(zO)return HN;zO=1;var t=xd(),e=t["__core-js_shared__"];return HN=e,HN}var WN,qO;function dme(){if(qO)return WN;qO=1;var t=cme(),e=function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function r(s){return!!e&&e in s}return WN=r,WN}var GN,UO;function LU(){if(UO)return GN;UO=1;var t=Function.prototype,e=t.toString;function r(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return GN=r,GN}var KN,VO;function ume(){if(VO)return KN;VO=1;var t=HT(),e=dme(),r=hf(),s=LU(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!r(f)||e(f))return!1;var p=t(f)?u:a;return p.test(s(f))}return KN=h,KN}var YN,HO;function hme(){if(HO)return YN;HO=1;function t(e,r){return e?.[r]}return YN=t,YN}var XN,WO;function Ym(){if(WO)return XN;WO=1;var t=ume(),e=hme();function r(s,i){var a=e(s,i);return t(a)?a:void 0}return XN=r,XN}var ZN,GO;function Yj(){if(GO)return ZN;GO=1;var t=Ym(),e=t(Object,"create");return ZN=e,ZN}var QN,KO;function fme(){if(KO)return QN;KO=1;var t=Yj();function e(){this.__data__=t?t(null):{},this.size=0}return QN=e,QN}var JN,YO;function mme(){if(YO)return JN;YO=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return JN=t,JN}var eS,XO;function pme(){if(XO)return eS;XO=1;var t=Yj(),e="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function i(a){var o=this.__data__;if(t){var l=o[a];return l===e?void 0:l}return s.call(o,a)?o[a]:void 0}return eS=i,eS}var tS,ZO;function gme(){if(ZO)return tS;ZO=1;var t=Yj(),e=Object.prototype,r=e.hasOwnProperty;function s(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return tS=s,tS}var rS,QO;function vme(){if(QO)return rS;QO=1;var t=Yj(),e="__lodash_hash_undefined__";function r(s,i){var a=this.__data__;return this.size+=this.has(s)?0:1,a[s]=t&&i===void 0?e:i,this}return rS=r,rS}var nS,JO;function xme(){if(JO)return nS;JO=1;var t=fme(),e=mme(),r=pme(),s=gme(),i=vme();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=s,a.prototype.set=i,nS=a,nS}var sS,eR;function yme(){if(eR)return sS;eR=1;function t(){this.__data__=[],this.size=0}return sS=t,sS}var iS,tR;function WT(){if(tR)return iS;tR=1;function t(e,r){return e===r||e!==e&&r!==r}return iS=t,iS}var aS,rR;function Xj(){if(rR)return aS;rR=1;var t=WT();function e(r,s){for(var i=r.length;i--;)if(t(r[i][0],s))return i;return-1}return aS=e,aS}var oS,nR;function bme(){if(nR)return oS;nR=1;var t=Xj(),e=Array.prototype,r=e.splice;function s(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():r.call(a,o,1),--this.size,!0}return oS=s,oS}var lS,sR;function jme(){if(sR)return lS;sR=1;var t=Xj();function e(r){var s=this.__data__,i=t(s,r);return i<0?void 0:s[i][1]}return lS=e,lS}var cS,iR;function wme(){if(iR)return cS;iR=1;var t=Xj();function e(r){return t(this.__data__,r)>-1}return cS=e,cS}var dS,aR;function Nme(){if(aR)return dS;aR=1;var t=Xj();function e(r,s){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,s])):i[a][1]=s,this}return dS=e,dS}var uS,oR;function Zj(){if(oR)return uS;oR=1;var t=yme(),e=bme(),r=jme(),s=wme(),i=Nme();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=s,a.prototype.set=i,uS=a,uS}var hS,lR;function GT(){if(lR)return hS;lR=1;var t=Ym(),e=xd(),r=t(e,"Map");return hS=r,hS}var fS,cR;function Sme(){if(cR)return fS;cR=1;var t=xme(),e=Zj(),r=GT();function s(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return fS=s,fS}var mS,dR;function Ame(){if(dR)return mS;dR=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return mS=t,mS}var pS,uR;function Qj(){if(uR)return pS;uR=1;var t=Ame();function e(r,s){var i=r.__data__;return t(s)?i[typeof s=="string"?"string":"hash"]:i.map}return pS=e,pS}var gS,hR;function Cme(){if(hR)return gS;hR=1;var t=Qj();function e(r){var s=t(this,r).delete(r);return this.size-=s?1:0,s}return gS=e,gS}var vS,fR;function Eme(){if(fR)return vS;fR=1;var t=Qj();function e(r){return t(this,r).get(r)}return vS=e,vS}var xS,mR;function Pme(){if(mR)return xS;mR=1;var t=Qj();function e(r){return t(this,r).has(r)}return xS=e,xS}var yS,pR;function Tme(){if(pR)return yS;pR=1;var t=Qj();function e(r,s){var i=t(this,r),a=i.size;return i.set(r,s),this.size+=i.size==a?0:1,this}return yS=e,yS}var bS,gR;function KT(){if(gR)return bS;gR=1;var t=Sme(),e=Cme(),r=Eme(),s=Pme(),i=Tme();function a(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=s,a.prototype.set=i,bS=a,bS}var jS,vR;function MU(){if(vR)return jS;vR=1;var t=KT(),e="Expected a function";function r(s,i){if(typeof s!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=a.cache;if(c.has(l))return c.get(l);var d=s.apply(this,o);return a.cache=c.set(l,d)||c,d};return a.cache=new(r.Cache||t),a}return r.Cache=t,jS=r,jS}var wS,xR;function _me(){if(xR)return wS;xR=1;var t=MU(),e=500;function r(s){var i=t(s,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return wS=r,wS}var NS,yR;function Ime(){if(yR)return NS;yR=1;var t=_me(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,l,c,d){a.push(c?d.replace(r,"$1"):l||o)}),a});return NS=s,NS}var SS,bR;function YT(){if(bR)return SS;bR=1;function t(e,r){for(var s=-1,i=e==null?0:e.length,a=Array(i);++s<i;)a[s]=r(e[s],s,e);return a}return SS=t,SS}var AS,jR;function Dme(){if(jR)return AS;jR=1;var t=Z0(),e=YT(),r=uo(),s=av(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(s(l))return a?a.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return AS=o,AS}var CS,wR;function FU(){if(wR)return CS;wR=1;var t=Dme();function e(r){return r==null?"":t(r)}return CS=e,CS}var ES,NR;function $U(){if(NR)return ES;NR=1;var t=uo(),e=VT(),r=Ime(),s=FU();function i(a,o){return t(a)?a:e(a,o)?[a]:r(s(a))}return ES=i,ES}var PS,SR;function Jj(){if(SR)return PS;SR=1;var t=av();function e(r){if(typeof r=="string"||t(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return PS=e,PS}var TS,AR;function XT(){if(AR)return TS;AR=1;var t=$U(),e=Jj();function r(s,i){i=t(i,s);for(var a=0,o=i.length;s!=null&&a<o;)s=s[e(i[a++])];return a&&a==o?s:void 0}return TS=r,TS}var _S,CR;function BU(){if(CR)return _S;CR=1;var t=XT();function e(r,s,i){var a=r==null?void 0:t(r,s);return a===void 0?i:a}return _S=e,_S}var kme=BU();const Ho=Kr(kme);var IS,ER;function Ome(){if(ER)return IS;ER=1;function t(e){return e==null}return IS=t,IS}var Rme=Ome();const jr=Kr(Rme);var DS,PR;function Lme(){if(PR)return DS;PR=1;var t=Cu(),e=uo(),r=Eu(),s="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==s}return DS=i,DS}var Mme=Lme();const Om=Kr(Mme);var Fme=HT();const hr=Kr(Fme);var $me=hf();const ov=Kr($me);var kS={exports:{}},wn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function Bme(){if(TR)return wn;TR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case t:switch(g=g.type,g){case r:case i:case s:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case f:case h:case a:return g;default:return b}}case e:return b}}}return wn.ContextConsumer=o,wn.ContextProvider=a,wn.Element=t,wn.ForwardRef=c,wn.Fragment=r,wn.Lazy=f,wn.Memo=h,wn.Portal=e,wn.Profiler=i,wn.StrictMode=s,wn.Suspense=d,wn.SuspenseList=u,wn.isAsyncMode=function(){return!1},wn.isConcurrentMode=function(){return!1},wn.isContextConsumer=function(g){return v(g)===o},wn.isContextProvider=function(g){return v(g)===a},wn.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},wn.isForwardRef=function(g){return v(g)===c},wn.isFragment=function(g){return v(g)===r},wn.isLazy=function(g){return v(g)===f},wn.isMemo=function(g){return v(g)===h},wn.isPortal=function(g){return v(g)===e},wn.isProfiler=function(g){return v(g)===i},wn.isStrictMode=function(g){return v(g)===s},wn.isSuspense=function(g){return v(g)===d},wn.isSuspenseList=function(g){return v(g)===u},wn.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===i||g===s||g===d||g===u||g===p||typeof g=="object"&&g!==null&&(g.$$typeof===f||g.$$typeof===h||g.$$typeof===a||g.$$typeof===o||g.$$typeof===c||g.$$typeof===y||g.getModuleId!==void 0)},wn.typeOf=v,wn}var _R;function zme(){return _R||(_R=1,kS.exports=Bme()),kS.exports}var qme=zme(),OS,IR;function zU(){if(IR)return OS;IR=1;var t=Cu(),e=Eu(),r="[object Number]";function s(i){return typeof i=="number"||e(i)&&t(i)==r}return OS=s,OS}var RS,DR;function Ume(){if(DR)return RS;DR=1;var t=zU();function e(r){return t(r)&&r!=+r}return RS=e,RS}var Vme=Ume();const lv=Kr(Vme);var Hme=zU();const Wme=Kr(Hme);var Da=function(e){return e===0?0:e>0?1:-1},dm=function(e){return Om(e)&&e.indexOf("%")===e.length-1},jt=function(e){return Wme(e)&&!lv(e)},Gme=function(e){return jr(e)},li=function(e){return jt(e)||Om(e)},Kme=0,Xm=function(e){var r=++Kme;return"".concat(e||"").concat(r)},ka=function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!jt(e)&&!Om(e))return s;var a;if(dm(e)){var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return lv(a)&&(a=s),i&&a>r&&(a=r),a},Oh=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Yme=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,s={},i=0;i<r;i++)if(!s[e[i]])s[e[i]]=!0;else return!0;return!1},oi=function(e,r){return jt(e)&&jt(r)?function(s){return e+s*(r-e)}:function(){return r}};function h1(t,e,r){return!t||!t.length?null:t.find(function(s){return s&&(typeof e=="function"?e(s):Ho(s,e))===r})}var Xme=function(e,r){return jt(e)&&jt(r)?e-r:Om(e)&&Om(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function og(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var s in e)if({}.hasOwnProperty.call(e,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function VE(t){"@babel/helpers - typeof";return VE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VE(t)}var Zme=["viewBox","children"],Qme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],kR=["points","pathLength"],LS={svg:Zme,polygon:kR,polyline:kR},ZT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f1=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(S.isValidElement(e)&&(s=e.props),!ov(s))return null;var i={};return Object.keys(s).forEach(function(a){ZT.includes(a)&&(i[a]=r||function(o){return s[a](s,o)})}),i},Jme=function(e,r,s){return function(i){return e(r,s,i),null}},Rm=function(e,r,s){if(!ov(e)||VE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];ZT.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=Jme(o,r,s))}),i},epe=["children"],tpe=["children"];function OR(t,e){if(t==null)return{};var r=rpe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function rpe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function HE(t){"@babel/helpers - typeof";return HE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HE(t)}var RR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},fu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},LR=null,MS=null,QT=function t(e){if(e===LR&&Array.isArray(MS))return MS;var r=[];return S.Children.forEach(e,function(s){jr(s)||(qme.isFragment(s)?r=r.concat(t(s.props.children)):r.push(s))}),MS=r,LR=e,r};function Wo(t,e){var r=[],s=[];return Array.isArray(e)?s=e.map(function(i){return fu(i)}):s=[fu(e)],QT(t).forEach(function(i){var a=Ho(i,"type.displayName")||Ho(i,"type.name");s.indexOf(a)!==-1&&r.push(i)}),r}function Do(t,e){var r=Wo(t,e);return r&&r[0]}var MR=function(e){if(!e||!e.props)return!1;var r=e.props,s=r.width,i=r.height;return!(!jt(s)||s<=0||!jt(i)||i<=0)},npe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],spe=function(e){return e&&e.type&&Om(e.type)&&npe.indexOf(e.type)>=0},qU=function(e){return e&&HE(e)==="object"&&"clipDot"in e},ipe=function(e,r,s,i){var a,o=(a=LS?.[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!hr(e)&&(i&&o.includes(r)||Qme.includes(r))||s&&ZT.includes(r)},Wt=function(e,r,s){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(S.isValidElement(e)&&(i=e.props),!ov(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;ipe((l=i)===null||l===void 0?void 0:l[o],o,r,s)&&(a[o]=i[o])}),a},WE=function t(e,r){if(e===r)return!0;var s=S.Children.count(e);if(s!==S.Children.count(r))return!1;if(s===0)return!0;if(s===1)return FR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<s;i++){var a=e[i],o=r[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!FR(a,o))return!1}return!0},FR=function(e,r){if(jr(e)&&jr(r))return!0;if(!jr(e)&&!jr(r)){var s=e.props||{},i=s.children,a=OR(s,epe),o=r.props||{},l=o.children,c=OR(o,tpe);return i&&l?og(a,c)&&WE(i,l):!i&&!l?og(a,c):!1}return!1},$R=function(e,r){var s=[],i={};return QT(e).forEach(function(a,o){if(spe(a))s.push(a);else if(a){var l=fu(a.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!i[l])){var h=d(a,l,o);s.push(h),i[l]=!0}}}),s},ape=function(e){var r=e&&e.type;return r&&RR[r]?RR[r]:null},ope=function(e,r){return QT(r).indexOf(e)},lpe=["children","width","height","viewBox","className","style","title","desc"];function GE(){return GE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},GE.apply(this,arguments)}function cpe(t,e){if(t==null)return{};var r=dpe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function dpe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function KE(t){var e=t.children,r=t.width,s=t.height,i=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,d=cpe(t,lpe),u=i||{width:r,height:s,x:0,y:0},h=Ir("recharts-surface",a);return be.createElement("svg",GE({},Wt(d,!0,"svg"),{className:h,width:r,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),be.createElement("title",null,l),be.createElement("desc",null,c),e)}var upe=["children","className"];function YE(){return YE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},YE.apply(this,arguments)}function hpe(t,e){if(t==null)return{};var r=fpe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function fpe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var $r=be.forwardRef(function(t,e){var r=t.children,s=t.className,i=hpe(t,upe),a=Ir("recharts-layer",s);return be.createElement("g",YE({className:a},Wt(i,!0),{ref:e}),r)}),oc=function(e,r){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]},FS,BR;function mpe(){if(BR)return FS;BR=1;function t(e,r,s){var i=-1,a=e.length;r<0&&(r=-r>a?0:a+r),s=s>a?a:s,s<0&&(s+=a),a=r>s?0:s-r>>>0,r>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+r];return o}return FS=t,FS}var $S,zR;function ppe(){if(zR)return $S;zR=1;var t=mpe();function e(r,s,i){var a=r.length;return i=i===void 0?a:i,!s&&i>=a?r:t(r,s,i)}return $S=e,$S}var BS,qR;function UU(){if(qR)return BS;qR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",i=e+r+s,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+a+"]");function c(d){return l.test(d)}return BS=c,BS}var zS,UR;function gpe(){if(UR)return zS;UR=1;function t(e){return e.split("")}return zS=t,zS}var qS,VR;function vpe(){if(VR)return qS;VR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",i=e+r+s,a="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=d+"?",v="["+a+"]?",g="(?:"+p+"(?:"+[u,h,f].join("|")+")"+v+y+")*",b=v+y+g,j="(?:"+[u+l+"?",l,h,f,o].join("|")+")",w=RegExp(c+"(?="+c+")|"+j+b,"g");function C(E){return E.match(w)||[]}return qS=C,qS}var US,HR;function xpe(){if(HR)return US;HR=1;var t=gpe(),e=UU(),r=vpe();function s(i){return e(i)?r(i):t(i)}return US=s,US}var VS,WR;function ype(){if(WR)return VS;WR=1;var t=ppe(),e=UU(),r=xpe(),s=FU();function i(a){return function(o){o=s(o);var l=e(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?t(l,1).join(""):o.slice(1);return c[a]()+d}}return VS=i,VS}var HS,GR;function bpe(){if(GR)return HS;GR=1;var t=ype(),e=t("toUpperCase");return HS=e,HS}var jpe=bpe();const ew=Kr(jpe);function $n(t){return function(){return t}}const VU=Math.cos,m1=Math.sin,xc=Math.sqrt,p1=Math.PI,tw=2*p1,XE=Math.PI,ZE=2*XE,rm=1e-6,wpe=ZE-rm;function HU(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Npe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return HU;const r=10**e;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+s[i]}}class Spe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?HU:Npe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,s,i){this._append`Q${+e},${+r},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(e,r,s,i,a,o){this._append`C${+e},${+r},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,s,i,a){if(e=+e,r=+r,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-e,d=i-r,u=o-e,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>rm)if(!(Math.abs(h*c-d*u)>rm)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let p=s-o,y=i-l,v=c*c+d*d,g=p*p+y*y,b=Math.sqrt(v),j=Math.sqrt(f),w=a*Math.tan((XE-Math.acos((v+f-g)/(2*b*j)))/2),C=w/j,E=w/b;Math.abs(C-1)>rm&&this._append`L${e+C*u},${r+C*h}`,this._append`A${a},${a},0,0,${+(h*p>u*y)},${this._x1=e+E*c},${this._y1=r+E*d}`}}arc(e,r,s,i,a,o){if(e=+e,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=e+l,u=r+c,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>rm||Math.abs(this._y1-u)>rm)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%ZE+ZE),f>wpe?this._append`A${s},${s},0,1,${h},${e-l},${r-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:f>rm&&this._append`A${s},${s},0,${+(f>=XE)},${h},${this._x1=e+s*Math.cos(a)},${this._y1=r+s*Math.sin(a)}`)}rect(e,r,s,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function JT(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);e=s}return t},()=>new Spe(e)}function e_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function WU(t){this._context=t}WU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function rw(t){return new WU(t)}function GU(t){return t[0]}function KU(t){return t[1]}function YU(t,e){var r=$n(!0),s=null,i=rw,a=null,o=JT(l);t=typeof t=="function"?t:t===void 0?GU:$n(t),e=typeof e=="function"?e:e===void 0?KU:$n(e);function l(c){var d,u=(c=e_(c)).length,h,f=!1,p;for(s==null&&(a=i(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,d,c),+e(h,d,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:$n(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:$n(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:$n(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function gb(t,e,r){var s=null,i=$n(!0),a=null,o=rw,l=null,c=JT(d);t=typeof t=="function"?t:t===void 0?GU:$n(+t),e=typeof e=="function"?e:$n(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?KU:$n(+r);function d(h){var f,p,y,v=(h=e_(h)).length,g,b=!1,j,w=new Array(v),C=new Array(v);for(a==null&&(l=o(j=c())),f=0;f<=v;++f){if(!(f<v&&i(g=h[f],f,h))===b)if(b=!b)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=f-1;y>=p;--y)l.point(w[y],C[y]);l.lineEnd(),l.areaEnd()}b&&(w[f]=+t(g,f,h),C[f]=+e(g,f,h),l.point(s?+s(g,f,h):w[f],r?+r(g,f,h):C[f]))}if(j)return l=null,j+""||null}function u(){return YU().defined(i).curve(o).context(a)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:$n(+h),s=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:$n(+h),d):t},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:$n(+h),d):s},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:$n(+h),r=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:$n(+h),d):e},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:$n(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(s).y(e)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:$n(!!h),d):i},d.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),d):o},d.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),d):a},d}class XU{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ape(t){return new XU(t,!0)}function Cpe(t){return new XU(t,!1)}const t_={draw(t,e){const r=xc(e/p1);t.moveTo(r,0),t.arc(0,0,r,0,tw)}},Epe={draw(t,e){const r=xc(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},ZU=xc(1/3),Ppe=ZU*2,Tpe={draw(t,e){const r=xc(e/Ppe),s=r*ZU;t.moveTo(0,-r),t.lineTo(s,0),t.lineTo(0,r),t.lineTo(-s,0),t.closePath()}},_pe={draw(t,e){const r=xc(e),s=-r/2;t.rect(s,s,r,r)}},Ipe=.8908130915292852,QU=m1(p1/10)/m1(7*p1/10),Dpe=m1(tw/10)*QU,kpe=-VU(tw/10)*QU,Ope={draw(t,e){const r=xc(e*Ipe),s=Dpe*r,i=kpe*r;t.moveTo(0,-r),t.lineTo(s,i);for(let a=1;a<5;++a){const o=tw*a/5,l=VU(o),c=m1(o);t.lineTo(c*r,-l*r),t.lineTo(l*s-c*i,c*s+l*i)}t.closePath()}},WS=xc(3),Rpe={draw(t,e){const r=-xc(e/(WS*3));t.moveTo(0,r*2),t.lineTo(-WS*r,-r),t.lineTo(WS*r,-r),t.closePath()}},hl=-.5,fl=xc(3)/2,QE=1/xc(12),Lpe=(QE/2+1)*3,Mpe={draw(t,e){const r=xc(e/Lpe),s=r/2,i=r*QE,a=s,o=r*QE+r,l=-a,c=o;t.moveTo(s,i),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(hl*s-fl*i,fl*s+hl*i),t.lineTo(hl*a-fl*o,fl*a+hl*o),t.lineTo(hl*l-fl*c,fl*l+hl*c),t.lineTo(hl*s+fl*i,hl*i-fl*s),t.lineTo(hl*a+fl*o,hl*o-fl*a),t.lineTo(hl*l+fl*c,hl*c-fl*l),t.closePath()}};function Fpe(t,e){let r=null,s=JT(i);t=typeof t=="function"?t:$n(t||t_),e=typeof e=="function"?e:$n(e===void 0?64:+e);function i(){let a;if(r||(r=a=s()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:$n(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:$n(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function g1(){}function v1(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function JU(t){this._context=t}JU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:v1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:v1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $pe(t){return new JU(t)}function eV(t){this._context=t}eV.prototype={areaStart:g1,areaEnd:g1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:v1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bpe(t){return new eV(t)}function tV(t){this._context=t}tV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:v1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zpe(t){return new tV(t)}function rV(t){this._context=t}rV.prototype={areaStart:g1,areaEnd:g1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qpe(t){return new rV(t)}function KR(t){return t<0?-1:1}function YR(t,e,r){var s=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(s||i<0&&-0),o=(r-t._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(KR(a)+KR(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function XR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function GS(t,e,r){var s=t._x0,i=t._y0,a=t._x1,o=t._y1,l=(a-s)/3;t._context.bezierCurveTo(s+l,i+l*e,a-l,o-l*r,a,o)}function x1(t){this._context=t}x1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GS(this,this._t0,XR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,GS(this,XR(this,r=YR(this,t,e)),r);break;default:GS(this,this._t0,r=YR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function nV(t){this._context=new sV(t)}(nV.prototype=Object.create(x1.prototype)).point=function(t,e){x1.prototype.point.call(this,e,t)};function sV(t){this._context=t}sV.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,s,i,a){this._context.bezierCurveTo(e,t,s,r,a,i)}};function Upe(t){return new x1(t)}function Vpe(t){return new nV(t)}function iV(t){this._context=t}iV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var s=ZR(t),i=ZR(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ZR(t){var e,r=t.length-1,s,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)s=i[e]/a[e-1],a[e]-=s,o[e]-=s*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Hpe(t){return new iV(t)}function nw(t,e){this._context=t,this._t=e}nw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Wpe(t){return new nw(t,.5)}function Gpe(t){return new nw(t,0)}function Kpe(t){return new nw(t,1)}function wg(t,e){if((o=t.length)>1)for(var r=1,s,i,a=t[e[0]],o,l=a.length;r<o;++r)for(i=a,a=t[e[r]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function JE(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ype(t,e){return t[e]}function Xpe(t){const e=[];return e.key=t,e}function Zpe(){var t=$n([]),e=JE,r=wg,s=Ype;function i(a){var o=Array.from(t.apply(this,arguments),Xpe),l,c=o.length,d=-1,u;for(const h of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,a)]).data=h;for(l=0,u=e_(e(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:$n(Array.from(a)),i):t},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:$n(+a),i):s},i.order=function(a){return arguments.length?(e=a==null?JE:typeof a=="function"?a:$n(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??wg,i):r},i}function Qpe(t,e){if((s=t.length)>0){for(var r,s,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<s;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<s;++r)t[r][i][1]/=o}wg(t,e)}}function Jpe(t,e){if((i=t.length)>0){for(var r=0,s=t[e[0]],i,a=s.length;r<a;++r){for(var o=0,l=0;o<i;++o)l+=t[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}wg(t,e)}}function ege(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],h=u[s][1]||0,f=u[s-1][1]||0,p=(h-f)/2,y=0;y<l;++y){var v=t[e[y]],g=v[s][1]||0,b=v[s-1][1]||0;p+=g-b}c+=h,d+=p*h}i[s-1][1]+=i[s-1][0]=r,c&&(r-=d/c)}i[s-1][1]+=i[s-1][0]=r,wg(t,e)}}function Xx(t){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xx(t)}var tge=["type","size","sizeType"];function eP(){return eP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},eP.apply(this,arguments)}function QR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function JR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(r),!0).forEach(function(s){rge(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function rge(t,e,r){return e=nge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nge(t){var e=sge(t,"string");return Xx(e)=="symbol"?e:e+""}function sge(t,e){if(Xx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Xx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ige(t,e){if(t==null)return{};var r=age(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function age(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var aV={symbolCircle:t_,symbolCross:Epe,symbolDiamond:Tpe,symbolSquare:_pe,symbolStar:Ope,symbolTriangle:Rpe,symbolWye:Mpe},oge=Math.PI/180,lge=function(e){var r="symbol".concat(ew(e));return aV[r]||t_},cge=function(e,r,s){if(r==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*oge;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},dge=function(e,r){aV["symbol".concat(ew(e))]=r},r_=function(e){var r=e.type,s=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,o=e.sizeType,l=o===void 0?"area":o,c=ige(e,tge),d=JR(JR({},c),{},{type:s,size:a,sizeType:l}),u=function(){var g=lge(s),b=Fpe().type(g).size(cge(a,l,s));return b()},h=d.className,f=d.cx,p=d.cy,y=Wt(d,!0);return f===+f&&p===+p&&a===+a?be.createElement("path",eP({},y,{className:Ir("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(p,")"),d:u()})):null};r_.registerSymbol=dge;function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function tP(){return tP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},tP.apply(this,arguments)}function eL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function uge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(r),!0).forEach(function(s){Zx(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function hge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fge(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,lV(s.key),s)}}function mge(t,e,r){return e&&fge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pge(t,e,r){return e=y1(e),gge(t,oV()?Reflect.construct(e,r||[],y1(t).constructor):e.apply(t,r))}function gge(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vge(t)}function vge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oV=function(){return!!t})()}function y1(t){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(t)}function xge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rP(t,e)}function rP(t,e){return rP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},rP(t,e)}function Zx(t,e,r){return e=lV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lV(t){var e=yge(t,"string");return Ng(e)=="symbol"?e:e+""}function yge(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ng(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ml=32,n_=function(t){function e(){return hge(this,e),pge(this,e,arguments)}return xge(e,t),mge(e,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=ml/2,o=ml/6,l=ml/3,c=s.inactive?i:s.color;if(s.type==="plainline")return be.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:ml,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return be.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(ml,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return be.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ml/8,"h").concat(ml,"v").concat(ml*3/4,"h").concat(-ml,"z"),className:"recharts-legend-icon"});if(be.isValidElement(s.legendIcon)){var d=uge({},s);return delete d.legendIcon,be.cloneElement(s.legendIcon,d)}return be.createElement(r_,{fill:c,cx:a,cy:a,size:ml,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,u={x:0,y:0,width:ml,height:ml},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,y){var v=p.formatter||c,g=Ir(Zx(Zx({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=hr(p.value)?null:p.value;oc(!hr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var j=p.inactive?d:p.color;return be.createElement("li",tP({className:g,style:h,key:"legend-item-".concat(y)},Rm(s.props,p,y)),be.createElement(KE,{width:o,height:o,viewBox:u,style:f},s.renderIcon(p)),be.createElement("span",{className:"recharts-legend-item-text",style:{color:j}},v?v(b,p,y):b))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return be.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(S.PureComponent);Zx(n_,"displayName","Legend");Zx(n_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var KS,tL;function bge(){if(tL)return KS;tL=1;var t=Zj();function e(){this.__data__=new t,this.size=0}return KS=e,KS}var YS,rL;function jge(){if(rL)return YS;rL=1;function t(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s}return YS=t,YS}var XS,nL;function wge(){if(nL)return XS;nL=1;function t(e){return this.__data__.get(e)}return XS=t,XS}var ZS,sL;function Nge(){if(sL)return ZS;sL=1;function t(e){return this.__data__.has(e)}return ZS=t,ZS}var QS,iL;function Sge(){if(iL)return QS;iL=1;var t=Zj(),e=GT(),r=KT(),s=200;function i(a,o){var l=this.__data__;if(l instanceof t){var c=l.__data__;if(!e||c.length<s-1)return c.push([a,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(a,o),this.size=l.size,this}return QS=i,QS}var JS,aL;function cV(){if(aL)return JS;aL=1;var t=Zj(),e=bge(),r=jge(),s=wge(),i=Nge(),a=Sge();function o(l){var c=this.__data__=new t(l);this.size=c.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=s,o.prototype.has=i,o.prototype.set=a,JS=o,JS}var eA,oL;function Age(){if(oL)return eA;oL=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return eA=e,eA}var tA,lL;function Cge(){if(lL)return tA;lL=1;function t(e){return this.__data__.has(e)}return tA=t,tA}var rA,cL;function dV(){if(cL)return rA;cL=1;var t=KT(),e=Age(),r=Cge();function s(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return s.prototype.add=s.prototype.push=e,s.prototype.has=r,rA=s,rA}var nA,dL;function uV(){if(dL)return nA;dL=1;function t(e,r){for(var s=-1,i=e==null?0:e.length;++s<i;)if(r(e[s],s,e))return!0;return!1}return nA=t,nA}var sA,uL;function hV(){if(uL)return sA;uL=1;function t(e,r){return e.has(r)}return sA=t,sA}var iA,hL;function fV(){if(hL)return iA;hL=1;var t=dV(),e=uV(),r=hV(),s=1,i=2;function a(o,l,c,d,u,h){var f=c&s,p=o.length,y=l.length;if(p!=y&&!(f&&y>p))return!1;var v=h.get(o),g=h.get(l);if(v&&g)return v==l&&g==o;var b=-1,j=!0,w=c&i?new t:void 0;for(h.set(o,l),h.set(l,o);++b<p;){var C=o[b],E=l[b];if(d)var N=f?d(E,C,b,l,o,h):d(C,E,b,o,l,h);if(N!==void 0){if(N)continue;j=!1;break}if(w){if(!e(l,function(A,_){if(!r(w,_)&&(C===A||u(C,A,c,d,h)))return w.push(_)})){j=!1;break}}else if(!(C===E||u(C,E,c,d,h))){j=!1;break}}return h.delete(o),h.delete(l),j}return iA=a,iA}var aA,fL;function Ege(){if(fL)return aA;fL=1;var t=xd(),e=t.Uint8Array;return aA=e,aA}var oA,mL;function Pge(){if(mL)return oA;mL=1;function t(e){var r=-1,s=Array(e.size);return e.forEach(function(i,a){s[++r]=[a,i]}),s}return oA=t,oA}var lA,pL;function s_(){if(pL)return lA;pL=1;function t(e){var r=-1,s=Array(e.size);return e.forEach(function(i){s[++r]=i}),s}return lA=t,lA}var cA,gL;function Tge(){if(gL)return cA;gL=1;var t=Z0(),e=Ege(),r=WT(),s=fV(),i=Pge(),a=s_(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",j="[object DataView]",w=t?t.prototype:void 0,C=w?w.valueOf:void 0;function E(N,A,_,k,F,I,T){switch(_){case j:if(N.byteLength!=A.byteLength||N.byteOffset!=A.byteOffset)return!1;N=N.buffer,A=A.buffer;case b:return!(N.byteLength!=A.byteLength||!I(new e(N),new e(A)));case c:case d:case f:return r(+N,+A);case u:return N.name==A.name&&N.message==A.message;case p:case v:return N==A+"";case h:var R=i;case y:var O=k&o;if(R||(R=a),N.size!=A.size&&!O)return!1;var z=T.get(N);if(z)return z==A;k|=l,T.set(N,A);var q=s(R(N),R(A),k,F,I,T);return T.delete(N),q;case g:if(C)return C.call(N)==C.call(A)}return!1}return cA=E,cA}var dA,vL;function mV(){if(vL)return dA;vL=1;function t(e,r){for(var s=-1,i=r.length,a=e.length;++s<i;)e[a+s]=r[s];return e}return dA=t,dA}var uA,xL;function _ge(){if(xL)return uA;xL=1;var t=mV(),e=uo();function r(s,i,a){var o=i(s);return e(s)?o:t(o,a(s))}return uA=r,uA}var hA,yL;function Ige(){if(yL)return hA;yL=1;function t(e,r){for(var s=-1,i=e==null?0:e.length,a=0,o=[];++s<i;){var l=e[s];r(l,s,e)&&(o[a++]=l)}return o}return hA=t,hA}var fA,bL;function Dge(){if(bL)return fA;bL=1;function t(){return[]}return fA=t,fA}var mA,jL;function kge(){if(jL)return mA;jL=1;var t=Ige(),e=Dge(),r=Object.prototype,s=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return s.call(o,l)}))}:e;return mA=a,mA}var pA,wL;function Oge(){if(wL)return pA;wL=1;function t(e,r){for(var s=-1,i=Array(e);++s<e;)i[s]=r(s);return i}return pA=t,pA}var gA,NL;function Rge(){if(NL)return gA;NL=1;var t=Cu(),e=Eu(),r="[object Arguments]";function s(i){return e(i)&&t(i)==r}return gA=s,gA}var vA,SL;function i_(){if(SL)return vA;SL=1;var t=Rge(),e=Eu(),r=Object.prototype,s=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&s.call(o,"callee")&&!i.call(o,"callee")};return vA=a,vA}var ox={exports:{}},xA,AL;function Lge(){if(AL)return xA;AL=1;function t(){return!1}return xA=t,xA}ox.exports;var CL;function pV(){return CL||(CL=1,function(t,e){var r=xd(),s=Lge(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;t.exports=d}(ox,ox.exports)),ox.exports}var yA,EL;function a_(){if(EL)return yA;EL=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(s,i){var a=typeof s;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<i}return yA=r,yA}var bA,PL;function o_(){if(PL)return bA;PL=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return bA=e,bA}var jA,TL;function Mge(){if(TL)return jA;TL=1;var t=Cu(),e=o_(),r=Eu(),s="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",h="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",j="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",N="[object Int32Array]",A="[object Uint8Array]",_="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",I={};I[j]=I[w]=I[C]=I[E]=I[N]=I[A]=I[_]=I[k]=I[F]=!0,I[s]=I[i]=I[g]=I[a]=I[b]=I[o]=I[l]=I[c]=I[d]=I[u]=I[h]=I[f]=I[p]=I[y]=I[v]=!1;function T(R){return r(R)&&e(R.length)&&!!I[t(R)]}return jA=T,jA}var wA,_L;function gV(){if(_L)return wA;_L=1;function t(e){return function(r){return e(r)}}return wA=t,wA}var lx={exports:{}};lx.exports;var IL;function Fge(){return IL||(IL=1,function(t,e){var r=RU(),s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===s,o=a&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(lx,lx.exports)),lx.exports}var NA,DL;function vV(){if(DL)return NA;DL=1;var t=Mge(),e=gV(),r=Fge(),s=r&&r.isTypedArray,i=s?e(s):t;return NA=i,NA}var SA,kL;function $ge(){if(kL)return SA;kL=1;var t=Oge(),e=i_(),r=uo(),s=pV(),i=a_(),a=vV(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var h=r(d),f=!h&&e(d),p=!h&&!f&&s(d),y=!h&&!f&&!p&&a(d),v=h||f||p||y,g=v?t(d.length,String):[],b=g.length;for(var j in d)(u||l.call(d,j))&&!(v&&(j=="length"||p&&(j=="offset"||j=="parent")||y&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||i(j,b)))&&g.push(j);return g}return SA=c,SA}var AA,OL;function Bge(){if(OL)return AA;OL=1;var t=Object.prototype;function e(r){var s=r&&r.constructor,i=typeof s=="function"&&s.prototype||t;return r===i}return AA=e,AA}var CA,RL;function xV(){if(RL)return CA;RL=1;function t(e,r){return function(s){return e(r(s))}}return CA=t,CA}var EA,LL;function zge(){if(LL)return EA;LL=1;var t=xV(),e=t(Object.keys,Object);return EA=e,EA}var PA,ML;function qge(){if(ML)return PA;ML=1;var t=Bge(),e=zge(),r=Object.prototype,s=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var l in Object(a))s.call(a,l)&&l!="constructor"&&o.push(l);return o}return PA=i,PA}var TA,FL;function Q0(){if(FL)return TA;FL=1;var t=HT(),e=o_();function r(s){return s!=null&&e(s.length)&&!t(s)}return TA=r,TA}var _A,$L;function sw(){if($L)return _A;$L=1;var t=$ge(),e=qge(),r=Q0();function s(i){return r(i)?t(i):e(i)}return _A=s,_A}var IA,BL;function Uge(){if(BL)return IA;BL=1;var t=_ge(),e=kge(),r=sw();function s(i){return t(i,r,e)}return IA=s,IA}var DA,zL;function Vge(){if(zL)return DA;zL=1;var t=Uge(),e=1,r=Object.prototype,s=r.hasOwnProperty;function i(a,o,l,c,d,u){var h=l&e,f=t(a),p=f.length,y=t(o),v=y.length;if(p!=v&&!h)return!1;for(var g=p;g--;){var b=f[g];if(!(h?b in o:s.call(o,b)))return!1}var j=u.get(a),w=u.get(o);if(j&&w)return j==o&&w==a;var C=!0;u.set(a,o),u.set(o,a);for(var E=h;++g<p;){b=f[g];var N=a[b],A=o[b];if(c)var _=h?c(A,N,b,o,a,u):c(N,A,b,a,o,u);if(!(_===void 0?N===A||d(N,A,l,c,u):_)){C=!1;break}E||(E=b=="constructor")}if(C&&!E){var k=a.constructor,F=o.constructor;k!=F&&"constructor"in a&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F)&&(C=!1)}return u.delete(a),u.delete(o),C}return DA=i,DA}var kA,qL;function Hge(){if(qL)return kA;qL=1;var t=Ym(),e=xd(),r=t(e,"DataView");return kA=r,kA}var OA,UL;function Wge(){if(UL)return OA;UL=1;var t=Ym(),e=xd(),r=t(e,"Promise");return OA=r,OA}var RA,VL;function yV(){if(VL)return RA;VL=1;var t=Ym(),e=xd(),r=t(e,"Set");return RA=r,RA}var LA,HL;function Gge(){if(HL)return LA;HL=1;var t=Ym(),e=xd(),r=t(e,"WeakMap");return LA=r,LA}var MA,WL;function Kge(){if(WL)return MA;WL=1;var t=Hge(),e=GT(),r=Wge(),s=yV(),i=Gge(),a=Cu(),o=LU(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",f="[object DataView]",p=o(t),y=o(e),v=o(r),g=o(s),b=o(i),j=a;return(t&&j(new t(new ArrayBuffer(1)))!=f||e&&j(new e)!=l||r&&j(r.resolve())!=d||s&&j(new s)!=u||i&&j(new i)!=h)&&(j=function(w){var C=a(w),E=C==c?w.constructor:void 0,N=E?o(E):"";if(N)switch(N){case p:return f;case y:return l;case v:return d;case g:return u;case b:return h}return C}),MA=j,MA}var FA,GL;function Yge(){if(GL)return FA;GL=1;var t=cV(),e=fV(),r=Tge(),s=Vge(),i=Kge(),a=uo(),o=pV(),l=vV(),c=1,d="[object Arguments]",u="[object Array]",h="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(v,g,b,j,w,C){var E=a(v),N=a(g),A=E?u:i(v),_=N?u:i(g);A=A==d?h:A,_=_==d?h:_;var k=A==h,F=_==h,I=A==_;if(I&&o(v)){if(!o(g))return!1;E=!0,k=!1}if(I&&!k)return C||(C=new t),E||l(v)?e(v,g,b,j,w,C):r(v,g,A,b,j,w,C);if(!(b&c)){var T=k&&p.call(v,"__wrapped__"),R=F&&p.call(g,"__wrapped__");if(T||R){var O=T?v.value():v,z=R?g.value():g;return C||(C=new t),w(O,z,b,j,C)}}return I?(C||(C=new t),s(v,g,b,j,w,C)):!1}return FA=y,FA}var $A,KL;function l_(){if(KL)return $A;KL=1;var t=Yge(),e=Eu();function r(s,i,a,o,l){return s===i?!0:s==null||i==null||!e(s)&&!e(i)?s!==s&&i!==i:t(s,i,a,o,r,l)}return $A=r,$A}var BA,YL;function Xge(){if(YL)return BA;YL=1;var t=cV(),e=l_(),r=1,s=2;function i(a,o,l,c){var d=l.length,u=d,h=!c;if(a==null)return!u;for(a=Object(a);d--;){var f=l[d];if(h&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++d<u;){f=l[d];var p=f[0],y=a[p],v=f[1];if(h&&f[2]){if(y===void 0&&!(p in a))return!1}else{var g=new t;if(c)var b=c(y,v,p,a,o,g);if(!(b===void 0?e(v,y,r|s,c,g):b))return!1}}return!0}return BA=i,BA}var zA,XL;function bV(){if(XL)return zA;XL=1;var t=hf();function e(r){return r===r&&!t(r)}return zA=e,zA}var qA,ZL;function Zge(){if(ZL)return qA;ZL=1;var t=bV(),e=sw();function r(s){for(var i=e(s),a=i.length;a--;){var o=i[a],l=s[o];i[a]=[o,l,t(l)]}return i}return qA=r,qA}var UA,QL;function jV(){if(QL)return UA;QL=1;function t(e,r){return function(s){return s==null?!1:s[e]===r&&(r!==void 0||e in Object(s))}}return UA=t,UA}var VA,JL;function Qge(){if(JL)return VA;JL=1;var t=Xge(),e=Zge(),r=jV();function s(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return VA=s,VA}var HA,eM;function Jge(){if(eM)return HA;eM=1;function t(e,r){return e!=null&&r in Object(e)}return HA=t,HA}var WA,tM;function eve(){if(tM)return WA;tM=1;var t=$U(),e=i_(),r=uo(),s=a_(),i=o_(),a=Jj();function o(l,c,d){c=t(c,l);for(var u=-1,h=c.length,f=!1;++u<h;){var p=a(c[u]);if(!(f=l!=null&&d(l,p)))break;l=l[p]}return f||++u!=h?f:(h=l==null?0:l.length,!!h&&i(h)&&s(p,h)&&(r(l)||e(l)))}return WA=o,WA}var GA,rM;function tve(){if(rM)return GA;rM=1;var t=Jge(),e=eve();function r(s,i){return s!=null&&e(s,i,t)}return GA=r,GA}var KA,nM;function rve(){if(nM)return KA;nM=1;var t=l_(),e=BU(),r=tve(),s=VT(),i=bV(),a=jV(),o=Jj(),l=1,c=2;function d(u,h){return s(u)&&i(h)?a(o(u),h):function(f){var p=e(f,u);return p===void 0&&p===h?r(f,u):t(h,p,l|c)}}return KA=d,KA}var YA,sM;function cv(){if(sM)return YA;sM=1;function t(e){return e}return YA=t,YA}var XA,iM;function nve(){if(iM)return XA;iM=1;function t(e){return function(r){return r?.[e]}}return XA=t,XA}var ZA,aM;function sve(){if(aM)return ZA;aM=1;var t=XT();function e(r){return function(s){return t(s,r)}}return ZA=e,ZA}var QA,oM;function ive(){if(oM)return QA;oM=1;var t=nve(),e=sve(),r=VT(),s=Jj();function i(a){return r(a)?t(s(a)):e(a)}return QA=i,QA}var JA,lM;function yd(){if(lM)return JA;lM=1;var t=Qge(),e=rve(),r=cv(),s=uo(),i=ive();function a(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?s(o)?e(o[0],o[1]):t(o):i(o)}return JA=a,JA}var e5,cM;function wV(){if(cM)return e5;cM=1;function t(e,r,s,i){for(var a=e.length,o=s+(i?1:-1);i?o--:++o<a;)if(r(e[o],o,e))return o;return-1}return e5=t,e5}var t5,dM;function ave(){if(dM)return t5;dM=1;function t(e){return e!==e}return t5=t,t5}var r5,uM;function ove(){if(uM)return r5;uM=1;function t(e,r,s){for(var i=s-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return r5=t,r5}var n5,hM;function lve(){if(hM)return n5;hM=1;var t=wV(),e=ave(),r=ove();function s(i,a,o){return a===a?r(i,a,o):t(i,e,o)}return n5=s,n5}var s5,fM;function cve(){if(fM)return s5;fM=1;var t=lve();function e(r,s){var i=r==null?0:r.length;return!!i&&t(r,s,0)>-1}return s5=e,s5}var i5,mM;function dve(){if(mM)return i5;mM=1;function t(e,r,s){for(var i=-1,a=e==null?0:e.length;++i<a;)if(s(r,e[i]))return!0;return!1}return i5=t,i5}var a5,pM;function uve(){if(pM)return a5;pM=1;function t(){}return a5=t,a5}var o5,gM;function hve(){if(gM)return o5;gM=1;var t=yV(),e=uve(),r=s_(),s=1/0,i=t&&1/r(new t([,-0]))[1]==s?function(a){return new t(a)}:e;return o5=i,o5}var l5,vM;function fve(){if(vM)return l5;vM=1;var t=dV(),e=cve(),r=dve(),s=hV(),i=hve(),a=s_(),o=200;function l(c,d,u){var h=-1,f=e,p=c.length,y=!0,v=[],g=v;if(u)y=!1,f=r;else if(p>=o){var b=d?null:i(c);if(b)return a(b);y=!1,f=s,g=new t}else g=d?[]:v;e:for(;++h<p;){var j=c[h],w=d?d(j):j;if(j=u||j!==0?j:0,y&&w===w){for(var C=g.length;C--;)if(g[C]===w)continue e;d&&g.push(w),v.push(j)}else f(g,w,u)||(g!==v&&g.push(w),v.push(j))}return v}return l5=l,l5}var c5,xM;function mve(){if(xM)return c5;xM=1;var t=yd(),e=fve();function r(s,i){return s&&s.length?e(s,t(i,2)):[]}return c5=r,c5}var pve=mve();const yM=Kr(pve);function NV(t,e,r){return e===!0?yM(t,r):hr(e)?yM(t,e):t}function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}var gve=["ref"];function bM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function eu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bM(Object(r),!0).forEach(function(s){iw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jM(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,AV(s.key),s)}}function xve(t,e,r){return e&&jM(t.prototype,e),r&&jM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yve(t,e,r){return e=b1(e),bve(t,SV()?Reflect.construct(e,r||[],b1(t).constructor):e.apply(t,r))}function bve(t,e){if(e&&(Sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jve(t)}function jve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SV=function(){return!!t})()}function b1(t){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b1(t)}function wve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nP(t,e)}function nP(t,e){return nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},nP(t,e)}function iw(t,e,r){return e=AV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AV(t){var e=Nve(t,"string");return Sg(e)=="symbol"?e:e+""}function Nve(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Sg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Sve(t,e){if(t==null)return{};var r=Ave(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function Ave(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function Cve(t){return t.value}function Eve(t,e){if(be.isValidElement(t))return be.cloneElement(t,e);if(typeof t=="function")return be.createElement(t,e);e.ref;var r=Sve(e,gve);return be.createElement(n_,r)}var wM=1,lg=function(t){function e(){var r;vve(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=yve(this,e,[].concat(i)),iw(r,"lastBoundingBox",{width:-1,height:-1}),r}return wve(e,t),xve(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>wM||Math.abs(i.height-this.lastBoundingBox.height)>wM)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?eu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,u=i.chartHeight,h,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();h={left:((d||0)-p.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();f={top:((u||0)-y.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return eu(eu({},h),f)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,u=i.payload,h=eu(eu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return be.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){s.wrapperNode=p}},Eve(a,eu(eu({},this.props),{},{payload:NV(u,d,Cve)})))}}],[{key:"getWithHeight",value:function(s,i){var a=eu(eu({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&jt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(S.PureComponent);iw(lg,"displayName","Legend");iw(lg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var d5,NM;function Pve(){if(NM)return d5;NM=1;var t=Z0(),e=i_(),r=uo(),s=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(s&&a&&a[s])}return d5=i,d5}var u5,SM;function CV(){if(SM)return u5;SM=1;var t=mV(),e=Pve();function r(s,i,a,o,l){var c=-1,d=s.length;for(a||(a=e),l||(l=[]);++c<d;){var u=s[c];i>0&&a(u)?i>1?r(u,i-1,a,o,l):t(l,u):o||(l[l.length]=u)}return l}return u5=r,u5}var h5,AM;function Tve(){if(AM)return h5;AM=1;function t(e){return function(r,s,i){for(var a=-1,o=Object(r),l=i(r),c=l.length;c--;){var d=l[e?c:++a];if(s(o[d],d,o)===!1)break}return r}}return h5=t,h5}var f5,CM;function _ve(){if(CM)return f5;CM=1;var t=Tve(),e=t();return f5=e,f5}var m5,EM;function EV(){if(EM)return m5;EM=1;var t=_ve(),e=sw();function r(s,i){return s&&t(s,i,e)}return m5=r,m5}var p5,PM;function Ive(){if(PM)return p5;PM=1;var t=Q0();function e(r,s){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var o=i.length,l=s?o:-1,c=Object(i);(s?l--:++l<o)&&a(c[l],l,c)!==!1;);return i}}return p5=e,p5}var g5,TM;function c_(){if(TM)return g5;TM=1;var t=EV(),e=Ive(),r=e(t);return g5=r,g5}var v5,_M;function PV(){if(_M)return v5;_M=1;var t=c_(),e=Q0();function r(s,i){var a=-1,o=e(s)?Array(s.length):[];return t(s,function(l,c,d){o[++a]=i(l,c,d)}),o}return v5=r,v5}var x5,IM;function Dve(){if(IM)return x5;IM=1;function t(e,r){var s=e.length;for(e.sort(r);s--;)e[s]=e[s].value;return e}return x5=t,x5}var y5,DM;function kve(){if(DM)return y5;DM=1;var t=av();function e(r,s){if(r!==s){var i=r!==void 0,a=r===null,o=r===r,l=t(r),c=s!==void 0,d=s===null,u=s===s,h=t(s);if(!d&&!h&&!l&&r>s||l&&c&&u&&!d&&!h||a&&c&&u||!i&&u||!o)return 1;if(!a&&!l&&!h&&r<s||h&&i&&o&&!a&&!l||d&&i&&o||!c&&o||!u)return-1}return 0}return y5=e,y5}var b5,kM;function Ove(){if(kM)return b5;kM=1;var t=kve();function e(r,s,i){for(var a=-1,o=r.criteria,l=s.criteria,c=o.length,d=i.length;++a<c;){var u=t(o[a],l[a]);if(u){if(a>=d)return u;var h=i[a];return u*(h=="desc"?-1:1)}}return r.index-s.index}return b5=e,b5}var j5,OM;function Rve(){if(OM)return j5;OM=1;var t=YT(),e=XT(),r=yd(),s=PV(),i=Dve(),a=gV(),o=Ove(),l=cv(),c=uo();function d(u,h,f){h.length?h=t(h,function(v){return c(v)?function(g){return e(g,v.length===1?v[0]:v)}:v}):h=[l];var p=-1;h=t(h,a(r));var y=s(u,function(v,g,b){var j=t(h,function(w){return w(v)});return{criteria:j,index:++p,value:v}});return i(y,function(v,g){return o(v,g,f)})}return j5=d,j5}var w5,RM;function Lve(){if(RM)return w5;RM=1;function t(e,r,s){switch(s.length){case 0:return e.call(r);case 1:return e.call(r,s[0]);case 2:return e.call(r,s[0],s[1]);case 3:return e.call(r,s[0],s[1],s[2])}return e.apply(r,s)}return w5=t,w5}var N5,LM;function Mve(){if(LM)return N5;LM=1;var t=Lve(),e=Math.max;function r(s,i,a){return i=e(i===void 0?s.length-1:i,0),function(){for(var o=arguments,l=-1,c=e(o.length-i,0),d=Array(c);++l<c;)d[l]=o[i+l];l=-1;for(var u=Array(i+1);++l<i;)u[l]=o[l];return u[i]=a(d),t(s,this,u)}}return N5=r,N5}var S5,MM;function Fve(){if(MM)return S5;MM=1;function t(e){return function(){return e}}return S5=t,S5}var A5,FM;function TV(){if(FM)return A5;FM=1;var t=Ym(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return A5=e,A5}var C5,$M;function $ve(){if($M)return C5;$M=1;var t=Fve(),e=TV(),r=cv(),s=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return C5=s,C5}var E5,BM;function Bve(){if(BM)return E5;BM=1;var t=800,e=16,r=Date.now;function s(i){var a=0,o=0;return function(){var l=r(),c=e-(l-o);if(o=l,c>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return E5=s,E5}var P5,zM;function zve(){if(zM)return P5;zM=1;var t=$ve(),e=Bve(),r=e(t);return P5=r,P5}var T5,qM;function qve(){if(qM)return T5;qM=1;var t=cv(),e=Mve(),r=zve();function s(i,a){return r(e(i,a,t),i+"")}return T5=s,T5}var _5,UM;function aw(){if(UM)return _5;UM=1;var t=WT(),e=Q0(),r=a_(),s=hf();function i(a,o,l){if(!s(l))return!1;var c=typeof o;return(c=="number"?e(l)&&r(o,l.length):c=="string"&&o in l)?t(l[o],a):!1}return _5=i,_5}var I5,VM;function Uve(){if(VM)return I5;VM=1;var t=CV(),e=Rve(),r=qve(),s=aw(),i=r(function(a,o){if(a==null)return[];var l=o.length;return l>1&&s(a,o[0],o[1])?o=[]:l>2&&s(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return I5=i,I5}var Vve=Uve();const d_=Kr(Vve);function Qx(t){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qx(t)}function sP(){return sP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},sP.apply(this,arguments)}function Hve(t,e){return Yve(t)||Kve(t,e)||Gve(t,e)||Wve()}function Wve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gve(t,e){if(t){if(typeof t=="string")return HM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HM(t,e)}}function HM(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Kve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Yve(t){if(Array.isArray(t))return t}function WM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function D5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WM(Object(r),!0).forEach(function(s){Xve(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Xve(t,e,r){return e=Zve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zve(t){var e=Qve(t,"string");return Qx(e)=="symbol"?e:e+""}function Qve(t,e){if(Qx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Qx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jve(t){return Array.isArray(t)&&li(t[0])&&li(t[1])?t.join(" ~ "):t}var exe=function(e){var r=e.separator,s=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,h=e.formatter,f=e.itemSorter,p=e.wrapperClassName,y=e.labelClassName,v=e.label,g=e.labelFormatter,b=e.accessibilityLayer,j=b===void 0?!1:b,w=function(){if(u&&u.length){var T={padding:0,margin:0},R=(f?d_(u,f):u).map(function(O,z){if(O.type==="none")return null;var q=D5({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},l),B=O.formatter||h||Jve,K=O.value,Y=O.name,J=K,H=Y;if(B&&J!=null&&H!=null){var $=B(K,Y,O,z,u);if(Array.isArray($)){var W=Hve($,2);J=W[0],H=W[1]}else J=$}return be.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:q},li(H)?be.createElement("span",{className:"recharts-tooltip-item-name"},H):null,li(H)?be.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,be.createElement("span",{className:"recharts-tooltip-item-value"},J),be.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return be.createElement("ul",{className:"recharts-tooltip-item-list",style:T},R)}return null},C=D5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),E=D5({margin:0},d),N=!jr(v),A=N?v:"",_=Ir("recharts-default-tooltip",p),k=Ir("recharts-tooltip-label",y);N&&g&&u!==void 0&&u!==null&&(A=g(v,u));var F=j?{role:"status","aria-live":"assertive"}:{};return be.createElement("div",sP({className:_,style:C},F),be.createElement("p",{className:k,style:E},be.isValidElement(A)?A:"".concat(A)),w())};function Jx(t){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jx(t)}function vb(t,e,r){return e=txe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function txe(t){var e=rxe(t,"string");return Jx(e)=="symbol"?e:e+""}function rxe(t,e){if(Jx(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Jx(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kv="recharts-tooltip-wrapper",nxe={visibility:"hidden"};function sxe(t){var e=t.coordinate,r=t.translateX,s=t.translateY;return Ir(Kv,vb(vb(vb(vb({},"".concat(Kv,"-right"),jt(r)&&e&&jt(e.x)&&r>=e.x),"".concat(Kv,"-left"),jt(r)&&e&&jt(e.x)&&r<e.x),"".concat(Kv,"-bottom"),jt(s)&&e&&jt(e.y)&&s>=e.y),"".concat(Kv,"-top"),jt(s)&&e&&jt(e.y)&&s<e.y))}function GM(t){var e=t.allowEscapeViewBox,r=t.coordinate,s=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(a&&jt(a[s]))return a[s];var u=r[s]-l-i,h=r[s]+i;if(e[s])return o[s]?u:h;if(o[s]){var f=u,p=c[s];return f<p?Math.max(h,c[s]):Math.max(u,c[s])}var y=h+l,v=c[s]+d;return y>v?Math.max(u,c[s]):Math.max(h,c[s])}function ixe(t){var e=t.translateX,r=t.translateY,s=t.useTranslate3d;return{transform:s?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function axe(t){var e=t.allowEscapeViewBox,r=t.coordinate,s=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,h;return o.height>0&&o.width>0&&r?(u=GM({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=GM({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=ixe({translateX:u,translateY:h,useTranslate3d:l})):d=nxe,{cssProperties:d,cssClasses:sxe({translateX:u,translateY:h,coordinate:r})}}function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function KM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function YM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(r),!0).forEach(function(s){aP(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function oxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lxe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,IV(s.key),s)}}function cxe(t,e,r){return e&&lxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dxe(t,e,r){return e=j1(e),uxe(t,_V()?Reflect.construct(e,r||[],j1(t).constructor):e.apply(t,r))}function uxe(t,e){if(e&&(Ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hxe(t)}function hxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _V(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_V=function(){return!!t})()}function j1(t){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j1(t)}function fxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iP(t,e)}function iP(t,e){return iP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},iP(t,e)}function aP(t,e,r){return e=IV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IV(t){var e=mxe(t,"string");return Ag(e)=="symbol"?e:e+""}function mxe(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ag(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var XM=1,pxe=function(t){function e(){var r;oxe(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=dxe(this,e,[].concat(i)),aP(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),aP(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return fxe(e,t),cxe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>XM||Math.abs(s.height-this.state.lastBoundingBox.height)>XM)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,u=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,p=i.offset,y=i.position,v=i.reverseDirection,g=i.useTranslate3d,b=i.viewBox,j=i.wrapperStyle,w=axe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),C=w.cssClasses,E=w.cssProperties,N=YM(YM({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},j);return be.createElement("div",{tabIndex:-1,className:C,style:N,ref:function(_){s.wrapperNode=_}},d)}}])}(S.PureComponent),gxe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ff={isSsr:gxe()};function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function ZM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function QM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(r),!0).forEach(function(s){u_(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZM(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xxe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,kV(s.key),s)}}function yxe(t,e,r){return e&&xxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bxe(t,e,r){return e=w1(e),jxe(t,DV()?Reflect.construct(e,r||[],w1(t).constructor):e.apply(t,r))}function jxe(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wxe(t)}function wxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DV=function(){return!!t})()}function w1(t){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w1(t)}function Nxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oP(t,e)}function oP(t,e){return oP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},oP(t,e)}function u_(t,e,r){return e=kV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kV(t){var e=Sxe(t,"string");return Cg(e)=="symbol"?e:e+""}function Sxe(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Cg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Axe(t){return t.dataKey}function Cxe(t,e){return be.isValidElement(t)?be.cloneElement(t,e):typeof t=="function"?be.createElement(t,e):be.createElement(exe,e)}var Ro=function(t){function e(){return vxe(this,e),bxe(this,e,arguments)}return Nxe(e,t),yxe(e,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,u=i.coordinate,h=i.filterNull,f=i.isAnimationActive,p=i.offset,y=i.payload,v=i.payloadUniqBy,g=i.position,b=i.reverseDirection,j=i.useTranslate3d,w=i.viewBox,C=i.wrapperStyle,E=y??[];h&&E.length&&(E=NV(y.filter(function(A){return A.value!=null&&(A.hide!==!0||s.props.includeHidden)}),v,Axe));var N=E.length>0;return be.createElement(pxe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:u,hasPayload:N,offset:p,position:g,reverseDirection:b,useTranslate3d:j,viewBox:w,wrapperStyle:C},Cxe(d,QM(QM({},this.props),{},{payload:E})))}}])}(S.PureComponent);u_(Ro,"displayName","Tooltip");u_(Ro,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ff.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var k5,JM;function Exe(){if(JM)return k5;JM=1;var t=xd(),e=function(){return t.Date.now()};return k5=e,k5}var O5,eF;function Pxe(){if(eF)return O5;eF=1;var t=/\s/;function e(r){for(var s=r.length;s--&&t.test(r.charAt(s)););return s}return O5=e,O5}var R5,tF;function Txe(){if(tF)return R5;tF=1;var t=Pxe(),e=/^\s+/;function r(s){return s&&s.slice(0,t(s)+1).replace(e,"")}return R5=r,R5}var L5,rF;function OV(){if(rF)return L5;rF=1;var t=Txe(),e=hf(),r=av(),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return s;if(e(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=e(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=t(d);var h=a.test(d);return h||o.test(d)?l(d.slice(2),h?2:8):i.test(d)?s:+d}return L5=c,L5}var M5,nF;function _xe(){if(nF)return M5;nF=1;var t=hf(),e=Exe(),r=OV(),s="Expected a function",i=Math.max,a=Math.min;function o(l,c,d){var u,h,f,p,y,v,g=0,b=!1,j=!1,w=!0;if(typeof l!="function")throw new TypeError(s);c=r(c)||0,t(d)&&(b=!!d.leading,j="maxWait"in d,f=j?i(r(d.maxWait)||0,c):f,w="trailing"in d?!!d.trailing:w);function C(R){var O=u,z=h;return u=h=void 0,g=R,p=l.apply(z,O),p}function E(R){return g=R,y=setTimeout(_,c),b?C(R):p}function N(R){var O=R-v,z=R-g,q=c-O;return j?a(q,f-z):q}function A(R){var O=R-v,z=R-g;return v===void 0||O>=c||O<0||j&&z>=f}function _(){var R=e();if(A(R))return k(R);y=setTimeout(_,N(R))}function k(R){return y=void 0,w&&u?C(R):(u=h=void 0,p)}function F(){y!==void 0&&clearTimeout(y),g=0,u=v=h=y=void 0}function I(){return y===void 0?p:k(e())}function T(){var R=e(),O=A(R);if(u=arguments,h=this,v=R,O){if(y===void 0)return E(v);if(j)return clearTimeout(y),y=setTimeout(_,c),C(v)}return y===void 0&&(y=setTimeout(_,c)),p}return T.cancel=F,T.flush=I,T}return M5=o,M5}var F5,sF;function Ixe(){if(sF)return F5;sF=1;var t=_xe(),e=hf(),r="Expected a function";function s(i,a,o){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(r);return e(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),t(i,a,{leading:l,maxWait:a,trailing:c})}return F5=s,F5}var Dxe=Ixe();const RV=Kr(Dxe);function e0(t){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}function iF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function xb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(r),!0).forEach(function(s){kxe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iF(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function kxe(t,e,r){return e=Oxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oxe(t){var e=Rxe(t,"string");return e0(e)=="symbol"?e:e+""}function Rxe(t,e){if(e0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(e0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lxe(t,e){return Bxe(t)||$xe(t,e)||Fxe(t,e)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fxe(t,e){if(t){if(typeof t=="string")return aF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aF(t,e)}}function aF(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function $xe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Bxe(t){if(Array.isArray(t))return t}var yb=S.forwardRef(function(t,e){var r=t.aspect,s=t.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,h=t.minHeight,f=t.maxHeight,p=t.children,y=t.debounce,v=y===void 0?0:y,g=t.id,b=t.className,j=t.onResize,w=t.style,C=w===void 0?{}:w,E=S.useRef(null),N=S.useRef();N.current=j,S.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var A=S.useState({containerWidth:i.width,containerHeight:i.height}),_=Lxe(A,2),k=_[0],F=_[1],I=S.useCallback(function(R,O){F(function(z){var q=Math.round(R),B=Math.round(O);return z.containerWidth===q&&z.containerHeight===B?z:{containerWidth:q,containerHeight:B}})},[]);S.useEffect(function(){var R=function(Y){var J,H=Y[0].contentRect,$=H.width,W=H.height;I($,W),(J=N.current)===null||J===void 0||J.call(N,$,W)};v>0&&(R=RV(R,v,{trailing:!0,leading:!1}));var O=new ResizeObserver(R),z=E.current.getBoundingClientRect(),q=z.width,B=z.height;return I(q,B),O.observe(E.current),function(){O.disconnect()}},[I,v]);var T=S.useMemo(function(){var R=k.containerWidth,O=k.containerHeight;if(R<0||O<0)return null;oc(dm(o)||dm(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),oc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var z=dm(o)?R:o,q=dm(c)?O:c;r&&r>0&&(z?q=z/r:q&&(z=q*r),f&&q>f&&(q=f)),oc(z>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,q,o,c,u,h,r);var B=!Array.isArray(p)&&fu(p.type).endsWith("Chart");return be.Children.map(p,function(K){return be.isValidElement(K)?S.cloneElement(K,xb({width:z,height:q},B?{style:xb({height:"100%",width:"100%",maxHeight:q,maxWidth:z},K.props.style)}:{})):K})},[r,p,c,f,h,u,k,o]);return be.createElement("div",{id:g?"".concat(g):void 0,className:Ir("recharts-responsive-container",b),style:xb(xb({},C),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:E},T)}),ow=function(e){return null};ow.displayName="Cell";function t0(t){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t0(t)}function oF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function lP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(r),!0).forEach(function(s){zxe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oF(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function zxe(t,e,r){return e=qxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qxe(t){var e=Uxe(t,"string");return t0(e)=="symbol"?e:e+""}function Uxe(t,e){if(t0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(t0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bp={widthCache:{},cacheCount:0},Vxe=2e3,Hxe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lF="recharts_measurement_span";function Wxe(t){var e=lP({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Sx=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ff.isSsr)return{width:0,height:0};var s=Wxe(r),i=JSON.stringify({text:e,copyStyle:s});if(Bp.widthCache[i])return Bp.widthCache[i];try{var a=document.getElementById(lF);a||(a=document.createElement("span"),a.setAttribute("id",lF),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=lP(lP({},Hxe),s);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return Bp.widthCache[i]=c,++Bp.cacheCount>Vxe&&(Bp.cacheCount=0,Bp.widthCache={}),c}catch{return{width:0,height:0}}},Gxe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function r0(t){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(t)}function N1(t,e){return Zxe(t)||Xxe(t,e)||Yxe(t,e)||Kxe()}function Kxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yxe(t,e){if(t){if(typeof t=="string")return cF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cF(t,e)}}function cF(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Xxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Zxe(t){if(Array.isArray(t))return t}function Qxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dF(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,e0e(s.key),s)}}function Jxe(t,e,r){return e&&dF(t.prototype,e),r&&dF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function e0e(t){var e=t0e(t,"string");return r0(e)=="symbol"?e:e+""}function t0e(t,e){if(r0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(r0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,n0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,LV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},s0e=Object.keys(LV),Jp="NaN";function i0e(t,e){return t*LV[e]}var bb=function(){function t(e,r){Qxe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!r0e.test(r)&&(this.num=NaN,this.unit=""),s0e.includes(r)&&(this.num=i0e(e,r),this.unit="px")}return Jxe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,i=(s=n0e.exec(r))!==null&&s!==void 0?s:[],a=N1(i,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function MV(t){if(t.includes(Jp))return Jp;for(var e=t;e.includes("*")||e.includes("/");){var r,s=(r=uF.exec(e))!==null&&r!==void 0?r:[],i=N1(s,4),a=i[1],o=i[2],l=i[3],c=bb.parse(a??""),d=bb.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Jp;e=e.replace(uF,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=hF.exec(e))!==null&&h!==void 0?h:[],p=N1(f,4),y=p[1],v=p[2],g=p[3],b=bb.parse(y??""),j=bb.parse(g??""),w=v==="+"?b.add(j):b.subtract(j);if(w.isNaN())return Jp;e=e.replace(hF,w.toString())}return e}var fF=/\(([^()]*)\)/;function a0e(t){for(var e=t;e.includes("(");){var r=fF.exec(e),s=N1(r,2),i=s[1];e=e.replace(fF,MV(i))}return e}function o0e(t){var e=t.replace(/\s+/g,"");return e=a0e(e),e=MV(e),e}function l0e(t){try{return o0e(t)}catch{return Jp}}function $5(t){var e=l0e(t.slice(5,-1));return e===Jp?"":e}var c0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],d0e=["dx","dy","angle","className","breakAll"];function cP(){return cP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},cP.apply(this,arguments)}function mF(t,e){if(t==null)return{};var r=u0e(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function u0e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function pF(t,e){return p0e(t)||m0e(t,e)||f0e(t,e)||h0e()}function h0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(t,e){if(t){if(typeof t=="string")return gF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gF(t,e)}}function gF(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function m0e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function p0e(t){if(Array.isArray(t))return t}var FV=/[ \f\n\r\t\v\u2028\u2029]+/,$V=function(e){var r=e.children,s=e.breakAll,i=e.style;try{var a=[];jr(r)||(s?a=r.toString().split(""):a=r.toString().split(FV));var o=a.map(function(c){return{word:c,width:Sx(c,i).width}}),l=s?0:Sx(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},g0e=function(e,r,s,i,a){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=jt(o),h=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(q,B){var K=B.word,Y=B.width,J=q[q.length-1];if(J&&(i==null||a||J.width+Y+s<Number(i)))J.words.push(K),J.width+=Y+s;else{var H={words:[K],width:Y};q.push(H)}return q},[])},p=f(r),y=function(z){return z.reduce(function(q,B){return q.width>B.width?q:B})};if(!u)return p;for(var v="…",g=function(z){var q=h.slice(0,z),B=$V({breakAll:d,style:c,children:q+v}).wordsWithComputedWidth,K=f(B),Y=K.length>o||y(K).width>Number(i);return[Y,K]},b=0,j=h.length-1,w=0,C;b<=j&&w<=h.length-1;){var E=Math.floor((b+j)/2),N=E-1,A=g(N),_=pF(A,2),k=_[0],F=_[1],I=g(E),T=pF(I,1),R=T[0];if(!k&&!R&&(b=E+1),k&&R&&(j=E-1),!k&&R){C=F;break}w++}return C||p},vF=function(e){var r=jr(e)?[]:e.toString().split(FV);return[{words:r}]},v0e=function(e){var r=e.width,s=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((r||s)&&!ff.isSsr){var c,d,u=$V({breakAll:o,children:i,style:a});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return vF(i);return g0e({breakAll:o,children:i,maxLines:l,style:a},c,d,r,s)}return vF(i)},xF="#808080",Lm=function(e){var r=e.x,s=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,h=u===void 0?!1:u,f=e.textAnchor,p=f===void 0?"start":f,y=e.verticalAnchor,v=y===void 0?"end":y,g=e.fill,b=g===void 0?xF:g,j=mF(e,c0e),w=S.useMemo(function(){return v0e({breakAll:j.breakAll,children:j.children,maxLines:j.maxLines,scaleToFit:h,style:j.style,width:j.width})},[j.breakAll,j.children,j.maxLines,h,j.style,j.width]),C=j.dx,E=j.dy,N=j.angle,A=j.className,_=j.breakAll,k=mF(j,d0e);if(!li(s)||!li(a))return null;var F=s+(jt(C)?C:0),I=a+(jt(E)?E:0),T;switch(v){case"start":T=$5("calc(".concat(d,")"));break;case"middle":T=$5("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:T=$5("calc(".concat(w.length-1," * -").concat(l,")"));break}var R=[];if(h){var O=w[0].width,z=j.width;R.push("scale(".concat((jt(z)?z/O:1)/O,")"))}return N&&R.push("rotate(".concat(N,", ").concat(F,", ").concat(I,")")),R.length&&(k.transform=R.join(" ")),be.createElement("text",cP({},Wt(k,!0),{x:F,y:I,className:Ir("recharts-text",A),textAnchor:p,fill:b.includes("url")?xF:b}),w.map(function(q,B){var K=q.words.join(_?"":" ");return be.createElement("tspan",{x:F,dy:B===0?T:l,key:"".concat(K,"-").concat(B)},K)}))};function Wh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x0e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function h_(t){let e,r,s;t.length!==2?(e=Wh,r=(l,c)=>Wh(t(l),c),s=(l,c)=>t(l)-c):(e=t===Wh||t===x0e?t:y0e,r=t,s=t);function i(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function a(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=i(l,c,d,u-1);return h>d&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function y0e(){return 0}function BV(t){return t===null?NaN:+t}function*b0e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const j0e=h_(Wh),J0=j0e.right;h_(BV).center;class yF extends Map{constructor(e,r=S0e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[s,i]of e)this.set(s,i)}get(e){return super.get(bF(this,e))}has(e){return super.has(bF(this,e))}set(e,r){return super.set(w0e(this,e),r)}delete(e){return super.delete(N0e(this,e))}}function bF({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):r}function w0e({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):(t.set(s,r),r)}function N0e({_intern:t,_key:e},r){const s=e(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r}function S0e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function A0e(t=Wh){if(t===Wh)return zV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const s=t(e,r);return s||s===0?s:(t(r,r)===0)-(t(e,e)===0)}}function zV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const C0e=Math.sqrt(50),E0e=Math.sqrt(10),P0e=Math.sqrt(2);function S1(t,e,r){const s=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=C0e?10:a>=E0e?5:a>=P0e?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=r&&r<2?S1(t,e,r*2):[l,c,d]}function dP(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const s=e<t,[i,a,o]=s?S1(e,t,r):S1(t,e,r);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function uP(t,e,r){return e=+e,t=+t,r=+r,S1(t,e,r)[2]}function hP(t,e,r){e=+e,t=+t,r=+r;const s=e<t,i=s?uP(e,t,r):uP(t,e,r);return(s?-1:1)*(i<0?1/-i:i)}function jF(t,e){let r;for(const s of t)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function wF(t,e){let r;for(const s of t)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function qV(t,e,r=0,s=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(t.length-1,s)),!(r<=e&&e<=s))return t;for(i=i===void 0?zV:A0e(i);s>r;){if(s-r>600){const c=s-r+1,d=e-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(e-d*h/c+f)),y=Math.min(s,Math.floor(e+(c-d)*h/c+f));qV(t,e,p,y,i)}const a=t[e];let o=r,l=s;for(Yv(t,r,e),i(t[s],a)>0&&Yv(t,r,s);o<l;){for(Yv(t,o,l),++o,--l;i(t[o],a)<0;)++o;for(;i(t[l],a)>0;)--l}i(t[r],a)===0?Yv(t,r,l):(++l,Yv(t,l,s)),l<=e&&(r=l+1),e<=l&&(s=l-1)}return t}function Yv(t,e,r){const s=t[e];t[e]=t[r],t[r]=s}function T0e(t,e,r){if(t=Float64Array.from(b0e(t)),!(!(s=t.length)||isNaN(e=+e))){if(e<=0||s<2)return wF(t);if(e>=1)return jF(t);var s,i=(s-1)*e,a=Math.floor(i),o=jF(qV(t,a).subarray(0,a+1)),l=wF(t.subarray(a+1));return o+(l-o)*(i-a)}}function _0e(t,e,r=BV){if(!(!(s=t.length)||isNaN(e=+e))){if(e<=0||s<2)return+r(t[0],0,t);if(e>=1)return+r(t[s-1],s-1,t);var s,i=(s-1)*e,a=Math.floor(i),o=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return o+(l-o)*(i-a)}}function I0e(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var s=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++s<i;)a[s]=t+s*r;return a}function Al(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fP=Symbol("implicit");function f_(){var t=new yF,e=[],r=[],s=fP;function i(a){let o=t.get(a);if(o===void 0){if(s!==fP)return s;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new yF;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return f_(e,r).unknown(s)},Al.apply(i,arguments),i}function n0(){var t=f_().unknown(void 0),e=t.domain,r=t.range,s=0,i=1,a,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function h(){var f=e().length,p=i<s,y=p?i:s,v=p?s:i;a=(v-y)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),y+=(v-y-a*(f-c))*u,o=a*(1-c),l&&(y=Math.round(y),o=Math.round(o));var g=I0e(f).map(function(b){return y+a*b});return r(p?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([s,i]=f,s=+s,i=+i,h()):[s,i]},t.rangeRound=function(f){return[s,i]=f,s=+s,i=+i,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return n0(e(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(u)},Al.apply(h(),arguments)}function UV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return UV(e())},t}function Ax(){return UV(n0.apply(null,arguments).paddingInner(1))}function m_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function VV(t,e){var r=Object.create(t.prototype);for(var s in e)r[s]=e[s];return r}function ey(){}var s0=.7,A1=1/s0,cg="\\s*([+-]?\\d+)\\s*",i0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ld="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D0e=/^#([0-9a-f]{3,8})$/,k0e=new RegExp(`^rgb\\(${cg},${cg},${cg}\\)$`),O0e=new RegExp(`^rgb\\(${ld},${ld},${ld}\\)$`),R0e=new RegExp(`^rgba\\(${cg},${cg},${cg},${i0}\\)$`),L0e=new RegExp(`^rgba\\(${ld},${ld},${ld},${i0}\\)$`),M0e=new RegExp(`^hsl\\(${i0},${ld},${ld}\\)$`),F0e=new RegExp(`^hsla\\(${i0},${ld},${ld},${i0}\\)$`),NF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};m_(ey,a0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:SF,formatHex:SF,formatHex8:$0e,formatHsl:B0e,formatRgb:AF,toString:AF});function SF(){return this.rgb().formatHex()}function $0e(){return this.rgb().formatHex8()}function B0e(){return HV(this).formatHsl()}function AF(){return this.rgb().formatRgb()}function a0(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=D0e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?CF(e):r===3?new oo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?jb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?jb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=k0e.exec(t))?new oo(e[1],e[2],e[3],1):(e=O0e.exec(t))?new oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=R0e.exec(t))?jb(e[1],e[2],e[3],e[4]):(e=L0e.exec(t))?jb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=M0e.exec(t))?TF(e[1],e[2]/100,e[3]/100,1):(e=F0e.exec(t))?TF(e[1],e[2]/100,e[3]/100,e[4]):NF.hasOwnProperty(t)?CF(NF[t]):t==="transparent"?new oo(NaN,NaN,NaN,0):null}function CF(t){return new oo(t>>16&255,t>>8&255,t&255,1)}function jb(t,e,r,s){return s<=0&&(t=e=r=NaN),new oo(t,e,r,s)}function z0e(t){return t instanceof ey||(t=a0(t)),t?(t=t.rgb(),new oo(t.r,t.g,t.b,t.opacity)):new oo}function mP(t,e,r,s){return arguments.length===1?z0e(t):new oo(t,e,r,s??1)}function oo(t,e,r,s){this.r=+t,this.g=+e,this.b=+r,this.opacity=+s}m_(oo,mP,VV(ey,{brighter(t){return t=t==null?A1:Math.pow(A1,t),new oo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?s0:Math.pow(s0,t),new oo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new oo(Nm(this.r),Nm(this.g),Nm(this.b),C1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EF,formatHex:EF,formatHex8:q0e,formatRgb:PF,toString:PF}));function EF(){return`#${um(this.r)}${um(this.g)}${um(this.b)}`}function q0e(){return`#${um(this.r)}${um(this.g)}${um(this.b)}${um((isNaN(this.opacity)?1:this.opacity)*255)}`}function PF(){const t=C1(this.opacity);return`${t===1?"rgb(":"rgba("}${Nm(this.r)}, ${Nm(this.g)}, ${Nm(this.b)}${t===1?")":`, ${t})`}`}function C1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function um(t){return t=Nm(t),(t<16?"0":"")+t.toString(16)}function TF(t,e,r,s){return s<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new rc(t,e,r,s)}function HV(t){if(t instanceof rc)return new rc(t.h,t.s,t.l,t.opacity);if(t instanceof ey||(t=a0(t)),!t)return new rc;if(t instanceof rc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,s=t.b/255,i=Math.min(e,r,s),a=Math.max(e,r,s),o=NaN,l=a-i,c=(a+i)/2;return l?(e===a?o=(r-s)/l+(r<s)*6:r===a?o=(s-e)/l+2:o=(e-r)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new rc(o,l,c,t.opacity)}function U0e(t,e,r,s){return arguments.length===1?HV(t):new rc(t,e,r,s??1)}function rc(t,e,r,s){this.h=+t,this.s=+e,this.l=+r,this.opacity=+s}m_(rc,U0e,VV(ey,{brighter(t){return t=t==null?A1:Math.pow(A1,t),new rc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?s0:Math.pow(s0,t),new rc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*e,i=2*r-s;return new oo(B5(t>=240?t-240:t+120,i,s),B5(t,i,s),B5(t<120?t+240:t-120,i,s),this.opacity)},clamp(){return new rc(_F(this.h),wb(this.s),wb(this.l),C1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=C1(this.opacity);return`${t===1?"hsl(":"hsla("}${_F(this.h)}, ${wb(this.s)*100}%, ${wb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _F(t){return t=(t||0)%360,t<0?t+360:t}function wb(t){return Math.max(0,Math.min(1,t||0))}function B5(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const p_=t=>()=>t;function V0e(t,e){return function(r){return t+r*e}}function H0e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(s){return Math.pow(t+s*e,r)}}function W0e(t){return(t=+t)==1?WV:function(e,r){return r-e?H0e(e,r,t):p_(isNaN(e)?r:e)}}function WV(t,e){var r=e-t;return r?V0e(t,r):p_(isNaN(t)?e:t)}const IF=function t(e){var r=W0e(e);function s(i,a){var o=r((i=mP(i)).r,(a=mP(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),d=WV(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=d(u),i+""}}return s.gamma=t,s}(1);function G0e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,s=e.slice(),i;return function(a){for(i=0;i<r;++i)s[i]=t[i]*(1-a)+e[i]*a;return s}}function K0e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Y0e(t,e){var r=e?e.length:0,s=t?Math.min(r,t.length):0,i=new Array(s),a=new Array(r),o;for(o=0;o<s;++o)i[o]=dv(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function X0e(t,e){var r=new Date;return t=+t,e=+e,function(s){return r.setTime(t*(1-s)+e*s),r}}function E1(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Z0e(t,e){var r={},s={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=dv(t[i],e[i]):s[i]=e[i];return function(a){for(i in r)s[i]=r[i](a);return s}}var pP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,z5=new RegExp(pP.source,"g");function Q0e(t){return function(){return t}}function J0e(t){return function(e){return t(e)+""}}function eye(t,e){var r=pP.lastIndex=z5.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(s=pP.exec(t))&&(i=z5.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:E1(s,i)})),r=z5.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?J0e(c[0].x):Q0e(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function dv(t,e){var r=typeof e,s;return e==null||r==="boolean"?p_(e):(r==="number"?E1:r==="string"?(s=a0(e))?(e=s,IF):eye:e instanceof a0?IF:e instanceof Date?X0e:K0e(e)?G0e:Array.isArray(e)?Y0e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Z0e:E1)(t,e)}function g_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function tye(t,e){e===void 0&&(e=t,t=dv);for(var r=0,s=e.length-1,i=e[0],a=new Array(s<0?0:s);r<s;)a[r]=t(i,i=e[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function rye(t){return function(){return t}}function P1(t){return+t}var DF=[0,1];function Oa(t){return t}function gP(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:rye(isNaN(e)?NaN:.5)}function nye(t,e){var r;return t>e&&(r=t,t=e,e=r),function(s){return Math.max(t,Math.min(e,s))}}function sye(t,e,r){var s=t[0],i=t[1],a=e[0],o=e[1];return i<s?(s=gP(i,s),a=r(o,a)):(s=gP(s,i),a=r(a,o)),function(l){return a(s(l))}}function iye(t,e,r){var s=Math.min(t.length,e.length)-1,i=new Array(s),a=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)i[o]=gP(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(l){var c=J0(t,l,1,s)-1;return a[c](i[c](l))}}function ty(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lw(){var t=DF,e=DF,r=dv,s,i,a,o=Oa,l,c,d;function u(){var f=Math.min(t.length,e.length);return o!==Oa&&(o=nye(t[0],t[f-1])),l=f>2?iye:sye,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(s),e,r)))(s(o(f)))}return h.invert=function(f){return o(i((d||(d=l(e,t.map(s),E1)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,P1),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=g_,u()},h.clamp=function(f){return arguments.length?(o=f?!0:Oa,u()):o!==Oa},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return s=f,i=p,u()}}function v_(){return lw()(Oa,Oa)}function aye(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function T1(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function Eg(t){return t=T1(Math.abs(t)),t?t[1]:NaN}function oye(t,e){return function(r,s){for(var i=r.length,a=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>s));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function lye(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var cye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o0(t){if(!(e=cye.exec(t)))throw new Error("invalid format: "+t);var e;return new x_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}o0.prototype=x_.prototype;function x_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}x_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dye(t){e:for(var e=t.length,r=1,s=-1,i;r<e;++r)switch(t[r]){case".":s=i=r;break;case"0":s===0&&(s=r),i=r;break;default:if(!+t[r])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(i+1):t}var GV;function uye(t,e){var r=T1(t,e);if(!r)return t+"";var s=r[0],i=r[1],a=i-(GV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+T1(t,Math.max(0,e+a-1))[0]}function kF(t,e){var r=T1(t,e);if(!r)return t+"";var s=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const OF={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:aye,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kF(t*100,e),r:kF,s:uye,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RF(t){return t}var LF=Array.prototype.map,MF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function hye(t){var e=t.grouping===void 0||t.thousands===void 0?RF:oye(LF.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?RF:lye(LF.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h){h=o0(h);var f=h.fill,p=h.align,y=h.sign,v=h.symbol,g=h.zero,b=h.width,j=h.comma,w=h.precision,C=h.trim,E=h.type;E==="n"?(j=!0,E="g"):OF[E]||(w===void 0&&(w=12),C=!0,E="g"),(g||f==="0"&&p==="=")&&(g=!0,f="0",p="=");var N=v==="$"?r:v==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",A=v==="$"?s:/[%p]/.test(E)?o:"",_=OF[E],k=/[defgprs%]/.test(E);w=w===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(I){var T=N,R=A,O,z,q;if(E==="c")R=_(I)+R,I="";else{I=+I;var B=I<0||1/I<0;if(I=isNaN(I)?c:_(Math.abs(I),w),C&&(I=dye(I)),B&&+I==0&&y!=="+"&&(B=!1),T=(B?y==="("?y:l:y==="-"||y==="("?"":y)+T,R=(E==="s"?MF[8+GV/3]:"")+R+(B&&y==="("?")":""),k){for(O=-1,z=I.length;++O<z;)if(q=I.charCodeAt(O),48>q||q>57){R=(q===46?i+I.slice(O+1):I.slice(O))+R,I=I.slice(0,O);break}}}j&&!g&&(I=e(I,1/0));var K=T.length+I.length+R.length,Y=K<b?new Array(b-K+1).join(f):"";switch(j&&g&&(I=e(Y+I,Y.length?b-R.length:1/0),Y=""),p){case"<":I=T+I+R+Y;break;case"=":I=T+Y+I+R;break;case"^":I=Y.slice(0,K=Y.length>>1)+T+I+R+Y.slice(K);break;default:I=Y+T+I+R;break}return a(I)}return F.toString=function(){return h+""},F}function u(h,f){var p=d((h=o0(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Eg(f)/3)))*3,v=Math.pow(10,-y),g=MF[8+y/3];return function(b){return p(v*b)+g}}return{format:d,formatPrefix:u}}var Nb,y_,KV;fye({thousands:",",grouping:[3],currency:["$",""]});function fye(t){return Nb=hye(t),y_=Nb.format,KV=Nb.formatPrefix,Nb}function mye(t){return Math.max(0,-Eg(Math.abs(t)))}function pye(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Eg(e)/3)))*3-Eg(Math.abs(t)))}function gye(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Eg(e)-Eg(t))+1}function YV(t,e,r,s){var i=hP(t,e,r),a;switch(s=o0(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(a=pye(i,o))&&(s.precision=a),KV(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=gye(i,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=mye(i))&&(s.precision=a-(s.type==="%")*2);break}}return y_(s)}function mf(t){var e=t.domain;return t.ticks=function(r){var s=e();return dP(s[0],s[s.length-1],r??10)},t.tickFormat=function(r,s){var i=e();return YV(i[0],i[i.length-1],r??10,s)},t.nice=function(r){r==null&&(r=10);var s=e(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);u-- >0;){if(d=uP(o,l,r),d===c)return s[i]=o,s[a]=l,e(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function _1(){var t=v_();return t.copy=function(){return ty(t,_1())},Al.apply(t,arguments),mf(t)}function XV(t){var e;function r(s){return s==null||isNaN(s=+s)?e:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(t=Array.from(s,P1),r):t.slice()},r.unknown=function(s){return arguments.length?(e=s,r):e},r.copy=function(){return XV(t).unknown(e)},t=arguments.length?Array.from(t,P1):[0,1],mf(r)}function ZV(t,e){t=t.slice();var r=0,s=t.length-1,i=t[r],a=t[s],o;return a<i&&(o=r,r=s,s=o,o=i,i=a,a=o),t[r]=e.floor(i),t[s]=e.ceil(a),t}function FF(t){return Math.log(t)}function $F(t){return Math.exp(t)}function vye(t){return-Math.log(-t)}function xye(t){return-Math.exp(-t)}function yye(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bye(t){return t===10?yye:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jye(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function BF(t){return(e,r)=>-t(-e,r)}function b_(t){const e=t(FF,$F),r=e.domain;let s=10,i,a;function o(){return i=jye(s),a=bye(s),r()[0]<0?(i=BF(i),a=BF(a),t(vye,xye)):t(FF,$F),e}return e.base=function(l){return arguments.length?(s=+l,o()):s},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=i(d),p=i(u),y,v;const g=l==null?10:+l;let b=[];if(!(s%1)&&p-f<g){if(f=Math.floor(f),p=Math.ceil(p),d>0){for(;f<=p;++f)for(y=1;y<s;++y)if(v=f<0?y/a(-f):y*a(f),!(v<d)){if(v>u)break;b.push(v)}}else for(;f<=p;++f)for(y=s-1;y>=1;--y)if(v=f>0?y/a(-f):y*a(f),!(v<d)){if(v>u)break;b.push(v)}b.length*2<g&&(b=dP(d,u,g))}else b=dP(f,p,Math.min(p-f,g)).map(a);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=o0(c)).precision==null&&(c.trim=!0),c=y_(c)),l===1/0)return c;const d=Math.max(1,s*l/e.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},e.nice=()=>r(ZV(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function QV(){const t=b_(lw()).domain([1,10]);return t.copy=()=>ty(t,QV()).base(t.base()),Al.apply(t,arguments),t}function zF(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qF(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function j_(t){var e=1,r=t(zF(e),qF(e));return r.constant=function(s){return arguments.length?t(zF(e=+s),qF(e)):e},mf(r)}function JV(){var t=j_(lw());return t.copy=function(){return ty(t,JV()).constant(t.constant())},Al.apply(t,arguments)}function UF(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wye(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nye(t){return t<0?-t*t:t*t}function w_(t){var e=t(Oa,Oa),r=1;function s(){return r===1?t(Oa,Oa):r===.5?t(wye,Nye):t(UF(r),UF(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,s()):r},mf(e)}function N_(){var t=w_(lw());return t.copy=function(){return ty(t,N_()).exponent(t.exponent())},Al.apply(t,arguments),t}function Sye(){return N_.apply(null,arguments).exponent(.5)}function VF(t){return Math.sign(t)*t*t}function Aye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function eH(){var t=v_(),e=[0,1],r=!1,s;function i(a){var o=Aye(t(a));return isNaN(o)?s:r?Math.round(o):o}return i.invert=function(a){return t.invert(VF(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,P1)).map(VF)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return eH(t.domain(),e).round(r).clamp(t.clamp()).unknown(s)},Al.apply(i,arguments),mf(i)}function tH(){var t=[],e=[],r=[],s;function i(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=_0e(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:e[J0(r,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Wh),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return r.slice()},a.copy=function(){return tH().domain(t).range(e).unknown(s)},Al.apply(a,arguments)}function rH(){var t=0,e=1,r=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[J0(s,c,0,r)]:a}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,s[0]]:d>=r?[s[r-1],e]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return rH().domain([t,e]).range(i).unknown(a)},Al.apply(mf(o),arguments)}function nH(){var t=[.5],e=[0,1],r,s=1;function i(a){return a!=null&&a<=a?e[J0(t,a,0,s)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),s=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),s=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return nH().domain(t).range(e).unknown(r)},Al.apply(i,arguments)}const q5=new Date,U5=new Date;function ci(t,e,r,s){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),e(a,l),t(a);while(d<a&&a<o);return c},i.filter=a=>ci(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(q5.setTime(+a),U5.setTime(+o),t(q5),t(U5),Math.floor(r(q5,U5))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const I1=ci(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);I1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ci(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):I1);I1.range;const du=1e3,bl=du*60,uu=bl*60,ju=uu*24,S_=ju*7,HF=ju*30,V5=ju*365,hm=ci(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCSeconds());hm.range;const A_=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du)},(t,e)=>{t.setTime(+t+e*bl)},(t,e)=>(e-t)/bl,t=>t.getMinutes());A_.range;const C_=ci(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*bl)},(t,e)=>(e-t)/bl,t=>t.getUTCMinutes());C_.range;const E_=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du-t.getMinutes()*bl)},(t,e)=>{t.setTime(+t+e*uu)},(t,e)=>(e-t)/uu,t=>t.getHours());E_.range;const P_=ci(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*uu)},(t,e)=>(e-t)/uu,t=>t.getUTCHours());P_.range;const ry=ci(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bl)/ju,t=>t.getDate()-1);ry.range;const cw=ci(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ju,t=>t.getUTCDate()-1);cw.range;const sH=ci(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ju,t=>Math.floor(t/ju));sH.range;function Zm(t){return ci(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*bl)/S_)}const dw=Zm(0),D1=Zm(1),Cye=Zm(2),Eye=Zm(3),Pg=Zm(4),Pye=Zm(5),Tye=Zm(6);dw.range;D1.range;Cye.range;Eye.range;Pg.range;Pye.range;Tye.range;function Qm(t){return ci(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/S_)}const uw=Qm(0),k1=Qm(1),_ye=Qm(2),Iye=Qm(3),Tg=Qm(4),Dye=Qm(5),kye=Qm(6);uw.range;k1.range;_ye.range;Iye.range;Tg.range;Dye.range;kye.range;const T_=ci(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());T_.range;const __=ci(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());__.range;const wu=ci(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});wu.range;const Nu=ci(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Nu.range;function iH(t,e,r,s,i,a){const o=[[hm,1,du],[hm,5,5*du],[hm,15,15*du],[hm,30,30*du],[a,1,bl],[a,5,5*bl],[a,15,15*bl],[a,30,30*bl],[i,1,uu],[i,3,3*uu],[i,6,6*uu],[i,12,12*uu],[s,1,ju],[s,2,2*ju],[r,1,S_],[e,1,HF],[e,3,3*HF],[t,1,V5]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),y=p?p.range(d,+u+1):[];return f?y.reverse():y}function c(d,u,h){const f=Math.abs(u-d)/h,p=h_(([,,g])=>g).right(o,f);if(p===o.length)return t.every(hP(d/V5,u/V5,h));if(p===0)return I1.every(Math.max(hP(d,u,h),1));const[y,v]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return y.every(v)}return[l,c]}const[Oye,Rye]=iH(Nu,__,uw,sH,P_,C_),[Lye,Mye]=iH(wu,T_,dw,ry,E_,A_);function H5(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function W5(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xv(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Fye(t){var e=t.dateTime,r=t.date,s=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=Zv(i),u=Qv(i),h=Zv(a),f=Qv(a),p=Zv(o),y=Qv(o),v=Zv(l),g=Qv(l),b=Zv(c),j=Qv(c),w={a:B,A:K,b:Y,B:J,c:null,d:ZF,e:ZF,f:obe,g:vbe,G:ybe,H:sbe,I:ibe,j:abe,L:aH,m:lbe,M:cbe,p:H,q:$,Q:e6,s:t6,S:dbe,u:ube,U:hbe,V:fbe,w:mbe,W:pbe,x:null,X:null,y:gbe,Y:xbe,Z:bbe,"%":JF},C={a:W,A:te,b:ee,B:ne,c:null,d:QF,e:QF,f:Sbe,g:Obe,G:Lbe,H:jbe,I:wbe,j:Nbe,L:lH,m:Abe,M:Cbe,p:ae,q:ve,Q:e6,s:t6,S:Ebe,u:Pbe,U:Tbe,V:_be,w:Ibe,W:Dbe,x:null,X:null,y:kbe,Y:Rbe,Z:Mbe,"%":JF},E={a:F,A:I,b:T,B:R,c:O,d:YF,e:YF,f:ebe,g:KF,G:GF,H:XF,I:XF,j:Xye,L:Jye,m:Yye,M:Zye,p:k,q:Kye,Q:rbe,s:nbe,S:Qye,u:Uye,U:Vye,V:Hye,w:qye,W:Wye,x:z,X:q,y:KF,Y:GF,Z:Gye,"%":tbe};w.x=N(r,w),w.X=N(s,w),w.c=N(e,w),C.x=N(r,C),C.X=N(s,C),C.c=N(e,C);function N(xe,Se){return function(Pe){var Ce=[],He=-1,Ke=0,we=xe.length,oe,it,_e;for(Pe instanceof Date||(Pe=new Date(+Pe));++He<we;)xe.charCodeAt(He)===37&&(Ce.push(xe.slice(Ke,He)),(it=WF[oe=xe.charAt(++He)])!=null?oe=xe.charAt(++He):it=oe==="e"?" ":"0",(_e=Se[oe])&&(oe=_e(Pe,it)),Ce.push(oe),Ke=He+1);return Ce.push(xe.slice(Ke,He)),Ce.join("")}}function A(xe,Se){return function(Pe){var Ce=Xv(1900,void 0,1),He=_(Ce,xe,Pe+="",0),Ke,we;if(He!=Pe.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(Se&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(Ke=W5(Xv(Ce.y,0,1)),we=Ke.getUTCDay(),Ke=we>4||we===0?k1.ceil(Ke):k1(Ke),Ke=cw.offset(Ke,(Ce.V-1)*7),Ce.y=Ke.getUTCFullYear(),Ce.m=Ke.getUTCMonth(),Ce.d=Ke.getUTCDate()+(Ce.w+6)%7):(Ke=H5(Xv(Ce.y,0,1)),we=Ke.getDay(),Ke=we>4||we===0?D1.ceil(Ke):D1(Ke),Ke=ry.offset(Ke,(Ce.V-1)*7),Ce.y=Ke.getFullYear(),Ce.m=Ke.getMonth(),Ce.d=Ke.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),we="Z"in Ce?W5(Xv(Ce.y,0,1)).getUTCDay():H5(Xv(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(we+5)%7:Ce.w+Ce.U*7-(we+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,W5(Ce)):H5(Ce)}}function _(xe,Se,Pe,Ce){for(var He=0,Ke=Se.length,we=Pe.length,oe,it;He<Ke;){if(Ce>=we)return-1;if(oe=Se.charCodeAt(He++),oe===37){if(oe=Se.charAt(He++),it=E[oe in WF?Se.charAt(He++):oe],!it||(Ce=it(xe,Pe,Ce))<0)return-1}else if(oe!=Pe.charCodeAt(Ce++))return-1}return Ce}function k(xe,Se,Pe){var Ce=d.exec(Se.slice(Pe));return Ce?(xe.p=u.get(Ce[0].toLowerCase()),Pe+Ce[0].length):-1}function F(xe,Se,Pe){var Ce=p.exec(Se.slice(Pe));return Ce?(xe.w=y.get(Ce[0].toLowerCase()),Pe+Ce[0].length):-1}function I(xe,Se,Pe){var Ce=h.exec(Se.slice(Pe));return Ce?(xe.w=f.get(Ce[0].toLowerCase()),Pe+Ce[0].length):-1}function T(xe,Se,Pe){var Ce=b.exec(Se.slice(Pe));return Ce?(xe.m=j.get(Ce[0].toLowerCase()),Pe+Ce[0].length):-1}function R(xe,Se,Pe){var Ce=v.exec(Se.slice(Pe));return Ce?(xe.m=g.get(Ce[0].toLowerCase()),Pe+Ce[0].length):-1}function O(xe,Se,Pe){return _(xe,e,Se,Pe)}function z(xe,Se,Pe){return _(xe,r,Se,Pe)}function q(xe,Se,Pe){return _(xe,s,Se,Pe)}function B(xe){return o[xe.getDay()]}function K(xe){return a[xe.getDay()]}function Y(xe){return c[xe.getMonth()]}function J(xe){return l[xe.getMonth()]}function H(xe){return i[+(xe.getHours()>=12)]}function $(xe){return 1+~~(xe.getMonth()/3)}function W(xe){return o[xe.getUTCDay()]}function te(xe){return a[xe.getUTCDay()]}function ee(xe){return c[xe.getUTCMonth()]}function ne(xe){return l[xe.getUTCMonth()]}function ae(xe){return i[+(xe.getUTCHours()>=12)]}function ve(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Se=N(xe+="",w);return Se.toString=function(){return xe},Se},parse:function(xe){var Se=A(xe+="",!1);return Se.toString=function(){return xe},Se},utcFormat:function(xe){var Se=N(xe+="",C);return Se.toString=function(){return xe},Se},utcParse:function(xe){var Se=A(xe+="",!0);return Se.toString=function(){return xe},Se}}}var WF={"-":"",_:" ",0:"0"},Ti=/^\s*\d+/,$ye=/^%/,Bye=/[\\^$*+?|[\]().{}]/g;function mn(t,e,r){var s=t<0?"-":"",i=(s?-t:t)+"",a=i.length;return s+(a<r?new Array(r-a+1).join(e)+i:i)}function zye(t){return t.replace(Bye,"\\$&")}function Zv(t){return new RegExp("^(?:"+t.map(zye).join("|")+")","i")}function Qv(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function qye(t,e,r){var s=Ti.exec(e.slice(r,r+1));return s?(t.w=+s[0],r+s[0].length):-1}function Uye(t,e,r){var s=Ti.exec(e.slice(r,r+1));return s?(t.u=+s[0],r+s[0].length):-1}function Vye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.U=+s[0],r+s[0].length):-1}function Hye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.V=+s[0],r+s[0].length):-1}function Wye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.W=+s[0],r+s[0].length):-1}function GF(t,e,r){var s=Ti.exec(e.slice(r,r+4));return s?(t.y=+s[0],r+s[0].length):-1}function KF(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function Gye(t,e,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Kye(t,e,r){var s=Ti.exec(e.slice(r,r+1));return s?(t.q=s[0]*3-3,r+s[0].length):-1}function Yye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.m=s[0]-1,r+s[0].length):-1}function YF(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.d=+s[0],r+s[0].length):-1}function Xye(t,e,r){var s=Ti.exec(e.slice(r,r+3));return s?(t.m=0,t.d=+s[0],r+s[0].length):-1}function XF(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.H=+s[0],r+s[0].length):-1}function Zye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.M=+s[0],r+s[0].length):-1}function Qye(t,e,r){var s=Ti.exec(e.slice(r,r+2));return s?(t.S=+s[0],r+s[0].length):-1}function Jye(t,e,r){var s=Ti.exec(e.slice(r,r+3));return s?(t.L=+s[0],r+s[0].length):-1}function ebe(t,e,r){var s=Ti.exec(e.slice(r,r+6));return s?(t.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function tbe(t,e,r){var s=$ye.exec(e.slice(r,r+1));return s?r+s[0].length:-1}function rbe(t,e,r){var s=Ti.exec(e.slice(r));return s?(t.Q=+s[0],r+s[0].length):-1}function nbe(t,e,r){var s=Ti.exec(e.slice(r));return s?(t.s=+s[0],r+s[0].length):-1}function ZF(t,e){return mn(t.getDate(),e,2)}function sbe(t,e){return mn(t.getHours(),e,2)}function ibe(t,e){return mn(t.getHours()%12||12,e,2)}function abe(t,e){return mn(1+ry.count(wu(t),t),e,3)}function aH(t,e){return mn(t.getMilliseconds(),e,3)}function obe(t,e){return aH(t,e)+"000"}function lbe(t,e){return mn(t.getMonth()+1,e,2)}function cbe(t,e){return mn(t.getMinutes(),e,2)}function dbe(t,e){return mn(t.getSeconds(),e,2)}function ube(t){var e=t.getDay();return e===0?7:e}function hbe(t,e){return mn(dw.count(wu(t)-1,t),e,2)}function oH(t){var e=t.getDay();return e>=4||e===0?Pg(t):Pg.ceil(t)}function fbe(t,e){return t=oH(t),mn(Pg.count(wu(t),t)+(wu(t).getDay()===4),e,2)}function mbe(t){return t.getDay()}function pbe(t,e){return mn(D1.count(wu(t)-1,t),e,2)}function gbe(t,e){return mn(t.getFullYear()%100,e,2)}function vbe(t,e){return t=oH(t),mn(t.getFullYear()%100,e,2)}function xbe(t,e){return mn(t.getFullYear()%1e4,e,4)}function ybe(t,e){var r=t.getDay();return t=r>=4||r===0?Pg(t):Pg.ceil(t),mn(t.getFullYear()%1e4,e,4)}function bbe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mn(e/60|0,"0",2)+mn(e%60,"0",2)}function QF(t,e){return mn(t.getUTCDate(),e,2)}function jbe(t,e){return mn(t.getUTCHours(),e,2)}function wbe(t,e){return mn(t.getUTCHours()%12||12,e,2)}function Nbe(t,e){return mn(1+cw.count(Nu(t),t),e,3)}function lH(t,e){return mn(t.getUTCMilliseconds(),e,3)}function Sbe(t,e){return lH(t,e)+"000"}function Abe(t,e){return mn(t.getUTCMonth()+1,e,2)}function Cbe(t,e){return mn(t.getUTCMinutes(),e,2)}function Ebe(t,e){return mn(t.getUTCSeconds(),e,2)}function Pbe(t){var e=t.getUTCDay();return e===0?7:e}function Tbe(t,e){return mn(uw.count(Nu(t)-1,t),e,2)}function cH(t){var e=t.getUTCDay();return e>=4||e===0?Tg(t):Tg.ceil(t)}function _be(t,e){return t=cH(t),mn(Tg.count(Nu(t),t)+(Nu(t).getUTCDay()===4),e,2)}function Ibe(t){return t.getUTCDay()}function Dbe(t,e){return mn(k1.count(Nu(t)-1,t),e,2)}function kbe(t,e){return mn(t.getUTCFullYear()%100,e,2)}function Obe(t,e){return t=cH(t),mn(t.getUTCFullYear()%100,e,2)}function Rbe(t,e){return mn(t.getUTCFullYear()%1e4,e,4)}function Lbe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Tg(t):Tg.ceil(t),mn(t.getUTCFullYear()%1e4,e,4)}function Mbe(){return"+0000"}function JF(){return"%"}function e6(t){return+t}function t6(t){return Math.floor(+t/1e3)}var zp,dH,uH;Fbe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Fbe(t){return zp=Fye(t),dH=zp.format,zp.parse,uH=zp.utcFormat,zp.utcParse,zp}function $be(t){return new Date(t)}function Bbe(t){return t instanceof Date?+t:+new Date(+t)}function I_(t,e,r,s,i,a,o,l,c,d){var u=v_(),h=u.invert,f=u.domain,p=d(".%L"),y=d(":%S"),v=d("%I:%M"),g=d("%I %p"),b=d("%a %d"),j=d("%b %d"),w=d("%B"),C=d("%Y");function E(N){return(c(N)<N?p:l(N)<N?y:o(N)<N?v:a(N)<N?g:s(N)<N?i(N)<N?b:j:r(N)<N?w:C)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,Bbe)):f().map($be)},u.ticks=function(N){var A=f();return t(A[0],A[A.length-1],N??10)},u.tickFormat=function(N,A){return A==null?E:d(A)},u.nice=function(N){var A=f();return(!N||typeof N.range!="function")&&(N=e(A[0],A[A.length-1],N??10)),N?f(ZV(A,N)):u},u.copy=function(){return ty(u,I_(t,e,r,s,i,a,o,l,c,d))},u}function zbe(){return Al.apply(I_(Lye,Mye,wu,T_,dw,ry,E_,A_,hm,dH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qbe(){return Al.apply(I_(Oye,Rye,Nu,__,uw,cw,P_,C_,hm,uH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hw(){var t=0,e=1,r,s,i,a,o=Oa,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-r)*i,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,r=a(t=+t),s=a(e=+e),i=r===s?0:1/(s-r),d):[t,e]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var p,y;return arguments.length?([p,y]=f,o=h(p,y),d):[o(0),o(1)]}}return d.range=u(dv),d.rangeRound=u(g_),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,r=h(t),s=h(e),i=r===s?0:1/(s-r),d}}function pf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function hH(){var t=mf(hw()(Oa));return t.copy=function(){return pf(t,hH())},Pu.apply(t,arguments)}function fH(){var t=b_(hw()).domain([1,10]);return t.copy=function(){return pf(t,fH()).base(t.base())},Pu.apply(t,arguments)}function mH(){var t=j_(hw());return t.copy=function(){return pf(t,mH()).constant(t.constant())},Pu.apply(t,arguments)}function D_(){var t=w_(hw());return t.copy=function(){return pf(t,D_()).exponent(t.exponent())},Pu.apply(t,arguments)}function Ube(){return D_.apply(null,arguments).exponent(.5)}function pH(){var t=[],e=Oa;function r(s){if(s!=null&&!isNaN(s=+s))return e((J0(t,s,1)-1)/(t.length-1))}return r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let i of s)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Wh),r},r.interpolator=function(s){return arguments.length?(e=s,r):e},r.range=function(){return t.map((s,i)=>e(i/(t.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(i,a)=>T0e(t,a/s))},r.copy=function(){return pH(e).domain(t)},Pu.apply(r,arguments)}function fw(){var t=0,e=.5,r=1,s=1,i,a,o,l,c,d=Oa,u,h=!1,f;function p(v){return isNaN(v=+v)?f:(v=.5+((v=+u(v))-a)*(s*v<s*a?l:c),d(h?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([t,e,r]=v,i=u(t=+t),a=u(e=+e),o=u(r=+r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p):[t,e,r]},p.clamp=function(v){return arguments.length?(h=!!v,p):h},p.interpolator=function(v){return arguments.length?(d=v,p):d};function y(v){return function(g){var b,j,w;return arguments.length?([b,j,w]=g,d=tye(v,[b,j,w]),p):[d(0),d(.5),d(1)]}}return p.range=y(dv),p.rangeRound=y(g_),p.unknown=function(v){return arguments.length?(f=v,p):f},function(v){return u=v,i=v(t),a=v(e),o=v(r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p}}function gH(){var t=mf(fw()(Oa));return t.copy=function(){return pf(t,gH())},Pu.apply(t,arguments)}function vH(){var t=b_(fw()).domain([.1,1,10]);return t.copy=function(){return pf(t,vH()).base(t.base())},Pu.apply(t,arguments)}function xH(){var t=j_(fw());return t.copy=function(){return pf(t,xH()).constant(t.constant())},Pu.apply(t,arguments)}function k_(){var t=w_(fw());return t.copy=function(){return pf(t,k_()).exponent(t.exponent())},Pu.apply(t,arguments)}function Vbe(){return k_.apply(null,arguments).exponent(.5)}const r6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:n0,scaleDiverging:gH,scaleDivergingLog:vH,scaleDivergingPow:k_,scaleDivergingSqrt:Vbe,scaleDivergingSymlog:xH,scaleIdentity:XV,scaleImplicit:fP,scaleLinear:_1,scaleLog:QV,scaleOrdinal:f_,scalePoint:Ax,scalePow:N_,scaleQuantile:tH,scaleQuantize:rH,scaleRadial:eH,scaleSequential:hH,scaleSequentialLog:fH,scaleSequentialPow:D_,scaleSequentialQuantile:pH,scaleSequentialSqrt:Ube,scaleSequentialSymlog:mH,scaleSqrt:Sye,scaleSymlog:JV,scaleThreshold:nH,scaleTime:zbe,scaleUtc:qbe,tickFormat:YV},Symbol.toStringTag,{value:"Module"}));var G5,n6;function mw(){if(n6)return G5;n6=1;var t=av();function e(r,s,i){for(var a=-1,o=r.length;++a<o;){var l=r[a],c=s(l);if(c!=null&&(d===void 0?c===c&&!t(c):i(c,d)))var d=c,u=l}return u}return G5=e,G5}var K5,s6;function yH(){if(s6)return K5;s6=1;function t(e,r){return e>r}return K5=t,K5}var Y5,i6;function Hbe(){if(i6)return Y5;i6=1;var t=mw(),e=yH(),r=cv();function s(i){return i&&i.length?t(i,r,e):void 0}return Y5=s,Y5}var Wbe=Hbe();const Fh=Kr(Wbe);var X5,a6;function bH(){if(a6)return X5;a6=1;function t(e,r){return e<r}return X5=t,X5}var Z5,o6;function Gbe(){if(o6)return Z5;o6=1;var t=mw(),e=bH(),r=cv();function s(i){return i&&i.length?t(i,r,e):void 0}return Z5=s,Z5}var Kbe=Gbe();const pw=Kr(Kbe);var Q5,l6;function Ybe(){if(l6)return Q5;l6=1;var t=YT(),e=yd(),r=PV(),s=uo();function i(a,o){var l=s(a)?t:r;return l(a,e(o,3))}return Q5=i,Q5}var J5,c6;function Xbe(){if(c6)return J5;c6=1;var t=CV(),e=Ybe();function r(s,i){return t(e(s,i),1)}return J5=r,J5}var Zbe=Xbe();const Qbe=Kr(Zbe);var eC,d6;function Jbe(){if(d6)return eC;d6=1;var t=l_();function e(r,s){return t(r,s)}return eC=e,eC}var e1e=Jbe();const Mm=Kr(e1e);var uv=1e9,t1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R_,ls=!0,Sl="[DecimalError] ",Sm=Sl+"Invalid argument: ",O_=Sl+"Exponent out of range: ",hv=Math.floor,nm=Math.pow,r1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mo,wi=1e7,es=7,jH=9007199254740991,O1=hv(jH/es),$t={};$t.absoluteValue=$t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};$t.comparedTo=$t.cmp=function(t){var e,r,s,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(s=a.d.length,i=t.d.length,e=0,r=s<i?s:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*es;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};$t.dividedBy=$t.div=function(t){return mu(this,new this.constructor(t))};$t.dividedToIntegerBy=$t.idiv=function(t){var e=this,r=e.constructor;return Rn(mu(e,new r(t),0,1),r.precision)};$t.equals=$t.eq=function(t){return!this.cmp(t)};$t.exponent=function(){return Zs(this)};$t.greaterThan=$t.gt=function(t){return this.cmp(t)>0};$t.greaterThanOrEqualTo=$t.gte=function(t){return this.cmp(t)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(t){return this.cmp(t)<0};$t.lessThanOrEqualTo=$t.lte=function(t){return this.cmp(t)<1};$t.logarithm=$t.log=function(t){var e,r=this,s=r.constructor,i=s.precision,a=i+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(Mo))throw Error(Sl+"NaN");if(r.s<1)throw Error(Sl+(r.s?"NaN":"-Infinity"));return r.eq(Mo)?new s(0):(ls=!1,e=mu(l0(r,a),l0(t,a),a),ls=!0,Rn(e,i))};$t.minus=$t.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?SH(e,t):wH(e,(t.s=-t.s,t))};$t.modulo=$t.mod=function(t){var e,r=this,s=r.constructor,i=s.precision;if(t=new s(t),!t.s)throw Error(Sl+"NaN");return r.s?(ls=!1,e=mu(r,t,0,1).times(t),ls=!0,r.minus(e)):Rn(new s(r),i)};$t.naturalExponential=$t.exp=function(){return NH(this)};$t.naturalLogarithm=$t.ln=function(){return l0(this)};$t.negated=$t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};$t.plus=$t.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wH(e,t):SH(e,(t.s=-t.s,t))};$t.precision=$t.sd=function(t){var e,r,s,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sm+t);if(e=Zs(i)+1,s=i.d.length-1,r=s*es+1,s=i.d[s],s){for(;s%10==0;s/=10)r--;for(s=i.d[0];s>=10;s/=10)r++}return t&&e>r?e:r};$t.squareRoot=$t.sqrt=function(){var t,e,r,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Sl+"NaN")}for(t=Zs(l),ls=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=sd(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=hv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),s=new c(e)):s=new c(i.toString()),r=c.precision,i=o=r+3;;)if(a=s,s=a.plus(mu(l,a,o+2)).times(.5),sd(a.d).slice(0,o)===(e=sd(s.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Rn(a,r+1,0),a.times(a).eq(l)){s=a;break}}else if(e!="9999")break;o+=4}return ls=!0,Rn(s,r)};$t.times=$t.mul=function(t){var e,r,s,i,a,o,l,c,d,u=this,h=u.constructor,f=u.d,p=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,r=u.e+t.e,c=f.length,d=p.length,c<d&&(a=f,f=p,p=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(e=0,i=c+s;i>s;)l=a[i]+p[s]*f[i-s-1]+e,a[i--]=l%wi|0,e=l/wi|0;a[i]=(a[i]+e)%wi|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,ls?Rn(t,h.precision):t};$t.toDecimalPlaces=$t.todp=function(t,e){var r=this,s=r.constructor;return r=new s(r),t===void 0?r:(md(t,0,uv),e===void 0?e=s.rounding:md(e,0,8),Rn(r,t+Zs(r)+1,e))};$t.toExponential=function(t,e){var r,s=this,i=s.constructor;return t===void 0?r=Fm(s,!0):(md(t,0,uv),e===void 0?e=i.rounding:md(e,0,8),s=Rn(new i(s),t+1,e),r=Fm(s,!0,t+1)),r};$t.toFixed=function(t,e){var r,s,i=this,a=i.constructor;return t===void 0?Fm(i):(md(t,0,uv),e===void 0?e=a.rounding:md(e,0,8),s=Rn(new a(i),t+Zs(i)+1,e),r=Fm(s.abs(),!1,t+Zs(s)+1),i.isneg()&&!i.isZero()?"-"+r:r)};$t.toInteger=$t.toint=function(){var t=this,e=t.constructor;return Rn(new e(t),Zs(t)+1,e.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(t){var e,r,s,i,a,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Mo);if(l=new c(l),!l.s){if(t.s<1)throw Error(Sl+"Infinity");return l}if(l.eq(Mo))return l;if(s=c.precision,t.eq(Mo))return Rn(l,s);if(e=t.e,r=t.d.length-1,o=e>=r,a=l.s,o){if((r=u<0?-u:u)<=jH){for(i=new c(Mo),e=Math.ceil(s/es+4),ls=!1;r%2&&(i=i.times(l),h6(i.d,e)),r=hv(r/2),r!==0;)l=l.times(l),h6(l.d,e);return ls=!0,t.s<0?new c(Mo).div(i):Rn(i,s)}}else if(a<0)throw Error(Sl+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ls=!1,i=t.times(l0(l,s+d)),ls=!0,i=NH(i),i.s=a,i};$t.toPrecision=function(t,e){var r,s,i=this,a=i.constructor;return t===void 0?(r=Zs(i),s=Fm(i,r<=a.toExpNeg||r>=a.toExpPos)):(md(t,1,uv),e===void 0?e=a.rounding:md(e,0,8),i=Rn(new a(i),t,e),r=Zs(i),s=Fm(i,t<=r||r<=a.toExpNeg,t)),s};$t.toSignificantDigits=$t.tosd=function(t,e){var r=this,s=r.constructor;return t===void 0?(t=s.precision,e=s.rounding):(md(t,1,uv),e===void 0?e=s.rounding:md(e,0,8)),Rn(new s(r),t,e)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Zs(t),r=t.constructor;return Fm(t,e<=r.toExpNeg||e>=r.toExpPos)};function wH(t,e){var r,s,i,a,o,l,c,d,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),ls?Rn(e,h):e;if(c=t.d,d=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(h/es),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),r=0;a;)r=(c[--a]=c[a]+d[a]+r)/wi|0,c[a]%=wi;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,ls?Rn(e,h):e}function md(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Sm+t)}function sd(t){var e,r,s,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)s=t[e]+"",r=es-s.length,r&&(a+=_h(r)),a+=s;o=t[e],s=o+"",r=es-s.length,r&&(a+=_h(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var mu=function(){function t(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%wi|0,o=a/wi|0;return o&&s.unshift(o),s}function e(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function r(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*wi+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,u,h,f,p,y,v,g,b,j,w,C,E,N,A,_,k=s.constructor,F=s.s==i.s?1:-1,I=s.d,T=i.d;if(!s.s)return new k(s);if(!i.s)throw Error(Sl+"Division by zero");for(c=s.e-i.e,A=T.length,E=I.length,p=new k(F),y=p.d=[],d=0;T[d]==(I[d]||0);)++d;if(T[d]>(I[d]||0)&&--c,a==null?j=a=k.precision:o?j=a+(Zs(s)-Zs(i))+1:j=a,j<0)return new k(0);if(j=j/es+2|0,d=0,A==1)for(u=0,T=T[0],j++;(d<E||u)&&j--;d++)w=u*wi+(I[d]||0),y[d]=w/T|0,u=w%T|0;else{for(u=wi/(T[0]+1)|0,u>1&&(T=t(T,u),I=t(I,u),A=T.length,E=I.length),C=A,v=I.slice(0,A),g=v.length;g<A;)v[g++]=0;_=T.slice(),_.unshift(0),N=T[0],T[1]>=wi/2&&++N;do u=0,l=e(T,v,A,g),l<0?(b=v[0],A!=g&&(b=b*wi+(v[1]||0)),u=b/N|0,u>1?(u>=wi&&(u=wi-1),h=t(T,u),f=h.length,g=v.length,l=e(h,v,f,g),l==1&&(u--,r(h,A<f?_:T,f))):(u==0&&(l=u=1),h=T.slice()),f=h.length,f<g&&h.unshift(0),r(v,h,g),l==-1&&(g=v.length,l=e(T,v,A,g),l<1&&(u++,r(v,A<g?_:T,g))),g=v.length):l===0&&(u++,v=[0]),y[d++]=u,l&&v[0]?v[g++]=I[C]||0:(v=[I[C]],g=1);while((C++<E||v[0]!==void 0)&&j--)}return y[0]||y.shift(),p.e=c,Rn(p,o?a+Zs(p)+1:a)}}();function NH(t,e){var r,s,i,a,o,l,c=0,d=0,u=t.constructor,h=u.precision;if(Zs(t)>16)throw Error(O_+Zs(t));if(!t.s)return new u(Mo);for(ls=!1,l=h,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(s=Math.log(nm(2,d))/Math.LN10*2+5|0,l+=s,r=i=a=new u(Mo),u.precision=l;;){if(i=Rn(i.times(t),l),r=r.times(++c),o=a.plus(mu(i,r,l)),sd(o.d).slice(0,l)===sd(a.d).slice(0,l)){for(;d--;)a=Rn(a.times(a),l);return u.precision=h,e==null?(ls=!0,Rn(a,h)):a}a=o}}function Zs(t){for(var e=t.e*es,r=t.d[0];r>=10;r/=10)e++;return e}function tC(t,e,r){if(e>t.LN10.sd())throw ls=!0,r&&(t.precision=r),Error(Sl+"LN10 precision limit exceeded");return Rn(new t(t.LN10),e)}function _h(t){for(var e="";t--;)e+="0";return e}function l0(t,e){var r,s,i,a,o,l,c,d,u,h=1,f=10,p=t,y=p.d,v=p.constructor,g=v.precision;if(p.s<1)throw Error(Sl+(p.s?"NaN":"-Infinity"));if(p.eq(Mo))return new v(0);if(e==null?(ls=!1,d=g):d=e,p.eq(10))return e==null&&(ls=!0),tC(v,d);if(d+=f,v.precision=d,r=sd(y),s=r.charAt(0),a=Zs(p),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)p=p.times(t),r=sd(p.d),s=r.charAt(0),h++;a=Zs(p),s>1?(p=new v("0."+r),a++):p=new v(s+"."+r.slice(1))}else return c=tC(v,d+2,g).times(a+""),p=l0(new v(s+"."+r.slice(1)),d-f).plus(c),v.precision=g,e==null?(ls=!0,Rn(p,g)):p;for(l=o=p=mu(p.minus(Mo),p.plus(Mo),d),u=Rn(p.times(p),d),i=3;;){if(o=Rn(o.times(u),d),c=l.plus(mu(o,new v(i),d)),sd(c.d).slice(0,d)===sd(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(tC(v,d+2,g).times(a+""))),l=mu(l,new v(h),d),v.precision=g,e==null?(ls=!0,Rn(l,g)):l;l=c,i+=2}}function u6(t,e){var r,s,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charCodeAt(s)===48;)++s;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(s,i),e){if(i-=s,r=r-s-1,t.e=hv(r/es),t.d=[],s=(r+1)%es,r<0&&(s+=es),s<i){for(s&&t.d.push(+e.slice(0,s)),i-=es;s<i;)t.d.push(+e.slice(s,s+=es));e=e.slice(s),s=es-e.length}else s-=i;for(;s--;)e+="0";if(t.d.push(+e),ls&&(t.e>O1||t.e<-O1))throw Error(O_+r)}else t.s=0,t.e=0,t.d=[0];return t}function Rn(t,e,r){var s,i,a,o,l,c,d,u,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(s=e-o,s<0)s+=es,i=e,d=h[u=0];else{if(u=Math.ceil((s+1)/es),a=h.length,u>=a)return t;for(d=a=h[u],o=1;a>=10;a/=10)o++;s%=es,i=s-es+o}if(r!==void 0&&(a=nm(10,o-i-1),l=d/a%10|0,c=e<0||h[u+1]!==void 0||d%a,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?i>0?d/nm(10,o-i):0:h[u-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(a=Zs(t),h.length=1,e=e-a-1,h[0]=nm(10,(es-e%es)%es),t.e=hv(-e/es)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(s==0?(h.length=u,a=1,u--):(h.length=u+1,a=nm(10,es-s),h[u]=i>0?(d/nm(10,o-i)%nm(10,i)|0)*a:0),c)for(;;)if(u==0){(h[0]+=a)==wi&&(h[0]=1,++t.e);break}else{if(h[u]+=a,h[u]!=wi)break;h[u--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop();if(ls&&(t.e>O1||t.e<-O1))throw Error(O_+Zs(t));return t}function SH(t,e){var r,s,i,a,o,l,c,d,u,h,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),ls?Rn(e,p):e;if(c=t.d,h=e.d,s=e.e,d=t.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,s=d,l=c.length),i=Math.max(Math.ceil(p/es),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=h.length,u=i<l,u&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){u=c[i]<h[i];break}o=0}for(u&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=wi-1;--c[a],c[i]+=wi}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(e.d=c,e.e=s,ls?Rn(e,p):e):new f(0)}function Fm(t,e,r){var s,i=Zs(t),a=sd(t.d),o=a.length;return e?(r&&(s=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+_h(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+_h(-i-1)+a,r&&(s=r-o)>0&&(a+=_h(s))):i>=o?(a+=_h(i+1-o),r&&(s=r-i-1)>0&&(a=a+"."+_h(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),r&&(s=r-o)>0&&(i+1===o&&(a+="."),a+=_h(s))),t.s<0?"-"+a:a}function h6(t,e){if(t.length>e)return t.length=e,!0}function AH(t){var e,r,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Sm+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return u6(o,a.toString())}else if(typeof a!="string")throw Error(Sm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,r1e.test(a))u6(o,a);else throw Error(Sm+a)}if(i.prototype=$t,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=AH,i.config=i.set=n1e,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<s.length;)t.hasOwnProperty(r=s[e++])||(t[r]=this[r]);return i.config(t),i}function n1e(t){if(!t||typeof t!="object")throw Error(Sl+"Object expected");var e,r,s,i=["precision",1,uv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((s=t[r=i[e]])!==void 0)if(hv(s)===s&&s>=i[e+1]&&s<=i[e+2])this[r]=s;else throw Error(Sm+r+": "+s);if((s=t[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Sm+r+": "+s);return this}var R_=AH(t1e);Mo=new R_(1);const _n=R_;function s1e(t){return l1e(t)||o1e(t)||a1e(t)||i1e()}function i1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(t,e){if(t){if(typeof t=="string")return vP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vP(t,e)}}function o1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function l1e(t){if(Array.isArray(t))return vP(t)}function vP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var c1e=function(e){return e},CH={},EH=function(e){return e===CH},f6=function(e){return function r(){return arguments.length===0||arguments.length===1&&EH(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},d1e=function t(e,r){return e===1?r:f6(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==CH}).length;return o>=e?r.apply(void 0,i):t(e-o,f6(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=i.map(function(h){return EH(h)?c.shift():h});return r.apply(void 0,s1e(u).concat(c))}))})},gw=function(e){return d1e(e.length,e)},xP=function(e,r){for(var s=[],i=e;i<r;++i)s[i-e]=i;return s},u1e=gw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),h1e=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];if(!r.length)return c1e;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},yP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},PH=function(e){var r=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r&&a.every(function(l,c){return l===r[c]})||(r=a,s=e.apply(void 0,a)),s}};function f1e(t){var e;return t===0?e=1:e=Math.floor(new _n(t).abs().log(10).toNumber())+1,e}function m1e(t,e,r){for(var s=new _n(t),i=0,a=[];s.lt(e)&&i<1e5;)a.push(s.toNumber()),s=s.add(r),i++;return a}var p1e=gw(function(t,e,r){var s=+t,i=+e;return s+r*(i-s)}),g1e=gw(function(t,e,r){var s=e-+t;return s=s||1/0,(r-t)/s}),v1e=gw(function(t,e,r){var s=e-+t;return s=s||1/0,Math.max(0,Math.min(1,(r-t)/s))});const vw={rangeStep:m1e,getDigitCount:f1e,interpolateNumber:p1e,uninterpolateNumber:g1e,uninterpolateTruncation:v1e};function bP(t){return b1e(t)||y1e(t)||TH(t)||x1e()}function x1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function b1e(t){if(Array.isArray(t))return jP(t)}function c0(t,e){return N1e(t)||w1e(t,e)||TH(t,e)||j1e()}function j1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TH(t,e){if(t){if(typeof t=="string")return jP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jP(t,e)}}function jP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function w1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],s=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return r}}function N1e(t){if(Array.isArray(t))return t}function _H(t){var e=c0(t,2),r=e[0],s=e[1],i=r,a=s;return r>s&&(i=s,a=r),[i,a]}function IH(t,e,r){if(t.lte(0))return new _n(0);var s=vw.getDigitCount(t.toNumber()),i=new _n(10).pow(s),a=t.div(i),o=s!==1?.05:.1,l=new _n(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return e?c:new _n(Math.ceil(c))}function S1e(t,e,r){var s=1,i=new _n(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(s=new _n(10).pow(vw.getDigitCount(t)-1),i=new _n(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new _n(Math.floor(t)))}else t===0?i=new _n(Math.floor((e-1)/2)):r||(i=new _n(Math.floor(t)));var o=Math.floor((e-1)/2),l=h1e(u1e(function(c){return i.add(new _n(c-o).mul(s)).toNumber()}),xP);return l(0,e)}function DH(t,e,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var a=IH(new _n(e).sub(t).div(r-1),s,i),o;t<=0&&e>=0?o=new _n(0):(o=new _n(t).add(e).div(2),o=o.sub(new _n(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new _n(e).sub(o).div(a).toNumber()),d=l+c+1;return d>r?DH(t,e,r,s,i+1):(d<r&&(c=e>0?c+(r-d):c,l=e>0?l:l+(r-d)),{step:a,tickMin:o.sub(new _n(l).mul(a)),tickMax:o.add(new _n(c).mul(a))})}function A1e(t){var e=c0(t,2),r=e[0],s=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=_H([r,s]),c=c0(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(bP(xP(0,i-1).map(function(){return 1/0}))):[].concat(bP(xP(0,i-1).map(function(){return-1/0})),[u]);return r>s?yP(h):h}if(d===u)return S1e(d,i,a);var f=DH(d,u,o,a),p=f.step,y=f.tickMin,v=f.tickMax,g=vw.rangeStep(y,v.add(new _n(.1).mul(p)),p);return r>s?yP(g):g}function C1e(t,e){var r=c0(t,2),s=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=_H([s,i]),l=c0(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var u=Math.max(e,2),h=IH(new _n(d).sub(c).div(u-1),a,0),f=[].concat(bP(vw.rangeStep(new _n(c),new _n(d).sub(new _n(.99).mul(h)),h)),[d]);return s>i?yP(f):f}var E1e=PH(A1e),P1e=PH(C1e),T1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function R1(){return R1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},R1.apply(this,arguments)}function _1e(t,e){return O1e(t)||k1e(t,e)||D1e(t,e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D1e(t,e){if(t){if(typeof t=="string")return m6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m6(t,e)}}function m6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function k1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function O1e(t){if(Array.isArray(t))return t}function R1e(t,e){if(t==null)return{};var r=L1e(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function L1e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function M1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F1e(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,RH(s.key),s)}}function $1e(t,e,r){return e&&F1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B1e(t,e,r){return e=L1(e),z1e(t,kH()?Reflect.construct(e,r||[],L1(t).constructor):e.apply(t,r))}function z1e(t,e){if(e&&(_g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q1e(t)}function q1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kH=function(){return!!t})()}function L1(t){return L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L1(t)}function U1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wP(t,e)}function wP(t,e){return wP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},wP(t,e)}function OH(t,e,r){return e=RH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RH(t){var e=V1e(t,"string");return _g(e)=="symbol"?e:e+""}function V1e(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(_g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ny=function(t){function e(){return M1e(this,e),B1e(this,e,arguments)}return U1e(e,t),$1e(e,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,f=R1e(s,T1e),p=Wt(f,!1);this.props.direction==="x"&&u.type!=="number"&&ef();var y=c.map(function(v){var g=d(v,l),b=g.x,j=g.y,w=g.value,C=g.errorVal;if(!C)return null;var E=[],N,A;if(Array.isArray(C)){var _=_1e(C,2);N=_[0],A=_[1]}else N=A=C;if(a==="vertical"){var k=u.scale,F=j+i,I=F+o,T=F-o,R=k(w-N),O=k(w+A);E.push({x1:O,y1:I,x2:O,y2:T}),E.push({x1:R,y1:F,x2:O,y2:F}),E.push({x1:R,y1:I,x2:R,y2:T})}else if(a==="horizontal"){var z=h.scale,q=b+i,B=q-o,K=q+o,Y=z(w-N),J=z(w+A);E.push({x1:B,y1:J,x2:K,y2:J}),E.push({x1:q,y1:Y,x2:q,y2:J}),E.push({x1:B,y1:Y,x2:K,y2:Y})}return be.createElement($r,R1({className:"recharts-errorBar",key:"bar-".concat(E.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},p),E.map(function(H){return be.createElement("line",R1({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return be.createElement($r,{className:"recharts-errorBars"},y)}}])}(be.Component);OH(ny,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});OH(ny,"displayName","ErrorBar");function d0(t){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d0(t)}function p6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Zf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(r),!0).forEach(function(s){H1e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function H1e(t,e,r){return e=W1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W1e(t){var e=G1e(t,"string");return d0(e)=="symbol"?e:e+""}function G1e(t,e){if(d0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(d0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LH=function(e){var r=e.children,s=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Do(r,lg);if(!o)return null;var l=lg.defaultProps,c=l!==void 0?Zf(Zf({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(u,h){var f=h.item,p=h.props,y=p.sectors||p.data||[];return u.concat(y.map(function(v){return{type:o.props.iconType||f.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(s||[]).map(function(u){var h=u.item,f=h.type.defaultProps,p=f!==void 0?Zf(Zf({},f),h.props):{},y=p.dataKey,v=p.name,g=p.legendType,b=p.hide;return{inactive:b,dataKey:y,type:c.iconType||g||"square",color:L_(h),value:v||y,payload:p}}),Zf(Zf(Zf({},c),lg.getWithHeight(o,i)),{},{payload:d,item:o})};function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}function g6(t){return Z1e(t)||X1e(t)||Y1e(t)||K1e()}function K1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1e(t,e){if(t){if(typeof t=="string")return NP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NP(t,e)}}function X1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Z1e(t){if(Array.isArray(t))return NP(t)}function NP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function v6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Cs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(r),!0).forEach(function(s){dg(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function dg(t,e,r){return e=Q1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q1e(t){var e=J1e(t,"string");return u0(e)=="symbol"?e:e+""}function J1e(t,e){if(u0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(u0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qs(t,e,r){return jr(t)||jr(e)?r:li(e)?Ho(t,e,r):hr(e)?e(t):r}function Cx(t,e,r,s){var i=Qbe(t,function(l){return qs(l,e)});if(r==="number"){var a=i.filter(function(l){return jt(l)||parseFloat(l)});return a.length?[pw(a),Fh(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!jr(l)}):i;return o.map(function(l){return li(l)||l instanceof Date?l:""})}var eje=function(e){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var u=d>0?i[d-1].coordinate:i[l-1].coordinate,h=i[d].coordinate,f=d>=l-1?i[0].coordinate:i[d+1].coordinate,p=void 0;if(Da(h-u)!==Da(f-h)){var y=[];if(Da(f-h)===Da(c[1]-c[0])){p=f;var v=h+c[1]-c[0];y[0]=Math.min(v,(v+u)/2),y[1]=Math.max(v,(v+u)/2)}else{p=u;var g=f+c[1]-c[0];y[0]=Math.min(h,(g+h)/2),y[1]=Math.max(h,(g+h)/2)}var b=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){o=i[d].index;break}}else{var j=Math.min(u,f),w=Math.max(u,f);if(e>(j+h)/2&&e<=(w+h)/2){o=i[d].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(s[C].coordinate+s[C+1].coordinate)/2||C>0&&C<l-1&&e>(s[C].coordinate+s[C-1].coordinate)/2&&e<=(s[C].coordinate+s[C+1].coordinate)/2||C===l-1&&e>(s[C].coordinate+s[C-1].coordinate)/2){o=s[C].index;break}return o},L_=function(e){var r,s=e,i=s.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Cs(Cs({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},tje=function(e){var r=e.barSize,s=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var u=a[l[c]].stackGroups,h=Object.keys(u),f=0,p=h.length;f<p;f++){var y=u[h[f]],v=y.items,g=y.cateAxisId,b=v.filter(function(A){return fu(A.type).indexOf("Bar")>=0});if(b&&b.length){var j=b[0].type.defaultProps,w=j!==void 0?Cs(Cs({},j),b[0].props):b[0].props,C=w.barSize,E=w[g];o[E]||(o[E]=[]);var N=jr(C)?r:C;o[E].push({item:b[0],stackList:b.slice(1),barSize:jr(N)?void 0:ka(N,s,0)})}}return o},rje=function(e){var r=e.barGap,s=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=ka(r,i,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=i/c,y=o.reduce(function(C,E){return C+E.barSize||0},0);y+=(c-1)*d,y>=i&&(y-=(c-1)*d,d=0),y>=i&&p>0&&(f=!0,p*=.9,y=c*p);var v=(i-y)/2>>0,g={offset:v-d,size:0};u=o.reduce(function(C,E){var N={item:E.item,position:{offset:g.offset+g.size+d,size:f?p:E.barSize}},A=[].concat(g6(C),[N]);return g=A[A.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(_){A.push({item:_,position:g})}),A},h)}else{var b=ka(s,i,0,!0);i-2*b-(c-1)*d<=0&&(d=0);var j=(i-2*b-(c-1)*d)/c;j>1&&(j>>=0);var w=l===+l?Math.min(j,l):j;u=o.reduce(function(C,E,N){var A=[].concat(g6(C),[{item:E.item,position:{offset:b+(j+d)*N+(j-w)/2,size:w}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(_){A.push({item:_,position:A[A.length-1].position})}),A},h)}return u},nje=function(e,r,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=LH({children:a,legendWidth:c});if(d){var u=i||{},h=u.width,f=u.height,p=d.align,y=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&jt(e[p]))return Cs(Cs({},e),{},dg({},p,e[p]+(h||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&jt(e[y]))return Cs(Cs({},e),{},dg({},y,e[y]+(f||0)))}return e},sje=function(e,r,s){return jr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},MH=function(e,r,s,i,a){var o=r.props.children,l=Wo(o,ny).filter(function(d){return sje(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var h=qs(u,s);if(jr(h))return d;var f=Array.isArray(h)?[pw(h),Fh(h)]:[h,h],p=c.reduce(function(y,v){var g=qs(u,v,0),b=f[0]-Math.abs(Array.isArray(g)?g[0]:g),j=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,y[0]),Math.max(j,y[1])]},[1/0,-1/0]);return[Math.min(p[0],d[0]),Math.max(p[1],d[1])]},[1/0,-1/0])}return null},ije=function(e,r,s,i,a){var o=r.map(function(l){return MH(e,l,s,a,i)}).filter(function(l){return!jr(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},FH=function(e,r,s,i,a){var o=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&MH(e,c,d,i)||Cx(e,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},$H=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},BH=function(e,r,s,i){if(i)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===r&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(r),o||l.push(s),l},hu=function(e,r,s){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(r||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&l?.length>=2?Da(l[0]-l[1])*2*d:d,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+d,value:h,offset:d}});return u.filter(function(h){return!lv(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:i(h)+d,value:h,index:f,offset:d}}):i.ticks&&!s?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+d,value:h,offset:d}}):i.domain().map(function(h,f){return{coordinate:i(h)+d,value:a?a[h]:h,index:f,offset:d}})},rC=new WeakMap,Sb=function(e,r){if(typeof r!="function")return e;rC.has(e)||rC.set(e,new WeakMap);var s=rC.get(e);if(s.has(r))return s.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,i),i},zH=function(e,r,s){var i=e.scale,a=e.type,o=e.layout,l=e.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:n0(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:_1(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:Ax(),realScaleType:"point"}:a==="category"?{scale:n0(),realScaleType:"band"}:{scale:_1(),realScaleType:"linear"};if(Om(i)){var c="scale".concat(ew(i));return{scale:(r6[c]||Ax)(),realScaleType:r6[c]?c:"point"}}return hr(i)?{scale:i}:{scale:Ax(),realScaleType:"point"}},x6=1e-4,qH=function(e){var r=e.domain();if(!(!r||r.length<=2)){var s=r.length,i=e.range(),a=Math.min(i[0],i[1])-x6,o=Math.max(i[0],i[1])+x6,l=e(r[0]),c=e(r[s-1]);(l<a||l>o||c<a||c>o)&&e.domain([r[0],r[s-1]])}},aje=function(e,r){if(!e)return null;for(var s=0,i=e.length;s<i;s++)if(e[s].item===r)return e[s].position;return null},oje=function(e,r){if(!r||r.length!==2||!jt(r[0])||!jt(r[1]))return e;var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!jt(e[0])||e[0]<s)&&(a[0]=s),(!jt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},lje=function(e){var r=e.length;if(!(r<=0))for(var s=0,i=e[0].length;s<i;++s)for(var a=0,o=0,l=0;l<r;++l){var c=lv(e[l][s][1])?e[l][s][0]:e[l][s][1];c>=0?(e[l][s][0]=a,e[l][s][1]=a+c,a=e[l][s][1]):(e[l][s][0]=o,e[l][s][1]=o+c,o=e[l][s][1])}},cje=function(e){var r=e.length;if(!(r<=0))for(var s=0,i=e[0].length;s<i;++s)for(var a=0,o=0;o<r;++o){var l=lv(e[o][s][1])?e[o][s][0]:e[o][s][1];l>=0?(e[o][s][0]=a,e[o][s][1]=a+l,a=e[o][s][1]):(e[o][s][0]=0,e[o][s][1]=0)}},dje={sign:lje,expand:Qpe,none:wg,silhouette:Jpe,wiggle:ege,positive:cje},uje=function(e,r,s){var i=r.map(function(l){return l.props.dataKey}),a=dje[s],o=Zpe().keys(i).value(function(l,c){return+qs(l,c,0)}).order(JE).offset(a);return o(e)},hje=function(e,r,s,i,a,o){if(!e)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(h,f){var p,y=(p=f.type)!==null&&p!==void 0&&p.defaultProps?Cs(Cs({},f.type.defaultProps),f.props):f.props,v=y.stackId,g=y.hide;if(g)return h;var b=y[s],j=h[b]||{hasStack:!1,stackGroups:{}};if(li(v)){var w=j.stackGroups[v]||{numericAxisId:s,cateAxisId:i,items:[]};w.items.push(f),j.hasStack=!0,j.stackGroups[v]=w}else j.stackGroups[Xm("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[f]};return Cs(Cs({},h),{},dg({},b,j))},c),u={};return Object.keys(d).reduce(function(h,f){var p=d[f];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,g){var b=p.stackGroups[g];return Cs(Cs({},v),{},dg({},g,{numericAxisId:s,cateAxisId:i,items:b.items,stackedData:uje(e,b.items,a)}))},y)}return Cs(Cs({},h),{},dg({},f,p))},u)},UH=function(e,r){var s=r.realScaleType,i=r.type,a=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=E1e(d,a,l);return e.domain([pw(u),Fh(u)]),{niceTicks:u}}if(a&&i==="number"){var h=e.domain(),f=P1e(h,a,l);return{niceTicks:f}}return null};function M1(t){var e=t.axis,r=t.ticks,s=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!jr(i[e.dataKey])){var l=h1(r,"value",i[e.dataKey]);if(l)return l.coordinate+s/2}return r[a]?r[a].coordinate+s/2:null}var c=qs(i,jr(o)?e.dataKey:o);return jr(c)?null:e.scale(c)}var y6=function(e){var r=e.axis,s=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return s[l]?s[l].coordinate+i:null;var c=qs(o,r.dataKey,r.domain[l]);return jr(c)?null:r.scale(c)-a/2+i},fje=function(e){var r=e.numericAxis,s=r.scale.domain();if(r.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},mje=function(e,r){var s,i=(s=e.type)!==null&&s!==void 0&&s.defaultProps?Cs(Cs({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(li(a)){var o=r[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},pje=function(e){return e.reduce(function(r,s){return[pw(s.concat([r[0]]).filter(jt)),Fh(s.concat([r[1]]).filter(jt))]},[1/0,-1/0])},VH=function(e,r,s){return Object.keys(e).reduce(function(i,a){var o=e[a],l=o.stackedData,c=l.reduce(function(d,u){var h=pje(u.slice(r,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},b6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,j6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SP=function(e,r,s){if(hr(e))return e(r,s);if(!Array.isArray(e))return r;var i=[];if(jt(e[0]))i[0]=s?e[0]:Math.min(e[0],r[0]);else if(b6.test(e[0])){var a=+b6.exec(e[0])[1];i[0]=r[0]-a}else hr(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(jt(e[1]))i[1]=s?e[1]:Math.max(e[1],r[1]);else if(j6.test(e[1])){var o=+j6.exec(e[1])[1];i[1]=r[1]+o}else hr(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},F1=function(e,r,s){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!s||i>0)return i}if(e&&r&&r.length>=2){for(var a=d_(r,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],u=a[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},w6=function(e,r,s){return!e||!e.length||Mm(e,Ho(s,"type.defaultProps.domain"))?r:e},HH=function(e,r){var s=e.type.defaultProps?Cs(Cs({},e.type.defaultProps),e.props):e.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Cs(Cs({},Wt(e,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:L_(e),value:qs(r,i),type:c,payload:r,chartType:d,hide:u})};function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function N6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function nu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(r),!0).forEach(function(s){WH(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function WH(t,e,r){return e=gje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gje(t){var e=vje(t,"string");return h0(e)=="symbol"?e:e+""}function vje(t,e){if(h0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(h0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xje(t,e){return wje(t)||jje(t,e)||bje(t,e)||yje()}function yje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bje(t,e){if(t){if(typeof t=="string")return S6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S6(t,e)}}function S6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function jje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function wje(t){if(Array.isArray(t))return t}var $1=Math.PI/180,Nje=function(e){return e*180/Math.PI},zn=function(e,r,s,i){return{x:e+Math.cos(-$1*i)*s,y:r+Math.sin(-$1*i)*s}},GH=function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},Sje=function(e,r,s,i,a){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=ka(e.cx,o,o/2),h=ka(e.cy,l,l/2),f=GH(o,l,s),p=ka(e.innerRadius,f,0),y=ka(e.outerRadius,f,f*.8),v=Object.keys(r);return v.reduce(function(g,b){var j=r[b],w=j.domain,C=j.reversed,E;if(jr(j.range))i==="angleAxis"?E=[c,d]:i==="radiusAxis"&&(E=[p,y]),C&&(E=[E[1],E[0]]);else{E=j.range;var N=E,A=xje(N,2);c=A[0],d=A[1]}var _=zH(j,a),k=_.realScaleType,F=_.scale;F.domain(w).range(E),qH(F);var I=UH(F,nu(nu({},j),{},{realScaleType:k})),T=nu(nu(nu({},j),I),{},{range:E,radius:y,realScaleType:k,scale:F,cx:u,cy:h,innerRadius:p,outerRadius:y,startAngle:c,endAngle:d});return nu(nu({},g),{},WH({},b,T))},{})},Aje=function(e,r){var s=e.x,i=e.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},Cje=function(e,r){var s=e.x,i=e.y,a=r.cx,o=r.cy,l=Aje({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:Nje(d),angleInRadian:d}},Eje=function(e){var r=e.startAngle,s=e.endAngle,i=Math.floor(r/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:r-o*360,endAngle:s-o*360}},Pje=function(e,r){var s=r.startAngle,i=r.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return e+l*360},A6=function(e,r){var s=e.x,i=e.y,a=Cje({x:s,y:i},r),o=a.radius,l=a.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=Eje(r),h=u.startAngle,f=u.endAngle,p=l,y;if(h<=f){for(;p>f;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=f}else{for(;p>h;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=h}return y?nu(nu({},r),{},{radius:o,angle:Pje(p,r)}):null},KH=function(e){return!S.isValidElement(e)&&!hr(e)&&typeof e!="boolean"?e.className:""};function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}var Tje=["offset"];function _je(t){return Oje(t)||kje(t)||Dje(t)||Ije()}function Ije(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dje(t,e){if(t){if(typeof t=="string")return AP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(t,e)}}function kje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oje(t){if(Array.isArray(t))return AP(t)}function AP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Rje(t,e){if(t==null)return{};var r=Lje(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function Lje(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function C6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function si(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(r),!0).forEach(function(s){Mje(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Mje(t,e,r){return e=Fje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fje(t){var e=$je(t,"string");return f0(e)=="symbol"?e:e+""}function $je(t,e){if(f0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(f0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},m0.apply(this,arguments)}var Bje=function(e){var r=e.value,s=e.formatter,i=jr(e.children)?r:e.children;return hr(s)?s(i):i},zje=function(e,r){var s=Da(r-e),i=Math.min(Math.abs(r-e),360);return s*i},qje=function(e,r,s){var i=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,g=(h+f)/2,b=zje(p,y),j=b>=0?1:-1,w,C;i==="insideStart"?(w=p+j*o,C=v):i==="insideEnd"?(w=y-j*o,C=!v):i==="end"&&(w=y+j*o,C=v),C=b<=0?C:!C;var E=zn(d,u,g,w),N=zn(d,u,g,w+(C?1:-1)*359),A="M".concat(E.x,",").concat(E.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(N.x,",").concat(N.y),_=jr(e.id)?Xm("recharts-radial-line-"):e.id;return be.createElement("text",m0({},s,{dominantBaseline:"central",className:Ir("recharts-radial-bar-label",l)}),be.createElement("defs",null,be.createElement("path",{id:_,d:A})),be.createElement("textPath",{xlinkHref:"#".concat(_)},r))},Uje=function(e){var r=e.viewBox,s=e.offset,i=e.position,a=r,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,u=a.startAngle,h=a.endAngle,f=(u+h)/2;if(i==="outside"){var p=zn(o,l,d+s,f),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,b=zn(o,l,g,f),j=b.x,w=b.y;return{x:j,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Vje=function(e){var r=e.viewBox,s=e.parentViewBox,i=e.offset,a=e.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*i,p=h>0?"end":"start",y=h>0?"start":"end",v=d>=0?1:-1,g=v*i,b=v>0?"end":"start",j=v>0?"start":"end";if(a==="top"){var w={x:l+d/2,y:c-h*i,textAnchor:"middle",verticalAnchor:p};return si(si({},w),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var C={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:y};return si(si({},C),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(a==="left"){var E={x:l-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return si(si({},E),s?{width:Math.max(E.x-s.x,0),height:u}:{})}if(a==="right"){var N={x:l+d+g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"};return si(si({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:u}:{})}var A=s?{width:d,height:u}:{};return a==="insideLeft"?si({x:l+g,y:c+u/2,textAnchor:j,verticalAnchor:"middle"},A):a==="insideRight"?si({x:l+d-g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},A):a==="insideTop"?si({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:y},A):a==="insideBottom"?si({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:p},A):a==="insideTopLeft"?si({x:l+g,y:c+f,textAnchor:j,verticalAnchor:y},A):a==="insideTopRight"?si({x:l+d-g,y:c+f,textAnchor:b,verticalAnchor:y},A):a==="insideBottomLeft"?si({x:l+g,y:c+u-f,textAnchor:j,verticalAnchor:p},A):a==="insideBottomRight"?si({x:l+d-g,y:c+u-f,textAnchor:b,verticalAnchor:p},A):ov(a)&&(jt(a.x)||dm(a.x))&&(jt(a.y)||dm(a.y))?si({x:l+ka(a.x,d),y:c+ka(a.y,u),textAnchor:"end",verticalAnchor:"end"},A):si({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Hje=function(e){return"cx"in e&&jt(e.cx)};function Ni(t){var e=t.offset,r=e===void 0?5:e,s=Rje(t,Tje),i=si({offset:r},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,u=i.className,h=u===void 0?"":u,f=i.textBreakAll;if(!a||jr(l)&&jr(c)&&!S.isValidElement(d)&&!hr(d))return null;if(S.isValidElement(d))return S.cloneElement(d,i);var p;if(hr(d)){if(p=S.createElement(d,i),S.isValidElement(p))return p}else p=Bje(i);var y=Hje(a),v=Wt(i,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return qje(i,p,v);var g=y?Uje(i):Vje(i);return be.createElement(Lm,m0({className:Ir("recharts-label",h)},v,g,{breakAll:f}),p)}Ni.displayName="Label";var YH=function(e){var r=e.cx,s=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,h=e.x,f=e.y,p=e.top,y=e.left,v=e.width,g=e.height,b=e.clockWise,j=e.labelViewBox;if(j)return j;if(jt(v)&&jt(g)){if(jt(h)&&jt(f))return{x:h,y:f,width:v,height:g};if(jt(p)&&jt(y))return{x:p,y,width:v,height:g}}return jt(h)&&jt(f)?{x:h,y:f,width:0,height:0}:jt(r)&&jt(s)?{cx:r,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},Wje=function(e,r){return e?e===!0?be.createElement(Ni,{key:"label-implicit",viewBox:r}):li(e)?be.createElement(Ni,{key:"label-implicit",viewBox:r,value:e}):S.isValidElement(e)?e.type===Ni?S.cloneElement(e,{key:"label-implicit",viewBox:r}):be.createElement(Ni,{key:"label-implicit",content:e,viewBox:r}):hr(e)?be.createElement(Ni,{key:"label-implicit",content:e,viewBox:r}):ov(e)?be.createElement(Ni,m0({viewBox:r},e,{key:"label-implicit"})):null:null},Gje=function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&s&&!e.label)return null;var i=e.children,a=YH(e),o=Wo(i,Ni).map(function(c,d){return S.cloneElement(c,{viewBox:r||a,key:"label-".concat(d)})});if(!s)return o;var l=Wje(e.label,r||a);return[l].concat(_je(o))};Ni.parseViewBox=YH;Ni.renderCallByParent=Gje;var nC,E6;function Kje(){if(E6)return nC;E6=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return nC=t,nC}var Yje=Kje();const Xje=Kr(Yje);function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}var Zje=["valueAccessor"],Qje=["data","dataKey","clockWise","id","textBreakAll"];function Jje(t){return nwe(t)||rwe(t)||twe(t)||ewe()}function ewe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function twe(t,e){if(t){if(typeof t=="string")return CP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CP(t,e)}}function rwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nwe(t){if(Array.isArray(t))return CP(t)}function CP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function B1(){return B1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},B1.apply(this,arguments)}function P6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function T6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(r),!0).forEach(function(s){swe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function swe(t,e,r){return e=iwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iwe(t){var e=awe(t,"string");return p0(e)=="symbol"?e:e+""}function awe(t,e){if(p0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(p0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _6(t,e){if(t==null)return{};var r=owe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function owe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var lwe=function(e){return Array.isArray(e.value)?Xje(e.value):e.value};function cd(t){var e=t.valueAccessor,r=e===void 0?lwe:e,s=_6(t,Zje),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=_6(s,Qje);return!i||!i.length?null:be.createElement($r,{className:"recharts-label-list"},i.map(function(u,h){var f=jr(a)?r(u,h):qs(u&&u.payload,a),p=jr(l)?{}:{id:"".concat(l,"-").concat(h)};return be.createElement(Ni,B1({},Wt(u,!0),d,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:Ni.parseViewBox(jr(o)?u:T6(T6({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}cd.displayName="LabelList";function cwe(t,e){return t?t===!0?be.createElement(cd,{key:"labelList-implicit",data:e}):be.isValidElement(t)||hr(t)?be.createElement(cd,{key:"labelList-implicit",data:e,content:t}):ov(t)?be.createElement(cd,B1({data:e},t,{key:"labelList-implicit"})):null:null}function dwe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var s=t.children,i=Wo(s,cd).map(function(o,l){return S.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return i;var a=cwe(t.label,e);return[a].concat(Jje(i))}cd.renderCallByParent=dwe;function g0(t){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g0(t)}function EP(){return EP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},EP.apply(this,arguments)}function I6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function D6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(r),!0).forEach(function(s){uwe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function uwe(t,e,r){return e=hwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hwe(t){var e=fwe(t,"string");return g0(e)=="symbol"?e:e+""}function fwe(t,e){if(g0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(g0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mwe=function(e,r){var s=Da(r-e),i=Math.min(Math.abs(r-e),359.999);return s*i},Ab=function(e){var r=e.cx,s=e.cy,i=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+i,h=Math.asin(c/u)/$1,f=d?a:a+o*h,p=zn(r,s,u,f),y=zn(r,s,i,f),v=d?a-o*h:a,g=zn(r,s,u*Math.cos(h*$1),v);return{center:p,circleTangency:y,lineTangency:g,theta:h}},XH=function(e){var r=e.cx,s=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=mwe(o,l),d=o+c,u=zn(r,s,a,o),h=zn(r,s,a,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=zn(r,s,i,o),y=zn(r,s,i,d);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(r,",").concat(s," Z");return f},pwe=function(e){var r=e.cx,s=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,h=Da(u-d),f=Ab({cx:r,cy:s,radius:a,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),p=f.circleTangency,y=f.lineTangency,v=f.theta,g=Ab({cx:r,cy:s,radius:a,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,j=g.lineTangency,w=g.theta,C=c?Math.abs(d-u):Math.abs(d-u)-v-w;if(C<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):XH({cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:u});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
  `);if(i>0){var N=Ab({cx:r,cy:s,radius:i,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=N.circleTangency,_=N.lineTangency,k=N.theta,F=Ab({cx:r,cy:s,radius:i,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=F.circleTangency,T=F.lineTangency,R=F.theta,O=c?Math.abs(d-u):Math.abs(d-u)-k-R;if(O<0&&o===0)return"".concat(E,"L").concat(r,",").concat(s,"Z");E+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(O>180),",").concat(+(h>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else E+="L".concat(r,",").concat(s,"Z");return E},gwe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZH=function(e){var r=D6(D6({},gwe),e),s=r.cx,i=r.cy,a=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,h=r.endAngle,f=r.className;if(o<a||u===h)return null;var p=Ir("recharts-sector",f),y=o-a,v=ka(l,y,0,!0),g;return v>0&&Math.abs(u-h)<360?g=pwe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):g=XH({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:h}),be.createElement("path",EP({},Wt(r,!0),{className:p,d:g,role:"img"}))};function v0(t){"@babel/helpers - typeof";return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v0(t)}function PP(){return PP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},PP.apply(this,arguments)}function k6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function O6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k6(Object(r),!0).forEach(function(s){vwe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vwe(t,e,r){return e=xwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xwe(t){var e=ywe(t,"string");return v0(e)=="symbol"?e:e+""}function ywe(t,e){if(v0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(v0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R6={curveBasisClosed:Bpe,curveBasisOpen:zpe,curveBasis:$pe,curveBumpX:Ape,curveBumpY:Cpe,curveLinearClosed:qpe,curveLinear:rw,curveMonotoneX:Upe,curveMonotoneY:Vpe,curveNatural:Hpe,curveStep:Wpe,curveStepAfter:Kpe,curveStepBefore:Gpe},Cb=function(e){return e.x===+e.x&&e.y===+e.y},Jv=function(e){return e.x},ex=function(e){return e.y},bwe=function(e,r){if(hr(e))return e;var s="curve".concat(ew(e));return(s==="curveMonotone"||s==="curveBump")&&r?R6["".concat(s).concat(r==="vertical"?"Y":"X")]:R6[s]||rw},jwe=function(e){var r=e.type,s=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=bwe(s,l),h=d?a.filter(function(v){return Cb(v)}):a,f;if(Array.isArray(o)){var p=d?o.filter(function(v){return Cb(v)}):o,y=h.map(function(v,g){return O6(O6({},v),{},{base:p[g]})});return l==="vertical"?f=gb().y(ex).x1(Jv).x0(function(v){return v.base.x}):f=gb().x(Jv).y1(ex).y0(function(v){return v.base.y}),f.defined(Cb).curve(u),f(y)}return l==="vertical"&&jt(o)?f=gb().y(ex).x1(Jv).x0(o):jt(o)?f=gb().x(Jv).y1(ex).y0(o):f=YU().x(Jv).y(ex),f.defined(Cb).curve(u),f(h)},Am=function(e){var r=e.className,s=e.points,i=e.path,a=e.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?jwe(e):i;return S.createElement("path",PP({},Wt(e,!1),f1(e),{className:Ir("recharts-curve",r),d:o,ref:a}))},wwe=Object.getOwnPropertyNames,Nwe=Object.getOwnPropertySymbols,Swe=Object.prototype.hasOwnProperty;function L6(t,e){return function(s,i,a){return t(s,i,a)&&e(s,i,a)}}function Eb(t){return function(r,s,i){if(!r||!s||typeof r!="object"||typeof s!="object")return t(r,s,i);var a=i.cache,o=a.get(r),l=a.get(s);if(o&&l)return o===s&&l===r;a.set(r,s),a.set(s,r);var c=t(r,s,i);return a.delete(r),a.delete(s),c}}function M6(t){return wwe(t).concat(Nwe(t))}var Awe=Object.hasOwn||function(t,e){return Swe.call(t,e)};function Jm(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Cwe="__v",Ewe="__o",Pwe="_owner",F6=Object.getOwnPropertyDescriptor,$6=Object.keys;function Twe(t,e,r){var s=t.length;if(e.length!==s)return!1;for(;s-- >0;)if(!r.equals(t[s],e[s],s,s,t,e,r))return!1;return!0}function _we(t,e){return Jm(t.getTime(),e.getTime())}function Iwe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Dwe(t,e){return t===e}function B6(t,e,r){var s=t.size;if(s!==e.size)return!1;if(!s)return!0;for(var i=new Array(s),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=e.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(i[h]){h++;continue}var f=o.value,p=l.value;if(r.equals(f[0],p[0],c,h,t,e,r)&&r.equals(f[1],p[1],f[0],p[0],t,e,r)){u=i[h]=!0;break}h++}if(!u)return!1;c++}return!0}var kwe=Jm;function Owe(t,e,r){var s=$6(t),i=s.length;if($6(e).length!==i)return!1;for(;i-- >0;)if(!QH(t,e,r,s[i]))return!1;return!0}function tx(t,e,r){var s=M6(t),i=s.length;if(M6(e).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!QH(t,e,r,a)||(o=F6(t,a),l=F6(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Rwe(t,e){return Jm(t.valueOf(),e.valueOf())}function Lwe(t,e){return t.source===e.source&&t.flags===e.flags}function z6(t,e,r){var s=t.size;if(s!==e.size)return!1;if(!s)return!0;for(var i=new Array(s),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!i[u]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){d=i[u]=!0;break}u++}if(!d)return!1}return!0}function Mwe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Fwe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function QH(t,e,r,s){return(s===Pwe||s===Ewe||s===Cwe)&&(t.$$typeof||e.$$typeof)?!0:Awe(e,s)&&r.equals(t[s],e[s],s,s,t,e,r)}var $we="[object Arguments]",Bwe="[object Boolean]",zwe="[object Date]",qwe="[object Error]",Uwe="[object Map]",Vwe="[object Number]",Hwe="[object Object]",Wwe="[object RegExp]",Gwe="[object Set]",Kwe="[object String]",Ywe="[object URL]",Xwe=Array.isArray,q6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,U6=Object.assign,Zwe=Object.prototype.toString.call.bind(Object.prototype.toString);function Qwe(t){var e=t.areArraysEqual,r=t.areDatesEqual,s=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(y,v,g){if(y===v)return!0;if(y==null||v==null)return!1;var b=typeof y;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?o(y,v,g):b==="function"?i(y,v,g):!1;var j=y.constructor;if(j!==v.constructor)return!1;if(j===Object)return l(y,v,g);if(Xwe(y))return e(y,v,g);if(q6!=null&&q6(y))return h(y,v,g);if(j===Date)return r(y,v,g);if(j===RegExp)return d(y,v,g);if(j===Map)return a(y,v,g);if(j===Set)return u(y,v,g);var w=Zwe(y);return w===zwe?r(y,v,g):w===Wwe?d(y,v,g):w===Uwe?a(y,v,g):w===Gwe?u(y,v,g):w===Hwe?typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,g):w===Ywe?f(y,v,g):w===qwe?s(y,v,g):w===$we?l(y,v,g):w===Bwe||w===Vwe||w===Kwe?c(y,v,g):!1}}function Jwe(t){var e=t.circular,r=t.createCustomConfig,s=t.strict,i={areArraysEqual:s?tx:Twe,areDatesEqual:_we,areErrorsEqual:Iwe,areFunctionsEqual:Dwe,areMapsEqual:s?L6(B6,tx):B6,areNumbersEqual:kwe,areObjectsEqual:s?tx:Owe,arePrimitiveWrappersEqual:Rwe,areRegExpsEqual:Lwe,areSetsEqual:s?L6(z6,tx):z6,areTypedArraysEqual:s?tx:Mwe,areUrlsEqual:Fwe};if(r&&(i=U6({},i,r(i))),e){var a=Eb(i.areArraysEqual),o=Eb(i.areMapsEqual),l=Eb(i.areObjectsEqual),c=Eb(i.areSetsEqual);i=U6({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function e2e(t){return function(e,r,s,i,a,o,l){return t(e,r,l)}}function t2e(t){var e=t.circular,r=t.comparator,s=t.createState,i=t.equals,a=t.strict;if(s)return function(c,d){var u=s(),h=u.cache,f=h===void 0?e?new WeakMap:void 0:h,p=u.meta;return r(c,d,{cache:f,equals:i,meta:p,strict:a})};if(e)return function(c,d){return r(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return r(c,d,o)}}var r2e=gf();gf({strict:!0});gf({circular:!0});gf({circular:!0,strict:!0});gf({createInternalComparator:function(){return Jm}});gf({strict:!0,createInternalComparator:function(){return Jm}});gf({circular:!0,createInternalComparator:function(){return Jm}});gf({circular:!0,createInternalComparator:function(){return Jm},strict:!0});function gf(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,s=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,l=Jwe(t),c=Qwe(l),d=s?s(c):e2e(c);return t2e({circular:r,comparator:c,createState:i,equals:d,strict:o})}function n2e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function V6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):n2e(i)};requestAnimationFrame(s)}function TP(t){"@babel/helpers - typeof";return TP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TP(t)}function s2e(t){return l2e(t)||o2e(t)||a2e(t)||i2e()}function i2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2e(t,e){if(t){if(typeof t=="string")return H6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H6(t,e)}}function H6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function o2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function l2e(t){if(Array.isArray(t))return t}function c2e(){var t={},e=function(){return null},r=!1,s=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,l=s2e(o),c=l[0],d=l.slice(1);if(typeof c=="number"){V6(i.bind(null,d),c);return}i(c),V6(i.bind(null,d));return}TP(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,s(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function x0(t){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x0(t)}function W6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function G6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W6(Object(r),!0).forEach(function(s){JH(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function JH(t,e,r){return e=d2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d2e(t){var e=u2e(t,"string");return x0(e)==="symbol"?e:String(e)}function u2e(t,e){if(x0(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(x0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h2e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},f2e=function(e){return e},m2e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Ex=function(e,r){return Object.keys(r).reduce(function(s,i){return G6(G6({},s),{},JH({},i,e(i,r[i])))},{})},K6=function(e,r,s){return e.map(function(i){return"".concat(m2e(i)," ").concat(r,"ms ").concat(s)}).join(",")};function p2e(t,e){return x2e(t)||v2e(t,e)||eW(t,e)||g2e()}function g2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function x2e(t){if(Array.isArray(t))return t}function y2e(t){return w2e(t)||j2e(t)||eW(t)||b2e()}function b2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(t,e){if(t){if(typeof t=="string")return _P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _P(t,e)}}function j2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function w2e(t){if(Array.isArray(t))return _P(t)}function _P(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var z1=1e-4,tW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},rW=function(e,r){return e.map(function(s,i){return s*Math.pow(r,i)}).reduce(function(s,i){return s+i})},Y6=function(e,r){return function(s){var i=tW(e,r);return rW(i,s)}},N2e=function(e,r){return function(s){var i=tW(e,r),a=[].concat(y2e(i.map(function(o,l){return o*l}).slice(1)),[0]);return rW(a,s)}},X6=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var i=r[0],a=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=p2e(d,4);i=u[0],a=u[1],o=u[2],l=u[3]}}}var h=Y6(i,o),f=Y6(a,l),p=N2e(i,o),y=function(b){return b>1?1:b<0?0:b},v=function(b){for(var j=b>1?1:b,w=j,C=0;C<8;++C){var E=h(w)-j,N=p(w);if(Math.abs(E-j)<z1||N<z1)return f(w);w=y(w-E/N)}return f(w)};return v.isStepper=!1,v},S2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,s=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,o=e.dt,l=o===void 0?17:o,c=function(u,h,f){var p=-(u-h)*s,y=f*a,v=f+(p-y)*l/1e3,g=f*l/1e3+u;return Math.abs(g-h)<z1&&Math.abs(v)<z1?[h,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},A2e=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return X6(i);case"spring":return S2e();default:if(i.split("(")[0]==="cubic-bezier")return X6(i)}return typeof i=="function"?i:null};function y0(t){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y0(t)}function Z6(t){return P2e(t)||E2e(t)||nW(t)||C2e()}function C2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function P2e(t){if(Array.isArray(t))return DP(t)}function Q6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function $i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Q6(Object(r),!0).forEach(function(s){IP(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function IP(t,e,r){return e=T2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T2e(t){var e=_2e(t,"string");return y0(e)==="symbol"?e:String(e)}function _2e(t,e){if(y0(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(y0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I2e(t,e){return O2e(t)||k2e(t,e)||nW(t,e)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nW(t,e){if(t){if(typeof t=="string")return DP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DP(t,e)}}function DP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function k2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function O2e(t){if(Array.isArray(t))return t}var q1=function(e,r,s){return e+(r-e)*s},kP=function(e){var r=e.from,s=e.to;return r!==s},R2e=function t(e,r,s){var i=Ex(function(a,o){if(kP(o)){var l=e(o.from,o.to,o.velocity),c=I2e(l,2),d=c[0],u=c[1];return $i($i({},o),{},{from:d,velocity:u})}return o},r);return s<1?Ex(function(a,o){return kP(o)?$i($i({},o),{},{velocity:q1(o.velocity,i[a].velocity,s),from:q1(o.from,i[a].from,s)}):o},r):t(e,i,s-1)};const L2e=function(t,e,r,s,i){var a=h2e(t,e),o=a.reduce(function(g,b){return $i($i({},g),{},IP({},b,[t[b],e[b]]))},{}),l=a.reduce(function(g,b){return $i($i({},g),{},IP({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return Ex(function(b,j){return j.from},l)},p=function(){return!Object.values(l).filter(kP).length},y=function(b){d||(d=b);var j=b-d,w=j/r.dt;l=R2e(r,l,w),i($i($i($i({},t),e),f())),d=b,p()||(c=requestAnimationFrame(h))},v=function(b){u||(u=b);var j=(b-u)/s,w=Ex(function(E,N){return q1.apply(void 0,Z6(N).concat([r(j)]))},o);if(i($i($i($i({},t),e),w)),j<1)c=requestAnimationFrame(h);else{var C=Ex(function(E,N){return q1.apply(void 0,Z6(N).concat([r(1)]))},o);i($i($i($i({},t),e),C))}};return h=r.isStepper?y:v,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}var M2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function F2e(t,e){if(t==null)return{};var r=$2e(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function $2e(t,e){if(t==null)return{};var r={},s=Object.keys(t),i,a;for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function sC(t){return U2e(t)||q2e(t)||z2e(t)||B2e()}function B2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z2e(t,e){if(t){if(typeof t=="string")return OP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OP(t,e)}}function q2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U2e(t){if(Array.isArray(t))return OP(t)}function OP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function J6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J6(Object(r),!0).forEach(function(s){cx(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J6(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function cx(t,e,r){return e=sW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H2e(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,sW(s.key),s)}}function W2e(t,e,r){return e&&H2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sW(t){var e=G2e(t,"string");return Ig(e)==="symbol"?e:String(e)}function G2e(t,e){if(Ig(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ig(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RP(t,e)}function RP(t,e){return RP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},RP(t,e)}function Y2e(t){var e=X2e();return function(){var s=U1(t),i;if(e){var a=U1(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return LP(this,i)}}function LP(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MP(t)}function MP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U1(t){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U1(t)}var hc=function(t){K2e(r,t);var e=Y2e(r);function r(s,i){var a;V2e(this,r),a=e.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(MP(a)),a.changeStyle=a.changeStyle.bind(MP(a)),!l||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),LP(a);if(h&&h.length)a.state={style:h[0].style};else if(d){if(typeof f=="function")return a.state={style:d},LP(a);a.state={style:c?cx({},c,d):d}}else a.state={style:{}};return a}return W2e(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,u=a.to,h=a.from,f=this.state.style;if(l){if(!o){var p={style:c?cx({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(p);return}if(!(r2e(i.to,u)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||d?h:i.to;if(this.state&&f){var g={style:c?cx({},c,v):v};(c&&f[c]!==v||!c&&f!==v)&&this.setState(g)}this.runAnimation(Zl(Zl({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,u=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,p=L2e(o,l,A2e(d),c,this.changeStyle),y=function(){a.stopJSAnimation=p()};this.manager.start([f,u,y,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,p=function(v,g,b){if(b===0)return v;var j=g.duration,w=g.easing,C=w===void 0?"ease":w,E=g.style,N=g.properties,A=g.onAnimationEnd,_=b>0?o[b-1]:g,k=N||Object.keys(E);if(typeof C=="function"||C==="spring")return[].concat(sC(v),[a.runJSAnimation.bind(a,{from:_.style,to:E,duration:j,easing:C}),j]);var F=K6(k,j,C),I=Zl(Zl(Zl({},_.style),E),{},{transition:F});return[].concat(sC(v),[I,j,A]).filter(f2e)};return this.manager.start([c].concat(sC(o.reduce(p,[u,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=c2e());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,u=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,p=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof d=="function"||typeof p=="function"||d==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var v=l?cx({},l,c):c,g=K6(Object.keys(v),o,d);y.start([u,a,Zl(Zl({},v),{},{transition:g}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=F2e(i,M2e),d=S.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!l||d===0||o<=0)return a;var h=function(p){var y=p.props,v=y.style,g=v===void 0?{}:v,b=y.className,j=S.cloneElement(p,Zl(Zl({},c),{},{style:Zl(Zl({},g),u),className:b}));return j};return d===1?h(S.Children.only(a)):be.createElement("div",null,S.Children.map(a,function(f){return h(f)}))}}]),r}(S.PureComponent);hc.displayName="Animate";hc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};hc.propTypes={from:Xt.oneOfType([Xt.object,Xt.string]),to:Xt.oneOfType([Xt.object,Xt.string]),attributeName:Xt.string,duration:Xt.number,begin:Xt.number,easing:Xt.oneOfType([Xt.string,Xt.func]),steps:Xt.arrayOf(Xt.shape({duration:Xt.number.isRequired,style:Xt.object.isRequired,easing:Xt.oneOfType([Xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Xt.func]),properties:Xt.arrayOf("string"),onAnimationEnd:Xt.func})),children:Xt.oneOfType([Xt.node,Xt.func]),isActive:Xt.bool,canBegin:Xt.bool,onAnimationEnd:Xt.func,shouldReAnimate:Xt.bool,onAnimationStart:Xt.func,onAnimationReStart:Xt.func};function b0(t){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(t)}function V1(){return V1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},V1.apply(this,arguments)}function Z2e(t,e){return tNe(t)||eNe(t,e)||J2e(t,e)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(t,e){if(t){if(typeof t=="string")return e8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(t,e)}}function e8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function eNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function tNe(t){if(Array.isArray(t))return t}function t8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function r8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t8(Object(r),!0).forEach(function(s){rNe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function rNe(t,e,r){return e=nNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nNe(t){var e=sNe(t,"string");return b0(e)=="symbol"?e:e+""}function sNe(t,e){if(b0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(b0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n8=function(e,r,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,u;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,p=4;f<p;f++)h[f]=a[f]>o?o:a[f];u="M".concat(e,",").concat(r+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(r)),u+="L ".concat(e+s-c*h[1],",").concat(r),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+s,",").concat(r+l*h[1])),u+="L ".concat(e+s,",").concat(r+i-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+s-c*h[2],",").concat(r+i)),u+="L ".concat(e+c*h[3],",").concat(r+i),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(r+i-l*h[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var y=Math.min(o,a);u="M ".concat(e,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+c*y,",").concat(r,`
            L `).concat(e+s-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+s,",").concat(r+l*y,`
            L `).concat(e+s,",").concat(r+i-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e+s-c*y,",").concat(r+i,`
            L `).concat(e+c*y,",").concat(r+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(d,",").concat(e,",").concat(r+i-l*y," Z")}else u="M ".concat(e,",").concat(r," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return u},iNe=function(e,r){if(!e||!r)return!1;var s=e.x,i=e.y,a=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),u=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return s>=d&&s<=u&&i>=h&&i<=f}return!1},aNe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},M_=function(e){var r=r8(r8({},aNe),e),s=S.useRef(),i=S.useState(-1),a=Z2e(i,2),o=a[0],l=a[1];S.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var C=s.current.getTotalLength();C&&l(C)}catch{}},[]);var c=r.x,d=r.y,u=r.width,h=r.height,f=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,j=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var w=Ir("recharts-rectangle",p);return j?be.createElement(hc,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:v,animationEasing:y,isActive:j},function(C){var E=C.width,N=C.height,A=C.x,_=C.y;return be.createElement(hc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:b,easing:y},be.createElement("path",V1({},Wt(r,!0),{className:w,d:n8(A,_,E,N,f),ref:s})))}):be.createElement("path",V1({},Wt(r,!0),{className:w,d:n8(c,d,u,h,f)}))},oNe=["points","className","baseLinePoints","connectNulls"];function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},eg.apply(this,arguments)}function lNe(t,e){if(t==null)return{};var r=cNe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function cNe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function s8(t){return fNe(t)||hNe(t)||uNe(t)||dNe()}function dNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uNe(t,e){if(t){if(typeof t=="string")return FP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FP(t,e)}}function hNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fNe(t){if(Array.isArray(t))return FP(t)}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var i8=function(e){return e&&e.x===+e.x&&e.y===+e.y},mNe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(s){i8(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),i8(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Px=function(e,r){var s=mNe(e);r&&(s=[s.reduce(function(a,o){return[].concat(s8(a),s8(o))},[])]);var i=s.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(i,"Z"):i},pNe=function(e,r,s){var i=Px(e,s);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Px(r.reverse(),s).slice(1))},gNe=function(e){var r=e.points,s=e.className,i=e.baseLinePoints,a=e.connectNulls,o=lNe(e,oNe);if(!r||!r.length)return null;var l=Ir("recharts-polygon",s);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=pNe(r,i,a);return be.createElement("g",{className:l},be.createElement("path",eg({},Wt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?be.createElement("path",eg({},Wt(o,!0),{fill:"none",d:Px(r,a)})):null,c?be.createElement("path",eg({},Wt(o,!0),{fill:"none",d:Px(i,a)})):null)}var u=Px(r,a);return be.createElement("path",eg({},Wt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$P.apply(this,arguments)}var sy=function(e){var r=e.cx,s=e.cy,i=e.r,a=e.className,o=Ir("recharts-dot",a);return r===+r&&s===+s&&i===+i?S.createElement("circle",$P({},Wt(e,!1),f1(e),{className:o,cx:r,cy:s,r:i})):null};function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}var vNe=["x","y","top","left","width","height","className"];function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},BP.apply(this,arguments)}function a8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function xNe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(r),!0).forEach(function(s){yNe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function yNe(t,e,r){return e=bNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bNe(t){var e=jNe(t,"string");return j0(e)=="symbol"?e:e+""}function jNe(t,e){if(j0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(j0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wNe(t,e){if(t==null)return{};var r=NNe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function NNe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var SNe=function(e,r,s,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(s)},ANe=function(e){var r=e.x,s=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,h=u===void 0?0:u,f=e.height,p=f===void 0?0:f,y=e.className,v=wNe(e,vNe),g=xNe({x:s,y:a,top:l,left:d,width:h,height:p},v);return!jt(s)||!jt(a)||!jt(h)||!jt(p)||!jt(l)||!jt(d)?null:be.createElement("path",BP({},Wt(g,!0),{className:Ir("recharts-cross",y),d:SNe(s,a,h,p,l,d)}))},iC,o8;function CNe(){if(o8)return iC;o8=1;var t=mw(),e=yH(),r=yd();function s(i,a){return i&&i.length?t(i,r(a,2),e):void 0}return iC=s,iC}var ENe=CNe();const PNe=Kr(ENe);var aC,l8;function TNe(){if(l8)return aC;l8=1;var t=mw(),e=yd(),r=bH();function s(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return aC=s,aC}var _Ne=TNe();const INe=Kr(_Ne);var DNe=["cx","cy","angle","ticks","axisLine"],kNe=["ticks","tick","angle","tickFormatter","stroke"];function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function Tx(){return Tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Tx.apply(this,arguments)}function c8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Qf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c8(Object(r),!0).forEach(function(s){xw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function d8(t,e){if(t==null)return{};var r=ONe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function ONe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function RNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,aW(s.key),s)}}function LNe(t,e,r){return e&&u8(t.prototype,e),r&&u8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MNe(t,e,r){return e=H1(e),FNe(t,iW()?Reflect.construct(e,r||[],H1(t).constructor):e.apply(t,r))}function FNe(t,e){if(e&&(Dg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ne(t)}function $Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iW=function(){return!!t})()}function H1(t){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H1(t)}function BNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zP(t,e)}function zP(t,e){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},zP(t,e)}function xw(t,e,r){return e=aW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aW(t){var e=zNe(t,"string");return Dg(e)=="symbol"?e:e+""}function zNe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yw=function(t){function e(){return RNe(this,e),MNe(this,e,arguments)}return BNe(e,t),LNe(e,[{key:"getTickValueCoord",value:function(s){var i=s.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return zn(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,i;switch(s){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=PNe(l,function(u){return u.coordinate||0}),d=INe(l,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=d8(s,DNe),u=l.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),h=zn(i,a,u[0],o),f=zn(i,a,u[1],o),p=Qf(Qf(Qf({},Wt(d,!1)),{},{fill:"none"},Wt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return be.createElement("line",Tx({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,u=d8(i,kNe),h=this.getTickTextAnchor(),f=Wt(u,!1),p=Wt(o,!1),y=a.map(function(v,g){var b=s.getTickValueCoord(v),j=Qf(Qf(Qf(Qf({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:d},p),{},{index:g},b),{},{payload:v});return be.createElement($r,Tx({className:Ir("recharts-polar-radius-axis-tick",KH(o)),key:"tick-".concat(v.coordinate)},Rm(s.props,v,g)),e.renderTickItem(o,j,c?c(v.value,g):v.value))});return be.createElement($r,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.axisLine,o=s.tick;return!i||!i.length?null:be.createElement($r,{className:Ir("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Ni.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return be.isValidElement(s)?o=be.cloneElement(s,i):hr(s)?o=s(i):o=be.createElement(Lm,Tx({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(S.PureComponent);xw(yw,"displayName","PolarRadiusAxis");xw(yw,"axisType","radiusAxis");xw(yw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},am.apply(this,arguments)}function h8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Jf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(r),!0).forEach(function(s){bw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function qNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,lW(s.key),s)}}function UNe(t,e,r){return e&&f8(t.prototype,e),r&&f8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VNe(t,e,r){return e=W1(e),HNe(t,oW()?Reflect.construct(e,r||[],W1(t).constructor):e.apply(t,r))}function HNe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WNe(t)}function WNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oW=function(){return!!t})()}function W1(t){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W1(t)}function GNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}function qP(t,e){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},qP(t,e)}function bw(t,e,r){return e=lW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lW(t){var e=KNe(t,"string");return kg(e)=="symbol"?e:e+""}function KNe(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YNe=Math.PI/180,m8=1e-5,jw=function(t){function e(){return qNe(this,e),VNe(this,e,arguments)}return GNe(e,t),UNe(e,[{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,u=d||8,h=zn(a,o,l,s.coordinate),f=zn(a,o,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var i=this.props.orientation,a=Math.cos(-s.coordinate*YNe),o;return a>m8?o=i==="outer"?"start":"end":a<-m8?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=Jf(Jf({},Wt(this.props,!1)),{},{fill:"none"},Wt(l,!1));if(c==="circle")return be.createElement(sy,am({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:a,r:o}));var u=this.props.ticks,h=u.map(function(f){return zn(i,a,o,f.coordinate)});return be.createElement(gNe,am({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,u=Wt(this.props,!1),h=Wt(o,!1),f=Jf(Jf({},u),{},{fill:"none"},Wt(l,!1)),p=a.map(function(y,v){var g=s.getTickLineCoord(y),b=s.getTickTextAnchor(y),j=Jf(Jf(Jf({textAnchor:b},u),{},{stroke:"none",fill:d},h),{},{index:v,payload:y,x:g.x2,y:g.y2});return be.createElement($r,am({className:Ir("recharts-polar-angle-axis-tick",KH(o)),key:"tick-".concat(y.coordinate)},Rm(s.props,y,v)),l&&be.createElement("line",am({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&e.renderTickItem(o,j,c?c(y.value,v):y.value))});return be.createElement($r,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.radius,o=s.axisLine;return a<=0||!i||!i.length?null:be.createElement($r,{className:Ir("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,i,a){var o;return be.isValidElement(s)?o=be.cloneElement(s,i):hr(s)?o=s(i):o=be.createElement(Lm,am({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(S.PureComponent);bw(jw,"displayName","PolarAngleAxis");bw(jw,"axisType","angleAxis");bw(jw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var oC,p8;function XNe(){if(p8)return oC;p8=1;var t=xV(),e=t(Object.getPrototypeOf,Object);return oC=e,oC}var lC,g8;function ZNe(){if(g8)return lC;g8=1;var t=Cu(),e=XNe(),r=Eu(),s="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,l=a.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||t(u)!=s)return!1;var h=e(u);if(h===null)return!0;var f=l.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==c}return lC=d,lC}var QNe=ZNe();const JNe=Kr(QNe);var cC,v8;function eSe(){if(v8)return cC;v8=1;var t=Cu(),e=Eu(),r="[object Boolean]";function s(i){return i===!0||i===!1||e(i)&&t(i)==r}return cC=s,cC}var tSe=eSe();const rSe=Kr(tSe);function w0(t){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w0(t)}function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},G1.apply(this,arguments)}function nSe(t,e){return oSe(t)||aSe(t,e)||iSe(t,e)||sSe()}function sSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iSe(t,e){if(t){if(typeof t=="string")return x8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x8(t,e)}}function x8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function aSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function oSe(t){if(Array.isArray(t))return t}function y8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function b8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(r),!0).forEach(function(s){lSe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function lSe(t,e,r){return e=cSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cSe(t){var e=dSe(t,"string");return w0(e)=="symbol"?e:e+""}function dSe(t,e){if(w0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(w0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j8=function(e,r,s,i,a){var o=s-i,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+s,",").concat(r),l+="L ".concat(e+s-o/2,",").concat(r+a),l+="L ".concat(e+s-o/2-i,",").concat(r+a),l+="L ".concat(e,",").concat(r," Z"),l},uSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hSe=function(e){var r=b8(b8({},uSe),e),s=S.useRef(),i=S.useState(-1),a=nSe(i,2),o=a[0],l=a[1];S.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var w=s.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,h=r.lowerWidth,f=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var j=Ir("recharts-trapezoid",p);return b?be.createElement(hc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:v,animationEasing:y,isActive:b},function(w){var C=w.upperWidth,E=w.lowerWidth,N=w.height,A=w.x,_=w.y;return be.createElement(hc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:y},be.createElement("path",G1({},Wt(r,!0),{className:j,d:j8(A,_,C,E,N),ref:s})))}):be.createElement("g",null,be.createElement("path",G1({},Wt(r,!0),{className:j,d:j8(c,d,u,h,f)})))},fSe=["option","shapeType","propTransformer","activeClassName","isActive"];function N0(t){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N0(t)}function mSe(t,e){if(t==null)return{};var r=pSe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function pSe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function w8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function K1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(r),!0).forEach(function(s){gSe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function gSe(t,e,r){return e=vSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vSe(t){var e=xSe(t,"string");return N0(e)=="symbol"?e:e+""}function xSe(t,e){if(N0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(N0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ySe(t,e){return K1(K1({},e),t)}function bSe(t,e){return t==="symbols"}function N8(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return be.createElement(M_,r);case"trapezoid":return be.createElement(hSe,r);case"sector":return be.createElement(ZH,r);case"symbols":if(bSe(e))return be.createElement(r_,r);break;default:return null}}function jSe(t){return S.isValidElement(t)?t.props:t}function cW(t){var e=t.option,r=t.shapeType,s=t.propTransformer,i=s===void 0?ySe:s,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=mSe(t,fSe),d;if(S.isValidElement(e))d=S.cloneElement(e,K1(K1({},c),jSe(e)));else if(hr(e))d=e(c);else if(JNe(e)&&!rSe(e)){var u=i(e,c);d=be.createElement(N8,{shapeType:r,elementProps:u})}else{var h=c;d=be.createElement(N8,{shapeType:r,elementProps:h})}return l?be.createElement($r,{className:o},d):d}function ww(t,e){return e!=null&&"trapezoids"in t.props}function Nw(t,e){return e!=null&&"sectors"in t.props}function S0(t,e){return e!=null&&"points"in t.props}function wSe(t,e){var r,s,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(s=e.labelViewBox)===null||s===void 0?void 0:s.y)||t.y===e.y;return i&&a}function NSe(t,e){var r=t.endAngle===e.endAngle,s=t.startAngle===e.startAngle;return r&&s}function SSe(t,e){var r=t.x===e.x,s=t.y===e.y,i=t.z===e.z;return r&&s&&i}function ASe(t,e){var r;return ww(t,e)?r=wSe:Nw(t,e)?r=NSe:S0(t,e)&&(r=SSe),r}function CSe(t,e){var r;return ww(t,e)?r="trapezoids":Nw(t,e)?r="sectors":S0(t,e)&&(r="points"),r}function ESe(t,e){if(ww(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Nw(t,e)){var s;return(s=e.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return S0(t,e)?e.payload:{}}function PSe(t){var e=t.activeTooltipItem,r=t.graphicalItem,s=t.itemData,i=CSe(r,e),a=ESe(r,e),o=s.filter(function(c,d){var u=Mm(a,c),h=r.props[i].filter(function(y){var v=ASe(r,e);return v(y,e)}),f=r.props[i].indexOf(h[h.length-1]),p=d===f;return u&&p}),l=s.indexOf(o[o.length-1]);return l}var zb;function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},tg.apply(this,arguments)}function S8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S8(Object(r),!0).forEach(function(s){vl(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function TSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,uW(s.key),s)}}function _Se(t,e,r){return e&&A8(t.prototype,e),r&&A8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ISe(t,e,r){return e=Y1(e),DSe(t,dW()?Reflect.construct(e,r||[],Y1(t).constructor):e.apply(t,r))}function DSe(t,e){if(e&&(Og(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kSe(t)}function kSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dW=function(){return!!t})()}function Y1(t){return Y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Y1(t)}function OSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UP(t,e)}function UP(t,e){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},UP(t,e)}function vl(t,e,r){return e=uW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uW(t){var e=RSe(t,"string");return Og(e)=="symbol"?e:e+""}function RSe(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tu=function(t){function e(r){var s;return TSe(this,e),s=ISe(this,e,[r]),vl(s,"pieRef",null),vl(s,"sectorRefs",[]),vl(s,"id",Xm("recharts-pie-")),vl(s,"handleAnimationEnd",function(){var i=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),hr(i)&&i()}),vl(s,"handleAnimationStart",function(){var i=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),hr(i)&&i()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return OSe(e,t),_Se(e,[{key:"isActiveIndex",value:function(s){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(s)!==-1:s===i}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,d=a.valueKey,u=Wt(this.props,!1),h=Wt(o,!1),f=Wt(l,!1),p=o&&o.offsetRadius||20,y=s.map(function(v,g){var b=(v.startAngle+v.endAngle)/2,j=zn(v.cx,v.cy,v.outerRadius+p,b),w=Fn(Fn(Fn(Fn({},u),v),{},{stroke:"none"},h),{},{index:g,textAnchor:e.getTextAnchor(j.x,v.cx)},j),C=Fn(Fn(Fn(Fn({},u),v),{},{fill:"none",stroke:v.fill},f),{},{index:g,points:[zn(v.cx,v.cy,v.outerRadius,b),j]}),E=c;return jr(c)&&jr(d)?E="value":jr(c)&&(E=d),be.createElement($r,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,w,qs(v,E)))});return be.createElement($r,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(s){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return s.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&s.length!==1)return null;var h=i.isActiveIndex(u),f=c&&i.hasActiveIndex()?c:null,p=h?o:f,y=Fn(Fn({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return be.createElement($r,tg({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Rm(i.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),be.createElement(cW,tg({option:p,isActive:h,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,u=i.animationId,h=this.state,f=h.prevSectors,p=h.prevIsAnimationActive;return be.createElement(hc,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,g=[],b=a&&a[0],j=b.startAngle;return a.forEach(function(w,C){var E=f&&f[C],N=C>0?Ho(w,"paddingAngle",0):0;if(E){var A=oi(E.endAngle-E.startAngle,w.endAngle-w.startAngle),_=Fn(Fn({},w),{},{startAngle:j+N,endAngle:j+A(v)+N});g.push(_),j=_.endAngle}else{var k=w.endAngle,F=w.startAngle,I=oi(0,k-F),T=I(v),R=Fn(Fn({},w),{},{startAngle:j+N,endAngle:j+T+N});g.push(R),j=R.endAngle}}),be.createElement($r,null,s.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(s){var i=this;s.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,i=s.sectors,a=s.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!Mm(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,u=i.cy,h=i.innerRadius,f=i.outerRadius,p=i.isAnimationActive,y=this.state.isAnimationFinished;if(a||!o||!o.length||!jt(d)||!jt(u)||!jt(h)||!jt(f))return null;var v=Ir("recharts-pie",l);return be.createElement($r,{tabIndex:this.props.rootTabIndex,className:v,ref:function(b){s.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),Ni.renderCallByParent(this.props,null,!1),(!p||y)&&cd.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return i.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:s.sectors!==i.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,i){return s>i?"start":s<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,i,a){if(be.isValidElement(s))return be.cloneElement(s,i);if(hr(s))return s(i);var o=Ir("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return be.createElement(Am,tg({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,i,a){if(be.isValidElement(s))return be.cloneElement(s,i);var o=a;if(hr(s)&&(o=s(i),be.isValidElement(o)))return o;var l=Ir("recharts-pie-label-text",typeof s!="boolean"&&!hr(s)?s.className:"");return be.createElement(Lm,tg({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(S.PureComponent);zb=Tu;vl(Tu,"displayName","Pie");vl(Tu,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ff.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});vl(Tu,"parseDeltaAngle",function(t,e){var r=Da(e-t),s=Math.min(Math.abs(e-t),360);return r*s});vl(Tu,"getRealPieData",function(t){var e=t.data,r=t.children,s=Wt(t,!1),i=Wo(r,ow);return e&&e.length?e.map(function(a,o){return Fn(Fn(Fn({payload:a},s),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return Fn(Fn({},s),a.props)}):[]});vl(Tu,"parseCoordinateOfPie",function(t,e){var r=e.top,s=e.left,i=e.width,a=e.height,o=GH(i,a),l=s+ka(t.cx,i,i/2),c=r+ka(t.cy,a,a/2),d=ka(t.innerRadius,o,0),u=ka(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});vl(Tu,"getComposedData",function(t){var e=t.item,r=t.offset,s=e.type.defaultProps!==void 0?Fn(Fn({},e.type.defaultProps),e.props):e.props,i=zb.getRealPieData(s);if(!i||!i.length)return null;var a=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,f=s.tooltipType,p=Math.abs(s.minAngle),y=zb.parseCoordinateOfPie(s,r),v=zb.parseDeltaAngle(o,l),g=Math.abs(v),b=d;jr(d)&&jr(h)?(oc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):jr(d)&&(oc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var j=i.filter(function(_){return qs(_,b,0)!==0}).length,w=(g>=360?j:j-1)*c,C=g-j*p-w,E=i.reduce(function(_,k){var F=qs(k,b,0);return _+(jt(F)?F:0)},0),N;if(E>0){var A;N=i.map(function(_,k){var F=qs(_,b,0),I=qs(_,u,k),T=(jt(F)?F:0)/E,R;k?R=A.endAngle+Da(v)*c*(F!==0?1:0):R=o;var O=R+Da(v)*((F!==0?p:0)+T*C),z=(R+O)/2,q=(y.innerRadius+y.outerRadius)/2,B=[{name:I,value:F,payload:_,dataKey:b,type:f}],K=zn(y.cx,y.cy,q,z);return A=Fn(Fn(Fn({percent:T,cornerRadius:a,name:I,tooltipPayload:B,midAngle:z,middleRadius:q,tooltipPosition:K},_),y),{},{value:qs(_,b),startAngle:R,endAngle:O,payload:_,paddingAngle:Da(v)*c}),A})}return Fn(Fn({},y),{},{sectors:N,data:i})});var dC,C8;function LSe(){if(C8)return dC;C8=1;var t=Math.ceil,e=Math.max;function r(s,i,a,o){for(var l=-1,c=e(t((i-s)/(a||1)),0),d=Array(c);c--;)d[o?c:++l]=s,s+=a;return d}return dC=r,dC}var uC,E8;function hW(){if(E8)return uC;E8=1;var t=OV(),e=1/0,r=17976931348623157e292;function s(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return uC=s,uC}var hC,P8;function MSe(){if(P8)return hC;P8=1;var t=LSe(),e=aw(),r=hW();function s(i){return function(a,o,l){return l&&typeof l!="number"&&e(a,o,l)&&(o=l=void 0),a=r(a),o===void 0?(o=a,a=0):o=r(o),l=l===void 0?a<o?1:-1:r(l),t(a,o,l,i)}}return hC=s,hC}var fC,T8;function FSe(){if(T8)return fC;T8=1;var t=MSe(),e=t();return fC=e,fC}var $Se=FSe();const X1=Kr($Se);function A0(t){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A0(t)}function _8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function I8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(r),!0).forEach(function(s){fW(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function fW(t,e,r){return e=BSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BSe(t){var e=zSe(t,"string");return A0(e)=="symbol"?e:e+""}function zSe(t,e){if(A0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(A0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qSe=["Webkit","Moz","O","ms"],USe=function(e,r){var s=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=qSe.reduce(function(a,o){return I8(I8({},a),{},fW({},o+s,r))},{});return i[e]=r,i};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function Z1(){return Z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Z1.apply(this,arguments)}function D8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function mC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(r),!0).forEach(function(s){To(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function VSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,pW(s.key),s)}}function HSe(t,e,r){return e&&k8(t.prototype,e),r&&k8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function WSe(t,e,r){return e=Q1(e),GSe(t,mW()?Reflect.construct(e,r||[],Q1(t).constructor):e.apply(t,r))}function GSe(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KSe(t)}function KSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mW=function(){return!!t})()}function Q1(t){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(t)}function YSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VP(t,e)}function VP(t,e){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},VP(t,e)}function To(t,e,r){return e=pW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pW(t){var e=XSe(t,"string");return Rg(e)=="symbol"?e:e+""}function XSe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Rg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZSe=function(e){var r=e.data,s=e.startIndex,i=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=Ax().domain(X1(0,c)).range([a,a+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:u}},O8=function(e){return e.changedTouches&&!!e.changedTouches.length},Lg=function(t){function e(r){var s;return VSe(this,e),s=WSe(this,e,[r]),To(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),To(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),To(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o?.({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),To(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),To(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),To(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),To(s,"handleSlideDragStart",function(i){var a=O8(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return YSe(e,t),HSe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(i,a),f=Math.max(i,a),p=e.getIndexInRange(o,h),y=e.getIndexInRange(o,f);return{startIndex:p-p%c,endIndex:y===u?u:y-y%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=qs(a[s],l,s);return hr(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,p=c.endIndex,y=c.onChange,v=s.pageX-a;v>0?v=Math.min(v,d+u-h-l,d+u-h-o):v<0&&(v=Math.max(v,d-o,d-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==f||g.endIndex!==p)&&y&&y(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=O8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,p=u.travellerWidth,y=u.onChange,v=u.gap,g=u.data,b={startX:this.state.startX,endX:this.state.endX},j=s.pageX-a;j>0?j=Math.min(j,h+f-p-d):j<0&&(j=Math.max(j,h-d)),b[o]=d+j;var w=this.getIndex(b),C=w.startIndex,E=w.endIndex,N=function(){var _=g.length-1;return o==="startX"&&(l>c?C%v===0:E%v===0)||l<c&&E===_||o==="endX"&&(l>c?E%v===0:C%v===0)||l>c&&E===_};this.setState(To(To({},o,d+j),"brushMoveStartX",s.pageX),function(){y&&N()&&y(w)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[i],h=l.indexOf(u);if(h!==-1){var f=h+s;if(!(f===-1||f>=l.length)){var p=l[f];i==="startX"&&p>=d||i==="endX"&&p<=c||this.setState(To({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return be.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,h=S.Children.only(d);return h?be.cloneElement(h,{x:i,y:a,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,g=c.endIndex,b=Math.max(s,this.props.x),j=mC(mC({},Wt(this.props,!1)),{},{x:b,y:d,width:u,height:h}),w=p||"Min value: ".concat((a=y[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=y[g])===null||o===void 0?void 0:o.name);return be.createElement($r,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),l.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,j))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,u=Math.min(s,i)+d,h=Math.max(Math.abs(i-s)-d,0);return be.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,f=u.endX,p=5,y={pointerEvents:"none",fill:d};return be.createElement($r,{className:"recharts-brush-texts"},be.createElement(Lm,Z1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-p,y:o+l/2},y),this.getTextOfTick(i)),be.createElement(Lm,Z1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+p,y:o+l/2},y),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,f=this.state,p=f.startX,y=f.endX,v=f.isTextActive,g=f.isSlideMoving,b=f.isTravellerMoving,j=f.isTravellerFocused;if(!i||!i.length||!jt(l)||!jt(c)||!jt(d)||!jt(u)||d<=0||u<=0)return null;var w=Ir("recharts-brush",a),C=be.Children.count(o)===1,E=USe("userSelect","none");return be.createElement($r,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||g||b||j||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return be.createElement(be.Fragment,null,be.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),be.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),be.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return be.isValidElement(s)?a=be.cloneElement(s,i):hr(s)?a=s(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return mC({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?ZSe({data:a,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(S.PureComponent);To(Lg,"displayName","Brush");To(Lg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pC,R8;function QSe(){if(R8)return pC;R8=1;var t=c_();function e(r,s){var i;return t(r,function(a,o,l){return i=s(a,o,l),!i}),!!i}return pC=e,pC}var gC,L8;function JSe(){if(L8)return gC;L8=1;var t=uV(),e=yd(),r=QSe(),s=uo(),i=aw();function a(o,l,c){var d=s(o)?t:r;return c&&i(o,l,c)&&(l=void 0),d(o,e(l,3))}return gC=a,gC}var eAe=JSe();const tAe=Kr(eAe);var dd=function(e,r){var s=e.alwaysShow,i=e.ifOverflow;return s&&(i="extendDomain"),i===r},vC,M8;function rAe(){if(M8)return vC;M8=1;var t=TV();function e(r,s,i){s=="__proto__"&&t?t(r,s,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[s]=i}return vC=e,vC}var xC,F8;function nAe(){if(F8)return xC;F8=1;var t=rAe(),e=EV(),r=yd();function s(i,a){var o={};return a=r(a,3),e(i,function(l,c,d){t(o,c,a(l,c,d))}),o}return xC=s,xC}var sAe=nAe();const iAe=Kr(sAe);var yC,$8;function aAe(){if($8)return yC;$8=1;function t(e,r){for(var s=-1,i=e==null?0:e.length;++s<i;)if(!r(e[s],s,e))return!1;return!0}return yC=t,yC}var bC,B8;function oAe(){if(B8)return bC;B8=1;var t=c_();function e(r,s){var i=!0;return t(r,function(a,o,l){return i=!!s(a,o,l),i}),i}return bC=e,bC}var jC,z8;function lAe(){if(z8)return jC;z8=1;var t=aAe(),e=oAe(),r=yd(),s=uo(),i=aw();function a(o,l,c){var d=s(o)?t:e;return c&&i(o,l,c)&&(l=void 0),d(o,r(l,3))}return jC=a,jC}var cAe=lAe();const gW=Kr(cAe);var dAe=["x","y"];function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},HP.apply(this,arguments)}function q8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function rx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(r),!0).forEach(function(s){uAe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function uAe(t,e,r){return e=hAe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hAe(t){var e=fAe(t,"string");return C0(e)=="symbol"?e:e+""}function fAe(t,e){if(C0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(C0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mAe(t,e){if(t==null)return{};var r=pAe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function pAe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function gAe(t,e){var r=t.x,s=t.y,i=mAe(t,dAe),a="".concat(r),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(e.height||i.height),u=parseInt(d,10),h="".concat(e.width||i.width),f=parseInt(h,10);return rx(rx(rx(rx(rx({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function U8(t){return be.createElement(cW,HP({shapeType:"rectangle",propTransformer:gAe,activeClassName:"recharts-active-bar"},t))}var vAe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof e=="number")return e;var a=jt(s)||Gme(s);return a?e(s,i):(a||ef(),r)}},xAe=["value","background"],vW;function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function yAe(t,e){if(t==null)return{};var r=bAe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function bAe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function J1(){return J1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},J1.apply(this,arguments)}function V8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(r),!0).forEach(function(s){$h(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function jAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,yW(s.key),s)}}function wAe(t,e,r){return e&&H8(t.prototype,e),r&&H8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function NAe(t,e,r){return e=ej(e),SAe(t,xW()?Reflect.construct(e,r||[],ej(t).constructor):e.apply(t,r))}function SAe(t,e){if(e&&(Mg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AAe(t)}function AAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xW=function(){return!!t})()}function ej(t){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ej(t)}function CAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WP(t,e)}function WP(t,e){return WP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},WP(t,e)}function $h(t,e,r){return e=yW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yW(t){var e=EAe(t,"string");return Mg(e)=="symbol"?e:e+""}function EAe(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ep=function(t){function e(){var r;jAe(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=NAe(this,e,[].concat(i)),$h(r,"state",{isAnimationFinished:!1}),$h(r,"id",Xm("recharts-bar-")),$h(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),$h(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return CAe(e,t),wAe(e,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,u=Wt(this.props,!1);return s&&s.map(function(h,f){var p=f===c,y=p?d:o,v=Ys(Ys(Ys({},u),h),{},{isActive:p,option:y,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return be.createElement($r,J1({className:"recharts-bar-rectangle"},Rm(i.props,h,f),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(f)}),be.createElement(U8,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,u=i.animationEasing,h=i.animationId,f=this.state.prevData;return be.createElement(hc,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=a.map(function(g,b){var j=f&&f[b];if(j){var w=oi(j.x,g.x),C=oi(j.y,g.y),E=oi(j.width,g.width),N=oi(j.height,g.height);return Ys(Ys({},g),{},{x:w(y),y:C(y),width:E(y),height:N(y)})}if(o==="horizontal"){var A=oi(0,g.height),_=A(y);return Ys(Ys({},g),{},{y:g.y+g.height-_,height:_})}var k=oi(0,g.width),F=k(y);return Ys(Ys({},g),{},{width:F})});return be.createElement($r,null,s.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Mm(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=Wt(this.props.background,!1);return a.map(function(d,u){d.value;var h=d.background,f=yAe(d,xAe);if(!h)return null;var p=Ys(Ys(Ys(Ys(Ys({},f),{},{fill:"#eee"},h),c),Rm(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return be.createElement(U8,J1({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},p))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=Wo(u,ny);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,p=function(g,b){var j=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:j,errorVal:qs(g,b)}},y={clipPath:s?"url(#clipPath-".concat(i,")"):null};return be.createElement($r,y,h.map(function(v){return be.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,f=s.height,p=s.isAnimationActive,y=s.background,v=s.id;if(i||!a||!a.length)return null;var g=this.state.isAnimationFinished,b=Ir("recharts-bar",o),j=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,C=j||w,E=jr(v)?this.id:v;return be.createElement($r,{className:b},j||w?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(E)},be.createElement("rect",{x:j?d:d-h/2,y:w?u:u-f/2,width:j?h:h*2,height:w?f:f*2}))):null,be.createElement($r,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(E,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,E),(!p||g)&&cd.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(S.PureComponent);vW=ep;$h(ep,"displayName","Bar");$h(ep,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ff.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$h(ep,"getComposedData",function(t){var e=t.props,r=t.item,s=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,p=aje(s,r);if(!p)return null;var y=e.layout,v=r.type.defaultProps,g=v!==void 0?Ys(Ys({},v),r.props):r.props,b=g.dataKey,j=g.children,w=g.minPointSize,C=y==="horizontal"?o:a,E=d?C.scale.domain():null,N=fje({numericAxis:C}),A=Wo(j,ow),_=h.map(function(k,F){var I,T,R,O,z,q;d?I=oje(d[u+F],E):(I=qs(k,b),Array.isArray(I)||(I=[N,I]));var B=vAe(w,vW.defaultProps.minPointSize)(I[1],F);if(y==="horizontal"){var K,Y=[o.scale(I[0]),o.scale(I[1])],J=Y[0],H=Y[1];T=y6({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:k,index:F}),R=(K=H??J)!==null&&K!==void 0?K:void 0,O=p.size;var $=J-H;if(z=Number.isNaN($)?0:$,q={x:T,y:o.y,width:O,height:o.height},Math.abs(B)>0&&Math.abs(z)<Math.abs(B)){var W=Da(z||B)*(Math.abs(B)-Math.abs(z));R-=W,z+=W}}else{var te=[a.scale(I[0]),a.scale(I[1])],ee=te[0],ne=te[1];if(T=ee,R=y6({axis:o,ticks:c,bandSize:i,offset:p.offset,entry:k,index:F}),O=ne-ee,z=p.size,q={x:a.x,y:R,width:a.width,height:z},Math.abs(B)>0&&Math.abs(O)<Math.abs(B)){var ae=Da(O||B)*(Math.abs(B)-Math.abs(O));O+=ae}}return Ys(Ys(Ys({},k),{},{x:T,y:R,width:O,height:z,value:d?I:I[1],payload:k,background:q},A&&A[F]&&A[F].props),{},{tooltipPayload:[HH(r,k)],tooltipPosition:{x:T+O/2,y:R+z/2}})});return Ys({data:_,layout:y},f)});function E0(t){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(t)}function PAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W8(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,bW(s.key),s)}}function TAe(t,e,r){return e&&W8(t.prototype,e),r&&W8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function G8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function ec(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(r),!0).forEach(function(s){Sw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Sw(t,e,r){return e=bW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bW(t){var e=_Ae(t,"string");return E0(e)=="symbol"?e:e+""}function _Ae(t,e){if(E0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(E0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F_=function(e,r,s,i,a){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(r),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!Do(d,ep);return u.reduce(function(p,y){var v=r[y],g=v.orientation,b=v.domain,j=v.padding,w=j===void 0?{}:j,C=v.mirror,E=v.reversed,N="".concat(g).concat(C?"Mirror":""),A,_,k,F,I;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var T=b[1]-b[0],R=1/0,O=v.categoricalDomain.sort(Xme);if(O.forEach(function(te,ee){ee>0&&(R=Math.min((te||0)-(O[ee-1]||0),R))}),Number.isFinite(R)){var z=R/T,q=v.layout==="vertical"?s.height:s.width;if(v.padding==="gap"&&(A=z*q/2),v.padding==="no-gap"){var B=ka(e.barCategoryGap,z*q),K=z*q/2;A=K-B-(K-B)/q*B}}}i==="xAxis"?_=[s.left+(w.left||0)+(A||0),s.left+s.width-(w.right||0)-(A||0)]:i==="yAxis"?_=c==="horizontal"?[s.top+s.height-(w.bottom||0),s.top+(w.top||0)]:[s.top+(w.top||0)+(A||0),s.top+s.height-(w.bottom||0)-(A||0)]:_=v.range,E&&(_=[_[1],_[0]]);var Y=zH(v,a,f),J=Y.scale,H=Y.realScaleType;J.domain(b).range(_),qH(J);var $=UH(J,ec(ec({},v),{},{realScaleType:H}));i==="xAxis"?(I=g==="top"&&!C||g==="bottom"&&C,k=s.left,F=h[N]-I*v.height):i==="yAxis"&&(I=g==="left"&&!C||g==="right"&&C,k=h[N]-I*v.width,F=s.top);var W=ec(ec(ec({},v),$),{},{realScaleType:H,x:k,y:F,scale:J,width:i==="xAxis"?s.width:v.width,height:i==="yAxis"?s.height:v.height});return W.bandSize=F1(W,$),!v.hide&&i==="xAxis"?h[N]+=(I?-1:1)*W.height:v.hide||(h[N]+=(I?-1:1)*W.width),ec(ec({},p),{},Sw({},y,W))},{})},jW=function(e,r){var s=e.x,i=e.y,a=r.x,o=r.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},IAe=function(e){var r=e.x1,s=e.y1,i=e.x2,a=e.y2;return jW({x:r,y:s},{x:i,y:a})},wW=function(){function t(e){PAe(this,t),this.scale=e}return TAe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();Sw(wW,"EPS",1e-4);var $_=function(e){var r=Object.keys(e).reduce(function(s,i){return ec(ec({},s),{},Sw({},i,wW.create(e[i])))},{});return ec(ec({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return iAe(i,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return gW(i,function(a,o){return r[o].isInRange(a)})}})};function DAe(t){return(t%180+180)%180}var kAe=function(e){var r=e.width,s=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=DAe(i),o=a*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},wC,K8;function OAe(){if(K8)return wC;K8=1;var t=yd(),e=Q0(),r=sw();function s(i){return function(a,o,l){var c=Object(a);if(!e(a)){var d=t(o,3);a=r(a),o=function(h){return d(c[h],h,c)}}var u=i(a,o,l);return u>-1?c[d?a[u]:u]:void 0}}return wC=s,wC}var NC,Y8;function RAe(){if(Y8)return NC;Y8=1;var t=hW();function e(r){var s=t(r),i=s%1;return s===s?i?s-i:s:0}return NC=e,NC}var SC,X8;function LAe(){if(X8)return SC;X8=1;var t=wV(),e=yd(),r=RAe(),s=Math.max;function i(a,o,l){var c=a==null?0:a.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=s(c+d,0)),t(a,e(o,3),d)}return SC=i,SC}var AC,Z8;function MAe(){if(Z8)return AC;Z8=1;var t=OAe(),e=LAe(),r=t(e);return AC=r,AC}var FAe=MAe();const $Ae=Kr(FAe);var BAe=MU();const zAe=Kr(BAe);var qAe=zAe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),B_=S.createContext(void 0),z_=S.createContext(void 0),NW=S.createContext(void 0),SW=S.createContext({}),AW=S.createContext(void 0),CW=S.createContext(0),EW=S.createContext(0),Q8=function(e){var r=e.state,s=r.xAxisMap,i=r.yAxisMap,a=r.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=qAe(a);return be.createElement(B_.Provider,{value:s},be.createElement(z_.Provider,{value:i},be.createElement(SW.Provider,{value:a},be.createElement(NW.Provider,{value:u},be.createElement(AW.Provider,{value:o},be.createElement(CW.Provider,{value:d},be.createElement(EW.Provider,{value:c},l)))))))},UAe=function(){return S.useContext(AW)},PW=function(e){var r=S.useContext(B_);r==null&&ef();var s=r[e];return s==null&&ef(),s},VAe=function(){var e=S.useContext(B_);return Oh(e)},HAe=function(){var e=S.useContext(z_),r=$Ae(e,function(s){return gW(s.domain,Number.isFinite)});return r||Oh(e)},TW=function(e){var r=S.useContext(z_);r==null&&ef();var s=r[e];return s==null&&ef(),s},WAe=function(){var e=S.useContext(NW);return e},GAe=function(){return S.useContext(SW)},q_=function(){return S.useContext(EW)},U_=function(){return S.useContext(CW)};function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function KAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YAe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,IW(s.key),s)}}function XAe(t,e,r){return e&&YAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZAe(t,e,r){return e=tj(e),QAe(t,_W()?Reflect.construct(e,r||[],tj(t).constructor):e.apply(t,r))}function QAe(t,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JAe(t)}function JAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!t})()}function tj(t){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tj(t)}function e5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},GP(t,e)}function J8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function e7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J8(Object(r),!0).forEach(function(s){V_(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function V_(t,e,r){return e=IW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IW(t){var e=t5e(t,"string");return Fg(e)=="symbol"?e:e+""}function t5e(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Fg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function r5e(t,e){return a5e(t)||i5e(t,e)||s5e(t,e)||n5e()}function n5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s5e(t,e){if(t){if(typeof t=="string")return t7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t7(t,e)}}function t7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function i5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function a5e(t){if(Array.isArray(t))return t}function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},KP.apply(this,arguments)}var o5e=function(e,r){var s;return be.isValidElement(e)?s=be.cloneElement(e,r):hr(e)?s=e(r):s=be.createElement("line",KP({},r,{className:"recharts-reference-line-line"})),s},l5e=function(e,r,s,i,a,o,l,c,d){var u=a.x,h=a.y,f=a.width,p=a.height;if(s){var y=d.y,v=e.y.apply(y,{position:o});if(dd(d,"discard")&&!e.y.isInRange(v))return null;var g=[{x:u+f,y:v},{x:u,y:v}];return c==="left"?g.reverse():g}if(r){var b=d.x,j=e.x.apply(b,{position:o});if(dd(d,"discard")&&!e.x.isInRange(j))return null;var w=[{x:j,y:h+p},{x:j,y:h}];return l==="top"?w.reverse():w}if(i){var C=d.segment,E=C.map(function(N){return e.apply(N,{position:o})});return dd(d,"discard")&&tAe(E,function(N){return!e.isInRange(N)})?null:E}return null};function c5e(t){var e=t.x,r=t.y,s=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=UAe(),u=PW(i),h=TW(a),f=WAe();if(!d||!f)return null;oc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=$_({x:u.scale,y:h.scale}),y=li(e),v=li(r),g=s&&s.length===2,b=l5e(p,y,v,g,f,t.position,u.orientation,h.orientation,t);if(!b)return null;var j=r5e(b,2),w=j[0],C=w.x,E=w.y,N=j[1],A=N.x,_=N.y,k=dd(t,"hidden")?"url(#".concat(d,")"):void 0,F=e7(e7({clipPath:k},Wt(t,!0)),{},{x1:C,y1:E,x2:A,y2:_});return be.createElement($r,{className:Ir("recharts-reference-line",l)},o5e(o,F),Ni.renderCallByParent(t,IAe({x1:C,y1:E,x2:A,y2:_})))}var H_=function(t){function e(){return KAe(this,e),ZAe(this,e,arguments)}return e5e(e,t),XAe(e,[{key:"render",value:function(){return be.createElement(c5e,this.props)}}])}(be.Component);V_(H_,"displayName","ReferenceLine");V_(H_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function YP(){return YP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},YP.apply(this,arguments)}function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function r7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function n7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r7(Object(r),!0).forEach(function(s){Aw(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function d5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u5e(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,kW(s.key),s)}}function h5e(t,e,r){return e&&u5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f5e(t,e,r){return e=rj(e),m5e(t,DW()?Reflect.construct(e,r||[],rj(t).constructor):e.apply(t,r))}function m5e(t,e){if(e&&($g(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p5e(t)}function p5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!t})()}function rj(t){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rj(t)}function g5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XP(t,e)}function XP(t,e){return XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},XP(t,e)}function Aw(t,e,r){return e=kW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kW(t){var e=v5e(t,"string");return $g(e)=="symbol"?e:e+""}function v5e(t,e){if($g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x5e=function(e){var r=e.x,s=e.y,i=e.xAxis,a=e.yAxis,o=$_({x:i.scale,y:a.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return dd(e,"discard")&&!o.isInRange(l)?null:l},Cw=function(t){function e(){return d5e(this,e),f5e(this,e,arguments)}return g5e(e,t),h5e(e,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=li(i),u=li(a);if(oc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=x5e(this.props);if(!h)return null;var f=h.x,p=h.y,y=this.props,v=y.shape,g=y.className,b=dd(this.props,"hidden")?"url(#".concat(c,")"):void 0,j=n7(n7({clipPath:b},Wt(this.props,!0)),{},{cx:f,cy:p});return be.createElement($r,{className:Ir("recharts-reference-dot",g)},e.renderDot(v,j),Ni.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(be.Component);Aw(Cw,"displayName","ReferenceDot");Aw(Cw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Aw(Cw,"renderDot",function(t,e){var r;return be.isValidElement(t)?r=be.cloneElement(t,e):hr(t)?r=t(e):r=be.createElement(sy,YP({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ZP.apply(this,arguments)}function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function s7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function i7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s7(Object(r),!0).forEach(function(s){Ew(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function y5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b5e(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,RW(s.key),s)}}function j5e(t,e,r){return e&&b5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function w5e(t,e,r){return e=nj(e),N5e(t,OW()?Reflect.construct(e,r||[],nj(t).constructor):e.apply(t,r))}function N5e(t,e){if(e&&(Bg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S5e(t)}function S5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!t})()}function nj(t){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nj(t)}function A5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},QP(t,e)}function Ew(t,e,r){return e=RW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RW(t){var e=C5e(t,"string");return Bg(e)=="symbol"?e:e+""}function C5e(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Bg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E5e=function(e,r,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,u=a.xAxis,h=a.yAxis;if(!u||!h)return null;var f=$_({x:u.scale,y:h.scale}),p={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},y={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(d,{position:"end"}):f.y.rangeMax};return dd(a,"discard")&&(!f.isInRange(p)||!f.isInRange(y))?null:jW(p,y)},Pw=function(t){function e(){return y5e(this,e),w5e(this,e,arguments)}return A5e(e,t),j5e(e,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;oc(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=li(i),f=li(a),p=li(o),y=li(l),v=this.props.shape;if(!h&&!f&&!p&&!y&&!v)return null;var g=E5e(h,f,p,y,this.props);if(!g&&!v)return null;var b=dd(this.props,"hidden")?"url(#".concat(u,")"):void 0;return be.createElement($r,{className:Ir("recharts-reference-area",c)},e.renderRect(v,i7(i7({clipPath:b},Wt(this.props,!0)),g)),Ni.renderCallByParent(this.props,g))}}])}(be.Component);Ew(Pw,"displayName","ReferenceArea");Ew(Pw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ew(Pw,"renderRect",function(t,e){var r;return be.isValidElement(t)?r=be.cloneElement(t,e):hr(t)?r=t(e):r=be.createElement(M_,ZP({},e,{className:"recharts-reference-area-rect"})),r});function LW(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var s=[],i=0;i<t.length;i+=e)s.push(t[i]);return s}function P5e(t,e,r){var s={width:t.width+e.width,height:t.height+e.height};return kAe(s,r)}function T5e(t,e,r){var s=r==="width",i=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function sj(t,e,r,s,i){if(t*e<t*s||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-s)>=0&&t*(e+t*a/2-i)<=0}function _5e(t,e){return LW(t,e+1)}function I5e(t,e,r,s,i){for(var a=(s||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,h=function(){var y=s?.[c];if(y===void 0)return{v:LW(s,d)};var v=c,g,b=function(){return g===void 0&&(g=r(y,v)),g},j=y.coordinate,w=c===0||sj(t,j,b,u,l);w||(c=0,u=o,d+=1),w&&(u=j+t*(b()/2+i),c+=d)},f;d<=a.length;)if(f=h(),f)return f.v;return[]}function P0(t){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(t)}function a7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function ha(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a7(Object(r),!0).forEach(function(s){D5e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function D5e(t,e,r){return e=k5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k5e(t){var e=O5e(t,"string");return P0(e)=="symbol"?e:e+""}function O5e(t,e){if(P0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(P0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R5e(t,e,r,s,i){for(var a=(s||[]).slice(),o=a.length,l=e.start,c=e.end,d=function(f){var p=a[f],y,v=function(){return y===void 0&&(y=r(p,f)),y};if(f===o-1){var g=t*(p.coordinate+t*v()/2-c);a[f]=p=ha(ha({},p),{},{tickCoord:g>0?p.coordinate-g*t:p.coordinate})}else a[f]=p=ha(ha({},p),{},{tickCoord:p.coordinate});var b=sj(t,p.tickCoord,v,l,c);b&&(c=p.tickCoord-t*(v()/2+i),a[f]=ha(ha({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return a}function L5e(t,e,r,s,i,a){var o=(s||[]).slice(),l=o.length,c=e.start,d=e.end;if(a){var u=s[l-1],h=r(u,l-1),f=t*(u.coordinate+t*h/2-d);o[l-1]=u=ha(ha({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var p=sj(t,u.tickCoord,function(){return h},c,d);p&&(d=u.tickCoord-t*(h/2+i),o[l-1]=ha(ha({},u),{},{isShow:!0}))}for(var y=a?l-1:l,v=function(j){var w=o[j],C,E=function(){return C===void 0&&(C=r(w,j)),C};if(j===0){var N=t*(w.coordinate-t*E()/2-c);o[j]=w=ha(ha({},w),{},{tickCoord:N<0?w.coordinate-N*t:w.coordinate})}else o[j]=w=ha(ha({},w),{},{tickCoord:w.coordinate});var A=sj(t,w.tickCoord,E,c,d);A&&(c=w.tickCoord+t*(E()/2+i),o[j]=ha(ha({},w),{},{isShow:!0}))},g=0;g<y;g++)v(g);return o}function W_(t,e,r){var s=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,h=t.angle;if(!i||!i.length||!s)return[];if(jt(c)||ff.isSsr)return _5e(i,typeof c=="number"&&jt(c)?c:0);var f=[],p=l==="top"||l==="bottom"?"width":"height",y=u&&p==="width"?Sx(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=function(w,C){var E=hr(d)?d(w.value,C):w.value;return p==="width"?P5e(Sx(E,{fontSize:e,letterSpacing:r}),y,h):Sx(E,{fontSize:e,letterSpacing:r})[p]},g=i.length>=2?Da(i[1].coordinate-i[0].coordinate):1,b=T5e(a,g,p);return c==="equidistantPreserveStart"?I5e(g,b,v,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=L5e(g,b,v,i,o,c==="preserveStartEnd"):f=R5e(g,b,v,i,o),f.filter(function(j){return j.isShow}))}var M5e=["viewBox"],F5e=["viewBox"],$5e=["ticks"];function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function rg(){return rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},rg.apply(this,arguments)}function o7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o7(Object(r),!0).forEach(function(s){G_(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function CC(t,e){if(t==null)return{};var r=B5e(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function B5e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function z5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l7(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,FW(s.key),s)}}function q5e(t,e,r){return e&&l7(t.prototype,e),r&&l7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function U5e(t,e,r){return e=ij(e),V5e(t,MW()?Reflect.construct(e,r||[],ij(t).constructor):e.apply(t,r))}function V5e(t,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H5e(t)}function H5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MW=function(){return!!t})()}function ij(t){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ij(t)}function W5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},JP(t,e)}function G_(t,e,r){return e=FW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FW(t){var e=G5e(t,"string");return zg(e)=="symbol"?e:e+""}function G5e(t,e){if(zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(zg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fv=function(t){function e(r){var s;return z5e(this,e),s=U5e(this,e,[r]),s.state={fontSize:"",letterSpacing:""},s}return W5e(e,t),q5e(e,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=CC(s,M5e),l=this.props,c=l.viewBox,d=CC(l,F5e);return!og(a,c)||!og(o,d)||!og(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,u=i.tickSize,h=i.mirror,f=i.tickMargin,p,y,v,g,b,j,w=h?-1:1,C=s.tickSize||u,E=jt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":p=y=s.coordinate,g=o+ +!h*c,v=g-w*C,j=v-w*f,b=E;break;case"left":v=g=s.coordinate,y=a+ +!h*l,p=y-w*C,b=p-w*f,j=E;break;case"right":v=g=s.coordinate,y=a+ +h*l,p=y+w*C,b=p+w*f,j=E;break;default:p=y=s.coordinate,g=o+ +h*c,v=g+w*C,j=v+w*f,b=E;break}return{line:{x1:p,y1:v,x2:y,y2:g},tick:{x:b,y:j}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=ni(ni(ni({},Wt(this.props,!1)),Wt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=ni(ni({},h),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var p=+(c==="left"&&!d||c==="right"&&d);h=ni(ni({},h),{},{x1:i+p*o,y1:a,x2:i+p*o,y2:a+l})}return be.createElement("line",rg({},h,{className:Ir("recharts-cartesian-axis-line",Ho(u,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,p=W_(ni(ni({},this.props),{},{ticks:s}),i,a),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=Wt(this.props,!1),b=Wt(u,!1),j=ni(ni({},g),{},{fill:"none"},Wt(c,!1)),w=p.map(function(C,E){var N=o.getTickLineCoord(C),A=N.line,_=N.tick,k=ni(ni(ni(ni({textAnchor:y,verticalAnchor:v},g),{},{stroke:"none",fill:d},b),_),{},{index:E,payload:C,visibleTicksCount:p.length,tickFormatter:h});return be.createElement($r,rg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Rm(o.props,C,E)),c&&be.createElement("line",rg({},j,A,{className:Ir("recharts-cartesian-axis-tick-line",Ho(c,"className"))})),u&&e.renderTickItem(u,k,"".concat(hr(h)?h(C.value,E):C.value).concat(f||"")))});return be.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,u=i.hide;if(u)return null;var h=this.props,f=h.ticks,p=CC(h,$5e),y=f;return hr(c)&&(y=f&&f.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:be.createElement($r,{className:Ir("recharts-cartesian-axis",d),ref:function(g){s.layerReference=g}},a&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Ni.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o,l=Ir(i.className,"recharts-cartesian-axis-tick-value");return be.isValidElement(s)?o=be.cloneElement(s,ni(ni({},i),{},{className:l})):hr(s)?o=s(ni(ni({},i),{},{className:l})):o=be.createElement(Lm,rg({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(S.Component);G_(fv,"displayName","CartesianAxis");G_(fv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var K5e=["x1","y1","x2","y2","key"],Y5e=["offset"];function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(t)}function c7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c7(Object(r),!0).forEach(function(s){X5e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function X5e(t,e,r){return e=Z5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z5e(t){var e=Q5e(t,"string");return $m(e)=="symbol"?e:e+""}function Q5e(t,e){if($m(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if($m(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},fm.apply(this,arguments)}function d7(t,e){if(t==null)return{};var r=J5e(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function J5e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var eCe=function(e){var r=e.fill;if(!r||r==="none")return null;var s=e.fillOpacity,i=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return be.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function $W(t,e){var r;if(be.isValidElement(t))r=be.cloneElement(t,e);else if(hr(t))r=t(e);else{var s=e.x1,i=e.y1,a=e.x2,o=e.y2,l=e.key,c=d7(e,K5e),d=Wt(c,!1);d.offset;var u=d7(d,Y5e);r=be.createElement("line",fm({},u,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return r}function tCe(t){var e=t.x,r=t.width,s=t.horizontal,i=s===void 0?!0:s,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=fa(fa({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return $W(i,d)});return be.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function rCe(t){var e=t.y,r=t.height,s=t.vertical,i=s===void 0?!0:s,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=fa(fa({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return $W(i,d)});return be.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function nCe(t){var e=t.horizontalFill,r=t.fillOpacity,s=t.x,i=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==u[0]&&u.unshift(0);var h=u.map(function(f,p){var y=!u[p+1],v=y?i+o-f:u[p+1]-f;if(v<=0)return null;var g=p%e.length;return be.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:v,width:a,stroke:"none",fill:e[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function sCe(t){var e=t.vertical,r=e===void 0?!0:e,s=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!r||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var h=u.map(function(f,p){var y=!u[p+1],v=y?a+l-f:u[p+1]-f;if(v<=0)return null;var g=p%s.length;return be.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:v,height:c,stroke:"none",fill:s[g],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return be.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var iCe=function(e,r){var s=e.xAxis,i=e.width,a=e.height,o=e.offset;return BH(W_(fa(fa(fa({},fv.defaultProps),s),{},{ticks:hu(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,r)},aCe=function(e,r){var s=e.yAxis,i=e.width,a=e.height,o=e.offset;return BH(W_(fa(fa(fa({},fv.defaultProps),s),{},{ticks:hu(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,r)},qp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qb(t){var e,r,s,i,a,o,l=q_(),c=U_(),d=GAe(),u=fa(fa({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:qp.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:qp.fill,horizontal:(s=t.horizontal)!==null&&s!==void 0?s:qp.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:qp.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:qp.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:qp.verticalFill,x:jt(t.x)?t.x:d.left,y:jt(t.y)?t.y:d.top,width:jt(t.width)?t.width:d.width,height:jt(t.height)?t.height:d.height}),h=u.x,f=u.y,p=u.width,y=u.height,v=u.syncWithTicks,g=u.horizontalValues,b=u.verticalValues,j=VAe(),w=HAe();if(!jt(p)||p<=0||!jt(y)||y<=0||!jt(h)||h!==+h||!jt(f)||f!==+f)return null;var C=u.verticalCoordinatesGenerator||iCe,E=u.horizontalCoordinatesGenerator||aCe,N=u.horizontalPoints,A=u.verticalPoints;if((!N||!N.length)&&hr(E)){var _=g&&g.length,k=E({yAxis:w?fa(fa({},w),{},{ticks:_?g:w.ticks}):void 0,width:l,height:c,offset:d},_?!0:v);oc(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($m(k),"]")),Array.isArray(k)&&(N=k)}if((!A||!A.length)&&hr(C)){var F=b&&b.length,I=C({xAxis:j?fa(fa({},j),{},{ticks:F?b:j.ticks}):void 0,width:l,height:c,offset:d},F?!0:v);oc(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($m(I),"]")),Array.isArray(I)&&(A=I)}return be.createElement("g",{className:"recharts-cartesian-grid"},be.createElement(eCe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),be.createElement(tCe,fm({},u,{offset:d,horizontalPoints:N,xAxis:j,yAxis:w})),be.createElement(rCe,fm({},u,{offset:d,verticalPoints:A,xAxis:j,yAxis:w})),be.createElement(nCe,fm({},u,{horizontalPoints:N})),be.createElement(sCe,fm({},u,{verticalPoints:A})))}qb.displayName="CartesianGrid";var oCe=["type","layout","connectNulls","ref"],lCe=["key"];function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function u7(t,e){if(t==null)return{};var r=cCe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function cCe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_x.apply(this,arguments)}function h7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Eo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h7(Object(r),!0).forEach(function(s){tc(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Up(t){return fCe(t)||hCe(t)||uCe(t)||dCe()}function dCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uCe(t,e){if(t){if(typeof t=="string")return e4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e4(t,e)}}function hCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fCe(t){if(Array.isArray(t))return e4(t)}function e4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function mCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f7(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,zW(s.key),s)}}function pCe(t,e,r){return e&&f7(t.prototype,e),r&&f7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gCe(t,e,r){return e=aj(e),vCe(t,BW()?Reflect.construct(e,r||[],aj(t).constructor):e.apply(t,r))}function vCe(t,e){if(e&&(qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xCe(t)}function xCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BW=function(){return!!t})()}function aj(t){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aj(t)}function yCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t4(t,e)}function t4(t,e){return t4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},t4(t,e)}function tc(t,e,r){return e=zW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zW(t){var e=bCe(t,"string");return qg(e)=="symbol"?e:e+""}function bCe(t,e){if(qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iy=function(t){function e(){var r;mCe(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=gCe(this,e,[].concat(i)),tc(r,"state",{isAnimationFinished:!0,totalLength:0}),tc(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),tc(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(b,j){return b+j});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,f=l-o,p=[],y=0,v=0;y<c.length;v+=c[y],++y)if(v+c[y]>h){p=[].concat(Up(c.slice(0,y)),[h-v]);break}var g=p.length%2===0?[0,f]:[f];return[].concat(Up(e.repeat(c,u)),Up(p),g).map(function(b){return"".concat(b,"px")}).join(", ")}),tc(r,"id",Xm("recharts-line-")),tc(r,"pathRef",function(o){r.mainCurve=o}),tc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),tc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return yCe(e,t),pCe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=Wo(u,ny);if(!h)return null;var f=function(v,g){return{x:v.x,y:v.y,value:v.value,errorVal:qs(v.payload,g)}},p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return be.createElement($r,p,h.map(function(y){return be.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=Wt(this.props,!1),f=Wt(c,!0),p=d.map(function(v,g){var b=Eo(Eo(Eo({key:"dot-".concat(g),r:3},h),f),{},{index:g,cx:v.x,cy:v.y,value:v.value,dataKey:u,payload:v.payload,points:d});return e.renderDotItem(c,b)}),y={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return be.createElement($r,_x({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=u7(l,oCe),f=Eo(Eo(Eo({},Wt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return be.createElement(Am,_x({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,p=o.animationId,y=o.animateNewValues,v=o.width,g=o.height,b=this.state,j=b.prevPoints,w=b.totalLength;return be.createElement(hc,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var E=C.t;if(j){var N=j.length/l.length,A=l.map(function(T,R){var O=Math.floor(R*N);if(j[O]){var z=j[O],q=oi(z.x,T.x),B=oi(z.y,T.y);return Eo(Eo({},T),{},{x:q(E),y:B(E)})}if(y){var K=oi(v*2,T.x),Y=oi(g/2,T.y);return Eo(Eo({},T),{},{x:K(E),y:Y(E)})}return Eo(Eo({},T),{},{x:T.x,y:T.y})});return a.renderCurveStatically(A,s,i)}var _=oi(0,w),k=_(E),F;if(c){var I="".concat(c).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});F=a.getStrokeDasharray(k,w,I)}else F=a.generateSimpleStrokeDasharray(w,k);return a.renderCurveStatically(l,s,i,{strokeDasharray:F})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!Mm(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,u=i.yAxis,h=i.top,f=i.left,p=i.width,y=i.height,v=i.isAnimationActive,g=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,j=l.length===1,w=Ir("recharts-line",c),C=d&&d.allowDataOverflow,E=u&&u.allowDataOverflow,N=C||E,A=jr(g)?this.id:g,_=(s=Wt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=_.r,F=k===void 0?3:k,I=_.strokeWidth,T=I===void 0?2:I,R=qU(o)?o:{},O=R.clipDot,z=O===void 0?!0:O,q=F*2+T;return be.createElement($r,{className:w},C||E?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(A)},be.createElement("rect",{x:C?f:f-p/2,y:E?h:h-y/2,width:C?p:p*2,height:E?y:y*2})),!z&&be.createElement("clipPath",{id:"clipPath-dots-".concat(A)},be.createElement("rect",{x:f-q/2,y:h-q/2,width:p+q,height:y+q}))):null,!j&&this.renderCurve(N,A),this.renderErrorBar(N,A),(j||o)&&this.renderDots(N,z,A),(!v||b)&&cd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(Up(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(Up(o),Up(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(be.isValidElement(s))a=be.cloneElement(s,i);else if(hr(s))a=s(i);else{var o=i.key,l=u7(i,lCe),c=Ir("recharts-line-dot",typeof s!="boolean"?s.className:"");a=be.createElement(sy,_x({key:o},l,{className:c}))}return a}}])}(S.PureComponent);tc(iy,"displayName","Line");tc(iy,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ff.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});tc(iy,"getComposedData",function(t){var e=t.props,r=t.xAxis,s=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,l=t.bandSize,c=t.displayedData,d=t.offset,u=e.layout,h=c.map(function(f,p){var y=qs(f,o);return u==="horizontal"?{x:M1({axis:r,ticks:i,bandSize:l,entry:f,index:p}),y:jr(y)?null:s.scale(y),value:y,payload:f}:{x:jr(y)?null:r.scale(y),y:M1({axis:s,ticks:a,bandSize:l,entry:f,index:p}),value:y,payload:f}});return Eo({points:h,layout:u},d)});var jCe=["layout","type","stroke","connectNulls","isRange","ref"],wCe=["key"],qW;function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function UW(t,e){if(t==null)return{};var r=NCe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function NCe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},mm.apply(this,arguments)}function m7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Eh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m7(Object(r),!0).forEach(function(s){id(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function SCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p7(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,HW(s.key),s)}}function ACe(t,e,r){return e&&p7(t.prototype,e),r&&p7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function CCe(t,e,r){return e=oj(e),ECe(t,VW()?Reflect.construct(e,r||[],oj(t).constructor):e.apply(t,r))}function ECe(t,e){if(e&&(Ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PCe(t)}function PCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VW=function(){return!!t})()}function oj(t){return oj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oj(t)}function TCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r4(t,e)}function r4(t,e){return r4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},r4(t,e)}function id(t,e,r){return e=HW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HW(t){var e=_Ce(t,"string");return Ug(e)=="symbol"?e:e+""}function _Ce(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ug(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vf=function(t){function e(){var r;SCe(this,e);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=CCe(this,e,[].concat(i)),id(r,"state",{isAnimationFinished:!0}),id(r,"id",Xm("recharts-area-")),id(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),hr(o)&&o()}),id(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),hr(o)&&o()}),r}return TCe(e,t),ACe(e,[{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,h=c.dataKey,f=Wt(this.props,!1),p=Wt(d,!0),y=u.map(function(g,b){var j=Eh(Eh(Eh({key:"dot-".concat(b),r:3},f),p),{},{index:b,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:u});return e.renderDotItem(d,j)}),v={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return be.createElement($r,mm({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=s*Math.abs(c-d),h=Fh(o.map(function(f){return f.y||0}));return jt(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Fh(a.map(function(f){return f.y||0})),h)),jt(h)?be.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=s*Math.abs(c-d),h=Fh(o.map(function(f){return f.x||0}));return jt(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Fh(a.map(function(f){return f.x||0})),h)),jt(h)?be.createElement("rect",{x:0,y:c<d?c:c-u,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,i,a,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var p=UW(l,jCe);return be.createElement($r,{clipPath:a?"url(#clipPath-".concat(o,")"):null},be.createElement(Am,mm({},Wt(p,!0),{points:s,connectNulls:h,type:d,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&be.createElement(Am,mm({},Wt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:s})),u!=="none"&&f&&be.createElement(Am,mm({},Wt(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,p=o.animationId,y=this.state,v=y.prevPoints,g=y.prevBaseLine;return be.createElement(hc,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var j=b.t;if(v){var w=v.length/l.length,C=l.map(function(_,k){var F=Math.floor(k*w);if(v[F]){var I=v[F],T=oi(I.x,_.x),R=oi(I.y,_.y);return Eh(Eh({},_),{},{x:T(j),y:R(j)})}return _}),E;if(jt(c)&&typeof c=="number"){var N=oi(g,c);E=N(j)}else if(jr(c)||lv(c)){var A=oi(g,0);E=A(j)}else E=c.map(function(_,k){var F=Math.floor(k*w);if(g[F]){var I=g[F],T=oi(I.x,_.x),R=oi(I.y,_.y);return Eh(Eh({},_),{},{x:T(j),y:R(j)})}return _});return a.renderAreaStatically(C,E,s,i)}return be.createElement($r,null,be.createElement("defs",null,be.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(j))),be.createElement($r,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,s,i)))})}},{key:"renderArea",value:function(s,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,d=this.state,u=d.prevPoints,h=d.prevBaseLine,f=d.totalLength;return c&&o&&o.length&&(!u&&f>0||!Mm(u,o)||!Mm(h,l))?this.renderAreaWithAnimation(s,i):this.renderAreaStatically(o,l,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.top,u=i.left,h=i.xAxis,f=i.yAxis,p=i.width,y=i.height,v=i.isAnimationActive,g=i.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,j=l.length===1,w=Ir("recharts-area",c),C=h&&h.allowDataOverflow,E=f&&f.allowDataOverflow,N=C||E,A=jr(g)?this.id:g,_=(s=Wt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=_.r,F=k===void 0?3:k,I=_.strokeWidth,T=I===void 0?2:I,R=qU(o)?o:{},O=R.clipDot,z=O===void 0?!0:O,q=F*2+T;return be.createElement($r,{className:w},C||E?be.createElement("defs",null,be.createElement("clipPath",{id:"clipPath-".concat(A)},be.createElement("rect",{x:C?u:u-p/2,y:E?d:d-y/2,width:C?p:p*2,height:E?y:y*2})),!z&&be.createElement("clipPath",{id:"clipPath-dots-".concat(A)},be.createElement("rect",{x:u-q/2,y:d-q/2,width:p+q,height:y+q}))):null,j?null:this.renderArea(N,A),(o||j)&&this.renderDots(N,z,A),(!v||b)&&cd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:s.points!==i.curPoints||s.baseLine!==i.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(S.PureComponent);qW=vf;id(vf,"displayName","Area");id(vf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ff.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});id(vf,"getBaseValue",function(t,e,r,s){var i=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(jt(l)&&typeof l=="number")return l;var c=i==="horizontal"?s:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return l==="dataMin"?h:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});id(vf,"getComposedData",function(t){var e=t.props,r=t.item,s=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,p=e.layout,y=d&&d.length,v=qW.getBaseValue(e,r,s,i),g=p==="horizontal",b=!1,j=h.map(function(C,E){var N;y?N=d[u+E]:(N=qs(C,c),Array.isArray(N)?b=!0:N=[v,N]);var A=N[1]==null||y&&qs(C,c)==null;return g?{x:M1({axis:s,ticks:a,bandSize:l,entry:C,index:E}),y:A?null:i.scale(N[1]),value:N,payload:C}:{x:A?null:s.scale(N[1]),y:M1({axis:i,ticks:o,bandSize:l,entry:C,index:E}),value:N,payload:C}}),w;return y||b?w=j.map(function(C){var E=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:E!=null&&C.y!=null?i.scale(E):null}:{x:E!=null?s.scale(E):null,y:C.y}}):w=g?i.scale(v):s.scale(v),Eh({points:j,baseLine:w,layout:p,isRange:b},f)});id(vf,"renderDotItem",function(t,e){var r;if(be.isValidElement(t))r=be.cloneElement(t,e);else if(hr(t))r=t(e);else{var s=Ir("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=UW(e,wCe);r=be.createElement(sy,mm({},a,{key:i,className:s}))}return r});function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function ICe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DCe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,KW(s.key),s)}}function kCe(t,e,r){return e&&DCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OCe(t,e,r){return e=lj(e),RCe(t,WW()?Reflect.construct(e,r||[],lj(t).constructor):e.apply(t,r))}function RCe(t,e){if(e&&(Vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LCe(t)}function LCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WW=function(){return!!t})()}function lj(t){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lj(t)}function MCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n4(t,e)}function n4(t,e){return n4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},n4(t,e)}function GW(t,e,r){return e=KW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KW(t){var e=FCe(t,"string");return Vg(e)=="symbol"?e:e+""}function FCe(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function s4(){return s4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},s4.apply(this,arguments)}function $Ce(t){var e=t.xAxisId,r=q_(),s=U_(),i=PW(e);return i==null?null:S.createElement(fv,s4({},i,{className:Ir("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return hu(o,!0)}}))}var Gh=function(t){function e(){return ICe(this,e),OCe(this,e,arguments)}return MCe(e,t),kCe(e,[{key:"render",value:function(){return S.createElement($Ce,this.props)}}])}(S.Component);GW(Gh,"displayName","XAxis");GW(Gh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function BCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zCe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,ZW(s.key),s)}}function qCe(t,e,r){return e&&zCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UCe(t,e,r){return e=cj(e),VCe(t,YW()?Reflect.construct(e,r||[],cj(t).constructor):e.apply(t,r))}function VCe(t,e){if(e&&(Hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HCe(t)}function HCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function cj(t){return cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cj(t)}function WCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i4(t,e)}function i4(t,e){return i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},i4(t,e)}function XW(t,e,r){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t){var e=GCe(t,"string");return Hg(e)=="symbol"?e:e+""}function GCe(t,e){if(Hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Hg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a4(){return a4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},a4.apply(this,arguments)}var KCe=function(e){var r=e.yAxisId,s=q_(),i=U_(),a=TW(r);return a==null?null:S.createElement(fv,a4({},a,{className:Ir("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return hu(l,!0)}}))},Kh=function(t){function e(){return BCe(this,e),UCe(this,e,arguments)}return WCe(e,t),qCe(e,[{key:"render",value:function(){return S.createElement(KCe,this.props)}}])}(S.Component);XW(Kh,"displayName","YAxis");XW(Kh,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function g7(t){return QCe(t)||ZCe(t)||XCe(t)||YCe()}function YCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(t,e){if(t){if(typeof t=="string")return o4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o4(t,e)}}function ZCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QCe(t){if(Array.isArray(t))return o4(t)}function o4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var l4=function(e,r,s,i,a){var o=Wo(e,H_),l=Wo(e,Cw),c=[].concat(g7(o),g7(l)),d=Wo(e,Pw),u="".concat(i,"Id"),h=i[0],f=r;if(c.length&&(f=c.reduce(function(v,g){if(g.props[u]===s&&dd(g.props,"extendDomain")&&jt(g.props[h])){var b=g.props[h];return[Math.min(v[0],b),Math.max(v[1],b)]}return v},f)),d.length){var p="".concat(h,"1"),y="".concat(h,"2");f=d.reduce(function(v,g){if(g.props[u]===s&&dd(g.props,"extendDomain")&&jt(g.props[p])&&jt(g.props[y])){var b=g.props[p],j=g.props[y];return[Math.min(v[0],b,j),Math.max(v[1],b,j)]}return v},f)}return a&&a.length&&(f=a.reduce(function(v,g){return jt(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},f)),f},EC={exports:{}},v7;function JCe(){return v7||(v7=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,h||c,f),y=r?r+d:d;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,y=new Array(p);f<p;f++)y[f]=h[f].fn;return y},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,p,y){var v=r?r+d:d;if(!this._events[v])return!1;var g=this._events[v],b=arguments.length,j,w;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,p),!0;case 6:return g.fn.call(g.context,u,h,f,p,y),!0}for(w=1,j=new Array(b-1);w<b;w++)j[w-1]=arguments[w];g.fn.apply(g.context,j)}else{var C=g.length,E;for(w=0;w<C;w++)switch(g[w].once&&this.removeListener(d,g[w].fn,void 0,!0),b){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,h);break;case 4:g[w].fn.call(g[w].context,u,h,f);break;default:if(!j)for(E=1,j=new Array(b-1);E<b;E++)j[E-1]=arguments[E];g[w].fn.apply(g[w].context,j)}}return!0},l.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===u&&(!f||y.once)&&(!h||y.context===h)&&o(this,p);else{for(var v=0,g=[],b=y.length;v<b;v++)(y[v].fn!==u||f&&!y[v].once||h&&y[v].context!==h)&&g.push(y[v]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l}(EC)),EC.exports}var eEe=JCe();const tEe=Kr(eEe);var PC=new tEe,TC="recharts.syncMouseEvents";function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function rEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nEe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,QW(s.key),s)}}function sEe(t,e,r){return e&&nEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _C(t,e,r){return e=QW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QW(t){var e=iEe(t,"string");return T0(e)=="symbol"?e:e+""}function iEe(t,e){if(T0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(T0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aEe=function(){function t(){rEe(this,t),_C(this,"activeIndex",0),_C(this,"coordinateList",[]),_C(this,"layout","horizontal")}return sEe(t,[{key:"setDetails",value:function(r){var s,i=r.coordinateList,a=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,h=u===void 0?null:u,f=r.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=a+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function oEe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var s=t?.[0],i=t?.[1];if(s&&i&&jt(s)&&jt(i))return!0}return!1}function lEe(t,e,r,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?s:r.width-1,height:t==="horizontal"?r.height-1:s}}function JW(t){var e=t.cx,r=t.cy,s=t.radius,i=t.startAngle,a=t.endAngle,o=zn(e,r,s,i),l=zn(e,r,s,a);return{points:[o,l],cx:e,cy:r,radius:s,startAngle:i,endAngle:a}}function cEe(t,e,r){var s,i,a,o;if(t==="horizontal")s=e.x,a=s,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,s=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,h=e.angle,f=zn(l,c,d,h),p=zn(l,c,u,h);s=f.x,i=f.y,a=p.x,o=p.y}else return JW(e);return[{x:s,y:i},{x:a,y:o}]}function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function x7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Pb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(r),!0).forEach(function(s){dEe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function dEe(t,e,r){return e=uEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uEe(t){var e=hEe(t,"string");return _0(e)=="symbol"?e:e+""}function hEe(t,e){if(_0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(_0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fEe(t){var e,r,s=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,p=(e=s.props.cursor)!==null&&e!==void 0?e:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!p||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var y,v=Am;if(f==="ScatterChart")y=o,v=ANe;else if(f==="BarChart")y=lEe(h,o,c,u),v=M_;else if(h==="radial"){var g=JW(o),b=g.cx,j=g.cy,w=g.radius,C=g.startAngle,E=g.endAngle;y={cx:b,cy:j,startAngle:C,endAngle:E,innerRadius:w,outerRadius:w},v=ZH}else y={points:cEe(h,o,c)},v=Am;var N=Pb(Pb(Pb(Pb({stroke:"#ccc",pointerEvents:"none"},c),y),Wt(p,!1)),{},{payload:l,payloadIndex:d,className:Ir("recharts-tooltip-cursor",p.className)});return S.isValidElement(p)?S.cloneElement(p,N):S.createElement(v,N)}var mEe=["item"],pEe=["children","className","width","height","style","compact","title","desc"];function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function ng(){return ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ng.apply(this,arguments)}function y7(t,e){return xEe(t)||vEe(t,e)||tG(t,e)||gEe()}function gEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vEe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function xEe(t){if(Array.isArray(t))return t}function b7(t,e){if(t==null)return{};var r=yEe(t,e),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)s=a[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function yEe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function bEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jEe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,rG(s.key),s)}}function wEe(t,e,r){return e&&jEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NEe(t,e,r){return e=dj(e),SEe(t,eG()?Reflect.construct(e,r||[],dj(t).constructor):e.apply(t,r))}function SEe(t,e){if(e&&(Wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AEe(t)}function AEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eG=function(){return!!t})()}function dj(t){return dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dj(t)}function CEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c4(t,e)}function c4(t,e){return c4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},c4(t,e)}function Gg(t){return TEe(t)||PEe(t)||tG(t)||EEe()}function EEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tG(t,e){if(t){if(typeof t=="string")return d4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(t,e)}}function PEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TEe(t){if(Array.isArray(t))return d4(t)}function d4(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function j7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j7(Object(r),!0).forEach(function(s){dr(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function dr(t,e,r){return e=rG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rG(t){var e=_Ee(t,"string");return Wg(e)=="symbol"?e:e+""}function _Ee(t,e){if(Wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Wg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IEe={xAxis:["bottom","top"],yAxis:["left","right"]},DEe={width:"100%",height:"100%"},nG={x:0,y:0};function Tb(t){return t}var kEe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},OEe=function(e,r,s,i){var a=r.find(function(u){return u&&u.index===s});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=i.radius;return ot(ot(ot({},i),zn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return ot(ot(ot({},i),zn(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return nG},Tw=function(e,r){var s=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Gg(l),Gg(d)):l},[]);return o.length>0?o:e&&e.length&&jt(i)&&jt(a)?e.slice(i,a+1):[]};function sG(t){return t==="number"?[0,"auto"]:void 0}var u4=function(e,r,s,i){var a=e.graphicalItems,o=e.tooltipAxis,l=Tw(r,e);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=s&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=h===void 0?l:h;f=h1(p,o.dataKey,i)}else f=h&&h[s]||l[s];return f?[].concat(Gg(c),[HH(d,f)]):c},[])},w7=function(e,r,s,i){var a=i||{x:e.chartX,y:e.chartY},o=kEe(a,s),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=eje(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=u4(e,r,u,h),p=OEe(s,l,u,a);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:p}}return null},REe=function(e,r){var s=r.axes,i=r.graphicalItems,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=e.stackOffset,p=$H(u,a);return s.reduce(function(y,v){var g,b=v.type.defaultProps!==void 0?ot(ot({},v.type.defaultProps),v.props):v.props,j=b.type,w=b.dataKey,C=b.allowDataOverflow,E=b.allowDuplicatedCategory,N=b.scale,A=b.ticks,_=b.includeHidden,k=b[o];if(y[k])return y;var F=Tw(e.data,{graphicalItems:i.filter(function($){var W,te=o in $.props?$.props[o]:(W=$.type.defaultProps)===null||W===void 0?void 0:W[o];return te===k}),dataStartIndex:c,dataEndIndex:d}),I=F.length,T,R,O;oEe(b.domain,C,j)&&(T=SP(b.domain,null,C),p&&(j==="number"||N!=="auto")&&(O=Cx(F,w,"category")));var z=sG(j);if(!T||T.length===0){var q,B=(q=b.domain)!==null&&q!==void 0?q:z;if(w){if(T=Cx(F,w,j),j==="category"&&p){var K=Yme(T);E&&K?(R=T,T=X1(0,I)):E||(T=w6(B,T,v).reduce(function($,W){return $.indexOf(W)>=0?$:[].concat(Gg($),[W])},[]))}else if(j==="category")E?T=T.filter(function($){return $!==""&&!jr($)}):T=w6(B,T,v).reduce(function($,W){return $.indexOf(W)>=0||W===""||jr(W)?$:[].concat(Gg($),[W])},[]);else if(j==="number"){var Y=ije(F,i.filter(function($){var W,te,ee=o in $.props?$.props[o]:(W=$.type.defaultProps)===null||W===void 0?void 0:W[o],ne="hide"in $.props?$.props.hide:(te=$.type.defaultProps)===null||te===void 0?void 0:te.hide;return ee===k&&(_||!ne)}),w,a,u);Y&&(T=Y)}p&&(j==="number"||N!=="auto")&&(O=Cx(F,w,"category"))}else p?T=X1(0,I):l&&l[k]&&l[k].hasStack&&j==="number"?T=f==="expand"?[0,1]:VH(l[k].stackGroups,c,d):T=FH(F,i.filter(function($){var W=o in $.props?$.props[o]:$.type.defaultProps[o],te="hide"in $.props?$.props.hide:$.type.defaultProps.hide;return W===k&&(_||!te)}),j,u,!0);if(j==="number")T=l4(h,T,k,a,A),B&&(T=SP(B,T,C));else if(j==="category"&&B){var J=B,H=T.every(function($){return J.indexOf($)>=0});H&&(T=J)}}return ot(ot({},y),{},dr({},k,ot(ot({},b),{},{axisType:a,domain:T,categoricalDomain:O,duplicateDomain:R,originalDomain:(g=b.domain)!==null&&g!==void 0?g:z,isCategorical:p,layout:u})))},{})},LEe=function(e,r){var s=r.graphicalItems,i=r.Axis,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=Tw(e.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),p=f.length,y=$H(u,a),v=-1;return s.reduce(function(g,b){var j=b.type.defaultProps!==void 0?ot(ot({},b.type.defaultProps),b.props):b.props,w=j[o],C=sG("number");if(!g[w]){v++;var E;return y?E=X1(0,p):l&&l[w]&&l[w].hasStack?(E=VH(l[w].stackGroups,c,d),E=l4(h,E,w,a)):(E=SP(C,FH(f,s.filter(function(N){var A,_,k=o in N.props?N.props[o]:(A=N.type.defaultProps)===null||A===void 0?void 0:A[o],F="hide"in N.props?N.props.hide:(_=N.type.defaultProps)===null||_===void 0?void 0:_.hide;return k===w&&!F}),"number",u),i.defaultProps.allowDataOverflow),E=l4(h,E,w,a)),ot(ot({},g),{},dr({},w,ot(ot({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ho(IEe,"".concat(a,".").concat(v%2),null),domain:E,originalDomain:C,isCategorical:y,layout:u})))}return g},{})},MEe=function(e,r){var s=r.axisType,i=s===void 0?"xAxis":s,a=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.children,h="".concat(i,"Id"),f=Wo(u,a),p={};return f&&f.length?p=REe(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(p=LEe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),p},FEe=function(e){var r=Oh(e),s=hu(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:d_(s,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:F1(r,s)}},N7=function(e){var r=e.children,s=e.defaultShowTooltip,i=Do(r,Lg),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},$Ee=function(e){return!e||!e.length?!1:e.some(function(r){var s=fu(r&&r.type);return s&&s.indexOf("Bar")>=0})},S7=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},BEe=function(e,r){var s=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,h=s.children,f=s.margin||{},p=Do(h,Lg),y=Do(h,lg),v=Object.keys(c).reduce(function(E,N){var A=c[N],_=A.orientation;return!A.mirror&&!A.hide?ot(ot({},E),{},dr({},_,E[_]+A.width)):E},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(E,N){var A=o[N],_=A.orientation;return!A.mirror&&!A.hide?ot(ot({},E),{},dr({},_,Ho(E,"".concat(_))+A.height)):E},{top:f.top||0,bottom:f.bottom||0}),b=ot(ot({},g),v),j=b.bottom;p&&(b.bottom+=p.props.height||Lg.defaultProps.height),y&&r&&(b=nje(b,i,s,r));var w=d-b.left-b.right,C=u-b.top-b.bottom;return ot(ot({brushBottom:j},b),{},{width:Math.max(w,0),height:Math.max(C,0)})},zEe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},_w=function(e){var r=e.chartName,s=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,f=function(b,j){var w=j.graphicalItems,C=j.stackGroups,E=j.offset,N=j.updateId,A=j.dataStartIndex,_=j.dataEndIndex,k=b.barSize,F=b.layout,I=b.barGap,T=b.barCategoryGap,R=b.maxBarSize,O=S7(F),z=O.numericAxisName,q=O.cateAxisName,B=$Ee(w),K=[];return w.forEach(function(Y,J){var H=Tw(b.data,{graphicalItems:[Y],dataStartIndex:A,dataEndIndex:_}),$=Y.type.defaultProps!==void 0?ot(ot({},Y.type.defaultProps),Y.props):Y.props,W=$.dataKey,te=$.maxBarSize,ee=$["".concat(z,"Id")],ne=$["".concat(q,"Id")],ae={},ve=c.reduce(function(vt,xt){var Ot=j["".concat(xt.axisType,"Map")],Ze=$["".concat(xt.axisType,"Id")];Ot&&Ot[Ze]||xt.axisType==="zAxis"||ef();var ut=Ot[Ze];return ot(ot({},vt),{},dr(dr({},xt.axisType,ut),"".concat(xt.axisType,"Ticks"),hu(ut)))},ae),xe=ve[q],Se=ve["".concat(q,"Ticks")],Pe=C&&C[ee]&&C[ee].hasStack&&mje(Y,C[ee].stackGroups),Ce=fu(Y.type).indexOf("Bar")>=0,He=F1(xe,Se),Ke=[],we=B&&tje({barSize:k,stackGroups:C,totalSize:zEe(ve,q)});if(Ce){var oe,it,_e=jr(te)?R:te,qe=(oe=(it=F1(xe,Se,!0))!==null&&it!==void 0?it:_e)!==null&&oe!==void 0?oe:0;Ke=rje({barGap:I,barCategoryGap:T,bandSize:qe!==He?qe:He,sizeList:we[ne],maxBarSize:_e}),qe!==He&&(Ke=Ke.map(function(vt){return ot(ot({},vt),{},{position:ot(ot({},vt.position),{},{offset:vt.position.offset-qe/2})})}))}var lt=Y&&Y.type&&Y.type.getComposedData;lt&&K.push({props:ot(ot({},lt(ot(ot({},ve),{},{displayedData:H,props:b,dataKey:W,item:Y,bandSize:He,barPosition:Ke,offset:E,stackedData:Pe,layout:F,dataStartIndex:A,dataEndIndex:_}))),{},dr(dr(dr({key:Y.key||"item-".concat(J)},z,ve[z]),q,ve[q]),"animationId",N)),childIndex:ope(Y,b.children),item:Y})}),K},p=function(b,j){var w=b.props,C=b.dataStartIndex,E=b.dataEndIndex,N=b.updateId;if(!MR({props:w}))return null;var A=w.children,_=w.layout,k=w.stackOffset,F=w.data,I=w.reverseStackOrder,T=S7(_),R=T.numericAxisName,O=T.cateAxisName,z=Wo(A,s),q=hje(F,z,"".concat(R,"Id"),"".concat(O,"Id"),k,I),B=c.reduce(function($,W){var te="".concat(W.axisType,"Map");return ot(ot({},$),{},dr({},te,MEe(w,ot(ot({},W),{},{graphicalItems:z,stackGroups:W.axisType===R&&q,dataStartIndex:C,dataEndIndex:E}))))},{}),K=BEe(ot(ot({},B),{},{props:w,graphicalItems:z}),j?.legendBBox);Object.keys(B).forEach(function($){B[$]=u(w,B[$],K,$.replace("Map",""),r)});var Y=B["".concat(O,"Map")],J=FEe(Y),H=f(w,ot(ot({},B),{},{dataStartIndex:C,dataEndIndex:E,updateId:N,graphicalItems:z,stackGroups:q,offset:K}));return ot(ot({formattedGraphicalItems:H,graphicalItems:z,offset:K,stackGroups:q},J),B)},y=function(g){function b(j){var w,C,E;return bEe(this,b),E=NEe(this,b,[j]),dr(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),dr(E,"accessibilityManager",new aEe),dr(E,"handleLegendBBoxUpdate",function(N){if(N){var A=E.state,_=A.dataStartIndex,k=A.dataEndIndex,F=A.updateId;E.setState(ot({legendBBox:N},p({props:E.props,dataStartIndex:_,dataEndIndex:k,updateId:F},ot(ot({},E.state),{},{legendBBox:N}))))}}),dr(E,"handleReceiveSyncEvent",function(N,A,_){if(E.props.syncId===N){if(_===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(A)}}),dr(E,"handleBrushChange",function(N){var A=N.startIndex,_=N.endIndex;if(A!==E.state.dataStartIndex||_!==E.state.dataEndIndex){var k=E.state.updateId;E.setState(function(){return ot({dataStartIndex:A,dataEndIndex:_},p({props:E.props,dataStartIndex:A,dataEndIndex:_,updateId:k},E.state))}),E.triggerSyncEvent({dataStartIndex:A,dataEndIndex:_})}}),dr(E,"handleMouseEnter",function(N){var A=E.getMouseInfo(N);if(A){var _=ot(ot({},A),{},{isTooltipActive:!0});E.setState(_),E.triggerSyncEvent(_);var k=E.props.onMouseEnter;hr(k)&&k(_,N)}}),dr(E,"triggeredAfterMouseMove",function(N){var A=E.getMouseInfo(N),_=A?ot(ot({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(_),E.triggerSyncEvent(_);var k=E.props.onMouseMove;hr(k)&&k(_,N)}),dr(E,"handleItemMouseEnter",function(N){E.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),dr(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),dr(E,"handleMouseMove",function(N){N.persist(),E.throttleTriggeredAfterMouseMove(N)}),dr(E,"handleMouseLeave",function(N){E.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};E.setState(A),E.triggerSyncEvent(A);var _=E.props.onMouseLeave;hr(_)&&_(A,N)}),dr(E,"handleOuterEvent",function(N){var A=ape(N),_=Ho(E.props,"".concat(A));if(A&&hr(_)){var k,F;/.*touch.*/i.test(A)?F=E.getMouseInfo(N.changedTouches[0]):F=E.getMouseInfo(N),_((k=F)!==null&&k!==void 0?k:{},N)}}),dr(E,"handleClick",function(N){var A=E.getMouseInfo(N);if(A){var _=ot(ot({},A),{},{isTooltipActive:!0});E.setState(_),E.triggerSyncEvent(_);var k=E.props.onClick;hr(k)&&k(_,N)}}),dr(E,"handleMouseDown",function(N){var A=E.props.onMouseDown;if(hr(A)){var _=E.getMouseInfo(N);A(_,N)}}),dr(E,"handleMouseUp",function(N){var A=E.props.onMouseUp;if(hr(A)){var _=E.getMouseInfo(N);A(_,N)}}),dr(E,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),dr(E,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.handleMouseDown(N.changedTouches[0])}),dr(E,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&E.handleMouseUp(N.changedTouches[0])}),dr(E,"handleDoubleClick",function(N){var A=E.props.onDoubleClick;if(hr(A)){var _=E.getMouseInfo(N);A(_,N)}}),dr(E,"handleContextMenu",function(N){var A=E.props.onContextMenu;if(hr(A)){var _=E.getMouseInfo(N);A(_,N)}}),dr(E,"triggerSyncEvent",function(N){E.props.syncId!==void 0&&PC.emit(TC,E.props.syncId,N,E.eventEmitterSymbol)}),dr(E,"applySyncEvent",function(N){var A=E.props,_=A.layout,k=A.syncMethod,F=E.state.updateId,I=N.dataStartIndex,T=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)E.setState(ot({dataStartIndex:I,dataEndIndex:T},p({props:E.props,dataStartIndex:I,dataEndIndex:T,updateId:F},E.state)));else if(N.activeTooltipIndex!==void 0){var R=N.chartX,O=N.chartY,z=N.activeTooltipIndex,q=E.state,B=q.offset,K=q.tooltipTicks;if(!B)return;if(typeof k=="function")z=k(K,N);else if(k==="value"){z=-1;for(var Y=0;Y<K.length;Y++)if(K[Y].value===N.activeLabel){z=Y;break}}var J=ot(ot({},B),{},{x:B.left,y:B.top}),H=Math.min(R,J.x+J.width),$=Math.min(O,J.y+J.height),W=K[z]&&K[z].value,te=u4(E.state,E.props.data,z),ee=K[z]?{x:_==="horizontal"?K[z].coordinate:H,y:_==="horizontal"?$:K[z].coordinate}:nG;E.setState(ot(ot({},N),{},{activeLabel:W,activeCoordinate:ee,activePayload:te,activeTooltipIndex:z}))}else E.setState(N)}),dr(E,"renderCursor",function(N){var A,_=E.state,k=_.isTooltipActive,F=_.activeCoordinate,I=_.activePayload,T=_.offset,R=_.activeTooltipIndex,O=_.tooltipAxisBandSize,z=E.getTooltipEventType(),q=(A=N.props.active)!==null&&A!==void 0?A:k,B=E.props.layout,K=N.key||"_recharts-cursor";return be.createElement(fEe,{key:K,activeCoordinate:F,activePayload:I,activeTooltipIndex:R,chartName:r,element:N,isActive:q,layout:B,offset:T,tooltipAxisBandSize:O,tooltipEventType:z})}),dr(E,"renderPolarAxis",function(N,A,_){var k=Ho(N,"type.axisType"),F=Ho(E.state,"".concat(k,"Map")),I=N.type.defaultProps,T=I!==void 0?ot(ot({},I),N.props):N.props,R=F&&F[T["".concat(k,"Id")]];return S.cloneElement(N,ot(ot({},R),{},{className:Ir(k,R.className),key:N.key||"".concat(A,"-").concat(_),ticks:hu(R,!0)}))}),dr(E,"renderPolarGrid",function(N){var A=N.props,_=A.radialLines,k=A.polarAngles,F=A.polarRadius,I=E.state,T=I.radiusAxisMap,R=I.angleAxisMap,O=Oh(T),z=Oh(R),q=z.cx,B=z.cy,K=z.innerRadius,Y=z.outerRadius;return S.cloneElement(N,{polarAngles:Array.isArray(k)?k:hu(z,!0).map(function(J){return J.coordinate}),polarRadius:Array.isArray(F)?F:hu(O,!0).map(function(J){return J.coordinate}),cx:q,cy:B,innerRadius:K,outerRadius:Y,key:N.key||"polar-grid",radialLines:_})}),dr(E,"renderLegend",function(){var N=E.state.formattedGraphicalItems,A=E.props,_=A.children,k=A.width,F=A.height,I=E.props.margin||{},T=k-(I.left||0)-(I.right||0),R=LH({children:_,formattedGraphicalItems:N,legendWidth:T,legendContent:d});if(!R)return null;var O=R.item,z=b7(R,mEe);return S.cloneElement(O,ot(ot({},z),{},{chartWidth:k,chartHeight:F,margin:I,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),dr(E,"renderTooltip",function(){var N,A=E.props,_=A.children,k=A.accessibilityLayer,F=Do(_,Ro);if(!F)return null;var I=E.state,T=I.isTooltipActive,R=I.activeCoordinate,O=I.activePayload,z=I.activeLabel,q=I.offset,B=(N=F.props.active)!==null&&N!==void 0?N:T;return S.cloneElement(F,{viewBox:ot(ot({},q),{},{x:q.left,y:q.top}),active:B,label:z,payload:B?O:[],coordinate:R,accessibilityLayer:k})}),dr(E,"renderBrush",function(N){var A=E.props,_=A.margin,k=A.data,F=E.state,I=F.offset,T=F.dataStartIndex,R=F.dataEndIndex,O=F.updateId;return S.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Sb(E.handleBrushChange,N.props.onChange),data:k,x:jt(N.props.x)?N.props.x:I.left,y:jt(N.props.y)?N.props.y:I.top+I.height+I.brushBottom-(_.bottom||0),width:jt(N.props.width)?N.props.width:I.width,startIndex:T,endIndex:R,updateId:"brush-".concat(O)})}),dr(E,"renderReferenceElement",function(N,A,_){if(!N)return null;var k=E,F=k.clipPathId,I=E.state,T=I.xAxisMap,R=I.yAxisMap,O=I.offset,z=N.type.defaultProps||{},q=N.props,B=q.xAxisId,K=B===void 0?z.xAxisId:B,Y=q.yAxisId,J=Y===void 0?z.yAxisId:Y;return S.cloneElement(N,{key:N.key||"".concat(A,"-").concat(_),xAxis:T[K],yAxis:R[J],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:F})}),dr(E,"renderActivePoints",function(N){var A=N.item,_=N.activePoint,k=N.basePoint,F=N.childIndex,I=N.isRange,T=[],R=A.props.key,O=A.item.type.defaultProps!==void 0?ot(ot({},A.item.type.defaultProps),A.item.props):A.item.props,z=O.activeDot,q=O.dataKey,B=ot(ot({index:F,dataKey:q,cx:_.x,cy:_.y,r:4,fill:L_(A.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},Wt(z,!1)),f1(z));return T.push(b.renderActiveDot(z,B,"".concat(R,"-activePoint-").concat(F))),k?T.push(b.renderActiveDot(z,ot(ot({},B),{},{cx:k.x,cy:k.y}),"".concat(R,"-basePoint-").concat(F))):I&&T.push(null),T}),dr(E,"renderGraphicChild",function(N,A,_){var k=E.filterFormatItem(N,A,_);if(!k)return null;var F=E.getTooltipEventType(),I=E.state,T=I.isTooltipActive,R=I.tooltipAxis,O=I.activeTooltipIndex,z=I.activeLabel,q=E.props.children,B=Do(q,Ro),K=k.props,Y=K.points,J=K.isRange,H=K.baseLine,$=k.item.type.defaultProps!==void 0?ot(ot({},k.item.type.defaultProps),k.item.props):k.item.props,W=$.activeDot,te=$.hide,ee=$.activeBar,ne=$.activeShape,ae=!!(!te&&T&&B&&(W||ee||ne)),ve={};F!=="axis"&&B&&B.props.trigger==="click"?ve={onClick:Sb(E.handleItemMouseEnter,N.props.onClick)}:F!=="axis"&&(ve={onMouseLeave:Sb(E.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Sb(E.handleItemMouseEnter,N.props.onMouseEnter)});var xe=S.cloneElement(N,ot(ot({},k.props),ve));function Se(xt){return typeof R.dataKey=="function"?R.dataKey(xt.payload):null}if(ae)if(O>=0){var Pe,Ce;if(R.dataKey&&!R.allowDuplicatedCategory){var He=typeof R.dataKey=="function"?Se:"payload.".concat(R.dataKey.toString());Pe=h1(Y,He,z),Ce=J&&H&&h1(H,He,z)}else Pe=Y?.[O],Ce=J&&H&&H[O];if(ne||ee){var Ke=N.props.activeIndex!==void 0?N.props.activeIndex:O;return[S.cloneElement(N,ot(ot(ot({},k.props),ve),{},{activeIndex:Ke})),null,null]}if(!jr(Pe))return[xe].concat(Gg(E.renderActivePoints({item:k,activePoint:Pe,basePoint:Ce,childIndex:O,isRange:J})))}else{var we,oe=(we=E.getItemByXY(E.state.activeCoordinate))!==null&&we!==void 0?we:{graphicalItem:xe},it=oe.graphicalItem,_e=it.item,qe=_e===void 0?N:_e,lt=it.childIndex,vt=ot(ot(ot({},k.props),ve),{},{activeIndex:lt});return[S.cloneElement(qe,vt),null,null]}return J?[xe,null,null]:[xe,null]}),dr(E,"renderCustomized",function(N,A,_){return S.cloneElement(N,ot(ot({key:"recharts-customized-".concat(_)},E.props),E.state))}),dr(E,"renderMap",{CartesianGrid:{handler:Tb,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:Tb},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:Tb},YAxis:{handler:Tb},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((w=j.id)!==null&&w!==void 0?w:Xm("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=RV(E.triggeredAfterMouseMove,(C=j.throttleDelay)!==null&&C!==void 0?C:1e3/60),E.state={},E}return CEe(b,g),wEe(b,[{key:"componentDidMount",value:function(){var w,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,C=w.children,E=w.data,N=w.height,A=w.layout,_=Do(C,Ro);if(_){var k=_.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,I=u4(this.state,E,k,F),T=this.state.tooltipTicks[k].coordinate,R=(this.state.offset.top+N)/2,O=A==="horizontal",z=O?{x:T,y:R}:{y:T,x:R},q=this.state.formattedGraphicalItems.find(function(K){var Y=K.item;return Y.type.name==="Scatter"});q&&(z=ot(ot({},z),q.props.points[k].tooltipPosition),I=q.props.points[k].tooltipPayload);var B={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:F,activePayload:I,activeCoordinate:z};this.setState(B),this.renderCursor(_),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var E,N;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){WE([Do(w.children,Ro)],[Do(this.props.children,Ro)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Do(this.props.children,Ro);if(w&&typeof w.props.shared=="boolean"){var C=w.props.shared?"axis":"item";return l.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var C=this.container,E=C.getBoundingClientRect(),N=Gxe(E),A={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},_=E.width/C.offsetWidth||1,k=this.inRange(A.chartX,A.chartY,_);if(!k)return null;var F=this.state,I=F.xAxisMap,T=F.yAxisMap,R=this.getTooltipEventType(),O=w7(this.state,this.props.data,this.props.layout,k);if(R!=="axis"&&I&&T){var z=Oh(I).scale,q=Oh(T).scale,B=z&&z.invert?z.invert(A.chartX):null,K=q&&q.invert?q.invert(A.chartY):null;return ot(ot({},A),{},{xValue:B,yValue:K},O)}return O?ot(ot({},A),O):null}},{key:"inRange",value:function(w,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,A=w/E,_=C/E;if(N==="horizontal"||N==="vertical"){var k=this.state.offset,F=A>=k.left&&A<=k.left+k.width&&_>=k.top&&_<=k.top+k.height;return F?{x:A,y:_}:null}var I=this.state,T=I.angleAxisMap,R=I.radiusAxisMap;if(T&&R){var O=Oh(T);return A6({x:A,y:_},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,C=this.getTooltipEventType(),E=Do(w,Ro),N={};E&&C==="axis"&&(E.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=f1(this.props,this.handleOuterEvent);return ot(ot({},A),N)}},{key:"addListener",value:function(){PC.on(TC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PC.removeListener(TC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,C,E){for(var N=this.state.formattedGraphicalItems,A=0,_=N.length;A<_;A++){var k=N[A];if(k.item===w||k.props.key===w.key||C===fu(k.item.type)&&E===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,C=this.state.offset,E=C.left,N=C.top,A=C.height,_=C.width;return be.createElement("defs",null,be.createElement("clipPath",{id:w},be.createElement("rect",{x:E,y:N,height:A,width:_})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(C,E){var N=y7(E,2),A=N[0],_=N[1];return ot(ot({},C),{},dr({},A,_.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(C,E){var N=y7(E,2),A=N[0],_=N[1];return ot(ot({},C),{},dr({},A,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(w){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(w){var C=this.state,E=C.formattedGraphicalItems,N=C.activeItem;if(E&&E.length)for(var A=0,_=E.length;A<_;A++){var k=E[A],F=k.props,I=k.item,T=I.type.defaultProps!==void 0?ot(ot({},I.type.defaultProps),I.props):I.props,R=fu(I.type);if(R==="Bar"){var O=(F.data||[]).find(function(K){return iNe(w,K)});if(O)return{graphicalItem:k,payload:O}}else if(R==="RadialBar"){var z=(F.data||[]).find(function(K){return A6(w,K)});if(z)return{graphicalItem:k,payload:z}}else if(ww(k,N)||Nw(k,N)||S0(k,N)){var q=PSe({graphicalItem:k,activeTooltipItem:N,itemData:T.data}),B=T.activeIndex===void 0?q:T.activeIndex;return{graphicalItem:ot(ot({},k),{},{childIndex:B}),payload:S0(k,N)?T.data[q]:k.props.data[q]}}}return null}},{key:"render",value:function(){var w=this;if(!MR(this))return null;var C=this.props,E=C.children,N=C.className,A=C.width,_=C.height,k=C.style,F=C.compact,I=C.title,T=C.desc,R=b7(C,pEe),O=Wt(R,!1);if(F)return be.createElement(Q8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement(KE,ng({},O,{width:A,height:_,title:I,desc:T}),this.renderClipPath(),$R(E,this.renderMap)));if(this.props.accessibilityLayer){var z,q;O.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,O.role=(q=this.props.role)!==null&&q!==void 0?q:"application",O.onKeyDown=function(K){w.accessibilityManager.keyboardEvent(K)},O.onFocus=function(){w.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return be.createElement(Q8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},be.createElement("div",ng({className:Ir("recharts-wrapper",N),style:ot({position:"relative",cursor:"default",width:A,height:_},k)},B,{ref:function(Y){w.container=Y}}),be.createElement(KE,ng({},O,{width:A,height:_,title:I,desc:T,style:DEe}),this.renderClipPath(),$R(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(S.Component);dr(y,"displayName",r),dr(y,"defaultProps",ot({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),dr(y,"getDerivedStateFromProps",function(g,b){var j=g.dataKey,w=g.data,C=g.children,E=g.width,N=g.height,A=g.layout,_=g.stackOffset,k=g.margin,F=b.dataStartIndex,I=b.dataEndIndex;if(b.updateId===void 0){var T=N7(g);return ot(ot(ot({},T),{},{updateId:0},p(ot(ot({props:g},T),{},{updateId:0}),b)),{},{prevDataKey:j,prevData:w,prevWidth:E,prevHeight:N,prevLayout:A,prevStackOffset:_,prevMargin:k,prevChildren:C})}if(j!==b.prevDataKey||w!==b.prevData||E!==b.prevWidth||N!==b.prevHeight||A!==b.prevLayout||_!==b.prevStackOffset||!og(k,b.prevMargin)){var R=N7(g),O={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},z=ot(ot({},w7(b,w,A)),{},{updateId:b.updateId+1}),q=ot(ot(ot({},R),O),z);return ot(ot(ot({},q),p(ot({props:g},q),b)),{},{prevDataKey:j,prevData:w,prevWidth:E,prevHeight:N,prevLayout:A,prevStackOffset:_,prevMargin:k,prevChildren:C})}if(!WE(C,b.prevChildren)){var B,K,Y,J,H=Do(C,Lg),$=H&&(B=(K=H.props)===null||K===void 0?void 0:K.startIndex)!==null&&B!==void 0?B:F,W=H&&(Y=(J=H.props)===null||J===void 0?void 0:J.endIndex)!==null&&Y!==void 0?Y:I,te=$!==F||W!==I,ee=!jr(w),ne=ee&&!te?b.updateId:b.updateId+1;return ot(ot({updateId:ne},p(ot(ot({props:g},b),{},{updateId:ne,dataStartIndex:$,dataEndIndex:W}),b)),{},{prevChildren:C,dataStartIndex:$,dataEndIndex:W})}return null}),dr(y,"renderActiveDot",function(g,b,j){var w;return S.isValidElement(g)?w=S.cloneElement(g,b):hr(g)?w=g(b):w=be.createElement(sy,b),be.createElement($r,{className:"recharts-active-dot",key:j},w)});var v=S.forwardRef(function(b,j){return be.createElement(y,ng({},b,{ref:j}))});return v.displayName=y.displayName,v},qEe=_w({chartName:"LineChart",GraphicalChild:iy,axisComponents:[{axisType:"xAxis",AxisComp:Gh},{axisType:"yAxis",AxisComp:Kh}],formatAxisMap:F_}),UEe=_w({chartName:"BarChart",GraphicalChild:ep,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Gh},{axisType:"yAxis",AxisComp:Kh}],formatAxisMap:F_}),VEe=_w({chartName:"PieChart",GraphicalChild:Tu,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:jw},{axisType:"radiusAxis",AxisComp:yw}],formatAxisMap:Sje,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),HEe=_w({chartName:"AreaChart",GraphicalChild:vf,axisComponents:[{axisType:"xAxis",AxisComp:Gh},{axisType:"yAxis",AxisComp:Kh}],formatAxisMap:F_});const A7=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function WEe(){const[t,e]=S.useState("30d"),[r,s]=S.useState("All"),[i,a]=S.useState(null),[o,l]=S.useState(!0);S.useEffect(()=>{(async()=>{l(!0);try{const y={widgets:Qp.dashboardWidgets||[],reports:Qp.sampleReportResults||{},categories:Qp.reportCategories||[],timeRanges:Qp.timeRangeOptions||[]};a(y)}catch(y){console.error("Error loading dashboard data:",y),a({widgets:[],reports:{},categories:["All"],timeRanges:[{value:"30d",label:"30 Days"}]})}finally{l(!1)}})()},[t,r]);const c=(p,y)=>{if(!y||!y.data)return n.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No data available"});const{chartType:v,data:g}=y;switch(v){case"bar":return n.jsx(yb,{width:"100%",height:"100%",children:n.jsxs(UEe,{data:g,children:[n.jsx(qb,{strokeDasharray:"3 3"}),n.jsx(Gh,{dataKey:"label"}),n.jsx(Kh,{}),n.jsx(Ro,{}),n.jsx(ep,{dataKey:"value",fill:"#3b82f6"})]})});case"line":return n.jsx(yb,{width:"100%",height:"100%",children:n.jsxs(qEe,{data:g,children:[n.jsx(qb,{strokeDasharray:"3 3"}),n.jsx(Gh,{dataKey:"label"}),n.jsx(Kh,{}),n.jsx(Ro,{}),n.jsx(iy,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2})]})});case"area":return n.jsx(yb,{width:"100%",height:"100%",children:n.jsxs(HEe,{data:g,children:[n.jsx(qb,{strokeDasharray:"3 3"}),n.jsx(Gh,{dataKey:"label"}),n.jsx(Kh,{}),n.jsx(Ro,{}),n.jsx(vf,{type:"monotone",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6})]})});case"pie":return n.jsx(yb,{width:"100%",height:"100%",children:n.jsxs(VEe,{children:[n.jsx(Tu,{data:g,cx:"50%",cy:"50%",labelLine:!1,label:({name:b,percent:j})=>`${b} ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:g.map((b,j)=>n.jsx(ow,{fill:A7[j%A7.length]},`cell-${j}`))}),n.jsx(Ro,{})]})});case"numberCard":return n.jsx("div",{className:"grid grid-cols-2 gap-4 h-full",children:g.map((b,j)=>n.jsxs("div",{className:"flex flex-col justify-center items-center p-4 bg-muted/30 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold",children:b.value}),n.jsx("div",{className:"text-sm text-muted-foreground text-center",children:b.label}),b.trend&&n.jsx("div",{className:`text-xs mt-1 ${b.color==="green"?"text-green-600":"text-blue-600"}`,children:b.trend})]},j))});default:return n.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Chart type not supported"})}};if(o)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard data..."})]})}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(p=>n.jsxs(me,{className:"animate-pulse",children:[n.jsxs(je,{children:[n.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),n.jsx(pe,{children:n.jsx("div",{className:"h-64 bg-muted rounded"})})]},p))})]});if(!i)return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),n.jsx("p",{className:"text-muted-foreground",children:"Error loading dashboard data"})]})}),n.jsx(me,{children:n.jsx(pe,{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Failed to load dashboard data"}),n.jsx(re,{onClick:()=>window.location.reload(),className:"mt-4",children:"Retry"})]})})})]});const{widgets:d,reports:u,categories:h,timeRanges:f}=i;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard Reports"}),n.jsx("p",{className:"text-muted-foreground",children:"Real-time insights and analytics for your business"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs(nt,{value:r,onValueChange:s,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"Select category"})}),n.jsx(tt,{children:h.map(p=>n.jsx(he,{value:p,children:p},p))})]}),n.jsxs(nt,{value:t,onValueChange:e,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"Select time range"})}),n.jsx(tt,{children:f.map(p=>n.jsx(he,{value:p.value,children:p.label},p.value))})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Revenue"}),n.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"$1,083,000"}),n.jsx("p",{className:"text-xs text-green-600",children:"+12.5% from last month"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Active Deals"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"156"}),n.jsx("p",{className:"text-xs text-green-600",children:"+8.2% from last month"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Inventory Units"}),n.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"93"}),n.jsx("p",{className:"text-xs text-blue-600",children:"51.6% utilization"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Conversion Rate"}),n.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"66.7%"}),n.jsx("p",{className:"text-xs text-green-600",children:"+2.1% from last month"})]})]})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(p=>{const y=u[p.reportId];return n.jsxs(me,{className:p.size==="large"?"md:col-span-2":"",children:[n.jsxs(je,{children:[n.jsxs(Ne,{className:"flex items-center justify-between",children:[p.title,n.jsx(Ve,{variant:"outline",children:p.type})]}),n.jsx(Ge,{children:y?.title||"Report data"})]}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c(p,y)})})]},p.id)})}),n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Detailed Reports"}),n.jsx(Ge,{children:"Explore detailed analytics across different business areas"})]}),n.jsx(pe,{children:n.jsxs(fn,{defaultValue:"sales",className:"space-y-4",children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"sales",children:"Sales"}),n.jsx(dt,{value:"inventory",children:"Inventory"}),n.jsx(dt,{value:"service",children:"Service"}),n.jsx(dt,{value:"finance",children:"Finance"})]}),n.jsx(ht,{value:"sales",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Sales Pipeline"})}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c({},u["crm-pipeline"])})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Quote Performance"})}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c({},u["quote-conversions"])})})]})]})}),n.jsx(ht,{value:"inventory",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Inventory Status"})}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c({},u["inventory-status"])})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Inventory Metrics"})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Units"}),n.jsx("span",{className:"font-semibold",children:"93"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Available"}),n.jsx("span",{className:"font-semibold text-green-600",children:"45"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Utilization Rate"}),n.jsx("span",{className:"font-semibold",children:"51.6%"})]})]})})]})]})}),n.jsx(ht,{value:"service",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Service Performance"})}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c({},u["service-performance"])})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Service Metrics"})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Tickets"}),n.jsx("span",{className:"font-semibold",children:"118"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Avg Resolution Time"}),n.jsx("span",{className:"font-semibold",children:"2.3 days"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Customer Satisfaction"}),n.jsx("span",{className:"font-semibold text-green-600",children:"4.6/5"})]})]})})]})]})}),n.jsx(ht,{value:"finance",className:"space-y-4",children:n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Monthly Revenue"})}),n.jsx(pe,{children:n.jsx("div",{className:"h-64",children:c({},u["finance-summary"])})})]}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Financial Metrics"})}),n.jsx(pe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Total Revenue"}),n.jsx("span",{className:"font-semibold",children:"$1,083,000"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Average Monthly"}),n.jsx("span",{className:"font-semibold",children:"$180,500"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Growth Rate"}),n.jsx("span",{className:"font-semibold text-green-600",children:"+12.5%"})]})]})})]})]})})]})})]})]})}const GEe=[{id:"1",name:"Monthly Sales Report",type:On.SALES,module:"sales",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-20"),generatedBy:"admin"},{id:"2",name:"Inventory Valuation",type:On.INVENTORY,module:"inventory",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-19"),generatedBy:"manager"},{id:"3",name:"Service Revenue Analysis",type:On.SERVICE,module:"service",filters:[],columns:[],data:[],generatedAt:new Date("2024-01-18"),generatedBy:"admin"}],C7=[{id:"sales-summary",name:"Sales Summary",description:"Overview of sales performance and metrics",type:On.SALES,icon:rr,color:"from-green-50 to-green-100/50"},{id:"inventory-report",name:"Inventory Report",description:"Current inventory levels and valuation",type:On.INVENTORY,icon:Ai,color:"from-blue-50 to-blue-100/50"},{id:"customer-analysis",name:"Customer Analysis",description:"Customer demographics and behavior insights",type:On.CUSTOM,icon:gs,color:"from-purple-50 to-purple-100/50"},{id:"financial-overview",name:"Financial Overview",description:"Revenue, expenses, and profitability analysis",type:On.FINANCIAL,icon:Ar,color:"from-orange-50 to-orange-100/50"}];function E7(){const[t,e]=S.useState(GEe),{reportData:r,reportColumns:s,loading:i,currentReportConfig:a,generateReport:o,exportToCSV:l}=ame(),[c,d]=S.useState("dashboard"),[u,h]=S.useState(null),f=S.useRef(null),[p,y]=S.useState(!1),v=C=>{switch(C){case On.SALES:return"bg-green-50 text-green-700 border-green-200";case On.INVENTORY:return"bg-blue-50 text-blue-700 border-blue-200";case On.SERVICE:return"bg-purple-50 text-purple-700 border-purple-200";case On.FINANCIAL:return"bg-orange-50 text-orange-700 border-orange-200";case On.CUSTOM:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=C=>{o(C)},b=()=>{l()},j=C=>{const E={type:C.type,name:C.name,dateRange:{startDate:new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]},filters:{}};console.log("handleGenerateTemplateReport called with config:",E),h(E),d("generator"),o(E)},w=()=>{d("generator"),h(null),y(!0),console.log("Create Report button clicked!")};return S.useEffect(()=>{p&&f.current&&(f.current.scrollIntoView({behavior:"smooth",block:"start"}),y(!1))},[p,f]),n.jsxs("div",{className:"space-y-8",children:[n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),n.jsx("p",{className:"ri-page-description",children:"Generate insights and analytics for your dealership"})]}),n.jsxs(re,{className:"shadow-sm",onClick:w,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Report"]})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-blue-900",children:"Total Reports"}),n.jsx(Es,{className:"h-4 w-4 text-blue-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),n.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"All reports"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-green-900",children:"This Month"}),n.jsx(Es,{className:"h-4 w-4 text-green-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(C=>C.generatedAt.getMonth()===new Date().getMonth()).length}),n.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Generated this month"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-yellow-900",children:"Scheduled"}),n.jsx(Es,{className:"h-4 w-4 text-yellow-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"5"}),n.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),"Automated reports"]})]})]}),n.jsxs(me,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium text-orange-900",children:"Templates"}),n.jsx(Es,{className:"h-4 w-4 text-orange-600"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold text-orange-900",children:C7.length}),n.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[n.jsx(Es,{className:"h-3 w-3 mr-1"}),"Available templates"]})]})]})]}),n.jsxs(fn,{value:c,onValueChange:d,className:"space-y-6",children:[n.jsxs(sn,{className:"grid w-full grid-cols-3",children:[n.jsx(dt,{value:"dashboard",children:"Dashboard"}),n.jsx(dt,{value:"generator",children:"Report Generator"}),n.jsx(dt,{value:"saved",children:"Saved Reports"})]}),n.jsx(ht,{value:"dashboard",children:n.jsx(WEe,{})}),n.jsxs(ht,{value:"generator",children:[n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Report Templates"}),n.jsx(Ge,{children:"Quick start templates for common reports"})]}),n.jsx(pe,{children:n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:C7.map(C=>n.jsx(me,{className:pt("overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer border-0 bg-gradient-to-br",C.color),children:n.jsxs(pe,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx(C.icon,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:C.name}),n.jsx(Ve,{className:pt("ri-badge-status mt-1",v(C.type)),children:C.type.toUpperCase()})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:C.description}),n.jsx(re,{size:"sm",className:"w-full shadow-sm",onClick:()=>j(C),children:"Generate Report"})]})},C.id))})})]}),n.jsxs("div",{ref:f,children:[" ",n.jsx(sme,{onGenerate:g,onExportCSV:b,isGenerating:i,hasData:r.length>0,initialReportConfig:u})]}),r.length>0&&a&&n.jsx(ime,{reportType:a.type,reportName:a.name,data:r,columns:s,onExportCSV:b})]}),n.jsx(ht,{value:"saved",children:t.length>0&&n.jsxs(me,{className:"shadow-sm",children:[n.jsxs(je,{children:[n.jsx(Ne,{className:"text-xl",children:"Saved Reports"}),n.jsx(Ge,{children:"Previously generated reports"})]}),n.jsx(pe,{children:n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.jsx("p",{children:"Select a report template above to generate a new report"})})})]})})]})]})}function KEe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(E7,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(E7,{})})]})}function YEe({templates:t,onCreateTemplate:e,onUpdateTemplate:r,onDeleteTemplate:s}){const{toast:i}=Gt(),[a,o]=S.useState(null),[l,c]=S.useState(null),[d,u]=S.useState(null),[h,f]=S.useState(null),[p,y]=S.useState(!1),[v,g]=S.useState(""),b=lu.fieldTypes,j=I=>{let T={name:I?`Copy of ${t.find(O=>O.id===I)?.name}`:"New Template",description:"",sections:[],isActive:!0};if(I){const O=t.find(z=>z.id===I);if(O){const z=O.sections.map(q=>({...q,id:`section-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fields:q.fields.map(B=>({...B,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}));T={...T,description:O.description,sections:z}}}const R=e(T);o(R),c(R),y(!1),g("")},w=()=>{!l||!a||(r(a.id,l),c(null),i({title:"Template Saved",description:"Application template has been saved successfully"}))},C=I=>{window.confirm("Are you sure you want to delete this template?")&&(s(I),a?.id===I&&(o(null),c(null)),i({title:"Template Deleted",description:"Application template has been deleted"}))},E=()=>{if(!a)return;const I={id:`section-${Date.now()}`,title:"New Section",description:"",order:(a.sections?.length||0)+1,fields:[]},T=[...a.sections||[],I],R={...a,sections:T};o(R),c(R),u(I)},N=I=>{if(!a||!l)return;const T=l.sections?.map(O=>O.id===I.id?I:O)||[],R={...l,sections:T};c(R),o(R),u(null)},A=I=>{if(!a||!l)return;const T=l.sections?.filter(O=>O.id!==I)||[],R={...l,sections:T};c(R),o(R)},_=I=>{if(!a||!l)return;const T={id:`field-${Date.now()}`,type:"text",label:"New Field",placeholder:"",required:!1,order:1},R=l.sections?.map(z=>z.id===I?{...z,fields:[...z.fields,{...T,order:z.fields.length+1}]}:z)||[],O={...l,sections:R};c(O),o(O),f(T)},k=(I,T)=>{if(!l)return;const R=l.sections?.map(z=>z.id===I?{...z,fields:z.fields.map(q=>q.id===T.id?T:q)}:z)||[],O={...l,sections:R};c(O),o(O),f(null)},F=(I,T)=>{if(!l)return;const R=l.sections?.map(z=>z.id===I?{...z,fields:z.fields.filter(q=>q.id!==T)}:z)||[],O={...l,sections:R};c(O),o(O)};return a?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(re,{variant:"ghost",onClick:()=>{o(null),c(null)},children:"← Back to Templates"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold",children:a.name}),n.jsx("p",{className:"text-muted-foreground",children:"Template Builder"})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[l&&n.jsxs(n.Fragment,{children:[n.jsx(re,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),n.jsxs(re,{onClick:w,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Save Template"]})]}),!l&&n.jsxs(re,{onClick:()=>c(a),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit Template"]})]})]}),l&&n.jsxs(me,{children:[n.jsx(je,{children:n.jsx(Ne,{children:"Template Settings"})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"templateName",children:"Template Name"}),n.jsx(Te,{id:"templateName",value:l.name,onChange:I=>c({...l,name:I.target.value})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"isActive",checked:l.isActive,onCheckedChange:I=>c({...l,isActive:!!I})}),n.jsx(ue,{htmlFor:"isActive",children:"Active Template"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"templateDescription",children:"Description"}),n.jsx(kr,{id:"templateDescription",value:l.description,onChange:I=>c({...l,description:I.target.value}),rows:3})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),l&&n.jsxs(re,{onClick:E,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),a.sections?.map(I=>n.jsx(XEe,{section:I,isEditing:!!l,editingSection:d,editingField:h,onEditSection:u,onSaveSection:N,onDeleteSection:A,onAddField:_,onEditField:f,onSaveField:k,onDeleteField:F,fieldTypes:b},I.id)),(!a.sections||a.sections.length===0)&&n.jsx(me,{children:n.jsxs(pe,{className:"py-12 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"No sections added yet"}),l&&n.jsxs(re,{onClick:E,className:"mt-4",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add First Section"]})]})})]})]}):n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Application Templates"}),n.jsx(Ge,{children:"Create and manage finance application templates"})]}),n.jsxs(re,{onClick:()=>y(!0),children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})}),n.jsxs(pe,{children:[p&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Create New Template"}),n.jsx(Ge,{children:"Choose how to create your new template"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{y(!1),g("")},children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(re,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>j(),children:n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:"Create Blank Template"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Start with an empty template"})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"Or clone from existing:"}),n.jsxs(nt,{value:v,onValueChange:g,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select template to clone"})}),n.jsx(tt,{children:t.map(I=>n.jsx(he,{value:I.id,children:I.name},I.id))})]}),n.jsxs(re,{className:"w-full",disabled:!v,onClick:()=>j(v),children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create from Selected Template"]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(re,{variant:"outline",onClick:()=>{y(!1),g("")},children:"Cancel"})})]})]})}),n.jsxs("div",{className:"space-y-4",children:[t.map(I=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h4",{className:"font-semibold",children:I.name}),n.jsx(Ve,{variant:I.isActive?"default":"secondary",children:I.isActive?"Active":"Inactive"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:I.description||"No description"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[I.sections?.length||0," sections •",I.sections?.reduce((T,R)=>T+R.fields.length,0)||0," fields"]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>o(I),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>C(I.id),children:n.jsx(rs,{className:"h-4 w-4"})})]})]},I.id)),t.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{children:"No templates created yet"}),n.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})]})}function XEe({section:t,isEditing:e,editingSection:r,editingField:s,onEditSection:i,onSaveSection:a,onDeleteSection:o,onAddField:l,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:h}){const[f,p]=S.useState(t),y=r?.id===t.id,v=()=>{a(f)},g=()=>{p(t),i(null)};return n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[e&&n.jsx(Z$,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:t.title}),t.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2",children:[!y&&n.jsxs(n.Fragment,{children:[n.jsx(re,{variant:"outline",size:"sm",onClick:()=>i(t),children:n.jsx(Nn,{className:"h-4 w-4"})}),n.jsx(re,{variant:"outline",size:"sm",onClick:()=>o(t.id),children:n.jsx(rs,{className:"h-4 w-4"})})]}),y&&n.jsxs(n.Fragment,{children:[n.jsx(re,{variant:"outline",size:"sm",onClick:g,children:n.jsx(Cr,{className:"h-4 w-4"})}),n.jsx(re,{size:"sm",onClick:v,children:n.jsx(Sn,{className:"h-4 w-4"})})]})]})]})}),n.jsxs(pe,{children:[y?n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"sectionTitle",children:"Section Title"}),n.jsx(Te,{id:"sectionTitle",value:f.title,onChange:b=>p({...f,title:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"sectionDescription",children:"Description"}),n.jsx(kr,{id:"sectionDescription",value:f.description,onChange:b=>p({...f,description:b.target.value}),rows:2})]})]}):null,n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h5",{className:"font-medium",children:["Fields (",t.fields.length,")"]}),e&&n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>l(t.id),children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Add Field"]})]}),t.fields.map(b=>n.jsx(ZEe,{field:b,sectionId:t.id,isEditing:e,editingField:s,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:h},b.id)),t.fields.length===0&&n.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:n.jsx("p",{className:"text-sm",children:"No fields added yet"})})]})]})]})}function ZEe({field:t,sectionId:e,isEditing:r,editingField:s,onEditField:i,onSaveField:a,onDeleteField:o,fieldTypes:l}){const[c,d]=S.useState(t),[u,h]=S.useState(""),f=s?.id===t.id,p=()=>{a(e,c)},y=()=>{d(t),i(null)},v=()=>{u.trim()&&(d({...c,options:[...c.options||[],u.trim()]}),h(""))},g=b=>{d({...c,options:c.options?.filter((j,w)=>w!==b)})};return f?n.jsx(me,{className:"border-primary",children:n.jsx(pe,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldLabel",children:"Field Label"}),n.jsx(Te,{id:"fieldLabel",value:c.label,onChange:b=>d({...c,label:b.target.value})})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldType",children:"Field Type"}),n.jsxs(nt,{value:c.type,onValueChange:b=>d({...c,type:b,options:["select","radio","checkbox"].includes(b)?c.options:void 0}),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsx(tt,{children:l.map(b=>n.jsx(he,{value:b.value,children:b.label},b.value))})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"fieldPlaceholder",children:"Placeholder Text"}),n.jsx(Te,{id:"fieldPlaceholder",value:c.placeholder,onChange:b=>d({...c,placeholder:b.target.value})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(tr,{id:"fieldRequired",checked:c.required,onCheckedChange:b=>d({...c,required:!!b})}),n.jsx(ue,{htmlFor:"fieldRequired",children:"Required Field"})]}),["select","radio"].includes(c.type)&&n.jsxs("div",{children:[n.jsx(ue,{children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(Te,{value:u,onChange:b=>h(b.target.value),placeholder:"Add option",onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),v())}}),n.jsx(re,{type:"button",onClick:v,children:n.jsx(Dt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:c.options?.map((b,j)=>n.jsxs("div",{className:"flex items-center bg-muted px-2 py-1 rounded",children:[n.jsx("span",{className:"text-sm mr-2",children:b}),n.jsx(re,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>g(j),children:n.jsx(Cr,{className:"h-3 w-3"})})]},j))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(re,{variant:"outline",onClick:y,children:"Cancel"}),n.jsx(re,{onClick:p,children:"Save Field"})]})]})})}):n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[r&&n.jsx(Z$,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium",children:t.label}),t.required&&n.jsx(Ve,{variant:"secondary",className:"text-xs",children:"Required"}),n.jsx(Ve,{variant:"outline",className:"text-xs",children:l.find(b=>b.value===t.type)?.label})]}),t.placeholder&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placeholder: ",t.placeholder]})]})]}),r&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>i(t),children:n.jsx(Nn,{className:"h-4 w-4"})}),n.jsx(re,{variant:"ghost",size:"sm",onClick:()=>o(e,t.id),children:n.jsx(rs,{className:"h-4 w-4"})})]})]})}function QEe({onClose:t,onSelectType:e}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(me,{className:"w-full max-w-md",children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Create New Application"}),n.jsx(Ge,{children:"Choose how you'd like to create the application"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs(pe,{className:"space-y-4",children:[n.jsx(re,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>e("completeNow"),children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx(yr,{className:"h-8 w-8 text-primary mt-1"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold text-base",children:"Complete Now"}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Fill out the application immediately in the system"})]})]})}),n.jsx(re,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>e("inviteCustomer"),children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx(gs,{className:"h-8 w-8 text-primary mt-1"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-semibold text-base",children:"Invite Customer"}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Send an invitation for the customer to complete online"})]})]})}),n.jsx("div",{className:"flex justify-end pt-4",children:n.jsx(re,{variant:"outline",onClick:t,children:"Cancel"})})]})]})})}function JEe({onClose:t,onInvite:e}){const{toast:r}=Gt(),{templates:s}=H0(),[i,a]=S.useState("existing"),[o,l]=S.useState(""),[c,d]=S.useState(null),[u,h]=S.useState(s.find(N=>N.isActive)?.id||s[0]?.id||""),[f,p]=S.useState({name:"",email:"",phone:"",source:"manual"}),[y,v]=S.useState(""),[g,b]=S.useState(!1),w=cT.sampleUsers.map(N=>({id:N.id,name:N.name,email:N.email,phone:N.phone,source:"website"})).filter(N=>N.name.toLowerCase().includes(o.toLowerCase())||N.email.toLowerCase().includes(o.toLowerCase())),C=async()=>{if(!c){r({title:"Selection Required",description:"Please select a customer to invite",variant:"destructive"});return}if(!u){r({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}b(!0),await new Promise(N=>setTimeout(N,1e3)),e(c,u),b(!1)},E=async()=>{if(!f.name||!f.email){r({title:"Required Fields",description:"Please fill in name and email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){r({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}if(!u){r({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}b(!0),await new Promise(N=>setTimeout(N,1e3)),e({...f,id:`cust-${Date.now()}`},u),b(!1)};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsx(me,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"shrink-0 border-b p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(Ne,{children:"Invite Customer to Complete Application"}),n.jsx(Ge,{children:"Send a finance application invitation to a customer"})]}),n.jsx(re,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(Cr,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"overflow-y-auto flex-1 px-4 py-2 space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"template",children:"Application Template *"}),n.jsxs(nt,{value:u,onValueChange:h,children:[n.jsx(et,{children:n.jsx(st,{placeholder:"Select application template"})}),n.jsx(tt,{children:s.map(N=>n.jsx(he,{value:N.id,children:N.name},N.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose which application template the customer will complete"})]}),n.jsxs("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:[n.jsx("button",{onClick:()=>a("existing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="existing"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Existing Customer"}),n.jsx("button",{onClick:()=>a("new"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"New Customer"})]}),i==="existing"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"search",children:"Search Customers"}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{id:"search",value:o,onChange:N=>l(N.target.value),placeholder:"Search by name or email...",className:"pl-10"})]})]}),n.jsxs("div",{className:"space-y-2 max-h-36 overflow-y-auto",children:[w.slice(0,3).map(N=>n.jsx("div",{onClick:()=>d(N),className:`p-3 border rounded-lg cursor-pointer transition-colors ${c?.id===N.id?"border-primary bg-primary/5":"hover:bg-accent"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:N.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:N.email}),N.phone&&n.jsx("p",{className:"text-sm text-muted-foreground",children:N.phone})]}),n.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:N.source?.replace("_"," ")})]})},N.id)),w.slice(0,3).length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{children:"No customers found"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or add a new customer"})]}),w.length>3&&n.jsx("div",{className:"text-center py-2 text-sm text-muted-foreground",children:"Showing top 3 results. Use search to find specific customers."})]})]}),i==="new"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"name",children:"Full Name *"}),n.jsx(Te,{id:"name",value:f.name,onChange:N=>p({...f,name:N.target.value}),placeholder:"Enter customer name"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email Address *"}),n.jsx(Te,{id:"email",type:"email",value:f.email,onChange:N=>p({...f,email:N.target.value}),placeholder:"Enter email address"})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),n.jsx(Te,{id:"phone",type:"tel",value:f.phone,onChange:N=>p({...f,phone:N.target.value}),placeholder:"(555) 123-4567"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"source",children:"Lead Source"}),n.jsxs(nt,{value:f.source,onValueChange:N=>p({...f,source:N}),children:[n.jsx(et,{children:n.jsx(st,{})}),n.jsxs(tt,{children:[n.jsx(he,{value:"manual",children:"Manual Entry"}),n.jsx(he,{value:"website",children:"Website"}),n.jsx(he,{value:"referral",children:"Referral"}),n.jsx(he,{value:"trade_show",children:"Trade Show"}),n.jsx(he,{value:"phone",children:"Phone Call"}),n.jsx(he,{value:"walk_in",children:"Walk-in"})]})]})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"message",children:"Custom Message (Optional)"}),n.jsx(kr,{id:"message",value:y,onChange:N=>v(N.target.value),placeholder:"Add a personal message to the invitation email...",rows:3})]}),i==="existing"&&c&&n.jsxs("div",{className:"space-y-4 mt-6 p-4 border rounded-lg bg-muted/20",children:[n.jsx("h4",{className:"font-medium",children:"Edit Customer Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"editName",children:"Full Name *"}),n.jsx(Te,{id:"editName",value:c.name,onChange:N=>d({...c,name:N.target.value}),placeholder:"Enter customer name"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"editEmail",children:"Email Address *"}),n.jsx(Te,{id:"editEmail",type:"email",value:c.email,onChange:N=>d({...c,email:N.target.value}),placeholder:"Enter email address"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"editPhone",children:"Phone Number"}),n.jsx(Te,{id:"editPhone",type:"tel",value:c.phone||"",onChange:N=>d({...c,phone:N.target.value}),placeholder:"(555) 123-4567"})]})]},c.id)]}),n.jsx("div",{className:"shrink-0 border-t bg-white p-4 sticky bottom-0 z-10",children:n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx(re,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(re,{onClick:i==="existing"?C:E,disabled:g||i==="existing"&&!c||!u,children:g?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bo,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})})]})})})}function P7(){const{tenant:t}=lo(),{toast:e}=Gt(),[r,s]=S.useState("applications"),[i,a]=S.useState(!1),[o,l]=S.useState("none"),[c,d]=S.useState(null),[u,h]=S.useState(""),[f,p]=S.useState("all"),[y,v]=S.useState(""),[g,b]=S.useState(""),[j,w]=S.useState(""),[C,E]=S.useState(null),N=S.useRef(null),{applications:A,templates:_,createApplication:k,updateApplication:F,createTemplate:I,updateTemplate:T,deleteTemplate:R}=H0(),O=be.useMemo(()=>{let ee=A;if(u){const ne=u.toLowerCase();ee=ee.filter(ae=>ae.customerName&&ae.customerName.toLowerCase().includes(ne)||ae.customerEmail&&ae.customerEmail.toLowerCase().includes(ne)||ae.customerPhone&&ae.customerPhone.toLowerCase().includes(ne))}if(f!=="all"&&(ee=ee.filter(ne=>ne.status===f)),y){const ne=new Date(y);ee=ee.filter(ae=>new Date(ae.createdAt).setHours(0,0,0,0)>=ne.setHours(0,0,0,0))}return ee},[A,u,f,y]),z=be.useMemo(()=>{let ee=_;if(g){const ne=g.toLowerCase();ee=ee.filter(ae=>ae.name.toLowerCase().includes(ne)||ae.description.toLowerCase().includes(ne))}return ee},[_,g]),q=()=>"Applications",B=()=>{a(!0)},K=ee=>{if(a(!1),l(ee),ee==="completeNow"){const ne=_.find(ve=>ve.isActive)||_[0];if(!ne){e({title:"No Templates Available",description:"Please create an application template first.",variant:"destructive"}),l("none");return}const ae=k({customerId:"",customerName:"",customerEmail:"",templateId:ne.id,status:"draft"});d(ae)}},Y=ee=>{if(!c)return;if(c.status==="denied"&&ee!=="denied"&&!j.trim()){E(ee),N.current?.scrollIntoView({behavior:"smooth",block:"center"}),e({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}if(ee!==c.status){const ae={status:ee,reviewedBy:"Admin User",reviewedAt:new Date().toISOString(),adminNotes:j};F(c.id,ae);const ve={...c,...ae,updatedAt:new Date().toISOString()};d(ve),E(null),e({title:"Status Updated",description:`Application status changed to ${lu.statusOptions.find(xe=>xe.value===ee)?.label||ee}.`})}},J=()=>{d(null),w(""),E(null),l("none")},H=()=>{l("none")},$=ee=>{d(ee),w(ee.adminNotes||""),E(null),l("none")},W=ee=>{switch(ee){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"conditionally_approved":return"bg-orange-100 text-orange-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},te=()=>{if(c){const ee=C||c.status,ne=ee!==c.status;if(ne&&c.status==="denied"&&ee!=="denied"&&!j.trim()){N.current?.scrollIntoView({behavior:"smooth",block:"center"}),e({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}const ae={adminNotes:j};ne&&(ae.status=ee,ae.reviewedBy="Admin User",ae.reviewedAt=new Date().toISOString()),F(c.id,ae);const ve={...c,...ae,updatedAt:new Date().toISOString()};d(ve),E(null),e({title:ne?"Status and Notes Updated":"Admin Notes Saved",description:ne?`Application status changed to ${lu.statusOptions.find(xe=>xe.value===ee)?.label||ee} and notes saved.`:"Internal notes have been saved successfully."})}};return c&&o==="completeNow"?n.jsx(Lz,{application:c,onSave:ee=>{F(c.id,ee),e({title:"Application Updated",description:"Finance application has been saved successfully."})},onCancel:J,onSubmit:ee=>{F(c.id,{...ee,status:"submitted"}),J(),e({title:"Application Submitted",description:"Finance application has been submitted for review."})}}):o==="inviteCustomer"?n.jsx("div",{className:"space-y-6",children:n.jsx(JEe,{onClose:H,onInvite:(ee,ne)=>{k({customerId:ee.id||"",customerName:ee.name,customerEmail:ee.email,templateId:ne,status:"draft"}),H(),e({title:"Invitation Sent",description:`Finance application invitation sent to ${ee.name}`})}})}):c&&o==="none"?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(re,{variant:"ghost",onClick:J,children:"← Back to Applications"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Application Details"}),n.jsx("p",{className:"text-muted-foreground",children:c.customerName||"Unnamed Application"})]})]})}),n.jsxs(me,{children:[n.jsx(je,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(Ne,{children:["Application #",c.id.slice(-6).toUpperCase()]}),n.jsxs(Ge,{children:["Created ",new Date(c.createdAt).toLocaleDateString(),c.submittedAt&&n.jsxs("span",{children:[" • Submitted ",new Date(c.submittedAt).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ue,{className:"text-sm font-medium",children:"Status:"}),n.jsxs(nt,{value:C||c.status,onValueChange:Y,children:[n.jsx(et,{className:"w-[200px]",children:n.jsx(st,{})}),n.jsx(tt,{children:lu.statusOptions.map(ee=>n.jsx(he,{value:ee.value,children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${ee.color.split(" ")[0]}`}),n.jsx("span",{children:ee.label})]})},ee.value))})]})]}),c.fraudCheckStatus&&n.jsxs(Ve,{variant:"outline",children:["IDV: ",c.fraudCheckStatus.charAt(0).toUpperCase()+c.fraudCheckStatus.slice(1)]})]})]})}),n.jsxs(pe,{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Name"}),n.jsx("p",{className:"text-sm",children:c.customerName||"Not provided"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Email"}),n.jsx("p",{className:"text-sm",children:c.customerEmail||"Not provided"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Phone"}),n.jsx("p",{className:"text-sm",children:c.customerPhone||"Not provided"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Customer ID"}),n.jsx("p",{className:"text-sm",children:c.customerId||"Not assigned"})]})]})]}),Object.keys(c.data).length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application Data"}),n.jsx("div",{className:"space-y-4",children:Object.entries(c.data).map(([ee,ne])=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium mb-2 capitalize",children:ee.replace("-"," ")}),n.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:Object.entries(ne).map(([ae,ve])=>n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs text-muted-foreground capitalize",children:ae.replace("-"," ")}),n.jsx("p",{className:"text-sm",children:ve||"Not provided"})]},ae))})]},ee))})]}),c.uploadedFiles.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Uploaded Documents"}),n.jsx("div",{className:"space-y-2",children:c.uploadedFiles.map(ee=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(yr,{className:"h-4 w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:ee.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(ee.size/1024/1024).toFixed(2)," MB • Uploaded ",new Date(ee.uploadedAt).toLocaleDateString()]})]})]}),n.jsxs(re,{variant:"outline",size:"sm",children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View"]})]},ee.id))})]}),c.notes&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Notes"}),n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm",children:c.notes})})]}),c.reviewedAt&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Review Information"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Reviewed Date"}),n.jsx("p",{className:"text-sm",children:new Date(c.reviewedAt).toLocaleDateString()})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Reviewed By"}),n.jsx("p",{className:"text-sm",children:c.reviewedBy||"Not specified"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Admin Notes (Internal Only)"}),n.jsxs(re,{variant:"outline",size:"sm",onClick:te,children:[n.jsx(Sn,{className:"h-4 w-4 mr-2"}),C&&C!==c.status?"Save Status & Notes":"Save Notes"]})]}),n.jsx(kr,{ref:N,value:j,onChange:ee=>w(ee.target.value),placeholder:"Add internal notes about this application (not visible to customer)...",rows:4,className:"mb-4"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["These notes are for internal use only and will not be visible to the customer.",C&&C!==c.status&&n.jsxs("span",{className:"block mt-1 text-orange-600 font-medium",children:['Status will be changed to "',lu.statusOptions.find(ee=>ee.value===C)?.label,'" when saved.']})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application History"}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.history?.length>0?c.history.sort((ee,ne)=>new Date(ne.timestamp).getTime()-new Date(ee.timestamp).getTime()).map(ee=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg bg-muted/20",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:ee.action.includes("Status")?n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Nl,{className:"h-4 w-4 text-blue-600"})}):ee.action.includes("Document")?n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(yr,{className:"h-4 w-4 text-green-600"})}):ee.action.includes("Notes")?n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(yr,{className:"h-4 w-4 text-purple-600"})}):n.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:n.jsx(Dr,{className:"h-4 w-4 text-gray-600"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-sm font-medium",children:ee.action}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(ee.timestamp).toLocaleDateString()," ",new Date(ee.timestamp).toLocaleTimeString()]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ee.details}),(ee.oldValue||ee.newValue)&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[ee.oldValue&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"From:"})," ",ee.oldValue]}),ee.newValue&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"To:"})," ",ee.newValue]})]}),n.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[n.jsx(vs,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:ee.userName})]})]})]},ee.id)):n.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[n.jsx(Dr,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),n.jsx("p",{className:"text-sm",children:"No history available"})]})})]})]})]})]}):n.jsxs("div",{className:"space-y-6",children:[i&&n.jsx(QEe,{onClose:()=>a(!1),onSelectType:K}),n.jsx("div",{className:"ri-page-header",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"ri-page-title",children:q()}),n.jsx("p",{className:"ri-page-description",children:"Manage finance applications and approval workflows"})]}),n.jsx("div",{children:n.jsxs(re,{onClick:B,children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"New Application"]})})]})}),n.jsxs("div",{className:"ri-stats-grid",children:[n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Total Applications"}),n.jsx(yr,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:A.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Pending Review"}),n.jsx(La,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:A.filter(ee=>ee.status==="under_review").length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Approval Rate"}),n.jsx(gs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"78%"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"+5% from last month"})]})]}),n.jsxs(me,{children:[n.jsxs(je,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(Ne,{className:"text-sm font-medium",children:"Avg Processing Time"}),n.jsx(Nl,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(pe,{children:[n.jsx("div",{className:"text-2xl font-bold",children:"2.3 days"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.5 days from last month"})]})]})]}),n.jsxs(fn,{value:r,onValueChange:s,children:[n.jsxs(sn,{children:[n.jsx(dt,{value:"applications",children:"Applications"}),n.jsx(dt,{value:"templates",children:"Templates"})]}),n.jsx(ht,{value:"applications",className:"space-y-4",children:n.jsxs(me,{children:[n.jsxs(je,{children:[n.jsx(Ne,{children:"Finance Applications"}),n.jsx(Ge,{children:"Manage and review customer finance applications"})]}),n.jsxs(pe,{children:[n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search by name, email, or phone",value:u,onChange:ee=>h(ee.target.value),className:"pl-10"})]}),n.jsxs(nt,{value:f,onValueChange:p,children:[n.jsx(et,{className:"w-[180px]",children:n.jsx(st,{placeholder:"Filter by Status"})}),n.jsxs(tt,{children:[n.jsx(he,{value:"all",children:"All Statuses"}),lu.statusOptions.map(ee=>n.jsx(he,{value:ee.value,children:ee.label},ee.value))]})]}),n.jsx(Te,{type:"date",value:y,onChange:ee=>v(ee.target.value),className:"w-[180px]",title:"Filter by creation date (on or after)"})]}),n.jsxs("div",{className:"space-y-4",children:[O.map(ee=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h4",{className:"font-semibold",children:ee.customerName||"Unnamed Application"}),n.jsx(Ve,{className:W(ee.status),children:ee.status.replace("_"," ").toUpperCase()}),ee.fraudCheckStatus&&n.jsxs(Ve,{variant:"outline",children:["IDV: ",ee.fraudCheckStatus.charAt(0).toUpperCase()+ee.fraudCheckStatus.slice(1)]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ee.customerEmail&&n.jsxs("span",{children:[ee.customerEmail," • "]}),"Created: ",new Date(ee.createdAt).toLocaleDateString(),ee.submittedAt&&n.jsxs("span",{children:[" • Submitted: ",new Date(ee.submittedAt).toLocaleDateString()]})]})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(re,{variant:"outline",size:"sm",onClick:()=>$(ee),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"View"]})})]},ee.id)),O.length===0&&n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),A.length===0?n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"No finance applications yet"}),n.jsx("p",{className:"text-sm",children:"Create your first application to get started"})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"No applications found matching your criteria"}),n.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})]})}),n.jsxs(ht,{value:"templates",className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(qn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Te,{placeholder:"Search templates by name or description",value:g,onChange:ee=>b(ee.target.value),className:"pl-10"})]}),n.jsx(YEe,{templates:z,onCreateTemplate:I,onUpdateTemplate:T,onDeleteTemplate:R})]})]})]})}function ePe(){return n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(P7,{})}),n.jsx(Ut,{path:"/portal",element:n.jsx(Mz,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(P7,{})})]})}function tPe(){return n.jsx(DQ,{defaultTheme:"light",storageKey:"renter-insight-theme",children:n.jsx(PQ,{children:n.jsx(_X,{children:n.jsx(TQ,{children:n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/login",element:n.jsx(nne,{})}),n.jsx(Ut,{path:"/portalclient/*",element:n.jsx(aie,{})}),n.jsx(Ut,{path:"/*",element:n.jsx(sne,{children:n.jsx(MQ,{children:n.jsxs(Vi,{children:[n.jsx(Ut,{path:"/",element:n.jsx(rne,{})}),n.jsx(Ut,{path:"/crm/*",element:n.jsx(bie,{})}),n.jsx(Ut,{path:"/inventory/*",element:n.jsx(Cie,{})}),n.jsx(Ut,{path:"/deals/*",element:n.jsx(mue,{})}),n.jsx(Ut,{path:"/finance/*",element:n.jsx(Fie,{})}),n.jsx(Ut,{path:"/quotes/*",element:n.jsx(Tie,{})}),n.jsx(Ut,{path:"/agreements/*",element:n.jsx(yue,{})}),n.jsx(Ut,{path:"/service/*",element:n.jsx(Sue,{})}),n.jsx(Ut,{path:"/pdi/*",element:n.jsx(Lfe,{})}),n.jsx(Ut,{path:"/delivery/*",element:n.jsx(Pfe,{})}),n.jsx(Ut,{path:"/commissions/*",element:n.jsx(zfe,{})}),n.jsx(Ut,{path:"/portal/*",element:n.jsx(qfe,{})}),n.jsx(Ut,{path:"/invoices/*",element:n.jsx(Gfe,{})}),n.jsx(Ut,{path:"/settings/*",element:n.jsx(Jfe,{})}),n.jsx(Ut,{path:"/admin/*",element:n.jsx(nme,{})}),n.jsx(Ut,{path:"/admin/settings/*",element:n.jsx(Vne,{})}),n.jsx(Ut,{path:"/reports/*",element:n.jsx(KEe,{})}),n.jsx(Ut,{path:"/client-applications/*",element:n.jsx(ePe,{})})]})})})})]}),n.jsx(EQ,{})]})})})})})}xm.workerSrc=_Y;GG.createRoot(document.getElementById("root")).render(n.jsx(tPe,{}));export{qie as _,nx as c,Kr as g};
