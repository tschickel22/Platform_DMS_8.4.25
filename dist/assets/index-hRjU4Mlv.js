var yk=Object.defineProperty;var bk=(t,s,r)=>s in t?yk(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var ai=(t,s,r)=>bk(t,typeof s!="symbol"?s+"":s,r);function Nk(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wk(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var r=function n(){return this instanceof n?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var ES={exports:{}},rg={},PS={exports:{}},ss={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh=Symbol.for("react.element"),Sk=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),Ak=Symbol.for("react.strict_mode"),Tk=Symbol.for("react.profiler"),Ek=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),Dk=Symbol.for("react.forward_ref"),Ik=Symbol.for("react.suspense"),kk=Symbol.for("react.memo"),Lk=Symbol.for("react.lazy"),gN=Symbol.iterator;function Fk(t){return t===null||typeof t!="object"?null:(t=gN&&t[gN]||t["@@iterator"],typeof t=="function"?t:null)}var DS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IS=Object.assign,kS={};function Pu(t,s,r){this.props=t,this.context=s,this.refs=kS,this.updater=r||DS}Pu.prototype.isReactComponent={};Pu.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Pu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LS(){}LS.prototype=Pu.prototype;function w1(t,s,r){this.props=t,this.context=s,this.refs=kS,this.updater=r||DS}var S1=w1.prototype=new LS;S1.constructor=w1;IS(S1,Pu.prototype);S1.isPureReactComponent=!0;var vN=Array.isArray,FS=Object.prototype.hasOwnProperty,C1={current:null},RS={key:!0,ref:!0,__self:!0,__source:!0};function MS(t,s,r){var n,a={},i=null,l=null;if(s!=null)for(n in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)FS.call(s,n)&&!RS.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:qh,type:t,key:i,ref:l,props:a,_owner:C1.current}}function Rk(t,s){return{$$typeof:qh,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function A1(t){return typeof t=="object"&&t!==null&&t.$$typeof===qh}function Mk(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var jN=/\/+/g;function t0(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Mk(""+t.key):s.toString(36)}function Uf(t,s,r,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case qh:case Sk:l=!0}}if(l)return l=t,a=a(l),t=n===""?"."+t0(l,0):n,vN(a)?(r="",t!=null&&(r=t.replace(jN,"$&/")+"/"),Uf(a,s,r,"",function(d){return d})):a!=null&&(A1(a)&&(a=Rk(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(jN,"$&/")+"/")+t)),s.push(a)),1;if(l=0,n=n===""?".":n+":",vN(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+t0(i,o);l+=Uf(i,s,r,c,a)}else if(c=Fk(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+t0(i,o++),l+=Uf(i,s,r,c,a);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function sf(t,s,r){if(t==null)return t;var n=[],a=0;return Uf(t,n,"","",function(i){return s.call(r,i,a++)}),n}function _k(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},qf={transition:null},Ok={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:qf,ReactCurrentOwner:C1};function _S(){throw Error("act(...) is not supported in production builds of React.")}ss.Children={map:sf,forEach:function(t,s,r){sf(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return sf(t,function(){s++}),s},toArray:function(t){return sf(t,function(s){return s})||[]},only:function(t){if(!A1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ss.Component=Pu;ss.Fragment=Ck;ss.Profiler=Tk;ss.PureComponent=w1;ss.StrictMode=Ak;ss.Suspense=Ik;ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ok;ss.act=_S;ss.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=IS({},t.props),a=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=C1.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)FS.call(s,c)&&!RS.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:qh,type:t.type,key:a,ref:i,props:n,_owner:l}};ss.createContext=function(t){return t={$$typeof:Pk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ek,_context:t},t.Consumer=t};ss.createElement=MS;ss.createFactory=function(t){var s=MS.bind(null,t);return s.type=t,s};ss.createRef=function(){return{current:null}};ss.forwardRef=function(t){return{$$typeof:Dk,render:t}};ss.isValidElement=A1;ss.lazy=function(t){return{$$typeof:Lk,_payload:{_status:-1,_result:t},_init:_k}};ss.memo=function(t,s){return{$$typeof:kk,type:t,compare:s===void 0?null:s}};ss.startTransition=function(t){var s=qf.transition;qf.transition={};try{t()}finally{qf.transition=s}};ss.unstable_act=_S;ss.useCallback=function(t,s){return Dn.current.useCallback(t,s)};ss.useContext=function(t){return Dn.current.useContext(t)};ss.useDebugValue=function(){};ss.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};ss.useEffect=function(t,s){return Dn.current.useEffect(t,s)};ss.useId=function(){return Dn.current.useId()};ss.useImperativeHandle=function(t,s,r){return Dn.current.useImperativeHandle(t,s,r)};ss.useInsertionEffect=function(t,s){return Dn.current.useInsertionEffect(t,s)};ss.useLayoutEffect=function(t,s){return Dn.current.useLayoutEffect(t,s)};ss.useMemo=function(t,s){return Dn.current.useMemo(t,s)};ss.useReducer=function(t,s,r){return Dn.current.useReducer(t,s,r)};ss.useRef=function(t){return Dn.current.useRef(t)};ss.useState=function(t){return Dn.current.useState(t)};ss.useSyncExternalStore=function(t,s,r){return Dn.current.useSyncExternalStore(t,s,r)};ss.useTransition=function(){return Dn.current.useTransition()};ss.version="18.3.1";PS.exports=ss;var y=PS.exports;const vt=Ho(y),ng=Nk({__proto__:null,default:vt},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k=y,Bk=Symbol.for("react.element"),zk=Symbol.for("react.fragment"),Vk=Object.prototype.hasOwnProperty,Uk=$k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qk={key:!0,ref:!0,__self:!0,__source:!0};function OS(t,s,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(n in s)Vk.call(s,n)&&!qk.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Bk,type:t,key:i,ref:l,props:a,_owner:Uk.current}}rg.Fragment=zk;rg.jsx=OS;rg.jsxs=OS;ES.exports=rg;var e=ES.exports,Ej={},$S={exports:{}},wa={},BS={exports:{}},zS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s($,U){var W=$.length;$.push(U);e:for(;0<W;){var q=W-1>>>1,_=$[q];if(0<a(_,U))$[q]=U,$[W]=_,W=q;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var U=$[0],W=$.pop();if(W!==U){$[0]=W;e:for(var q=0,_=$.length,V=_>>>1;q<V;){var Q=2*(q+1)-1,G=$[Q],Y=Q+1,ne=$[Y];if(0>a(G,W))Y<_&&0>a(ne,G)?($[q]=ne,$[Y]=W,q=Y):($[q]=G,$[Q]=W,q=Q);else if(Y<_&&0>a(ne,W))$[q]=ne,$[Y]=W,q=Y;else break e}}return U}function a($,U){var W=$.sortIndex-U.sortIndex;return W!==0?W:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,p=!1,b=!1,j=!1,x=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=$)n(d),U.sortIndex=U.expirationTime,s(c,U);else break;U=r(d)}}function w($){if(j=!1,v($),!b)if(r(c)!==null)b=!0,B(k);else{var U=r(d);U!==null&&R(w,U.startTime-$)}}function k($,U){b=!1,j&&(j=!1,f(C),C=-1),p=!0;var W=h;try{for(v(U),m=r(c);m!==null&&(!(m.expirationTime>U)||$&&!D());){var q=m.callback;if(typeof q=="function"){m.callback=null,h=m.priorityLevel;var _=q(m.expirationTime<=U);U=t.unstable_now(),typeof _=="function"?m.callback=_:m===r(c)&&n(c),v(U)}else n(c);m=r(c)}if(m!==null)var V=!0;else{var Q=r(d);Q!==null&&R(w,Q.startTime-U),V=!1}return V}finally{m=null,h=W,p=!1}}var T=!1,S=null,C=-1,E=5,M=-1;function D(){return!(t.unstable_now()-M<E)}function A(){if(S!==null){var $=t.unstable_now();M=$;var U=!0;try{U=S(!0,$)}finally{U?I():(T=!1,S=null)}}else T=!1}var I;if(typeof g=="function")I=function(){g(A)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=A,I=function(){F.postMessage(null)}}else I=function(){x(A,0)};function B($){S=$,T||(T=!0,I())}function R($,U){C=x(function(){$(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,B(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var W=h;h=U;try{return $()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=h;h=$;try{return U()}finally{h=W}},t.unstable_scheduleCallback=function($,U,W){var q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?q+W:q):W=q,$){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=W+_,$={id:u++,callback:U,priorityLevel:$,startTime:W,expirationTime:_,sortIndex:-1},W>q?($.sortIndex=W,s(d,$),r(c)===null&&$===r(d)&&(j?(f(C),C=-1):j=!0,R(w,W-q))):($.sortIndex=_,s(c,$),b||p||(b=!0,B(k))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var U=h;return function(){var W=h;h=U;try{return $.apply(this,arguments)}finally{h=W}}}})(zS);BS.exports=zS;var Hk=BS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk=y,Na=Hk;function rt(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VS=new Set,mh={};function qc(t,s){fu(t,s),fu(t+"Capture",s)}function fu(t,s){for(mh[t]=s,t=0;t<s.length;t++)VS.add(s[t])}var Tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pj=Object.prototype.hasOwnProperty,Gk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yN={},bN={};function Kk(t){return Pj.call(bN,t)?!0:Pj.call(yN,t)?!1:Gk.test(t)?bN[t]=!0:(yN[t]=!0,!1)}function Yk(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qk(t,s,r,n){if(s===null||typeof s>"u"||Yk(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function In(t,s,r,n,a,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){an[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];an[s]=new In(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){an[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){an[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){an[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){an[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){an[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){an[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){an[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var T1=/[\-:]([a-z])/g;function E1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(T1,E1);an[s]=new In(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(T1,E1);an[s]=new In(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(T1,E1);an[s]=new In(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){an[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});an.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){an[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function P1(t,s,r,n){var a=an.hasOwnProperty(s)?an[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Qk(s,r,a,n)&&(r=null),n||a===null?Kk(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var Rl=Wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rf=Symbol.for("react.element"),Hd=Symbol.for("react.portal"),Wd=Symbol.for("react.fragment"),D1=Symbol.for("react.strict_mode"),Dj=Symbol.for("react.profiler"),US=Symbol.for("react.provider"),qS=Symbol.for("react.context"),I1=Symbol.for("react.forward_ref"),Ij=Symbol.for("react.suspense"),kj=Symbol.for("react.suspense_list"),k1=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),HS=Symbol.for("react.offscreen"),NN=Symbol.iterator;function Nm(t){return t===null||typeof t!="object"?null:(t=NN&&t[NN]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,s0;function Bm(t){if(s0===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);s0=s&&s[1]||""}return`
`+s0+t}var r0=!1;function n0(t,s){if(!t||r0)return"";r0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var n=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){n=d}t.call(s.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{r0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Bm(t):""}function Zk(t){switch(t.tag){case 5:return Bm(t.type);case 16:return Bm("Lazy");case 13:return Bm("Suspense");case 19:return Bm("SuspenseList");case 0:case 2:case 15:return t=n0(t.type,!1),t;case 11:return t=n0(t.type.render,!1),t;case 1:return t=n0(t.type,!0),t;default:return""}}function Lj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wd:return"Fragment";case Hd:return"Portal";case Dj:return"Profiler";case D1:return"StrictMode";case Ij:return"Suspense";case kj:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qS:return(t.displayName||"Context")+".Consumer";case US:return(t._context.displayName||"Context")+".Provider";case I1:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k1:return s=t.displayName||null,s!==null?s:Lj(t.type)||"Memo";case lo:s=t._payload,t=t._init;try{return Lj(t(s))}catch{}}return null}function Jk(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lj(s);case 8:return s===D1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function _o(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WS(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xk(t){var s=WS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function nf(t){t._valueTracker||(t._valueTracker=Xk(t))}function GS(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=WS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function dx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fj(t,s){var r=s.checked;return nr({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function wN(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=_o(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function KS(t,s){s=s.checked,s!=null&&P1(t,"checked",s,!1)}function Rj(t,s){KS(t,s);var r=_o(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Mj(t,s.type,r):s.hasOwnProperty("defaultValue")&&Mj(t,s.type,_o(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function SN(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Mj(t,s,r){(s!=="number"||dx(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var zm=Array.isArray;function nu(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+_o(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function _j(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(rt(91));return nr({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CN(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(rt(92));if(zm(r)){if(1<r.length)throw Error(rt(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:_o(r)}}function YS(t,s){var r=_o(s.value),n=_o(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function AN(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function QS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oj(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?QS(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var af,ZS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(af=af||document.createElement("div"),af.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=af.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function hh(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var qm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e6=["Webkit","ms","Moz","O"];Object.keys(qm).forEach(function(t){e6.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),qm[s]=qm[t]})});function JS(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||qm.hasOwnProperty(t)&&qm[t]?(""+s).trim():s+"px"}function XS(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=JS(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var t6=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $j(t,s){if(s){if(t6[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(rt(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(rt(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(rt(61))}if(s.style!=null&&typeof s.style!="object")throw Error(rt(62))}}function Bj(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zj=null;function L1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vj=null,au=null,iu=null;function TN(t){if(t=Gh(t)){if(typeof Vj!="function")throw Error(rt(280));var s=t.stateNode;s&&(s=cg(s),Vj(t.stateNode,t.type,s))}}function eC(t){au?iu?iu.push(t):iu=[t]:au=t}function tC(){if(au){var t=au,s=iu;if(iu=au=null,TN(t),s)for(t=0;t<s.length;t++)TN(s[t])}}function sC(t,s){return t(s)}function rC(){}var a0=!1;function nC(t,s,r){if(a0)return t(s,r);a0=!0;try{return sC(t,s,r)}finally{a0=!1,(au!==null||iu!==null)&&(rC(),tC())}}function ph(t,s){var r=t.stateNode;if(r===null)return null;var n=cg(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(rt(231,s,typeof r));return r}var Uj=!1;if(Tl)try{var wm={};Object.defineProperty(wm,"passive",{get:function(){Uj=!0}}),window.addEventListener("test",wm,wm),window.removeEventListener("test",wm,wm)}catch{Uj=!1}function s6(t,s,r,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(r,d)}catch(u){this.onError(u)}}var Hm=!1,ux=null,mx=!1,qj=null,r6={onError:function(t){Hm=!0,ux=t}};function n6(t,s,r,n,a,i,l,o,c){Hm=!1,ux=null,s6.apply(r6,arguments)}function a6(t,s,r,n,a,i,l,o,c){if(n6.apply(this,arguments),Hm){if(Hm){var d=ux;Hm=!1,ux=null}else throw Error(rt(198));mx||(mx=!0,qj=d)}}function Hc(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function aC(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function EN(t){if(Hc(t)!==t)throw Error(rt(188))}function i6(t){var s=t.alternate;if(!s){if(s=Hc(t),s===null)throw Error(rt(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return EN(a),t;if(i===n)return EN(a),s;i=i.sibling}throw Error(rt(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(rt(189))}}if(r.alternate!==n)throw Error(rt(190))}if(r.tag!==3)throw Error(rt(188));return r.stateNode.current===r?t:s}function iC(t){return t=i6(t),t!==null?lC(t):null}function lC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=lC(t);if(s!==null)return s;t=t.sibling}return null}var oC=Na.unstable_scheduleCallback,PN=Na.unstable_cancelCallback,l6=Na.unstable_shouldYield,o6=Na.unstable_requestPaint,jr=Na.unstable_now,c6=Na.unstable_getCurrentPriorityLevel,F1=Na.unstable_ImmediatePriority,cC=Na.unstable_UserBlockingPriority,hx=Na.unstable_NormalPriority,d6=Na.unstable_LowPriority,dC=Na.unstable_IdlePriority,ag=null,Wi=null;function u6(t){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(ag,t,void 0,(t.current.flags&128)===128)}catch{}}var xi=Math.clz32?Math.clz32:p6,m6=Math.log,h6=Math.LN2;function p6(t){return t>>>=0,t===0?32:31-(m6(t)/h6|0)|0}var lf=64,of=4194304;function Vm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function px(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=Vm(o):(i&=l,i!==0&&(n=Vm(i)))}else l=r&~a,l!==0?n=Vm(l):i!==0&&(n=Vm(i));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-xi(s),a=1<<r,n|=t[r],s&=~a;return n}function f6(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x6(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-xi(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&n)&&(a[l]=f6(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function Hj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uC(){var t=lf;return lf<<=1,!(lf&4194240)&&(lf=64),t}function i0(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Hh(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-xi(s),t[s]=r}function g6(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-xi(r),i=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~i}}function R1(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-xi(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var Ts=0;function mC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hC,M1,pC,fC,xC,Wj=!1,cf=[],bo=null,No=null,wo=null,fh=new Map,xh=new Map,mo=[],v6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DN(t,s){switch(t){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":fh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xh.delete(s.pointerId)}}function Sm(t,s,r,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},s!==null&&(s=Gh(s),s!==null&&M1(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function j6(t,s,r,n,a){switch(s){case"focusin":return bo=Sm(bo,t,s,r,n,a),!0;case"dragenter":return No=Sm(No,t,s,r,n,a),!0;case"mouseover":return wo=Sm(wo,t,s,r,n,a),!0;case"pointerover":var i=a.pointerId;return fh.set(i,Sm(fh.get(i)||null,t,s,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,xh.set(i,Sm(xh.get(i)||null,t,s,r,n,a)),!0}return!1}function gC(t){var s=vc(t.target);if(s!==null){var r=Hc(s);if(r!==null){if(s=r.tag,s===13){if(s=aC(r),s!==null){t.blockedOn=s,xC(t.priority,function(){pC(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Gj(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);zj=n,r.target.dispatchEvent(n),zj=null}else return s=Gh(r),s!==null&&M1(s),t.blockedOn=r,!1;s.shift()}return!0}function IN(t,s,r){Hf(t)&&r.delete(s)}function y6(){Wj=!1,bo!==null&&Hf(bo)&&(bo=null),No!==null&&Hf(No)&&(No=null),wo!==null&&Hf(wo)&&(wo=null),fh.forEach(IN),xh.forEach(IN)}function Cm(t,s){t.blockedOn===s&&(t.blockedOn=null,Wj||(Wj=!0,Na.unstable_scheduleCallback(Na.unstable_NormalPriority,y6)))}function gh(t){function s(a){return Cm(a,t)}if(0<cf.length){Cm(cf[0],t);for(var r=1;r<cf.length;r++){var n=cf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(bo!==null&&Cm(bo,t),No!==null&&Cm(No,t),wo!==null&&Cm(wo,t),fh.forEach(s),xh.forEach(s),r=0;r<mo.length;r++)n=mo[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<mo.length&&(r=mo[0],r.blockedOn===null);)gC(r),r.blockedOn===null&&mo.shift()}var lu=Rl.ReactCurrentBatchConfig,fx=!0;function b6(t,s,r,n){var a=Ts,i=lu.transition;lu.transition=null;try{Ts=1,_1(t,s,r,n)}finally{Ts=a,lu.transition=i}}function N6(t,s,r,n){var a=Ts,i=lu.transition;lu.transition=null;try{Ts=4,_1(t,s,r,n)}finally{Ts=a,lu.transition=i}}function _1(t,s,r,n){if(fx){var a=Gj(t,s,r,n);if(a===null)x0(t,s,n,xx,r),DN(t,n);else if(j6(a,t,s,r,n))n.stopPropagation();else if(DN(t,n),s&4&&-1<v6.indexOf(t)){for(;a!==null;){var i=Gh(a);if(i!==null&&hC(i),i=Gj(t,s,r,n),i===null&&x0(t,s,n,xx,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else x0(t,s,n,null,r)}}var xx=null;function Gj(t,s,r,n){if(xx=null,t=L1(n),t=vc(t),t!==null)if(s=Hc(t),s===null)t=null;else if(r=s.tag,r===13){if(t=aC(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return xx=t,null}function vC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c6()){case F1:return 1;case cC:return 4;case hx:case d6:return 16;case dC:return 536870912;default:return 16}default:return 16}}var go=null,O1=null,Wf=null;function jC(){if(Wf)return Wf;var t,s=O1,r=s.length,n,a="value"in go?go.value:go.textContent,i=a.length;for(t=0;t<r&&s[t]===a[t];t++);var l=r-t;for(n=1;n<=l&&s[r-n]===a[i-n];n++);return Wf=a.slice(t,1<n?1-n:void 0)}function Gf(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function df(){return!0}function kN(){return!1}function Sa(t){function s(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?df:kN,this.isPropagationStopped=kN,this}return nr(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),s}var Du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$1=Sa(Du),Wh=nr({},Du,{view:0,detail:0}),w6=Sa(Wh),l0,o0,Am,ig=nr({},Wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Am&&(Am&&t.type==="mousemove"?(l0=t.screenX-Am.screenX,o0=t.screenY-Am.screenY):o0=l0=0,Am=t),l0)},movementY:function(t){return"movementY"in t?t.movementY:o0}}),LN=Sa(ig),S6=nr({},ig,{dataTransfer:0}),C6=Sa(S6),A6=nr({},Wh,{relatedTarget:0}),c0=Sa(A6),T6=nr({},Du,{animationName:0,elapsedTime:0,pseudoElement:0}),E6=Sa(T6),P6=nr({},Du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D6=Sa(P6),I6=nr({},Du,{data:0}),FN=Sa(I6),k6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R6(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=F6[t])?!!s[t]:!1}function B1(){return R6}var M6=nr({},Wh,{key:function(t){if(t.key){var s=k6[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Gf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?L6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B1,charCode:function(t){return t.type==="keypress"?Gf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_6=Sa(M6),O6=nr({},ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RN=Sa(O6),$6=nr({},Wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B1}),B6=Sa($6),z6=nr({},Du,{propertyName:0,elapsedTime:0,pseudoElement:0}),V6=Sa(z6),U6=nr({},ig,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q6=Sa(U6),H6=[9,13,27,32],z1=Tl&&"CompositionEvent"in window,Wm=null;Tl&&"documentMode"in document&&(Wm=document.documentMode);var W6=Tl&&"TextEvent"in window&&!Wm,yC=Tl&&(!z1||Wm&&8<Wm&&11>=Wm),MN=" ",_N=!1;function bC(t,s){switch(t){case"keyup":return H6.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gd=!1;function G6(t,s){switch(t){case"compositionend":return NC(s);case"keypress":return s.which!==32?null:(_N=!0,MN);case"textInput":return t=s.data,t===MN&&_N?null:t;default:return null}}function K6(t,s){if(Gd)return t==="compositionend"||!z1&&bC(t,s)?(t=jC(),Wf=O1=go=null,Gd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yC&&s.locale!=="ko"?null:s.data;default:return null}}var Y6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ON(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Y6[t.type]:s==="textarea"}function wC(t,s,r,n){eC(n),s=gx(s,"onChange"),0<s.length&&(r=new $1("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var Gm=null,vh=null;function Q6(t){FC(t,0)}function lg(t){var s=Qd(t);if(GS(s))return t}function Z6(t,s){if(t==="change")return s}var SC=!1;if(Tl){var d0;if(Tl){var u0="oninput"in document;if(!u0){var $N=document.createElement("div");$N.setAttribute("oninput","return;"),u0=typeof $N.oninput=="function"}d0=u0}else d0=!1;SC=d0&&(!document.documentMode||9<document.documentMode)}function BN(){Gm&&(Gm.detachEvent("onpropertychange",CC),vh=Gm=null)}function CC(t){if(t.propertyName==="value"&&lg(vh)){var s=[];wC(s,vh,t,L1(t)),nC(Q6,s)}}function J6(t,s,r){t==="focusin"?(BN(),Gm=s,vh=r,Gm.attachEvent("onpropertychange",CC)):t==="focusout"&&BN()}function X6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lg(vh)}function eL(t,s){if(t==="click")return lg(s)}function tL(t,s){if(t==="input"||t==="change")return lg(s)}function sL(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ji=typeof Object.is=="function"?Object.is:sL;function jh(t,s){if(ji(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Pj.call(s,a)||!ji(t[a],s[a]))return!1}return!0}function zN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VN(t,s){var r=zN(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zN(r)}}function AC(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?AC(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function TC(){for(var t=window,s=dx();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=dx(t.document)}return s}function V1(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function rL(t){var s=TC(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&AC(r.ownerDocument.documentElement,r)){if(n!==null&&V1(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=VN(r,i);var l=VN(r,n);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nL=Tl&&"documentMode"in document&&11>=document.documentMode,Kd=null,Kj=null,Km=null,Yj=!1;function UN(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Yj||Kd==null||Kd!==dx(n)||(n=Kd,"selectionStart"in n&&V1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Km&&jh(Km,n)||(Km=n,n=gx(Kj,"onSelect"),0<n.length&&(s=new $1("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=Kd)))}function uf(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Yd={animationend:uf("Animation","AnimationEnd"),animationiteration:uf("Animation","AnimationIteration"),animationstart:uf("Animation","AnimationStart"),transitionend:uf("Transition","TransitionEnd")},m0={},EC={};Tl&&(EC=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function og(t){if(m0[t])return m0[t];if(!Yd[t])return t;var s=Yd[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in EC)return m0[t]=s[r];return t}var PC=og("animationend"),DC=og("animationiteration"),IC=og("animationstart"),kC=og("transitionend"),LC=new Map,qN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wo(t,s){LC.set(t,s),qc(s,[t])}for(var h0=0;h0<qN.length;h0++){var p0=qN[h0],aL=p0.toLowerCase(),iL=p0[0].toUpperCase()+p0.slice(1);Wo(aL,"on"+iL)}Wo(PC,"onAnimationEnd");Wo(DC,"onAnimationIteration");Wo(IC,"onAnimationStart");Wo("dblclick","onDoubleClick");Wo("focusin","onFocus");Wo("focusout","onBlur");Wo(kC,"onTransitionEnd");fu("onMouseEnter",["mouseout","mouseover"]);fu("onMouseLeave",["mouseout","mouseover"]);fu("onPointerEnter",["pointerout","pointerover"]);fu("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Um));function HN(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,a6(n,s,void 0,t),t.currentTarget=null}function FC(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var i=void 0;if(s)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;HN(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;HN(a,o,d),i=c}}}if(mx)throw t=qj,mx=!1,qj=null,t}function Us(t,s){var r=s[ey];r===void 0&&(r=s[ey]=new Set);var n=t+"__bubble";r.has(n)||(RC(s,t,2,!1),r.add(n))}function f0(t,s,r){var n=0;s&&(n|=4),RC(r,t,n,s)}var mf="_reactListening"+Math.random().toString(36).slice(2);function yh(t){if(!t[mf]){t[mf]=!0,VS.forEach(function(r){r!=="selectionchange"&&(lL.has(r)||f0(r,!1,t),f0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[mf]||(s[mf]=!0,f0("selectionchange",!1,s))}}function RC(t,s,r,n){switch(vC(s)){case 1:var a=b6;break;case 4:a=N6;break;default:a=_1}r=a.bind(null,s,r,t),a=void 0,!Uj||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function x0(t,s,r,n,a){var i=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=vc(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}nC(function(){var d=i,u=L1(r),m=[];e:{var h=LC.get(t);if(h!==void 0){var p=$1,b=t;switch(t){case"keypress":if(Gf(r)===0)break e;case"keydown":case"keyup":p=_6;break;case"focusin":b="focus",p=c0;break;case"focusout":b="blur",p=c0;break;case"beforeblur":case"afterblur":p=c0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=LN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=C6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=B6;break;case PC:case DC:case IC:p=E6;break;case kC:p=V6;break;case"scroll":p=w6;break;case"wheel":p=q6;break;case"copy":case"cut":case"paste":p=D6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=RN}var j=(s&4)!==0,x=!j&&t==="scroll",f=j?h!==null?h+"Capture":null:h;j=[];for(var g=d,v;g!==null;){v=g;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,f!==null&&(w=ph(g,f),w!=null&&j.push(bh(g,w,v)))),x)break;g=g.return}0<j.length&&(h=new p(h,b,null,r,u),m.push({event:h,listeners:j}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==zj&&(b=r.relatedTarget||r.fromElement)&&(vc(b)||b[El]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=d,b=b?vc(b):null,b!==null&&(x=Hc(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=d),p!==b)){if(j=LN,w="onMouseLeave",f="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(j=RN,w="onPointerLeave",f="onPointerEnter",g="pointer"),x=p==null?h:Qd(p),v=b==null?h:Qd(b),h=new j(w,g+"leave",p,r,u),h.target=x,h.relatedTarget=v,w=null,vc(u)===d&&(j=new j(f,g+"enter",b,r,u),j.target=v,j.relatedTarget=x,w=j),x=w,p&&b)t:{for(j=p,f=b,g=0,v=j;v;v=Id(v))g++;for(v=0,w=f;w;w=Id(w))v++;for(;0<g-v;)j=Id(j),g--;for(;0<v-g;)f=Id(f),v--;for(;g--;){if(j===f||f!==null&&j===f.alternate)break t;j=Id(j),f=Id(f)}j=null}else j=null;p!==null&&WN(m,h,p,j,!1),b!==null&&x!==null&&WN(m,x,b,j,!0)}}e:{if(h=d?Qd(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var k=Z6;else if(ON(h))if(SC)k=tL;else{k=X6;var T=J6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=eL);if(k&&(k=k(t,d))){wC(m,k,r,u);break e}T&&T(t,h,d),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&Mj(h,"number",h.value)}switch(T=d?Qd(d):window,t){case"focusin":(ON(T)||T.contentEditable==="true")&&(Kd=T,Kj=d,Km=null);break;case"focusout":Km=Kj=Kd=null;break;case"mousedown":Yj=!0;break;case"contextmenu":case"mouseup":case"dragend":Yj=!1,UN(m,r,u);break;case"selectionchange":if(nL)break;case"keydown":case"keyup":UN(m,r,u)}var S;if(z1)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Gd?bC(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(yC&&r.locale!=="ko"&&(Gd||C!=="onCompositionStart"?C==="onCompositionEnd"&&Gd&&(S=jC()):(go=u,O1="value"in go?go.value:go.textContent,Gd=!0)),T=gx(d,C),0<T.length&&(C=new FN(C,t,null,r,u),m.push({event:C,listeners:T}),S?C.data=S:(S=NC(r),S!==null&&(C.data=S)))),(S=W6?G6(t,r):K6(t,r))&&(d=gx(d,"onBeforeInput"),0<d.length&&(u=new FN("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=S))}FC(m,s)})}function bh(t,s,r){return{instance:t,listener:s,currentTarget:r}}function gx(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ph(t,r),i!=null&&n.unshift(bh(t,i,a)),i=ph(t,s),i!=null&&n.push(bh(t,i,a))),t=t.return}return n}function Id(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function WN(t,s,r,n,a){for(var i=s._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=ph(r,i),c!=null&&l.unshift(bh(r,c,o))):a||(c=ph(r,i),c!=null&&l.push(bh(r,c,o)))),r=r.return}l.length!==0&&t.push({event:s,listeners:l})}var oL=/\r\n?/g,cL=/\u0000|\uFFFD/g;function GN(t){return(typeof t=="string"?t:""+t).replace(oL,`
`).replace(cL,"")}function hf(t,s,r){if(s=GN(s),GN(t)!==s&&r)throw Error(rt(425))}function vx(){}var Qj=null,Zj=null;function Jj(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xj=typeof setTimeout=="function"?setTimeout:void 0,dL=typeof clearTimeout=="function"?clearTimeout:void 0,KN=typeof Promise=="function"?Promise:void 0,uL=typeof queueMicrotask=="function"?queueMicrotask:typeof KN<"u"?function(t){return KN.resolve(null).then(t).catch(mL)}:Xj;function mL(t){setTimeout(function(){throw t})}function g0(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),gh(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gh(s)}function So(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function YN(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Iu=Math.random().toString(36).slice(2),zi="__reactFiber$"+Iu,Nh="__reactProps$"+Iu,El="__reactContainer$"+Iu,ey="__reactEvents$"+Iu,hL="__reactListeners$"+Iu,pL="__reactHandles$"+Iu;function vc(t){var s=t[zi];if(s)return s;for(var r=t.parentNode;r;){if(s=r[El]||r[zi]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=YN(t);t!==null;){if(r=t[zi])return r;t=YN(t)}return s}t=r,r=t.parentNode}return null}function Gh(t){return t=t[zi]||t[El],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(rt(33))}function cg(t){return t[Nh]||null}var ty=[],Zd=-1;function Go(t){return{current:t}}function Gs(t){0>Zd||(t.current=ty[Zd],ty[Zd]=null,Zd--)}function Bs(t,s){Zd++,ty[Zd]=t.current,t.current=s}var Oo={},Nn=Go(Oo),Kn=Go(!1),Pc=Oo;function xu(t,s){var r=t.type.contextTypes;if(!r)return Oo;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=s[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Yn(t){return t=t.childContextTypes,t!=null}function jx(){Gs(Kn),Gs(Nn)}function QN(t,s,r){if(Nn.current!==Oo)throw Error(rt(168));Bs(Nn,s),Bs(Kn,r)}function MC(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(rt(108,Jk(t)||"Unknown",a));return nr({},r,n)}function yx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oo,Pc=Nn.current,Bs(Nn,t),Bs(Kn,Kn.current),!0}function ZN(t,s,r){var n=t.stateNode;if(!n)throw Error(rt(169));r?(t=MC(t,s,Pc),n.__reactInternalMemoizedMergedChildContext=t,Gs(Kn),Gs(Nn),Bs(Nn,t)):Gs(Kn),Bs(Kn,r)}var jl=null,dg=!1,v0=!1;function _C(t){jl===null?jl=[t]:jl.push(t)}function fL(t){dg=!0,_C(t)}function Ko(){if(!v0&&jl!==null){v0=!0;var t=0,s=Ts;try{var r=jl;for(Ts=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}jl=null,dg=!1}catch(a){throw jl!==null&&(jl=jl.slice(t+1)),oC(F1,Ko),a}finally{Ts=s,v0=!1}}return null}var Jd=[],Xd=0,bx=null,Nx=0,Oa=[],$a=0,Dc=null,wl=1,Sl="";function hc(t,s){Jd[Xd++]=Nx,Jd[Xd++]=bx,bx=t,Nx=s}function OC(t,s,r){Oa[$a++]=wl,Oa[$a++]=Sl,Oa[$a++]=Dc,Dc=t;var n=wl;t=Sl;var a=32-xi(n)-1;n&=~(1<<a),r+=1;var i=32-xi(s)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,wl=1<<32-xi(s)+a|r<<a|n,Sl=i+t}else wl=1<<i|r<<a|n,Sl=t}function U1(t){t.return!==null&&(hc(t,1),OC(t,1,0))}function q1(t){for(;t===bx;)bx=Jd[--Xd],Jd[Xd]=null,Nx=Jd[--Xd],Jd[Xd]=null;for(;t===Dc;)Dc=Oa[--$a],Oa[$a]=null,Sl=Oa[--$a],Oa[$a]=null,wl=Oa[--$a],Oa[$a]=null}var fa=null,ua=null,Ys=!1,hi=null;function $C(t,s){var r=Ba(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function JN(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,fa=t,ua=So(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,fa=t,ua=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Dc!==null?{id:wl,overflow:Sl}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=Ba(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,fa=t,ua=null,!0):!1;default:return!1}}function sy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ry(t){if(Ys){var s=ua;if(s){var r=s;if(!JN(t,s)){if(sy(t))throw Error(rt(418));s=So(r.nextSibling);var n=fa;s&&JN(t,s)?$C(n,r):(t.flags=t.flags&-4097|2,Ys=!1,fa=t)}}else{if(sy(t))throw Error(rt(418));t.flags=t.flags&-4097|2,Ys=!1,fa=t}}}function XN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fa=t}function pf(t){if(t!==fa)return!1;if(!Ys)return XN(t),Ys=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Jj(t.type,t.memoizedProps)),s&&(s=ua)){if(sy(t))throw BC(),Error(rt(418));for(;s;)$C(t,s),s=So(s.nextSibling)}if(XN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(rt(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){ua=So(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}ua=null}}else ua=fa?So(t.stateNode.nextSibling):null;return!0}function BC(){for(var t=ua;t;)t=So(t.nextSibling)}function gu(){ua=fa=null,Ys=!1}function H1(t){hi===null?hi=[t]:hi.push(t)}var xL=Rl.ReactCurrentBatchConfig;function Tm(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(rt(309));var n=r.stateNode}if(!n)throw Error(rt(147,t));var a=n,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(rt(284));if(!r._owner)throw Error(rt(290,t))}return t}function ff(t,s){throw t=Object.prototype.toString.call(s),Error(rt(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ew(t){var s=t._init;return s(t._payload)}function zC(t){function s(f,g){if(t){var v=f.deletions;v===null?(f.deletions=[g],f.flags|=16):v.push(g)}}function r(f,g){if(!t)return null;for(;g!==null;)s(f,g),g=g.sibling;return null}function n(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function a(f,g){return f=Eo(f,g),f.index=0,f.sibling=null,f}function i(f,g,v){return f.index=v,t?(v=f.alternate,v!==null?(v=v.index,v<g?(f.flags|=2,g):v):(f.flags|=2,g)):(f.flags|=1048576,g)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function o(f,g,v,w){return g===null||g.tag!==6?(g=C0(v,f.mode,w),g.return=f,g):(g=a(g,v),g.return=f,g)}function c(f,g,v,w){var k=v.type;return k===Wd?u(f,g,v.props.children,w,v.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===lo&&ew(k)===g.type)?(w=a(g,v.props),w.ref=Tm(f,g,v),w.return=f,w):(w=ex(v.type,v.key,v.props,null,f.mode,w),w.ref=Tm(f,g,v),w.return=f,w)}function d(f,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=A0(v,f.mode,w),g.return=f,g):(g=a(g,v.children||[]),g.return=f,g)}function u(f,g,v,w,k){return g===null||g.tag!==7?(g=Sc(v,f.mode,w,k),g.return=f,g):(g=a(g,v),g.return=f,g)}function m(f,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=C0(""+g,f.mode,v),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case rf:return v=ex(g.type,g.key,g.props,null,f.mode,v),v.ref=Tm(f,null,g),v.return=f,v;case Hd:return g=A0(g,f.mode,v),g.return=f,g;case lo:var w=g._init;return m(f,w(g._payload),v)}if(zm(g)||Nm(g))return g=Sc(g,f.mode,v,null),g.return=f,g;ff(f,g)}return null}function h(f,g,v,w){var k=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:o(f,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rf:return v.key===k?c(f,g,v,w):null;case Hd:return v.key===k?d(f,g,v,w):null;case lo:return k=v._init,h(f,g,k(v._payload),w)}if(zm(v)||Nm(v))return k!==null?null:u(f,g,v,w,null);ff(f,v)}return null}function p(f,g,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return f=f.get(v)||null,o(g,f,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rf:return f=f.get(w.key===null?v:w.key)||null,c(g,f,w,k);case Hd:return f=f.get(w.key===null?v:w.key)||null,d(g,f,w,k);case lo:var T=w._init;return p(f,g,v,T(w._payload),k)}if(zm(w)||Nm(w))return f=f.get(v)||null,u(g,f,w,k,null);ff(g,w)}return null}function b(f,g,v,w){for(var k=null,T=null,S=g,C=g=0,E=null;S!==null&&C<v.length;C++){S.index>C?(E=S,S=null):E=S.sibling;var M=h(f,S,v[C],w);if(M===null){S===null&&(S=E);break}t&&S&&M.alternate===null&&s(f,S),g=i(M,g,C),T===null?k=M:T.sibling=M,T=M,S=E}if(C===v.length)return r(f,S),Ys&&hc(f,C),k;if(S===null){for(;C<v.length;C++)S=m(f,v[C],w),S!==null&&(g=i(S,g,C),T===null?k=S:T.sibling=S,T=S);return Ys&&hc(f,C),k}for(S=n(f,S);C<v.length;C++)E=p(S,f,C,v[C],w),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?C:E.key),g=i(E,g,C),T===null?k=E:T.sibling=E,T=E);return t&&S.forEach(function(D){return s(f,D)}),Ys&&hc(f,C),k}function j(f,g,v,w){var k=Nm(v);if(typeof k!="function")throw Error(rt(150));if(v=k.call(v),v==null)throw Error(rt(151));for(var T=k=null,S=g,C=g=0,E=null,M=v.next();S!==null&&!M.done;C++,M=v.next()){S.index>C?(E=S,S=null):E=S.sibling;var D=h(f,S,M.value,w);if(D===null){S===null&&(S=E);break}t&&S&&D.alternate===null&&s(f,S),g=i(D,g,C),T===null?k=D:T.sibling=D,T=D,S=E}if(M.done)return r(f,S),Ys&&hc(f,C),k;if(S===null){for(;!M.done;C++,M=v.next())M=m(f,M.value,w),M!==null&&(g=i(M,g,C),T===null?k=M:T.sibling=M,T=M);return Ys&&hc(f,C),k}for(S=n(f,S);!M.done;C++,M=v.next())M=p(S,f,C,M.value,w),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),g=i(M,g,C),T===null?k=M:T.sibling=M,T=M);return t&&S.forEach(function(A){return s(f,A)}),Ys&&hc(f,C),k}function x(f,g,v,w){if(typeof v=="object"&&v!==null&&v.type===Wd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case rf:e:{for(var k=v.key,T=g;T!==null;){if(T.key===k){if(k=v.type,k===Wd){if(T.tag===7){r(f,T.sibling),g=a(T,v.props.children),g.return=f,f=g;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===lo&&ew(k)===T.type){r(f,T.sibling),g=a(T,v.props),g.ref=Tm(f,T,v),g.return=f,f=g;break e}r(f,T);break}else s(f,T);T=T.sibling}v.type===Wd?(g=Sc(v.props.children,f.mode,w,v.key),g.return=f,f=g):(w=ex(v.type,v.key,v.props,null,f.mode,w),w.ref=Tm(f,g,v),w.return=f,f=w)}return l(f);case Hd:e:{for(T=v.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(f,g.sibling),g=a(g,v.children||[]),g.return=f,f=g;break e}else{r(f,g);break}else s(f,g);g=g.sibling}g=A0(v,f.mode,w),g.return=f,f=g}return l(f);case lo:return T=v._init,x(f,g,T(v._payload),w)}if(zm(v))return b(f,g,v,w);if(Nm(v))return j(f,g,v,w);ff(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(f,g.sibling),g=a(g,v),g.return=f,f=g):(r(f,g),g=C0(v,f.mode,w),g.return=f,f=g),l(f)):r(f,g)}return x}var vu=zC(!0),VC=zC(!1),wx=Go(null),Sx=null,eu=null,W1=null;function G1(){W1=eu=Sx=null}function K1(t){var s=wx.current;Gs(wx),t._currentValue=s}function ny(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function ou(t,s){Sx=t,W1=eu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Wn=!0),t.firstContext=null)}function Ha(t){var s=t._currentValue;if(W1!==t)if(t={context:t,memoizedValue:s,next:null},eu===null){if(Sx===null)throw Error(rt(308));eu=t,Sx.dependencies={lanes:0,firstContext:t}}else eu=eu.next=t;return s}var jc=null;function Y1(t){jc===null?jc=[t]:jc.push(t)}function UC(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,Y1(s)):(r.next=a.next,a.next=r),s.interleaved=r,Pl(t,n)}function Pl(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var oo=!1;function Q1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qC(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Al(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Co(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,cs&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,Pl(t,r)}return a=n.interleaved,a===null?(s.next=s,Y1(n)):(s.next=a.next,a.next=s),n.interleaved=s,Pl(t,r)}function Kf(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,R1(t,r)}}function tw(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=s:i=i.next=s}else a=i=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Cx(t,s,r,n){var a=t.updateQueue;oo=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,p=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,j=o;switch(h=s,p=r,j.tag){case 1:if(b=j.payload,typeof b=="function"){m=b.call(p,m,h);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,h=typeof b=="function"?b.call(p,m,h):b,h==null)break e;m=nr({},m,h);break e;case 2:oo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do l|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);kc|=l,t.lanes=l,t.memoizedState=m}}function sw(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(rt(191,a));a.call(n)}}}var Kh={},Gi=Go(Kh),wh=Go(Kh),Sh=Go(Kh);function yc(t){if(t===Kh)throw Error(rt(174));return t}function Z1(t,s){switch(Bs(Sh,s),Bs(wh,t),Bs(Gi,Kh),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Oj(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Oj(s,t)}Gs(Gi),Bs(Gi,s)}function ju(){Gs(Gi),Gs(wh),Gs(Sh)}function HC(t){yc(Sh.current);var s=yc(Gi.current),r=Oj(s,t.type);s!==r&&(Bs(wh,t),Bs(Gi,r))}function J1(t){wh.current===t&&(Gs(Gi),Gs(wh))}var tr=Go(0);function Ax(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var j0=[];function X1(){for(var t=0;t<j0.length;t++)j0[t]._workInProgressVersionPrimary=null;j0.length=0}var Yf=Rl.ReactCurrentDispatcher,y0=Rl.ReactCurrentBatchConfig,Ic=0,rr=null,Mr=null,Vr=null,Tx=!1,Ym=!1,Ch=0,gL=0;function dn(){throw Error(rt(321))}function e2(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!ji(t[r],s[r]))return!1;return!0}function t2(t,s,r,n,a,i){if(Ic=i,rr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yf.current=t===null||t.memoizedState===null?bL:NL,t=r(n,a),Ym){i=0;do{if(Ym=!1,Ch=0,25<=i)throw Error(rt(301));i+=1,Vr=Mr=null,s.updateQueue=null,Yf.current=wL,t=r(n,a)}while(Ym)}if(Yf.current=Ex,s=Mr!==null&&Mr.next!==null,Ic=0,Vr=Mr=rr=null,Tx=!1,s)throw Error(rt(300));return t}function s2(){var t=Ch!==0;return Ch=0,t}function Oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?rr.memoizedState=Vr=t:Vr=Vr.next=t,Vr}function Wa(){if(Mr===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=Mr.next;var s=Vr===null?rr.memoizedState:Vr.next;if(s!==null)Vr=s,Mr=t;else{if(t===null)throw Error(rt(310));Mr=t,t={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Vr===null?rr.memoizedState=Vr=t:Vr=Vr.next=t}return Vr}function Ah(t,s){return typeof s=="function"?s(t):s}function b0(t){var s=Wa(),r=s.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=t;var n=Mr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Ic&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,rr.lanes|=u,kc|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,ji(n,s.memoizedState)||(Wn=!0),s.memoizedState=n,s.baseState=l,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do i=a.lane,rr.lanes|=i,kc|=i,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function N0(t){var s=Wa(),r=s.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,i=s.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);ji(i,s.memoizedState)||(Wn=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),r.lastRenderedState=i}return[i,n]}function WC(){}function GC(t,s){var r=rr,n=Wa(),a=s(),i=!ji(n.memoizedState,a);if(i&&(n.memoizedState=a,Wn=!0),n=n.queue,r2(QC.bind(null,r,n,t),[t]),n.getSnapshot!==s||i||Vr!==null&&Vr.memoizedState.tag&1){if(r.flags|=2048,Th(9,YC.bind(null,r,n,a,s),void 0,null),qr===null)throw Error(rt(349));Ic&30||KC(r,s,a)}return a}function KC(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=rr.updateQueue,s===null?(s={lastEffect:null,stores:null},rr.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function YC(t,s,r,n){s.value=r,s.getSnapshot=n,ZC(s)&&JC(t)}function QC(t,s,r){return r(function(){ZC(s)&&JC(t)})}function ZC(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!ji(t,r)}catch{return!0}}function JC(t){var s=Pl(t,1);s!==null&&gi(s,t,1,-1)}function rw(t){var s=Oi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:t},s.queue=t,t=t.dispatch=yL.bind(null,rr,t),[s.memoizedState,t]}function Th(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=rr.updateQueue,s===null?(s={lastEffect:null,stores:null},rr.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function XC(){return Wa().memoizedState}function Qf(t,s,r,n){var a=Oi();rr.flags|=t,a.memoizedState=Th(1|s,r,void 0,n===void 0?null:n)}function ug(t,s,r,n){var a=Wa();n=n===void 0?null:n;var i=void 0;if(Mr!==null){var l=Mr.memoizedState;if(i=l.destroy,n!==null&&e2(n,l.deps)){a.memoizedState=Th(s,r,i,n);return}}rr.flags|=t,a.memoizedState=Th(1|s,r,i,n)}function nw(t,s){return Qf(8390656,8,t,s)}function r2(t,s){return ug(2048,8,t,s)}function e3(t,s){return ug(4,2,t,s)}function t3(t,s){return ug(4,4,t,s)}function s3(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function r3(t,s,r){return r=r!=null?r.concat([t]):null,ug(4,4,s3.bind(null,s,t),r)}function n2(){}function n3(t,s){var r=Wa();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&e2(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function a3(t,s){var r=Wa();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&e2(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function i3(t,s,r){return Ic&21?(ji(r,s)||(r=uC(),rr.lanes|=r,kc|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=r)}function vL(t,s){var r=Ts;Ts=r!==0&&4>r?r:4,t(!0);var n=y0.transition;y0.transition={};try{t(!1),s()}finally{Ts=r,y0.transition=n}}function l3(){return Wa().memoizedState}function jL(t,s,r){var n=To(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},o3(t))c3(s,r);else if(r=UC(t,s,r,n),r!==null){var a=Pn();gi(r,t,n,a),d3(r,s,n)}}function yL(t,s,r){var n=To(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(o3(t))c3(s,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,ji(o,l)){var c=s.interleaved;c===null?(a.next=a,Y1(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=UC(t,s,a,n),r!==null&&(a=Pn(),gi(r,t,n,a),d3(r,s,n))}}function o3(t){var s=t.alternate;return t===rr||s!==null&&s===rr}function c3(t,s){Ym=Tx=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function d3(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,R1(t,r)}}var Ex={readContext:Ha,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},bL={readContext:Ha,useCallback:function(t,s){return Oi().memoizedState=[t,s===void 0?null:s],t},useContext:Ha,useEffect:nw,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Qf(4194308,4,s3.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Qf(4194308,4,t,s)},useInsertionEffect:function(t,s){return Qf(4,2,t,s)},useMemo:function(t,s){var r=Oi();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=Oi();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=jL.bind(null,rr,t),[n.memoizedState,t]},useRef:function(t){var s=Oi();return t={current:t},s.memoizedState=t},useState:rw,useDebugValue:n2,useDeferredValue:function(t){return Oi().memoizedState=t},useTransition:function(){var t=rw(!1),s=t[0];return t=vL.bind(null,t[1]),Oi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=rr,a=Oi();if(Ys){if(r===void 0)throw Error(rt(407));r=r()}else{if(r=s(),qr===null)throw Error(rt(349));Ic&30||KC(n,s,r)}a.memoizedState=r;var i={value:r,getSnapshot:s};return a.queue=i,nw(QC.bind(null,n,i,t),[t]),n.flags|=2048,Th(9,YC.bind(null,n,i,r,s),void 0,null),r},useId:function(){var t=Oi(),s=qr.identifierPrefix;if(Ys){var r=Sl,n=wl;r=(n&~(1<<32-xi(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=Ch++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=gL++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},NL={readContext:Ha,useCallback:n3,useContext:Ha,useEffect:r2,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:a3,useReducer:b0,useRef:XC,useState:function(){return b0(Ah)},useDebugValue:n2,useDeferredValue:function(t){var s=Wa();return i3(s,Mr.memoizedState,t)},useTransition:function(){var t=b0(Ah)[0],s=Wa().memoizedState;return[t,s]},useMutableSource:WC,useSyncExternalStore:GC,useId:l3,unstable_isNewReconciler:!1},wL={readContext:Ha,useCallback:n3,useContext:Ha,useEffect:r2,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:a3,useReducer:N0,useRef:XC,useState:function(){return N0(Ah)},useDebugValue:n2,useDeferredValue:function(t){var s=Wa();return Mr===null?s.memoizedState=t:i3(s,Mr.memoizedState,t)},useTransition:function(){var t=N0(Ah)[0],s=Wa().memoizedState;return[t,s]},useMutableSource:WC,useSyncExternalStore:GC,useId:l3,unstable_isNewReconciler:!1};function di(t,s){if(t&&t.defaultProps){s=nr({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function ay(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:nr({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var mg={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=Pn(),a=To(t),i=Al(n,a);i.payload=s,r!=null&&(i.callback=r),s=Co(t,i,a),s!==null&&(gi(s,t,a,n),Kf(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=Pn(),a=To(t),i=Al(n,a);i.tag=1,i.payload=s,r!=null&&(i.callback=r),s=Co(t,i,a),s!==null&&(gi(s,t,a,n),Kf(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Pn(),n=To(t),a=Al(r,n);a.tag=2,s!=null&&(a.callback=s),s=Co(t,a,n),s!==null&&(gi(s,t,n,r),Kf(s,t,n))}};function aw(t,s,r,n,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):s.prototype&&s.prototype.isPureReactComponent?!jh(r,n)||!jh(a,i):!0}function u3(t,s,r){var n=!1,a=Oo,i=s.contextType;return typeof i=="object"&&i!==null?i=Ha(i):(a=Yn(s)?Pc:Nn.current,n=s.contextTypes,i=(n=n!=null)?xu(t,a):Oo),s=new s(r,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=mg,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),s}function iw(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&mg.enqueueReplaceState(s,s.state,null)}function iy(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},Q1(t);var i=s.contextType;typeof i=="object"&&i!==null?a.context=Ha(i):(i=Yn(s)?Pc:Nn.current,a.context=xu(t,i)),a.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(ay(t,s,i,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&mg.enqueueReplaceState(a,a.state,null),Cx(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function yu(t,s){try{var r="",n=s;do r+=Zk(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:a,digest:null}}function w0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function ly(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var SL=typeof WeakMap=="function"?WeakMap:Map;function m3(t,s,r){r=Al(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){Dx||(Dx=!0,gy=n),ly(t,s)},r}function h3(t,s,r){r=Al(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){ly(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ly(t,s),typeof n!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),r}function lw(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new SL;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=OL.bind(null,t,s,r),s.then(t,t))}function ow(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function cw(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Al(-1,1),s.tag=2,Co(r,s,1))),r.lanes|=1),t)}var CL=Rl.ReactCurrentOwner,Wn=!1;function En(t,s,r,n){s.child=t===null?VC(s,null,r,n):vu(s,t.child,r,n)}function dw(t,s,r,n,a){r=r.render;var i=s.ref;return ou(s,a),n=t2(t,s,r,n,i,a),r=s2(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Dl(t,s,a)):(Ys&&r&&U1(s),s.flags|=1,En(t,s,n,a),s.child)}function uw(t,s,r,n,a){if(t===null){var i=r.type;return typeof i=="function"&&!m2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=i,p3(t,s,i,n,a)):(t=ex(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:jh,r(l,n)&&t.ref===s.ref)return Dl(t,s,a)}return s.flags|=1,t=Eo(i,n),t.ref=s.ref,t.return=s,s.child=t}function p3(t,s,r,n,a){if(t!==null){var i=t.memoizedProps;if(jh(i,n)&&t.ref===s.ref)if(Wn=!1,s.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Wn=!0);else return s.lanes=t.lanes,Dl(t,s,a)}return oy(t,s,r,n,a)}function f3(t,s,r){var n=s.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bs(su,la),la|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Bs(su,la),la|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Bs(su,la),la|=n}else i!==null?(n=i.baseLanes|r,s.memoizedState=null):n=r,Bs(su,la),la|=n;return En(t,s,a,r),s.child}function x3(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function oy(t,s,r,n,a){var i=Yn(r)?Pc:Nn.current;return i=xu(s,i),ou(s,a),r=t2(t,s,r,n,i,a),n=s2(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Dl(t,s,a)):(Ys&&n&&U1(s),s.flags|=1,En(t,s,r,a),s.child)}function mw(t,s,r,n,a){if(Yn(r)){var i=!0;yx(s)}else i=!1;if(ou(s,a),s.stateNode===null)Zf(t,s),u3(s,r,n),iy(s,r,n,a),n=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ha(d):(d=Yn(r)?Pc:Nn.current,d=xu(s,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&iw(s,l,n,d),oo=!1;var h=s.memoizedState;l.state=h,Cx(s,n,l,a),c=s.memoizedState,o!==n||h!==c||Kn.current||oo?(typeof u=="function"&&(ay(s,r,u,n),c=s.memoizedState),(o=oo||aw(s,r,o,n,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{l=s.stateNode,qC(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:di(s.type,o),l.props=d,m=s.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ha(c):(c=Yn(r)?Pc:Nn.current,c=xu(s,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&iw(s,l,n,c),oo=!1,h=s.memoizedState,l.state=h,Cx(s,n,l,a);var b=s.memoizedState;o!==m||h!==b||Kn.current||oo?(typeof p=="function"&&(ay(s,r,p,n),b=s.memoizedState),(d=oo||aw(s,r,d,n,h,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,b,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=b),l.props=n,l.state=b,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),n=!1)}return cy(t,s,r,n,i,a)}function cy(t,s,r,n,a,i){x3(t,s);var l=(s.flags&128)!==0;if(!n&&!l)return a&&ZN(s,r,!1),Dl(t,s,i);n=s.stateNode,CL.current=s;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&l?(s.child=vu(s,t.child,null,i),s.child=vu(s,null,o,i)):En(t,s,o,i),s.memoizedState=n.state,a&&ZN(s,r,!0),s.child}function g3(t){var s=t.stateNode;s.pendingContext?QN(t,s.pendingContext,s.pendingContext!==s.context):s.context&&QN(t,s.context,!1),Z1(t,s.containerInfo)}function hw(t,s,r,n,a){return gu(),H1(a),s.flags|=256,En(t,s,r,n),s.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function v3(t,s,r){var n=s.pendingProps,a=tr.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Bs(tr,a&1),t===null)return ry(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=n.children,t=n.fallback,i?(n=s.mode,i=s.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=fg(l,n,0,null),t=Sc(t,n,r,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=uy(r),s.memoizedState=dy,t):a2(s,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return AL(t,s,l,n,o,a,r);if(i){i=n.fallback,l=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=Eo(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Eo(o,i):(i=Sc(i,l,r,null),i.flags|=2),i.return=s,n.return=s,n.sibling=i,s.child=n,n=i,i=s.child,l=t.child.memoizedState,l=l===null?uy(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~r,s.memoizedState=dy,n}return i=t.child,t=i.sibling,n=Eo(i,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function a2(t,s){return s=fg({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function xf(t,s,r,n){return n!==null&&H1(n),vu(s,t.child,null,r),t=a2(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function AL(t,s,r,n,a,i,l){if(r)return s.flags&256?(s.flags&=-257,n=w0(Error(rt(422))),xf(t,s,l,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=n.fallback,a=s.mode,n=fg({mode:"visible",children:n.children},a,0,null),i=Sc(i,a,l,null),i.flags|=2,n.return=s,i.return=s,n.sibling=i,s.child=n,s.mode&1&&vu(s,t.child,null,l),s.child.memoizedState=uy(l),s.memoizedState=dy,i);if(!(s.mode&1))return xf(t,s,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(rt(419)),n=w0(i,n,void 0),xf(t,s,l,n)}if(o=(l&t.childLanes)!==0,Wn||o){if(n=qr,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Pl(t,a),gi(n,t,a,-1))}return u2(),n=w0(Error(rt(421))),xf(t,s,l,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=$L.bind(null,t),a._reactRetry=s,null):(t=i.treeContext,ua=So(a.nextSibling),fa=s,Ys=!0,hi=null,t!==null&&(Oa[$a++]=wl,Oa[$a++]=Sl,Oa[$a++]=Dc,wl=t.id,Sl=t.overflow,Dc=s),s=a2(s,n.children),s.flags|=4096,s)}function pw(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),ny(t.return,s,r)}function S0(t,s,r,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function j3(t,s,r){var n=s.pendingProps,a=n.revealOrder,i=n.tail;if(En(t,s,n.children,r),n=tr.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pw(t,r,s);else if(t.tag===19)pw(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Bs(tr,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&Ax(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),S0(s,!1,a,r,i);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Ax(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}S0(s,!0,r,null,i);break;case"together":S0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Zf(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Dl(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),kc|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(rt(153));if(s.child!==null){for(t=s.child,r=Eo(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Eo(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function TL(t,s,r){switch(s.tag){case 3:g3(s),gu();break;case 5:HC(s);break;case 1:Yn(s.type)&&yx(s);break;case 4:Z1(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;Bs(wx,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(Bs(tr,tr.current&1),s.flags|=128,null):r&s.child.childLanes?v3(t,s,r):(Bs(tr,tr.current&1),t=Dl(t,s,r),t!==null?t.sibling:null);Bs(tr,tr.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return j3(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Bs(tr,tr.current),n)break;return null;case 22:case 23:return s.lanes=0,f3(t,s,r)}return Dl(t,s,r)}var y3,my,b3,N3;y3=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};my=function(){};b3=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,yc(Gi.current);var i=null;switch(r){case"input":a=Fj(t,a),n=Fj(t,n),i=[];break;case"select":a=nr({},a,{value:void 0}),n=nr({},n,{value:void 0}),i=[];break;case"textarea":a=_j(t,a),n=_j(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=vx)}$j(r,n);var l;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Us("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};N3=function(t,s,r,n){r!==n&&(s.flags|=4)};function Em(t,s){if(!Ys)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function un(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function EL(t,s,r){var n=s.pendingProps;switch(q1(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(s),null;case 1:return Yn(s.type)&&jx(),un(s),null;case 3:return n=s.stateNode,ju(),Gs(Kn),Gs(Nn),X1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(pf(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,hi!==null&&(yy(hi),hi=null))),my(t,s),un(s),null;case 5:J1(s);var a=yc(Sh.current);if(r=s.type,t!==null&&s.stateNode!=null)b3(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(rt(166));return un(s),null}if(t=yc(Gi.current),pf(s)){n=s.stateNode,r=s.type;var i=s.memoizedProps;switch(n[zi]=s,n[Nh]=i,t=(s.mode&1)!==0,r){case"dialog":Us("cancel",n),Us("close",n);break;case"iframe":case"object":case"embed":Us("load",n);break;case"video":case"audio":for(a=0;a<Um.length;a++)Us(Um[a],n);break;case"source":Us("error",n);break;case"img":case"image":case"link":Us("error",n),Us("load",n);break;case"details":Us("toggle",n);break;case"input":wN(n,i),Us("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Us("invalid",n);break;case"textarea":CN(n,i),Us("invalid",n)}$j(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&hf(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&hf(n.textContent,o,t),a=["children",""+o]):mh.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Us("scroll",n)}switch(r){case"input":nf(n),SN(n,i,!0);break;case"textarea":nf(n),AN(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=vx)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QS(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[zi]=s,t[Nh]=n,y3(t,s,!1,!1),s.stateNode=t;e:{switch(l=Bj(r,n),r){case"dialog":Us("cancel",t),Us("close",t),a=n;break;case"iframe":case"object":case"embed":Us("load",t),a=n;break;case"video":case"audio":for(a=0;a<Um.length;a++)Us(Um[a],t);a=n;break;case"source":Us("error",t),a=n;break;case"img":case"image":case"link":Us("error",t),Us("load",t),a=n;break;case"details":Us("toggle",t),a=n;break;case"input":wN(t,n),a=Fj(t,n),Us("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=nr({},n,{value:void 0}),Us("invalid",t);break;case"textarea":CN(t,n),a=_j(t,n),Us("invalid",t);break;default:a=n}$j(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?XS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZS(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hh(t,c):typeof c=="number"&&hh(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Us("scroll",t):c!=null&&P1(t,i,c,l))}switch(r){case"input":nf(t),SN(t,n,!1);break;case"textarea":nf(t),AN(t);break;case"option":n.value!=null&&t.setAttribute("value",""+_o(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?nu(t,!!n.multiple,i,!1):n.defaultValue!=null&&nu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=vx)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return un(s),null;case 6:if(t&&s.stateNode!=null)N3(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(rt(166));if(r=yc(Sh.current),yc(Gi.current),pf(s)){if(n=s.stateNode,r=s.memoizedProps,n[zi]=s,(i=n.nodeValue!==r)&&(t=fa,t!==null))switch(t.tag){case 3:hf(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hf(n.nodeValue,r,(t.mode&1)!==0)}i&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[zi]=s,s.stateNode=n}return un(s),null;case 13:if(Gs(tr),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ys&&ua!==null&&s.mode&1&&!(s.flags&128))BC(),gu(),s.flags|=98560,i=!1;else if(i=pf(s),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(rt(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(rt(317));i[zi]=s}else gu(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;un(s),i=!1}else hi!==null&&(yy(hi),hi=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||tr.current&1?Or===0&&(Or=3):u2())),s.updateQueue!==null&&(s.flags|=4),un(s),null);case 4:return ju(),my(t,s),t===null&&yh(s.stateNode.containerInfo),un(s),null;case 10:return K1(s.type._context),un(s),null;case 17:return Yn(s.type)&&jx(),un(s),null;case 19:if(Gs(tr),i=s.memoizedState,i===null)return un(s),null;if(n=(s.flags&128)!==0,l=i.rendering,l===null)if(n)Em(i,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=Ax(t),l!==null){for(s.flags|=128,Em(i,!1),n=l.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)i=r,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Bs(tr,tr.current&1|2),s.child}t=t.sibling}i.tail!==null&&jr()>bu&&(s.flags|=128,n=!0,Em(i,!1),s.lanes=4194304)}else{if(!n)if(t=Ax(l),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Em(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Ys)return un(s),null}else 2*jr()-i.renderingStartTime>bu&&r!==1073741824&&(s.flags|=128,n=!0,Em(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(r=i.last,r!==null?r.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=jr(),s.sibling=null,r=tr.current,Bs(tr,n?r&1|2:r&1),s):(un(s),null);case 22:case 23:return d2(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?la&1073741824&&(un(s),s.subtreeFlags&6&&(s.flags|=8192)):un(s),null;case 24:return null;case 25:return null}throw Error(rt(156,s.tag))}function PL(t,s){switch(q1(s),s.tag){case 1:return Yn(s.type)&&jx(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ju(),Gs(Kn),Gs(Nn),X1(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return J1(s),null;case 13:if(Gs(tr),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(rt(340));gu()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Gs(tr),null;case 4:return ju(),null;case 10:return K1(s.type._context),null;case 22:case 23:return d2(),null;case 24:return null;default:return null}}var gf=!1,vn=!1,DL=typeof WeakSet=="function"?WeakSet:Set,yt=null;function tu(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dr(t,s,n)}else r.current=null}function hy(t,s,r){try{r()}catch(n){dr(t,s,n)}}var fw=!1;function IL(t,s){if(Qj=fx,t=TC(),V1(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var p;m!==r||a!==0&&m.nodeType!==3||(o=l+a),m!==i||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(p=m.firstChild)!==null;)h=m,m=p;for(;;){if(m===t)break t;if(h===r&&++d===a&&(o=l),h===i&&++u===n&&(c=l),(p=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=p}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Zj={focusedElem:t,selectionRange:r},fx=!1,yt=s;yt!==null;)if(s=yt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,yt=t;else for(;yt!==null;){s=yt;try{var b=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,x=b.memoizedState,f=s.stateNode,g=f.getSnapshotBeforeUpdate(s.elementType===s.type?j:di(s.type,j),x);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(w){dr(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,yt=t;break}yt=s.return}return b=fw,fw=!1,b}function Qm(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&hy(s,r,i)}a=a.next}while(a!==n)}}function hg(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function py(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function w3(t){var s=t.alternate;s!==null&&(t.alternate=null,w3(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[zi],delete s[Nh],delete s[ey],delete s[hL],delete s[pL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S3(t){return t.tag===5||t.tag===3||t.tag===4}function xw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fy(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=vx));else if(n!==4&&(t=t.child,t!==null))for(fy(t,s,r),t=t.sibling;t!==null;)fy(t,s,r),t=t.sibling}function xy(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xy(t,s,r),t=t.sibling;t!==null;)xy(t,s,r),t=t.sibling}var en=null,mi=!1;function Xl(t,s,r){for(r=r.child;r!==null;)C3(t,s,r),r=r.sibling}function C3(t,s,r){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(ag,r)}catch{}switch(r.tag){case 5:vn||tu(r,s);case 6:var n=en,a=mi;en=null,Xl(t,s,r),en=n,mi=a,en!==null&&(mi?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(mi?(t=en,r=r.stateNode,t.nodeType===8?g0(t.parentNode,r):t.nodeType===1&&g0(t,r),gh(t)):g0(en,r.stateNode));break;case 4:n=en,a=mi,en=r.stateNode.containerInfo,mi=!0,Xl(t,s,r),en=n,mi=a;break;case 0:case 11:case 14:case 15:if(!vn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&hy(r,s,l),a=a.next}while(a!==n)}Xl(t,s,r);break;case 1:if(!vn&&(tu(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){dr(r,s,o)}Xl(t,s,r);break;case 21:Xl(t,s,r);break;case 22:r.mode&1?(vn=(n=vn)||r.memoizedState!==null,Xl(t,s,r),vn=n):Xl(t,s,r);break;default:Xl(t,s,r)}}function gw(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new DL),s.forEach(function(n){var a=BL.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ii(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:en=o.stateNode,mi=!1;break e;case 3:en=o.stateNode.containerInfo,mi=!0;break e;case 4:en=o.stateNode.containerInfo,mi=!0;break e}o=o.return}if(en===null)throw Error(rt(160));C3(i,l,a),en=null,mi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){dr(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)A3(s,t),s=s.sibling}function A3(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ii(s,t),Ri(t),n&4){try{Qm(3,t,t.return),hg(3,t)}catch(j){dr(t,t.return,j)}try{Qm(5,t,t.return)}catch(j){dr(t,t.return,j)}}break;case 1:ii(s,t),Ri(t),n&512&&r!==null&&tu(r,r.return);break;case 5:if(ii(s,t),Ri(t),n&512&&r!==null&&tu(r,r.return),t.flags&32){var a=t.stateNode;try{hh(a,"")}catch(j){dr(t,t.return,j)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=r!==null?r.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&KS(a,i),Bj(o,l);var d=Bj(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?XS(a,m):u==="dangerouslySetInnerHTML"?ZS(a,m):u==="children"?hh(a,m):P1(a,u,m,d)}switch(o){case"input":Rj(a,i);break;case"textarea":YS(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?nu(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?nu(a,!!i.multiple,i.defaultValue,!0):nu(a,!!i.multiple,i.multiple?[]:"",!1))}a[Nh]=i}catch(j){dr(t,t.return,j)}}break;case 6:if(ii(s,t),Ri(t),n&4){if(t.stateNode===null)throw Error(rt(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(j){dr(t,t.return,j)}}break;case 3:if(ii(s,t),Ri(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gh(s.containerInfo)}catch(j){dr(t,t.return,j)}break;case 4:ii(s,t),Ri(t);break;case 13:ii(s,t),Ri(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(o2=jr())),n&4&&gw(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(vn=(d=vn)||u,ii(s,t),vn=d):ii(s,t),Ri(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(m=yt=u;yt!==null;){switch(h=yt,p=h.child,h.tag){case 0:case 11:case 14:case 15:Qm(4,h,h.return);break;case 1:tu(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){n=h,r=h.return;try{s=n,b.props=s.memoizedProps,b.state=s.memoizedState,b.componentWillUnmount()}catch(j){dr(n,r,j)}}break;case 5:tu(h,h.return);break;case 22:if(h.memoizedState!==null){jw(m);continue}}p!==null?(p.return=h,yt=p):jw(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=JS("display",l))}catch(j){dr(t,t.return,j)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){dr(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ii(s,t),Ri(t),n&4&&gw(t);break;case 21:break;default:ii(s,t),Ri(t)}}function Ri(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(S3(r)){var n=r;break e}r=r.return}throw Error(rt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(hh(a,""),n.flags&=-33);var i=xw(t);xy(t,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=xw(t);fy(t,o,l);break;default:throw Error(rt(161))}}catch(c){dr(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function kL(t,s,r){yt=t,T3(t)}function T3(t,s,r){for(var n=(t.mode&1)!==0;yt!==null;){var a=yt,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||gf;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||vn;o=gf;var d=vn;if(gf=l,(vn=c)&&!d)for(yt=a;yt!==null;)l=yt,c=l.child,l.tag===22&&l.memoizedState!==null?yw(a):c!==null?(c.return=l,yt=c):yw(a);for(;i!==null;)yt=i,T3(i),i=i.sibling;yt=a,gf=o,vn=d}vw(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,yt=i):vw(t)}}function vw(t){for(;yt!==null;){var s=yt;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:vn||hg(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!vn)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:di(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&sw(s,i,n);break;case 3:var l=s.updateQueue;if(l!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}sw(s,l,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&gh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}vn||s.flags&512&&py(s)}catch(h){dr(s,s.return,h)}}if(s===t){yt=null;break}if(r=s.sibling,r!==null){r.return=s.return,yt=r;break}yt=s.return}}function jw(t){for(;yt!==null;){var s=yt;if(s===t){yt=null;break}var r=s.sibling;if(r!==null){r.return=s.return,yt=r;break}yt=s.return}}function yw(t){for(;yt!==null;){var s=yt;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{hg(4,s)}catch(c){dr(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){dr(s,a,c)}}var i=s.return;try{py(s)}catch(c){dr(s,i,c)}break;case 5:var l=s.return;try{py(s)}catch(c){dr(s,l,c)}}}catch(c){dr(s,s.return,c)}if(s===t){yt=null;break}var o=s.sibling;if(o!==null){o.return=s.return,yt=o;break}yt=s.return}}var LL=Math.ceil,Px=Rl.ReactCurrentDispatcher,i2=Rl.ReactCurrentOwner,Va=Rl.ReactCurrentBatchConfig,cs=0,qr=null,Pr=null,rn=0,la=0,su=Go(0),Or=0,Eh=null,kc=0,pg=0,l2=0,Zm=null,Un=null,o2=0,bu=1/0,gl=null,Dx=!1,gy=null,Ao=null,vf=!1,vo=null,Ix=0,Jm=0,vy=null,Jf=-1,Xf=0;function Pn(){return cs&6?jr():Jf!==-1?Jf:Jf=jr()}function To(t){return t.mode&1?cs&2&&rn!==0?rn&-rn:xL.transition!==null?(Xf===0&&(Xf=uC()),Xf):(t=Ts,t!==0||(t=window.event,t=t===void 0?16:vC(t.type)),t):1}function gi(t,s,r,n){if(50<Jm)throw Jm=0,vy=null,Error(rt(185));Hh(t,r,n),(!(cs&2)||t!==qr)&&(t===qr&&(!(cs&2)&&(pg|=r),Or===4&&ho(t,rn)),Qn(t,n),r===1&&cs===0&&!(s.mode&1)&&(bu=jr()+500,dg&&Ko()))}function Qn(t,s){var r=t.callbackNode;x6(t,s);var n=px(t,t===qr?rn:0);if(n===0)r!==null&&PN(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&PN(r),s===1)t.tag===0?fL(bw.bind(null,t)):_C(bw.bind(null,t)),uL(function(){!(cs&6)&&Ko()}),r=null;else{switch(mC(n)){case 1:r=F1;break;case 4:r=cC;break;case 16:r=hx;break;case 536870912:r=dC;break;default:r=hx}r=R3(r,E3.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function E3(t,s){if(Jf=-1,Xf=0,cs&6)throw Error(rt(327));var r=t.callbackNode;if(cu()&&t.callbackNode!==r)return null;var n=px(t,t===qr?rn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=kx(t,n);else{s=n;var a=cs;cs|=2;var i=D3();(qr!==t||rn!==s)&&(gl=null,bu=jr()+500,wc(t,s));do try{ML();break}catch(o){P3(t,o)}while(!0);G1(),Px.current=i,cs=a,Pr!==null?s=0:(qr=null,rn=0,s=Or)}if(s!==0){if(s===2&&(a=Hj(t),a!==0&&(n=a,s=jy(t,a))),s===1)throw r=Eh,wc(t,0),ho(t,n),Qn(t,jr()),r;if(s===6)ho(t,n);else{if(a=t.current.alternate,!(n&30)&&!FL(a)&&(s=kx(t,n),s===2&&(i=Hj(t),i!==0&&(n=i,s=jy(t,i))),s===1))throw r=Eh,wc(t,0),ho(t,n),Qn(t,jr()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(rt(345));case 2:pc(t,Un,gl);break;case 3:if(ho(t,n),(n&130023424)===n&&(s=o2+500-jr(),10<s)){if(px(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Pn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Xj(pc.bind(null,t,Un,gl),s);break}pc(t,Un,gl);break;case 4:if(ho(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var l=31-xi(n);i=1<<l,l=s[l],l>a&&(a=l),n&=~i}if(n=a,n=jr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*LL(n/1960))-n,10<n){t.timeoutHandle=Xj(pc.bind(null,t,Un,gl),n);break}pc(t,Un,gl);break;case 5:pc(t,Un,gl);break;default:throw Error(rt(329))}}}return Qn(t,jr()),t.callbackNode===r?E3.bind(null,t):null}function jy(t,s){var r=Zm;return t.current.memoizedState.isDehydrated&&(wc(t,s).flags|=256),t=kx(t,s),t!==2&&(s=Un,Un=r,s!==null&&yy(s)),t}function yy(t){Un===null?Un=t:Un.push.apply(Un,t)}function FL(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ji(i(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ho(t,s){for(s&=~l2,s&=~pg,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-xi(s),n=1<<r;t[r]=-1,s&=~n}}function bw(t){if(cs&6)throw Error(rt(327));cu();var s=px(t,0);if(!(s&1))return Qn(t,jr()),null;var r=kx(t,s);if(t.tag!==0&&r===2){var n=Hj(t);n!==0&&(s=n,r=jy(t,n))}if(r===1)throw r=Eh,wc(t,0),ho(t,s),Qn(t,jr()),r;if(r===6)throw Error(rt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,pc(t,Un,gl),Qn(t,jr()),null}function c2(t,s){var r=cs;cs|=1;try{return t(s)}finally{cs=r,cs===0&&(bu=jr()+500,dg&&Ko())}}function Lc(t){vo!==null&&vo.tag===0&&!(cs&6)&&cu();var s=cs;cs|=1;var r=Va.transition,n=Ts;try{if(Va.transition=null,Ts=1,t)return t()}finally{Ts=n,Va.transition=r,cs=s,!(cs&6)&&Ko()}}function d2(){la=su.current,Gs(su)}function wc(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dL(r)),Pr!==null)for(r=Pr.return;r!==null;){var n=r;switch(q1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jx();break;case 3:ju(),Gs(Kn),Gs(Nn),X1();break;case 5:J1(n);break;case 4:ju();break;case 13:Gs(tr);break;case 19:Gs(tr);break;case 10:K1(n.type._context);break;case 22:case 23:d2()}r=r.return}if(qr=t,Pr=t=Eo(t.current,null),rn=la=s,Or=0,Eh=null,l2=pg=kc=0,Un=Zm=null,jc!==null){for(s=0;s<jc.length;s++)if(r=jc[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}jc=null}return t}function P3(t,s){do{var r=Pr;try{if(G1(),Yf.current=Ex,Tx){for(var n=rr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Tx=!1}if(Ic=0,Vr=Mr=rr=null,Ym=!1,Ch=0,i2.current=null,r===null||r.return===null){Or=1,Eh=s,Pr=null;break}e:{var i=t,l=r.return,o=r,c=s;if(s=rn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ow(l);if(p!==null){p.flags&=-257,cw(p,l,o,i,s),p.mode&1&&lw(i,d,s),s=p,c=d;var b=s.updateQueue;if(b===null){var j=new Set;j.add(c),s.updateQueue=j}else b.add(c);break e}else{if(!(s&1)){lw(i,d,s),u2();break e}c=Error(rt(426))}}else if(Ys&&o.mode&1){var x=ow(l);if(x!==null){!(x.flags&65536)&&(x.flags|=256),cw(x,l,o,i,s),H1(yu(c,o));break e}}i=c=yu(c,o),Or!==4&&(Or=2),Zm===null?Zm=[i]:Zm.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var f=m3(i,c,s);tw(i,f);break e;case 1:o=c;var g=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ao===null||!Ao.has(v)))){i.flags|=65536,s&=-s,i.lanes|=s;var w=h3(i,o,s);tw(i,w);break e}}i=i.return}while(i!==null)}k3(r)}catch(k){s=k,Pr===r&&r!==null&&(Pr=r=r.return);continue}break}while(!0)}function D3(){var t=Px.current;return Px.current=Ex,t===null?Ex:t}function u2(){(Or===0||Or===3||Or===2)&&(Or=4),qr===null||!(kc&268435455)&&!(pg&268435455)||ho(qr,rn)}function kx(t,s){var r=cs;cs|=2;var n=D3();(qr!==t||rn!==s)&&(gl=null,wc(t,s));do try{RL();break}catch(a){P3(t,a)}while(!0);if(G1(),cs=r,Px.current=n,Pr!==null)throw Error(rt(261));return qr=null,rn=0,Or}function RL(){for(;Pr!==null;)I3(Pr)}function ML(){for(;Pr!==null&&!l6();)I3(Pr)}function I3(t){var s=F3(t.alternate,t,la);t.memoizedProps=t.pendingProps,s===null?k3(t):Pr=s,i2.current=null}function k3(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=PL(r,s),r!==null){r.flags&=32767,Pr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,Pr=null;return}}else if(r=EL(r,s,la),r!==null){Pr=r;return}if(s=s.sibling,s!==null){Pr=s;return}Pr=s=t}while(s!==null);Or===0&&(Or=5)}function pc(t,s,r){var n=Ts,a=Va.transition;try{Va.transition=null,Ts=1,_L(t,s,r,n)}finally{Va.transition=a,Ts=n}return null}function _L(t,s,r,n){do cu();while(vo!==null);if(cs&6)throw Error(rt(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(rt(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(g6(t,i),t===qr&&(Pr=qr=null,rn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vf||(vf=!0,R3(hx,function(){return cu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Va.transition,Va.transition=null;var l=Ts;Ts=1;var o=cs;cs|=4,i2.current=null,IL(t,r),A3(r,t),rL(Zj),fx=!!Qj,Zj=Qj=null,t.current=r,kL(r),o6(),cs=o,Ts=l,Va.transition=i}else t.current=r;if(vf&&(vf=!1,vo=t,Ix=a),i=t.pendingLanes,i===0&&(Ao=null),u6(r.stateNode),Qn(t,jr()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Dx)throw Dx=!1,t=gy,gy=null,t;return Ix&1&&t.tag!==0&&cu(),i=t.pendingLanes,i&1?t===vy?Jm++:(Jm=0,vy=t):Jm=0,Ko(),null}function cu(){if(vo!==null){var t=mC(Ix),s=Va.transition,r=Ts;try{if(Va.transition=null,Ts=16>t?16:t,vo===null)var n=!1;else{if(t=vo,vo=null,Ix=0,cs&6)throw Error(rt(331));var a=cs;for(cs|=4,yt=t.current;yt!==null;){var i=yt,l=i.child;if(yt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(yt=d;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:Qm(8,u,i)}var m=u.child;if(m!==null)m.return=u,yt=m;else for(;yt!==null;){u=yt;var h=u.sibling,p=u.return;if(w3(u),u===d){yt=null;break}if(h!==null){h.return=p,yt=h;break}yt=p}}}var b=i.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var x=j.sibling;j.sibling=null,j=x}while(j!==null)}}yt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,yt=l;else e:for(;yt!==null;){if(i=yt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qm(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,yt=f;break e}yt=i.return}}var g=t.current;for(yt=g;yt!==null;){l=yt;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,yt=v;else e:for(l=g;yt!==null;){if(o=yt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hg(9,o)}}catch(k){dr(o,o.return,k)}if(o===l){yt=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,yt=w;break e}yt=o.return}}if(cs=a,Ko(),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(ag,t)}catch{}n=!0}return n}finally{Ts=r,Va.transition=s}}return!1}function Nw(t,s,r){s=yu(r,s),s=m3(t,s,1),t=Co(t,s,1),s=Pn(),t!==null&&(Hh(t,1,s),Qn(t,s))}function dr(t,s,r){if(t.tag===3)Nw(t,t,r);else for(;s!==null;){if(s.tag===3){Nw(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ao===null||!Ao.has(n))){t=yu(r,t),t=h3(s,t,1),s=Co(s,t,1),t=Pn(),s!==null&&(Hh(s,1,t),Qn(s,t));break}}s=s.return}}function OL(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=Pn(),t.pingedLanes|=t.suspendedLanes&r,qr===t&&(rn&r)===r&&(Or===4||Or===3&&(rn&130023424)===rn&&500>jr()-o2?wc(t,0):l2|=r),Qn(t,s)}function L3(t,s){s===0&&(t.mode&1?(s=of,of<<=1,!(of&130023424)&&(of=4194304)):s=1);var r=Pn();t=Pl(t,s),t!==null&&(Hh(t,s,r),Qn(t,r))}function $L(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),L3(t,r)}function BL(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(rt(314))}n!==null&&n.delete(s),L3(t,r)}var F3;F3=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Kn.current)Wn=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Wn=!1,TL(t,s,r);Wn=!!(t.flags&131072)}else Wn=!1,Ys&&s.flags&1048576&&OC(s,Nx,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Zf(t,s),t=s.pendingProps;var a=xu(s,Nn.current);ou(s,r),a=t2(null,s,n,t,a,r);var i=s2();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Yn(n)?(i=!0,yx(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Q1(s),a.updater=mg,s.stateNode=a,a._reactInternals=s,iy(s,n,t,r),s=cy(null,s,n,!0,i,r)):(s.tag=0,Ys&&i&&U1(s),En(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Zf(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=VL(n),t=di(n,t),a){case 0:s=oy(null,s,n,t,r);break e;case 1:s=mw(null,s,n,t,r);break e;case 11:s=dw(null,s,n,t,r);break e;case 14:s=uw(null,s,n,di(n.type,t),r);break e}throw Error(rt(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:di(n,a),oy(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:di(n,a),mw(t,s,n,a,r);case 3:e:{if(g3(s),t===null)throw Error(rt(387));n=s.pendingProps,i=s.memoizedState,a=i.element,qC(t,s),Cx(s,n,null,r);var l=s.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=yu(Error(rt(423)),s),s=hw(t,s,n,r,a);break e}else if(n!==a){a=yu(Error(rt(424)),s),s=hw(t,s,n,r,a);break e}else for(ua=So(s.stateNode.containerInfo.firstChild),fa=s,Ys=!0,hi=null,r=VC(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gu(),n===a){s=Dl(t,s,r);break e}En(t,s,n,r)}s=s.child}return s;case 5:return HC(s),t===null&&ry(s),n=s.type,a=s.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,Jj(n,a)?l=null:i!==null&&Jj(n,i)&&(s.flags|=32),x3(t,s),En(t,s,l,r),s.child;case 6:return t===null&&ry(s),null;case 13:return v3(t,s,r);case 4:return Z1(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=vu(s,null,n,r):En(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:di(n,a),dw(t,s,n,a,r);case 7:return En(t,s,s.pendingProps,r),s.child;case 8:return En(t,s,s.pendingProps.children,r),s.child;case 12:return En(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,i=s.memoizedProps,l=a.value,Bs(wx,n._currentValue),n._currentValue=l,i!==null)if(ji(i.value,l)){if(i.children===a.children&&!Kn.current){s=Dl(t,s,r);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Al(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ny(i.return,r,s),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(rt(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),ny(l,r,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}En(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,ou(s,r),a=Ha(a),n=n(a),s.flags|=1,En(t,s,n,r),s.child;case 14:return n=s.type,a=di(n,s.pendingProps),a=di(n.type,a),uw(t,s,n,a,r);case 15:return p3(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:di(n,a),Zf(t,s),s.tag=1,Yn(n)?(t=!0,yx(s)):t=!1,ou(s,r),u3(s,n,a),iy(s,n,a,r),cy(null,s,n,!0,t,r);case 19:return j3(t,s,r);case 22:return f3(t,s,r)}throw Error(rt(156,s.tag))};function R3(t,s){return oC(t,s)}function zL(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(t,s,r,n){return new zL(t,s,r,n)}function m2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VL(t){if(typeof t=="function")return m2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I1)return 11;if(t===k1)return 14}return 2}function Eo(t,s){var r=t.alternate;return r===null?(r=Ba(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ex(t,s,r,n,a,i){var l=2;if(n=t,typeof t=="function")m2(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Wd:return Sc(r.children,a,i,s);case D1:l=8,a|=8;break;case Dj:return t=Ba(12,r,s,a|2),t.elementType=Dj,t.lanes=i,t;case Ij:return t=Ba(13,r,s,a),t.elementType=Ij,t.lanes=i,t;case kj:return t=Ba(19,r,s,a),t.elementType=kj,t.lanes=i,t;case HS:return fg(r,a,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case US:l=10;break e;case qS:l=9;break e;case I1:l=11;break e;case k1:l=14;break e;case lo:l=16,n=null;break e}throw Error(rt(130,t==null?t:typeof t,""))}return s=Ba(l,r,s,a),s.elementType=t,s.type=n,s.lanes=i,s}function Sc(t,s,r,n){return t=Ba(7,t,n,s),t.lanes=r,t}function fg(t,s,r,n){return t=Ba(22,t,n,s),t.elementType=HS,t.lanes=r,t.stateNode={isHidden:!1},t}function C0(t,s,r){return t=Ba(6,t,null,s),t.lanes=r,t}function A0(t,s,r){return s=Ba(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function UL(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function h2(t,s,r,n,a,i,l,o,c){return t=new UL(t,s,r,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Ba(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q1(i),t}function qL(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hd,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function M3(t){if(!t)return Oo;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(rt(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(rt(171))}if(t.tag===1){var r=t.type;if(Yn(r))return MC(t,r,s)}return s}function _3(t,s,r,n,a,i,l,o,c){return t=h2(r,n,!0,t,a,i,l,o,c),t.context=M3(null),r=t.current,n=Pn(),a=To(r),i=Al(n,a),i.callback=s??null,Co(r,i,a),t.current.lanes=a,Hh(t,a,n),Qn(t,n),t}function xg(t,s,r,n){var a=s.current,i=Pn(),l=To(a);return r=M3(r),s.context===null?s.context=r:s.pendingContext=r,s=Al(i,l),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=Co(a,s,l),t!==null&&(gi(t,a,l,i),Kf(t,a,l)),l}function Lx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ww(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function p2(t,s){ww(t,s),(t=t.alternate)&&ww(t,s)}function HL(){return null}var O3=typeof reportError=="function"?reportError:function(t){console.error(t)};function f2(t){this._internalRoot=t}gg.prototype.render=f2.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(rt(409));xg(t,s,null,null)};gg.prototype.unmount=f2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Lc(function(){xg(null,t,null,null)}),s[El]=null}};function gg(t){this._internalRoot=t}gg.prototype.unstable_scheduleHydration=function(t){if(t){var s=fC();t={blockedOn:null,target:t,priority:s};for(var r=0;r<mo.length&&s!==0&&s<mo[r].priority;r++);mo.splice(r,0,t),r===0&&gC(t)}};function x2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sw(){}function WL(t,s,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Lx(l);i.call(d)}}var l=_3(s,n,t,0,null,!1,!1,"",Sw);return t._reactRootContainer=l,t[El]=l.current,yh(t.nodeType===8?t.parentNode:t),Lc(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Lx(c);o.call(d)}}var c=h2(t,0,!1,null,null,!1,!1,"",Sw);return t._reactRootContainer=c,t[El]=c.current,yh(t.nodeType===8?t.parentNode:t),Lc(function(){xg(s,c,r,n)}),c}function jg(t,s,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Lx(l);o.call(c)}}xg(s,l,t,a)}else l=WL(r,s,t,a,n);return Lx(l)}hC=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Vm(s.pendingLanes);r!==0&&(R1(s,r|1),Qn(s,jr()),!(cs&6)&&(bu=jr()+500,Ko()))}break;case 13:Lc(function(){var n=Pl(t,1);if(n!==null){var a=Pn();gi(n,t,1,a)}}),p2(t,1)}};M1=function(t){if(t.tag===13){var s=Pl(t,134217728);if(s!==null){var r=Pn();gi(s,t,134217728,r)}p2(t,134217728)}};pC=function(t){if(t.tag===13){var s=To(t),r=Pl(t,s);if(r!==null){var n=Pn();gi(r,t,s,n)}p2(t,s)}};fC=function(){return Ts};xC=function(t,s){var r=Ts;try{return Ts=t,s()}finally{Ts=r}};Vj=function(t,s,r){switch(s){case"input":if(Rj(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=cg(n);if(!a)throw Error(rt(90));GS(n),Rj(n,a)}}}break;case"textarea":YS(t,r);break;case"select":s=r.value,s!=null&&nu(t,!!r.multiple,s,!1)}};sC=c2;rC=Lc;var GL={usingClientEntryPoint:!1,Events:[Gh,Qd,cg,eC,tC,c2]},Pm={findFiberByHostInstance:vc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KL={bundleType:Pm.bundleType,version:Pm.version,rendererPackageName:Pm.rendererPackageName,rendererConfig:Pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iC(t),t===null?null:t.stateNode},findFiberByHostInstance:Pm.findFiberByHostInstance||HL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jf.isDisabled&&jf.supportsFiber)try{ag=jf.inject(KL),Wi=jf}catch{}}wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GL;wa.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x2(s))throw Error(rt(200));return qL(t,s,null,r)};wa.createRoot=function(t,s){if(!x2(t))throw Error(rt(299));var r=!1,n="",a=O3;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=h2(t,1,!1,null,null,r,!1,n,a),t[El]=s.current,yh(t.nodeType===8?t.parentNode:t),new f2(s)};wa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(rt(188)):(t=Object.keys(t).join(","),Error(rt(268,t)));return t=iC(s),t=t===null?null:t.stateNode,t};wa.flushSync=function(t){return Lc(t)};wa.hydrate=function(t,s,r){if(!vg(s))throw Error(rt(200));return jg(null,t,s,!0,r)};wa.hydrateRoot=function(t,s,r){if(!x2(t))throw Error(rt(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=O3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),s=_3(s,null,t,1,r??null,a,!1,i,l),t[El]=s.current,yh(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new gg(s)};wa.render=function(t,s,r){if(!vg(s))throw Error(rt(200));return jg(null,t,s,!1,r)};wa.unmountComponentAtNode=function(t){if(!vg(t))throw Error(rt(40));return t._reactRootContainer?(Lc(function(){jg(null,null,t,!1,function(){t._reactRootContainer=null,t[El]=null})}),!0):!1};wa.unstable_batchedUpdates=c2;wa.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!vg(r))throw Error(rt(200));if(t==null||t._reactInternals===void 0)throw Error(rt(38));return jg(t,s,r,!1,n)};wa.version="18.3.1-next-f1338f8080-20240426";function $3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($3)}catch(t){console.error(t)}}$3(),$S.exports=wa;var Ml=$S.exports;const g2=Ho(Ml);var Cw=Ml;Ej.createRoot=Cw.createRoot,Ej.hydrateRoot=Cw.hydrateRoot;var YL=typeof Element<"u",QL=typeof Map=="function",ZL=typeof Set=="function",JL=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function tx(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var r,n,a;if(Array.isArray(t)){if(r=t.length,r!=s.length)return!1;for(n=r;n--!==0;)if(!tx(t[n],s[n]))return!1;return!0}var i;if(QL&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!s.has(n.value[0]))return!1;for(i=t.entries();!(n=i.next()).done;)if(!tx(n.value[1],s.get(n.value[0])))return!1;return!0}if(ZL&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!s.has(n.value[0]))return!1;return!0}if(JL&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if(r=t.length,r!=s.length)return!1;for(n=r;n--!==0;)if(t[n]!==s[n])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof s.valueOf=="function")return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof s.toString=="function")return t.toString()===s.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[n]))return!1;if(YL&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&t.$$typeof)&&!tx(t[a[n]],s[a[n]]))return!1;return!0}return t!==t&&s!==s}var XL=function(s,r){try{return tx(s,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const eF=Ho(XL);var tF=function(t,s,r,n,a,i,l,o){if(!t){var c;if(s===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,i,l,o],u=0;c=new Error(s.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},sF=tF;const Aw=Ho(sF);var rF=function(s,r,n,a){var i=n?n.call(a,s,r):void 0;if(i!==void 0)return!!i;if(s===r)return!0;if(typeof s!="object"||!s||typeof r!="object"||!r)return!1;var l=Object.keys(s),o=Object.keys(r);if(l.length!==o.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),d=0;d<l.length;d++){var u=l[d];if(!c(u))return!1;var m=s[u],h=r[u];if(i=n?n.call(a,m,h,u):void 0,i===!1||i===void 0&&m!==h)return!1}return!0};const nF=Ho(rF);var B3=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(B3||{}),T0={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Tw=Object.values(B3),v2={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},aF=Object.entries(v2).reduce((t,[s,r])=>(t[r]=s,t),{}),pi="data-rh",du={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},uu=(t,s)=>{for(let r=t.length-1;r>=0;r-=1){const n=t[r];if(Object.prototype.hasOwnProperty.call(n,s))return n[s]}return null},iF=t=>{let s=uu(t,"title");const r=uu(t,du.TITLE_TEMPLATE);if(Array.isArray(s)&&(s=s.join("")),r&&s)return r.replace(/%s/g,()=>s);const n=uu(t,du.DEFAULT_TITLE);return s||n||void 0},lF=t=>uu(t,du.ON_CHANGE_CLIENT_STATE)||(()=>{}),E0=(t,s)=>s.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,n)=>({...r,...n}),{}),oF=(t,s)=>s.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const a=Object.keys(n);for(let i=0;i<a.length;i+=1){const o=a[i].toLowerCase();if(t.indexOf(o)!==-1&&n[o])return r.concat(n)}}return r},[]),cF=t=>console&&typeof console.warn=="function"&&console.warn(t),Dm=(t,s,r)=>{const n={};return r.filter(a=>Array.isArray(a[t])?!0:(typeof a[t]<"u"&&cF(`Helmet: ${t} should be of type "Array". Instead found type "${typeof a[t]}"`),!1)).map(a=>a[t]).reverse().reduce((a,i)=>{const l={};i.filter(c=>{let d;const u=Object.keys(c);for(let h=0;h<u.length;h+=1){const p=u[h],b=p.toLowerCase();s.indexOf(b)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(b==="rel"&&c[b].toLowerCase()==="stylesheet")&&(d=b),s.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(d=p)}if(!d||!c[d])return!1;const m=c[d].toLowerCase();return n[d]||(n[d]={}),l[d]||(l[d]={}),n[d][m]?!1:(l[d][m]=!0,!0)}).reverse().forEach(c=>a.push(c));const o=Object.keys(l);for(let c=0;c<o.length;c+=1){const d=o[c],u={...n[d],...l[d]};n[d]=u}return a},[]).reverse()},dF=(t,s)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][s])return!0}return!1},uF=t=>({baseTag:oF(["href"],t),bodyAttributes:E0("bodyAttributes",t),defer:uu(t,du.DEFER),encode:uu(t,du.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:E0("htmlAttributes",t),linkTags:Dm("link",["rel","href"],t),metaTags:Dm("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Dm("noscript",["innerHTML"],t),onChangeClientState:lF(t),scriptTags:Dm("script",["src","innerHTML"],t),styleTags:Dm("style",["cssText"],t),title:iF(t),titleAttributes:E0("titleAttributes",t),prioritizeSeoTags:dF(t,du.PRIORITIZE_SEO_TAGS)}),z3=t=>Array.isArray(t)?t.join(""):t,mF=(t,s)=>{const r=Object.keys(t);for(let n=0;n<r.length;n+=1)if(s[r[n]]&&s[r[n]].includes(t[r[n]]))return!0;return!1},P0=(t,s)=>Array.isArray(t)?t.reduce((r,n)=>(mF(n,s)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:t,priority:[]},Ew=(t,s)=>({...t,[s]:void 0}),hF=["noscript","script","style"],by=(t,s=!0)=>s===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),V3=t=>Object.keys(t).reduce((s,r)=>{const n=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return s?`${s} ${n}`:n},""),pF=(t,s,r,n)=>{const a=V3(r),i=z3(s);return a?`<${t} ${pi}="true" ${a}>${by(i,n)}</${t}>`:`<${t} ${pi}="true">${by(i,n)}</${t}>`},fF=(t,s,r=!0)=>s.reduce((n,a)=>{const i=a,l=Object.keys(i).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const m=typeof i[u]>"u"?u:`${u}="${by(i[u],r)}"`;return d?`${d} ${m}`:m},""),o=i.innerHTML||i.cssText||"",c=hF.indexOf(t)===-1;return`${n}<${t} ${pi}="true" ${l}${c?"/>":`>${o}</${t}>`}`},""),U3=(t,s={})=>Object.keys(t).reduce((r,n)=>{const a=v2[n];return r[a||n]=t[n],r},s),xF=(t,s,r)=>{const n={key:s,[pi]:!0},a=U3(r,n);return[vt.createElement("title",a,s)]},sx=(t,s)=>s.map((r,n)=>{const a={key:n,[pi]:!0};return Object.keys(r).forEach(i=>{const o=v2[i]||i;if(o==="innerHTML"||o==="cssText"){const c=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:c}}else a[o]=r[i]}),vt.createElement(t,a)}),Ma=(t,s,r=!0)=>{switch(t){case"title":return{toComponent:()=>xF(t,s.title,s.titleAttributes),toString:()=>pF(t,s.title,s.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>U3(s),toString:()=>V3(s)};default:return{toComponent:()=>sx(t,s),toString:()=>fF(t,s,r)}}},gF=({metaTags:t,linkTags:s,scriptTags:r,encode:n})=>{const a=P0(t,T0.meta),i=P0(s,T0.link),l=P0(r,T0.script);return{priorityMethods:{toComponent:()=>[...sx("meta",a.priority),...sx("link",i.priority),...sx("script",l.priority)],toString:()=>`${Ma("meta",a.priority,n)} ${Ma("link",i.priority,n)} ${Ma("script",l.priority,n)}`},metaTags:a.default,linkTags:i.default,scriptTags:l.default}},vF=t=>{const{baseTag:s,bodyAttributes:r,encode:n=!0,htmlAttributes:a,noscriptTags:i,styleTags:l,title:o="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:u,metaTags:m,scriptTags:h}=t,p={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:p,linkTags:u,metaTags:m,scriptTags:h}=gF(t)),{priority:p,base:Ma("base",s,n),bodyAttributes:Ma("bodyAttributes",r,n),htmlAttributes:Ma("htmlAttributes",a,n),link:Ma("link",u,n),meta:Ma("meta",m,n),noscript:Ma("noscript",i,n),script:Ma("script",h,n),style:Ma("style",l,n),title:Ma("title",{title:o,titleAttributes:c},n)}},Ny=vF,yf=[],q3=!!(typeof window<"u"&&window.document&&window.document.createElement),wy=class{constructor(t,s){ai(this,"instances",[]);ai(this,"canUseDOM",q3);ai(this,"context");ai(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?yf:this.instances,add:t=>{(this.canUseDOM?yf:this.instances).push(t)},remove:t=>{const s=(this.canUseDOM?yf:this.instances).indexOf(t);(this.canUseDOM?yf:this.instances).splice(s,1)}}});this.context=t,this.canUseDOM=s||!1,s||(t.helmet=Ny({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},jF={},H3=vt.createContext(jF),Nc,W3=(Nc=class extends y.Component{constructor(r){super(r);ai(this,"helmetData");this.helmetData=new wy(this.props.context||{},Nc.canUseDOM)}render(){return vt.createElement(H3.Provider,{value:this.helmetData.value},this.props.children)}},ai(Nc,"canUseDOM",q3),Nc),kd=(t,s)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${t}[${pi}]`),a=[].slice.call(n),i=[];let l;return s&&s.length&&s.forEach(o=>{const c=document.createElement(t);for(const d in o)if(Object.prototype.hasOwnProperty.call(o,d))if(d==="innerHTML")c.innerHTML=o.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=o.cssText:c.appendChild(document.createTextNode(o.cssText));else{const u=d,m=typeof o[u]>"u"?"":o[u];c.setAttribute(d,m)}c.setAttribute(pi,"true"),a.some((d,u)=>(l=u,c.isEqualNode(d)))?a.splice(l,1):i.push(c)}),a.forEach(o=>{var c;return(c=o.parentNode)==null?void 0:c.removeChild(o)}),i.forEach(o=>r.appendChild(o)),{oldTags:a,newTags:i}},Sy=(t,s)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const n=r.getAttribute(pi),a=n?n.split(","):[],i=[...a],l=Object.keys(s);for(const o of l){const c=s[o]||"";r.getAttribute(o)!==c&&r.setAttribute(o,c),a.indexOf(o)===-1&&a.push(o);const d=i.indexOf(o);d!==-1&&i.splice(d,1)}for(let o=i.length-1;o>=0;o-=1)r.removeAttribute(i[o]);a.length===i.length?r.removeAttribute(pi):r.getAttribute(pi)!==l.join(",")&&r.setAttribute(pi,l.join(","))},yF=(t,s)=>{typeof t<"u"&&document.title!==t&&(document.title=z3(t)),Sy("title",s)},Pw=(t,s)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:a,linkTags:i,metaTags:l,noscriptTags:o,onChangeClientState:c,scriptTags:d,styleTags:u,title:m,titleAttributes:h}=t;Sy("body",n),Sy("html",a),yF(m,h);const p={baseTag:kd("base",r),linkTags:kd("link",i),metaTags:kd("meta",l),noscriptTags:kd("noscript",o),scriptTags:kd("script",d),styleTags:kd("style",u)},b={},j={};Object.keys(p).forEach(x=>{const{newTags:f,oldTags:g}=p[x];f.length&&(b[x]=f),g.length&&(j[x]=p[x].oldTags)}),s&&s(),c(t,b,j)},Im=null,bF=t=>{Im&&cancelAnimationFrame(Im),t.defer?Im=requestAnimationFrame(()=>{Pw(t,()=>{Im=null})}):(Pw(t),Im=null)},NF=bF,Dw=class extends y.Component{constructor(){super(...arguments);ai(this,"rendered",!1)}shouldComponentUpdate(s){return!nF(s,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:s}=this.props.context;s.remove(this),this.emitChange()}emitChange(){const{helmetInstances:s,setHelmet:r}=this.props.context;let n=null;const a=uF(s.get().map(i=>{const l={...i.props};return delete l.context,l}));W3.canUseDOM?NF(a):Ny&&(n=Ny(a)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:s}=this.props.context;s.add(this),this.emitChange()}render(){return this.init(),null}},Tj,wF=(Tj=class extends y.Component{shouldComponentUpdate(t){return!eF(Ew(this.props,"helmetData"),Ew(t,"helmetData"))}mapNestedChildrenToProps(t,s){if(!s)return null;switch(t.type){case"script":case"noscript":return{innerHTML:s};case"style":return{cssText:s};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,s,r,n){return{...s,[t.type]:[...s[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,s,r,n){switch(t.type){case"title":return{...s,[t.type]:n,titleAttributes:{...r}};case"body":return{...s,bodyAttributes:{...r}};case"html":return{...s,htmlAttributes:{...r}};default:return{...s,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,s){let r={...s};return Object.keys(t).forEach(n=>{r={...r,[n]:t[n]}}),r}warnOnInvalidChildren(t,s){return Aw(Tw.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Tw.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Aw(!s||typeof s=="string"||Array.isArray(s)&&!s.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,s){let r={};return vt.Children.forEach(t,n=>{if(!n||!n.props)return;const{children:a,...i}=n.props,l=Object.keys(i).reduce((c,d)=>(c[aF[d]||d]=i[d],c),{});let{type:o}=n;switch(typeof o=="symbol"?o=o.toString():this.warnOnInvalidChildren(n,a),o){case"Symbol(react.fragment)":s=this.mapChildrenToProps(a,s);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,l,a);break;default:s=this.mapObjectTypeChildren(n,s,l,a);break}}),this.mapArrayTypeChildrenToProps(r,s)}render(){const{children:t,...s}=this.props;let r={...s},{helmetData:n}=s;if(t&&(r=this.mapChildrenToProps(t,r)),n&&!(n instanceof wy)){const a=n;n=new wy(a.context,!0),delete r.helmetData}return n?vt.createElement(Dw,{...r,context:n.value}):vt.createElement(H3.Consumer,null,a=>vt.createElement(Dw,{...r,context:a}))}},ai(Tj,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Tj);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ph.apply(this,arguments)}var jo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jo||(jo={}));const Iw="popstate";function SF(t){t===void 0&&(t={});function s(n,a){let{pathname:i,search:l,hash:o}=n.location;return Cy("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Fx(a)}return AF(s,r,null,t)}function wr(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function G3(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function CF(){return Math.random().toString(36).substr(2,8)}function kw(t,s){return{usr:t.state,key:t.key,idx:s}}function Cy(t,s,r,n){return r===void 0&&(r=null),Ph({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?ku(s):s,{state:r,key:s&&s.key||n||CF()})}function Fx(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function ku(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function AF(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=jo.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ph({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){o=jo.Pop;let x=u(),f=x==null?null:x-d;d=x,c&&c({action:o,location:j.location,delta:f})}function h(x,f){o=jo.Push;let g=Cy(j.location,x,f);d=u()+1;let v=kw(g,d),w=j.createHref(g);try{l.pushState(v,"",w)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(w)}i&&c&&c({action:o,location:j.location,delta:1})}function p(x,f){o=jo.Replace;let g=Cy(j.location,x,f);d=u();let v=kw(g,d),w=j.createHref(g);l.replaceState(v,"",w),i&&c&&c({action:o,location:j.location,delta:0})}function b(x){let f=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof x=="string"?x:Fx(x);return g=g.replace(/ $/,"%20"),wr(f,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,f)}let j={get action(){return o},get location(){return t(a,l)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Iw,m),c=x,()=>{a.removeEventListener(Iw,m),c=null}},createHref(x){return s(a,x)},createURL:b,encodeLocation(x){let f=b(x);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:p,go(x){return l.go(x)}};return j}var Lw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lw||(Lw={}));function TF(t,s,r){return r===void 0&&(r="/"),EF(t,s,r)}function EF(t,s,r,n){let a=typeof s=="string"?ku(s):s,i=j2(a.pathname||"/",r);if(i==null)return null;let l=K3(t);PF(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=zF(i);o=OF(l[c],d)}return o}function K3(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(wr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Po([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(wr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),K3(i.children,s,u,d)),!(i.path==null&&!i.index)&&s.push({path:d,score:MF(d,i.index),routesMeta:u})};return t.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of Y3(i.path))a(i,l,c)}),s}function Y3(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=Y3(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function PF(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:_F(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const DF=/^:[\w-]+$/,IF=3,kF=2,LF=1,FF=10,RF=-2,Fw=t=>t==="*";function MF(t,s){let r=t.split("/"),n=r.length;return r.some(Fw)&&(n+=RF),s&&(n+=kF),r.filter(a=>!Fw(a)).reduce((a,i)=>a+(DF.test(i)?IF:i===""?LF:FF),n)}function _F(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function OF(t,s,r){let{routesMeta:n}=t,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=i==="/"?s:s.slice(i.length)||"/",m=$F({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:Po([i,m.pathname]),pathnameBase:HF(Po([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Po([i,m.pathnameBase]))}return l}function $F(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=BF(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let j=o[m]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const b=o[m];return p&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:t}}function BF(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),G3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function zF(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return G3(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function j2(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function VF(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?ku(t):t;return{pathname:r?r.startsWith("/")?r:UF(r,s):s,search:WF(n),hash:GF(a)}}function UF(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function D0(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qF(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function y2(t,s){let r=qF(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function b2(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=ku(t):(a=Ph({},t),wr(!a.pathname||!a.pathname.includes("?"),D0("?","pathname","search",a)),wr(!a.pathname||!a.pathname.includes("#"),D0("#","pathname","hash",a)),wr(!a.search||!a.search.includes("#"),D0("#","search","hash",a)));let i=t===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let m=s.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?s[m]:"/"}let c=VF(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Po=t=>t.join("/").replace(/\/\/+/g,"/"),HF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Q3=["post","put","patch","delete"];new Set(Q3);const YF=["get",...Q3];new Set(YF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dh.apply(this,arguments)}const N2=y.createContext(null),QF=y.createContext(null),Yo=y.createContext(null),yg=y.createContext(null),_l=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Z3=y.createContext(null);function ZF(t,s){let{relative:r}=s===void 0?{}:s;Lu()||wr(!1);let{basename:n,navigator:a}=y.useContext(Yo),{hash:i,pathname:l,search:o}=X3(t,{relative:r}),c=l;return n!=="/"&&(c=l==="/"?n:Po([n,l])),a.createHref({pathname:c,search:o,hash:i})}function Lu(){return y.useContext(yg)!=null}function Qo(){return Lu()||wr(!1),y.useContext(yg).location}function J3(t){y.useContext(Yo).static||y.useLayoutEffect(t)}function Zn(){let{isDataRoute:t}=y.useContext(_l);return t?dR():JF()}function JF(){Lu()||wr(!1);let t=y.useContext(N2),{basename:s,future:r,navigator:n}=y.useContext(Yo),{matches:a}=y.useContext(_l),{pathname:i}=Qo(),l=JSON.stringify(y2(a,r.v7_relativeSplatPath)),o=y.useRef(!1);return J3(()=>{o.current=!0}),y.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let m=b2(d,JSON.parse(l),i,u.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:Po([s,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[s,n,l,i,t])}function Yh(){let{matches:t}=y.useContext(_l),s=t[t.length-1];return s?s.params:{}}function X3(t,s){let{relative:r}=s===void 0?{}:s,{future:n}=y.useContext(Yo),{matches:a}=y.useContext(_l),{pathname:i}=Qo(),l=JSON.stringify(y2(a,n.v7_relativeSplatPath));return y.useMemo(()=>b2(t,JSON.parse(l),i,r==="path"),[t,l,i,r])}function XF(t,s){return eR(t,s)}function eR(t,s,r,n){Lu()||wr(!1);let{navigator:a}=y.useContext(Yo),{matches:i}=y.useContext(_l),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Qo(),u;if(s){var m;let x=typeof s=="string"?ku(s):s;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||wr(!1),u=x}else u=d;let h=u.pathname||"/",p=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=TF(t,{pathname:p}),j=aR(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Po([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Po([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return s&&j?y.createElement(yg.Provider,{value:{location:Dh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:jo.Pop}},j):j}function tR(){let t=cR(),s=KF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},s),r?y.createElement("pre",{style:a},r):null,null)}const sR=y.createElement(tR,null);class rR extends y.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?y.createElement(_l.Provider,{value:this.props.routeContext},y.createElement(Z3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nR(t){let{routeContext:s,match:r,children:n}=t,a=y.useContext(N2);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(_l.Provider,{value:s},n)}function aR(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(a=r)==null?void 0:a.errors;if(o!=null){let u=l.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||wr(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:p}=r,b=m.route.loader&&h[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,h)=>{let p,b=!1,j=null,x=null;r&&(p=o&&m.route.id?o[m.route.id]:void 0,j=m.route.errorElement||sR,c&&(d<0&&h===0?(uR("route-fallback"),b=!0,x=null):d===h&&(b=!0,x=m.route.hydrateFallbackElement||null)));let f=s.concat(l.slice(0,h+1)),g=()=>{let v;return p?v=j:b?v=x:m.route.Component?v=y.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=u,y.createElement(nR,{match:m,routeContext:{outlet:u,matches:f,isDataRoute:r!=null},children:v})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?y.createElement(rR,{location:r.location,revalidation:r.revalidation,component:j,error:p,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var eA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eA||{}),tA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tA||{});function iR(t){let s=y.useContext(N2);return s||wr(!1),s}function lR(t){let s=y.useContext(QF);return s||wr(!1),s}function oR(t){let s=y.useContext(_l);return s||wr(!1),s}function sA(t){let s=oR(),r=s.matches[s.matches.length-1];return r.route.id||wr(!1),r.route.id}function cR(){var t;let s=y.useContext(Z3),r=lR(),n=sA();return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function dR(){let{router:t}=iR(eA.UseNavigateStable),s=sA(tA.UseNavigateStable),r=y.useRef(!1);return J3(()=>{r.current=!0}),y.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Dh({fromRouteId:s},i)))},[t,s])}const Rw={};function uR(t,s,r){Rw[t]||(Rw[t]=!0)}function mR(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hR(t){let{to:s,replace:r,state:n,relative:a}=t;Lu()||wr(!1);let{future:i,static:l}=y.useContext(Yo),{matches:o}=y.useContext(_l),{pathname:c}=Qo(),d=Zn(),u=b2(s,y2(o,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return y.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function ot(t){wr(!1)}function pR(t){let{basename:s="/",children:r=null,location:n,navigationType:a=jo.Pop,navigator:i,static:l=!1,future:o}=t;Lu()&&wr(!1);let c=s.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:i,static:l,future:Dh({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=ku(n));let{pathname:u="/",search:m="",hash:h="",state:p=null,key:b="default"}=n,j=y.useMemo(()=>{let x=j2(u,c);return x==null?null:{location:{pathname:x,search:m,hash:h,state:p,key:b},navigationType:a}},[c,u,m,h,p,b,a]);return j==null?null:y.createElement(Yo.Provider,{value:d},y.createElement(yg.Provider,{children:r,value:j}))}function kr(t){let{children:s,location:r}=t;return XF(Ay(s),r)}new Promise(()=>{});function Ay(t,s){s===void 0&&(s=[]);let r=[];return y.Children.forEach(t,(n,a)=>{if(!y.isValidElement(n))return;let i=[...s,a];if(n.type===y.Fragment){r.push.apply(r,Ay(n.props.children,i));return}n.type!==ot&&wr(!1),!n.props.index||!n.props.children||wr(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ay(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ty.apply(this,arguments)}function fR(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function xR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gR(t,s){return t.button===0&&(!s||s==="_self")&&!xR(t)}function Ey(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let n=t[r];return s.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function vR(t,s){let r=Ey(t);return s&&s.forEach((n,a)=>{r.has(a)||s.getAll(a).forEach(i=>{r.append(a,i)})}),r}const jR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yR="6";try{window.__reactRouterVersion=yR}catch{}const bR="startTransition",Mw=ng[bR];function NR(t){let{basename:s,children:r,future:n,window:a}=t,i=y.useRef();i.current==null&&(i.current=SF({window:a,v5Compat:!0}));let l=i.current,[o,c]=y.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},u=y.useCallback(m=>{d&&Mw?Mw(()=>c(m)):c(m)},[c,d]);return y.useLayoutEffect(()=>l.listen(u),[l,u]),y.useEffect(()=>mR(n),[n]),y.createElement(pR,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:l,future:n})}const wR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dr=y.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=s,h=fR(s,jR),{basename:p}=y.useContext(Yo),b,j=!1;if(typeof d=="string"&&SR.test(d)&&(b=d,wR))try{let v=new URL(window.location.href),w=d.startsWith("//")?new URL(v.protocol+d):new URL(d),k=j2(w.pathname,p);w.origin===v.origin&&k!=null?d=k+w.search+w.hash:j=!0}catch{}let x=ZF(d,{relative:a}),f=CR(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function g(v){n&&n(v),v.defaultPrevented||f(v)}return y.createElement("a",Ty({},h,{href:b||x,onClick:j||i?n:g,ref:r,target:c}))});var _w;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_w||(_w={}));var Ow;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));function CR(t,s){let{target:r,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=s===void 0?{}:s,c=Zn(),d=Qo(),u=X3(t,{relative:l});return y.useCallback(m=>{if(gR(m,r)){m.preventDefault();let h=n!==void 0?n:Fx(d)===Fx(u);c(t,{replace:h,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,n,a,r,t,i,l,o])}function AR(t){let s=y.useRef(Ey(t)),r=y.useRef(!1),n=Qo(),a=y.useMemo(()=>vR(n.search,r.current?null:s.current),[n.search]),i=Zn(),l=y.useCallback((o,c)=>{const d=Ey(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function Ns(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function $w(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function rA(...t){return s=>{let r=!1;const n=t.map(a=>{const i=$w(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():$w(t[a],null)}}}}function Wr(...t){return y.useCallback(rA(...t),t)}function TR(t,s){const r=y.createContext(s),n=i=>{const{children:l,...o}=i,c=y.useMemo(()=>o,Object.values(o));return e.jsx(r.Provider,{value:c,children:l})};n.displayName=t+"Provider";function a(i){const l=y.useContext(r);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function Ol(t,s=[]){let r=[];function n(i,l){const o=y.createContext(l),c=r.length;r=[...r,l];const d=m=>{var f;const{scope:h,children:p,...b}=m,j=((f=h==null?void 0:h[t])==null?void 0:f[c])||o,x=y.useMemo(()=>b,Object.values(b));return e.jsx(j.Provider,{value:x,children:p})};d.displayName=i+"Provider";function u(m,h){var j;const p=((j=h==null?void 0:h[t])==null?void 0:j[c])||o,b=y.useContext(p);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(l=>y.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,ER(a,...s)]}function ER(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return y.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}function Fc(t){const s=DR(t),r=y.forwardRef((n,a)=>{const{children:i,...l}=n,o=y.Children.toArray(i),c=o.find(kR);if(c){const d=c.props.children,u=o.map(m=>m===c?y.Children.count(d)>1?y.Children.only(null):y.isValidElement(d)?d.props.children:null:m);return e.jsx(s,{...l,ref:a,children:y.isValidElement(d)?y.cloneElement(d,void 0,u):null})}return e.jsx(s,{...l,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var PR=Fc("Slot");function DR(t){const s=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const l=FR(a),o=LR(i,a.props);return a.type!==y.Fragment&&(o.ref=n?rA(n,l):l),y.cloneElement(a,o)}return y.Children.count(a)>1?y.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var IR=Symbol("radix.slottable");function kR(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IR}function LR(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function FR(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function RR(t){const s=t+"CollectionProvider",[r,n]=Ol(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=j=>{const{scope:x,children:f}=j,g=vt.useRef(null),v=vt.useRef(new Map).current;return e.jsx(a,{scope:x,itemMap:v,collectionRef:g,children:f})};l.displayName=s;const o=t+"CollectionSlot",c=Fc(o),d=vt.forwardRef((j,x)=>{const{scope:f,children:g}=j,v=i(o,f),w=Wr(x,v.collectionRef);return e.jsx(c,{ref:w,children:g})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=Fc(u),p=vt.forwardRef((j,x)=>{const{scope:f,children:g,...v}=j,w=vt.useRef(null),k=Wr(x,w),T=i(u,f);return vt.useEffect(()=>(T.itemMap.set(w,{ref:w,...v}),()=>void T.itemMap.delete(w))),e.jsx(h,{[m]:"",ref:k,children:g})});p.displayName=u;function b(j){const x=i(t+"CollectionConsumer",j);return vt.useCallback(()=>{const g=x.collectionRef.current;if(!g)return[];const v=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((T,S)=>v.indexOf(T.ref.current)-v.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:d,ItemSlot:p},b,n]}var MR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ys=MR.reduce((t,s)=>{const r=Fc(`Primitive.${s}`),n=y.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function nA(t,s){t&&Ml.flushSync(()=>t.dispatchEvent(s))}function Qi(t){const s=y.useRef(t);return y.useEffect(()=>{s.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function _R(t,s=globalThis==null?void 0:globalThis.document){const r=Qi(t);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var OR="DismissableLayer",Py="dismissableLayer.update",$R="dismissableLayer.pointerDownOutside",BR="dismissableLayer.focusOutside",Bw,aA=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),w2=y.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=y.useContext(aA),[u,m]=y.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),b=Wr(s,S=>m(S)),j=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),f=j.indexOf(x),g=u?j.indexOf(u):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,w=g>=f,k=VR(S=>{const C=S.target,E=[...d.branches].some(M=>M.contains(C));!w||E||(a==null||a(S),l==null||l(S),S.defaultPrevented||o==null||o())},h),T=UR(S=>{const C=S.target;[...d.branches].some(M=>M.contains(C))||(i==null||i(S),l==null||l(S),S.defaultPrevented||o==null||o())},h);return _R(S=>{g===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&o&&(S.preventDefault(),o()))},h),y.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Bw=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),zw(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Bw)}},[u,h,r,d]),y.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),zw())},[u,d]),y.useEffect(()=>{const S=()=>p({});return document.addEventListener(Py,S),()=>document.removeEventListener(Py,S)},[]),e.jsx(ys.div,{...c,ref:b,style:{pointerEvents:v?w?"auto":"none":void 0,...t.style},onFocusCapture:Ns(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Ns(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Ns(t.onPointerDownCapture,k.onPointerDownCapture)})});w2.displayName=OR;var zR="DismissableLayerBranch",iA=y.forwardRef((t,s)=>{const r=y.useContext(aA),n=y.useRef(null),a=Wr(s,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(ys.div,{...t,ref:a})});iA.displayName=zR;function VR(t,s=globalThis==null?void 0:globalThis.document){const r=Qi(t),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){lA($R,r,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function UR(t,s=globalThis==null?void 0:globalThis.document){const r=Qi(t),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&lA(BR,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function zw(){const t=new CustomEvent(Py);document.dispatchEvent(t)}function lA(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?nA(a,i):a.dispatchEvent(i)}var qR=w2,HR=iA,Rc=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},WR="Portal",S2=y.forwardRef((t,s)=>{var o;const{container:r,...n}=t,[a,i]=y.useState(!1);Rc(()=>i(!0),[]);const l=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?g2.createPortal(e.jsx(ys.div,{...n,ref:s}),l):null});S2.displayName=WR;function GR(t,s){return y.useReducer((r,n)=>s[r][n]??r,t)}var Wc=t=>{const{present:s,children:r}=t,n=KR(s),a=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=Wr(n.ref,YR(a));return typeof r=="function"||n.isPresent?y.cloneElement(a,{ref:i}):null};Wc.displayName="Presence";function KR(t){const[s,r]=y.useState(),n=y.useRef(null),a=y.useRef(t),i=y.useRef("none"),l=t?"mounted":"unmounted",[o,c]=GR(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const d=bf(n.current);i.current=o==="mounted"?d:"none"},[o]),Rc(()=>{const d=n.current,u=a.current;if(u!==t){const h=i.current,p=bf(d);t?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Rc(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=p=>{const j=bf(n.current).includes(p.animationName);if(p.target===s&&j&&(c("ANIMATION_END"),!a.current)){const x=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=x)})}},h=p=>{p.target===s&&(i.current=bf(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:y.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function bf(t){return(t==null?void 0:t.animationName)||"none"}function YR(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var QR=ng[" useInsertionEffect ".trim().toString()]||Rc;function Fu({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,i,l]=ZR({defaultProp:s,onChange:r}),o=t!==void 0,c=o?t:a;{const u=y.useRef(t!==void 0);y.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const d=y.useCallback(u=>{var m;if(o){const h=JR(u)?u(t):u;h!==t&&((m=l.current)==null||m.call(l,h))}else i(u)},[o,t,i,l]);return[c,d]}function ZR({defaultProp:t,onChange:s}){const[r,n]=y.useState(t),a=y.useRef(r),i=y.useRef(s);return QR(()=>{i.current=s},[s]),y.useEffect(()=>{var l;a.current!==r&&((l=i.current)==null||l.call(i,r),a.current=r)},[r,a]),[r,n,i]}function JR(t){return typeof t=="function"}var XR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),e8="VisuallyHidden",C2=y.forwardRef((t,s)=>e.jsx(ys.span,{...t,ref:s,style:{...XR,...t.style}}));C2.displayName=e8;var A2="ToastProvider",[T2,t8,s8]=RR("Toast"),[oA,pQ]=Ol("Toast",[s8]),[r8,bg]=oA(A2),cA=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=y.useState(null),[d,u]=y.useState(0),m=y.useRef(!1),h=y.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${A2}\`. Expected non-empty \`string\`.`),e.jsx(T2.Provider,{scope:s,children:e.jsx(r8,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:y.useCallback(()=>u(p=>p+1),[]),onToastRemove:y.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};cA.displayName=A2;var dA="ToastViewport",n8=["F8"],Dy="toast.viewportPause",Iy="toast.viewportResume",uA=y.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=n8,label:a="Notifications ({hotkey})",...i}=t,l=bg(dA,r),o=t8(r),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),m=y.useRef(null),h=Wr(s,m,l.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=l.toastCount>0;y.useEffect(()=>{const x=f=>{var v;n.length!==0&&n.every(w=>f[w]||f.code===w)&&((v=m.current)==null||v.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),y.useEffect(()=>{const x=c.current,f=m.current;if(b&&x&&f){const g=()=>{if(!l.isClosePausedRef.current){const T=new CustomEvent(Dy);f.dispatchEvent(T),l.isClosePausedRef.current=!0}},v=()=>{if(l.isClosePausedRef.current){const T=new CustomEvent(Iy);f.dispatchEvent(T),l.isClosePausedRef.current=!1}},w=T=>{!x.contains(T.relatedTarget)&&v()},k=()=>{x.contains(document.activeElement)||v()};return x.addEventListener("focusin",g),x.addEventListener("focusout",w),x.addEventListener("pointermove",g),x.addEventListener("pointerleave",k),window.addEventListener("blur",g),window.addEventListener("focus",v),()=>{x.removeEventListener("focusin",g),x.removeEventListener("focusout",w),x.removeEventListener("pointermove",g),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",g),window.removeEventListener("focus",v)}}},[b,l.isClosePausedRef]);const j=y.useCallback(({tabbingDirection:x})=>{const g=o().map(v=>{const w=v.ref.current,k=[w,...g8(w)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?g.reverse():g).flat()},[o]);return y.useEffect(()=>{const x=m.current;if(x){const f=g=>{var k,T,S;const v=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!v){const C=document.activeElement,E=g.shiftKey;if(g.target===x&&E){(k=d.current)==null||k.focus();return}const A=j({tabbingDirection:E?"backwards":"forwards"}),I=A.findIndex(L=>L===C);I0(A.slice(I+1))?g.preventDefault():E?(T=d.current)==null||T.focus():(S=u.current)==null||S.focus()}};return x.addEventListener("keydown",f),()=>x.removeEventListener("keydown",f)}},[o,j]),e.jsxs(HR,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(ky,{ref:d,onFocusFromOutsideViewport:()=>{const x=j({tabbingDirection:"forwards"});I0(x)}}),e.jsx(T2.Slot,{scope:r,children:e.jsx(ys.ol,{tabIndex:-1,...i,ref:h})}),b&&e.jsx(ky,{ref:u,onFocusFromOutsideViewport:()=>{const x=j({tabbingDirection:"backwards"});I0(x)}})]})});uA.displayName=dA;var mA="ToastFocusProxy",ky=y.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=bg(mA,r);return e.jsx(C2,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&n()}})});ky.displayName=mA;var Qh="Toast",a8="toast.swipeStart",i8="toast.swipeMove",l8="toast.swipeCancel",o8="toast.swipeEnd",hA=y.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=Fu({prop:n,defaultProp:a??!0,onChange:i,caller:Qh});return e.jsx(Wc,{present:r||o,children:e.jsx(u8,{open:o,...l,ref:s,onClose:()=>c(!1),onPause:Qi(t.onPause),onResume:Qi(t.onResume),onSwipeStart:Ns(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ns(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Ns(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ns(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});hA.displayName=Qh;var[c8,d8]=oA(Qh,{onClose(){}}),u8=y.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:p,...b}=t,j=bg(Qh,r),[x,f]=y.useState(null),g=Wr(s,L=>f(L)),v=y.useRef(null),w=y.useRef(null),k=a||j.duration,T=y.useRef(0),S=y.useRef(k),C=y.useRef(0),{onToastAdd:E,onToastRemove:M}=j,D=Qi(()=>{var F;(x==null?void 0:x.contains(document.activeElement))&&((F=j.viewport)==null||F.focus()),l()}),A=y.useCallback(L=>{!L||L===1/0||(window.clearTimeout(C.current),T.current=new Date().getTime(),C.current=window.setTimeout(D,L))},[D]);y.useEffect(()=>{const L=j.viewport;if(L){const F=()=>{A(S.current),d==null||d()},B=()=>{const R=new Date().getTime()-T.current;S.current=S.current-R,window.clearTimeout(C.current),c==null||c()};return L.addEventListener(Dy,B),L.addEventListener(Iy,F),()=>{L.removeEventListener(Dy,B),L.removeEventListener(Iy,F)}}},[j.viewport,k,c,d,A]),y.useEffect(()=>{i&&!j.isClosePausedRef.current&&A(k)},[i,k,j.isClosePausedRef,A]),y.useEffect(()=>(E(),()=>M()),[E,M]);const I=y.useMemo(()=>x?yA(x):null,[x]);return j.viewport?e.jsxs(e.Fragment,{children:[I&&e.jsx(m8,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),e.jsx(c8,{scope:r,onClose:D,children:Ml.createPortal(e.jsx(T2.ItemSlot,{scope:r,children:e.jsx(qR,{asChild:!0,onEscapeKeyDown:Ns(o,()=>{j.isFocusedToastEscapeKeyDownRef.current||D(),j.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(ys.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":j.swipeDirection,...b,ref:g,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ns(t.onKeyDown,L=>{L.key==="Escape"&&(o==null||o(L.nativeEvent),L.nativeEvent.defaultPrevented||(j.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Ns(t.onPointerDown,L=>{L.button===0&&(v.current={x:L.clientX,y:L.clientY})}),onPointerMove:Ns(t.onPointerMove,L=>{if(!v.current)return;const F=L.clientX-v.current.x,B=L.clientY-v.current.y,R=!!w.current,$=["left","right"].includes(j.swipeDirection),U=["left","up"].includes(j.swipeDirection)?Math.min:Math.max,W=$?U(0,F):0,q=$?0:U(0,B),_=L.pointerType==="touch"?10:2,V={x:W,y:q},Q={originalEvent:L,delta:V};R?(w.current=V,Nf(i8,m,Q,{discrete:!1})):Vw(V,j.swipeDirection,_)?(w.current=V,Nf(a8,u,Q,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(F)>_||Math.abs(B)>_)&&(v.current=null)}),onPointerUp:Ns(t.onPointerUp,L=>{const F=w.current,B=L.target;if(B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),w.current=null,v.current=null,F){const R=L.currentTarget,$={originalEvent:L,delta:F};Vw(F,j.swipeDirection,j.swipeThreshold)?Nf(o8,p,$,{discrete:!0}):Nf(l8,h,$,{discrete:!0}),R.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),j.viewport)})]}):null}),m8=t=>{const{__scopeToast:s,children:r,...n}=t,a=bg(Qh,s),[i,l]=y.useState(!1),[o,c]=y.useState(!1);return f8(()=>l(!0)),y.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(S2,{asChild:!0,children:e.jsx(C2,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},h8="ToastTitle",pA=y.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(ys.div,{...n,ref:s})});pA.displayName=h8;var p8="ToastDescription",fA=y.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(ys.div,{...n,ref:s})});fA.displayName=p8;var xA="ToastAction",gA=y.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(jA,{altText:r,asChild:!0,children:e.jsx(E2,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${xA}\`. Expected non-empty \`string\`.`),null)});gA.displayName=xA;var vA="ToastClose",E2=y.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=d8(vA,r);return e.jsx(jA,{asChild:!0,children:e.jsx(ys.button,{type:"button",...n,ref:s,onClick:Ns(t.onClick,a.onClose)})})});E2.displayName=vA;var jA=y.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(ys.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function yA(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),x8(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...yA(n))}}),s}function Nf(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?nA(a,i):a.dispatchEvent(i)}var Vw=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function f8(t=()=>{}){const s=Qi(t);Rc(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function x8(t){return t.nodeType===t.ELEMENT_NODE}function g8(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function I0(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var v8=cA,bA=uA,NA=hA,wA=pA,SA=fA,CA=gA,AA=E2;function TA(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=TA(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function j8(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=TA(t))&&(n&&(n+=" "),n+=s);return n}const Uw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,qw=j8,Zh=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return qw(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const h=Uw(u)||Uw(m);return a[d][h]}),o=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...p}=u;return Object.entries(p).every(b=>{let[j,x]=b;return Array.isArray(x)?x.includes({...i,...o}[j]):{...i,...o}[j]===x})?[...d,m,h]:d},[]);return qw(t,l,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EA=(...t)=>t.filter((s,r,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=y.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>y.createElement("svg",{ref:c,...b8,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:EA("lucide",a),...o},[...l.map(([d,u])=>y.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(t,s)=>{const r=y.forwardRef(({className:n,...a},i)=>y.createElement(N8,{ref:i,iconNode:s,className:EA(`lucide-${y8(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=st("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=st("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=st("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=st("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=st("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=st("Bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=st("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=st("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=st("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=st("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=st("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=st("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=st("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=st("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=st("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=st("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=st("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=st("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=st("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=st("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=st("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=st("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=st("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=st("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=st("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=st("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=st("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=st("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=st("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=st("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=st("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=st("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=st("HardHat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=st("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=st("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=st("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=st("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=st("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=st("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=st("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=st("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=st("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=st("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=st("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=st("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=st("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=st("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=st("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=st("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=st("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=st("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=st("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=st("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=st("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=st("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=st("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=st("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=st("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=st("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=st("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=st("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=st("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=st("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=st("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=st("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=st("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=st("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=st("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=st("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=st("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=st("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=st("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=st("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=st("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=st("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=st("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=st("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=st("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=st("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=st("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=st("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=st("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=st("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=st("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=st("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=st("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function BA(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(r=BA(t[s]))&&(n&&(n+=" "),n+=r);else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function O8(){for(var t,s,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(s=BA(t))&&(n&&(n+=" "),n+=s);return n}const _2="-",$8=t=>{const s=z8(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const o=l.split(_2);return o[0]===""&&o.length!==1&&o.shift(),zA(o,s)||B8(l)},getConflictingClassGroupIds:(l,o)=>{const c=r[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},zA=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?zA(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(_2);return(l=s.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},Qw=/^\[(.+)\]$/,B8=t=>{if(Qw.test(t)){const s=Qw.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},z8=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return U8(Object.entries(t.classGroups),r).forEach(([i,l])=>{My(l,n,i,s)}),n},My=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:Zw(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(V8(a)){My(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{My(l,Zw(s,i),r,n)})})},Zw=(t,s)=>{let r=t;return s.split(_2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},V8=t=>t.isThemeGetter,U8=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[r,a]}):t,q8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,l)=>{r.set(i,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},VA="!",H8=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,l=o=>{const c=[];let d=0,u=0,m;for(let x=0;x<o.length;x++){let f=o[x];if(d===0){if(f===a&&(n||o.slice(x,x+i)===s)){c.push(o.slice(u,x)),u=x+i;continue}if(f==="/"){m=x;continue}}f==="["?d++:f==="]"&&d--}const h=c.length===0?o:o.substring(u),p=h.startsWith(VA),b=p?h.substring(1):h,j=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:j}};return r?o=>r({className:o,parseClassName:l}):l},W8=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},G8=t=>({cache:q8(t.cacheSize),parseClassName:H8(t),...$8(t)}),K8=/\s+/,Y8=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],l=t.trim().split(K8);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:p}=r(d);let b=!!p,j=n(b?h.substring(0,p):h);if(!j){if(!b){o=d+(o.length>0?" "+o:o);continue}if(j=n(h),!j){o=d+(o.length>0?" "+o:o);continue}b=!1}const x=W8(u).join(":"),f=m?x+VA:x,g=f+j;if(i.includes(g))continue;i.push(g);const v=a(j,b);for(let w=0;w<v.length;++w){const k=v[w];i.push(f+k)}o=d+(o.length>0?" "+o:o)}return o};function Q8(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=UA(s))&&(n&&(n+=" "),n+=r);return n}const UA=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=UA(t[n]))&&(r&&(r+=" "),r+=s);return r};function Z8(t,...s){let r,n,a,i=l;function l(c){const d=s.reduce((u,m)=>m(u),t());return r=G8(d),n=r.cache.get,a=r.cache.set,i=o,o(c)}function o(c){const d=n(c);if(d)return d;const u=Y8(c,r);return a(c,u),u}return function(){return i(Q8.apply(null,arguments))}}const Vs=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},qA=/^\[(?:([a-z-]+):)?(.+)\]$/i,J8=/^\d+\/\d+$/,X8=new Set(["px","full","screen"]),e7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,r7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=t=>mu(t)||X8.has(t)||J8.test(t),eo=t=>_u(t,"length",m7),mu=t=>!!t&&!Number.isNaN(Number(t)),F0=t=>_u(t,"number",mu),km=t=>!!t&&Number.isInteger(Number(t)),a7=t=>t.endsWith("%")&&mu(t.slice(0,-1)),Qt=t=>qA.test(t),to=t=>e7.test(t),i7=new Set(["length","size","percentage"]),l7=t=>_u(t,i7,HA),o7=t=>_u(t,"position",HA),c7=new Set(["image","url"]),d7=t=>_u(t,c7,p7),u7=t=>_u(t,"",h7),Lm=()=>!0,_u=(t,s,r)=>{const n=qA.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},m7=t=>t7.test(t)&&!s7.test(t),HA=()=>!1,h7=t=>r7.test(t),p7=t=>n7.test(t),f7=()=>{const t=Vs("colors"),s=Vs("spacing"),r=Vs("blur"),n=Vs("brightness"),a=Vs("borderColor"),i=Vs("borderRadius"),l=Vs("borderSpacing"),o=Vs("borderWidth"),c=Vs("contrast"),d=Vs("grayscale"),u=Vs("hueRotate"),m=Vs("invert"),h=Vs("gap"),p=Vs("gradientColorStops"),b=Vs("gradientColorStopPositions"),j=Vs("inset"),x=Vs("margin"),f=Vs("opacity"),g=Vs("padding"),v=Vs("saturate"),w=Vs("scale"),k=Vs("sepia"),T=Vs("skew"),S=Vs("space"),C=Vs("translate"),E=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Qt,s],A=()=>[Qt,s],I=()=>["",fl,eo],L=()=>["auto",mu,Qt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Qt],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[mu,Qt];return{cacheSize:500,separator:":",theme:{colors:[Lm],spacing:[fl,eo],blur:["none","",to,Qt],brightness:q(),borderColor:[t],borderRadius:["none","","full",to,Qt],borderSpacing:A(),borderWidth:I(),contrast:q(),grayscale:U(),hueRotate:q(),invert:U(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[a7,eo],inset:D(),margin:D(),opacity:q(),padding:A(),saturate:q(),scale:q(),sepia:U(),skew:q(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[to]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Qt]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[j]}],"inset-x":[{"inset-x":[j]}],"inset-y":[{"inset-y":[j]}],start:[{start:[j]}],end:[{end:[j]}],top:[{top:[j]}],right:[{right:[j]}],bottom:[{bottom:[j]}],left:[{left:[j]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",km,Qt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",km,Qt]}],"grid-cols":[{"grid-cols":[Lm]}],"col-start-end":[{col:["auto",{span:["full",km,Qt]},Qt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Lm]}],"row-start-end":[{row:["auto",{span:[km,Qt]},Qt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,s]}],"min-w":[{"min-w":[Qt,s,"min","max","fit"]}],"max-w":[{"max-w":[Qt,s,"none","full","min","max","fit","prose",{screen:[to]},to]}],h:[{h:[Qt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",to,eo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F0]}],"font-family":[{font:[Lm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",mu,F0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fl,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fl,eo]}],"underline-offset":[{"underline-offset":["auto",fl,Qt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),o7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",l7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},d7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[fl,Qt]}],"outline-w":[{outline:[fl,eo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[fl,eo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",to,u7]}],"shadow-color":[{shadow:[Lm]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",to,Qt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[km,Qt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fl,eo,F0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},x7=Z8(f7);function Ge(...t){return x7(O8(t))}function De(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function nt(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t))}function Xm(t){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t))}function Xt(t,s){try{localStorage.setItem(t,JSON.stringify(s))}catch(r){console.error("Failed to save to localStorage:",r)}}function xs(t,s){try{const r=localStorage.getItem(t);return r?JSON.parse(r):s}catch(r){return console.error("Failed to load from localStorage:",r),s}}function g7(t){try{localStorage.removeItem(t)}catch(s){console.error("Failed to remove from localStorage:",s)}}function v7(t){const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return s?{r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)}:null}function j7(t){const s=v7(t);return s?(.299*s.r+.587*s.g+.114*s.b)/255>.5:!1}const y7=v8,WA=y.forwardRef(({className:t,...s},r)=>e.jsx(bA,{ref:r,className:Ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));WA.displayName=bA.displayName;const b7=Zh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GA=y.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(NA,{ref:n,className:Ge(b7({variant:s}),t),...r}));GA.displayName=NA.displayName;const N7=y.forwardRef(({className:t,...s},r)=>e.jsx(CA,{ref:r,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));N7.displayName=CA.displayName;const KA=y.forwardRef(({className:t,...s},r)=>e.jsx(AA,{ref:r,className:Ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(St,{className:"h-4 w-4"})}));KA.displayName=AA.displayName;const YA=y.forwardRef(({className:t,...s},r)=>e.jsx(wA,{ref:r,className:Ge("text-sm font-semibold",t),...s}));YA.displayName=wA.displayName;const QA=y.forwardRef(({className:t,...s},r)=>e.jsx(SA,{ref:r,className:Ge("text-sm opacity-90",t),...s}));QA.displayName=SA.displayName;const w7=1,S7=1e6;let R0=0;function C7(){return R0=(R0+1)%Number.MAX_SAFE_INTEGER,R0.toString()}const M0=new Map,Jw=t=>{if(M0.has(t))return;const s=setTimeout(()=>{M0.delete(t),eh({type:"REMOVE_TOAST",toastId:t})},S7);M0.set(t,s)},A7=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,w7)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Jw(r):t.toasts.forEach(n=>{Jw(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},rx=[];let nx={toasts:[]};function eh(t){nx=A7(nx,t),rx.forEach(s=>{s(nx)})}function T7({...t}){const s=C7(),r=a=>eh({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>eh({type:"DISMISS_TOAST",toastId:s});return eh({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function xt(){const[t,s]=y.useState(nx);return y.useEffect(()=>(rx.push(s),()=>{const r=rx.indexOf(s);r>-1&&rx.splice(r,1)}),[t]),{...t,toast:T7,dismiss:r=>eh({type:"DISMISS_TOAST",toastId:r})}}function E7(){const{toasts:t}=xt();return e.jsxs(y7,{children:[t.map(function({id:s,title:r,description:n,action:a,...i}){return e.jsxs(GA,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(YA,{children:r}),n&&e.jsx(QA,{children:n})]}),a,e.jsx(KA,{})]},s)}),e.jsx(WA,{})]})}var th=(t=>(t.ADMIN="admin",t.MANAGER="manager",t.SALES="sales",t.SERVICE="service",t.USER="user",t))(th||{}),Ra=(t=>(t.TEXT="text",t.NUMBER="number",t.DATE="date",t.BOOLEAN="boolean",t.SELECT="select",t.MULTISELECT="multiselect",t))(Ra||{}),Xr=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(Xr||{}),$t=(t=>(t.RV="rv",t.MOTORHOME="motorhome",t.TRAVEL_TRAILER="travel_trailer",t.FIFTH_WHEEL="fifth_wheel",t.TOY_HAULER="toy_hauler",t.SINGLE_WIDE="single_wide",t.DOUBLE_WIDE="double_wide",t.TRIPLE_WIDE="triple_wide",t.PARK_MODEL="park_model",t.MODULAR_HOME="modular_home",t))($t||{}),Jt=(t=>(t.AVAILABLE="available",t.RESERVED="reserved",t.SOLD="sold",t.SERVICE="service",t.DELIVERED="delivered",t))(Jt||{}),_a=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.ACCEPTED="accepted",t.REJECTED="rejected",t.EXPIRED="expired",t))(_a||{}),gr=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.URGENT="urgent",t))(gr||{}),Xs=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.WAITING_PARTS="waiting_parts",t.COMPLETED="completed",t.CANCELLED="cancelled",t))(Xs||{}),Wt=(t=>(t.SCHEDULED="scheduled",t.IN_TRANSIT="in_transit",t.DELIVERED="delivered",t.CANCELLED="cancelled",t))(Wt||{}),ls=(t=>(t.FLAT="flat",t.PERCENTAGE="percentage",t.TIERED="tiered",t))(ls||{}),Ft=(t=>(t.PENDING="pending",t.APPROVED="approved",t.PAID="paid",t.CANCELLED="cancelled",t))(Ft||{}),Mt=(t=>(t.DRAFT="draft",t.SENT="sent",t.VIEWED="viewed",t.PAID="paid",t.OVERDUE="overdue",t.CANCELLED="cancelled",t))(Mt||{}),Bi=(t=>(t.CASH="cash",t.CHECK="check",t.CREDIT_CARD="credit_card",t.BANK_TRANSFER="bank_transfer",t.FINANCING="financing",t))(Bi||{}),Cl=(t=>(t.PENDING="pending",t.PROCESSING="processing",t.COMPLETED="completed",t.FAILED="failed",t.REFUNDED="refunded",t))(Cl||{}),oa=(t=>(t.ACTIVE="active",t.CURRENT="current",t.LATE="late",t.DEFAULT="default",t.PAID_OFF="paid_off",t.CANCELLED="cancelled",t))(oa||{}),yl=(t=>(t.PAYMENT="payment",t.STATUS_CHANGE="status_change",t.RATE_CHANGE="rate_change",t.NOTE_ADDED="note_added",t.LATE_FEE="late_fee",t.PAYOFF="payoff",t))(yl||{}),er=(t=>(t.CRM="crm",t.SERVICE="service",t.DELIVERY="delivery",t.FINANCE="finance",t.WARRANTY="warranty",t.QUOTE="quote",t.PDI="pdi",t))(er||{}),qs=(t=>(t.PENDING="pending",t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.CANCELLED="cancelled",t.ON_HOLD="on_hold",t))(qs||{}),es=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.URGENT="urgent",t))(es||{});const ZA=y.createContext(void 0);function Ou(){const t=y.useContext(ZA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function P7({children:t}){const[s,r]=y.useState(null),[n,a]=y.useState(!0);y.useEffect(()=>{xs("auth_token",null)&&r({id:"1",email:"admin@renterinsight.com",name:"Admin User",role:th.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date}),a(!1)},[]);const d={user:s,login:async(u,m)=>{a(!0);try{if(await new Promise(h=>setTimeout(h,1e3)),u==="admin@renterinsight.com"&&m==="password"){const h={id:"1",email:u,name:"Admin User",role:th.ADMIN,tenantId:"tenant-1",permissions:[{id:"1",name:"All Access",resource:"*",action:"*"}],createdAt:new Date,updatedAt:new Date};r(h),Xt("auth_token","mock-token")}else throw new Error("Invalid credentials")}catch(h){throw console.error("Login error:",h),new Error("Login failed")}finally{a(!1)}},logout:()=>{r(null),g7("auth_token")},isLoading:n,hasPermission:(u,m)=>s?s.permissions.some(h=>(h.resource==="*"||h.resource===u)&&(h.action==="*"||h.action===m)):!1,hasRole:u=>s?s.role===u||s.role===th.ADMIN:!1};return e.jsx(ZA.Provider,{value:d,children:t})}const JA=y.createContext(void 0);function kn(){const t=y.useContext(JA);if(t===void 0)throw new Error("useTenant must be used within a TenantProvider");return t}function D7({children:t}){const[s,r]=y.useState(null);y.useEffect(()=>{const d=xs("tenant",null);if(d)r(d);else{const u={id:"tenant-1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",settings:{timezone:"America/New_York",currency:"USD",dateFormat:"MM/dd/yyyy",businessHours:{monday:{open:"09:00",close:"18:00",closed:!1},tuesday:{open:"09:00",close:"18:00",closed:!1},wednesday:{open:"09:00",close:"18:00",closed:!1},thursday:{open:"09:00",close:"18:00",closed:!1},friday:{open:"09:00",close:"18:00",closed:!1},saturday:{open:"09:00",close:"17:00",closed:!1},sunday:{open:"12:00",close:"17:00",closed:!1}},features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},customFields:[],branding:{primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter"},createdAt:new Date,updatedAt:new Date};r(u),Xt("tenant",u)}},[]),y.useEffect(()=>{s&&Xt("tenant",s)},[s]);const c={tenant:s,getCustomFields:(d,u)=>(s==null?void 0:s.customFields.filter(m=>m.module===d&&(u?m.section===u:!0)))||[],updateTenant:async d=>{if(!s)return;const u={...s,...d,settings:d.settings?{...s.settings,...d.settings}:s.settings,branding:d.branding?{...s.branding,...d.branding}:s.branding,customFields:d.customFields||s.customFields,updatedAt:new Date};r(u)},addCustomField:async d=>{if(!s)return;const u={...d,id:Math.random().toString(36).substr(2,9)},m={...s,customFields:[...s.customFields,u],updatedAt:new Date};r(m)},updateCustomField:async(d,u)=>{if(!s)return;const m=s.customFields.map(p=>p.id===d?{...p,...u}:p),h={...s,customFields:m,updatedAt:new Date};r(h)},deleteCustomField:async d=>{if(!s)return;const u=s.customFields.filter(h=>h.id!==d),m={...s,customFields:u,updatedAt:new Date};r(m)}};return e.jsx(JA.Provider,{value:c,children:t})}const I7={theme:"system",setTheme:()=>null},k7=y.createContext(I7);function L7({children:t,defaultTheme:s="system",storageKey:r="vite-ui-theme",...n}){const[a,i]=y.useState(()=>localStorage.getItem(r)||s);y.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(c);return}o.classList.add(a)},[a]);const l={theme:a,setTheme:o=>{localStorage.setItem(r,o),i(o)}};return e.jsx(k7.Provider,{...n,value:l,children:t})}const F7=y.createContext(void 0);function R7({children:t}){const[s,r]=y.useState(null),l={activeMenuId:s,setActiveMenu:o=>{r(o)},clearActiveMenu:()=>{r(null)},isMenuActive:o=>s===o};return e.jsx(F7.Provider,{value:l,children:t})}const M7=Zh("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=y.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const l=n?PR:"button";return e.jsx(l,{className:Ge(M7({variant:s,size:r,className:t})),ref:i,...a})});H.displayName="Button";var _7=ng[" useId ".trim().toString()]||(()=>{}),O7=0;function sh(t){const[s,r]=y.useState(_7());return Rc(()=>{r(n=>n??String(O7++))},[t]),s?`radix-${s}`:""}var _0="focusScope.autoFocusOnMount",O0="focusScope.autoFocusOnUnmount",Xw={bubbles:!1,cancelable:!0},$7="FocusScope",XA=y.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=y.useState(null),d=Qi(a),u=Qi(i),m=y.useRef(null),h=Wr(s,j=>c(j)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let j=function(v){if(p.paused||!o)return;const w=v.target;o.contains(w)?m.current=w:no(m.current,{select:!0})},x=function(v){if(p.paused||!o)return;const w=v.relatedTarget;w!==null&&(o.contains(w)||no(m.current,{select:!0}))},f=function(v){if(document.activeElement===document.body)for(const k of v)k.removedNodes.length>0&&no(o)};document.addEventListener("focusin",j),document.addEventListener("focusout",x);const g=new MutationObserver(f);return o&&g.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",x),g.disconnect()}}},[n,o,p.paused]),y.useEffect(()=>{if(o){t5.add(p);const j=document.activeElement;if(!o.contains(j)){const f=new CustomEvent(_0,Xw);o.addEventListener(_0,d),o.dispatchEvent(f),f.defaultPrevented||(B7(H7(eT(o)),{select:!0}),document.activeElement===j&&no(o))}return()=>{o.removeEventListener(_0,d),setTimeout(()=>{const f=new CustomEvent(O0,Xw);o.addEventListener(O0,u),o.dispatchEvent(f),f.defaultPrevented||no(j??document.body,{select:!0}),o.removeEventListener(O0,u),t5.remove(p)},0)}}},[o,d,u,p]);const b=y.useCallback(j=>{if(!r&&!n||p.paused)return;const x=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,f=document.activeElement;if(x&&f){const g=j.currentTarget,[v,w]=z7(g);v&&w?!j.shiftKey&&f===w?(j.preventDefault(),r&&no(v,{select:!0})):j.shiftKey&&f===v&&(j.preventDefault(),r&&no(w,{select:!0})):f===g&&j.preventDefault()}},[r,n,p.paused]);return e.jsx(ys.div,{tabIndex:-1,...l,ref:h,onKeyDown:b})});XA.displayName=$7;function B7(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(no(n,{select:s}),document.activeElement!==r)return}function z7(t){const s=eT(t),r=e5(s,t),n=e5(s.reverse(),t);return[r,n]}function eT(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function e5(t,s){for(const r of t)if(!V7(r,{upTo:s}))return r}function V7(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function U7(t){return t instanceof HTMLInputElement&&"select"in t}function no(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&U7(t)&&s&&t.select()}}var t5=q7();function q7(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=s5(t,s),t.unshift(s)},remove(s){var r;t=s5(t,s),(r=t[0])==null||r.resume()}}}function s5(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function H7(t){return t.filter(s=>s.tagName!=="A")}var $0=0;function W7(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??r5()),document.body.insertAdjacentElement("beforeend",t[1]??r5()),$0++,()=>{$0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),$0--}},[])}function r5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jn=function(){return jn=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},jn.apply(this,arguments)};function O2(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Kc(t,s,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(m){l(m)}}function c(u){try{d(n.throw(u))}catch(m){l(m)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(t,s||[])).next())})}function tT(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}var rh="right-scroll-bar-position",nh="width-before-scroll-bar",G7="with-scroll-bars-hidden",K7="--removed-body-scroll-bar-size";function B0(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function Y7(t,s){var r=y.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var Q7=typeof window<"u"?y.useLayoutEffect:y.useEffect,n5=new WeakMap;function sT(t,s){var r=Y7(null,function(n){return t.forEach(function(a){return B0(a,n)})});return Q7(function(){var n=n5.get(r);if(n){var a=new Set(n),i=new Set(t),l=r.current;a.forEach(function(o){i.has(o)||B0(o,null)}),i.forEach(function(o){a.has(o)||B0(o,l)})}n5.set(r,t)},[t]),r}function Z7(t){return t}function J7(t,s){s===void 0&&(s=Z7);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=s(i,n);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(n=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){n=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return a}function rT(t){t===void 0&&(t={});var s=J7(null);return s.options=jn({async:!0,ssr:!1},t),s}var nT=function(t){var s=t.sideCar,r=O2(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,jn({},r))};nT.isSideCarExport=!0;function aT(t,s){return t.useMedium(s),nT}var iT=rT(),z0=function(){},Sg=y.forwardRef(function(t,s){var r=y.useRef(null),n=y.useState({onScrollCapture:z0,onWheelCapture:z0,onTouchMoveCapture:z0}),a=n[0],i=n[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,p=t.noRelative,b=t.noIsolation,j=t.inert,x=t.allowPinchZoom,f=t.as,g=f===void 0?"div":f,v=t.gapMode,w=O2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,T=sT([r,s]),S=jn(jn({},w),a);return y.createElement(y.Fragment,null,u&&y.createElement(k,{sideCar:iT,removeScrollBar:d,shards:m,noRelative:p,noIsolation:b,inert:j,setCallbacks:i,allowPinchZoom:!!x,lockRef:r,gapMode:v}),l?y.cloneElement(y.Children.only(o),jn(jn({},S),{ref:T})):y.createElement(g,jn({},S,{className:c,ref:T}),o))});Sg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sg.classNames={fullWidth:nh,zeroRight:rh};var X7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=X7();return s&&t.setAttribute("nonce",s),t}function tM(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function sM(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var rM=function(){var t=0,s=null;return{add:function(r){t==0&&(s=eM())&&(tM(s,r),sM(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},nM=function(){var t=rM();return function(s,r){y.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},$2=function(){var t=nM(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},aM={left:0,top:0,right:0,gap:0},V0=function(t){return parseInt(t||"",10)||0},iM=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[V0(r),V0(n),V0(a)]},lM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aM;var s=iM(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},oM=$2(),hu="data-scroll-locked",cM=function(t,s,r,n){var a=t.left,i=t.top,l=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(G7,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(hu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(nh,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(nh," .").concat(nh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hu,`] {
    `).concat(K7,": ").concat(o,`px;
  }
`)},a5=function(){var t=parseInt(document.body.getAttribute(hu)||"0",10);return isFinite(t)?t:0},dM=function(){y.useEffect(function(){return document.body.setAttribute(hu,(a5()+1).toString()),function(){var t=a5()-1;t<=0?document.body.removeAttribute(hu):document.body.setAttribute(hu,t.toString())}},[])},lT=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;dM();var i=y.useMemo(function(){return lM(a)},[a]);return y.createElement(oM,{styles:cM(i,!s,a,r?"":"!important")})},_y=!1;if(typeof window<"u")try{var wf=Object.defineProperty({},"passive",{get:function(){return _y=!0,!0}});window.addEventListener("test",wf,wf),window.removeEventListener("test",wf,wf)}catch{_y=!1}var Ld=_y?{passive:!1}:!1,uM=function(t){return t.tagName==="TEXTAREA"},oT=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!uM(t)&&r[s]==="visible")},mM=function(t){return oT(t,"overflowY")},hM=function(t){return oT(t,"overflowX")},i5=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=cT(t,n);if(a){var i=dT(t,n),l=i[1],o=i[2];if(l>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},pM=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},fM=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},cT=function(t,s){return t==="v"?mM(s):hM(s)},dT=function(t,s){return t==="v"?pM(s):fM(s)},xM=function(t,s){return t==="h"&&s==="rtl"?-1:1},gM=function(t,s,r,n,a){var i=xM(t,window.getComputedStyle(s).direction),l=i*n,o=r.target,c=s.contains(o),d=!1,u=l>0,m=0,h=0;do{if(!o)break;var p=dT(t,o),b=p[0],j=p[1],x=p[2],f=j-x-i*b;(b||f)&&cT(t,o)&&(m+=f,h+=b);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Sf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},l5=function(t){return[t.deltaX,t.deltaY]},o5=function(t){return t&&"current"in t?t.current:t},vM=function(t,s){return t[0]===s[0]&&t[1]===s[1]},jM=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},yM=0,Fd=[];function bM(t){var s=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(yM++)[0],i=y.useState($2)[0],l=y.useRef(t);y.useEffect(function(){l.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var j=tT([t.lockRef.current],(t.shards||[]).map(o5),!0).filter(Boolean);return j.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),j.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=y.useCallback(function(j,x){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!l.current.allowPinchZoom;var f=Sf(j),g=r.current,v="deltaX"in j?j.deltaX:g[0]-f[0],w="deltaY"in j?j.deltaY:g[1]-f[1],k,T=j.target,S=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in j&&S==="h"&&T.type==="range")return!1;var C=i5(S,T);if(!C)return!0;if(C?k=S:(k=S==="v"?"h":"v",C=i5(S,T)),!C)return!1;if(!n.current&&"changedTouches"in j&&(v||w)&&(n.current=k),!k)return!0;var E=n.current||k;return gM(E,x,j,E==="h"?v:w)},[]),c=y.useCallback(function(j){var x=j;if(!(!Fd.length||Fd[Fd.length-1]!==i)){var f="deltaY"in x?l5(x):Sf(x),g=s.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&vM(k.delta,f)})[0];if(g&&g.should){x.cancelable&&x.preventDefault();return}if(!g){var v=(l.current.shards||[]).map(o5).filter(Boolean).filter(function(k){return k.contains(x.target)}),w=v.length>0?o(x,v[0]):!l.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),d=y.useCallback(function(j,x,f,g){var v={name:j,delta:x,target:f,should:g,shadowParent:NM(f)};s.current.push(v),setTimeout(function(){s.current=s.current.filter(function(w){return w!==v})},1)},[]),u=y.useCallback(function(j){r.current=Sf(j),n.current=void 0},[]),m=y.useCallback(function(j){d(j.type,l5(j),j.target,o(j,t.lockRef.current))},[]),h=y.useCallback(function(j){d(j.type,Sf(j),j.target,o(j,t.lockRef.current))},[]);y.useEffect(function(){return Fd.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Ld),document.addEventListener("touchmove",c,Ld),document.addEventListener("touchstart",u,Ld),function(){Fd=Fd.filter(function(j){return j!==i}),document.removeEventListener("wheel",c,Ld),document.removeEventListener("touchmove",c,Ld),document.removeEventListener("touchstart",u,Ld)}},[]);var p=t.removeScrollBar,b=t.inert;return y.createElement(y.Fragment,null,b?y.createElement(i,{styles:jM(a)}):null,p?y.createElement(lT,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function NM(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const wM=aT(iT,bM);var uT=y.forwardRef(function(t,s){return y.createElement(Sg,jn({},t,{ref:s,sideCar:wM}))});uT.classNames=Sg.classNames;var SM=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Rd=new WeakMap,Cf=new WeakMap,Af={},U0=0,mT=function(t){return t&&(t.host||mT(t.parentNode))},CM=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=mT(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},AM=function(t,s,r,n){var a=CM(s,Array.isArray(t)?t:[t]);Af[r]||(Af[r]=new WeakMap);var i=Af[r],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))u(h);else try{var p=h.getAttribute(n),b=p!==null&&p!=="false",j=(Rd.get(h)||0)+1,x=(i.get(h)||0)+1;Rd.set(h,j),i.set(h,x),l.push(h),j===1&&b&&Cf.set(h,!0),x===1&&h.setAttribute(r,"true"),b||h.setAttribute(n,"true")}catch(f){console.error("aria-hidden: cannot operate on ",h,f)}})};return u(s),o.clear(),U0++,function(){l.forEach(function(m){var h=Rd.get(m)-1,p=i.get(m)-1;Rd.set(m,h),i.set(m,p),h||(Cf.has(m)||m.removeAttribute(n),Cf.delete(m)),p||m.removeAttribute(r)}),U0--,U0||(Rd=new WeakMap,Rd=new WeakMap,Cf=new WeakMap,Af={})}},hT=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=SM(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),AM(n,a,r,"aria-hidden")):function(){return null}},Cg="Dialog",[pT,fQ]=Ol(Cg),[TM,Ni]=pT(Cg),fT=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=y.useRef(null),c=y.useRef(null),[d,u]=Fu({prop:n,defaultProp:a??!1,onChange:i,caller:Cg});return e.jsx(TM,{scope:s,triggerRef:o,contentRef:c,contentId:sh(),titleId:sh(),descriptionId:sh(),open:d,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(m=>!m),[u]),modal:l,children:r})};fT.displayName=Cg;var xT="DialogTrigger",gT=y.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Ni(xT,r),i=Wr(s,a.triggerRef);return e.jsx(ys.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":V2(a.open),...n,ref:i,onClick:Ns(t.onClick,a.onOpenToggle)})});gT.displayName=xT;var B2="DialogPortal",[EM,vT]=pT(B2,{forceMount:void 0}),jT=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,i=Ni(B2,s);return e.jsx(EM,{scope:s,forceMount:r,children:y.Children.map(n,l=>e.jsx(Wc,{present:r||i.open,children:e.jsx(S2,{asChild:!0,container:a,children:l})}))})};jT.displayName=B2;var Mx="DialogOverlay",yT=y.forwardRef((t,s)=>{const r=vT(Mx,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Ni(Mx,t.__scopeDialog);return i.modal?e.jsx(Wc,{present:n||i.open,children:e.jsx(DM,{...a,ref:s})}):null});yT.displayName=Mx;var PM=Fc("DialogOverlay.RemoveScroll"),DM=y.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Ni(Mx,r);return e.jsx(uT,{as:PM,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(ys.div,{"data-state":V2(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),Bc="DialogContent",bT=y.forwardRef((t,s)=>{const r=vT(Bc,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Ni(Bc,t.__scopeDialog);return e.jsx(Wc,{present:n||i.open,children:i.modal?e.jsx(IM,{...a,ref:s}):e.jsx(kM,{...a,ref:s})})});bT.displayName=Bc;var IM=y.forwardRef((t,s)=>{const r=Ni(Bc,t.__scopeDialog),n=y.useRef(null),a=Wr(s,r.contentRef,n);return y.useEffect(()=>{const i=n.current;if(i)return hT(i)},[]),e.jsx(NT,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ns(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ns(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Ns(t.onFocusOutside,i=>i.preventDefault())})}),kM=y.forwardRef((t,s)=>{const r=Ni(Bc,t.__scopeDialog),n=y.useRef(!1),a=y.useRef(!1);return e.jsx(NT,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),NT=y.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=Ni(Bc,r),c=y.useRef(null),d=Wr(s,c);return W7(),e.jsxs(e.Fragment,{children:[e.jsx(XA,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(w2,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":V2(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(LM,{titleId:o.titleId}),e.jsx(RM,{contentRef:c,descriptionId:o.descriptionId})]})]})}),z2="DialogTitle",wT=y.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Ni(z2,r);return e.jsx(ys.h2,{id:a.titleId,...n,ref:s})});wT.displayName=z2;var ST="DialogDescription",CT=y.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Ni(ST,r);return e.jsx(ys.p,{id:a.descriptionId,...n,ref:s})});CT.displayName=ST;var AT="DialogClose",TT=y.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Ni(AT,r);return e.jsx(ys.button,{type:"button",...n,ref:s,onClick:Ns(t.onClick,()=>a.onOpenChange(!1))})});TT.displayName=AT;function V2(t){return t?"open":"closed"}var ET="DialogTitleWarning",[xQ,PT]=TR(ET,{contentName:Bc,titleName:z2,docsSlug:"dialog"}),LM=({titleId:t})=>{const s=PT(ET),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},FM="DialogDescriptionWarning",RM=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PT(FM).contentName}}.`;return y.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},DT=fT,MM=gT,IT=jT,Ag=yT,Tg=bT,Eg=wT,Pg=CT,kT=TT;const _x=DT,LT=MM,_M=IT,OM=Zh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),U2=y.forwardRef(({side:t="right",className:s,children:r,...n},a)=>e.jsxs(_M,{children:[e.jsx(FT,{}),e.jsxs(Tg,{ref:a,className:Ge(OM({side:t}),s),...n,children:[e.jsx(RT,{children:e.jsx(MT,{className:"sr-only",children:"Navigation Menu"})}),r,e.jsxs(kT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(St,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));U2.displayName=Tg.displayName;const FT=y.forwardRef(({className:t,...s},r)=>e.jsx(Ag,{className:Ge("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));FT.displayName=Ag.displayName;const RT=({className:t,...s})=>e.jsx("div",{className:Ge("flex flex-col space-y-2 text-center sm:text-left",t),...s});RT.displayName="SheetHeader";const MT=y.forwardRef(({className:t,...s},r)=>e.jsx(Eg,{ref:r,className:Ge("text-lg font-semibold text-foreground",t),...s}));MT.displayName=Eg.displayName;const $M=y.forwardRef(({className:t,...s},r)=>e.jsx(Pg,{ref:r,className:Ge("text-sm text-muted-foreground",t),...s}));$M.displayName=Pg.displayName;function BM({children:t}){var p;const{user:s,logout:r}=Ou(),{tenant:n}=kn(),a=Qo(),[i,l]=y.useState(!1),[o,c]=y.useState([]),d=[{name:"Dashboard",path:"/",icon:T8},{name:"CRM & Sales",icon:Ks,children:[{name:"Prospecting",path:"/crm",icon:Ks},{name:"Sales Deals",path:"/deals",icon:wt},{name:"Quotes",path:"/quotes",icon:Bt}]},{name:"Inventory & Operations",icon:bn,children:[{name:"Inventory",path:"/inventory",icon:bn},{name:"Land Management",path:"/land",icon:ur},{name:"Property Listings",path:"/listings",icon:Il},{name:"PDI Checklist",path:"/pdi",icon:$c},{name:"Delivery",path:"/delivery",icon:Hn},{name:"Warranty Mgmt",path:"/inventory/warranty",icon:F8}]},{name:"Finance & Agreements",icon:wt,children:[{name:"Finance",path:"/finance",icon:wt},{name:"Agreements",path:"/agreements",icon:Bt},{name:"Applications",path:"/client-applications",icon:Bt},{name:"Invoices",path:"/invoices",icon:qn}]},{name:"Service & Support",icon:ma,children:[{name:"Service Ops",path:"/service",icon:ma},{name:"Client Portal",path:"/portal",icon:F2}]},{name:"Management",icon:Hw,children:[{name:"Reports",path:"/reports",icon:Hw},{name:"Commissions",path:"/commissions",icon:Ng},{name:"Tag Manager",path:"/tags",icon:Ih},{name:"Task Center",path:"/tasks",icon:ln},{name:"Calendar",path:"/calendar",icon:Zt},{name:"Contractors",path:"/contractors",icon:C8}]},{name:"Administration",icon:wn,children:[{name:"Company Settings",path:"/settings",icon:wn},{name:"Platform Admin",path:"/admin",icon:Oc}]}];y.useEffect(()=>{const b=a.pathname,j=d.find(x=>{var f;return(f=x.children)==null?void 0:f.some(g=>b.startsWith(g.path))});j&&!o.includes(j.name)&&c(x=>[...x,j.name])},[a.pathname]);const u=b=>{c(j=>j.includes(b)?j.filter(x=>x!==b):[...j,b])},m=b=>b==="/"?a.pathname==="/":a.pathname.startsWith(b),h=()=>{var b;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center px-4 py-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:((b=n==null?void 0:n.name)==null?void 0:b.charAt(0))||"R"})}),e.jsx("span",{className:"ml-2 text-lg font-semibold",children:(n==null?void 0:n.name)||"Renter Insight"})]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-1",children:d.map(j=>{if(j.children){const x=o.includes(j.name),f=j.children.some(g=>m(g.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>u(j.name),className:Ge("w-full group flex items-center justify-between px-2 py-2 text-sm font-medium rounded-md transition-colors",f?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(j.icon,{className:Ge("mr-3 flex-shrink-0 h-5 w-5",f?"text-primary":"text-muted-foreground")}),j.name]}),e.jsx(L2,{className:Ge("h-4 w-4 transition-transform",x?"transform rotate-180":"",f?"text-primary":"text-muted-foreground")})]}),x&&e.jsx("div",{className:"mt-1 space-y-1",children:j.children.map(g=>{const v=m(g.path);return e.jsxs(Dr,{to:g.path,onClick:()=>l(!1),className:Ge("group flex items-center pl-11 pr-2 py-2 text-sm font-medium rounded-md transition-colors",v?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(g.icon,{className:Ge("mr-3 flex-shrink-0 h-4 w-4",v?"text-primary-foreground":"text-muted-foreground")}),g.name]},g.path)})})]},j.name)}else{const x=m(j.path);return e.jsxs(Dr,{to:j.path,onClick:()=>l(!1),className:Ge("group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors",x?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[e.jsx(j.icon,{className:Ge("mr-3 flex-shrink-0 h-5 w-5",x?"text-primary-foreground":"text-muted-foreground")}),j.name]},j.path)}})}),e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]}),e.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:r,children:[e.jsx(kA,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})};return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col",children:e.jsx("div",{className:"flex flex-col flex-grow border-r bg-card",children:e.jsx(h,{})})}),e.jsx(_x,{open:i,onOpenChange:l,children:e.jsx(U2,{side:"left",className:"p-0 w-64",children:e.jsx(h,{})})}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b bg-card",children:[e.jsx(_x,{open:i,onOpenChange:l,children:e.jsx(LT,{asChild:!0,children:e.jsx(H,{variant:"ghost",size:"sm",children:e.jsx(LA,{className:"h-5 w-5"})})})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-6 w-6 bg-primary rounded flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xs",children:((p=n==null?void 0:n.name)==null?void 0:p.charAt(0))||"R"})}),e.jsx("span",{className:"ml-2 font-semibold",children:(n==null?void 0:n.name)||"Renter Insight"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}const ee=y.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));ee.displayName="Card";const ce=y.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ge("flex flex-col space-y-1.5 p-6",t),...s}));ce.displayName="CardHeader";const de=y.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:Ge("text-2xl font-semibold leading-none tracking-tight",t),...s}));de.displayName="CardTitle";const Ee=y.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:Ge("text-sm text-muted-foreground",t),...s}));Ee.displayName="CardDescription";const te=y.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ge("p-6 pt-0",t),...s}));te.displayName="CardContent";const zM=y.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Ge("flex items-center p-6 pt-0",t),...s}));zM.displayName="CardFooter";const ge=y.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));ge.displayName="Input";const kt=y.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:Ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));kt.displayName="Textarea";function it(){return it=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},it.apply(null,arguments)}function c5(t,[s,r]){return Math.min(r,Math.max(s,t))}function Ur(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function VM(t,s=[]){let r=[];function n(i,l){const o=y.createContext(l),c=r.length;r=[...r,l];function d(m){const{scope:h,children:p,...b}=m,j=(h==null?void 0:h[t][c])||o,x=y.useMemo(()=>b,Object.values(b));return y.createElement(j.Provider,{value:x},p)}function u(m,h){const p=(h==null?void 0:h[t][c])||o,b=y.useContext(p);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(l=>y.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,UM(a,...s)]}function UM(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return y.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}function qM(t,s){typeof t=="function"?t(s):t!=null&&(t.current=s)}function _T(...t){return s=>t.forEach(r=>qM(r,s))}function d5(...t){return y.useCallback(_T(...t),t)}const Oy=y.forwardRef((t,s)=>{const{children:r,...n}=t,a=y.Children.toArray(r),i=a.find(WM);if(i){const l=i.props.children,o=a.map(c=>c===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:c);return y.createElement($y,it({},n,{ref:s}),y.isValidElement(l)?y.cloneElement(l,void 0,o):null)}return y.createElement($y,it({},n,{ref:s}),r)});Oy.displayName="Slot";const $y=y.forwardRef((t,s)=>{const{children:r,...n}=t;return y.isValidElement(r)?y.cloneElement(r,{...GM(n,r.props),ref:s?_T(s,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});$y.displayName="SlotClone";const HM=({children:t})=>y.createElement(y.Fragment,null,t);function WM(t){return y.isValidElement(t)&&t.type===HM}function GM(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function KM(t){const s=t+"CollectionProvider",[r,n]=VM(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=p=>{const{scope:b,children:j}=p,x=vt.useRef(null),f=vt.useRef(new Map).current;return vt.createElement(a,{scope:b,itemMap:f,collectionRef:x},j)},o=t+"CollectionSlot",c=vt.forwardRef((p,b)=>{const{scope:j,children:x}=p,f=i(o,j),g=d5(b,f.collectionRef);return vt.createElement(Oy,{ref:g},x)}),d=t+"CollectionItemSlot",u="data-radix-collection-item",m=vt.forwardRef((p,b)=>{const{scope:j,children:x,...f}=p,g=vt.useRef(null),v=d5(b,g),w=i(d,j);return vt.useEffect(()=>(w.itemMap.set(g,{ref:g,...f}),()=>void w.itemMap.delete(g))),vt.createElement(Oy,{[u]:"",ref:v},x)});function h(p){const b=i(t+"CollectionConsumer",p);return vt.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const f=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((w,k)=>f.indexOf(w.ref.current)-f.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:c,ItemSlot:m},h,n]}function YM(t,s){typeof t=="function"?t(s):t!=null&&(t.current=s)}function OT(...t){return s=>t.forEach(r=>YM(r,s))}function Ka(...t){return y.useCallback(OT(...t),t)}function QM(t,s=[]){let r=[];function n(i,l){const o=y.createContext(l),c=r.length;r=[...r,l];function d(m){const{scope:h,children:p,...b}=m,j=(h==null?void 0:h[t][c])||o,x=y.useMemo(()=>b,Object.values(b));return y.createElement(j.Provider,{value:x},p)}function u(m,h){const p=(h==null?void 0:h[t][c])||o,b=y.useContext(p);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(l=>y.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,ZM(a,...s)]}function ZM(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return y.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}const JM=y.createContext(void 0);function XM(t){const s=y.useContext(JM);return t||s||"ltr"}const q2=y.forwardRef((t,s)=>{const{children:r,...n}=t,a=y.Children.toArray(r),i=a.find(t_);if(i){const l=i.props.children,o=a.map(c=>c===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:c);return y.createElement(By,it({},n,{ref:s}),y.isValidElement(l)?y.cloneElement(l,void 0,o):null)}return y.createElement(By,it({},n,{ref:s}),r)});q2.displayName="Slot";const By=y.forwardRef((t,s)=>{const{children:r,...n}=t;return y.isValidElement(r)?y.cloneElement(r,{...s_(n,r.props),ref:s?OT(s,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});By.displayName="SlotClone";const e_=({children:t})=>y.createElement(y.Fragment,null,t);function t_(t){return y.isValidElement(t)&&t.type===e_}function s_(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}const r_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xn=r_.reduce((t,s)=>{const r=y.forwardRef((n,a)=>{const{asChild:i,...l}=n,o=i?q2:s;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(o,it({},l,{ref:a}))});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function n_(t,s){t&&Ml.flushSync(()=>t.dispatchEvent(s))}function $o(t){const s=y.useRef(t);return y.useEffect(()=>{s.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=s.current)===null||n===void 0?void 0:n.call(s,...r)},[])}function a_(t,s=globalThis==null?void 0:globalThis.document){const r=$o(t);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n),()=>s.removeEventListener("keydown",n)},[r,s])}const zy="dismissableLayer.update",i_="dismissableLayer.pointerDownOutside",l_="dismissableLayer.focusOutside";let u5;const o_=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),c_=y.forwardRef((t,s)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:o,onDismiss:c,...d}=t,u=y.useContext(o_),[m,h]=y.useState(null),p=(r=m==null?void 0:m.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,b]=y.useState({}),j=Ka(s,C=>h(C)),x=Array.from(u.layers),[f]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),g=x.indexOf(f),v=m?x.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=g,T=d_(C=>{const E=C.target,M=[...u.branches].some(D=>D.contains(E));!k||M||(i==null||i(C),o==null||o(C),C.defaultPrevented||c==null||c())},p),S=u_(C=>{const E=C.target;[...u.branches].some(D=>D.contains(E))||(l==null||l(C),o==null||o(C),C.defaultPrevented||c==null||c())},p);return a_(C=>{v===u.layers.size-1&&(a==null||a(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},p),y.useEffect(()=>{if(m)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u5=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),m5(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=u5)}},[m,p,n,u]),y.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),m5())},[m,u]),y.useEffect(()=>{const C=()=>b({});return document.addEventListener(zy,C),()=>document.removeEventListener(zy,C)},[]),y.createElement(Xn.div,it({},d,{ref:j,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:Ur(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Ur(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Ur(t.onPointerDownCapture,T.onPointerDownCapture)}))});function d_(t,s=globalThis==null?void 0:globalThis.document){const r=$o(t),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let d=function(){$T(i_,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=d,s.addEventListener("click",a.current,{once:!0})):d()}n.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function u_(t,s=globalThis==null?void 0:globalThis.document){const r=$o(t),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&$T(l_,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function m5(){const t=new CustomEvent(zy);document.dispatchEvent(t)}function $T(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?n_(a,i):a.dispatchEvent(i)}let q0=0;function m_(){y.useEffect(()=>{var t,s;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=r[0])!==null&&t!==void 0?t:h5()),document.body.insertAdjacentElement("beforeend",(s=r[1])!==null&&s!==void 0?s:h5()),q0++,()=>{q0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),q0--}},[])}function h5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const H0="focusScope.autoFocusOnMount",W0="focusScope.autoFocusOnUnmount",p5={bubbles:!1,cancelable:!0},h_=y.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=y.useState(null),d=$o(a),u=$o(i),m=y.useRef(null),h=Ka(s,j=>c(j)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let j=function(v){if(p.paused||!o)return;const w=v.target;o.contains(w)?m.current=w:ao(m.current,{select:!0})},x=function(v){if(p.paused||!o)return;const w=v.relatedTarget;w!==null&&(o.contains(w)||ao(m.current,{select:!0}))},f=function(v){const w=document.activeElement;for(const k of v)k.removedNodes.length>0&&(o!=null&&o.contains(w)||ao(o))};document.addEventListener("focusin",j),document.addEventListener("focusout",x);const g=new MutationObserver(f);return o&&g.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",x),g.disconnect()}}},[n,o,p.paused]),y.useEffect(()=>{if(o){x5.add(p);const j=document.activeElement;if(!o.contains(j)){const f=new CustomEvent(H0,p5);o.addEventListener(H0,d),o.dispatchEvent(f),f.defaultPrevented||(p_(j_(BT(o)),{select:!0}),document.activeElement===j&&ao(o))}return()=>{o.removeEventListener(H0,d),setTimeout(()=>{const f=new CustomEvent(W0,p5);o.addEventListener(W0,u),o.dispatchEvent(f),f.defaultPrevented||ao(j??document.body,{select:!0}),o.removeEventListener(W0,u),x5.remove(p)},0)}}},[o,d,u,p]);const b=y.useCallback(j=>{if(!r&&!n||p.paused)return;const x=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,f=document.activeElement;if(x&&f){const g=j.currentTarget,[v,w]=f_(g);v&&w?!j.shiftKey&&f===w?(j.preventDefault(),r&&ao(v,{select:!0})):j.shiftKey&&f===v&&(j.preventDefault(),r&&ao(w,{select:!0})):f===g&&j.preventDefault()}},[r,n,p.paused]);return y.createElement(Xn.div,it({tabIndex:-1},l,{ref:h,onKeyDown:b}))});function p_(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(ao(n,{select:s}),document.activeElement!==r)return}function f_(t){const s=BT(t),r=f5(s,t),n=f5(s.reverse(),t);return[r,n]}function BT(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function f5(t,s){for(const r of t)if(!x_(r,{upTo:s}))return r}function x_(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function g_(t){return t instanceof HTMLInputElement&&"select"in t}function ao(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&g_(t)&&s&&t.select()}}const x5=v_();function v_(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=g5(t,s),t.unshift(s)},remove(s){var r;t=g5(t,s),(r=t[0])===null||r===void 0||r.resume()}}}function g5(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function j_(t){return t.filter(s=>s.tagName!=="A")}const kl=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},y_=ng.useId||(()=>{});let b_=0;function zT(t){const[s,r]=y.useState(y_());return kl(()=>{r(n=>n??String(b_++))},[t]),s?`radix-${s}`:""}const N_=["top","right","bottom","left"],Bo=Math.min,ca=Math.max,Ox=Math.round,Tf=Math.floor,Ki=t=>({x:t,y:t}),w_={left:"right",right:"left",bottom:"top",top:"bottom"},S_={start:"end",end:"start"};function Vy(t,s,r){return ca(t,Bo(s,r))}function Ll(t,s){return typeof t=="function"?t(s):t}function Fl(t){return t.split("-")[0]}function $u(t){return t.split("-")[1]}function H2(t){return t==="x"?"y":"x"}function W2(t){return t==="y"?"height":"width"}const C_=new Set(["top","bottom"]);function qi(t){return C_.has(Fl(t))?"y":"x"}function G2(t){return H2(qi(t))}function A_(t,s,r){r===void 0&&(r=!1);const n=$u(t),a=G2(t),i=W2(a);let l=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=$x(l)),[l,$x(l)]}function T_(t){const s=$x(t);return[Uy(t),s,Uy(s)]}function Uy(t){return t.replace(/start|end/g,s=>S_[s])}const v5=["left","right"],j5=["right","left"],E_=["top","bottom"],P_=["bottom","top"];function D_(t,s,r){switch(t){case"top":case"bottom":return r?s?j5:v5:s?v5:j5;case"left":case"right":return s?E_:P_;default:return[]}}function I_(t,s,r,n){const a=$u(t);let i=D_(Fl(t),r==="start",n);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(Uy)))),i}function $x(t){return t.replace(/left|right|bottom|top/g,s=>w_[s])}function k_(t){return{top:0,right:0,bottom:0,left:0,...t}}function VT(t){return typeof t!="number"?k_(t):{top:t,right:t,bottom:t,left:t}}function Bx(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function y5(t,s,r){let{reference:n,floating:a}=t;const i=qi(s),l=G2(s),o=W2(l),c=Fl(s),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let p;switch(c){case"top":p={x:u,y:n.y-a.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:m};break;case"left":p={x:n.x-a.width,y:m};break;default:p={x:n.x,y:n.y}}switch($u(s)){case"start":p[l]-=h*(r&&d?-1:1);break;case"end":p[l]+=h*(r&&d?-1:1);break}return p}const L_=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:m}=y5(d,n,c),h=n,p={},b=0;for(let j=0;j<o.length;j++){const{name:x,fn:f}=o[j],{x:g,y:v,data:w,reset:k}=await f({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:p,rects:d,platform:l,elements:{reference:t,floating:s}});u=g??u,m=v??m,p={...p,[x]:{...p[x],...w}},k&&b<=50&&(b++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(d=k.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):k.rects),{x:u,y:m}=y5(d,h,c)),j=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:p}};async function kh(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=Ll(s,t),b=VT(p),x=o[h?m==="floating"?"reference":"floating":m],f=Bx(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(x)))==null||r?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),g=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),w=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},k=Bx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:v,strategy:c}):g);return{top:(f.top-k.top+b.top)/w.y,bottom:(k.bottom-f.bottom+b.bottom)/w.y,left:(f.left-k.left+b.left)/w.x,right:(k.right-f.right+b.right)/w.x}}const F_=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:d,padding:u=0}=Ll(t,s)||{};if(d==null)return{};const m=VT(u),h={x:r,y:n},p=G2(a),b=W2(p),j=await l.getDimensions(d),x=p==="y",f=x?"top":"left",g=x?"bottom":"right",v=x?"clientHeight":"clientWidth",w=i.reference[b]+i.reference[p]-h[p]-i.floating[b],k=h[p]-i.reference[p],T=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let S=T?T[v]:0;(!S||!await(l.isElement==null?void 0:l.isElement(T)))&&(S=o.floating[v]||i.floating[b]);const C=w/2-k/2,E=S/2-j[b]/2-1,M=Bo(m[f],E),D=Bo(m[g],E),A=M,I=S-j[b]-D,L=S/2-j[b]/2+C,F=Vy(A,L,I),B=!c.arrow&&$u(a)!=null&&L!==F&&i.reference[b]/2-(L<A?M:D)-j[b]/2<0,R=B?L<A?L-A:L-I:0;return{[p]:h[p]+R,data:{[p]:F,centerOffset:L-F-R,...B&&{alignmentOffset:R}},reset:B}}}),R_=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:j=!0,...x}=Ll(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const f=Fl(a),g=qi(o),v=Fl(o)===o,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),k=h||(v||!j?[$x(o)]:T_(o)),T=b!=="none";!h&&T&&k.push(...I_(o,j,b,w));const S=[o,...k],C=await kh(s,x),E=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&E.push(C[f]),m){const L=A_(a,l,w);E.push(C[L[0]],C[L[1]])}if(M=[...M,{placement:a,overflows:E}],!E.every(L=>L<=0)){var D,A;const L=(((D=i.flip)==null?void 0:D.index)||0)+1,F=S[L];if(F&&(!(m==="alignment"?g!==qi(F):!1)||M.every($=>qi($.placement)===g?$.overflows[0]>0:!0)))return{data:{index:L,overflows:M},reset:{placement:F}};let B=(A=M.filter(R=>R.overflows[0]<=0).sort((R,$)=>R.overflows[1]-$.overflows[1])[0])==null?void 0:A.placement;if(!B)switch(p){case"bestFit":{var I;const R=(I=M.filter($=>{if(T){const U=qi($.placement);return U===g||U==="y"}return!0}).map($=>[$.placement,$.overflows.filter(U=>U>0).reduce((U,W)=>U+W,0)]).sort(($,U)=>$[1]-U[1])[0])==null?void 0:I[0];R&&(B=R);break}case"initialPlacement":B=o;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function b5(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function N5(t){return N_.some(s=>t[s]>=0)}const M_=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=Ll(t,s);switch(n){case"referenceHidden":{const i=await kh(s,{...a,elementContext:"reference"}),l=b5(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:N5(l)}}}case"escaped":{const i=await kh(s,{...a,altBoundary:!0}),l=b5(i,r.floating);return{data:{escapedOffsets:l,escaped:N5(l)}}}default:return{}}}}},UT=new Set(["left","top"]);async function __(t,s){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=Fl(r),o=$u(r),c=qi(r)==="y",d=UT.has(l)?-1:1,u=i&&c?-1:1,m=Ll(s,t);let{mainAxis:h,crossAxis:p,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof b=="number"&&(p=o==="end"?b*-1:b),c?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const O_=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await __(s,t);return l===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},$_=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:x=>{let{x:f,y:g}=x;return{x:f,y:g}}},...c}=Ll(t,s),d={x:r,y:n},u=await kh(s,c),m=qi(Fl(a)),h=H2(m);let p=d[h],b=d[m];if(i){const x=h==="y"?"top":"left",f=h==="y"?"bottom":"right",g=p+u[x],v=p-u[f];p=Vy(g,p,v)}if(l){const x=m==="y"?"top":"left",f=m==="y"?"bottom":"right",g=b+u[x],v=b-u[f];b=Vy(g,b,v)}const j=o.fn({...s,[h]:p,[m]:b});return{...j,data:{x:j.x-r,y:j.y-n,enabled:{[h]:i,[m]:l}}}}}},B_=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=Ll(t,s),u={x:r,y:n},m=qi(a),h=H2(m);let p=u[h],b=u[m];const j=Ll(o,s),x=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(c){const v=h==="y"?"height":"width",w=i.reference[h]-i.floating[v]+x.mainAxis,k=i.reference[h]+i.reference[v]-x.mainAxis;p<w?p=w:p>k&&(p=k)}if(d){var f,g;const v=h==="y"?"width":"height",w=UT.has(Fl(a)),k=i.reference[m]-i.floating[v]+(w&&((f=l.offset)==null?void 0:f[m])||0)+(w?0:x.crossAxis),T=i.reference[m]+i.reference[v]+(w?0:((g=l.offset)==null?void 0:g[m])||0)-(w?x.crossAxis:0);b<k?b=k:b>T&&(b=T)}return{[h]:p,[m]:b}}}},z_=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...d}=Ll(t,s),u=await kh(s,d),m=Fl(a),h=$u(a),p=qi(a)==="y",{width:b,height:j}=i.floating;let x,f;m==="top"||m==="bottom"?(x=m,f=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(f=m,x=h==="end"?"top":"bottom");const g=j-u.top-u.bottom,v=b-u.left-u.right,w=Bo(j-u[x],g),k=Bo(b-u[f],v),T=!s.middlewareData.shift;let S=w,C=k;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(C=v),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(S=g),T&&!h){const M=ca(u.left,0),D=ca(u.right,0),A=ca(u.top,0),I=ca(u.bottom,0);p?C=b-2*(M!==0||D!==0?M+D:ca(u.left,u.right)):S=j-2*(A!==0||I!==0?A+I:ca(u.top,u.bottom))}await c({...s,availableWidth:C,availableHeight:S});const E=await l.getDimensions(o.floating);return b!==E.width||j!==E.height?{reset:{rects:!0}}:{}}}};function Dg(){return typeof window<"u"}function Bu(t){return qT(t)?(t.nodeName||"").toLowerCase():"#document"}function ja(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function el(t){var s;return(s=(qT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function qT(t){return Dg()?t instanceof Node||t instanceof ja(t).Node:!1}function yi(t){return Dg()?t instanceof Element||t instanceof ja(t).Element:!1}function Xi(t){return Dg()?t instanceof HTMLElement||t instanceof ja(t).HTMLElement:!1}function w5(t){return!Dg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ja(t).ShadowRoot}const V_=new Set(["inline","contents"]);function Jh(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=bi(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!V_.has(a)}const U_=new Set(["table","td","th"]);function q_(t){return U_.has(Bu(t))}const H_=[":popover-open",":modal"];function Ig(t){return H_.some(s=>{try{return t.matches(s)}catch{return!1}})}const W_=["transform","translate","scale","rotate","perspective"],G_=["transform","translate","scale","rotate","perspective","filter"],K_=["paint","layout","strict","content"];function K2(t){const s=Y2(),r=yi(t)?bi(t):t;return W_.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||G_.some(n=>(r.willChange||"").includes(n))||K_.some(n=>(r.contain||"").includes(n))}function Y_(t){let s=zo(t);for(;Xi(s)&&!wu(s);){if(K2(s))return s;if(Ig(s))return null;s=zo(s)}return null}function Y2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Q_=new Set(["html","body","#document"]);function wu(t){return Q_.has(Bu(t))}function bi(t){return ja(t).getComputedStyle(t)}function kg(t){return yi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zo(t){if(Bu(t)==="html")return t;const s=t.assignedSlot||t.parentNode||w5(t)&&t.host||el(t);return w5(s)?s.host:s}function HT(t){const s=zo(t);return wu(s)?t.ownerDocument?t.ownerDocument.body:t.body:Xi(s)&&Jh(s)?s:HT(s)}function Lh(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=HT(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),l=ja(a);if(i){const o=qy(l);return s.concat(l,l.visualViewport||[],Jh(a)?a:[],o&&r?Lh(o):[])}return s.concat(a,Lh(a,[],r))}function qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function WT(t){const s=bi(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=Xi(t),i=a?t.offsetWidth:r,l=a?t.offsetHeight:n,o=Ox(r)!==i||Ox(n)!==l;return o&&(r=i,n=l),{width:r,height:n,$:o}}function Q2(t){return yi(t)?t:t.contextElement}function pu(t){const s=Q2(t);if(!Xi(s))return Ki(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=WT(s);let l=(i?Ox(r.width):r.width)/n,o=(i?Ox(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const Z_=Ki(0);function GT(t){const s=ja(t);return!Y2()||!s.visualViewport?Z_:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function J_(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==ja(t)?!1:s}function zc(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=Q2(t);let l=Ki(1);s&&(n?yi(n)&&(l=pu(n)):l=pu(t));const o=J_(i,r,n)?GT(i):Ki(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const h=ja(i),p=n&&yi(n)?ja(n):n;let b=h,j=qy(b);for(;j&&n&&p!==b;){const x=pu(j),f=j.getBoundingClientRect(),g=bi(j),v=f.left+(j.clientLeft+parseFloat(g.paddingLeft))*x.x,w=f.top+(j.clientTop+parseFloat(g.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,m*=x.y,c+=v,d+=w,b=ja(j),j=qy(b)}}return Bx({width:u,height:m,x:c,y:d})}function Z2(t,s){const r=kg(t).scrollLeft;return s?s.left+r:zc(el(t)).left+r}function KT(t,s,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+s.scrollLeft-(r?0:Z2(t,n)),i=n.top+s.scrollTop;return{x:a,y:i}}function X_(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",l=el(n),o=s?Ig(s.floating):!1;if(n===l||o&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Ki(1);const u=Ki(0),m=Xi(n);if((m||!m&&!i)&&((Bu(n)!=="body"||Jh(l))&&(c=kg(n)),Xi(n))){const p=zc(n);d=pu(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const h=l&&!m&&!i?KT(l,c,!0):Ki(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function eO(t){return Array.from(t.getClientRects())}function tO(t){const s=el(t),r=kg(t),n=t.ownerDocument.body,a=ca(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=ca(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Z2(t);const o=-r.scrollTop;return bi(n).direction==="rtl"&&(l+=ca(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}function sO(t,s){const r=ja(t),n=el(t),a=r.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=Y2();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const rO=new Set(["absolute","fixed"]);function nO(t,s){const r=zc(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=Xi(t)?pu(t):Ki(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:l,height:o,x:c,y:d}}function S5(t,s,r){let n;if(s==="viewport")n=sO(t,r);else if(s==="document")n=tO(el(t));else if(yi(s))n=nO(s,r);else{const a=GT(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return Bx(n)}function YT(t,s){const r=zo(t);return r===s||!yi(r)||wu(r)?!1:bi(r).position==="fixed"||YT(r,s)}function aO(t,s){const r=s.get(t);if(r)return r;let n=Lh(t,[],!1).filter(o=>yi(o)&&Bu(o)!=="body"),a=null;const i=bi(t).position==="fixed";let l=i?zo(t):t;for(;yi(l)&&!wu(l);){const o=bi(l),c=K2(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&rO.has(a.position)||Jh(l)&&!c&&YT(t,l))?n=n.filter(u=>u!==l):a=o,l=zo(l)}return s.set(t,n),n}function iO(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const l=[...r==="clippingAncestors"?Ig(s)?[]:aO(s,this._c):[].concat(r),n],o=l[0],c=l.reduce((d,u)=>{const m=S5(s,u,a);return d.top=ca(m.top,d.top),d.right=Bo(m.right,d.right),d.bottom=Bo(m.bottom,d.bottom),d.left=ca(m.left,d.left),d},S5(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function lO(t){const{width:s,height:r}=WT(t);return{width:s,height:r}}function oO(t,s,r){const n=Xi(s),a=el(s),i=r==="fixed",l=zc(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=Ki(0);function d(){c.x=Z2(a)}if(n||!n&&!i)if((Bu(s)!=="body"||Jh(a))&&(o=kg(s)),n){const p=zc(s,!0,i,s);c.x=p.x+s.clientLeft,c.y=p.y+s.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?KT(a,o):Ki(0),m=l.left+o.scrollLeft-c.x-u.x,h=l.top+o.scrollTop-c.y-u.y;return{x:m,y:h,width:l.width,height:l.height}}function G0(t){return bi(t).position==="static"}function C5(t,s){if(!Xi(t)||bi(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return el(t)===r&&(r=r.ownerDocument.body),r}function QT(t,s){const r=ja(t);if(Ig(t))return r;if(!Xi(t)){let a=zo(t);for(;a&&!wu(a);){if(yi(a)&&!G0(a))return a;a=zo(a)}return r}let n=C5(t,s);for(;n&&q_(n)&&G0(n);)n=C5(n,s);return n&&wu(n)&&G0(n)&&!K2(n)?r:n||Y_(t)||r}const cO=async function(t){const s=this.getOffsetParent||QT,r=this.getDimensions,n=await r(t.floating);return{reference:oO(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function dO(t){return bi(t).direction==="rtl"}const uO={convertOffsetParentRelativeRectToViewportRelativeRect:X_,getDocumentElement:el,getClippingRect:iO,getOffsetParent:QT,getElementRects:cO,getClientRects:eO,getDimensions:lO,getScale:pu,isElement:yi,isRTL:dO};function ZT(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function mO(t,s){let r=null,n;const a=el(t);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:h,height:p}=d;if(o||s(),!h||!p)return;const b=Tf(m),j=Tf(a.clientWidth-(u+h)),x=Tf(a.clientHeight-(m+p)),f=Tf(u),v={rootMargin:-b+"px "+-j+"px "+-x+"px "+-f+"px",threshold:ca(0,Bo(1,c))||1};let w=!0;function k(T){const S=T[0].intersectionRatio;if(S!==c){if(!w)return l();S?l(!1,S):n=setTimeout(()=>{l(!1,1e-7)},1e3)}S===1&&!ZT(d,t.getBoundingClientRect())&&l(),w=!1}try{r=new IntersectionObserver(k,{...v,root:a.ownerDocument})}catch{r=new IntersectionObserver(k,v)}r.observe(t)}return l(!0),i}function hO(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Q2(t),u=a||i?[...d?Lh(d):[],...Lh(s)]:[];u.forEach(f=>{a&&f.addEventListener("scroll",r,{passive:!0}),i&&f.addEventListener("resize",r)});const m=d&&o?mO(d,r):null;let h=-1,p=null;l&&(p=new ResizeObserver(f=>{let[g]=f;g&&g.target===d&&p&&(p.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(s)})),r()}),d&&!c&&p.observe(d),p.observe(s));let b,j=c?zc(t):null;c&&x();function x(){const f=zc(t);j&&!ZT(j,f)&&r(),j=f,b=requestAnimationFrame(x)}return r(),()=>{var f;u.forEach(g=>{a&&g.removeEventListener("scroll",r),i&&g.removeEventListener("resize",r)}),m==null||m(),(f=p)==null||f.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const pO=O_,fO=$_,xO=R_,gO=z_,vO=M_,A5=F_,jO=B_,yO=(t,s,r)=>{const n=new Map,a={platform:uO,...r},i={...a.platform,_c:n};return L_(t,s,{...a,platform:i})};var bO=typeof document<"u",NO=function(){},ax=bO?y.useLayoutEffect:NO;function zx(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!zx(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!zx(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function JT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function T5(t,s){const r=JT(t);return Math.round(s*r)/r}function K0(t){const s=y.useRef(t);return ax(()=>{s.current=t}),s}function wO(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,m]=y.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[h,p]=y.useState(n);zx(h,n)||p(n);const[b,j]=y.useState(null),[x,f]=y.useState(null),g=y.useCallback($=>{$!==T.current&&(T.current=$,j($))},[]),v=y.useCallback($=>{$!==S.current&&(S.current=$,f($))},[]),w=i||b,k=l||x,T=y.useRef(null),S=y.useRef(null),C=y.useRef(u),E=c!=null,M=K0(c),D=K0(a),A=K0(d),I=y.useCallback(()=>{if(!T.current||!S.current)return;const $={placement:s,strategy:r,middleware:h};D.current&&($.platform=D.current),yO(T.current,S.current,$).then(U=>{const W={...U,isPositioned:A.current!==!1};L.current&&!zx(C.current,W)&&(C.current=W,Ml.flushSync(()=>{m(W)}))})},[h,s,r,D,A]);ax(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[d]);const L=y.useRef(!1);ax(()=>(L.current=!0,()=>{L.current=!1}),[]),ax(()=>{if(w&&(T.current=w),k&&(S.current=k),w&&k){if(M.current)return M.current(w,k,I);I()}},[w,k,I,M,E]);const F=y.useMemo(()=>({reference:T,floating:S,setReference:g,setFloating:v}),[g,v]),B=y.useMemo(()=>({reference:w,floating:k}),[w,k]),R=y.useMemo(()=>{const $={position:r,left:0,top:0};if(!B.floating)return $;const U=T5(B.floating,u.x),W=T5(B.floating,u.y);return o?{...$,transform:"translate("+U+"px, "+W+"px)",...JT(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:W}},[r,o,B.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:I,refs:F,elements:B,floatingStyles:R}),[u,I,F,B,R])}const SO=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?A5({element:n.current,padding:a}).fn(r):{}:n?A5({element:n,padding:a}).fn(r):{}}}},CO=(t,s)=>({...pO(t),options:[t,s]}),AO=(t,s)=>({...fO(t),options:[t,s]}),TO=(t,s)=>({...jO(t),options:[t,s]}),EO=(t,s)=>({...xO(t),options:[t,s]}),PO=(t,s)=>({...gO(t),options:[t,s]}),DO=(t,s)=>({...vO(t),options:[t,s]}),IO=(t,s)=>({...SO(t),options:[t,s]});function kO(t,s){typeof t=="function"?t(s):t!=null&&(t.current=s)}function LO(...t){return s=>t.forEach(r=>kO(r,s))}const XT=y.forwardRef((t,s)=>{const{children:r,...n}=t,a=y.Children.toArray(r),i=a.find(RO);if(i){const l=i.props.children,o=a.map(c=>c===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:c);return y.createElement(Hy,it({},n,{ref:s}),y.isValidElement(l)?y.cloneElement(l,void 0,o):null)}return y.createElement(Hy,it({},n,{ref:s}),r)});XT.displayName="Slot";const Hy=y.forwardRef((t,s)=>{const{children:r,...n}=t;return y.isValidElement(r)?y.cloneElement(r,{...MO(n,r.props),ref:s?LO(s,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});Hy.displayName="SlotClone";const FO=({children:t})=>y.createElement(y.Fragment,null,t);function RO(t){return y.isValidElement(t)&&t.type===FO}function MO(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}const _O=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gQ=_O.reduce((t,s)=>{const r=y.forwardRef((n,a)=>{const{asChild:i,...l}=n,o=i?XT:s;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(o,it({},l,{ref:a}))});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function OO(t,s){typeof t=="function"?t(s):t!=null&&(t.current=s)}function eE(...t){return s=>t.forEach(r=>OO(r,s))}function tE(...t){return y.useCallback(eE(...t),t)}function $O(t,s=[]){let r=[];function n(i,l){const o=y.createContext(l),c=r.length;r=[...r,l];function d(m){const{scope:h,children:p,...b}=m,j=(h==null?void 0:h[t][c])||o,x=y.useMemo(()=>b,Object.values(b));return y.createElement(j.Provider,{value:x},p)}function u(m,h){const p=(h==null?void 0:h[t][c])||o,b=y.useContext(p);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(l=>y.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,BO(a,...s)]}function BO(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return y.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}const sE=y.forwardRef((t,s)=>{const{children:r,...n}=t,a=y.Children.toArray(r),i=a.find(VO);if(i){const l=i.props.children,o=a.map(c=>c===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:c);return y.createElement(Wy,it({},n,{ref:s}),y.isValidElement(l)?y.cloneElement(l,void 0,o):null)}return y.createElement(Wy,it({},n,{ref:s}),r)});sE.displayName="Slot";const Wy=y.forwardRef((t,s)=>{const{children:r,...n}=t;return y.isValidElement(r)?y.cloneElement(r,{...UO(n,r.props),ref:s?eE(s,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});Wy.displayName="SlotClone";const zO=({children:t})=>y.createElement(y.Fragment,null,t);function VO(t){return y.isValidElement(t)&&t.type===zO}function UO(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}const qO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],rE=qO.reduce((t,s)=>{const r=y.forwardRef((n,a)=>{const{asChild:i,...l}=n,o=i?sE:s;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(o,it({},l,{ref:a}))});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function HO(t){const s=y.useRef(t);return y.useEffect(()=>{s.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=s.current)===null||n===void 0?void 0:n.call(s,...r)},[])}const Gy=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{};function WO(t){const[s,r]=y.useState(void 0);return Gy(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;r({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}const nE="Popper",[aE,iE]=$O(nE),[GO,lE]=aE(nE),KO=t=>{const{__scopePopper:s,children:r}=t,[n,a]=y.useState(null);return y.createElement(GO,{scope:s,anchor:n,onAnchorChange:a},r)},YO="PopperAnchor",QO=y.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=lE(YO,r),l=y.useRef(null),o=tE(s,l);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||l.current)}),n?null:y.createElement(rE.div,it({},a,{ref:o}))}),oE="PopperContent",[ZO,vQ]=aE(oE),JO=y.forwardRef((t,s)=>{var r,n,a,i,l,o,c,d;const{__scopePopper:u,side:m="bottom",sideOffset:h=0,align:p="center",alignOffset:b=0,arrowPadding:j=0,collisionBoundary:x=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:v=!1,avoidCollisions:w=!0,onPlaced:k,...T}=t,S=lE(oE,u),[C,E]=y.useState(null),M=tE(s,ye=>E(ye)),[D,A]=y.useState(null),I=WO(D),L=(r=I==null?void 0:I.width)!==null&&r!==void 0?r:0,F=(n=I==null?void 0:I.height)!==null&&n!==void 0?n:0,B=m+(p!=="center"?"-"+p:""),R=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},$=Array.isArray(x)?x:[x],U=$.length>0,W={padding:R,boundary:$.filter(XO),altBoundary:U},{refs:q,floatingStyles:_,placement:V,isPositioned:Q,middlewareData:G}=wO({strategy:"fixed",placement:B,whileElementsMounted:hO,elements:{reference:S.anchor},middleware:[CO({mainAxis:h+F,alignmentAxis:b}),w&&AO({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?TO():void 0,...W}),w&&EO({...W}),PO({...W,apply:({elements:ye,rects:Se,availableWidth:he,availableHeight:ke})=>{const{width:xe,height:Pe}=Se.reference,qe=ye.floating.style;qe.setProperty("--radix-popper-available-width",`${he}px`),qe.setProperty("--radix-popper-available-height",`${ke}px`),qe.setProperty("--radix-popper-anchor-width",`${xe}px`),qe.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),D&&IO({element:D,padding:j}),e9({arrowWidth:L,arrowHeight:F}),v&&DO({strategy:"referenceHidden"})]}),[Y,ne]=cE(V),le=HO(k);Gy(()=>{Q&&(le==null||le())},[Q,le]);const oe=(a=G.arrow)===null||a===void 0?void 0:a.x,pe=(i=G.arrow)===null||i===void 0?void 0:i.y,je=((l=G.arrow)===null||l===void 0?void 0:l.centerOffset)!==0,[we,Re]=y.useState();return Gy(()=>{C&&Re(window.getComputedStyle(C).zIndex)},[C]),y.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:Q?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:we,"--radix-popper-transform-origin":[(o=G.transformOrigin)===null||o===void 0?void 0:o.x,(c=G.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},y.createElement(ZO,{scope:u,placedSide:Y,onArrowChange:A,arrowX:oe,arrowY:pe,shouldHideArrow:je},y.createElement(rE.div,it({"data-side":Y,"data-align":ne},T,{ref:M,style:{...T.style,animation:Q?void 0:"none",opacity:(d=G.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function XO(t){return t!==null}const e9=t=>({name:"transformOrigin",options:t,fn(s){var r,n,a,i,l;const{placement:o,rects:c,middlewareData:d}=s,m=((r=d.arrow)===null||r===void 0?void 0:r.centerOffset)!==0,h=m?0:t.arrowWidth,p=m?0:t.arrowHeight,[b,j]=cE(o),x={start:"0%",center:"50%",end:"100%"}[j],f=((n=(a=d.arrow)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0)+h/2,g=((i=(l=d.arrow)===null||l===void 0?void 0:l.y)!==null&&i!==void 0?i:0)+p/2;let v="",w="";return b==="bottom"?(v=m?x:`${f}px`,w=`${-p}px`):b==="top"?(v=m?x:`${f}px`,w=`${c.floating.height+p}px`):b==="right"?(v=`${-p}px`,w=m?x:`${g}px`):b==="left"&&(v=`${c.floating.width+p}px`,w=m?x:`${g}px`),{data:{x:v,y:w}}}});function cE(t){const[s,r="center"]=t.split("-");return[s,r]}const t9=KO,s9=QO,r9=JO,n9=y.forwardRef((t,s)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=t;return n?g2.createPortal(y.createElement(Xn.div,it({},a,{ref:s})),n):null});function E5({prop:t,defaultProp:s,onChange:r=()=>{}}){const[n,a]=a9({defaultProp:s,onChange:r}),i=t!==void 0,l=i?t:n,o=$o(r),c=y.useCallback(d=>{if(i){const m=typeof d=="function"?d(t):d;m!==t&&o(m)}else a(d)},[i,t,a,o]);return[l,c]}function a9({defaultProp:t,onChange:s}){const r=y.useState(t),[n]=r,a=y.useRef(n),i=$o(s);return y.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}function i9(t){const s=y.useRef({value:t,previous:t});return y.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}function l9(t,s){typeof t=="function"?t(s):t!=null&&(t.current=s)}function o9(...t){return s=>t.forEach(r=>l9(r,s))}const dE=y.forwardRef((t,s)=>{const{children:r,...n}=t,a=y.Children.toArray(r),i=a.find(d9);if(i){const l=i.props.children,o=a.map(c=>c===i?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:c);return y.createElement(Ky,it({},n,{ref:s}),y.isValidElement(l)?y.cloneElement(l,void 0,o):null)}return y.createElement(Ky,it({},n,{ref:s}),r)});dE.displayName="Slot";const Ky=y.forwardRef((t,s)=>{const{children:r,...n}=t;return y.isValidElement(r)?y.cloneElement(r,{...u9(n,r.props),ref:s?o9(s,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});Ky.displayName="SlotClone";const c9=({children:t})=>y.createElement(y.Fragment,null,t);function d9(t){return y.isValidElement(t)&&t.type===c9}function u9(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{i(...o),a(...o)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}const m9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],h9=m9.reduce((t,s)=>{const r=y.forwardRef((n,a)=>{const{asChild:i,...l}=n,o=i?dE:s;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(o,it({},l,{ref:a}))});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),p9=y.forwardRef((t,s)=>y.createElement(h9.span,it({},t,{ref:s,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var uE=rT(),Y0=function(){},Lg=y.forwardRef(function(t,s){var r=y.useRef(null),n=y.useState({onScrollCapture:Y0,onWheelCapture:Y0,onTouchMoveCapture:Y0}),a=n[0],i=n[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,p=t.noIsolation,b=t.inert,j=t.allowPinchZoom,x=t.as,f=x===void 0?"div":x,g=O2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),v=h,w=sT([r,s]),k=jn(jn({},g),a);return y.createElement(y.Fragment,null,u&&y.createElement(v,{sideCar:uE,removeScrollBar:d,shards:m,noIsolation:p,inert:b,setCallbacks:i,allowPinchZoom:!!j,lockRef:r}),l?y.cloneElement(y.Children.only(o),jn(jn({},k),{ref:w})):y.createElement(f,jn({},k,{className:c,ref:w}),o))});Lg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lg.classNames={fullWidth:nh,zeroRight:rh};var Yy=!1;if(typeof window<"u")try{var Ef=Object.defineProperty({},"passive",{get:function(){return Yy=!0,!0}});window.addEventListener("test",Ef,Ef),window.removeEventListener("test",Ef,Ef)}catch{Yy=!1}var Md=Yy?{passive:!1}:!1,f9=function(t){return t.tagName==="TEXTAREA"},mE=function(t,s){var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!f9(t)&&r[s]==="visible")},x9=function(t){return mE(t,"overflowY")},g9=function(t){return mE(t,"overflowX")},P5=function(t,s){var r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=hE(t,r);if(n){var a=pE(t,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},v9=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},j9=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},hE=function(t,s){return t==="v"?x9(s):g9(s)},pE=function(t,s){return t==="v"?v9(s):j9(s)},y9=function(t,s){return t==="h"&&s==="rtl"?-1:1},b9=function(t,s,r,n,a){var i=y9(t,window.getComputedStyle(s).direction),l=i*n,o=r.target,c=s.contains(o),d=!1,u=l>0,m=0,h=0;do{var p=pE(t,o),b=p[0],j=p[1],x=p[2],f=j-x-i*b;(b||f)&&hE(t,o)&&(m+=f,h+=b),o=o.parentNode}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&m===0||!u&&h===0)&&(d=!0),d},Pf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},D5=function(t){return[t.deltaX,t.deltaY]},I5=function(t){return t&&"current"in t?t.current:t},N9=function(t,s){return t[0]===s[0]&&t[1]===s[1]},w9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},S9=0,_d=[];function C9(t){var s=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(S9++)[0],i=y.useState(function(){return $2()})[0],l=y.useRef(t);y.useEffect(function(){l.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var j=tT([t.lockRef.current],(t.shards||[]).map(I5),!0).filter(Boolean);return j.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),j.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=y.useCallback(function(j,x){if("touches"in j&&j.touches.length===2)return!l.current.allowPinchZoom;var f=Pf(j),g=r.current,v="deltaX"in j?j.deltaX:g[0]-f[0],w="deltaY"in j?j.deltaY:g[1]-f[1],k,T=j.target,S=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in j&&S==="h"&&T.type==="range")return!1;var C=P5(S,T);if(!C)return!0;if(C?k=S:(k=S==="v"?"h":"v",C=P5(S,T)),!C)return!1;if(!n.current&&"changedTouches"in j&&(v||w)&&(n.current=k),!k)return!0;var E=n.current||k;return b9(E,x,j,E==="h"?v:w)},[]),c=y.useCallback(function(j){var x=j;if(!(!_d.length||_d[_d.length-1]!==i)){var f="deltaY"in x?D5(x):Pf(x),g=s.current.filter(function(k){return k.name===x.type&&k.target===x.target&&N9(k.delta,f)})[0];if(g&&g.should){x.cancelable&&x.preventDefault();return}if(!g){var v=(l.current.shards||[]).map(I5).filter(Boolean).filter(function(k){return k.contains(x.target)}),w=v.length>0?o(x,v[0]):!l.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),d=y.useCallback(function(j,x,f,g){var v={name:j,delta:x,target:f,should:g};s.current.push(v),setTimeout(function(){s.current=s.current.filter(function(w){return w!==v})},1)},[]),u=y.useCallback(function(j){r.current=Pf(j),n.current=void 0},[]),m=y.useCallback(function(j){d(j.type,D5(j),j.target,o(j,t.lockRef.current))},[]),h=y.useCallback(function(j){d(j.type,Pf(j),j.target,o(j,t.lockRef.current))},[]);y.useEffect(function(){return _d.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Md),document.addEventListener("touchmove",c,Md),document.addEventListener("touchstart",u,Md),function(){_d=_d.filter(function(j){return j!==i}),document.removeEventListener("wheel",c,Md),document.removeEventListener("touchmove",c,Md),document.removeEventListener("touchstart",u,Md)}},[]);var p=t.removeScrollBar,b=t.inert;return y.createElement(y.Fragment,null,b?y.createElement(i,{styles:w9(a)}):null,p?y.createElement(lT,{gapMode:"margin"}):null)}const A9=aT(uE,C9);var fE=y.forwardRef(function(t,s){return y.createElement(Lg,jn({},t,{ref:s,sideCar:A9}))});fE.classNames=Lg.classNames;const T9=[" ","Enter","ArrowUp","ArrowDown"],E9=[" ","Enter"],Fg="Select",[Rg,Mg,P9]=KM(Fg),[zu,jQ]=QM(Fg,[P9,iE]),J2=iE(),[D9,Yc]=zu(Fg),[I9,k9]=zu(Fg),L9=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:p}=t,b=J2(s),[j,x]=y.useState(null),[f,g]=y.useState(null),[v,w]=y.useState(!1),k=XM(d),[T=!1,S]=E5({prop:n,defaultProp:a,onChange:i}),[C,E]=E5({prop:l,defaultProp:o,onChange:c}),M=y.useRef(null),D=j?!!j.closest("form"):!0,[A,I]=y.useState(new Set),L=Array.from(A).map(F=>F.props.value).join(";");return y.createElement(t9,b,y.createElement(D9,{required:p,scope:s,trigger:j,onTriggerChange:x,valueNode:f,onValueNodeChange:g,valueNodeHasChildren:v,onValueNodeHasChildrenChange:w,contentId:zT(),value:C,onValueChange:E,open:T,onOpenChange:S,dir:k,triggerPointerDownPosRef:M,disabled:h},y.createElement(Rg.Provider,{scope:s},y.createElement(I9,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(F=>{I(B=>new Set(B).add(F))},[]),onNativeOptionRemove:y.useCallback(F=>{I(B=>{const R=new Set(B);return R.delete(F),R})},[])},r)),D?y.createElement(jE,{key:L,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:C,onChange:F=>E(F.target.value),disabled:h},C===void 0?y.createElement("option",{value:""}):null,Array.from(A)):null))},F9="SelectTrigger",R9=y.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,i=J2(r),l=Yc(F9,r),o=l.disabled||n,c=Ka(s,l.onTriggerChange),d=Mg(r),[u,m,h]=yE(b=>{const j=d().filter(g=>!g.disabled),x=j.find(g=>g.value===l.value),f=bE(j,b,x);f!==void 0&&l.onValueChange(f.value)}),p=()=>{o||(l.onOpenChange(!0),h())};return y.createElement(s9,it({asChild:!0},i),y.createElement(Xn.button,it({type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":l.value===void 0?"":void 0},a,{ref:c,onClick:Ur(a.onClick,b=>{b.currentTarget.focus()}),onPointerDown:Ur(a.onPointerDown,b=>{const j=b.target;j.hasPointerCapture(b.pointerId)&&j.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&(p(),l.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)},b.preventDefault())}),onKeyDown:Ur(a.onKeyDown,b=>{const j=u.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(j&&b.key===" ")&&T9.includes(b.key)&&(p(),b.preventDefault())})})))}),M9="SelectValue",_9=y.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:l,...o}=t,c=Yc(M9,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=Ka(s,c.onValueNodeChange);return kl(()=>{d(u)},[d,u]),y.createElement(Xn.span,it({},o,{ref:m,style:{pointerEvents:"none"}}),c.value===void 0&&l!==void 0?l:i)}),O9=y.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return y.createElement(Xn.span,it({"aria-hidden":!0},a,{ref:s}),n||"▼")}),$9=t=>y.createElement(n9,it({asChild:!0},t)),Su="SelectContent",B9=y.forwardRef((t,s)=>{const r=Yc(Su,t.__scopeSelect),[n,a]=y.useState();if(kl(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Ml.createPortal(y.createElement(xE,{scope:t.__scopeSelect},y.createElement(Rg.Slot,{scope:t.__scopeSelect},y.createElement("div",null,t.children))),i):null}return y.createElement(z9,it({},t,{ref:s}))}),vl=10,[xE,Qc]=zu(Su),z9=y.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:b,hideWhenDetached:j,avoidCollisions:x,...f}=t,g=Yc(Su,r),[v,w]=y.useState(null),[k,T]=y.useState(null),S=Ka(s,ne=>w(ne)),[C,E]=y.useState(null),[M,D]=y.useState(null),A=Mg(r),[I,L]=y.useState(!1),F=y.useRef(!1);y.useEffect(()=>{if(v)return hT(v)},[v]),m_();const B=y.useCallback(ne=>{const[le,...oe]=A().map(we=>we.ref.current),[pe]=oe.slice(-1),je=document.activeElement;for(const we of ne)if(we===je||(we==null||we.scrollIntoView({block:"nearest"}),we===le&&k&&(k.scrollTop=0),we===pe&&k&&(k.scrollTop=k.scrollHeight),we==null||we.focus(),document.activeElement!==je))return},[A,k]),R=y.useCallback(()=>B([C,v]),[B,C,v]);y.useEffect(()=>{I&&R()},[I,R]);const{onOpenChange:$,triggerPointerDownPosRef:U}=g;y.useEffect(()=>{if(v){let ne={x:0,y:0};const le=pe=>{var je,we,Re,ye;ne={x:Math.abs(Math.round(pe.pageX)-((je=(we=U.current)===null||we===void 0?void 0:we.x)!==null&&je!==void 0?je:0)),y:Math.abs(Math.round(pe.pageY)-((Re=(ye=U.current)===null||ye===void 0?void 0:ye.y)!==null&&Re!==void 0?Re:0))}},oe=pe=>{ne.x<=10&&ne.y<=10?pe.preventDefault():v.contains(pe.target)||$(!1),document.removeEventListener("pointermove",le),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",oe,{capture:!0})}}},[v,$,U]),y.useEffect(()=>{const ne=()=>$(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[$]);const[W,q]=yE(ne=>{const le=A().filter(je=>!je.disabled),oe=le.find(je=>je.ref.current===document.activeElement),pe=bE(le,ne,oe);pe&&setTimeout(()=>pe.ref.current.focus())}),_=y.useCallback((ne,le,oe)=>{const pe=!F.current&&!oe;(g.value!==void 0&&g.value===le||pe)&&(E(ne),pe&&(F.current=!0))},[g.value]),V=y.useCallback(()=>v==null?void 0:v.focus(),[v]),Q=y.useCallback((ne,le,oe)=>{const pe=!F.current&&!oe;(g.value!==void 0&&g.value===le||pe)&&D(ne)},[g.value]),G=n==="popper"?k5:V9,Y=G===k5?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:b,hideWhenDetached:j,avoidCollisions:x}:{};return y.createElement(xE,{scope:r,content:v,viewport:k,onViewportChange:T,itemRefCallback:_,selectedItem:C,onItemLeave:V,itemTextRefCallback:Q,focusSelectedItem:R,selectedItemText:M,position:n,isPositioned:I,searchRef:W},y.createElement(fE,{as:q2,allowPinchZoom:!0},y.createElement(h_,{asChild:!0,trapped:g.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:Ur(a,ne=>{var le;(le=g.trigger)===null||le===void 0||le.focus({preventScroll:!0}),ne.preventDefault()})},y.createElement(c_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>g.onOpenChange(!1)},y.createElement(G,it({role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:ne=>ne.preventDefault()},f,Y,{onPlaced:()=>L(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...f.style},onKeyDown:Ur(f.onKeyDown,ne=>{const le=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!le&&ne.key.length===1&&q(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let pe=A().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const je=ne.target,we=pe.indexOf(je);pe=pe.slice(we+1)}setTimeout(()=>B(pe)),ne.preventDefault()}})}))))))}),V9=y.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,i=Yc(Su,r),l=Qc(Su,r),[o,c]=y.useState(null),[d,u]=y.useState(null),m=Ka(s,S=>u(S)),h=Mg(r),p=y.useRef(!1),b=y.useRef(!0),{viewport:j,selectedItem:x,selectedItemText:f,focusSelectedItem:g}=l,v=y.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&j&&x&&f){const S=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),M=f.getBoundingClientRect();if(i.dir!=="rtl"){const je=M.left-C.left,we=E.left-je,Re=S.left-we,ye=S.width+Re,Se=Math.max(ye,C.width),he=window.innerWidth-vl,ke=c5(we,[vl,he-Se]);o.style.minWidth=ye+"px",o.style.left=ke+"px"}else{const je=C.right-M.right,we=window.innerWidth-E.right-je,Re=window.innerWidth-S.right-we,ye=S.width+Re,Se=Math.max(ye,C.width),he=window.innerWidth-vl,ke=c5(we,[vl,he-Se]);o.style.minWidth=ye+"px",o.style.right=ke+"px"}const D=h(),A=window.innerHeight-vl*2,I=j.scrollHeight,L=window.getComputedStyle(d),F=parseInt(L.borderTopWidth,10),B=parseInt(L.paddingTop,10),R=parseInt(L.borderBottomWidth,10),$=parseInt(L.paddingBottom,10),U=F+B+I+$+R,W=Math.min(x.offsetHeight*5,U),q=window.getComputedStyle(j),_=parseInt(q.paddingTop,10),V=parseInt(q.paddingBottom,10),Q=S.top+S.height/2-vl,G=A-Q,Y=x.offsetHeight/2,ne=x.offsetTop+Y,le=F+B+ne,oe=U-le;if(le<=Q){const je=x===D[D.length-1].ref.current;o.style.bottom="0px";const we=d.clientHeight-j.offsetTop-j.offsetHeight,Re=Math.max(G,Y+(je?V:0)+we+R),ye=le+Re;o.style.height=ye+"px"}else{const je=x===D[0].ref.current;o.style.top="0px";const Re=Math.max(Q,F+j.offsetTop+(je?_:0)+Y)+oe;o.style.height=Re+"px",j.scrollTop=le-Q+j.offsetTop}o.style.margin=`${vl}px 0`,o.style.minHeight=W+"px",o.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,o,d,j,x,f,i.dir,n]);kl(()=>v(),[v]);const[w,k]=y.useState();kl(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const T=y.useCallback(S=>{S&&b.current===!0&&(v(),g==null||g(),b.current=!1)},[v,g]);return y.createElement(U9,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:T},y.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w}},y.createElement(Xn.div,it({},a,{ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))}),k5=y.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=vl,...i}=t,l=J2(r);return y.createElement(r9,it({},l,i,{ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[U9,X2]=zu(Su,{}),L5="SelectViewport",q9=y.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Qc(L5,r),i=X2(L5,r),l=Ka(s,a.onViewportChange),o=y.useRef(0);return y.createElement(y.Fragment,null,y.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),y.createElement(Rg.Slot,{scope:r},y.createElement(Xn.div,it({"data-radix-select-viewport":"",role:"presentation"},n,{ref:l,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:Ur(n.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&u){const h=Math.abs(o.current-d.scrollTop);if(h>0){const p=window.innerHeight-vl*2,b=parseFloat(u.style.minHeight),j=parseFloat(u.style.height),x=Math.max(b,j);if(x<p){const f=x+h,g=Math.min(p,f),v=f-g;u.style.height=g+"px",u.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,u.style.justifyContent="flex-end")}}}o.current=d.scrollTop})}))))}),H9="SelectGroup",[yQ,W9]=zu(H9),G9="SelectLabel",K9=y.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=W9(G9,r);return y.createElement(Xn.div,it({id:a.id},n,{ref:s}))}),Qy="SelectItem",[Y9,gE]=zu(Qy),Q9=y.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...l}=t,o=Yc(Qy,r),c=Qc(Qy,r),d=o.value===n,[u,m]=y.useState(i??""),[h,p]=y.useState(!1),b=Ka(s,f=>{var g;return(g=c.itemRefCallback)===null||g===void 0?void 0:g.call(c,f,n,a)}),j=zT(),x=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};return y.createElement(Y9,{scope:r,value:n,disabled:a,textId:j,isSelected:d,onItemTextChange:y.useCallback(f=>{m(g=>{var v;return g||((v=f==null?void 0:f.textContent)!==null&&v!==void 0?v:"").trim()})},[])},y.createElement(Rg.ItemSlot,{scope:r,value:n,disabled:a,textValue:u},y.createElement(Xn.div,it({role:"option","aria-labelledby":j,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},l,{ref:b,onFocus:Ur(l.onFocus,()=>p(!0)),onBlur:Ur(l.onBlur,()=>p(!1)),onPointerUp:Ur(l.onPointerUp,x),onPointerMove:Ur(l.onPointerMove,f=>{if(a){var g;(g=c.onItemLeave)===null||g===void 0||g.call(c)}else f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ur(l.onPointerLeave,f=>{if(f.currentTarget===document.activeElement){var g;(g=c.onItemLeave)===null||g===void 0||g.call(c)}}),onKeyDown:Ur(l.onKeyDown,f=>{var g;((g=c.searchRef)===null||g===void 0?void 0:g.current)!==""&&f.key===" "||(E9.includes(f.key)&&x(),f.key===" "&&f.preventDefault())})}))))}),Df="SelectItemText",Z9=y.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...i}=t,l=Yc(Df,r),o=Qc(Df,r),c=gE(Df,r),d=k9(Df,r),[u,m]=y.useState(null),h=Ka(s,f=>m(f),c.onItemTextChange,f=>{var g;return(g=o.itemTextRefCallback)===null||g===void 0?void 0:g.call(o,f,c.value,c.disabled)}),p=u==null?void 0:u.textContent,b=y.useMemo(()=>y.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},p),[c.disabled,c.value,p]),{onNativeOptionAdd:j,onNativeOptionRemove:x}=d;return kl(()=>(j(b),()=>x(b)),[j,x,b]),y.createElement(y.Fragment,null,y.createElement(Xn.span,it({id:c.textId},i,{ref:h})),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ml.createPortal(i.children,l.valueNode):null)}),J9="SelectItemIndicator",X9=y.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return gE(J9,r).isSelected?y.createElement(Xn.span,it({"aria-hidden":!0},n,{ref:s})):null}),F5="SelectScrollUpButton",e$=y.forwardRef((t,s)=>{const r=Qc(F5,t.__scopeSelect),n=X2(F5,t.__scopeSelect),[a,i]=y.useState(!1),l=Ka(s,n.onScrollButtonChange);return kl(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=o.scrollTop>0;i(d)};const o=r.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?y.createElement(vE,it({},t,{ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}})):null}),R5="SelectScrollDownButton",t$=y.forwardRef((t,s)=>{const r=Qc(R5,t.__scopeSelect),n=X2(R5,t.__scopeSelect),[a,i]=y.useState(!1),l=Ka(s,n.onScrollButtonChange);return kl(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=o.scrollHeight-o.clientHeight,u=Math.ceil(o.scrollTop)<d;i(u)};const o=r.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?y.createElement(vE,it({},t,{ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}})):null}),vE=y.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,i=Qc("SelectScrollButton",r),l=y.useRef(null),o=Mg(r),c=y.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),kl(()=>{var d;const u=o().find(m=>m.ref.current===document.activeElement);u==null||(d=u.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[o]),y.createElement(Xn.div,it({"aria-hidden":!0},a,{ref:s,style:{flexShrink:0,...a.style},onPointerDown:Ur(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Ur(a.onPointerMove,()=>{var d;(d=i.onItemLeave)===null||d===void 0||d.call(i),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Ur(a.onPointerLeave,()=>{c()})}))}),s$=y.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return y.createElement(Xn.div,it({"aria-hidden":!0},n,{ref:s}))}),jE=y.forwardRef((t,s)=>{const{value:r,...n}=t,a=y.useRef(null),i=Ka(s,a),l=i9(r);return y.useEffect(()=>{const o=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&u){const m=new Event("change",{bubbles:!0});u.call(o,r),o.dispatchEvent(m)}},[l,r]),y.createElement(p9,{asChild:!0},y.createElement("select",it({},n,{ref:i,defaultValue:r})))});jE.displayName="BubbleSelect";function yE(t){const s=$o(t),r=y.useRef(""),n=y.useRef(0),a=y.useCallback(l=>{const o=r.current+l;s(o),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function bE(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=r$(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function r$(t,s){return t.map((r,n)=>t[(s+n)%t.length])}const n$=L9,NE=R9,a$=_9,i$=O9,l$=$9,wE=B9,o$=q9,SE=K9,CE=Q9,c$=Z9,d$=X9,AE=e$,TE=t$,EE=s$,Be=n$,ze=a$,Oe=y.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(NE,{ref:n,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(i$,{asChild:!0,children:e.jsx(L2,{className:"h-4 w-4 opacity-50"})})]}));Oe.displayName=NE.displayName;const PE=y.forwardRef(({className:t,...s},r)=>e.jsx(AE,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(w8,{className:"h-4 w-4"})}));PE.displayName=AE.displayName;const DE=y.forwardRef(({className:t,...s},r)=>e.jsx(TE,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(L2,{className:"h-4 w-4"})}));DE.displayName=TE.displayName;const $e=y.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(l$,{children:e.jsxs(wE,{ref:a,className:Ge("relative z-50 max-h-96 min-w-[8rem] overflow-auto rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(PE,{}),e.jsx(o$,{className:Ge("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(DE,{})]})}));$e.displayName=wE.displayName;const u$=y.forwardRef(({className:t,...s},r)=>e.jsx(SE,{ref:r,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));u$.displayName=SE.displayName;const J=y.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(CE,{ref:n,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(d$,{children:e.jsx(Ru,{className:"h-4 w-4"})})}),e.jsx(c$,{children:s})]}));J.displayName=CE.displayName;const m$=y.forwardRef(({className:t,...s},r)=>e.jsx(EE,{ref:r,className:Ge("-mx-1 my-1 h-px bg-muted",t),...s}));m$.displayName=EE.displayName;var h$="Label",IE=y.forwardRef((t,s)=>e.jsx(ys.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));IE.displayName=h$;var kE=IE;const p$=Zh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=y.forwardRef(({className:t,...s},r)=>e.jsx(kE,{ref:r,className:Ge(p$(),t),...s}));Z.displayName=kE.displayName;var ix=(t=>(t.NEW="new",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(ix||{});function tl(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,m]=y.useState([]),[h,p]=y.useState(!1);y.useEffect(()=>{b()},[]);const b=()=>{const A=[{id:"1",name:"Website Contact Form",type:"website",isActive:!0,trackingCode:"WEB_CONTACT",conversionRate:15.5,createdAt:new Date("2024-01-01")},{id:"2",name:"Facebook Ads",type:"advertising",isActive:!0,trackingCode:"FB_ADS",conversionRate:8.2,createdAt:new Date("2024-01-01")},{id:"3",name:"Customer Referral",type:"referral",isActive:!0,conversionRate:35.8,createdAt:new Date("2024-01-01")},{id:"4",name:"RV Show",type:"event",isActive:!0,trackingCode:"RV_SHOW_2024",conversionRate:22.1,createdAt:new Date("2024-01-01")},{id:"5",name:"Google Ads",type:"advertising",isActive:!0,trackingCode:"GOOGLE_ADS",conversionRate:12.3,createdAt:new Date("2024-01-01")},{id:"6",name:"Walk-in",type:"other",isActive:!0,conversionRate:45.2,createdAt:new Date("2024-01-01")}],I=[{id:"rep-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"rep-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"rep-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],L=xs("renter-insight-leads",[{id:"1",firstName:"John",lastName:"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website Contact Form",sourceId:"1",status:ix.NEW,assignedTo:"rep-001",notes:"Interested in Class A Motorhome, budget $150k-200k",score:85,lastActivity:new Date("2024-01-20"),customFields:{budget:"$150k-200k",timeframe:"3-6 months",experience:"First-time buyer"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",firstName:"Sarah",lastName:"Johnson",email:"sarah.j@email.com",phone:"(555) 987-6543",source:"Customer Referral",sourceId:"3",status:ix.QUALIFIED,assignedTo:"rep-002",notes:"Looking for travel trailer under $50k, referred by Mike Davis",score:92,lastActivity:new Date("2024-01-18"),customFields:{budget:"Under $50k",timeframe:"1-3 months",experience:"Experienced RVer"},createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-18")}]),F=xs("renter-insight-activities",[{id:"1",leadId:"1",type:"call",description:"Initial qualification call",outcome:"positive",duration:25,completedDate:new Date("2024-01-20"),userId:"rep-001",createdAt:new Date("2024-01-20")},{id:"2",leadId:"2",type:"email",description:"Sent product brochures",outcome:"positive",completedDate:new Date("2024-01-18"),userId:"rep-002",createdAt:new Date("2024-01-18")}]),B=[{leadId:"1",totalScore:85,demographicScore:30,behaviorScore:25,engagementScore:30,lastCalculated:new Date("2024-01-20"),factors:[{factor:"Budget Match",points:25,reason:"Budget aligns with inventory"},{factor:"Response Time",points:20,reason:"Quick response to outreach"},{factor:"Engagement Level",points:15,reason:"High email open rates"}]}],R=[{id:"1",leadId:"1",userId:"rep-001",type:"follow_up",title:"Follow up on motorhome interest",description:"Schedule showroom visit",dueDate:new Date("2024-01-25"),isCompleted:!1,priority:"high",createdAt:new Date("2024-01-20")}];n(A),m(I),s(L),i(F),o(B),d(R)},j=A=>{Xt("renter-insight-leads",A)},x=A=>{Xt("renter-insight-activities",A)},f=async A=>{p(!0);try{const I={id:Math.random().toString(36).substr(2,9),firstName:A.firstName||"",lastName:A.lastName||"",email:A.email||"",phone:A.phone||"",source:A.source||"",sourceId:A.sourceId||"",status:ix.NEW,assignedTo:A.assignedTo,notes:A.notes||"",score:0,lastActivity:new Date,customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},L=[...t,I];return s(L),j(L),await w({leadId:I.id,type:"note",description:`Lead created from ${I.source}`,userId:"current-user"}),await k(I.id),I}finally{p(!1)}},g=async(A,I)=>{const L=t.map(F=>F.id===A?{...F,status:I,updatedAt:new Date}:F);s(L),j(L),await w({leadId:A,type:"status_change",description:`Status changed to ${I}`,userId:"current-user"})},v=async(A,I)=>{var F;const L=t.map(B=>B.id===A?{...B,assignedTo:I,updatedAt:new Date}:B);s(L),j(L),await w({leadId:A,type:"note",description:`Lead assigned to ${(F=u.find(B=>B.id===I))==null?void 0:F.name}`,userId:"current-user"})},w=async A=>{const I={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",type:A.type||"note",description:A.description||"",outcome:A.outcome,duration:A.duration,scheduledDate:A.scheduledDate,completedDate:A.completedDate||new Date,userId:A.userId||"current-user",metadata:A.metadata,createdAt:new Date},L=[...a,I];i(L),x(L);const F=t.map(B=>B.id===I.leadId?{...B,lastActivity:new Date,updatedAt:new Date}:B);s(F),j(F),await k(I.leadId)},k=async A=>{var Y,ne,le;const I=t.find(oe=>oe.id===A);if(!I)return;const L=a.filter(oe=>oe.leadId===A);let F=0,B=0,R=0;const $=[];(Y=I.customFields)!=null&&Y.budget&&(F+=20,$.push({factor:"Budget Provided",points:20,reason:"Customer provided budget information"})),((ne=I.customFields)==null?void 0:ne.timeframe)==="1-3 months"?(F+=25,$.push({factor:"Short Timeframe",points:25,reason:"Ready to purchase soon"})):((le=I.customFields)==null?void 0:le.timeframe)==="3-6 months"&&(F+=15,$.push({factor:"Medium Timeframe",points:15,reason:"Moderate purchase timeline"})),L.filter(oe=>oe.type==="call").length>0&&(B+=30,$.push({factor:"Phone Engagement",points:30,reason:"Participated in phone calls"})),L.filter(oe=>oe.type==="email").length>2&&(B+=20,$.push({factor:"Email Engagement",points:20,reason:"Active email communication"})),L.filter(oe=>new Date(oe.createdAt).getTime()>Date.now()-7*24*60*60*1e3).length>0&&(R+=25,$.push({factor:"Recent Activity",points:25,reason:"Active in the last 7 days"}));const _=L.filter(oe=>oe.outcome==="positive").length;_>0&&(R+=_*10,$.push({factor:"Positive Interactions",points:_*10,reason:`${_} positive interactions`}));const V=F+B+R,Q={leadId:A,totalScore:V,demographicScore:F,behaviorScore:B,engagementScore:R,lastCalculated:new Date,factors:$};o(oe=>oe.filter(pe=>pe.leadId!==A).concat(Q));const G=t.map(oe=>oe.id===A?{...oe,score:V,updatedAt:new Date}:oe);s(G),j(G)};return{leads:t,sources:r,activities:a,scores:l,reminders:c,salesReps:u,loading:h,createLead:f,updateLeadStatus:g,assignLead:v,logActivity:w,calculateLeadScore:k,createReminder:async A=>{const I={id:Math.random().toString(36).substr(2,9),leadId:A.leadId||"",userId:A.userId||"current-user",type:A.type||"follow_up",title:A.title||"",description:A.description||"",dueDate:A.dueDate||new Date,isCompleted:!1,priority:A.priority||"medium",createdAt:new Date};return d(L=>[...L,I]),I},completeReminder:async A=>{d(I=>I.map(L=>L.id===A?{...L,isCompleted:!0}:L))},getLeadsByRep:A=>t.filter(I=>I.assignedTo===A),getActivitiesByLead:A=>a.filter(I=>I.leadId===A),getRemindersByUser:A=>c.filter(I=>I.userId===A&&!I.isCompleted),getLeadScore:A=>l.find(I=>I.leadId===A)}}const f$=Zh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ae({className:t,variant:s,...r}){return e.jsx("div",{className:Ge(f$({variant:s}),t),...r})}function Zo({selectedTags:t=[],availableTags:s=[],onTagsChange:r,placeholder:n="Search or create tags...",maxTags:a}){const[i,l]=y.useState(""),o=s.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())&&!t.some(p=>p.id===h.id)),c=h=>{if(a&&t.length>=a)return;const p=[...t,h];r==null||r(p),l("")},d=h=>{const p=t.filter(b=>b.id!==h);r==null||r(p)},u=()=>{if(!i.trim())return;const h={id:`tag-${Date.now()}`,name:i.trim(),color:"#3b82f6"};c(h)},m=i.trim()&&!s.some(h=>h.name.toLowerCase()===i.toLowerCase())&&(!a||t.length<a);return e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Tags"}),e.jsx(Ee,{children:"Select or create tags to organize your content"})]}),e.jsxs(te,{className:"space-y-4",children:[t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(h=>e.jsxs(Ae,{variant:"secondary",className:"flex items-center gap-1",style:{backgroundColor:`${h.color}20`,color:h.color},children:[h.name,e.jsx(H,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent",onClick:()=>d(h.id),children:e.jsx(St,{className:"h-3 w-3"})})]},h.id))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ge,{placeholder:n,value:i,onChange:h=>l(h.target.value),disabled:a?t.length>=a:!1}),m&&e.jsxs(H,{variant:"outline",size:"sm",onClick:u,className:"w-full",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),'Create "',i,'"']})]}),o.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.slice(0,10).map(h=>e.jsx(H,{variant:"outline",size:"sm",onClick:()=>c(h),className:"h-8",disabled:a?t.length>=a:!1,children:h.name},h.id))})]}),a&&t.length>=a&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Maximum of ",a," tags allowed"]})]})]})}function LE(t){const s=y.useRef({value:t,previous:t});return y.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}function FE(t){const[s,r]=y.useState(void 0);return Rc(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;r({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var _g="Checkbox",[x$,bQ]=Ol(_g),[g$,eb]=x$(_g);function v$(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=t,[h,p]=Fu({prop:r,defaultProp:a??!1,onChange:c,caller:_g}),[b,j]=y.useState(null),[x,f]=y.useState(null),g=y.useRef(!1),v=b?!!l||!!b.closest("form"):!0,w={checked:h,disabled:i,setChecked:p,control:b,setControl:j,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:Do(a)?!1:a,isFormControl:v,bubbleInput:x,setBubbleInput:f};return e.jsx(g$,{scope:s,...w,children:j$(m)?m(w):n})}var RE="CheckboxTrigger",ME=y.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:b}=eb(RE,t),j=Wr(a,u),x=y.useRef(c);return y.useEffect(()=>{const f=i==null?void 0:i.form;if(f){const g=()=>m(x.current);return f.addEventListener("reset",g),()=>f.removeEventListener("reset",g)}},[i,m]),e.jsx(ys.button,{type:"button",role:"checkbox","aria-checked":Do(c)?"mixed":c,"aria-required":d,"data-state":zE(c),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:j,onKeyDown:Ns(s,f=>{f.key==="Enter"&&f.preventDefault()}),onClick:Ns(r,f=>{m(g=>Do(g)?!0:!g),b&&p&&(h.current=f.isPropagationStopped(),h.current||f.stopPropagation())})})});ME.displayName=RE;var tb=y.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=t;return e.jsx(v$,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(ME,{...m,ref:s,__scopeCheckbox:r}),h&&e.jsx(BE,{__scopeCheckbox:r})]})})});tb.displayName=_g;var _E="CheckboxIndicator",OE=y.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,i=eb(_E,r);return e.jsx(Wc,{present:n||Do(i.checked)||i.checked===!0,children:e.jsx(ys.span,{"data-state":zE(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});OE.displayName=_E;var $E="CheckboxBubbleInput",BE=y.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:p}=eb($E,t),b=Wr(r,p),j=LE(i),x=FE(n);y.useEffect(()=>{const g=h;if(!g)return;const v=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(v,"checked").set,T=!a.current;if(j!==i&&k){const S=new Event("click",{bubbles:T});g.indeterminate=Do(i),k.call(g,Do(i)?!1:i),g.dispatchEvent(S)}},[h,j,i,a]);const f=y.useRef(Do(i)?!1:i);return e.jsx(ys.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??f.current,required:o,disabled:c,name:d,value:u,form:m,...s,tabIndex:-1,ref:b,style:{...s.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});BE.displayName=$E;function j$(t){return typeof t=="function"}function Do(t){return t==="indeterminate"}function zE(t){return Do(t)?"indeterminate":t?"checked":"unchecked"}const Ct=y.forwardRef(({className:t,...s},r)=>e.jsx(tb,{ref:r,className:Ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(OE,{className:Ge("flex items-center justify-center text-current"),children:e.jsx(Ru,{className:"h-4 w-4"})})}));Ct.displayName=tb.displayName;var Fs=(t=>(t.LEAD="lead",t.DEAL="deal",t.CLIENT="client",t.INVENTORY="inventory",t.CUSTOM="custom",t))(Fs||{}),ci=(t=>(t.STATUS="status",t.PRIORITY="priority",t.SOURCE="source",t.BEHAVIOR="behavior",t.DEMOGRAPHIC="demographic",t.PRODUCT="product",t.LOCATION="location",t.CUSTOM="custom",t))(ci||{}),xn=(t=>(t.EQUALS="equals",t.NOT_EQUALS="not_equals",t.CONTAINS="contains",t.NOT_CONTAINS="not_contains",t.STARTS_WITH="starts_with",t.ENDS_WITH="ends_with",t.GREATER_THAN="greater_than",t.LESS_THAN="less_than",t.BETWEEN="between",t.IN="in",t.NOT_IN="not_in",t.IS_EMPTY="is_empty",t.IS_NOT_EMPTY="is_not_empty",t))(xn||{});function y$(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,m]=y.useState([]),[h,p]=y.useState(!1);y.useMemo(()=>t.reduce((G,Y)=>G+Y.usageCount,0),[t]),y.useEffect(()=>{b()},[]);const b=()=>{const G=xs("renter-insight-tags",j()),Y=xs("renter-insight-tag-assignments",[]),ne=xs("renter-insight-tag-rules",x()),le=xs("renter-insight-tag-segments",[]);s(G),n(Y),i(ne),o(le)},j=()=>[{id:"tag-lead-hot",name:"Hot Lead",description:"High-priority lead with strong buying signals",color:"#ef4444",category:ci.PRIORITY,type:[Fs.LEAD],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-lead-warm",name:"Warm Lead",description:"Engaged lead showing interest",color:"#f59e0b",category:ci.PRIORITY,type:[Fs.LEAD],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-lead-cold",name:"Cold Lead",description:"Low engagement, needs nurturing",color:"#6b7280",category:ci.PRIORITY,type:[Fs.LEAD],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-deal-high-value",name:"High Value",description:"Deal value above $100k",color:"#10b981",category:ci.PRIORITY,type:[Fs.DEAL],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-deal-quick-close",name:"Quick Close",description:"Deal expected to close within 30 days",color:"#8b5cf6",category:ci.STATUS,type:[Fs.DEAL],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-client-vip",name:"VIP Client",description:"High-value customer requiring special attention",color:"#dc2626",category:ci.STATUS,type:[Fs.CLIENT],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-client-repeat",name:"Repeat Customer",description:"Customer with multiple purchases",color:"#059669",category:ci.BEHAVIOR,type:[Fs.CLIENT],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-inventory-featured",name:"Featured",description:"Featured inventory item",color:"#3b82f6",category:ci.STATUS,type:[Fs.INVENTORY],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"tag-inventory-clearance",name:"Clearance",description:"Inventory marked for clearance",color:"#dc2626",category:ci.STATUS,type:[Fs.INVENTORY],isSystem:!0,isActive:!0,usageCount:0,createdBy:"system",createdAt:new Date,updatedAt:new Date}],x=()=>[{id:"rule-hot-lead",name:"Auto-tag Hot Leads",description:"Automatically tag leads with score > 80 as hot",tagId:"tag-lead-hot",conditions:[{id:"cond-1",field:"score",operator:xn.GREATER_THAN,value:80}],isActive:!0,autoApply:!0,priority:1,createdBy:"system",createdAt:new Date,updatedAt:new Date},{id:"rule-high-value-deal",name:"Auto-tag High Value Deals",description:"Automatically tag deals over $100k as high value",tagId:"tag-deal-high-value",conditions:[{id:"cond-2",field:"value",operator:xn.GREATER_THAN,value:1e5}],isActive:!0,autoApply:!0,priority:1,createdBy:"system",createdAt:new Date,updatedAt:new Date}],f=G=>{Xt("renter-insight-tags",G)},g=G=>{Xt("renter-insight-tag-assignments",G)},v=G=>{Xt("renter-insight-tag-rules",G)},w=G=>{Xt("renter-insight-tag-segments",G)},k=async G=>{p(!0);try{const Y={id:Math.random().toString(36).substr(2,9),name:G.name||"",description:G.description,color:G.color||"#3b82f6",category:G.category||ci.CUSTOM,type:G.type||[Fs.CUSTOM],isSystem:!1,isActive:!0,usageCount:0,createdBy:"current-user",createdAt:new Date,updatedAt:new Date},ne=[...t,Y];return s(ne),f(ne),Y}finally{p(!1)}},T=async(G,Y)=>{const ne=t.map(le=>le.id===G?{...le,...Y,updatedAt:new Date}:le);s(ne),f(ne)},S=async G=>{const Y=r.filter(le=>le.tagId!==G);n(Y),g(Y);const ne=t.filter(le=>le.id!==G);s(ne),f(ne)},C=async(G,Y,ne,le)=>{const oe=r.find(Re=>Re.tagId===G&&Re.entityId===Y&&Re.entityType===ne);if(oe)return oe;const pe={id:Math.random().toString(36).substr(2,9),tagId:G,entityId:Y,entityType:ne,assignedBy:"current-user",assignedAt:new Date,metadata:le},je=[...r,pe];n(je),g(je);const we=t.map(Re=>Re.id===G?{...Re,usageCount:Re.usageCount+1,updatedAt:new Date}:Re);return s(we),f(we),pe},E=async(G,Y,ne)=>{const le=r.filter(pe=>!(pe.tagId===G&&pe.entityId===Y&&pe.entityType===ne));n(le),g(le);const oe=t.map(pe=>pe.id===G?{...pe,usageCount:Math.max(0,pe.usageCount-1),updatedAt:new Date}:pe);s(oe),f(oe)},M=(G,Y)=>r.filter(le=>le.entityId===G&&le.entityType===Y).map(le=>{const oe=t.find(pe=>pe.id===le.tagId);return oe?{...oe,assignment:le}:null}).filter(Boolean),D=G=>t.filter(Y=>Y.type.includes(G)&&Y.isActive),A=G=>t.filter(Y=>Y.category===G&&Y.isActive),I=(G,Y)=>{let ne=t.filter(le=>le.isActive);if(Y&&(ne=ne.filter(le=>le.type.includes(Y))),G){const le=G.toLowerCase();ne=ne.filter(oe=>{var pe;return oe.name.toLowerCase().includes(le)||((pe=oe.description)==null?void 0:pe.toLowerCase().includes(le))})}return ne},L=async G=>{const Y={id:Math.random().toString(36).substr(2,9),name:G.name||"",description:G.description||"",tagId:G.tagId||"",conditions:G.conditions||[],isActive:!0,autoApply:G.autoApply||!1,priority:G.priority||1,createdBy:"current-user",createdAt:new Date,updatedAt:new Date},ne=[...a,Y];return i(ne),v(ne),Y},F=async(G,Y,ne)=>{const le=a.filter(oe=>{var pe;return oe.isActive&&oe.autoApply&&((pe=t.find(je=>je.id===oe.tagId))==null?void 0:pe.type.includes(Y))});for(const oe of le)B(oe.conditions,ne)&&await C(oe.tagId,G,Y,{appliedByRule:oe.id,appliedAt:new Date})},B=(G,Y)=>{if(G.length===0)return!1;let ne=!0,le="AND";for(let oe=0;oe<G.length;oe++){const pe=G[oe],je=$(Y,pe.field),we=R(pe,je);oe===0?ne=we:le==="AND"?ne=ne&&we:ne=ne||we,pe.logicalOperator&&(le=pe.logicalOperator)}return ne},R=(G,Y)=>{const{operator:ne,value:le}=G;switch(ne){case xn.EQUALS:return Y===le;case xn.NOT_EQUALS:return Y!==le;case xn.CONTAINS:return String(Y).toLowerCase().includes(String(le).toLowerCase());case xn.NOT_CONTAINS:return!String(Y).toLowerCase().includes(String(le).toLowerCase());case xn.STARTS_WITH:return String(Y).toLowerCase().startsWith(String(le).toLowerCase());case xn.ENDS_WITH:return String(Y).toLowerCase().endsWith(String(le).toLowerCase());case xn.GREATER_THAN:return Number(Y)>Number(le);case xn.LESS_THAN:return Number(Y)<Number(le);case xn.BETWEEN:const[oe,pe]=Array.isArray(le)?le:[0,0];return Number(Y)>=Number(oe)&&Number(Y)<=Number(pe);case xn.IN:return Array.isArray(le)?le.includes(Y):!1;case xn.NOT_IN:return Array.isArray(le)?!le.includes(Y):!0;case xn.IS_EMPTY:return!Y||Y===""||Array.isArray(Y)&&Y.length===0;case xn.IS_NOT_EMPTY:return Y&&Y!==""&&(!Array.isArray(Y)||Y.length>0);default:return!1}},$=(G,Y)=>Y.split(".").reduce((ne,le)=>ne==null?void 0:ne[le],G);return{tags:t,assignments:r,rules:a,segments:l,bulkOperations:c,suggestions:u,loading:h,createTag:k,updateTag:T,deleteTag:S,assignTag:C,removeTag:E,getEntityTags:M,getTagsByType:D,getTagsByCategory:A,searchTags:I,createTagRule:L,applyTagRules:F,createSegment:async G=>{const Y={id:Math.random().toString(36).substr(2,9),name:G.name||"",description:G.description||"",entityType:G.entityType||Fs.LEAD,filters:G.filters||[],conditions:G.conditions||[],isActive:!0,entityCount:0,lastCalculated:new Date,createdBy:"current-user",createdAt:new Date,updatedAt:new Date},ne=[...l,Y];return o(ne),w(ne),Y},calculateSegmentEntities:(G,Y)=>Y.filter(ne=>{for(const le of G.filters){const pe=M(ne.id,G.entityType).map(we=>we.id),je=le.operator==="AND"?le.tagIds.every(we=>pe.includes(we)):le.tagIds.some(we=>pe.includes(we));if(le.exclude?je:!je)return!1}return G.conditions.length>0?B(G.conditions,ne):!0}),bulkAssignTags:async(G,Y,ne)=>{const le={id:Math.random().toString(36).substr(2,9),operation:"add",tagIds:G,entityIds:Y,entityType:ne,status:"processing",progress:0,totalEntities:Y.length,processedEntities:0,errors:[],createdBy:"current-user",createdAt:new Date};d(oe=>[...oe,le]);for(let oe=0;oe<Y.length;oe++){const pe=Y[oe];for(const je of G)try{await C(je,pe,ne)}catch{le.errors.push(`Failed to assign tag ${je} to entity ${pe}`)}le.processedEntities=oe+1,le.progress=Math.round(le.processedEntities/le.totalEntities*100),d(je=>je.map(we=>we.id===le.id?{...le}:we))}return le.status="completed",le.completedAt=new Date,d(oe=>oe.map(pe=>pe.id===le.id?{...le}:pe)),le},generateTagSuggestions:async(G,Y,ne)=>{const le=[],oe=D(Y);for(const je of oe){let we=0,Re="";if(Y===Fs.LEAD&&ne.score&&(je.name==="Hot Lead"&&ne.score>80?(we=90,Re=`High lead score (${ne.score})`):je.name==="Warm Lead"&&ne.score>60&&ne.score<=80?(we=85,Re=`Good lead score (${ne.score})`):je.name==="Cold Lead"&&ne.score<=60&&(we=80,Re=`Low lead score (${ne.score})`)),Y===Fs.DEAL&&ne.value){if(je.name==="High Value"&&ne.value>1e5)we=95,Re=`Deal value over $100k (${ne.value})`;else if(je.name==="Quick Close"&&ne.expectedCloseDate){const ye=Math.ceil((new Date(ne.expectedCloseDate).getTime()-Date.now())/864e5);ye<=30&&(we=85,Re=`Expected to close in ${ye} days`)}}Y===Fs.CLIENT&&je.name==="VIP Client"&&ne.totalPurchases>2e5&&(we=90,Re="High lifetime value customer"),we>0&&le.push({tagId:je.id,tagName:je.name,confidence:we,reason:Re})}const pe={id:Math.random().toString(36).substr(2,9),entityId:G,entityType:Y,suggestedTags:le.sort((je,we)=>we.confidence-je.confidence),generatedAt:new Date,isApplied:!1};return m(je=>[...je,pe]),pe},getTagAnalytics:G=>{const Y=t.find(pe=>pe.id===G);if(!Y)throw new Error("Tag not found");const ne=r.filter(pe=>pe.tagId===G),le=ne.reduce((pe,je)=>(pe[je.entityType]=(pe[je.entityType]||0)+1,pe),{}),oe=Array.from({length:30},(pe,je)=>{const we=new Date;return we.setDate(we.getDate()-(29-je)),{date:we.toISOString().split("T")[0],count:Math.floor(Math.random()*10)}});return{tagId:G,tagName:Y.name,totalUsage:Y.usageCount,entityBreakdown:le,trendData:oe,topEntities:ne.slice(0,10).map(pe=>({entityId:pe.entityId,entityName:`Entity ${pe.entityId}`,entityType:pe.entityType}))}},filterEntitiesByTags:(G,Y,ne)=>G.filter(le=>{for(const oe of Y){const je=M(le.id,ne).map(Re=>Re.id),we=oe.operator==="AND"?oe.tagIds.every(Re=>je.includes(Re)):oe.tagIds.some(Re=>je.includes(Re));if(oe.exclude?we:!we)return!1}return!0})}}function b$({entityType:t,filters:s,onFiltersChange:r,onApply:n,className:a}){const{getTagsByType:i}=y$(),[l,o]=y.useState(!1),c=i(t),d=()=>{const j={tagIds:[],operator:"OR",exclude:!1};r([...s,j])},u=j=>{const x=s.filter((f,g)=>g!==j);r(x)},m=(j,x)=>{const f=s.map((g,v)=>v===j?{...g,...x}:g);r(f)},h=(j,x)=>{const f=s[j],g=f.tagIds.includes(x)?f.tagIds.filter(v=>v!==x):[...f.tagIds,x];m(j,{tagIds:g})},p=()=>{r([])},b=s.length>0&&s.some(j=>j.tagIds.length>0);return e.jsxs("div",{className:Ge("space-y-4",a),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jn,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Tag Filters"}),b&&e.jsxs(Ae,{variant:"secondary",children:[s.reduce((j,x)=>j+x.tagIds.length,0)," tags"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[b&&e.jsx(H,{variant:"outline",size:"sm",onClick:p,children:"Clear All"}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>o(!l),children:l?e.jsx(P8,{className:"h-4 w-4"}):e.jsx(tt,{className:"h-4 w-4"})})]})]}),b&&!l&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((j,x)=>j.tagIds.map(f=>{const g=c.find(v=>v.id===f);return g?e.jsxs(Ae,{style:{backgroundColor:g.color,color:"white"},className:"flex items-center space-x-1 pr-1",children:[j.exclude&&e.jsx("span",{className:"text-xs",children:"NOT"}),e.jsx("span",{children:g.name}),e.jsx("button",{type:"button",onClick:()=>h(x,f),className:"ml-1 hover:bg-white/20 rounded-full p-0.5",children:e.jsx(St,{className:"h-3 w-3"})})]},`${x}-${f}`):null}))}),l&&e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Configure Tag Filters"}),e.jsx(Ee,{children:"Filter entities by their assigned tags"})]}),e.jsxs(te,{className:"space-y-6",children:[s.map((j,x)=>e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Z,{children:["Filter ",x+1]}),e.jsxs(Be,{value:j.operator,onValueChange:f=>m(x,{operator:f}),children:[e.jsx(Oe,{className:"w-24",children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"AND",children:"AND"}),e.jsx(J,{value:"OR",children:"OR"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`exclude-${x}`,checked:j.exclude,onCheckedChange:f=>m(x,{exclude:!!f})}),e.jsx(Z,{htmlFor:`exclude-${x}`,className:"text-sm",children:"Exclude"})]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>u(x),children:e.jsx(St,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Select Tags"}),e.jsx("div",{className:"grid gap-2 md:grid-cols-2 lg:grid-cols-3 max-h-40 overflow-y-auto",children:c.map(f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`tag-${x}-${f.id}`,checked:j.tagIds.includes(f.id),onCheckedChange:()=>h(x,f.id)}),e.jsxs(Z,{htmlFor:`tag-${x}-${f.id}`,className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.color}}),e.jsx("span",{className:"text-sm",children:f.name})]})]},f.id))})]}),j.tagIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:j.tagIds.map(f=>{const g=c.find(v=>v.id===f);return g?e.jsx(Ae,{style:{backgroundColor:g.color,color:"white"},className:"text-xs",children:g.name},f):null})})]},x)),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(H,{variant:"outline",onClick:d,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Filter Group"]}),n&&e.jsx(H,{onClick:n,children:"Apply Filters"})]})]})]})]})}const Q0=[{id:"1",name:"High Priority",color:"#ef4444",count:45},{id:"2",name:"Customer Service",color:"#3b82f6",count:32},{id:"3",name:"Sales Lead",color:"#10b981",count:28},{id:"4",name:"Follow Up",color:"#f59e0b",count:19},{id:"5",name:"VIP Customer",color:"#8b5cf6",count:12}],M5=[{id:"1",title:"Customer Inquiry - RV Rental",tags:["Customer Service","Follow Up"],date:"2024-01-15"},{id:"2",title:"Sales Opportunity - Luxury Coach",tags:["Sales Lead","High Priority","VIP Customer"],date:"2024-01-14"},{id:"3",title:"Service Request - Maintenance",tags:["Customer Service"],date:"2024-01-13"}];function _5(){const[t,s]=y.useState(""),r=Q0.filter(n=>n.name.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tagging Engine"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize and categorize your data with intelligent tagging"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Create Tag"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Tags"}),e.jsx(R8,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Q0.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active tagging system"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Tagged Items"}),e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M5.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items with tags applied"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Automation Rules"}),e.jsx($A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active auto-tagging rules"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(ge,{placeholder:"Search tags...",value:t,onChange:n=>s(n.target.value),className:"pl-10"})]}),e.jsxs(H,{variant:"outline",children:[e.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Filter"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>e.jsxs(ee,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ae,{style:{backgroundColor:n.color,color:"white"},className:"text-xs",children:n.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.count," items"]})]})}),e.jsx(te,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last used: 2 days ago"}),e.jsx(H,{variant:"ghost",size:"sm",children:"Manage"})]})})]},n.id))}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recently Tagged Items"}),e.jsx(Ee,{children:"Latest items that have been tagged in the system"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:M5.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:n.title}),e.jsx("div",{className:"flex gap-2 mt-2",children:n.tags.map(a=>{const i=Q0.find(l=>l.name===a);return e.jsx(Ae,{variant:"secondary",style:i?{backgroundColor:i.color+"20",color:i.color}:{},className:"text-xs",children:a},a)})})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.date})]},n.id))})})]})]})}function N$(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(_5,{})}),e.jsx(ot,{path:"/*",element:e.jsx(_5,{})})]})}function Vu({onClose:t,onSuccess:s}){const{sources:r,salesReps:n,createLead:a}=tl(),{toast:i}=xt(),[l,o]=y.useState(!1),[c,d]=y.useState({firstName:"",lastName:"",email:"",phone:"",source:"",sourceId:"",assignedTo:"",notes:"",customFields:{budget:"",timeframe:"",experience:"",interests:"",preferredContact:"email"}}),[u,m]=y.useState({}),h=()=>{const x={};return c.firstName.trim()||(x.firstName="First name is required"),c.lastName.trim()||(x.lastName="Last name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(x.email="Please enter a valid email address"):x.email="Email is required",c.phone.trim()||(x.phone="Phone number is required"),c.sourceId||(x.sourceId="Lead source is required"),m(x),Object.keys(x).length===0},p=async x=>{if(x.preventDefault(),!h()){i({title:"Validation Error",description:"Please fill in all required fields correctly.",variant:"destructive"});return}o(!0);try{const f=r.find(w=>w.id===c.sourceId),g={firstName:c.firstName.trim(),lastName:c.lastName.trim(),email:c.email.trim().toLowerCase(),phone:c.phone.trim(),source:(f==null?void 0:f.name)||"",sourceId:c.sourceId,assignedTo:c.assignedTo||void 0,notes:c.notes.trim(),customFields:{...c.customFields,interests:c.customFields.interests.trim()}},v=await a(g);i({title:"Lead Created Successfully!",description:`${v.firstName} ${v.lastName} has been added to your CRM.`,variant:"default"}),s(v),t()}catch(f){console.error("Error creating lead:",f),i({title:"Error Creating Lead",description:"There was a problem creating the lead. Please try again.",variant:"destructive"})}finally{o(!1)}},b=(x,f)=>{d(g=>({...g,[x]:f})),u[x]&&m(g=>({...g,[x]:""}))},j=(x,f)=>{d(g=>({...g,customFields:{...g.customFields,[x]:f}}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl flex items-center",children:[e.jsx(mr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Add New Lead"]}),e.jsx(Ee,{children:"Create a new lead and start the sales process"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(mr,{className:"h-4 w-4 mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name *"}),e.jsx(ge,{id:"firstName",value:c.firstName,onChange:x=>b("firstName",x.target.value),placeholder:"Enter first name",className:u.firstName?"border-red-500":""}),u.firstName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.firstName})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(ge,{id:"lastName",value:c.lastName,onChange:x=>b("lastName",x.target.value),placeholder:"Enter last name",className:u.lastName?"border-red-500":""}),u.lastName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.lastName})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Sr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"email",type:"email",value:c.email,onChange:x=>b("email",x.target.value),placeholder:"Enter email address",className:`pl-10 ${u.email?"border-red-500":""}`})]}),u.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.email})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"phone",type:"tel",value:c.phone,onChange:x=>b("phone",x.target.value),placeholder:"Enter phone number",className:`pl-10 ${u.phone?"border-red-500":""}`})]}),u.phone&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.phone})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ih,{className:"h-4 w-4 mr-2"}),"Lead Details"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"source",children:"Lead Source *"}),e.jsxs(Be,{value:c.sourceId,onValueChange:x=>b("sourceId",x),children:[e.jsx(Oe,{className:u.sourceId?"border-red-500":"",children:e.jsx(ze,{placeholder:"Select lead source"})}),e.jsx($e,{children:r.map(x=>e.jsx(J,{value:x.id,children:x.name},x.id))})]}),u.sourceId&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:u.sourceId})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"assignedTo",children:"Assign to Sales Rep"}),e.jsxs(Be,{value:c.assignedTo,onValueChange:x=>b("assignedTo",x),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select sales rep (optional)"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"Unassigned"}),n.map(x=>e.jsx(J,{value:x.id,children:x.name},x.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Additional Information"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"budget",children:"Budget Range"}),e.jsxs(Be,{value:c.customFields.budget,onValueChange:x=>j("budget",x),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select budget range"})}),e.jsxs($e,{children:[e.jsx(J,{value:"Under $50k",children:"Under $50k"}),e.jsx(J,{value:"$50k-$100k",children:"$50k-$100k"}),e.jsx(J,{value:"$100k-$150k",children:"$100k-$150k"}),e.jsx(J,{value:"$150k-$200k",children:"$150k-$200k"}),e.jsx(J,{value:"$200k+",children:"$200k+"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"timeframe",children:"Purchase Timeframe"}),e.jsxs(Be,{value:c.customFields.timeframe,onValueChange:x=>j("timeframe",x),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select timeframe"})}),e.jsxs($e,{children:[e.jsx(J,{value:"Immediate",children:"Immediate (within 1 month)"}),e.jsx(J,{value:"1-3 months",children:"1-3 months"}),e.jsx(J,{value:"3-6 months",children:"3-6 months"}),e.jsx(J,{value:"6-12 months",children:"6-12 months"}),e.jsx(J,{value:"12+ months",children:"12+ months"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"experience",children:"RV Experience"}),e.jsxs(Be,{value:c.customFields.experience,onValueChange:x=>j("experience",x),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select experience level"})}),e.jsxs($e,{children:[e.jsx(J,{value:"First-time buyer",children:"First-time buyer"}),e.jsx(J,{value:"Some experience",children:"Some experience"}),e.jsx(J,{value:"Experienced RVer",children:"Experienced RVer"}),e.jsx(J,{value:"Expert/Full-timer",children:"Expert/Full-timer"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"preferredContact",children:"Preferred Contact Method"}),e.jsxs(Be,{value:c.customFields.preferredContact,onValueChange:x=>j("preferredContact",x),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select contact method"})}),e.jsxs($e,{children:[e.jsx(J,{value:"email",children:"Email"}),e.jsx(J,{value:"phone",children:"Phone"}),e.jsx(J,{value:"text",children:"Text/SMS"}),e.jsx(J,{value:"any",children:"Any method"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"interests",children:"Interests/Requirements"}),e.jsx(ge,{id:"interests",value:c.customFields.interests,onChange:x=>j("interests",x.target.value),placeholder:"e.g., Class A Motorhome, Solar panels, Pet-friendly"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ih,{className:"h-4 w-4 mr-2"}),"Tags"]}),e.jsx(Zo,{entityId:"new-lead",entityType:Fs.LEAD,onTagsChange:()=>{},placeholder:"Add lead tags...",className:"w-full"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(kt,{id:"notes",value:c.notes,onChange:x=>b("notes",x.target.value),placeholder:"Add any additional notes about this lead...",rows:3})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Lead..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Lead"]})})]})]})})]})})}const w$=[{name:"Total Leads",value:"2,651",change:"+4.75%",changeType:"positive",icon:Ks},{name:"Inventory Units",value:"847",change:"+54.02%",changeType:"positive",icon:bn},{name:"Active Quotes",value:"124",change:"-1.39%",changeType:"negative",icon:Bt},{name:"Monthly Revenue",value:"$405,091",change:"+10.18%",changeType:"positive",icon:wt}],S$=[{id:1,type:"lead",title:"New lead from website",description:"John Smith interested in Class A Motorhome",time:"2 minutes ago"},{id:2,type:"quote",title:"Quote sent to customer",description:"Quote #Q-2024-001 sent to Sarah Johnson",time:"15 minutes ago"},{id:3,type:"service",title:"Service appointment scheduled",description:"Annual maintenance for RV #VIN123456",time:"1 hour ago"},{id:4,type:"delivery",title:"Delivery completed",description:"Travel Trailer delivered to Mike Davis",time:"2 hours ago"}];function C$(){const[t,s]=y.useState(!1),r=a=>{console.log("New lead created from dashboard:",a)},n=a=>{switch(a){case"add-lead":s(!0);break;case"add-inventory":window.location.href="/inventory";break;case"create-quote":window.location.href="/quotes";break;case"schedule-service":window.location.href="/service";break}};return e.jsxs("div",{className:"space-y-6",children:[t&&e.jsx(Vu,{onClose:()=>s(!1),onSuccess:r}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome to your Renter Insight CRM/DMS dashboard"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:w$.map(a=>e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:a.name}),e.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.value}),e.jsxs("p",{className:`text-xs ${a.changeType==="positive"?"text-green-600":"text-red-600"}`,children:[a.change," from last month"]})]})]},a.name))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Activity"}),e.jsx(Ee,{children:"Latest updates from your dealership"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:S$.map(a=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.time})]})]},a.id))})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Quick Actions"}),e.jsx(Ee,{children:"Common tasks and shortcuts"})]}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("button",{onClick:()=>n("add-lead"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ks,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Add New Lead"})]}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>n("add-inventory"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(bn,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Add Inventory"})]}),e.jsx("span",{className:"text-muted-foreground",children:"→"})]}),e.jsxs("button",{onClick:()=>n("create-quote"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Bt,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Create Quote"})]}),e.jsx("span",{className:"text-muted-foreground",children:"→"})]}),e.jsxs("button",{onClick:()=>n("schedule-service"),className:"flex items-center justify-between p-3 text-left border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zt,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Schedule Service"})]}),e.jsx("span",{className:"text-muted-foreground",children:"→"})]})]})})]})]})]})}function A$(){const[t,s]=y.useState("admin@renterinsight.com"),[r,n]=y.useState("password"),{login:a,isLoading:i}=Ou(),{toast:l}=xt(),o=Zn(),c=async d=>{d.preventDefault();try{await a(t,r),o("/")}catch{l({title:"Login Failed",description:"Invalid email or password",variant:"destructive"})}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsxs(ce,{className:"text-center",children:[e.jsx(de,{className:"text-2xl font-bold text-primary",children:"Renter Insight CRM/DMS"}),e.jsx(Ee,{children:"Sign in to your account to continue"})]}),e.jsxs(te,{children:[e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx("div",{children:e.jsx(ge,{type:"email",placeholder:"Email",value:t,onChange:d=>s(d.target.value),required:!0,autoComplete:"username"})}),e.jsx("div",{children:e.jsx(ge,{type:"password",placeholder:"Password",value:r,onChange:d=>n(d.target.value),required:!0,autoComplete:"current-password"})}),e.jsx(H,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Demo credentials: admin@renterinsight.com / password"})]})]})})}function T$({children:t}){const{user:s,isLoading:r}=Ou();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):s?e.jsx(e.Fragment,{children:t}):e.jsx(hR,{to:"/login",replace:!0})}function E$(t){const s=t+"CollectionProvider",[r,n]=Ol(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=j=>{const{scope:x,children:f}=j,g=vt.useRef(null),v=vt.useRef(new Map).current;return e.jsx(a,{scope:x,itemMap:v,collectionRef:g,children:f})};l.displayName=s;const o=t+"CollectionSlot",c=Fc(o),d=vt.forwardRef((j,x)=>{const{scope:f,children:g}=j,v=i(o,f),w=Wr(x,v.collectionRef);return e.jsx(c,{ref:w,children:g})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=Fc(u),p=vt.forwardRef((j,x)=>{const{scope:f,children:g,...v}=j,w=vt.useRef(null),k=Wr(x,w),T=i(u,f);return vt.useEffect(()=>(T.itemMap.set(w,{ref:w,...v}),()=>void T.itemMap.delete(w))),e.jsx(h,{[m]:"",ref:k,children:g})});p.displayName=u;function b(j){const x=i(t+"CollectionConsumer",j);return vt.useCallback(()=>{const g=x.collectionRef.current;if(!g)return[];const v=Array.from(g.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((T,S)=>v.indexOf(T.ref.current)-v.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:d,ItemSlot:p},b,n]}var P$=y.createContext(void 0);function D$(t){const s=y.useContext(P$);return t||s||"ltr"}var Z0="rovingFocusGroup.onEntryFocus",I$={bubbles:!1,cancelable:!0},Xh="RovingFocusGroup",[Zy,VE,k$]=E$(Xh),[L$,UE]=Ol(Xh,[k$]),[F$,R$]=L$(Xh),qE=y.forwardRef((t,s)=>e.jsx(Zy.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Zy.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(M$,{...t,ref:s})})}));qE.displayName=Xh;var M$=y.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,h=y.useRef(null),p=Wr(s,h),b=D$(i),[j,x]=Fu({prop:l,defaultProp:o??null,onChange:c,caller:Xh}),[f,g]=y.useState(!1),v=Qi(d),w=VE(r),k=y.useRef(!1),[T,S]=y.useState(0);return y.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(Z0,v),()=>C.removeEventListener(Z0,v)},[v]),e.jsx(F$,{scope:r,orientation:n,dir:b,loop:a,currentTabStopId:j,onItemFocus:y.useCallback(C=>x(C),[x]),onItemShiftTab:y.useCallback(()=>g(!0),[]),onFocusableItemAdd:y.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:y.useCallback(()=>S(C=>C-1),[]),children:e.jsx(ys.div,{tabIndex:f||T===0?-1:0,"data-orientation":n,...m,ref:p,style:{outline:"none",...t.style},onMouseDown:Ns(t.onMouseDown,()=>{k.current=!0}),onFocus:Ns(t.onFocus,C=>{const E=!k.current;if(C.target===C.currentTarget&&E&&!f){const M=new CustomEvent(Z0,I$);if(C.currentTarget.dispatchEvent(M),!M.defaultPrevented){const D=w().filter(B=>B.focusable),A=D.find(B=>B.active),I=D.find(B=>B.id===j),F=[A,I,...D].filter(Boolean).map(B=>B.ref.current);GE(F,u)}}k.current=!1}),onBlur:Ns(t.onBlur,()=>g(!1))})})}),HE="RovingFocusGroupItem",WE=y.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=sh(),d=i||c,u=R$(HE,r),m=u.currentTabStopId===d,h=VE(r),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:j}=u;return y.useEffect(()=>{if(n)return p(),()=>b()},[n,p,b]),e.jsx(Zy.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx(ys.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:Ns(t.onMouseDown,x=>{n?u.onItemFocus(d):x.preventDefault()}),onFocus:Ns(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:Ns(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const f=$$(x,u.orientation,u.dir);if(f!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let v=h().filter(w=>w.focusable).map(w=>w.ref.current);if(f==="last")v.reverse();else if(f==="prev"||f==="next"){f==="prev"&&v.reverse();const w=v.indexOf(x.currentTarget);v=u.loop?B$(v,w+1):v.slice(w+1)}setTimeout(()=>GE(v))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:j!=null}):l})})});WE.displayName=HE;var _$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O$(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function $$(t,s,r){const n=O$(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return _$[n]}function GE(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function B$(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var z$=qE,V$=WE,U$=y.createContext(void 0);function q$(t){const s=y.useContext(U$);return t||s||"ltr"}var Og="Tabs",[H$,NQ]=Ol(Og,[UE]),KE=UE(),[W$,sb]=H$(Og),YE=y.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,u=q$(o),[m,h]=Fu({prop:n,onChange:a,defaultProp:i??"",caller:Og});return e.jsx(W$,{scope:r,baseId:sh(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:e.jsx(ys.div,{dir:u,"data-orientation":l,...d,ref:s})})});YE.displayName=Og;var QE="TabsList",ZE=y.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=sb(QE,r),l=KE(r);return e.jsx(z$,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(ys.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});ZE.displayName=QE;var JE="TabsTrigger",XE=y.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,l=sb(JE,r),o=KE(r),c=sP(l.baseId,n),d=rP(l.baseId,n),u=n===l.value;return e.jsx(V$,{asChild:!0,...o,focusable:!a,active:u,children:e.jsx(ys.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:Ns(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:Ns(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:Ns(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(n)})})})});XE.displayName=JE;var eP="TabsContent",tP=y.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...l}=t,o=sb(eP,r),c=sP(o.baseId,n),d=rP(o.baseId,n),u=n===o.value,m=y.useRef(u);return y.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Wc,{present:a||u,children:({present:h})=>e.jsx(ys.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});tP.displayName=eP;function sP(t,s){return`${t}-trigger-${s}`}function rP(t,s){return`${t}-content-${s}`}var G$=YE,nP=ZE,aP=XE,iP=tP;const ms=G$,ds=y.forwardRef(({className:t,...s},r)=>e.jsx(nP,{ref:r,className:Ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));ds.displayName=nP.displayName;const Ye=y.forwardRef(({className:t,...s},r)=>e.jsx(aP,{ref:r,className:Ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Ye.displayName=aP.displayName;const Je=y.forwardRef(({className:t,...s},r)=>e.jsx(iP,{ref:r,className:Ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Je.displayName=iP.displayName;var $g="Switch",[K$,wQ]=Ol($g),[Y$,Q$]=K$($g),lP=y.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...m}=t,[h,p]=y.useState(null),b=Wr(s,v=>p(v)),j=y.useRef(!1),x=h?u||!!h.closest("form"):!0,[f,g]=Fu({prop:a,defaultProp:i??!1,onChange:d,caller:$g});return e.jsxs(Y$,{scope:r,checked:f,disabled:o,children:[e.jsx(ys.button,{type:"button",role:"switch","aria-checked":f,"aria-required":l,"data-state":uP(f),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:b,onClick:Ns(t.onClick,v=>{g(w=>!w),x&&(j.current=v.isPropagationStopped(),j.current||v.stopPropagation())})}),x&&e.jsx(dP,{control:h,bubbles:!j.current,name:n,value:c,checked:f,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});lP.displayName=$g;var oP="SwitchThumb",cP=y.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=Q$(oP,r);return e.jsx(ys.span,{"data-state":uP(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});cP.displayName=oP;var Z$="SwitchBubbleInput",dP=y.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},i)=>{const l=y.useRef(null),o=Wr(l,i),c=LE(r),d=FE(s);return y.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&p){const b=new Event("click",{bubbles:n});p.call(u,r),u.dispatchEvent(b)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dP.displayName=Z$;function uP(t){return t?"checked":"unchecked"}var mP=lP,J$=cP;const xr=y.forwardRef(({className:t,...s},r)=>e.jsx(mP,{className:Ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(J$,{className:Ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xr.displayName=mP.displayName;var X$="Separator",O5="horizontal",eB=["horizontal","vertical"],hP=y.forwardRef((t,s)=>{const{decorative:r,orientation:n=O5,...a}=t,i=tB(n)?n:O5,o=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(ys.div,{"data-orientation":i,...o,...a,ref:s})});hP.displayName=X$;function tB(t){return eB.includes(t)}var pP=hP;const Vc=y.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(pP,{ref:a,decorative:r,orientation:s,className:Ge("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Vc.displayName=pP.displayName;function sB({settings:t,onSettingsChange:s}){var d,u,m,h,p,b,j,x,f,g,v,w,k,T,S;const[r,n]=y.useState((t==null?void 0:t.warranty)||{coverageTrackingEnabled:!0,manufacturerApprovalRequiredThreshold:500,allowUnapprovedRepairs:!0,submitForReimbursement:!0,manufacturerSettings:{allowEmailCommunication:!0,allowApiIntegration:!0,defaultManufacturers:["Clayton Homes","Fleetwood RV"],customManufacturersPerCompany:!0},reimbursementTracking:{enableStatusTracking:!0,autoMarkPaid:!1},serviceItemChecks:{showCoveredStatus:!0,requireProofForSubmission:!0},notifications:{notifyDealerOnApproval:!0,notifyManufacturerOnSubmission:!0,notifyCompanyAdminIfOverdue:!0}}),[a,i]=y.useState(""),l=(C,E)=>{const M=C.split("."),D={...r};let A=D;for(let I=0;I<M.length-1;I++)A[M[I]]||(A[M[I]]={}),A=A[M[I]];A[M[M.length-1]]=E,n(D),s({...t,warranty:D})},o=()=>{if(a.trim()){const C=r.manufacturerSettings.defaultManufacturers||[];l("manufacturerSettings.defaultManufacturers",[...C,a.trim()]),i("")}},c=C=>{const M=(r.manufacturerSettings.defaultManufacturers||[]).filter((D,A)=>A!==C);l("manufacturerSettings.defaultManufacturers",M)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oc,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Warranty Service & Reimbursement Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure how your platform tracks warranty service requests and manufacturer reimbursements."}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(wn,{className:"w-4 h-4"}),e.jsx("span",{children:"Core Warranty Tracking"})]}),e.jsx(Ee,{children:"Basic settings for warranty service tracking and approval workflows."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable Warranty Coverage Tracking"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track whether service items are covered under warranty"})]}),e.jsx(xr,{checked:r.coverageTrackingEnabled,onCheckedChange:C=>l("coverageTrackingEnabled",C)})]}),e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Manufacturer Approval Required Threshold"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"w-4 h-4 text-gray-400"}),e.jsx(ge,{type:"number",value:r.manufacturerApprovalRequiredThreshold,onChange:C=>l("manufacturerApprovalRequiredThreshold",parseInt(C.target.value)),className:"w-32"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Service requests above this amount require manufacturer approval"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Allow Unapproved Repairs"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Dealers can proceed with repairs before manufacturer approval"})]}),e.jsx(xr,{checked:r.allowUnapprovedRepairs,onCheckedChange:C=>l("allowUnapprovedRepairs",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Submit for Reimbursement"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable reimbursement request tracking"})]}),e.jsx(xr,{checked:r.submitForReimbursement,onCheckedChange:C=>l("submitForReimbursement",C)})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx($A,{className:"w-4 h-4"}),e.jsx("span",{children:"Manufacturer Integration"})]}),e.jsx(Ee,{children:"Configure how dealers communicate with manufacturers for warranty claims."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Allow Email Communication"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable email-based warranty claim submissions"})]}),e.jsx(xr,{checked:(d=r.manufacturerSettings)==null?void 0:d.allowEmailCommunication,onCheckedChange:C=>l("manufacturerSettings.allowEmailCommunication",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Allow API Integration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable direct API connections with manufacturers"})]}),e.jsx(xr,{checked:(u=r.manufacturerSettings)==null?void 0:u.allowApiIntegration,onCheckedChange:C=>l("manufacturerSettings.allowApiIntegration",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Custom Manufacturers Per Company"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Allow companies to add their own manufacturers"})]}),e.jsx(xr,{checked:(m=r.manufacturerSettings)==null?void 0:m.customManufacturersPerCompany,onCheckedChange:C=>l("manufacturerSettings.customManufacturersPerCompany",C)})]}),e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Default Manufacturers"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(((h=r.manufacturerSettings)==null?void 0:h.defaultManufacturers)||[]).map((C,E)=>e.jsxs(Ae,{variant:"secondary",className:"flex items-center space-x-1",children:[e.jsx("span",{children:C}),e.jsx("button",{onClick:()=>c(E),className:"ml-1 hover:text-red-600",children:e.jsx(St,{className:"w-3 h-3"})})]},E))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{placeholder:"Add manufacturer name",value:a,onChange:C=>i(C.target.value),onKeyPress:C=>C.key==="Enter"&&o()}),e.jsx(H,{onClick:o,size:"sm",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"w-4 h-4"}),e.jsx("span",{children:"Reimbursement Tracking"})]}),e.jsx(Ee,{children:"Settings for tracking manufacturer reimbursement payments."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable Status Tracking"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Track reimbursement status: submitted → approved → paid"})]}),e.jsx(xr,{checked:(p=r.reimbursementTracking)==null?void 0:p.enableStatusTracking,onCheckedChange:C=>l("reimbursementTracking.enableStatusTracking",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Auto-Mark as Paid"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically mark reimbursements as paid when received"})]}),e.jsx(xr,{checked:(b=r.reimbursementTracking)==null?void 0:b.autoMarkPaid,onCheckedChange:C=>l("reimbursementTracking.autoMarkPaid",C)})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsx("span",{children:"Service Item Validation"})]}),e.jsx(Ee,{children:"Configure validation requirements for warranty service items."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Show Coverage Status"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Display warranty coverage status in service module"})]}),e.jsx(xr,{checked:(j=r.serviceItemChecks)==null?void 0:j.showCoveredStatus,onCheckedChange:C=>l("serviceItemChecks.showCoveredStatus",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Require Proof for Submission"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Dealers must upload documentation to request reimbursement"})]}),e.jsx(xr,{checked:(x=r.serviceItemChecks)==null?void 0:x.requireProofForSubmission,onCheckedChange:C=>l("serviceItemChecks.requireProofForSubmission",C)})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(k2,{className:"w-4 h-4"}),e.jsx("span",{children:"Notification Settings"})]}),e.jsx(Ee,{children:"Configure automated notifications for warranty processes."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Notify Dealer on Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Send notification when manufacturer approves/denies claim"})]}),e.jsx(xr,{checked:(f=r.notifications)==null?void 0:f.notifyDealerOnApproval,onCheckedChange:C=>l("notifications.notifyDealerOnApproval",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Notify Manufacturer on Submission"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Send notification to manufacturer when claim is submitted"})]}),e.jsx(xr,{checked:(g=r.notifications)==null?void 0:g.notifyManufacturerOnSubmission,onCheckedChange:C=>l("notifications.notifyManufacturerOnSubmission",C)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Notify Admin if Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Alert company admin when claims are overdue for response"})]}),e.jsx(xr,{checked:(v=r.notifications)==null?void 0:v.notifyCompanyAdminIfOverdue,onCheckedChange:C=>l("notifications.notifyCompanyAdminIfOverdue",C)})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(Ir,{className:"w-4 h-4"}),e.jsx("span",{children:"Configuration Status"})]})}),e.jsx(te,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r.coverageTrackingEnabled?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Warranty Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(w=r.manufacturerSettings)!=null&&w.allowEmailCommunication||(k=r.manufacturerSettings)!=null&&k.allowApiIntegration?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Manufacturer Communication"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(T=r.reimbursementTracking)!=null&&T.enableStatusTracking?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Reimbursement Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(((S=r.manufacturerSettings)==null?void 0:S.defaultManufacturers)||[]).length>0?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Default Manufacturers"})]})]})})]})]})}const J0={appName:"Renter Insight",appLogo:"/logo.svg",contactEmail:"support@renterinsight.com",contactPhone:"+1 (555) 123-4567",address:"123 Main St, Anytown, USA",website:"https://www.renterinsight.com",timezone:"America/Los_Angeles",dateFormat:"MM/DD/YYYY",timeFormat:"hh:mm A",currency:"USD",currencySymbol:"$",language:"en",maintenanceMode:!1,welcomeMessage:"Welcome to Renter Insight!",paymentGateway:"stripe",stripePublishableKey:"",stripeSecretKey:"",paypalClientId:"",paypalClientSecret:"",enableSubscriptions:!0,taxRate:.05,enableInvoiceGeneration:!0,smsProvider:"twilio",twilioAccountSid:"",twilioAuthToken:"",twilioPhoneNumber:"",smsEnabled:!0,smsTemplates:[],emailProvider:"smtp",smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!1,emailFromAddress:"noreply@example.com",emailFromName:"Renter Insight",emailEnabled:!0,emailTemplates:[],voiceProvider:"twilio",twilioVoiceSid:"",twilioVoiceAuthToken:"",voiceEnabled:!1,passwordMinLength:8,passwordRequiresUppercase:!0,passwordRequiresLowercase:!0,passwordRequiresNumber:!0,passwordRequiresSymbol:!0,twoFactorAuthEnabled:!1,sessionTimeout:3600,failedLoginAttemptsLockout:5,lockoutDuration:300,googleMapsApiKey:"",slackWebhookUrl:"",googleAnalyticsTrackingId:"",mixpanelProjectId:"",primaryColor:"#4F46E5",secondaryColor:"#10B981",fontFamily:"Inter, sans-serif",termsOfServiceUrl:"/terms",privacyPolicyUrl:"/privacy",legal:{termsOfServiceUrl:"/terms",privacyPolicyUrl:"/privacy",warranty:{defaultWarrantyDuration:12,defaultDeductible:100,autoApprovalLimit:1e3,requireCustomerSignature:!0,allowTransfers:!0,transferFee:50,notificationSettings:{},coverageTrackingEnabled:!0,manufacturerApprovalRequiredThreshold:500,allowUnapprovedRepairs:!0,submitForReimbursement:!0,manufacturerSettings:{allowEmailCommunication:!0,allowApiIntegration:!0,defaultManufacturers:["Clayton Homes","Fleetwood RV"],customManufacturersPerCompany:!0},reimbursementTracking:{enableStatusTracking:!0,autoMarkPaid:!1},serviceItemChecks:{showCoveredStatus:!0,requireProofForSubmission:!0},notifications:{notifyDealerOnApproval:!0,notifyManufacturerOnSubmission:!0,notifyCompanyAdminIfOverdue:!0}}},supportPageUrl:"/support"};function fP(){const[t,s]=y.useState(J0),[r,n]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{try{const c=localStorage.getItem("platformSettings");c&&s({...J0,...JSON.parse(c)})}catch(c){console.error("Failed to load settings from local storage",c),i("Failed to load settings.")}finally{n(!1)}},[]);const l=y.useCallback(c=>{s(d=>{const u={...d,...c};try{localStorage.setItem("platformSettings",JSON.stringify(u))}catch(m){console.error("Failed to save settings to local storage",m),i("Failed to save settings.")}return u})},[]),o=y.useCallback(()=>{s(J0);try{localStorage.removeItem("platformSettings")}catch(c){console.error("Failed to clear settings from local storage",c),i("Failed to reset settings.")}},[]);return{settings:t,updateSettings:l,resetSettings:o,loading:r,error:a}}function rB(){const{toast:t}=xt(),{settings:s,updateSettings:r,isLoading:n}=fP(),a=(i,l)=>{r({[i]:l}),t({title:"Settings Updated",description:`${i} has been updated successfully.`})};return n?e.jsx("div",{children:"Loading settings..."}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Platform Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure global platform settings and integrations"})]}),e.jsxs(ms,{defaultValue:"general",className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-6",children:[e.jsx(Ye,{value:"general",children:"General"}),e.jsx(Ye,{value:"email",children:"Email"}),e.jsx(Ye,{value:"sms",children:"SMS"}),e.jsx(Ye,{value:"voice",children:"Voice"}),e.jsx(Ye,{value:"payment",children:"Payment"}),e.jsx(Ye,{value:"warranty",children:"Warranty"})]}),e.jsx(Je,{value:"general",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"General Settings"}),e.jsx(Ee,{children:"Configure basic platform settings"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"platform-name",children:"Platform Name"}),e.jsx(ge,{id:"platform-name",value:s.platformName||"",onChange:i=>a("platformName",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"support-email",children:"Support Email"}),e.jsx(ge,{id:"support-email",type:"email",value:s.supportEmail||"",onChange:i=>a("supportEmail",i.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable maintenance mode to prevent user access"})]}),e.jsx(xr,{checked:s.maintenanceMode||!1,onCheckedChange:i=>a("maintenanceMode",i)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"maintenance-message",children:"Maintenance Message"}),e.jsx(kt,{id:"maintenance-message",placeholder:"Enter maintenance message...",value:s.maintenanceMessage||"",onChange:i=>a("maintenanceMessage",i.target.value)})]})]})]})}),e.jsx(Je,{value:"email",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Email Settings"}),e.jsx(Ee,{children:"Configure email service provider and settings"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email-provider",children:"Email Provider"}),e.jsxs(Be,{value:s.emailProvider||"sendgrid",onValueChange:i=>a("emailProvider",i),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"sendgrid",children:"SendGrid"}),e.jsx(J,{value:"mailgun",children:"Mailgun"}),e.jsx(J,{value:"ses",children:"Amazon SES"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"smtp-host",children:"SMTP Host"}),e.jsx(ge,{id:"smtp-host",value:s.smtpHost||"",onChange:i=>a("smtpHost",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"smtp-port",children:"SMTP Port"}),e.jsx(ge,{id:"smtp-port",type:"number",value:s.smtpPort||"",onChange:i=>a("smtpPort",i.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable SSL/TLS"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use secure connection for email sending"})]}),e.jsx(xr,{checked:s.emailSSL||!1,onCheckedChange:i=>a("emailSSL",i)})]})]})]})}),e.jsx(Je,{value:"sms",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"SMS Settings"}),e.jsx(Ee,{children:"Configure SMS service provider and settings"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"sms-provider",children:"SMS Provider"}),e.jsxs(Be,{value:s.smsProvider||"twilio",onValueChange:i=>a("smsProvider",i),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"twilio",children:"Twilio"}),e.jsx(J,{value:"nexmo",children:"Nexmo"}),e.jsx(J,{value:"textmagic",children:"TextMagic"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"sms-api-key",children:"API Key"}),e.jsx(ge,{id:"sms-api-key",type:"password",value:s.smsApiKey||"",onChange:i=>a("smsApiKey",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"sms-from-number",children:"From Number"}),e.jsx(ge,{id:"sms-from-number",value:s.smsFromNumber||"",onChange:i=>a("smsFromNumber",i.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow the platform to send SMS notifications"})]}),e.jsx(xr,{checked:s.smsEnabled||!1,onCheckedChange:i=>a("smsEnabled",i)})]})]})]})}),e.jsx(Je,{value:"voice",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Voice Settings"}),e.jsx(Ee,{children:"Configure voice call service provider and settings"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"voice-provider",children:"Voice Provider"}),e.jsxs(Be,{value:s.voiceProvider||"twilio",onValueChange:i=>a("voiceProvider",i),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"twilio",children:"Twilio"}),e.jsx(J,{value:"nexmo",children:"Nexmo"}),e.jsx(J,{value:"plivo",children:"Plivo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"voice-api-key",children:"API Key"}),e.jsx(ge,{id:"voice-api-key",type:"password",value:s.voiceApiKey||"",onChange:i=>a("voiceApiKey",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"voice-from-number",children:"From Number"}),e.jsx(ge,{id:"voice-from-number",value:s.voiceFromNumber||"",onChange:i=>a("voiceFromNumber",i.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable Voice Calls"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow the platform to make voice calls"})]}),e.jsx(xr,{checked:s.voiceEnabled||!1,onCheckedChange:i=>a("voiceEnabled",i)})]})]})]})}),e.jsx(Je,{value:"payment",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Payment Settings"}),e.jsx(Ee,{children:"Configure payment processing settings"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"payment-provider",children:"Payment Provider"}),e.jsxs(Be,{value:s.paymentProvider||"stripe",onValueChange:i=>a("paymentProvider",i),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"stripe",children:"Stripe"}),e.jsx(J,{value:"paypal",children:"PayPal"}),e.jsx(J,{value:"square",children:"Square"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"payment-public-key",children:"Public Key"}),e.jsx(ge,{id:"payment-public-key",value:s.paymentPublicKey||"",onChange:i=>a("paymentPublicKey",i.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"payment-secret-key",children:"Secret Key"}),e.jsx(ge,{id:"payment-secret-key",type:"password",value:s.paymentSecretKey||"",onChange:i=>a("paymentSecretKey",i.target.value)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Test Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable test mode for payment processing"})]}),e.jsx(xr,{checked:s.paymentTestMode||!1,onCheckedChange:i=>a("paymentTestMode",i)})]})]})]})}),e.jsx(Je,{value:"warranty",children:e.jsx(sB,{settings:s,onSettingsChange:a})})]})]})}const xP=y.createContext(void 0);function Zc(){const t=y.useContext(xP);if(t===void 0)throw new Error("usePortal must be used within a PortalProvider");return t}function nB({children:t,impersonatedUser:s,fallbackUser:r}){const n=s?{id:s.id,name:s.name,email:s.email}:null,a=!!n;y.useEffect(()=>{console.log("PortalProvider rendered/re-rendered."),console.log("Received impersonatedUser prop:",s),console.log("Calculated proxiedClient:",n),console.log("Is proxying:",a)},[s,n,a]);const c={proxiedClient:n,isProxying:a,getDisplayName:()=>n?n.name:(r==null?void 0:r.name)||"User",getDisplayEmail:()=>n?n.email:(r==null?void 0:r.email)||"",getCustomerId:()=>n?n.id:"portal-customer-001"};return e.jsx(xP.Provider,{value:c,children:t})}let gP=class extends y.Component{constructor(r){super(r);ai(this,"handleReload",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});ai(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsxs(ce,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Gn,{className:"h-6 w-6 text-red-600"})}),e.jsx(de,{className:"text-xl text-red-900",children:"Something went wrong"}),e.jsx(Ee,{children:"An unexpected error occurred while rendering this component."})]}),e.jsxs(te,{className:"space-y-4",children:[this.state.error&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Error:"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.state.error.message})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(H,{onClick:this.handleReset,variant:"outline",className:"flex-1",children:"Try Again"}),e.jsxs(H,{onClick:this.handleReload,className:"flex-1",children:[e.jsx(MA,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"If this problem persists, please contact support."})})]})]})}):this.props.children}};const rb={sampleUsers:[{id:"user-1",name:"John Smith",email:"john.smith@example.com",phone:"(555) 123-4567",role:"customer",status:"Active",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z"},{id:"user-2",name:"Sarah Johnson",email:"sarah@example.com",phone:"(555) 987-6543",role:"customer",status:"Active",createdAt:"2024-01-12T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z"},{id:"user-3",name:"Michael Davis",email:"michael.d@example.com",phone:"(555) 456-7890",role:"customer",status:"Inactive",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z"}]},aB={loans:[{accountNumber:"LOAN001",customerName:"John Smith",vehicleInfo:"2023 Honda Civic",balance:15e3,monthlyPayment:350,nextDueDate:"2024-02-15",status:"current"},{accountNumber:"LOAN002",customerName:"Sarah Johnson",vehicleInfo:"2022 Toyota Camry",balance:22500,monthlyPayment:425,nextDueDate:"2024-02-10",status:"past_due"},{accountNumber:"test",customerName:"Test Customer",vehicleInfo:"2024 Test Vehicle",balance:9e3,monthlyPayment:250,nextDueDate:"2024-02-01",status:"current"}],invoices:[{accountNumber:"INV001",customerName:"Mike Wilson",invoiceNumber:"INV-2024-001",amount:1250,dueDate:"2024-02-05",description:"Vehicle Service & Maintenance",status:"overdue"},{accountNumber:"INV002",customerName:"Lisa Brown",invoiceNumber:"INV-2024-002",amount:850,dueDate:"2024-02-20",description:"Parts & Labor",status:"pending"},{accountNumber:"test",customerName:"Test Customer",invoiceNumber:"INV-2024-TEST",amount:500,dueDate:"2024-02-15",description:"Test Invoice Description",status:"pending"}],checkoutAccounts:{}},Os={termOptions:[12,24,36,48,60,72],interestRates:[5,6.5,7.25,8,9.99],paymentFrequencies:["Monthly","Bi-Weekly","Weekly"],statusOptions:["Current","Late","Default","Paid Off"],defaultLoan:{amount:25e3,rate:7.25,termMonths:60,downPayment:3e3,startDate:"2023-01-01"},sampleLoans:[{id:"loan-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:"Current",remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:"Current",remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"}],samplePayments:[{id:"pmt-001",loanId:"loan-001",paymentDate:"2024-01-15T00:00:00Z",amount:895.5,principalAmount:645.3,interestAmount:250.2,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",processedDate:"2024-01-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-002",loanId:"loan-001",paymentDate:"2023-12-15T00:00:00Z",amount:895.5,principalAmount:641.85,interestAmount:253.65,status:"Completed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",processedDate:"2023-12-15T08:30:00Z",notes:"Automatic payment processed successfully"},{id:"pmt-003",loanId:"loan-002",paymentDate:"2024-01-01T00:00:00Z",amount:1025.75,principalAmount:692.4,interestAmount:333.35,status:"Completed",paymentMethod:"Check",transactionId:"CHK-20240101-002",processedDate:"2024-01-02T10:15:00Z",notes:"Check payment deposited"},{id:"pmt-004",loanId:"loan-001",paymentDate:"2024-02-15T00:00:00Z",amount:895.5,principalAmount:648.8,interestAmount:246.7,status:"Pending",paymentMethod:"ACH",transactionId:null,processedDate:null,notes:"Scheduled automatic payment"}],formDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60,paymentFrequency:"Monthly",startDate:"",customerId:"",vehicleId:"",notes:""},paymentMethods:["ACH","Check","Credit Card","Cash","Wire Transfer"],loanTypes:["Purchase","Refinance","Equity"],statusColors:{Current:"bg-green-100 text-green-800",Late:"bg-yellow-100 text-yellow-800",Default:"bg-red-100 text-red-800","Paid Off":"bg-blue-100 text-blue-800"},paymentStatusColors:{Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Failed:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"},calculatorDefaults:{loanAmount:25e3,downPayment:3e3,interestRate:7.25,termMonths:60},amortizationSample:[{paymentNumber:1,paymentDate:"2024-02-15",paymentAmount:895.5,principalAmount:645.3,interestAmount:250.2,remainingBalance:24354.7},{paymentNumber:2,paymentDate:"2024-03-15",paymentAmount:895.5,principalAmount:648.85,interestAmount:246.65,remainingBalance:23705.85},{paymentNumber:3,paymentDate:"2024-04-15",paymentAmount:895.5,principalAmount:652.42,interestAmount:243.08,remainingBalance:23053.43}],checkoutAccounts:aB},iB=Os,lB={loans:{id:"loans",name:"Loans",description:"Customer loan accounts and payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"sampleLoans",description:"Customer loan accounts",customerIdField:"customerId",customerNameField:"customerName"}]},loanPayments:{id:"loanPayments",name:"Loan Payments",description:"Customer loan payment history",component:"ClientLoansView",mockDataSources:[{path:"@/mocks/financeMock",exportName:"mockFinance",dataKey:"samplePayments",description:"Loan payment history",filterFunction:(t,s,r)=>{const{mockFinance:n}=require("@/mocks/financeMock");return n.sampleLoans.filter(i=>i.customerId===s||i.customerName===r).some(i=>i.id===t.loanId)}}]},agreements:{id:"agreements",name:"Agreements",description:"Customer agreements and contracts",component:"ClientAgreements",mockDataSources:[{path:"@/mocks/agreementsMock",exportName:"mockAgreements",dataKey:"sampleAgreements",description:"Customer agreements and contracts",customerIdField:"customerId",customerNameField:"customerName"}]},financeApplications:{id:"finance-applications",name:"Finance Applications",description:"Customer finance application submissions",component:"PortalApplicationView",mockDataSources:[{path:"@/modules/finance-application/mocks/financeApplicationMock",exportName:"mockFinanceApplications",dataKey:"sampleApplications",description:"Finance application submissions",customerIdField:"customerId",customerNameField:"customerName"}]},serviceTickets:{id:"service-tickets",name:"Service Tickets",description:"Customer service requests and tickets",component:"ClientServiceTickets",mockDataSources:[{path:"@/mocks/serviceOpsMock",exportName:"mockServiceOps",dataKey:"sampleTickets",description:"Service tickets and requests",customerIdField:"customerId",customerNameField:"customerName"}]},quotes:{id:"quotes",name:"Quotes",description:"Customer quotes and estimates",component:"ClientQuotes",mockDataSources:[{path:"@/mocks/quoteBuilderMock",exportName:"mockQuoteBuilder",dataKey:"sampleQuotes",description:"Customer quotes and estimates",customerIdField:"customerId",customerNameField:"customerName"}]},invoices:{id:"invoices",name:"Invoices",description:"Customer invoices and billing",component:"ClientInvoices",mockDataSources:[{path:"@/mocks/invoiceMock",exportName:"mockInvoice",dataKey:"sampleInvoices",description:"Customer invoices and billing",customerNameField:"customerName"}]},deliveries:{id:"deliveries",name:"Deliveries",description:"Customer delivery tracking",component:"ClientDeliveries",mockDataSources:[{path:"@/mocks/deliveryMock",exportName:"mockDelivery",dataKey:"sampleDeliveries",description:"Delivery tracking and status",customerIdField:"customerId",customerNameField:"customerName"}]}};function oB(t,s){const r={};return Object.entries(lB).forEach(([n,a])=>{r[n]=[],a.mockDataSources.forEach(i=>{try{const d=(require(i.path)[i.exportName][i.dataKey]||[]).filter(u=>{if(i.filterFunction)return i.filterFunction(u,t,s);const m=i.customerIdField&&u[i.customerIdField]===t,h=i.customerNameField&&u[i.customerNameField]===s;return m||h});r[n].push(...d)}catch(l){console.warn(`Failed to load mock data from ${i.path}:`,l)}})}),r}function nb(t,s){const[r,n]=vt.useState({}),[a,i]=vt.useState(!0);return vt.useEffect(()=>{i(!0);try{const l=oB(t,s);n(l)}catch(l){console.error("Failed to discover customer data:",l)}finally{i(!1)}},[t,s]),{customerData:r,loading:a,getSectionData:l=>r[l]||[],getSectionCount:l=>{var o;return((o=r[l])==null?void 0:o.length)||0},hasDataForSection:l=>{var o;return(((o=r[l])==null?void 0:o.length)||0)>0}}}function cB({children:t}){var m;const{tenant:s}=kn(),{getDisplayName:r,getDisplayEmail:n,isProxying:a,proxiedClient:i}=Zc(),[l,o]=y.useState(!1),c=Qo(),d=[{name:"Dashboard",path:"",icon:vi},{name:"Loans",path:"loans",icon:wt},{name:"Agreements",path:"agreements",icon:Bt},{name:"Finance Applications",path:"finance-applications",icon:nn},{name:"Service Tickets",path:"service-tickets",icon:ma},{name:"Settings",path:"settings",icon:wn}],u=()=>{var h;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex items-center px-4 py-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:((h=s==null?void 0:s.name)==null?void 0:h.charAt(0))||"T"})}),e.jsx("span",{className:"ml-2 text-lg font-semibold",children:(s==null?void 0:s.name)||"Portal"})]})}),e.jsx("nav",{className:"flex-1 px-4 space-y-1",children:d.map(p=>{const b=p.path===""?"/portalclient":`/portalclient/${p.path}`,j=c.pathname===b||p.path===""&&c.pathname==="/portalclient/";return e.jsxs(Dr,{to:p.path,className:`
              group flex items-center px-2 py-2 text-sm font-medium rounded-md
              ${j?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}
            `,children:[e.jsx(p.icon,{className:`mr-3 flex-shrink-0 h-5 w-5 ${j?"text-primary-foreground":"text-muted-foreground"}`}),p.name]},p.name)})}),e.jsxs("div",{className:"border-t p-4",children:[a&&i&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700 font-medium",children:["Viewing as: ",r()]})}),e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r()}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n()})]})]}),e.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>window.location.href="/login",children:[e.jsx(kA,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})};return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col",children:e.jsx("div",{className:"flex flex-col flex-grow border-r bg-card",children:e.jsx(u,{})})}),e.jsx(_x,{open:l,onOpenChange:o,children:e.jsx(U2,{side:"left",className:"p-0 w-64",children:e.jsx(u,{})})}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b bg-card",children:[e.jsx(_x,{open:l,onOpenChange:o,children:e.jsx(LT,{asChild:!0,children:e.jsx(H,{variant:"ghost",size:"sm",children:e.jsx(LA,{className:"h-5 w-5"})})})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-6 w-6 bg-primary rounded flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xs",children:((m=s==null?void 0:s.name)==null?void 0:m.charAt(0))||"T"})}),e.jsx("span",{className:"ml-2 font-semibold",children:(s==null?void 0:s.name)||"Portal"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}function dB({children:t}){return e.jsx(cB,{children:t})}var ab="Progress",ib=100,[uB,CQ]=Ol(ab),[mB,hB]=uB(ab),vP=y.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=pB,...l}=t;(a||a===0)&&!$5(a)&&console.error(fB(`${a}`,"Progress"));const o=$5(a)?a:ib;n!==null&&!B5(n,o)&&console.error(xB(`${n}`,"Progress"));const c=B5(n,o)?n:null,d=Vx(c)?i(c,o):void 0;return e.jsx(mB,{scope:r,value:c,max:o,children:e.jsx(ys.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Vx(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":bP(c,o),"data-value":c??void 0,"data-max":o,...l,ref:s})})});vP.displayName=ab;var jP="ProgressIndicator",yP=y.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=hB(jP,r);return e.jsx(ys.div,{"data-state":bP(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});yP.displayName=jP;function pB(t,s){return`${Math.round(t/s*100)}%`}function bP(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Vx(t){return typeof t=="number"}function $5(t){return Vx(t)&&!isNaN(t)&&t>0}function B5(t,s){return Vx(t)&&!isNaN(t)&&t<=s&&t>=0}function fB(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ib}\`.`}function xB(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ib} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var NP=vP,gB=yP;const Ga=y.forwardRef(({className:t,value:s,...r},n)=>e.jsx(NP,{ref:n,className:Ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(gB,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Ga.displayName=NP.displayName;function vB(){const{getCustomerId:t,getDisplayName:s}=Zc(),r=t(),n=s(),{customerData:a,loading:i}=nb(r,n),[l,o]=y.useState(null),c=a.loans||[],d=a.loanPayments||[],u=c.filter(j=>["Current","Active"].includes(j.status)),m=u.reduce((j,x)=>j+x.remainingBalance,0),h=u.reduce((j,x)=>j+x.monthlyPayment,0),p=j=>{switch(j){case"Current":case"Active":return"bg-green-100 text-green-800";case"Late":return"bg-yellow-100 text-yellow-800";case"Default":return"bg-red-100 text-red-800";case"Paid Off":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},b=j=>d.filter(x=>x.loanId===j).sort((x,f)=>new Date(f.paymentDate).getTime()-new Date(x.paymentDate).getTime());if(i)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[1,2,3].map(j=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-gray-200 rounded"})},j))})]});if(l){const j=b(l.id),x=(l.termMonths-l.paymentsRemaining)/l.termMonths*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{variant:"ghost",onClick:()=>o(null),children:"← Back to Loans"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Loan Details"}),e.jsx("p",{className:"text-muted-foreground",children:l.vehicleInfo})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Remaining Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:De(l.remainingBalance)})]}),e.jsx(wt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),e.jsx("p",{className:"text-2xl font-bold",children:De(l.monthlyPayment)})]}),e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Next Payment"}),e.jsx("p",{className:"text-2xl font-bold",children:nt(l.nextPaymentDate)})]}),e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payments Remaining"}),e.jsx("p",{className:"text-2xl font-bold",children:l.paymentsRemaining})]}),e.jsx(Bt,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Payment Progress"}),e.jsxs(Ee,{children:[l.termMonths-l.paymentsRemaining," of ",l.termMonths," payments completed"]})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(x),"%"]})]}),e.jsx(Ga,{value:x,className:"h-3"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Started: ",nt(l.startDate)]}),e.jsxs("span",{children:["Total Paid: ",De(l.totalPaid)]})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Payments"}),e.jsx(Ee,{children:"Your payment history for this loan"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[j.slice(0,5).map(f=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${f.status==="Completed"?"bg-green-500":f.status==="Pending"?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:De(f.amount)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[nt(f.paymentDate)," • ",f.paymentMethod]})]})]}),e.jsx(Ae,{className:f.status==="Completed"?"bg-green-100 text-green-800":f.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:f.status})]},f.id)),j.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No payment history available"})]})]})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Loans"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your loan accounts and payment history"})]}),u.length>0&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:De(m)})]}),e.jsx(wt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Payment"}),e.jsx("p",{className:"text-2xl font-bold",children:De(h)})]}),e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Loans"}),e.jsx("p",{className:"text-2xl font-bold",children:u.length})]}),e.jsx(nn,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Your Loans"}),e.jsx(Ee,{children:"View details and payment history for your loans"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[c.map(j=>{const x=(j.termMonths-j.paymentsRemaining)/j.termMonths*100;return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:j.vehicleInfo}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loan #",j.id.slice(-6).toUpperCase()]})]}),e.jsx(Ae,{className:p(j.status),children:j.status})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Balance"}),e.jsx("p",{className:"font-semibold",children:De(j.remainingBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),e.jsx("p",{className:"font-semibold",children:De(j.monthlyPayment)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Next Payment"}),e.jsx("p",{className:"font-semibold",children:nt(j.nextPaymentDate)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Payment Progress"}),e.jsxs("span",{children:[Math.round(x),"%"]})]}),e.jsx(Ga,{value:x,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.termMonths-j.paymentsRemaining," of ",j.termMonths," payments completed"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(j),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},j.id)}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Loans Found"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any loans associated with your account."})]})]})})]})]})}function wP(){const{getCustomerId:t,getDisplayName:s}=Zc(),r=t(),n=s(),{customerData:a,loading:i}=nb(r,n),[l,o]=y.useState(null),c=a.agreements||[],d=m=>{switch(m){case"DRAFT":return"bg-gray-100 text-gray-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"SIGNED":return"bg-blue-100 text-blue-800";case"ACTIVE":return"bg-green-100 text-green-800";case"EXPIRED":return"bg-red-100 text-red-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=m=>{switch(m){case"PURCHASE":return e.jsx(wt,{className:"h-4 w-4"});case"LEASE":return e.jsx(Zt,{className:"h-4 w-4"});case"SERVICE":return e.jsx(Bt,{className:"h-4 w-4"});case"WARRANTY":return e.jsx(Bt,{className:"h-4 w-4"});default:return e.jsx(Bt,{className:"h-4 w-4"})}};return i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(m=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-gray-200 rounded"})},m))})]}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{variant:"ghost",onClick:()=>o(null),children:"← Back to Agreements"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[u(l.type),e.jsxs("h1",{className:"text-2xl font-bold",children:[l.type.charAt(0)+l.type.slice(1).toLowerCase()," Agreement"]}),e.jsx(Ae,{className:d(l.status),children:l.status})]}),e.jsx("p",{className:"text-muted-foreground",children:l.vehicleInfo})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Agreement Details"})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Agreement ID"}),e.jsx("p",{className:"font-medium",children:l.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-medium",children:l.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(Ae,{className:d(l.status),children:l.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsx("p",{className:"font-medium",children:nt(l.createdAt)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Financial Details"}),e.jsxs("div",{className:"space-y-2",children:[l.totalAmount&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e.jsx("p",{className:"font-medium",children:De(l.totalAmount)})]}),l.downPayment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Down Payment"}),e.jsx("p",{className:"font-medium",children:De(l.downPayment)})]}),l.monthlyPayment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payment"}),e.jsx("p",{className:"font-medium",children:De(l.monthlyPayment)})]}),l.annualFee&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Annual Fee"}),e.jsx("p",{className:"font-medium",children:De(l.annualFee)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Important Dates"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),e.jsx("p",{className:"font-medium",children:nt(l.effectiveDate)})]}),l.expirationDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:"font-medium",children:nt(l.expirationDate)})]}),l.signedAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed Date"}),e.jsx("p",{className:"font-medium",children:nt(l.signedAt)})]})]})]}),l.terms&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Terms & Conditions"}),e.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm",children:l.terms})})]}),l.signedBy&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Signature Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Signed By"}),e.jsx("p",{className:"font-medium",children:l.signedBy})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"IP Address"}),e.jsx("p",{className:"font-medium",children:l.ipAddress||"Not recorded"})]})]})]})]})]}),l.documents&&l.documents.length>0&&e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Documents"}),e.jsx(Ee,{children:"Agreement documents and attachments"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-3",children:l.documents.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Bt,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(m.size/1024/1024).toFixed(2)," MB • Uploaded ",nt(m.uploadedAt)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Download"]})]})]},m.id))})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Agreements"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your agreements and contracts"})]}),c.length>0&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Agreements"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),e.jsx(Bt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold",children:c.filter(m=>m.status==="ACTIVE").length})]}),e.jsx(mr,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Signature"}),e.jsx("p",{className:"text-2xl font-bold",children:c.filter(m=>m.status==="PENDING").length})]}),e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Your Agreements"}),e.jsx(Ee,{children:"View details and status of your agreements"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[c.map(m=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[u(m.type),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[m.type.charAt(0)+m.type.slice(1).toLowerCase()," Agreement"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.vehicleInfo})]}),e.jsx(Ae,{className:d(m.status),children:m.status})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Effective Date"}),e.jsx("p",{className:"font-semibold",children:nt(m.effectiveDate)})]}),m.expirationDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiration Date"}),e.jsx("p",{className:"font-semibold",children:nt(m.expirationDate)})]}),(m.totalAmount||m.monthlyPayment||m.annualFee)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:m.totalAmount?"Total Amount":m.monthlyPayment?"Monthly Payment":"Annual Fee"}),e.jsx("p",{className:"font-semibold",children:De(m.totalAmount||m.monthlyPayment||m.annualFee)})]})]}),m.status==="PENDING"&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Action Required:"})," This agreement is waiting for your signature."]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(m),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Details"]}),m.status==="PENDING"&&e.jsx(H,{size:"sm",children:"Sign Agreement"})]})]})},m.id)),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Agreements Found"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have any agreements associated with your account."})]})]})})]})]})}const Nl={sampleApplications:[{id:"app-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"John","last-name":"Smith",email:"john.smith@email.com",phone:"(555) 123-4567",ssn:"***-**-1234","date-of-birth":"1985-06-15"},employment:{"employer-name":"ABC Corporation","job-title":"Software Engineer","employment-length":"3 years","monthly-income":"8500","employment-type":"full-time"},residence:{address:"123 Main St",city:"Anytown",state:"CA",zip:"12345","housing-status":"rent","monthly-payment":"2200"}},uploadedFiles:[{id:"file-001",fieldId:"pay-stubs",name:"paystub-march-2024.pdf",type:"application/pdf",size:245760,url:"/mock/paystub.pdf",uploadedAt:"2024-01-15T10:30:00Z"}],history:[{id:"hist-001",timestamp:"2024-01-10T09:30:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-002",timestamp:"2024-01-12T16:45:00Z",action:"Application Submitted",userId:"cust-001",userName:"John Smith",details:"Application submitted for review"},{id:"hist-003",timestamp:"2024-01-15T10:30:00Z",action:"Document Uploaded",userId:"cust-001",userName:"John Smith",details:"1 document(s) uploaded"},{id:"hist-004",timestamp:"2024-01-15T14:22:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from submitted to under_review",oldValue:"submitted",newValue:"under_review"}],fraudCheckStatus:"verified",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:22:00Z",submittedAt:"2024-01-12T16:45:00Z",notes:"Strong credit profile, employment verified"},{id:"app-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",templateId:"template-001",status:"draft",data:{"personal-info":{"first-name":"Maria","last-name":"Rodriguez",email:"maria.rodriguez@email.com",phone:"(555) 987-6543"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-18T11:15:00Z",updatedAt:"2024-01-18T11:15:00Z",notes:""},{id:"app-003",customerId:"cust-003",customerName:"Sarah Wilson",customerEmail:"sarah.wilson@email.com",customerPhone:"(555) 234-5678",templateId:"template-001",status:"submitted",data:{"personal-info":{"first-name":"Sarah","last-name":"Wilson",email:"sarah.wilson@email.com",phone:"(555) 234-5678",ssn:"***-**-5678","date-of-birth":"1990-03-22"},employment:{"employer-name":"Tech Solutions Inc","job-title":"Marketing Manager","employment-length":"2 years","monthly-income":"7200","employment-type":"full-time"}},uploadedFiles:[],fraudCheckStatus:"pending",createdAt:"2024-01-20T10:15:00Z",updatedAt:"2024-01-22T09:30:00Z",submittedAt:"2024-01-22T09:30:00Z",notes:"Application submitted, awaiting initial review"},{id:"app-004",customerId:"cust-004",customerName:"Michael Chen",customerEmail:"michael.chen@email.com",customerPhone:"(555) 345-6789",templateId:"template-001",status:"under_review",data:{"personal-info":{"first-name":"Michael","last-name":"Chen",email:"michael.chen@email.com",phone:"(555) 345-6789",ssn:"***-**-6789","date-of-birth":"1988-11-10"},employment:{"employer-name":"Global Manufacturing","job-title":"Operations Supervisor","employment-length":"5 years","monthly-income":"9500","employment-type":"full-time"}},uploadedFiles:[{id:"file-002",fieldId:"pay-stubs",name:"paystub-january-2024.pdf",type:"application/pdf",size:198432,url:"/mock/paystub-chen.pdf",uploadedAt:"2024-01-18T11:45:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-16T14:20:00Z",updatedAt:"2024-01-23T16:15:00Z",submittedAt:"2024-01-18T12:00:00Z",reviewedAt:"2024-01-23T16:15:00Z",reviewedBy:"finance@company.com",notes:"Under review by finance team, credit check in progress",adminNotes:"Credit score: 720. Employment verified. Waiting for final bank statements."},{id:"app-005",customerId:"cust-005",customerName:"Emily Davis",customerEmail:"emily.davis@email.com",customerPhone:"(555) 456-7890",templateId:"template-001",status:"approved",data:{"personal-info":{"first-name":"Emily","last-name":"Davis",email:"emily.davis@email.com",phone:"(555) 456-7890",ssn:"***-**-7890","date-of-birth":"1985-07-14"},employment:{"employer-name":"Healthcare Partners","job-title":"Registered Nurse","employment-length":"8 years","monthly-income":"8800","employment-type":"full-time"}},uploadedFiles:[{id:"file-003",fieldId:"pay-stubs",name:"paystub-december-2023.pdf",type:"application/pdf",size:223456,url:"/mock/paystub-davis.pdf",uploadedAt:"2024-01-08T15:30:00Z"},{id:"file-004",fieldId:"tax-returns",name:"tax-return-2023.pdf",type:"application/pdf",size:445678,url:"/mock/tax-return-davis.pdf",uploadedAt:"2024-01-08T15:35:00Z"}],fraudCheckStatus:"verified",createdAt:"2024-01-05T08:45:00Z",updatedAt:"2024-01-25T10:30:00Z",submittedAt:"2024-01-08T16:00:00Z",reviewedAt:"2024-01-25T10:30:00Z",reviewedBy:"finance@company.com",notes:"Excellent credit score and stable employment history. Approved for full amount.",adminNotes:"Credit score: 785. 8 years stable employment. Debt-to-income ratio: 28%. Approved for $65,000 at 6.5% APR."},{id:"app-006",customerId:"cust-006",customerName:"Robert Taylor",customerEmail:"robert.taylor@email.com",customerPhone:"(555) 567-8901",templateId:"template-001",status:"denied",data:{"personal-info":{"first-name":"Robert","last-name":"Taylor",email:"robert.taylor@email.com",phone:"(555) 567-8901",ssn:"***-**-8901","date-of-birth":"1992-12-05"},employment:{"employer-name":"Freelance Consulting","job-title":"Independent Contractor","employment-length":"6 months","monthly-income":"4500","employment-type":"self-employed"}},uploadedFiles:[],fraudCheckStatus:"flagged",createdAt:"2024-01-12T13:20:00Z",updatedAt:"2024-01-26T14:45:00Z",submittedAt:"2024-01-14T10:15:00Z",reviewedAt:"2024-01-26T14:45:00Z",reviewedBy:"finance@company.com",notes:"Insufficient employment history and income verification. Credit score below minimum requirements.",adminNotes:"Credit score: 580 (below 620 minimum). Only 6 months employment history. Self-employed income not verifiable. Recommend denial."},{id:"app-007",customerId:"cust-007",customerName:"Jennifer Brown",customerEmail:"jennifer.brown@email.com",customerPhone:"(555) 678-9012",templateId:"template-001",status:"completed",data:{"personal-info":{"first-name":"Jennifer","last-name":"Brown",email:"jennifer.brown@email.com",phone:"(555) 678-9012",ssn:"***-**-9012","date-of-birth":"1987-04-18"},employment:{"employer-name":"City School District","job-title":"Elementary Teacher","employment-length":"12 years","monthly-income":"6800","employment-type":"full-time"}},uploadedFiles:[{id:"file-005",fieldId:"pay-stubs",name:"paystub-november-2023.pdf",type:"application/pdf",size:187654,url:"/mock/paystub-brown.pdf",uploadedAt:"2023-12-15T09:20:00Z"}],fraudCheckStatus:"verified",createdAt:"2023-12-10T11:30:00Z",updatedAt:"2024-01-15T13:45:00Z",submittedAt:"2023-12-15T10:00:00Z",reviewedAt:"2023-12-20T15:30:00Z",reviewedBy:"finance@company.com",notes:"Application approved and loan funded. Customer has received financing.",adminNotes:"Credit score: 742. 12 years stable employment in education. Loan funded at $45,000 at 7.25% APR for 15 years."},{id:"app-008",customerId:"cust-008",customerName:"David Wilson",customerEmail:"david.wilson@email.com",customerPhone:"(555) 789-0123",templateId:"template-001",status:"conditionally_approved",data:{"personal-info":{"first-name":"David","last-name":"Wilson",email:"david.wilson@email.com",phone:"(555) 789-0123",ssn:"***-**-0123","date-of-birth":"1983-09-25"},employment:{"employer-name":"Regional Bank","job-title":"Loan Officer","employment-length":"4 years","monthly-income":"7800","employment-type":"full-time"}},uploadedFiles:[{id:"file-006",fieldId:"pay-stubs",name:"paystub-february-2024.pdf",type:"application/pdf",size:201234,url:"/mock/paystub-wilson.pdf",uploadedAt:"2024-01-22T14:20:00Z"}],history:[{id:"hist-027",timestamp:"2024-01-20T13:45:00Z",action:"Application Created",userId:"system",userName:"System",details:"Application created with status: draft"},{id:"hist-028",timestamp:"2024-01-22T14:20:00Z",action:"Document Uploaded",userId:"cust-008",userName:"David Wilson",details:"1 document(s) uploaded"},{id:"hist-029",timestamp:"2024-01-22T15:00:00Z",action:"Application Submitted",userId:"cust-008",userName:"David Wilson",details:"Application submitted for review"},{id:"hist-030",timestamp:"2024-01-27T11:30:00Z",action:"Status Changed",userId:"admin-001",userName:"Finance Admin",details:"Status changed from under_review to conditionally_approved",oldValue:"under_review",newValue:"conditionally_approved"},{id:"hist-031",timestamp:"2024-01-27T11:30:00Z",action:"Admin Notes Updated",userId:"admin-001",userName:"Finance Admin",details:"Admin notes added/updated"}],fraudCheckStatus:"verified",createdAt:"2024-01-20T13:45:00Z",updatedAt:"2024-01-27T11:30:00Z",submittedAt:"2024-01-22T15:00:00Z",reviewedAt:"2024-01-27T11:30:00Z",reviewedBy:"finance@company.com",notes:"Conditionally approved pending additional documentation.",adminNotes:"Credit score: 695. Good employment history but needs co-signer due to recent credit inquiry. Approved for $40,000 with co-signer requirement."}],defaultTemplates:[{id:"template-001",name:"Standard Finance Application",description:"Complete finance application for manufactured homes and RVs",sections:[{id:"personal-info",title:"Personal Information",description:"Basic personal and contact information",order:1,fields:[{id:"first-name",type:"text",label:"First Name",placeholder:"Enter your first name",required:!0,order:1,validation:{minLength:2,maxLength:50}},{id:"last-name",type:"text",label:"Last Name",placeholder:"Enter your last name",required:!0,order:2,validation:{minLength:2,maxLength:50}},{id:"email",type:"email",label:"Email Address",placeholder:"Enter your email address",required:!0,order:3},{id:"phone",type:"phone",label:"Phone Number",placeholder:"(555) 123-4567",required:!0,order:4},{id:"ssn",type:"text",label:"Social Security Number",placeholder:"***-**-****",required:!0,order:5,validation:{pattern:"^\\d{3}-\\d{2}-\\d{4}$"}},{id:"date-of-birth",type:"date",label:"Date of Birth",required:!0,order:6}]},{id:"employment",title:"Employment Information",description:"Current employment and income details",order:2,fields:[{id:"employment-type",type:"select",label:"Employment Type",required:!0,order:1,options:["full-time","part-time","self-employed","retired","unemployed"]},{id:"employer-name",type:"text",label:"Employer Name",placeholder:"Enter employer name",required:!0,order:2,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"job-title",type:"text",label:"Job Title",placeholder:"Enter your job title",required:!0,order:3,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"employment-length",type:"text",label:"Length of Employment",placeholder:"e.g., 2 years 6 months",required:!0,order:4,conditionalLogic:{dependsOn:"employment-type",condition:"not_equals",value:"unemployed"}},{id:"monthly-income",type:"currency",label:"Monthly Gross Income",placeholder:"0.00",required:!0,order:5,validation:{min:0}}]},{id:"co-applicant",title:"Co-Applicant Information",description:"Information about co-applicant (if applicable)",order:3,fields:[{id:"has-co-applicant",type:"radio",label:"Do you have a co-applicant?",required:!0,order:1,options:["yes","no"]},{id:"co-first-name",type:"text",label:"Co-Applicant First Name",placeholder:"Enter first name",required:!1,order:2,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-last-name",type:"text",label:"Co-Applicant Last Name",placeholder:"Enter last name",required:!1,order:3,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}},{id:"co-ssn",type:"text",label:"Co-Applicant SSN",placeholder:"***-**-****",required:!1,order:4,conditionalLogic:{dependsOn:"has-co-applicant",condition:"equals",value:"yes"}}]},{id:"residence",title:"Residence Information",description:"Current housing situation and address",order:4,fields:[{id:"address",type:"text",label:"Street Address",placeholder:"Enter your street address",required:!0,order:1},{id:"city",type:"text",label:"City",placeholder:"Enter city",required:!0,order:2},{id:"state",type:"select",label:"State",required:!0,order:3,options:["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]},{id:"zip",type:"text",label:"ZIP Code",placeholder:"12345",required:!0,order:4,validation:{pattern:"^\\d{5}(-\\d{4})?$"}},{id:"housing-status",type:"select",label:"Housing Status",required:!0,order:5,options:["own","rent","live-with-family","other"]},{id:"monthly-payment",type:"currency",label:"Monthly Housing Payment",placeholder:"0.00",required:!0,order:6,validation:{min:0}}]},{id:"obligations",title:"Monthly Obligations",description:"Other monthly financial obligations",order:5,fields:[{id:"credit-cards",type:"currency",label:"Credit Card Payments",placeholder:"0.00",required:!1,order:1,validation:{min:0}},{id:"auto-loans",type:"currency",label:"Auto Loan Payments",placeholder:"0.00",required:!1,order:2,validation:{min:0}},{id:"student-loans",type:"currency",label:"Student Loan Payments",placeholder:"0.00",required:!1,order:3,validation:{min:0}},{id:"other-debts",type:"currency",label:"Other Monthly Debt Payments",placeholder:"0.00",required:!1,order:4,validation:{min:0}}]},{id:"documents",title:"Required Documents",description:"Upload required financial documents",order:6,fields:[{id:"pay-stubs",type:"file",label:"Recent Pay Stubs (Last 2 months)",required:!0,order:1,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}},{id:"tax-returns",type:"file",label:"Tax Returns (Last 2 years)",required:!0,order:2,validation:{fileTypes:["pdf"],maxFileSize:10485760}},{id:"bank-statements",type:"file",label:"Bank Statements (Last 3 months)",required:!0,order:3,validation:{fileTypes:["pdf","jpg","jpeg","png"],maxFileSize:5242880}}]},{id:"consent",title:"Consent and Authorization",description:"Required consents and authorizations",order:7,fields:[{id:"credit-check-consent",type:"checkbox",label:"I authorize a credit check to be performed",required:!0,order:1},{id:"terms-agreement",type:"checkbox",label:"I agree to the terms and conditions",required:!0,order:2},{id:"signature",type:"signature",label:"Electronic Signature",required:!0,order:3}]}],isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],fieldTypes:[{value:"text",label:"Text Input"},{value:"email",label:"Email"},{value:"phone",label:"Phone Number"},{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"date",label:"Date"},{value:"select",label:"Dropdown"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkbox"},{value:"textarea",label:"Text Area"},{value:"file",label:"File Upload"},{value:"signature",label:"Electronic Signature"}],statusOptions:[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"submitted",label:"Submitted",color:"bg-blue-100 text-blue-800"},{value:"under_review",label:"Under Review",color:"bg-yellow-100 text-yellow-800"},{value:"approved",label:"Approved",color:"bg-green-100 text-green-800"},{value:"conditionally_approved",label:"Conditionally Approved",color:"bg-orange-100 text-orange-800"},{value:"denied",label:"Denied",color:"bg-red-100 text-red-800"},{value:"completed",label:"Completed",color:"bg-emerald-100 text-emerald-800"}]};function ep(){const[t,s]=y.useState([]),[r,n]=y.useState([]);y.useEffect(()=>{s(Nl.sampleApplications),n(Nl.defaultTemplates)},[]),y.useEffect(()=>{Xt("financeApplications",t)},[t]),y.useEffect(()=>{Xt("applicationTemplates",r)},[r]);const a=x=>{var g;const f={id:`app-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:x.customerId||"",customerName:x.customerName||"",customerEmail:x.customerEmail||"",customerPhone:x.customerPhone||"",templateId:x.templateId||((g=r[0])==null?void 0:g.id)||"",status:x.status||"draft",data:x.data||{},uploadedFiles:x.uploadedFiles||[],history:[{id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),action:"Application Created",userId:"current-user",userName:"Current User",details:`Application created with status: ${x.status||"draft"}`}],fraudCheckStatus:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),notes:x.notes||""};return s(v=>[f,...v]),f},i=(x,f)=>{s(g=>g.map(v=>v.id===x?{...v,...f,updatedAt:new Date().toISOString(),submittedAt:f.status==="submitted"&&!v.submittedAt?new Date().toISOString():v.submittedAt,history:[...v.history,...j(v,f)]}:v))},l=x=>{s(f=>f.filter(g=>g.id!==x))},o=x=>t.find(f=>f.id===x),c=x=>t.filter(f=>f.customerId===x),d=x=>{const f={id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:x.name||"New Template",description:x.description||"",sections:x.sections||[],isActive:x.isActive!==void 0?x.isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n(g=>[f,...g]),f},u=(x,f)=>{n(g=>g.map(v=>v.id===x?{...v,...f,updatedAt:new Date().toISOString()}:v))},m=x=>{n(f=>f.filter(g=>g.id!==x))},h=x=>r.find(f=>f.id===x),p=(x,f,g)=>new Promise(v=>{var k;const w={id:`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fieldId:f,name:g.name,type:g.type,size:g.size,url:URL.createObjectURL(g),uploadedAt:new Date().toISOString()};i(x,{uploadedFiles:[...((k=o(x))==null?void 0:k.uploadedFiles)||[],w]}),v(w)}),b=(x,f)=>{const g=o(x);if(g){const v=g.uploadedFiles.filter(w=>w.id!==f);i(x,{uploadedFiles:v})}},j=(x,f)=>{const g=[],v=new Date().toISOString(),w="current-user",k="Current User";if(f.status&&f.status!==x.status&&g.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:v,action:"Status Changed",userId:w,userName:k,details:`Status changed from ${x.status} to ${f.status}`,oldValue:x.status,newValue:f.status}),f.adminNotes!==void 0&&f.adminNotes!==x.adminNotes&&g.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:v,action:"Admin Notes Updated",userId:w,userName:k,details:f.adminNotes?"Admin notes added/updated":"Admin notes cleared",oldValue:x.adminNotes||"",newValue:f.adminNotes||""}),f.status==="submitted"&&!x.submittedAt&&g.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:v,action:"Application Submitted",userId:w,userName:k,details:"Application submitted for review"}),f.uploadedFiles){const T=x.uploadedFiles.length,S=f.uploadedFiles.length;S>T?g.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:v,action:"Document Uploaded",userId:w,userName:k,details:`${S-T} document(s) uploaded`}):S<T&&g.push({id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:v,action:"Document Removed",userId:w,userName:k,details:`${T-S} document(s) removed`})}return g};return{applications:t,templates:r,createApplication:a,updateApplication:i,deleteApplication:l,getApplicationById:o,getApplicationsByCustomer:c,createTemplate:d,updateTemplate:u,deleteTemplate:m,getTemplateById:h,uploadFile:p,removeFile:b}}function jB({fieldId:t,applicationId:s,validation:r,multiple:n=!1}){var v;const{getApplicationById:a,uploadFile:i,removeFile:l}=ep(),{toast:o}=xt(),c=y.useRef(null),[d,u]=y.useState(!1),m=a(s),h=(m==null?void 0:m.uploadedFiles.filter(w=>w.fieldId===t))||[],p=w=>{var k;if(r!=null&&r.maxFileSize&&w.size>r.maxFileSize)return`File size must be less than ${Math.round(r.maxFileSize/1024/1024)}MB`;if(r!=null&&r.fileTypes){const T=(k=w.name.split(".").pop())==null?void 0:k.toLowerCase();if(T&&!r.fileTypes.includes(T))return`File type must be one of: ${r.fileTypes.join(", ")}`}return null},b=async w=>{const k=Array.from(w.target.files||[]);if(k.length!==0){u(!0);try{for(const T of k){const S=p(T);if(S){o({title:"File Validation Error",description:`${T.name}: ${S}`,variant:"destructive"});continue}await i(s,t,T)}o({title:"Files Uploaded",description:`${k.length} file(s) uploaded successfully`})}catch{o({title:"Upload Error",description:"Failed to upload files. Please try again.",variant:"destructive"})}finally{u(!1),c.current&&(c.current.value="")}}},j=w=>{l(s,w),o({title:"File Removed",description:"File has been removed successfully"})},x=w=>{window.open(w.url,"_blank")},f=w=>{if(w===0)return"0 Bytes";const k=1024,T=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(w)/Math.log(k));return parseFloat((w/Math.pow(k,S)).toFixed(2))+" "+T[S]},g=w=>{var k;return(k=w.split(".").pop())==null||k.toLowerCase(),e.jsx(S8,{className:"h-4 w-4"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ji,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Drop files here or click to browse":"Drop file here or click to browse"}),(r==null?void 0:r.fileTypes)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted formats: ",r.fileTypes.join(", ").toUpperCase()]}),(r==null?void 0:r.maxFileSize)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Max file size: ",Math.round(r.maxFileSize/1024/1024),"MB"]})]}),e.jsx(H,{type:"button",variant:"outline",className:"mt-4",onClick:()=>{var w;return(w=c.current)==null?void 0:w.click()},disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Choose ",n?"Files":"File"]})}),e.jsx("input",{ref:c,type:"file",className:"hidden",multiple:n,accept:(v=r==null?void 0:r.fileTypes)==null?void 0:v.map(w=>`.${w}`).join(","),onChange:b})]})}),h.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files"}),e.jsx("div",{className:"space-y-2",children:h.map(w=>e.jsx(ee,{children:e.jsx(te,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[g(w.name),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:w.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[f(w.size)," • Uploaded ",new Date(w.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(w),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(w.id),children:e.jsx(St,{className:"h-4 w-4"})})]})]})})},w.id))})]})]})}function yB({section:t,data:s,onChange:r,validationErrors:n,applicationId:a}){const i=t.fields.sort((d,u)=>d.order-u.order),l=(d,u)=>{r({...s,[d]:u})},o=d=>{if(!d.conditionalLogic)return!0;const u=s[d.conditionalLogic.dependsOn],m=d.conditionalLogic.condition,h=d.conditionalLogic.value;switch(m){case"equals":return u===h;case"not_equals":return u!==h;case"contains":return u&&u.includes(h);case"greater_than":return Number(u)>Number(h);case"less_than":return Number(u)<Number(h);default:return!0}},c=d=>{var b,j,x,f;const u=`${t.id}.${d.id}`,m=n[u],h=s[d.id]||"";if(!o(d))return null;const p={id:d.id,value:h,onChange:g=>l(d.id,g.target.value),placeholder:d.placeholder,className:m?"border-red-500":""};switch(d.type){case"text":case"email":case"phone":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(ge,{...p,type:d.type==="email"?"email":d.type==="phone"?"tel":"text"}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"number":case"currency":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[d.type==="currency"&&e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(ge,{...p,type:"number",className:`${m?"border-red-500":""} ${d.type==="currency"?"pl-8":""}`,min:(b=d.validation)==null?void 0:b.min,max:(j=d.validation)==null?void 0:j.max,step:d.type==="currency"?"0.01":"1"})]}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"date":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(ge,{...p,type:"date"}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs(Be,{value:h,onValueChange:g=>l(d.id,g),children:[e.jsx(Oe,{className:m?"border-red-500":"",children:e.jsx(ze,{placeholder:d.placeholder||`Select ${d.label.toLowerCase()}`})}),e.jsx($e,{children:(x=d.options)==null?void 0:x.map(g=>e.jsx(J,{value:g,children:g.replace("-"," ").replace(/\b\w/g,v=>v.toUpperCase())},g))})]}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"radio":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:(f=d.options)==null?void 0:f.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:`${d.id}-${g}`,name:d.id,value:g,checked:h===g,onChange:v=>l(d.id,v.target.value),className:"h-4 w-4"}),e.jsx(Z,{htmlFor:`${d.id}-${g}`,className:"font-normal",children:g.replace("-"," ").replace(/\b\w/g,v=>v.toUpperCase())})]},g))}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"checkbox":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:d.id,checked:h===!0,onCheckedChange:g=>l(d.id,g)}),e.jsxs(Z,{htmlFor:d.id,className:"font-normal",children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(kt,{id:d.id,value:h,onChange:g=>l(d.id,g.target.value),placeholder:d.placeholder,className:m?"border-red-500":"",rows:4}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"file":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(jB,{fieldId:d.id,applicationId:a,validation:d.validation,multiple:!0}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);case"signature":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:d.id,children:[d.label,d.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Electronic signature will be captured here"}),e.jsx(H,{variant:"outline",type:"button",children:"Add Signature"})]}),m&&e.jsx("p",{className:"text-sm text-red-500",children:n[u]})]},d.id);default:return null}};return e.jsx("div",{className:"space-y-6",children:i.map(c)})}function SP({application:t,onSave:s,onCancel:r,onSubmit:n,onCreateTask:a}){const{tenant:i}=kn(),{getTemplateById:l}=ep(),[o,c]=y.useState(0),[d,u]=y.useState(t.data||{}),[m,h]=y.useState(!1),[p,b]=y.useState({}),j=l(t.templateId);if(!j)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Template not found"}),e.jsx(H,{onClick:r,className:"mt-4",children:"Go Back"})]});const x=j.sections.sort((M,D)=>M.order-D.order),f=x[o],g=(o+1)/x.length*100,v=()=>{var A,I;const M=((A=i==null?void 0:i.settings)==null?void 0:A.platformType)||"mh",D=((I=i==null?void 0:i.settings)==null?void 0:I.labelOverrides)||{};if(D["finance.application"])return D["finance.application"];switch(M){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},w=(M,D)=>{const A={...d,[M]:{...d[M],...D}};u(A)},k=()=>{const M={},D=d[f.id]||{};return f.fields.forEach(A=>{if(A.required&&!D[A.id]&&(M[`${f.id}.${A.id}`]=`${A.label} is required`),D[A.id]&&A.validation){const I=D[A.id],L=A.validation;L.minLength&&I.length<L.minLength&&(M[`${f.id}.${A.id}`]=`${A.label} must be at least ${L.minLength} characters`),L.maxLength&&I.length>L.maxLength&&(M[`${f.id}.${A.id}`]=`${A.label} must be no more than ${L.maxLength} characters`),L.pattern&&!new RegExp(L.pattern).test(I)&&(M[`${f.id}.${A.id}`]=`${A.label} format is invalid`),A.type==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I)&&(M[`${f.id}.${A.id}`]="Please enter a valid email address")}}),b(M),Object.keys(M).length===0},T=()=>{k()&&o<x.length-1&&c(o+1)},S=()=>{o>0&&c(o-1)},C=()=>{s({data:d,status:"draft"})},E=async()=>{let M=!0;const D={};for(let A=0;A<x.length;A++){const I=x[A],L=d[I.id]||{};I.fields.forEach(F=>{F.required&&!L[F.id]&&(D[`${I.id}.${F.id}`]=`${F.label} is required`,M=!1)})}if(!M){b(D);const A=x.findIndex(I=>Object.keys(D).some(L=>L.startsWith(I.id)));A!==-1&&c(A);return}h(!0),await new Promise(A=>setTimeout(A,1e3)),n({data:d,status:"submitted",submittedAt:new Date().toISOString()}),h(!1)};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(H,{variant:"ghost",onClick:r,children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:v()}),e.jsx("p",{className:"text-muted-foreground",children:t.customerName||"New Application"}),a&&e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>a(t),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{variant:"outline",children:t.status.replace("_"," ").toUpperCase()}),t.fraudCheckStatus&&e.jsxs(Ae,{variant:"secondary",children:["IDV: ",t.fraudCheckStatus.charAt(0).toUpperCase()+t.fraudCheckStatus.slice(1)]})]})]}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Step ",o+1," of ",x.length]}),e.jsxs("span",{children:[Math.round(g),"% Complete"]})]}),e.jsx(Ga,{value:g,className:"h-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.title})]})})}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:f.title}),f.description&&e.jsx(Ee,{children:f.description})]}),e.jsx(te,{children:e.jsx(yB,{section:f,data:d[f.id]||{},onChange:M=>w(f.id,M),validationErrors:p,applicationId:t.id})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(H,{variant:"outline",onClick:S,disabled:o===0,children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(H,{variant:"outline",onClick:C,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),o===x.length-1?e.jsx(H,{onClick:E,disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Submit Application"]})}):e.jsxs(H,{onClick:T,children:["Next",e.jsx(P2,{className:"h-4 w-4 ml-2"})]})]})]})]})}function CP(){const{tenant:t}=kn(),{getCustomerId:s,getDisplayName:r,getDisplayEmail:n}=Zc(),{toast:a}=xt(),{templates:i,createApplication:l,updateApplication:o,getApplicationsByCustomer:c}=ep(),[d,u]=y.useState(null),[m,h]=y.useState(!1),p=s(),b=c(p),j=()=>{var E,M;const S=((E=t==null?void 0:t.settings)==null?void 0:E.platformType)||"mh",C=((M=t==null?void 0:t.settings)==null?void 0:M.labelOverrides)||{};if(C["finance.application"])return C["finance.application"];switch(S){case"rv":return"RV Loan Application";case"auto":return"Auto Loan Application";case"mh":default:return"MH Finance Application"}},x=S=>{switch(S){case"draft":return e.jsx(ts,{className:"h-4 w-4"});case"submitted":case"under_review":return e.jsx(zt,{className:"h-4 w-4"});case"approved":case"completed":return e.jsx(_t,{className:"h-4 w-4"});case"denied":return e.jsx(xa,{className:"h-4 w-4"});default:return e.jsx(Bt,{className:"h-4 w-4"})}},f=S=>{switch(S){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},g=S=>{const C=i.find(D=>D.id===S.templateId);if(!C)return 0;const E=C.sections.reduce((D,A)=>D+A.fields.filter(I=>I.required).length,0),M=C.sections.reduce((D,A)=>{const I=S.data[A.id]||{};return D+A.fields.filter(L=>L.required&&I[L.id]).length},0);return E>0?M/E*100:0},v=()=>{const S=i.find(E=>E.isActive)||i[0];if(!S){a({title:"No Templates Available",description:"Please contact support to set up application templates.",variant:"destructive"});return}const C=l({customerId:p,customerName:r(),customerEmail:n(),templateId:S.id,status:"draft"});u(C),h(!0)},w=S=>{u(S),h(S.status==="draft")},k=S=>{d&&(o(d.id,S),a({title:"Application Saved",description:"Your application has been saved successfully."}))},T=S=>{d&&(o(d.id,{...S,status:"submitted"}),u(null),h(!1),a({title:"Application Submitted",description:"Your application has been submitted for review. You will be notified of the decision."}))};return m&&d?e.jsx(SP,{application:d,onSave:k,onCancel:()=>{u(null),h(!1)},onSubmit:T}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Applications"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage your ",j().toLowerCase(),"s"]})]}),e.jsxs(H,{onClick:v,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Application"]})]})}),b.length>0&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"}),e.jsx("p",{className:"text-2xl font-bold",children:b.length})]}),e.jsx(Bt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Review"}),e.jsx("p",{className:"text-2xl font-bold",children:b.filter(S=>["submitted","under_review"].includes(S.status)).length})]}),e.jsx(zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold",children:b.filter(S=>["approved","completed"].includes(S.status)).length})]}),e.jsx(_t,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Your Applications"}),e.jsx(Ee,{children:"View and manage your finance applications"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[b.map(S=>{const C=g(S);return e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[x(S.status),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[j()," #",S.id.slice(-6).toUpperCase()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",new Date(S.createdAt).toLocaleDateString(),S.submittedAt&&e.jsxs("span",{children:[" • Submitted ",new Date(S.submittedAt).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ae,{className:f(S.status),children:S.status.replace("_"," ").toUpperCase()}),S.fraudCheckStatus&&e.jsxs(Ae,{variant:"outline",children:["IDV: ",S.fraudCheckStatus.charAt(0).toUpperCase()+S.fraudCheckStatus.slice(1)]})]}),S.status==="draft"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Completion Progress"}),e.jsxs("span",{children:[Math.round(C),"%"]})]}),e.jsx(Ga,{value:C,className:"h-2"})]}),S.notes&&e.jsx("div",{className:"bg-muted/50 p-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:S.notes})})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsx(H,{variant:"outline",size:"sm",onClick:()=>w(S),children:S.status==="draft"?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Continue"]}):e.jsxs(e.Fragment,{children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]})})})]})},S.id)}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Applications Yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first finance application"}),e.jsxs(H,{onClick:v,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create Application"]})]})]})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Need Help?"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Application Process"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about our finance application process and requirements"}),e.jsx(H,{variant:"outline",size:"sm",children:"View Guide"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Contact Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Have questions? Our finance team is here to help"}),e.jsx(H,{variant:"outline",size:"sm",children:"Contact Us"})]})]})})})]})]})}function bB(){var h,p,b,j,x,f;const{getCustomerId:t,getDisplayName:s}=Zc(),r=t(),n=s(),{customerData:a,loading:i}=nb(r,n),[l,o]=y.useState(null),c=a.serviceTickets||[],d=g=>{switch(g){case"Open":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Waiting for Parts":return"bg-orange-100 text-orange-800";case"Customer Review":return"bg-purple-100 text-purple-800";case"Completed":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},u=g=>{switch(g){case"Low":return"bg-gray-100 text-gray-800";case"Medium":return"bg-blue-100 text-blue-800";case"High":return"bg-orange-100 text-orange-800";case"Urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=g=>{switch(g){case"Completed":return e.jsx(_t,{className:"h-4 w-4"});case"In Progress":return e.jsx(zt,{className:"h-4 w-4"});case"Open":return e.jsx(Ir,{className:"h-4 w-4"});default:return e.jsx(ma,{className:"h-4 w-4"})}};if(i)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-gray-200 rounded"})},g))})]});if(l){const g=l.totalCost||0,v=((h=l.parts)==null?void 0:h.reduce((k,T)=>k+T.cost*T.quantity,0))||0,w=((p=l.labor)==null?void 0:p.reduce((k,T)=>k+T.hours*T.rate,0))||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{variant:"ghost",onClick:()=>o(null),children:"← Back to Service Tickets"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[m(l.status),e.jsx("h1",{className:"text-2xl font-bold",children:l.title}),e.jsx(Ae,{className:d(l.status),children:l.status}),e.jsxs(Ae,{className:u(l.priority),children:[l.priority," Priority"]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",l.id.slice(-6).toUpperCase()," • ",l.vehicleInfo]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg font-bold",children:l.category})]}),e.jsx(ma,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"text-lg font-bold",children:l.assignedTechName||"Unassigned"})]}),e.jsx(mr,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),e.jsx("p",{className:"text-lg font-bold",children:l.scheduledDate?nt(l.scheduledDate):"TBD"})]}),e.jsx(Zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Cost"}),e.jsx("p",{className:"text-lg font-bold",children:De(g)})]}),e.jsx(_t,{className:"h-8 w-8 text-muted-foreground"})]})})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Service Description"})}),e.jsxs(te,{children:[e.jsx("p",{className:"text-sm",children:l.description}),l.notes&&e.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Additional Notes"}),e.jsx("p",{className:"text-sm",children:l.notes})]})]})]}),(((b=l.parts)==null?void 0:b.length)>0||((j=l.labor)==null?void 0:j.length)>0)&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[((x=l.parts)==null?void 0:x.length)>0&&e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Parts"}),e.jsx(Ee,{children:"Parts used for this service"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-3",children:[l.parts.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:k.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",k.quantity," × ",De(k.cost)]})]}),e.jsx("p",{className:"font-semibold",children:De(k.quantity*k.cost)})]},k.id)),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Parts Total:"}),e.jsx("span",{children:De(v)})]})})]})})]}),((f=l.labor)==null?void 0:f.length)>0&&e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Labor"}),e.jsx(Ee,{children:"Labor charges for this service"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-3",children:[l.labor.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:k.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.hours," hrs × ",De(k.rate),"/hr"]})]}),e.jsx("p",{className:"font-semibold",children:De(k.hours*k.rate)})]},k.id)),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Labor Total:"}),e.jsx("span",{children:De(w)})]})})]})})]})]}),l.timeline&&e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Service Timeline"}),e.jsx(Ee,{children:"Progress updates for this service ticket"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:l.timeline.sort((k,T)=>new Date(T.timestamp).getTime()-new Date(k.timestamp).getTime()).map(k=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:k.action}),e.jsx("span",{className:"text-xs text-muted-foreground",children:nt(k.timestamp)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.details}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",k.user]})]})]},k.id))})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Service Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your service requests and maintenance history"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Service Request"]})]})}),c.length>0&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length})]}),e.jsx(ma,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:c.filter(g=>g.status==="In Progress").length})]}),e.jsx(zt,{className:"h-8 w-8 text-muted-foreground"})]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:c.filter(g=>g.status==="Completed").length})]}),e.jsx(_t,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Your Service Tickets"}),e.jsx(Ee,{children:"View and track your service requests"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[c.map(g=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[m(g.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:g.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ticket #",g.id.slice(-6).toUpperCase()," • ",g.vehicleInfo]})]}),e.jsx(Ae,{className:d(g.status),children:g.status}),e.jsx(Ae,{className:u(g.priority),children:g.priority})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.description}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),e.jsx("p",{className:"font-semibold",children:g.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"font-semibold",children:g.assignedTechName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:g.status==="Completed"?"Completed":"Scheduled"}),e.jsx("p",{className:"font-semibold",children:g.status==="Completed"&&g.completedDate?nt(g.completedDate):g.scheduledDate?nt(g.scheduledDate):"TBD"})]})]}),g.totalCost&&e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Estimated Cost:"}),e.jsx("span",{className:"font-semibold",children:De(g.totalCost)})]}),g.customerApproved&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✓ Approved by customer"})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(g),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})},g.id)),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ma,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Service Tickets"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have any service tickets yet."}),e.jsxs(H,{children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create Service Request"]})]})]})})]})]})}function NB(){const{getDisplayName:t,getDisplayEmail:s,getCustomerId:r}=Zc(),{toast:n}=xt(),[a,i]=y.useState(!1),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,m]=y.useState({name:t(),email:s(),phone:"(555) 123-4567",address:"123 Main St",city:"Anytown",state:"CA",zipCode:"12345"}),[h,p]=y.useState({emailNotifications:!0,smsNotifications:!1,paymentReminders:!0,serviceUpdates:!0,agreementUpdates:!0,marketingEmails:!1}),[b,j]=y.useState({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:!1}),x=async()=>{i(!0);try{await new Promise(v=>setTimeout(v,1e3)),n({title:"Profile Updated",description:"Your profile information has been saved successfully."})}catch{n({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{i(!1)}},f=async()=>{i(!0);try{await new Promise(v=>setTimeout(v,1e3)),n({title:"Notifications Updated",description:"Your notification preferences have been saved."})}catch{n({title:"Error",description:"Failed to update notifications. Please try again.",variant:"destructive"})}finally{i(!1)}},g=async()=>{if(!b.currentPassword||!b.newPassword){n({title:"Validation Error",description:"Please fill in all password fields.",variant:"destructive"});return}if(b.newPassword!==b.confirmPassword){n({title:"Validation Error",description:"New passwords do not match.",variant:"destructive"});return}if(b.newPassword.length<8){n({title:"Validation Error",description:"Password must be at least 8 characters long.",variant:"destructive"});return}i(!0);try{await new Promise(v=>setTimeout(v,1e3)),j({currentPassword:"",newPassword:"",confirmPassword:"",twoFactorEnabled:b.twoFactorEnabled}),n({title:"Password Changed",description:"Your password has been updated successfully."})}catch{n({title:"Error",description:"Failed to change password. Please try again.",variant:"destructive"})}finally{i(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account preferences and security settings"})]}),e.jsxs(ms,{defaultValue:"profile",className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ye,{value:"profile",className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(Ye,{value:"notifications",className:"flex items-center space-x-2",children:[e.jsx(k2,{className:"h-4 w-4"}),e.jsx("span",{children:"Notifications"})]}),e.jsxs(Ye,{value:"security",className:"flex items-center space-x-2",children:[e.jsx(Oc,{className:"h-4 w-4"}),e.jsx("span",{children:"Security"})]})]}),e.jsx(Je,{value:"profile",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Profile Information"}),e.jsx(Ee,{children:"Update your personal information and contact details"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Full Name"}),e.jsx(ge,{id:"name",value:u.name,onChange:v=>m({...u,name:v.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email Address"}),e.jsx(ge,{id:"email",type:"email",value:u.email,onChange:v=>m({...u,email:v.target.value})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number"}),e.jsx(ge,{id:"phone",type:"tel",value:u.phone,onChange:v=>m({...u,phone:v.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer ID"}),e.jsx(ge,{id:"customerId",value:r(),disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"address",children:"Street Address"}),e.jsx(ge,{id:"address",value:u.address,onChange:v=>m({...u,address:v.target.value})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"city",children:"City"}),e.jsx(ge,{id:"city",value:u.city,onChange:v=>m({...u,city:v.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"state",children:"State"}),e.jsxs(Be,{value:u.state,onValueChange:v=>m({...u,state:v}),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"CA",children:"California"}),e.jsx(J,{value:"TX",children:"Texas"}),e.jsx(J,{value:"FL",children:"Florida"}),e.jsx(J,{value:"NY",children:"New York"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"zipCode",children:"ZIP Code"}),e.jsx(ge,{id:"zipCode",value:u.zipCode,onChange:v=>m({...u,zipCode:v.target.value})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:x,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),e.jsx(Je,{value:"notifications",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Notification Preferences"}),e.jsx(Ee,{children:"Choose how you'd like to receive notifications"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(Ct,{checked:h.emailNotifications,onCheckedChange:v=>p({...h,emailNotifications:!!v})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via text message"})]}),e.jsx(Ct,{checked:h.smsNotifications,onCheckedChange:v=>p({...h,smsNotifications:!!v})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:"Notification Types"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Reminders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reminders for upcoming loan payments"})]}),e.jsx(Ct,{checked:h.paymentReminders,onCheckedChange:v=>p({...h,paymentReminders:!!v})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Service Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates on service ticket progress"})]}),e.jsx(Ct,{checked:h.serviceUpdates,onCheckedChange:v=>p({...h,serviceUpdates:!!v})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Agreement Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications about agreement status changes"})]}),e.jsx(Ct,{checked:h.agreementUpdates,onCheckedChange:v=>p({...h,agreementUpdates:!!v})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Promotional offers and company updates"})]}),e.jsx(Ct,{checked:h.marketingEmails,onCheckedChange:v=>p({...h,marketingEmails:!!v})})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:f,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),e.jsx(Je,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Change Password"}),e.jsx(Ee,{children:"Update your account password"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{id:"currentPassword",type:l?"text":"password",value:b.currentPassword,onChange:v=>j({...b,currentPassword:v.target.value})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!l),children:l?e.jsx(Ww,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ge,{id:"newPassword",type:c?"text":"password",value:b.newPassword,onChange:v=>j({...b,newPassword:v.target.value})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>d(!c),children:c?e.jsx(Ww,{className:"h-4 w-4"}):e.jsx(zs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx(ge,{id:"confirmPassword",type:"password",value:b.confirmPassword,onChange:v=>j({...b,confirmPassword:v.target.value})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:g,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Changing..."]}):"Change Password"})})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Two-Factor Authentication"}),e.jsx(Ee,{children:"Add an extra layer of security to your account"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Enable Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Require a verification code in addition to your password"})]}),e.jsx(Ct,{checked:b.twoFactorEnabled,onCheckedChange:v=>j({...b,twoFactorEnabled:!!v})})]}),b.twoFactorEnabled&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800",children:"Two-factor authentication is enabled. You'll receive a verification code via SMS when logging in."})})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Login Activity"}),e.jsx(Ee,{children:"Monitor recent access to your account"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Current Session"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows • 192.168.1.100"})]}),e.jsx(Ae,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Yesterday, 3:24 PM"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Safari on iPhone • 10.0.0.50"})]}),e.jsx(Ae,{variant:"outline",children:"Ended"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"January 20, 2:15 PM"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Chrome on Windows • 192.168.1.100"})]}),e.jsx(Ae,{variant:"outline",children:"Ended"})]})]})})]})]})})]})]})}const Vd={agreementTypes:[{value:"PURCHASE",label:"Purchase Agreement"},{value:"LEASE",label:"Lease Agreement"},{value:"SERVICE",label:"Service Agreement"},{value:"WARRANTY",label:"Warranty Agreement"}],agreementStatuses:[{value:"DRAFT",label:"Draft",color:"bg-gray-100 text-gray-800"},{value:"PENDING",label:"Pending Signature",color:"bg-yellow-100 text-yellow-800"},{value:"SIGNED",label:"Signed",color:"bg-blue-100 text-blue-800"},{value:"ACTIVE",label:"Active",color:"bg-green-100 text-green-800"},{value:"EXPIRED",label:"Expired",color:"bg-red-100 text-red-800"},{value:"CANCELLED",label:"Cancelled",color:"bg-red-100 text-red-800"}],sampleAgreements:[{id:"agr-001",type:"PURCHASE",status:"SIGNED",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",quoteId:"quote-001",terms:"Standard purchase agreement terms and conditions. Vehicle sold as-is with manufacturer warranty.",effectiveDate:"2024-01-15T00:00:00Z",expirationDate:null,signedBy:"John Smith",signedAt:"2024-01-15T14:30:00Z",ipAddress:"192.168.1.100",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTEwIDUwIEw1MCAzMCBMOTAgNzAiIHN0cm9rZT0iYmxhY2siIGZpbGw9Im5vbmUiLz48L3N2Zz4=",documents:[{id:"doc-001",name:"Purchase Agreement.pdf",type:"application/pdf",url:"/mock/purchase-agreement.pdf",size:245760,uploadedAt:"2024-01-10T10:00:00Z"},{id:"doc-002",name:"Vehicle Inspection Report.pdf",type:"application/pdf",url:"/mock/inspection-report.pdf",size:156432,uploadedAt:"2024-01-10T10:15:00Z"}],createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-15T14:30:00Z",createdBy:"sales@company.com",totalAmount:35e3,downPayment:5e3,financingAmount:3e4},{id:"agr-002",type:"LEASE",status:"PENDING",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",quoteId:"quote-002",terms:"Lease agreement for 24 months with option to purchase. Monthly payment includes maintenance.",effectiveDate:"2024-02-01T00:00:00Z",expirationDate:"2026-02-01T00:00:00Z",signedBy:null,signedAt:null,ipAddress:null,signatureData:null,documents:[{id:"doc-003",name:"Lease Agreement.pdf",type:"application/pdf",url:"/mock/lease-agreement.pdf",size:198432,uploadedAt:"2024-01-20T11:00:00Z"}],createdAt:"2024-01-20T10:30:00Z",updatedAt:"2024-01-20T11:00:00Z",createdBy:"sales@company.com",totalAmount:62e3,monthlyPayment:1250,securityDeposit:2500},{id:"agr-003",type:"SERVICE",status:"ACTIVE",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",vehicleId:"veh-003",vehicleInfo:"2022 Grand Design Solitude 310GK",quoteId:null,terms:"Annual service agreement covering routine maintenance and emergency repairs.",effectiveDate:"2024-01-01T00:00:00Z",expirationDate:"2024-12-31T23:59:59Z",signedBy:"David Johnson",signedAt:"2023-12-28T16:45:00Z",ipAddress:"10.0.0.50",signatureData:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCI+PHBhdGggZD0iTTIwIDMwIEw2MCA2MCBMMTIwIDIwIiBzdHJva2U9ImJsYWNrIiBmaWxsPSJub25lIi8+PC9zdmc+",documents:[{id:"doc-004",name:"Service Agreement.pdf",type:"application/pdf",url:"/mock/service-agreement.pdf",size:134567,uploadedAt:"2023-12-20T14:00:00Z"}],createdAt:"2023-12-20T13:30:00Z",updatedAt:"2023-12-28T16:45:00Z",createdBy:"service@company.com",annualFee:1200,coverageLevel:"Comprehensive"}],defaultAgreement:{effectiveDate:new Date().toISOString().split("T")[0]}},Vn={defaultStatuses:["Open","In Progress","Waiting for Parts","Customer Review","Completed","Cancelled"],formDefaults:{status:"Open"},categoryOptions:["Maintenance","Repair","Inspection","Warranty","Installation","Emergency"],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Roofing"]},{id:"tech-004",name:"Lisa Chen",specialties:["General Maintenance"]}],sampleTickets:[{id:"ticket-001",title:"AC Unit Not Cooling Properly",description:"Customer reports that the air conditioning unit is running but not cooling the home effectively. Temperature differential is only 5 degrees.",category:"Repair",priority:"High",status:"In Progress",customerId:"cust-001",customerName:"John Smith",customerPhone:"(555) 123-4567",customerEmail:"john.smith@email.com",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",assignedTo:"tech-002",assignedTechName:"Sarah Davis",scheduledDate:"2024-01-15T10:00:00Z",createdAt:"2024-01-12T09:30:00Z",updatedAt:"2024-01-14T14:20:00Z",estimatedHours:4,actualHours:2.5,parts:[{id:"part-001",name:"AC Capacitor",quantity:1,cost:45.99},{id:"part-002",name:"Refrigerant R410A",quantity:2,cost:89.5}],labor:[{id:"labor-001",description:"Diagnostic and testing",hours:1,rate:85},{id:"labor-002",description:"Capacitor replacement",hours:1.5,rate:85}],timeline:[{id:"timeline-001",timestamp:"2024-01-12T09:30:00Z",action:"Ticket Created",user:"System",details:"Service ticket created by customer portal"},{id:"timeline-002",timestamp:"2024-01-12T11:15:00Z",action:"Assigned",user:"Manager",details:"Assigned to Sarah Davis - HVAC specialist"},{id:"timeline-003",timestamp:"2024-01-14T10:00:00Z",action:"Status Updated",user:"Sarah Davis",details:"Started diagnostic work - found faulty capacitor"},{id:"timeline-004",timestamp:"2024-01-14T14:20:00Z",action:"Parts Ordered",user:"Sarah Davis",details:"Ordered replacement capacitor and refrigerant"}],notes:"Customer mentioned the issue started about a week ago. Unit is 3 years old, still under extended warranty for parts.",totalCost:347.49,customerApproved:!0},{id:"ticket-002",title:"Annual Safety Inspection",description:"Scheduled annual safety inspection including electrical, plumbing, and structural components.",category:"Inspection",priority:"Medium",status:"Completed",customerId:"cust-002",customerName:"Maria Rodriguez",customerPhone:"(555) 987-6543",customerEmail:"maria.rodriguez@email.com",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",assignedTo:"tech-003",assignedTechName:"Tom Wilson",scheduledDate:"2024-01-10T08:00:00Z",createdAt:"2024-01-05T16:45:00Z",updatedAt:"2024-01-10T16:30:00Z",estimatedHours:3,actualHours:2.5,parts:[],labor:[{id:"labor-003",description:"Complete safety inspection",hours:2.5,rate:75}],timeline:[{id:"timeline-005",timestamp:"2024-01-05T16:45:00Z",action:"Ticket Created",user:"System",details:"Annual inspection scheduled"},{id:"timeline-006",timestamp:"2024-01-08T09:00:00Z",action:"Assigned",user:"Manager",details:"Assigned to Tom Wilson for structural inspection"},{id:"timeline-007",timestamp:"2024-01-10T08:00:00Z",action:"Started",user:"Tom Wilson",details:"Beginning comprehensive safety inspection"},{id:"timeline-008",timestamp:"2024-01-10T16:30:00Z",action:"Completed",user:"Tom Wilson",details:"Inspection completed - all systems passed"}],notes:"All safety systems checked and verified. Minor recommendation to replace smoke detector batteries within 6 months.",totalCost:187.5,customerApproved:!0}],statusColors:{Open:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800","Waiting for Parts":"bg-orange-100 text-orange-800","Customer Review":"bg-purple-100 text-purple-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"},priorityColors:{Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Urgent:"bg-red-100 text-red-800"}};function wB({searchParams:t}){const{getDisplayName:s,getDisplayEmail:r,getCustomerId:n,isProxying:a,proxiedClient:i}=Zc();Zn();const l=n(),o=Os.sampleLoans.filter(b=>b.customerId===l||b.customerName===s()),c=Vd.sampleAgreements.filter(b=>b.customerId===l||b.customerName===s());Nl.sampleApplications.filter(b=>b.customerId===l||b.customerName===s());const d=Vn.sampleTickets.filter(b=>b.customerId===l||b.customerName===s()),u=o.filter(b=>["Current","Active"].includes(b.status)),m=o.filter(b=>b.status==="Paid Off"),h=c.filter(b=>b.status==="PENDING"),p=d.filter(b=>b.status==="In Progress");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",s().split(" ")[0],"!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your account"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Loans"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.length," active, ",m.length," paid off"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Agreements"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," pending signature"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Service Tickets"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," in progress"]})]})]})]})]})}function SB({fallbackUser:t}){const[s,r]=AR(),n=s.get("impersonateClientId"),a=()=>{const l=new URLSearchParams(s);l.delete("impersonateClientId"),r(l)},i=n?rb.sampleUsers.find(l=>l.id===n):null;return e.jsx(nB,{impersonatedUser:i,fallbackUser:{name:"Portal Customer",email:"customer@portal.com"},children:e.jsx(gP,{children:e.jsxs(dB,{children:[i&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 flex items-center justify-between mb-6",children:[e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Admin View:"})," You are viewing the portal as ",i.name," (",i.email,")"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:a,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),"Exit Impersonation"]})]}),e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(wB,{searchParams:s})}),e.jsx(ot,{path:"/loans",element:e.jsx(vB,{})}),e.jsx(ot,{path:"/agreements",element:e.jsx(wP,{})}),e.jsx(ot,{path:"/finance-applications",element:e.jsx(CP,{})}),e.jsx(ot,{path:"/service-tickets",element:e.jsx(bB,{})}),e.jsx(ot,{path:"/settings",element:e.jsx(NB,{})}),e.jsx(ot,{path:"/*",element:e.jsx("div",{children:"Portal Dashboard"})})]})]})})})}function CB(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Warranty Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage warranty claims and coverage"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"New Warranty Claim"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Warranties"}),e.jsx(Oc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Pending Claims"}),e.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting review"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Resolved Claims"}),e.jsx(_t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Warranty Claims"}),e.jsx(Ee,{children:"Recent warranty claims and their status"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Oc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No warranty claims found"}),e.jsx("p",{className:"mb-4",children:"Claims will appear here when submitted"}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"New Warranty Claim"]})]})})]})]})}const Fh={tags:["First-time Buyer","Investor","Out-of-State","Follow-up Needed"],pipelines:["New Inquiry","In Progress","Negotiation","Closed Won","Closed Lost"],nurtureSequences:[{id:"seq-001",name:"Initial Outreach",description:"Welcome new leads and introduce our services",steps:[{id:"step-001",type:"email",delay:0,subject:"Welcome to our dealership!",template:"welcome-email"},{id:"step-002",type:"sms",delay:1,message:"Thanks for your interest! Call us at (555) 123-4567",template:"welcome-sms"},{id:"step-003",type:"email",delay:3,subject:"See our latest inventory",template:"inventory-showcase"},{id:"step-004",type:"call",delay:7,notes:"Follow up call to discuss needs",template:"discovery-call"}],isActive:!0},{id:"seq-002",name:"Second Touch",description:"Re-engage leads who showed initial interest",steps:[{id:"step-005",type:"email",delay:0,subject:"Still looking for the perfect RV?",template:"reengagement-email"},{id:"step-006",type:"sms",delay:2,message:"Special financing options available this month!",template:"financing-sms"},{id:"step-007",type:"email",delay:5,subject:"Customer testimonials",template:"testimonials-email"}],isActive:!0},{id:"seq-003",name:"Final Attempt",description:"Last chance to convert before marking as lost",steps:[{id:"step-008",type:"email",delay:0,subject:"Last chance - exclusive offer inside",template:"final-offer-email"},{id:"step-009",type:"call",delay:3,notes:"Personal call to address any concerns",template:"final-call"}],isActive:!0}],nurtureLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:2,sequenceType:"email",nextSequenceAction:"2024-01-22T09:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",sequenceId:"seq-002",sequenceStatus:"paused",sequenceStep:1,sequenceType:"sms",nextSequenceAction:"2024-01-25T14:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",sequenceId:"seq-003",sequenceStatus:"completed",sequenceStep:2,sequenceType:"call",nextSequenceAction:null,customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"New",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",sequenceId:null,sequenceStatus:null,sequenceStep:null,sequenceType:null,nextSequenceAction:null,customFields:{pipelineStage:"New Inquiry",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Contacted",assignedTo:"sales-rep-2",notes:"Interested in travel trailer, comparing options",score:88,lastActivity:"2024-01-19T15:30:00Z",sequenceId:"seq-001",sequenceStatus:"active",sequenceStep:3,sequenceType:"email",nextSequenceAction:"2024-01-24T10:00:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:55e3,expectedCloseDate:"2024-02-20",vehicleType:"Travel Trailer",budget:55e3,timeframe:"1-2 months"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"New",assignedTo:"sales-rep-1",notes:"Interested in luxury motorhome for retirement travel",score:82,lastActivity:"2024-01-18T12:00:00Z",sequenceId:"seq-002",sequenceStatus:"active",sequenceStep:1,sequenceType:"email",nextSequenceAction:"2024-01-23T11:00:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:175e3,expectedCloseDate:"2024-04-01",vehicleType:"Class A Motorhome",budget:18e4,timeframe:"4-6 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"}],pipelineLeads:[{id:"lead-001",firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@email.com",phone:"(555) 123-4567",source:"Website",status:"New",assignedTo:"sales-rep-1",notes:"Interested in Class A Motorhome, budget around $150k",score:85,lastActivity:"2024-01-20T14:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:15e4,expectedCloseDate:"2024-03-15",vehicleType:"Class A Motorhome",budget:15e4,timeframe:"3-6 months"},createdAt:"2024-01-15T09:00:00Z",updatedAt:"2024-01-20T14:30:00Z"},{id:"lead-002",firstName:"Sarah",lastName:"Johnson",name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"(555) 987-6543",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Looking for travel trailer for family trips, has financing pre-approval",score:92,lastActivity:"2024-01-22T10:15:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:45e3,expectedCloseDate:"2024-02-28",vehicleType:"Travel Trailer",budget:5e4,timeframe:"1-2 months"},createdAt:"2024-01-10T11:30:00Z",updatedAt:"2024-01-22T10:15:00Z"},{id:"lead-003",firstName:"Michael",lastName:"Davis",name:"Michael Davis",email:"michael.davis@email.com",phone:"(555) 456-7890",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Serious buyer, looking at Fifth Wheel options, cash purchase",score:95,lastActivity:"2024-01-23T16:45:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:85e3,expectedCloseDate:"2024-02-15",vehicleType:"Fifth Wheel",budget:9e4,timeframe:"2-4 weeks"},createdAt:"2024-01-08T14:20:00Z",updatedAt:"2024-01-23T16:45:00Z"},{id:"lead-004",firstName:"Lisa",lastName:"Wilson",name:"Lisa Wilson",email:"lisa.wilson@email.com",phone:"(555) 234-5678",source:"Social Media",status:"Qualified",assignedTo:"sales-rep-3",notes:"First-time RV buyer, needs education on different types",score:78,lastActivity:"2024-01-21T13:20:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:65e3,expectedCloseDate:"2024-03-30",vehicleType:"Class C Motorhome",budget:7e4,timeframe:"3-4 months"},createdAt:"2024-01-12T08:45:00Z",updatedAt:"2024-01-21T13:20:00Z"},{id:"lead-005",firstName:"Robert",lastName:"Brown",name:"Robert Brown",email:"robert.brown@email.com",phone:"(555) 345-6789",source:"Walk-In",status:"Converted",assignedTo:"sales-rep-2",notes:"Purchased 2023 Forest River Cherokee, excellent experience",score:100,lastActivity:"2024-01-19T15:30:00Z",customFields:{pipelineStage:"Closed Won",estimatedValue:55e3,expectedCloseDate:"2024-01-19",vehicleType:"Travel Trailer",budget:55e3,timeframe:"Immediate"},createdAt:"2024-01-05T10:15:00Z",updatedAt:"2024-01-19T15:30:00Z"},{id:"lead-006",firstName:"Jennifer",lastName:"Garcia",name:"Jennifer Garcia",email:"jennifer.garcia@email.com",phone:"(555) 567-8901",source:"Phone Call",status:"Lost",assignedTo:"sales-rep-1",notes:"Decided to go with competitor due to pricing",score:45,lastActivity:"2024-01-18T12:00:00Z",customFields:{pipelineStage:"Closed Lost",estimatedValue:75e3,expectedCloseDate:"2024-01-18",vehicleType:"Class A Motorhome",budget:75e3,timeframe:"1-2 months"},createdAt:"2024-01-03T09:30:00Z",updatedAt:"2024-01-18T12:00:00Z"},{id:"lead-007",firstName:"David",lastName:"Martinez",name:"David Martinez",email:"david.martinez@email.com",phone:"(555) 678-9012",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Interested in toy hauler for motorcycle trips",score:70,lastActivity:"2024-01-24T09:15:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:95e3,expectedCloseDate:"2024-04-15",vehicleType:"Toy Hauler",budget:1e5,timeframe:"4-6 months"},createdAt:"2024-01-24T09:15:00Z",updatedAt:"2024-01-24T09:15:00Z"},{id:"lead-008",firstName:"Amanda",lastName:"Taylor",name:"Amanda Taylor",email:"amanda.taylor@email.com",phone:"(555) 789-0123",source:"Referral",status:"Contacted",assignedTo:"sales-rep-2",notes:"Upgrading from tent camping, needs beginner-friendly option",score:82,lastActivity:"2024-01-23T11:45:00Z",customFields:{pipelineStage:"In Progress",estimatedValue:35e3,expectedCloseDate:"2024-03-01",vehicleType:"Travel Trailer",budget:4e4,timeframe:"2-3 months"},createdAt:"2024-01-16T14:30:00Z",updatedAt:"2024-01-23T11:45:00Z"},{id:"lead-009",firstName:"Christopher",lastName:"Anderson",name:"Christopher Anderson",email:"chris.anderson@email.com",phone:"(555) 890-1234",source:"Trade Show",status:"Qualified",assignedTo:"sales-rep-1",notes:"Looking for luxury fifth wheel, high-end features required",score:88,lastActivity:"2024-01-22T14:20:00Z",customFields:{pipelineStage:"Negotiation",estimatedValue:125e3,expectedCloseDate:"2024-02-20",vehicleType:"Fifth Wheel",budget:13e4,timeframe:"3-4 weeks"},createdAt:"2024-01-09T16:00:00Z",updatedAt:"2024-01-22T14:20:00Z"},{id:"lead-010",firstName:"Michelle",lastName:"Thomas",name:"Michelle Thomas",email:"michelle.thomas@email.com",phone:"(555) 901-2345",source:"Website",status:"New",assignedTo:"sales-rep-3",notes:"Retirement planning, looking for full-time living option",score:75,lastActivity:"2024-01-25T08:30:00Z",customFields:{pipelineStage:"New Inquiry",estimatedValue:18e4,expectedCloseDate:"2024-05-01",vehicleType:"Class A Motorhome",budget:2e5,timeframe:"6+ months"},createdAt:"2024-01-25T08:30:00Z",updatedAt:"2024-01-25T08:30:00Z"}]};function AB({leads:t,onLeadMove:s}){const r=Fh.pipelines,n=t||Fh.pipelineLeads||[],[a,i]=y.useState([]);y.useEffect(()=>{const c=r.map(d=>{const u=n.filter(h=>{var p;return((p=h.customFields)==null?void 0:p.pipelineStage)===d}),m=u.reduce((h,p)=>{var b;return h+(((b=p.customFields)==null?void 0:b.estimatedValue)||0)},0);return{stage:d,count:u.length,value:m,conversionRate:u.length>0?u.length/n.length*100:0}});i(c)},[n,r]);const l=a.reduce((c,d)=>c+d.value,0),o=a.reduce((c,d)=>c+d.count,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Pipeline Value"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De(l)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Gt,{className:"inline h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Leads"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Gt,{className:"inline h-3 w-3 mr-1"}),"+5% from last month"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"24.5%"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Gt,{className:"inline h-3 w-3 mr-1"}),"+2.1% from last month"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Avg. Deal Size"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De(l/Math.max(o,1))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(Gt,{className:"inline h-3 w-3 mr-1"}),"+8% from last month"]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Sales Pipeline"}),e.jsx(Ee,{children:"Track leads through your sales process"})]}),e.jsx(te,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-5",children:r.map((c,d)=>{const u=a.find(h=>h.stage===c),m=d===r.length-1;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ee,{className:"h-32",children:e.jsxs(te,{className:"p-4 h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:c}),e.jsx("div",{className:"text-2xl font-bold",children:(u==null?void 0:u.count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:De((u==null?void 0:u.value)||0)}),e.jsx(Ga,{value:(u==null?void 0:u.conversionRate)||0,className:"h-1 mt-1"})]})]})})}),!m&&e.jsx("div",{className:"mx-2 flex-shrink-0",children:e.jsx(P2,{className:"h-4 w-4 text-muted-foreground"})})]},c)})})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Pipeline Activity"}),e.jsx(Ee,{children:"Latest updates and movements in your pipeline"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[n.slice(0,5).map(c=>{var d,u;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsxs("p",{className:"font-medium",children:[c.firstName," ",c.lastName]})]}),e.jsx(Ae,{variant:"secondary",children:((d=c.customFields)==null?void 0:d.pipelineStage)||"New Inquiry"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:De(((u=c.customFields)==null?void 0:u.estimatedValue)||0)}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Schedule"]})]})]},c.id)}),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No recent pipeline activity"}),e.jsx("p",{className:"text-sm",children:"Leads will appear here once they're added to the pipeline"})]})]})})]})]})}function TB({leadScore:t,lead:s}){const[r,n]=y.useState((t==null?void 0:t.totalScore)||0),[a,i]=y.useState([]);y.useEffect(()=>{if(t!=null&&t.factors)i(t.factors),n(t.totalScore||0);else{const c=[{name:"Email Engagement",weight:.3,value:s.emailEngagement||0},{name:"Website Activity",weight:.25,value:s.websiteActivity||0},{name:"Budget Match",weight:.2,value:s.budgetMatch||0},{name:"Timeline Urgency",weight:.15,value:s.timelineUrgency||0},{name:"Location Preference",weight:.1,value:s.locationMatch||0}];i(c);const d=c.reduce((m,h)=>m+h.value*h.weight*100,0),u=Math.min(Math.round(d),100);n(u)}},[t,s]);const l=c=>c>=80?"text-green-600":c>=60?"text-yellow-600":c>=40?"text-orange-600":"text-red-600",o=c=>c>=80?"Hot Lead":c>=60?"Warm Lead":c>=40?"Cool Lead":"Cold Lead";return e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(Fy,{className:"h-5 w-5"}),"Lead Score"]}),e.jsx(Ee,{children:"Automatically calculated based on engagement and fit"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-3xl font-bold ${l(r)}`,children:r}),e.jsx(Ae,{variant:r>=60?"default":"secondary",children:o(r)})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Score Breakdown"}),a.map((c,d)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ga,{value:c.value*100,className:"w-20"}),e.jsx("span",{className:"text-sm font-medium w-8",children:Math.round(c.value*c.weight*100)})]})]},d))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Lead Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Fh.tags.map(c=>{var d;return e.jsx(Ae,{variant:(((d=s.customFields)==null?void 0:d.tags)||[]).includes(c)?"default":"outline",className:"cursor-pointer",children:c},c)})})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(Ir,{className:"h-4 w-4"}),"Recommendations"]}),e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[r>=80&&e.jsx("p",{children:"• High priority lead - schedule immediate follow-up"}),r>=60&&r<80&&e.jsx("p",{children:"• Good potential - maintain regular contact"}),r>=40&&r<60&&e.jsx("p",{children:"• Nurture with educational content"}),r<40&&e.jsx("p",{children:"• Low priority - add to drip campaign"})]})]})]})]})}function EB({leadId:t,activities:s}){const{logActivity:r}=tl(),[n,a]=y.useState(!1),[i,l]=y.useState({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),o=h=>{switch(h){case"call":return Gc;case"email":return Sr;case"meeting":return Zt;case"note":return sr;case"status_change":return mr;default:return sr}},c=h=>{switch(h){case"call":return"text-green-500";case"email":return"text-blue-500";case"meeting":return"text-purple-500";case"note":return"text-gray-500";case"status_change":return"text-orange-500";default:return"text-gray-500"}},d=h=>{switch(h){case"positive":return"bg-green-50 text-green-700 border-green-200";case"neutral":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"negative":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=async()=>{i.description.trim()&&(await r({leadId:t,type:i.type,description:i.description,outcome:i.outcome,duration:i.duration,scheduledDate:i.scheduledDate,userId:"current-user"}),l({type:"note",description:"",outcome:void 0,duration:void 0,scheduledDate:void 0}),a(!1))},m=[...s].sort((h,p)=>new Date(p.createdAt).getTime()-new Date(h.createdAt).getTime());return e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-lg",children:"Activity Timeline"}),e.jsx(Ee,{children:"Track all interactions and activities for this lead"})]}),e.jsxs(H,{onClick:()=>a(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]})}),e.jsxs(te,{children:[n&&e.jsx(ee,{className:"mb-6 border-dashed",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Activity Type"}),e.jsxs(Be,{value:i.type,onValueChange:h=>l(p=>({...p,type:h})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"call",children:"Phone Call"}),e.jsx(J,{value:"email",children:"Email"}),e.jsx(J,{value:"meeting",children:"Meeting"}),e.jsx(J,{value:"note",children:"Note"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Outcome"}),e.jsxs(Be,{value:i.outcome||"",onValueChange:h=>l(p=>({...p,outcome:h||void 0})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select outcome"})}),e.jsxs($e,{children:[e.jsx(J,{value:"positive",children:"Positive"}),e.jsx(J,{value:"neutral",children:"Neutral"}),e.jsx(J,{value:"negative",children:"Negative"})]})]})]})]}),i.type==="call"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Duration (minutes)"}),e.jsx(ge,{type:"number",value:i.duration||"",onChange:h=>l(p=>({...p,duration:h.target.value?parseInt(h.target.value):void 0})),placeholder:"e.g., 15"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(kt,{value:i.description,onChange:h=>l(p=>({...p,description:h.target.value})),placeholder:"Describe the activity...",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(H,{onClick:u,children:"Add Activity"})]})]})})}),e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activities recorded yet"}):m.map((h,p)=>{const b=o(h.type),j=p===m.length-1;return e.jsxs("div",{className:"relative",children:[!j&&e.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:Ge("flex-shrink-0 w-8 h-8 rounded-full bg-background border-2 flex items-center justify-center",c(h.type)),children:e.jsx(b,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-sm capitalize",children:h.type.replace("_"," ")}),h.outcome&&e.jsx(Ae,{className:Ge("ri-badge-status text-xs",d(h.outcome)),children:h.outcome}),h.duration&&e.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),h.duration,"m"]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:nt(h.createdAt)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.description}),h.scheduledDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Scheduled for: ",nt(h.scheduledDate)]})]})]})]},h.id)})})]})]})}function PB({leadId:t,reminders:s}){const{createReminder:r,completeReminder:n}=tl(),[a,i]=y.useState(!1),[l,o]=y.useState({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),c=j=>{switch(j){case"urgent":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=j=>{switch(j){case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";case"deadline":return"⏰";default:return"📋"}},u=j=>new Date(j)<new Date,m=async()=>{!l.title.trim()||!l.dueDate||(await r({leadId:t,type:l.type,title:l.title,description:l.description,dueDate:new Date(l.dueDate),priority:l.priority,userId:"current-user"}),o({type:"follow_up",title:"",description:"",dueDate:"",priority:"medium"}),i(!1))},h=async j=>{await n(j)},p=s.filter(j=>!j.isCompleted),b=s.filter(j=>j.isCompleted);return e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-lg flex items-center",children:[e.jsx(k2,{className:"h-5 w-5 mr-2"}),"Reminders"]}),e.jsx(Ee,{children:"Set follow-up reminders and track completion"})]}),e.jsxs(H,{onClick:()=>i(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Reminder"]})]})}),e.jsxs(te,{children:[a&&e.jsx(ee,{className:"mb-6 border-dashed",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Reminder Type"}),e.jsxs(Be,{value:l.type,onValueChange:j=>o(x=>({...x,type:j})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"follow_up",children:"Follow Up"}),e.jsx(J,{value:"call",children:"Call"}),e.jsx(J,{value:"email",children:"Email"}),e.jsx(J,{value:"meeting",children:"Meeting"}),e.jsx(J,{value:"deadline",children:"Deadline"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs(Be,{value:l.priority,onValueChange:j=>o(x=>({...x,priority:j})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"low",children:"Low"}),e.jsx(J,{value:"medium",children:"Medium"}),e.jsx(J,{value:"high",children:"High"}),e.jsx(J,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Title"}),e.jsx(ge,{value:l.title,onChange:j=>o(x=>({...x,title:j.target.value})),placeholder:"e.g., Follow up on pricing questions"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),e.jsx(ge,{type:"datetime-local",value:l.dueDate,onChange:j=>o(x=>({...x,dueDate:j.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(kt,{value:l.description,onChange:j=>o(x=>({...x,description:j.target.value})),placeholder:"Additional details...",rows:2})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(H,{onClick:m,children:"Add Reminder"})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[p.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 flex items-center",children:[e.jsx(zt,{className:"h-4 w-4 mr-2"}),"Active Reminders (",p.length,")"]}),e.jsx("div",{className:"space-y-3",children:p.sort((j,x)=>new Date(j.dueDate).getTime()-new Date(x.dueDate).getTime()).map(j=>e.jsxs("div",{className:Ge("flex items-start space-x-3 p-3 border rounded-lg",u(j.dueDate)?"border-red-200 bg-red-50":"hover:bg-accent/50"),children:[e.jsx(Ct,{checked:!1,onCheckedChange:()=>h(j.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:d(j.type)}),e.jsx("span",{className:"font-medium text-sm",children:j.title}),e.jsx(Ae,{className:Ge("ri-badge-status text-xs",c(j.priority)),children:j.priority}),u(j.dueDate)&&e.jsxs(Ae,{className:"bg-red-50 text-red-700 border-red-200 text-xs",children:[e.jsx(Gn,{className:"h-3 w-3 mr-1"}),"Overdue"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:j.description}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(Zt,{className:"h-3 w-3"}),e.jsxs("span",{children:["Due: ",nt(j.dueDate)]})]})]})]},j.id))})]}),b.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 text-muted-foreground",children:["Completed (",b.length,")"]}),e.jsx("div",{className:"space-y-2",children:b.sort((j,x)=>new Date(x.dueDate).getTime()-new Date(j.dueDate).getTime()).slice(0,5).map(j=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 text-sm text-muted-foreground",children:[e.jsx(Ct,{checked:!0,disabled:!0}),e.jsx("span",{className:"line-through",children:j.title}),e.jsx("span",{className:"text-xs",children:nt(j.dueDate)})]},j.id))})]}),p.length===0&&b.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders set for this lead"})]})]})]})}const z5=({leads:t,onSequenceStart:s=()=>{},onSequencePause:r=()=>{},onSequenceReset:n=()=>{}})=>{const a=Fh.nurtureSequences,i=t||[],[l,o]=y.useState(""),c=i.length>0?i:Fh.nurtureLeads,d=m=>{switch(m){case"email":return Sr;case"sms":return sr;case"call":return Gc;default:return Sr}},u=m=>{switch(m){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nurture Sequences"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Be,{value:l,onValueChange:o,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select sequence"})}),e.jsx($e,{children:a.map(m=>e.jsx(J,{value:m.id,children:m.name},m.id))})]})})]}),e.jsx("div",{className:"grid gap-4",children:c.length>0?c.map(m=>{const h=d(m.sequenceType||"email"),p=a.find(b=>b.id===m.sequenceId);return e.jsx(ee,{children:e.jsx(te,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[m.firstName," ",m.lastName]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m.email}),p&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.name," - Step ",m.sequenceStep||1]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[m.sequenceStatus&&e.jsx(Ae,{className:u(m.sequenceStatus),children:m.sequenceStatus.charAt(0).toUpperCase()+m.sequenceStatus.slice(1)}),m.nextSequenceAction&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Next: ",new Date(m.nextSequenceAction).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[!m.sequenceStatus&&e.jsxs(H,{size:"sm",onClick:()=>l&&s(m.id,l),disabled:!l,children:[e.jsx(RA,{className:"h-4 w-4 mr-1"}),"Start"]}),m.sequenceStatus==="active"&&e.jsxs(H,{size:"sm",variant:"outline",onClick:()=>r(m.id),children:[e.jsx(D8,{className:"h-4 w-4 mr-1"}),"Pause"]}),m.sequenceStatus&&e.jsxs(H,{size:"sm",variant:"outline",onClick:()=>n(m.id),children:[e.jsx(_A,{className:"h-4 w-4 mr-1"}),"Reset"]})]})]})]})})},m.id)}):e.jsx(ee,{children:e.jsxs(te,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No leads available for nurturing sequences"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Leads will appear here when they are added to the system"})]})})})]})};function AP(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,m]=y.useState([]),[h,p]=y.useState([]),[b,j]=y.useState([]),[x,f]=y.useState(!1);y.useEffect(()=>{g()},[]);const g=()=>{const W=xs("renter-insight-email-templates",[]),q=xs("renter-insight-sms-templates",[]),_=xs("renter-insight-sequences",[]),V=xs("renter-insight-enrollments",[]),Q=xs("renter-insight-communication-logs",[]),G=xs("renter-insight-ai-insights",[]);if(W.length===0){const Y=[{id:"1",name:"Welcome New Lead",subject:"Welcome to {{company_name}}, {{first_name}}!",body:`Hi {{first_name}},

Thank you for your interest in our RV inventory! We're excited to help you find the perfect recreational vehicle for your adventures.

Here's what happens next:
- One of our RV specialists will contact you within 24 hours
- We'll schedule a personalized tour of our showroom
- You'll receive our latest inventory updates and special offers

In the meantime, feel free to browse our current inventory at {{website_url}}.

Best regards,
{{rep_name}}
{{company_name}}`,type:"welcome",variables:["first_name","company_name","website_url","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Follow-up After 3 Days",subject:"Still looking for the perfect RV, {{first_name}}?",body:`Hi {{first_name}},

I wanted to follow up on your recent inquiry about our RV inventory. Have you had a chance to think about what type of RV would best suit your needs?

Based on your interests, I'd love to show you:
- {{suggested_models}}

We also have some exciting financing options that might interest you. Would you like to schedule a call this week to discuss your options?

You can reply to this email or call me directly at {{rep_phone}}.

Best regards,
{{rep_name}}`,type:"follow_up",variables:["first_name","suggested_models","rep_phone","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];i(Y),Xt("renter-insight-email-templates",Y)}else i(W);if(q.length===0){const Y=[{id:"1",name:"Quick Follow-up",message:"Hi {{first_name}}! This is {{rep_name}} from {{company_name}}. Just wanted to check if you have any questions about the RVs you viewed. Reply STOP to opt out.",type:"follow_up",variables:["first_name","rep_name","company_name"],isActive:!0,createdAt:new Date("2024-01-01")},{id:"2",name:"Appointment Reminder",message:"Hi {{first_name}}! Reminder: Your RV showroom appointment is tomorrow at {{appointment_time}}. See you then! - {{rep_name}}",type:"reminder",variables:["first_name","appointment_time","rep_name"],isActive:!0,createdAt:new Date("2024-01-01")}];o(Y),Xt("renter-insight-sms-templates",Y)}else o(q);if(_.length===0){const Y=[{id:"1",name:"New Lead Welcome Series",description:"Automated welcome sequence for new leads",triggerConditions:[{type:"lead_status",operator:"equals",value:"new"}],steps:[{id:"1",sequenceId:"1",order:1,type:"email",delay:0,content:{subject:"Welcome to {{company_name}}, {{first_name}}!",body:mockEmailTemplates[0].body,template:"1"},isActive:!0},{id:"2",sequenceId:"1",order:2,type:"wait",delay:72,content:{body:"Wait 3 days"},isActive:!0},{id:"3",sequenceId:"1",order:3,type:"email",delay:0,content:{subject:"Still looking for the perfect RV, {{first_name}}?",body:mockEmailTemplates[1].body,template:"2"},isActive:!0},{id:"4",sequenceId:"1",order:4,type:"sms",delay:48,content:{body:mockSmsTemplates[0].message},isActive:!0}],isActive:!0,targetAudience:"New website leads",createdBy:"admin",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}];s(Y),Xt("renter-insight-sequences",Y)}else s(_);if(G.length===0){const Y=[{id:"1",leadId:"1",type:"next_action",title:"Optimal Contact Time Identified",description:"Based on lead behavior patterns, the best time to contact this lead is Tuesday-Thursday between 2-4 PM.",confidence:85,actionable:!0,suggestedActions:["Schedule call for Tuesday 2-4 PM","Send follow-up email on Wednesday morning","Avoid Friday afternoon contact"],metadata:{timeZone:"EST",preferredDays:["Tuesday","Wednesday","Thursday"],preferredHours:[14,15,16]},generatedAt:new Date("2024-01-20"),isRead:!1},{id:"2",leadId:"1",type:"communication_style",title:"Communication Preference Analysis",description:"This lead responds better to detailed, educational content rather than high-pressure sales tactics.",confidence:78,actionable:!0,suggestedActions:["Share educational RV buying guides","Focus on features and benefits","Provide comparison charts","Avoid aggressive closing techniques"],metadata:{preferredStyle:"educational",responseRate:.65,engagementType:"content-focused"},generatedAt:new Date("2024-01-20"),isRead:!1}];m(Y),Xt("renter-insight-ai-insights",Y)}else m(G);n(V),d(Q)},v=async(W,q)=>{var _,V;f(!0);try{const Q={id:Math.random().toString(36).substr(2,9),leadId:W,sequenceId:q,currentStepId:((V=(_=t.find(G=>G.id===q))==null?void 0:_.steps[0])==null?void 0:V.id)||"",status:"active",enrolledAt:new Date,nextActionAt:new Date};return n(G=>[...G,Q]),await w(Q),Q}finally{f(!1)}},w=async W=>{const q=t.find(Q=>Q.id===W.sequenceId);if(!q)return;const _=q.steps.find(Q=>Q.id===W.currentStepId);if(!_)return;switch(_.type){case"email":await k(W.leadId,_);break;case"sms":await T(W.leadId,_);break;case"wait":const Q=new Date;Q.setHours(Q.getHours()+_.delay),n(G=>G.map(Y=>Y.id===W.id?{...Y,nextActionAt:Q}:Y));break}const V=q.steps.findIndex(Q=>Q.id===_.id)+1;if(V<q.steps.length){const Q=q.steps[V];n(G=>G.map(Y=>Y.id===W.id?{...Y,currentStepId:Q.id}:Y))}else n(Q=>Q.map(G=>G.id===W.id?{...G,status:"completed",completedAt:new Date}:G))},k=async(W,q)=>{const _={id:Math.random().toString(36).substr(2,9),leadId:W,type:"email",direction:"outbound",subject:q.content.subject,content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id,template:q.content.template}};d(V=>[...V,_]),setTimeout(()=>{d(V=>V.map(Q=>Q.id===_.id?{...Q,status:"delivered",deliveredAt:new Date}:Q))},2e3),setTimeout(()=>{d(V=>V.map(Q=>Q.id===_.id?{...Q,status:"opened",openedAt:new Date}:Q))},5e3)},T=async(W,q)=>{const _={id:Math.random().toString(36).substr(2,9),leadId:W,type:"sms",direction:"outbound",content:q.content.body,status:"sent",sentAt:new Date,metadata:{sequenceStep:q.id}};d(V=>[...V,_]),setTimeout(()=>{d(V=>V.map(Q=>Q.id===_.id?{...Q,status:"delivered",deliveredAt:new Date}:Q))},1e3)};return{sequences:t,enrollments:r,emailTemplates:a,smsTemplates:l,communicationLogs:c,aiInsights:u,automationRules:h,analytics:b,loading:x,enrollLeadInSequence:v,processNextStep:w,generateAIInsights:async(W,q)=>{var _;f(!0);try{const V=[];q.score>70&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"next_action",title:"High-Priority Lead - Immediate Action Recommended",description:"This lead has a high score and recent activity. Schedule a personal call within 24 hours.",confidence:92,actionable:!0,suggestedActions:["Schedule personal phone call","Send personalized video message","Invite to exclusive showroom tour"],generatedAt:new Date,isRead:!1});const Q=new Date(q.lastActivity),G=Math.floor((Date.now()-Q.getTime())/(1e3*60*60*24));return G>7&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"timing",title:"Re-engagement Opportunity",description:`No activity for ${G} days. Consider a re-engagement campaign.`,confidence:75,actionable:!0,suggestedActions:['Send "We miss you" email',"Offer special incentive","Share new inventory updates"],generatedAt:new Date,isRead:!1}),(_=q.customFields)!=null&&_.budget&&V.push({id:Math.random().toString(36).substr(2,9),leadId:W,type:"content_suggestion",title:"Personalized Content Recommendation",description:`Based on budget range ${q.customFields.budget}, suggest specific RV models and financing options.`,confidence:88,actionable:!0,suggestedActions:["Send budget-specific inventory","Share financing calculator","Provide trade-in valuation"],generatedAt:new Date,isRead:!1}),m(Y=>[...Y.filter(ne=>ne.leadId!==W),...V]),V}finally{f(!1)}},createEmailTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",subject:W.subject||"",body:W.body||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},_=[...a,q];return i(_),Xt("renter-insight-email-templates",_),q},createSMSTemplate:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",message:W.message||"",type:W.type||"custom",variables:W.variables||[],isActive:!0,createdAt:new Date},_=[...l,q];return o(_),Xt("renter-insight-sms-templates",_),q},createNurtureSequence:async W=>{const q={id:Math.random().toString(36).substr(2,9),name:W.name||"",description:W.description||"",triggerConditions:W.triggerConditions||[],steps:W.steps||[],isActive:!0,targetAudience:W.targetAudience||"",createdBy:"current-user",createdAt:new Date,updatedAt:new Date},_=[...t,q];return s(_),Xt("renter-insight-sequences",_),q},updateNurtureSequence:async(W,q)=>{const _=t.map(V=>V.id===W?{...V,...q,updatedAt:new Date}:V);s(_),Xt("renter-insight-sequences",_)},updateEmailTemplate:async(W,q)=>{const _=a.map(V=>V.id===W?{...V,...q}:V);i(_),Xt("renter-insight-email-templates",_)},updateSMSTemplate:async(W,q)=>{const _=l.map(V=>V.id===W?{...V,...q}:V);o(_),Xt("renter-insight-sms-templates",_)},getEnrollmentsByLead:W=>r.filter(q=>q.leadId===W),getCommunicationHistory:W=>c.filter(q=>q.leadId===W).sort((q,_)=>new Date(_.sentAt).getTime()-new Date(q.sentAt).getTime()),getAIInsightsByLead:W=>u.filter(q=>q.leadId===W&&!q.isRead),markInsightAsRead:async W=>{m(q=>q.map(_=>_.id===W?{..._,isRead:!0}:_))},pauseEnrollment:async W=>{n(q=>q.map(_=>_.id===W?{..._,status:"paused"}:_))},resumeEnrollment:async W=>{n(q=>q.map(_=>_.id===W?{..._,status:"active"}:_))}}}function DB({leadId:t,leadData:s}){var k,T,S;const{aiInsights:r,generateAIInsights:n,markInsightAsRead:a,enrollLeadInSequence:i,sequences:l}=AP(),[o,c]=y.useState(!1),[d,u]=y.useState("insights"),m=r.filter(C=>C.leadId===t),h=m.filter(C=>!C.isRead),p=C=>{switch(C){case"next_action":return Ua;case"communication_style":return sr;case"timing":return zt;case"content_suggestion":return E8;case"risk_assessment":return Gt;default:return $i}},b=C=>{switch(C){case"next_action":return"from-blue-50 to-blue-100/50";case"communication_style":return"from-green-50 to-green-100/50";case"timing":return"from-orange-50 to-orange-100/50";case"content_suggestion":return"from-purple-50 to-purple-100/50";case"risk_assessment":return"from-red-50 to-red-100/50";default:return"from-gray-50 to-gray-100/50"}},j=C=>C>=80?"text-green-600 bg-green-50":C>=60?"text-yellow-600 bg-yellow-50":"text-orange-600 bg-orange-50",x=async()=>{c(!0);try{await n(t,s)}finally{c(!1)}},f=async C=>{await a(C)},g=async C=>{await i(t,C)},w=(C=>{var D;const E=[];if(C.score>80?E.push({type:"High Priority Action",suggestion:"This lead has excellent potential. Schedule a personal call within 24 hours and prepare a customized presentation.",confidence:95,actions:["Schedule immediate call","Prepare custom presentation","Send calendar invite"]}):C.score>60?E.push({type:"Warm Lead Nurturing",suggestion:"Good engagement level. Send educational content about RV ownership and schedule a follow-up in 3-5 days.",confidence:85,actions:["Send RV buying guide","Share customer testimonials","Schedule follow-up"]}):E.push({type:"Lead Warming",suggestion:"Lower engagement detected. Enroll in nurture sequence and focus on value-driven content.",confidence:75,actions:["Enroll in email sequence","Send value content","Monitor engagement"]}),(D=C.customFields)!=null&&D.budget){const A=C.customFields.budget;E.push({type:"Budget-Matched Recommendations",suggestion:`Based on ${A} budget, focus on specific inventory that matches their price range and financing options.`,confidence:90,actions:["Send matching inventory","Discuss financing","Offer trade-in evaluation"]})}const M=Math.floor((Date.now()-new Date(C.createdAt).getTime())/(1e3*60*60*24));return M>7&&E.push({type:"Re-engagement Strategy",suggestion:`Lead is ${M} days old. Implement re-engagement tactics with special offers or new inventory alerts.`,confidence:80,actions:["Send special offer","Share new arrivals","Offer exclusive preview"]}),C.source.toLowerCase().includes("website")&&E.push({type:"Digital-First Approach",suggestion:"Lead came from website - they prefer digital communication. Use email and video messages before phone calls.",confidence:85,actions:["Send welcome email","Create video message","Share virtual tour"]}),E})(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx($i,{className:"h-5 w-5 mr-2 text-purple-500"}),"AI Insights & Suggestions"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered recommendations for lead engagement"})]}),e.jsxs(H,{onClick:x,disabled:o,size:"sm",children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),o?"Analyzing...":"Generate Insights"]})]}),e.jsxs(ms,{value:d,onValueChange:u,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ye,{value:"insights",className:"relative",children:["AI Insights",h.length>0&&e.jsx(Ae,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs bg-red-500",children:h.length})]}),e.jsx(Ye,{value:"chatgpt",children:"ChatGPT Suggestions"}),e.jsx(Ye,{value:"automation",children:"Automation"})]}),e.jsx(Je,{value:"insights",className:"space-y-4",children:m.length===0?e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx($i,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Insights Yet"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Generate AI-powered insights to get personalized recommendations for this lead."}),e.jsxs(H,{onClick:x,disabled:o,children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Generate First Insights"]})]})}):e.jsx("div",{className:"space-y-4",children:m.sort((C,E)=>new Date(E.generatedAt).getTime()-new Date(C.generatedAt).getTime()).map(C=>{const E=p(C.type);return e.jsxs(ee,{className:Ge("shadow-sm border-0 bg-gradient-to-br",b(C.type),!C.isRead&&"ring-2 ring-blue-200"),children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"h-6 w-6 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx(de,{className:"text-lg",children:C.title}),e.jsx(Ee,{className:"mt-1",children:C.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ae,{className:Ge("ri-badge-status",j(C.confidence)),children:[C.confidence,"% confidence"]}),!C.isRead&&e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>f(C.id),children:[e.jsx(_t,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})}),C.actionable&&C.suggestedActions&&e.jsx(te,{children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Suggested Actions:"}),e.jsx("div",{className:"space-y-2",children:C.suggestedActions.map((M,D)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/50 rounded-md",children:[e.jsx("span",{className:"text-sm",children:M}),e.jsx(H,{variant:"outline",size:"sm",children:"Execute"})]},D))})]})})]},C.id)})})}),e.jsxs(Je,{value:"chatgpt",className:"space-y-4",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx($i,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx(de,{className:"text-green-900",children:"ChatGPT Analysis"}),e.jsx(Ee,{className:"text-green-700",children:"AI-powered lead analysis and action recommendations"})]})]})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:w.map((C,E)=>e.jsxs("div",{className:"bg-white/70 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-green-900",children:C.type}),e.jsxs(Ae,{className:"bg-green-100 text-green-700 border-green-200",children:[C.confidence,"% confidence"]})]}),e.jsx("p",{className:"text-sm text-green-800 mb-3",children:C.suggestion}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-green-900 uppercase tracking-wide",children:"Recommended Actions:"}),e.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:C.actions.map((M,D)=>e.jsx(H,{variant:"outline",size:"sm",className:"justify-start text-xs bg-white/50 hover:bg-white/80",children:M},D))})]})]},E))})})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center",children:[e.jsx(Ua,{className:"h-5 w-5 mr-2 text-blue-500"}),"Lead Scoring Analysis"]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-blue-900",children:["Current Score: ",s.score]}),e.jsx("p",{className:"text-sm text-blue-700",children:s.score>=80?"Hot Lead - High Priority":s.score>=60?"Warm Lead - Good Potential":s.score>=40?"Cool Lead - Needs Nurturing":"Cold Lead - Long-term Nurturing"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.score}),e.jsx("div",{className:"text-xs text-blue-500",children:"/ 100"})]})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-green-900 mb-1",children:"Strengths"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[((k=s.customFields)==null?void 0:k.budget)&&e.jsx("li",{children:"• Budget information provided"}),((T=s.customFields)==null?void 0:T.timeframe)&&e.jsx("li",{children:"• Clear purchase timeline"}),s.score>60&&e.jsx("li",{children:"• Good engagement level"}),s.source==="Customer Referral"&&e.jsx("li",{children:"• High-quality referral source"})]})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-orange-900 mb-1",children:"Improvement Areas"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[!((S=s.customFields)!=null&&S.budget)&&e.jsx("li",{children:"• No budget information"}),s.score<60&&e.jsx("li",{children:"• Low engagement level"}),!s.assignedTo&&e.jsx("li",{children:"• No sales rep assigned"}),e.jsx("li",{children:"• Limited activity history"})]})]})]})]})})]})]}),e.jsxs(Je,{value:"automation",className:"space-y-4",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-purple-500"}),"Nurture Sequences"]}),e.jsx(Ee,{children:"Enroll this lead in automated nurturing sequences"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:l.filter(C=>C.isActive).map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:C.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[C.steps.length," steps"]}),e.jsx(Ae,{variant:"outline",className:"text-xs",children:C.targetAudience})]})]}),e.jsx(H,{onClick:()=>g(C.id),size:"sm",children:"Enroll Lead"})]},C.id))})})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2 text-orange-500"}),"Smart Timing Recommendations"]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900",children:"Best Contact Times"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Based on lead behavior: Tuesday-Thursday, 2-4 PM"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-900",children:"Email Timing"}),e.jsx("p",{className:"text-sm text-green-700",children:"Send emails Tuesday/Wednesday mornings for best open rates"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900",children:"Follow-up Schedule"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Next follow-up recommended in 2-3 days based on engagement"})]})]})})]})]})]})]})}function IB({leadId:t,leadData:s}){const{emailTemplates:r,smsTemplates:n,getCommunicationHistory:a}=AP(),[i,l]=y.useState("history"),[o,c]=y.useState(""),[d,u]=y.useState(""),[m,h]=y.useState(""),[p,b]=y.useState(""),[j,x]=y.useState(""),[f,g]=y.useState(!1),v=a(t),w=M=>{switch(M){case"sent":return e.jsx(va,{className:"h-3 w-3 text-blue-500"});case"delivered":return e.jsx(_t,{className:"h-3 w-3 text-green-500"});case"opened":return e.jsx(Sr,{className:"h-3 w-3 text-purple-500"});case"clicked":return e.jsx(_t,{className:"h-3 w-3 text-green-600"});case"replied":return e.jsx(sr,{className:"h-3 w-3 text-blue-600"});case"failed":return e.jsx(Ir,{className:"h-3 w-3 text-red-500"});default:return e.jsx(zt,{className:"h-3 w-3 text-gray-500"})}},k=M=>{switch(M){case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"delivered":return"bg-green-50 text-green-700 border-green-200";case"opened":return"bg-purple-50 text-purple-700 border-purple-200";case"clicked":return"bg-green-50 text-green-700 border-green-200";case"replied":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},T=(M,D)=>{var A;return M.replace(/\{\{first_name\}\}/g,D.firstName||"").replace(/\{\{last_name\}\}/g,D.lastName||"").replace(/\{\{company_name\}\}/g,"Renter Insight RV").replace(/\{\{rep_name\}\}/g,"Your Sales Representative").replace(/\{\{rep_phone\}\}/g,"(555) 123-4567").replace(/\{\{website_url\}\}/g,"https://renterinsight.com").replace(/\{\{budget\}\}/g,((A=D.customFields)==null?void 0:A.budget)||"your budget")},S=async()=>{g(!0);try{let M=m,D=p;if(o){const A=r.find(I=>I.id===o);A&&(M=T(A.subject,s),D=T(A.body,s))}await new Promise(A=>setTimeout(A,2e3)),h(""),b(""),c(""),console.log("Email sent:",{subject:M,body:D,to:s.email})}finally{g(!1)}},C=async()=>{g(!0);try{let M=j;if(d){const D=n.find(A=>A.id===d);D&&(M=T(D.message,s))}await new Promise(D=>setTimeout(D,1500)),x(""),u(""),console.log("SMS sent:",{message:M,to:s.phone})}finally{g(!1)}},E=(M,D)=>{if(D==="email"){c(M);const A=r.find(I=>I.id===M);A&&(h(T(A.subject,s)),b(T(A.body,s)))}else{u(M);const A=n.find(I=>I.id===M);A&&x(T(A.message,s))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Communication Center"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send emails, SMS, and track communication history"})]}),e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"history",children:"History"}),e.jsx(Ye,{value:"email",children:"Send Email"}),e.jsx(Ye,{value:"sms",children:"Send SMS"})]}),e.jsx(Je,{value:"history",className:"space-y-4",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(zt,{className:"h-5 w-5 mr-2"}),"Communication History"]}),e.jsx(Ee,{children:"All email and SMS communications with this lead"})]}),e.jsx(te,{children:v.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(sr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No communication history yet"}),e.jsx("p",{className:"text-sm",children:"Start by sending an email or SMS"})]}):e.jsx("div",{className:"space-y-4",children:v.map((M,D)=>e.jsxs("div",{className:"relative",children:[D<v.length-1&&e.jsx("div",{className:"absolute left-4 top-12 bottom-0 w-px bg-border"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:Ge("flex-shrink-0 w-8 h-8 rounded-full border-2 bg-background flex items-center justify-center",M.type==="email"?"border-blue-200":"border-green-200"),children:M.type==="email"?e.jsx(Sr,{className:"h-4 w-4 text-blue-500"}):e.jsx(sr,{className:"h-4 w-4 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium text-sm capitalize",children:[M.type," ",M.direction]}),e.jsxs(Ae,{className:Ge("ri-badge-status text-xs",k(M.status)),children:[w(M.status),e.jsx("span",{className:"ml-1",children:M.status})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:nt(M.sentAt)})]}),M.subject&&e.jsx("p",{className:"font-medium text-sm mb-1",children:M.subject}),e.jsx("div",{className:"bg-muted/30 p-3 rounded-md",children:e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:M.content})}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Sent: ",nt(M.sentAt)]}),M.deliveredAt&&e.jsxs("span",{children:["Delivered: ",nt(M.deliveredAt)]}),M.openedAt&&e.jsxs("span",{children:["Opened: ",nt(M.openedAt)]}),M.clickedAt&&e.jsxs("span",{children:["Clicked: ",nt(M.clickedAt)]})]})]})]})]},M.id))})})]})}),e.jsx(Je,{value:"email",className:"space-y-4",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Sr,{className:"h-5 w-5 mr-2 text-blue-500"}),"Send Email"]}),e.jsx(Ee,{children:"Send personalized emails using templates or custom content"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Email Template (Optional)"}),e.jsxs(Be,{value:o,onValueChange:M=>E(M,"email"),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Choose a template or write custom email"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"Custom Email"}),r.filter(M=>M.isActive).map(M=>e.jsxs(J,{value:M.id,children:[M.name," (",M.type,")"]},M.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"To"}),e.jsx(ge,{value:s.email,disabled:!0,className:"bg-muted/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject"}),e.jsx(ge,{value:m,onChange:M=>h(M.target.value),placeholder:"Enter email subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Message"}),e.jsx(kt,{value:p,onChange:M=>b(M.target.value),placeholder:"Enter your email message",rows:8})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{last_name},", ",{company_name},", ",{rep_name}]}),e.jsxs(H,{onClick:S,disabled:f||!m||!p,children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),f?"Sending...":"Send Email"]})]})]})]})}),e.jsx(Je,{value:"sms",className:"space-y-4",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-green-500"}),"Send SMS"]}),e.jsx(Ee,{children:"Send text messages using templates or custom content"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"SMS Template (Optional)"}),e.jsxs(Be,{value:d,onValueChange:M=>E(M,"sms"),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Choose a template or write custom SMS"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"Custom SMS"}),n.filter(M=>M.isActive).map(M=>e.jsxs(J,{value:M.id,children:[M.name," (",M.type,")"]},M.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"To"}),e.jsx(ge,{value:s.phone,disabled:!0,className:"bg-muted/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Message"}),e.jsx(kt,{value:j,onChange:M=>x(M.target.value),placeholder:"Enter your SMS message",rows:4,maxLength:160}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[j.length,"/160 characters"]}),e.jsx("div",{className:Ge("text-xs",j.length>160?"text-red-500":"text-muted-foreground"),children:j.length>160&&"Message too long"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Available variables: ",{first_name},", ",{company_name},", ",{rep_name}]}),e.jsxs(H,{onClick:C,disabled:f||!j||j.length>160,children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),f?"Sending...":"Send SMS"]})]})]})]})})]})]})}var TP={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,s){((r,n)=>{t.exports=n()})(Vf,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a,i=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,o={},c=0,d={};function u(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(E){var M=k(E);M.chunkSize=parseInt(M.chunkSize),E.step||E.chunk||(M.chunkSize=null),this._handle=new j(M),(this._handle.streamer=this)._config=M}).call(this,C),this.parseChunk=function(E,M){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let I=this._config.newline;I||(A=this._config.quoteChar||'"',I=this._handle.guessLineEndings(E,A)),E=[...E.split(I).slice(D)].join(I)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(E))!==void 0&&(E=A),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+E,A=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(E=A.meta.cursor,D=(this._finished||(this._partialLine=D.substring(E-this._baseIndex),this._baseIndex=E),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:A,workerId:d.WORKER_ID,finished:D});else if(S(this._config.chunk)&&!M){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!D||!S(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(E){S(this._config.error)?this._config.error(E):l&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:E,finished:!1})}}function m(C){var E;(C=C||{}).chunkSize||(C.chunkSize=d.RemoteChunkSize),u.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),i||(E.onload=T(this._chunkLoaded,this),E.onerror=T(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var M,D=this._config.downloadRequestHeaders;for(M in D)E.setRequestHeader(M,D[M])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,E.setRequestHeader("Range","bytes="+this._start+"-"+A));try{E.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}i&&E.status===0&&this._chunkError()}},this._chunkLoaded=function(){E.readyState===4&&(E.status<200||400<=E.status?this._chunkError():(this._start+=this._config.chunkSize||E.responseText.length,this._finished=!this._config.chunkSize||this._start>=(M=>(M=M.getResponseHeader("Content-Range"))!==null?parseInt(M.substring(M.lastIndexOf("/")+1)):-1)(E),this.parseChunk(E.responseText)))},this._chunkError=function(M){M=E.statusText||M,this._sendError(new Error(M))}}function h(C){(C=C||{}).chunkSize||(C.chunkSize=d.LocalChunkSize),u.call(this,C);var E,M,D=typeof FileReader<"u";this.stream=function(A){this._input=A,M=A.slice||A.webkitSlice||A.mozSlice,D?((E=new FileReader).onload=T(this._chunkLoaded,this),E.onerror=T(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),A=M.call(A,this._start,I)),E.readAsText(A,this._config.encoding));D||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(E.error)}}function p(C){var E;u.call(this,C=C||{}),this.stream=function(M){return E=M,this._nextChunk()},this._nextChunk=function(){var M,D;if(!this._finished)return M=this._config.chunkSize,E=M?(D=E.substring(0,M),E.substring(M)):(D=E,""),this._finished=!E,this.parseChunk(D)}}function b(C){u.call(this,C=C||{});var E=[],M=!0,D=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&E.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):M=!0},this._streamData=T(function(A){try{E.push(typeof A=="string"?A:A.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(I){this._streamError(I)}},this),this._streamError=T(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=T(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=T(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(C){var E,M,D,A,I=Math.pow(2,53),L=-I,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,R=this,$=0,U=0,W=!1,q=!1,_=[],V={data:[],errors:[],meta:{}};function Q(le){return C.skipEmptyLines==="greedy"?le.join("").trim()==="":le.length===1&&le[0].length===0}function G(){if(V&&D&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),D=!1),C.skipEmptyLines&&(V.data=V.data.filter(function(je){return!Q(je)})),Y()){let je=function(we,Re){S(C.transformHeader)&&(we=C.transformHeader(we,Re)),_.push(we)};if(V)if(Array.isArray(V.data[0])){for(var le=0;Y()&&le<V.data.length;le++)V.data[le].forEach(je);V.data.splice(0,1)}else V.data.forEach(je)}function oe(je,we){for(var Re=C.header?{}:[],ye=0;ye<je.length;ye++){var Se=ye,he=je[ye],he=((ke,xe)=>(Pe=>(C.dynamicTypingFunction&&C.dynamicTyping[Pe]===void 0&&(C.dynamicTyping[Pe]=C.dynamicTypingFunction(Pe)),(C.dynamicTyping[Pe]||C.dynamicTyping)===!0))(ke)?xe==="true"||xe==="TRUE"||xe!=="false"&&xe!=="FALSE"&&((Pe=>{if(F.test(Pe)&&(Pe=parseFloat(Pe),L<Pe&&Pe<I))return 1})(xe)?parseFloat(xe):B.test(xe)?new Date(xe):xe===""?null:xe):xe)(Se=C.header?ye>=_.length?"__parsed_extra":_[ye]:Se,he=C.transform?C.transform(he,Se):he);Se==="__parsed_extra"?(Re[Se]=Re[Se]||[],Re[Se].push(he)):Re[Se]=he}return C.header&&(ye>_.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+ye,U+we):ye<_.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+ye,U+we)),Re}var pe;V&&(C.header||C.dynamicTyping||C.transform)&&(pe=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(oe),pe=V.data.length):V.data=oe(V.data,0),C.header&&V.meta&&(V.meta.fields=_),U+=pe)}function Y(){return C.header&&_.length===0}function ne(le,oe,pe,je){le={type:le,code:oe,message:pe},je!==void 0&&(le.row=je),V.errors.push(le)}S(C.step)&&(A=C.step,C.step=function(le){V=le,Y()?G():(G(),V.data.length!==0&&($+=le.data.length,C.preview&&$>C.preview?M.abort():(V.data=V.data[0],A(V,R))))}),this.parse=function(le,oe,pe){var je=C.quoteChar||'"',je=(C.newline||(C.newline=this.guessLineEndings(le,je)),D=!1,C.delimiter?S(C.delimiter)&&(C.delimiter=C.delimiter(le),V.meta.delimiter=C.delimiter):((je=((we,Re,ye,Se,he)=>{var ke,xe,Pe,qe;he=he||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var lt=0;lt<he.length;lt++){for(var at,He=he[lt],Le=0,We=0,ut=0,gt=(Pe=void 0,new f({comments:Se,delimiter:He,newline:Re,preview:10}).parse(we)),Et=0;Et<gt.data.length;Et++)ye&&Q(gt.data[Et])?ut++:(at=gt.data[Et].length,We+=at,Pe===void 0?Pe=at:0<at&&(Le+=Math.abs(at-Pe),Pe=at));0<gt.data.length&&(We/=gt.data.length-ut),(xe===void 0||Le<=xe)&&(qe===void 0||qe<We)&&1.99<We&&(xe=Le,ke=He,qe=We)}return{successful:!!(C.delimiter=ke),bestDelimiter:ke}})(le,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=je.bestDelimiter:(D=!0,C.delimiter=d.DefaultDelimiter),V.meta.delimiter=C.delimiter),k(C));return C.preview&&C.header&&je.preview++,E=le,M=new f(je),V=M.parse(E,oe,pe),G(),W?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,M.abort(),E=S(C.chunk)?"":E.substring(M.getCharIndex())},this.resume=function(){R.streamer._halted?(W=!1,R.streamer.parseChunk(E,!0)):setTimeout(R.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,M.abort(),V.meta.aborted=!0,S(C.complete)&&C.complete(V),E=""},this.guessLineEndings=function(we,je){we=we.substring(0,1048576);var je=new RegExp(x(je)+"([^]*?)"+x(je),"gm"),pe=(we=we.replace(je,"")).split("\r"),je=we.split(`
`),we=1<je.length&&je[0].length<pe[0].length;if(pe.length===1||we)return`
`;for(var Re=0,ye=0;ye<pe.length;ye++)pe[ye][0]===`
`&&Re++;return Re>=pe.length/2?`\r
`:"\r"}}function x(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(C){var E=(C=C||{}).delimiter,M=C.newline,D=C.comments,A=C.step,I=C.preview,L=C.fastMode,F=null,B=!1,R=C.quoteChar==null?'"':C.quoteChar,$=R;if(C.escapeChar!==void 0&&($=C.escapeChar),(typeof E!="string"||-1<d.BAD_DELIMITERS.indexOf(E))&&(E=","),D===E)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<d.BAD_DELIMITERS.indexOf(D))&&(D=!1),M!==`
`&&M!=="\r"&&M!==`\r
`&&(M=`
`);var U=0,W=!1;this.parse=function(q,_,V){if(typeof q!="string")throw new Error("Input must be a string");var Q=q.length,G=E.length,Y=M.length,ne=D.length,le=S(A),oe=[],pe=[],je=[],we=U=0;if(!q)return Le();if(L||L!==!1&&q.indexOf(R)===-1){for(var Re=q.split(M),ye=0;ye<Re.length;ye++){if(je=Re[ye],U+=je.length,ye!==Re.length-1)U+=M.length;else if(V)return Le();if(!D||je.substring(0,ne)!==D){if(le){if(oe=[],qe(je.split(E)),We(),W)return Le()}else qe(je.split(E));if(I&&I<=ye)return oe=oe.slice(0,I),Le(!0)}}return Le()}for(var Se=q.indexOf(E,U),he=q.indexOf(M,U),ke=new RegExp(x($)+x(R),"g"),xe=q.indexOf(R,U);;)if(q[U]===R)for(xe=U,U++;;){if((xe=q.indexOf(R,xe+1))===-1)return V||pe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:oe.length,index:U}),at();if(xe===Q-1)return at(q.substring(U,xe).replace(ke,R));if(R===$&&q[xe+1]===$)xe++;else if(R===$||xe===0||q[xe-1]!==$){Se!==-1&&Se<xe+1&&(Se=q.indexOf(E,xe+1));var Pe=lt((he=he!==-1&&he<xe+1?q.indexOf(M,xe+1):he)===-1?Se:Math.min(Se,he));if(q.substr(xe+1+Pe,G)===E){je.push(q.substring(U,xe).replace(ke,R)),q[U=xe+1+Pe+G]!==R&&(xe=q.indexOf(R,U)),Se=q.indexOf(E,U),he=q.indexOf(M,U);break}if(Pe=lt(he),q.substring(xe+1+Pe,xe+1+Pe+Y)===M){if(je.push(q.substring(U,xe).replace(ke,R)),He(xe+1+Pe+Y),Se=q.indexOf(E,U),xe=q.indexOf(R,U),le&&(We(),W))return Le();if(I&&oe.length>=I)return Le(!0);break}pe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:oe.length,index:U}),xe++}}else if(D&&je.length===0&&q.substring(U,U+ne)===D){if(he===-1)return Le();U=he+Y,he=q.indexOf(M,U),Se=q.indexOf(E,U)}else if(Se!==-1&&(Se<he||he===-1))je.push(q.substring(U,Se)),U=Se+G,Se=q.indexOf(E,U);else{if(he===-1)break;if(je.push(q.substring(U,he)),He(he+Y),le&&(We(),W))return Le();if(I&&oe.length>=I)return Le(!0)}return at();function qe(ut){oe.push(ut),we=U}function lt(ut){var gt=0;return gt=ut!==-1&&(ut=q.substring(xe+1,ut))&&ut.trim()===""?ut.length:gt}function at(ut){return V||(ut===void 0&&(ut=q.substring(U)),je.push(ut),U=Q,qe(je),le&&We()),Le()}function He(ut){U=ut,qe(je),je=[],he=q.indexOf(M,U)}function Le(ut){if(C.header&&!_&&oe.length&&!B){var gt=oe[0],Et=Object.create(null),Nt=new Set(gt);let Lt=!1;for(let dt=0;dt<gt.length;dt++){let hs=gt[dt];if(Et[hs=S(C.transformHeader)?C.transformHeader(hs,dt):hs]){let Kt,Lr=Et[hs];for(;Kt=hs+"_"+Lr,Lr++,Nt.has(Kt););Nt.add(Kt),gt[dt]=Kt,Et[hs]++,Lt=!0,(F=F===null?{}:F)[Kt]=hs}else Et[hs]=1,gt[dt]=hs;Nt.add(hs)}Lt&&console.warn("Duplicate headers found and renamed."),B=!0}return{data:oe,errors:pe,meta:{delimiter:E,linebreak:M,aborted:W,truncated:!!ut,cursor:we+(_||0),renamedHeaders:F}}}function We(){A(Le()),oe=[],pe=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return U}}function g(C){var E=C.data,M=o[E.workerId],D=!1;if(E.error)M.userError(E.error,E.file);else if(E.results&&E.results.data){var A={abort:function(){D=!0,v(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(S(M.userStep)){for(var I=0;I<E.results.data.length&&(M.userStep({data:E.results.data[I],errors:E.results.errors,meta:E.results.meta},A),!D);I++);delete E.results}else S(M.userChunk)&&(M.userChunk(E.results,A,E.file),delete E.results)}E.finished&&!D&&v(E.workerId,E.results)}function v(C,E){var M=o[C];S(M.userComplete)&&M.userComplete(E),M.terminate(),delete o[C]}function w(){throw new Error("Not implemented.")}function k(C){if(typeof C!="object"||C===null)return C;var E,M=Array.isArray(C)?[]:{};for(E in C)M[E]=k(C[E]);return M}function T(C,E){return function(){C.apply(E,arguments)}}function S(C){return typeof C=="function"}return d.parse=function(C,E){var M=(E=E||{}).dynamicTyping||!1;if(S(M)&&(E.dynamicTypingFunction=M,M={}),E.dynamicTyping=M,E.transform=!!S(E.transform)&&E.transform,!E.worker||!d.WORKERS_SUPPORTED)return M=null,d.NODE_STREAM_INPUT,typeof C=="string"?(C=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(C),M=new(E.download?m:p)(E)):C.readable===!0&&S(C.read)&&S(C.on)?M=new b(E):(n.File&&C instanceof File||C instanceof Object)&&(M=new h(E)),M.stream(C);(M=(()=>{var D;return!!d.WORKERS_SUPPORTED&&(D=(()=>{var A=n.URL||n.webkitURL||null,I=r.toString();return d.BLOB_URL||(d.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(D=new n.Worker(D)).onmessage=g,D.id=c++,o[D.id]=D)})()).userStep=E.step,M.userChunk=E.chunk,M.userComplete=E.complete,M.userError=E.error,E.step=S(E.step),E.chunk=S(E.chunk),E.complete=S(E.complete),E.error=S(E.error),delete E.worker,M.postMessage({input:C,config:E,workerId:M.id})},d.unparse=function(C,E){var M=!1,D=!0,A=",",I=`\r
`,L='"',F=L+L,B=!1,R=null,$=!1,U=((()=>{if(typeof E=="object"){if(typeof E.delimiter!="string"||d.BAD_DELIMITERS.filter(function(_){return E.delimiter.indexOf(_)!==-1}).length||(A=E.delimiter),typeof E.quotes!="boolean"&&typeof E.quotes!="function"&&!Array.isArray(E.quotes)||(M=E.quotes),typeof E.skipEmptyLines!="boolean"&&typeof E.skipEmptyLines!="string"||(B=E.skipEmptyLines),typeof E.newline=="string"&&(I=E.newline),typeof E.quoteChar=="string"&&(L=E.quoteChar),typeof E.header=="boolean"&&(D=E.header),Array.isArray(E.columns)){if(E.columns.length===0)throw new Error("Option columns is empty");R=E.columns}E.escapeChar!==void 0&&(F=E.escapeChar+L),E.escapeFormulae instanceof RegExp?$=E.escapeFormulae:typeof E.escapeFormulae=="boolean"&&E.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(L),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return W(null,C,B);if(typeof C[0]=="object")return W(R||Object.keys(C[0]),C,B)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||R),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),W(C.fields||[],C.data||[],B);throw new Error("Unable to serialize unrecognized input");function W(_,V,Q){var G="",Y=(typeof _=="string"&&(_=JSON.parse(_)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(_)&&0<_.length),ne=!Array.isArray(V[0]);if(Y&&D){for(var le=0;le<_.length;le++)0<le&&(G+=A),G+=q(_[le],le);0<V.length&&(G+=I)}for(var oe=0;oe<V.length;oe++){var pe=(Y?_:V[oe]).length,je=!1,we=Y?Object.keys(V[oe]).length===0:V[oe].length===0;if(Q&&!Y&&(je=Q==="greedy"?V[oe].join("").trim()==="":V[oe].length===1&&V[oe][0].length===0),Q==="greedy"&&Y){for(var Re=[],ye=0;ye<pe;ye++){var Se=ne?_[ye]:ye;Re.push(V[oe][Se])}je=Re.join("").trim()===""}if(!je){for(var he=0;he<pe;he++){0<he&&!we&&(G+=A);var ke=Y&&ne?_[he]:he;G+=q(V[oe][ke],he)}oe<V.length-1&&(!Q||0<pe&&!we)&&(G+=I)}}return G}function q(_,V){var Q,G;return _==null?"":_.constructor===Date?JSON.stringify(_).slice(1,25):(G=!1,$&&typeof _=="string"&&$.test(_)&&(_="'"+_,G=!0),Q=_.toString().replace(U,F),(G=G||M===!0||typeof M=="function"&&M(_,V)||Array.isArray(M)&&M[V]||((Y,ne)=>{for(var le=0;le<ne.length;le++)if(-1<Y.indexOf(ne[le]))return!0;return!1})(Q,d.BAD_DELIMITERS)||-1<Q.indexOf(A)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?L+Q+L:Q)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=f,d.ParserHandle=j,d.NetworkStreamer=m,d.FileStreamer=h,d.StringStreamer=p,d.ReadableStreamStreamer=b,n.jQuery&&((a=n.jQuery).fn.parse=function(C){var E=C.config||{},M=[];return this.each(function(I){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)M.push({file:this.files[L],inputElem:this,instanceConfig:a.extend({},E)})}),D(),this;function D(){if(M.length===0)S(C.complete)&&C.complete();else{var I,L,F,B,R=M[0];if(S(C.before)){var $=C.before(R.file,R.inputElem);if(typeof $=="object"){if($.action==="abort")return I="AbortError",L=R.file,F=R.inputElem,B=$.reason,void(S(C.error)&&C.error({name:I},L,F,B));if($.action==="skip")return void A();typeof $.config=="object"&&(R.instanceConfig=a.extend(R.instanceConfig,$.config))}else if($==="skip")return void A()}var U=R.instanceConfig.complete;R.instanceConfig.complete=function(W){S(U)&&U(W,R.file,R.inputElem),A()},d.parse(R.file,R.instanceConfig)}}function A(){M.splice(0,1),D()}}),l&&(n.onmessage=function(C){C=C.data,d.WORKER_ID===void 0&&C&&(d.WORKER_ID=C.workerId),typeof C.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(C.input,C.config),finished:!0}):(n.File&&C.input instanceof File||C.input instanceof Object)&&(C=d.parse(C.input,C.config))&&n.postMessage({workerId:d.WORKER_ID,results:C,finished:!0})}),(m.prototype=Object.create(u.prototype)).constructor=m,(h.prototype=Object.create(u.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(b.prototype=Object.create(u.prototype)).constructor=b,d})})(TP);var kB=TP.exports;const Rh=Ho(kB);function Jc(){const[t,s]=y.useState([]),[r,n]=y.useState(!1);y.useEffect(()=>{a()},[]);const a=()=>{const p=xs("renter-insight-vehicles",[{id:"1",vin:"1FDXE4FS8KDC12345",make:"Forest River",model:"Georgetown",year:2024,type:$t.MOTORHOME,status:Jt.AVAILABLE,price:125e3,cost:95e3,location:"Lot A-15",features:["Slide-out","Generator","Solar Panel"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"2",vin:"1FDXE4FS8KDC67890",make:"Winnebago",model:"View",year:2023,type:$t.RV,status:Jt.AVAILABLE,price:89e3,cost:72e3,location:"Lot B-08",features:["Compact Design","Fuel Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-12")},{id:"3",vin:"1FDXE4FS8KDC11111",make:"Jayco",model:"Eagle",year:2024,type:$t.FIFTH_WHEEL,status:Jt.AVAILABLE,price:75e3,cost:58e3,location:"Lot C-12",features:["Bunk Beds","Outdoor Kitchen","Fireplace"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-10")},{id:"4",vin:"1FDXE4FS8KDC22222",make:"Airstream",model:"Flying Cloud",year:2024,type:$t.TRAVEL_TRAILER,status:Jt.AVAILABLE,price:95e3,cost:78e3,location:"Lot D-05",features:["Aluminum Construction","Premium Interior","Smart Technology"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{},createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-08")},{id:"5",vin:"1FDXE4FS8KDC33333",make:"Grand Design",model:"Momentum",year:2023,type:$t.TOY_HAULER,status:Jt.AVAILABLE,price:11e4,cost:88e3,location:"Lot E-18",features:["Garage Space","Fuel Station","Generator"],images:["https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg"],customFields:{},createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-05")},{id:"6",vin:"MH12345678901234",make:"Clayton Homes",model:"Inspiration",year:2024,type:$t.DOUBLE_WIDE,status:Jt.AVAILABLE,price:125e3,cost:95e3,location:"MH Section A-10",features:["3 Bedroom","2 Bathroom","Open Floor Plan","Energy Efficient"],images:["https://images.pexels.com/photos/2506923/pexels-photo-2506923.jpeg"],customFields:{length:"76",width:"28",squareFootage:"2128",constructionType:"Manufactured",roofType:"Shingle",exteriorSiding:"Vinyl",insulationRating:"R-21"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);s(p)},i=p=>{Xt("renter-insight-vehicles",p)};return{vehicles:t,loading:r,getAvailableVehicles:()=>t.filter(p=>p.status===Jt.AVAILABLE),getVehicleById:p=>t.find(b=>b.id===p),updateVehicleStatus:async(p,b)=>{const j=t.map(x=>x.id===p?{...x,status:b,updatedAt:new Date}:x);s(j),i(j)},createVehicle:async p=>{n(!0);try{const b={id:Math.random().toString(36).substr(2,9),vin:p.vin||"",make:p.make||"",model:p.model||"",year:p.year||new Date().getFullYear(),type:p.type||$t.RV,status:Jt.AVAILABLE,price:p.price||0,cost:p.cost||0,location:p.location||"",features:p.features||[],images:p.images||[],customFields:p.customFields||{},createdAt:new Date,updatedAt:new Date},j=[...t,b];return s(j),i(j),b}finally{n(!1)}},deleteVehicle:async p=>{const b=t.filter(j=>j.id!==p);s(b),i(b)},importVehiclesFromCSV:async p=>new Promise((b,j)=>{Rh.parse(p,{header:!0,skipEmptyLines:!0,complete:x=>{const f=x.data.map(g=>({vin:g.vin||"",make:g.make||"",model:g.model||"",year:parseInt(g.year)||new Date().getFullYear(),type:g.type||$t.RV,status:g.status||Jt.AVAILABLE,price:parseFloat(g.price)||0,cost:parseFloat(g.cost)||0,location:g.location||"",features:g.features?g.features.split(",").map(v=>v.trim()):[],images:[],customFields:{exteriorColor:g.exteriorColor||"",interiorColor:g.interiorColor||"",length:g.length||"",weight:g.weight||"",sleeps:g.sleeps||"",slideouts:g.slideouts||"",fuelType:g.fuelType||"",mileage:g.mileage||"",condition:g.condition||"New"}}));b(f)},error:x=>{j(x)}})}),exportVehiclesToCSV:()=>{const p=t.map(j=>{var x,f,g,v,w,k,T,S,C;return{id:j.id,vin:j.vin,make:j.make,model:j.model,year:j.year,type:j.type,status:j.status,price:j.price,cost:j.cost,location:j.location,features:j.features.join(", "),exteriorColor:((x=j.customFields)==null?void 0:x.exteriorColor)||"",interiorColor:((f=j.customFields)==null?void 0:f.interiorColor)||"",length:((g=j.customFields)==null?void 0:g.length)||"",weight:((v=j.customFields)==null?void 0:v.weight)||"",sleeps:((w=j.customFields)==null?void 0:w.sleeps)||"",slideouts:((k=j.customFields)==null?void 0:k.slideouts)||"",fuelType:((T=j.customFields)==null?void 0:T.fuelType)||"",mileage:((S=j.customFields)==null?void 0:S.mileage)||"",condition:((C=j.customFields)==null?void 0:C.condition)||""}});return Rh.unparse(p)}}}const Fm=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"}],LB=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0}];function EP({quote:t,customerId:s,onSave:r,onCancel:n}){const{toast:a}=xt(),{getAvailableVehicles:i,getVehicleById:l}=Jc(),[o,c]=y.useState(!1),[d,u]=y.useState("items"),[m,h]=y.useState({customerId:s,validUntil:new Date(Date.now()+30*24*60*60*1e3),notes:"",terms:"Payment due within 30 days. All sales final.",items:[],subtotal:0,totalDiscount:0,tax:0,taxRate:.08,total:0}),[p,b]=y.useState(""),[j,x]=y.useState(!1),[f,g]=y.useState(""),[v,w]=y.useState({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),k=i();y.useEffect(()=>{t&&h(R=>({...R,...t}))},[t]),y.useEffect(()=>{T()},[m.items,m.taxRate]);const T=()=>{const R=m.items.reduce((_,V)=>_+V.total,0),$=m.items.reduce((_,V)=>{const Q=V.discountType==="percentage"?V.quantity*V.unitPrice*V.discount/100:V.discount*V.quantity;return _+Q},0),U=R-$,W=U*m.taxRate,q=U+W;h(_=>({..._,subtotal:R,totalDiscount:$,tax:W,total:q}))},S=()=>{if(!v.description||!v.unitPrice){a({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const R={id:Math.random().toString(36).substr(2,9),description:v.description,quantity:v.quantity||1,unitPrice:v.unitPrice||0,discount:v.discount||0,discountType:v.discountType||"percentage",total:M(v)};h($=>({...$,items:[...$.items,R]})),w({description:"",quantity:1,unitPrice:0,discount:0,discountType:"percentage"}),b(""),x(!1)},C=R=>{const $=l(R);if(!$)return;const U={id:Math.random().toString(36).substr(2,9),productId:$.id,description:`${$.year} ${$.make} ${$.model}`,quantity:1,unitPrice:$.price,discount:0,discountType:"percentage",total:$.price};h(W=>({...W,items:[...W.items,U]})),g(""),a({title:"Vehicle Added",description:`${$.year} ${$.make} ${$.model} added to quote`})},E=R=>{const $=Fm.find(U=>U.id===R);if($){if($.isBundle&&$.bundleItems){const U={id:Math.random().toString(36).substr(2,9),productId:$.id,description:$.description,quantity:1,unitPrice:$.price,discount:0,discountType:"percentage",total:$.price,isBundle:!0,bundleItems:$.bundleItems.map(W=>{const q=Fm.find(_=>_.id===W.productId);return{id:Math.random().toString(36).substr(2,9),productId:W.productId,description:(q==null?void 0:q.name)||"",quantity:W.quantity,unitPrice:(q==null?void 0:q.price)||0,discount:0,discountType:"percentage",total:((q==null?void 0:q.price)||0)*W.quantity}})};h(W=>({...W,items:[...W.items,U]}))}else{const U={id:Math.random().toString(36).substr(2,9),productId:$.id,description:$.name,quantity:1,unitPrice:$.price,discount:0,discountType:"percentage",total:$.price};h(W=>({...W,items:[...W.items,U]}))}I()}},M=R=>{const $=R.quantity*R.unitPrice,U=R.discountType==="percentage"?$*(R.discount/100):R.discount*R.quantity;return $-U},D=(R,$)=>{h(U=>({...U,items:U.items.map(W=>{if(W.id===R){const q={...W,...$};return q.total=M(q),q}return W})}))},A=R=>{h($=>({...$,items:$.items.filter(U=>U.id!==R)}))},I=()=>{const R=m.items.filter(U=>{var W;return((W=Fm.find(q=>q.id===U.productId))==null?void 0:W.category)==="accessory"});R.length>=3&&R.forEach(U=>{D(U.id,{discount:10,discountType:"percentage"})}),m.items.filter(U=>U.isBundle).forEach(U=>{D(U.id,{discount:500,discountType:"fixed"})})},L=async()=>{c(!0);try{await new Promise(q=>setTimeout(q,2e3));const R=F(),$=new Blob([R],{type:"text/plain"}),U=URL.createObjectURL($),W=document.createElement("a");W.href=U,W.download=`quote-${Date.now()}.txt`,document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(U),a({title:"PDF Generated",description:"Quote PDF has been downloaded successfully"})}catch{a({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}finally{c(!1)}},F=()=>`
QUOTE DOCUMENT
==============

Customer ID: ${m.customerId}
Valid Until: ${m.validUntil.toLocaleDateString()}

LINE ITEMS:
-----------
${m.items.map(R=>{var $;return`
${R.description}
Quantity: ${R.quantity} x ${De(R.unitPrice)}
${R.discount>0?`Discount: ${R.discount}${R.discountType==="percentage"?"%":" fixed"}`:""}
Total: ${De(R.total)}
${R.isBundle?`
  Bundle Items:
  ${(($=R.bundleItems)==null?void 0:$.map(U=>`  - ${U.description} (${U.quantity}x)`).join(`
  `))||""}
`:""}
`}).join(`
`)}

TOTALS:
-------
Subtotal: ${De(m.subtotal)}
Total Discount: ${De(m.totalDiscount)}
Tax (${(m.taxRate*100).toFixed(1)}%): ${De(m.tax)}
TOTAL: ${De(m.total)}

Notes: ${m.notes}
Terms: ${m.terms}
    `,B=async()=>{if(m.items.length===0){a({title:"Validation Error",description:"At least one line item is required",variant:"destructive"});return}c(!0);try{const R={...m,customerId:m.customerId||s};await r(R),a({title:"Success",description:"Quote saved successfully"})}catch{a({title:"Error",description:"Failed to save quote",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-blue-500"}),t?"Edit Quote":"Create Quote"]}),e.jsx(Ee,{children:"Build a detailed quote with line items, pricing rules, and bundled products"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{children:[e.jsxs(ms,{value:d,onValueChange:u,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-4",children:[e.jsx(Ye,{value:"items",children:"Line Items"}),e.jsx(Ye,{value:"products",children:"Products"}),e.jsx(Ye,{value:"pricing",children:"Pricing Rules"}),e.jsx(Ye,{value:"details",children:"Quote Details"})]}),e.jsxs(Je,{value:"items",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quote Line Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Be,{value:f,onValueChange:g,children:[e.jsx(Oe,{className:"w-64",children:e.jsx(ze,{placeholder:"Add vehicle from inventory"})}),e.jsx($e,{children:k.map(R=>e.jsxs(J,{value:R.id,children:[R.year," ",R.make," ",R.model," - ",De(R.price)]},R.id))})]}),f&&e.jsxs(H,{onClick:()=>C(f),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Vehicle"]}),e.jsxs(H,{onClick:()=>x(!0),size:"sm",variant:"outline",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Custom Item"]})]})]}),j&&e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:v.description||"",onChange:R=>w($=>({...$,description:R.target.value})),placeholder:"Item description"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Unit Price"}),e.jsx(ge,{type:"number",value:v.unitPrice||"",onChange:R=>w($=>({...$,unitPrice:parseFloat(R.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Quantity"}),e.jsx(ge,{type:"number",value:v.quantity||1,onChange:R=>w($=>({...$,quantity:parseInt(R.target.value)||1})),min:"1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Discount"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{type:"number",value:v.discount||0,onChange:R=>w($=>({...$,discount:parseFloat(R.target.value)||0})),placeholder:"0"}),e.jsxs(Be,{value:v.discountType,onValueChange:R=>w($=>({...$,discountType:R})),children:[e.jsx(Oe,{className:"w-32",children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"percentage",children:"%"}),e.jsx(J,{value:"fixed",children:"$"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(H,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(H,{onClick:S,children:"Add Item"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[m.items.map((R,$)=>e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Description"}),e.jsx(ge,{value:R.description,onChange:U=>D(R.id,{description:U.target.value})}),R.isBundle&&e.jsxs(Ae,{className:"mt-1 bg-purple-50 text-purple-700 border-purple-200",children:[e.jsx(bn,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Quantity"}),e.jsx(ge,{type:"number",value:R.quantity,onChange:U=>D(R.id,{quantity:parseInt(U.target.value)||1}),min:"1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Unit Price"}),e.jsx(ge,{type:"number",value:R.unitPrice,onChange:U=>D(R.id,{unitPrice:parseFloat(U.target.value)||0}),step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Discount"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{type:"number",value:R.discount,onChange:U=>D(R.id,{discount:parseFloat(U.target.value)||0}),step:"0.01"}),e.jsxs(Be,{value:R.discountType,onValueChange:U=>D(R.id,{discountType:U}),children:[e.jsx(Oe,{className:"w-16",children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"percentage",children:"%"}),e.jsx(J,{value:"fixed",children:"$"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("div",{className:"font-bold text-lg",children:De(R.total)})]}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>A(R.id),children:e.jsx(js,{className:"h-4 w-4"})})]})]}),R.isBundle&&R.bundleItems&&e.jsxs("div",{className:"mt-4 pl-4 border-l-2 border-purple-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-700 mb-2",children:"Bundle Contents:"}),e.jsx("div",{className:"space-y-2",children:R.bundleItems.map(U=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-purple-50 p-2 rounded",children:[e.jsx("span",{children:U.description}),e.jsxs("span",{children:[U.quantity,"x ",De(U.unitPrice)]})]},U.id))})]})]})},R.id)),m.items.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No line items added yet"}),e.jsx("p",{className:"text-sm",children:"Add products or custom items to build your quote"})]})]}),m.items.length>0&&e.jsx(ee,{className:"bg-muted/30",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:De(m.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Total Discount:"}),e.jsxs("span",{children:["-",De(m.totalDiscount)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Tax (",(m.taxRate*100).toFixed(1),"%):"]}),e.jsx("span",{children:De(m.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:De(m.total)})]})]})})})]}),e.jsx(Je,{value:"products",className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Inventory & Products"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-md font-semibold mb-3 text-blue-600",children:"Available Vehicles"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:k.map(R=>e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h4",{className:"font-semibold",children:[R.year," ",R.make," ",R.model]}),e.jsx(Ae,{className:"bg-blue-50 text-blue-700 border-blue-200",children:R.type.replace("_"," ").toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["VIN: ",R.vin]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Location: ",R.location]}),e.jsx("div",{className:"text-lg font-bold text-primary",children:De(R.price)}),R.features.length>0&&e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[R.features.slice(0,3).map(($,U)=>e.jsx(Ae,{variant:"outline",className:"text-xs",children:$},U)),R.features.length>3&&e.jsxs(Ae,{variant:"outline",className:"text-xs",children:["+",R.features.length-3," more"]})]})})]}),e.jsxs(H,{onClick:()=>C(R.id),size:"sm",className:"ml-4",children:[e.jsx(tt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},R.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold mb-3 text-green-600",children:"Available Products & Services"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Fm.map(R=>e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:R.name}),R.isBundle&&e.jsxs(Ae,{className:"bg-purple-50 text-purple-700 border-purple-200",children:[e.jsx(bn,{className:"h-3 w-3 mr-1"}),"Bundle"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:R.description}),e.jsx("div",{className:"text-lg font-bold text-primary",children:De(R.price)}),R.isBundle&&R.bundleItems&&e.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded",children:[e.jsx("div",{className:"text-xs font-semibold text-purple-700 mb-1",children:"Includes:"}),R.bundleItems.map($=>{const U=Fm.find(W=>W.id===$.productId);return e.jsxs("div",{className:"text-xs text-purple-600",children:["• ",U==null?void 0:U.name," (",$.quantity,"x)"]},$.productId)})]})]}),e.jsxs(H,{onClick:()=>E(R.id),size:"sm",className:"ml-4",children:[e.jsx(tt,{className:"h-4 w-4 mr-1"}),"Add"]})]})})},R.id))})]})]})}),e.jsx(Je,{value:"pricing",className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Pricing Rules"}),e.jsx("div",{className:"space-y-4",children:LB.filter(R=>R.isActive).map(R=>e.jsx(ee,{className:"shadow-sm",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:R.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.type==="quantity_discount"&&`Min quantity: ${R.conditions.minQuantity}`,R.type==="bundle_discount"&&"Applied to bundle products",R.type==="customer_discount"&&`Customer type: ${R.conditions.customerType}`]}),e.jsx("div",{className:"flex items-center space-x-2 mt-2",children:e.jsxs(Ae,{className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(Ng,{className:"h-3 w-3 mr-1"}),R.discount.type==="percentage"?`${R.discount.value}%`:De(R.discount.value)," off"]})})]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>I(),children:[e.jsx(Mc,{className:"h-4 w-4 mr-1"}),"Apply"]})]})})},R.id))})]})}),e.jsxs(Je,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"validUntil",children:"Valid Until"}),e.jsx(ge,{id:"validUntil",type:"date",value:m.validUntil.toISOString().split("T")[0],onChange:R=>h($=>({...$,validUntil:new Date(R.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(ge,{id:"taxRate",type:"number",value:(m.taxRate*100).toFixed(2),onChange:R=>h($=>({...$,taxRate:parseFloat(R.target.value)/100||0})),step:"0.01",min:"0",max:"100"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"tags",children:"Tags"}),e.jsx(Zo,{entityId:(t==null?void 0:t.id)||"new-quote",entityType:Fs.DEAL,onTagsChange:()=>{},placeholder:"Add quote tags...",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(kt,{id:"notes",value:m.notes,onChange:R=>h($=>({...$,notes:R.target.value})),placeholder:"Additional notes for the customer...",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"terms",children:"Terms & Conditions"}),e.jsx(kt,{id:"terms",value:m.terms,onChange:R=>h($=>({...$,terms:R.target.value})),placeholder:"Terms and conditions...",rows:4})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsx("div",{className:"flex space-x-2",children:e.jsxs(H,{variant:"outline",onClick:L,disabled:o||m.items.length===0,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),o?"Generating...":"Export PDF"]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(H,{variant:"outline",onClick:n,disabled:o,children:"Cancel"}),e.jsx(H,{onClick:B,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Quote"]})})]})]})]})]})})}function FB(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState(!1);y.useEffect(()=>{c()},[]);const c=()=>{const T=xs("renter-insight-quotes",[]);s(T);const S=[{id:"1",name:"2024 Forest River Georgetown",description:"Class A Motorhome with premium features",price:125e3,category:"motorhome"},{id:"2",name:"Extended Warranty",description:"3-year comprehensive warranty coverage",price:2500,category:"warranty"},{id:"3",name:"Solar Panel Package",description:"400W solar panel system with inverter",price:3500,category:"accessory"},{id:"4",name:"Premium Package",description:"Includes extended warranty, solar panels, and premium interior",price:8e3,category:"bundle",isBundle:!0,bundleItems:[{productId:"2",quantity:1},{productId:"3",quantity:1},{productId:"5",quantity:1}]},{id:"5",name:"Premium Interior Upgrade",description:"Leather seating and premium finishes",price:2200,category:"upgrade"},{id:"6",name:"Backup Camera System",description:"Wireless backup camera with monitor",price:450,category:"accessory"},{id:"7",name:"Awning Package",description:"Electric awning with LED lighting",price:1200,category:"accessory"}],C=[{id:"1",name:"Bulk Accessory Discount",type:"quantity_discount",conditions:{minQuantity:3},discount:{type:"percentage",value:10},isActive:!0},{id:"2",name:"Premium Bundle Discount",type:"bundle_discount",conditions:{productIds:["4"]},discount:{type:"fixed",value:500},isActive:!0},{id:"3",name:"First-Time Buyer Discount",type:"customer_discount",conditions:{customerType:"first_time"},discount:{type:"percentage",value:5},isActive:!0}];n(S),i(C)},d=T=>{Xt("renter-insight-quotes",T)},u=async T=>{o(!0);try{const S={id:Math.random().toString(36).substr(2,9),customerId:T.customerId||"",items:T.items||[],subtotal:T.subtotal||0,totalDiscount:T.totalDiscount||0,tax:T.tax||0,taxRate:T.taxRate||.08,total:T.total||0,status:"draft",validUntil:T.validUntil||new Date(Date.now()+2592e6),notes:T.notes||"",terms:T.terms||"",createdAt:new Date,updatedAt:new Date},C=[...t,S];return s(C),d(C),S}finally{o(!1)}},m=async(T,S)=>{o(!0);try{const C=t.map(E=>E.id===T?{...E,...S,updatedAt:new Date}:E);return s(C),d(C),C.find(E=>E.id===T)}finally{o(!1)}};return{quotes:t,products:r,pricingRules:a,loading:l,createQuote:u,updateQuote:m,deleteQuote:async T=>{const S=t.filter(C=>C.id!==T);s(S),d(S)},duplicateQuote:async T=>{const S=t.find(M=>M.id===T);if(!S)return;const C={...S,id:Math.random().toString(36).substr(2,9),status:"draft",createdAt:new Date,updatedAt:new Date},E=[...t,C];return s(E),d(E),C},sendQuote:async T=>m(T,{status:"sent"}),acceptQuote:async T=>m(T,{status:"accepted"}),rejectQuote:async T=>m(T,{status:"rejected"}),calculateQuoteTotals:(T,S=.08)=>{const C=T.reduce((I,L)=>I+L.total,0),E=T.reduce((I,L)=>{const F=L.discountType==="percentage"?L.quantity*L.unitPrice*L.discount/100:L.discount*L.quantity;return I+F},0),M=C-E,D=M*S,A=M+D;return{subtotal:C,totalDiscount:E,tax:D,total:A}},applyPricingRules:(T,S)=>{let C=[...T];return a.forEach(E=>{if(E.isActive)switch(E.type){case"quantity_discount":if(E.conditions.minQuantity){const M=C.filter(D=>{var A;return((A=r.find(I=>I.id===D.productId))==null?void 0:A.category)==="accessory"});M.length>=E.conditions.minQuantity&&(C=C.map(D=>M.includes(D)?{...D,discount:E.discount.value,discountType:E.discount.type}:D))}break;case"bundle_discount":E.conditions.productIds&&(C=C.map(M=>{var D;return M.isBundle&&((D=E.conditions.productIds)!=null&&D.includes(M.productId||""))?{...M,discount:E.discount.value,discountType:E.discount.type}:M}));break}}),C},getQuotesByCustomer:T=>t.filter(S=>S.customerId===T),getQuotesByStatus:T=>t.filter(S=>S.status===T),getExpiredQuotes:()=>{const T=new Date;return t.filter(S=>new Date(S.validUntil)<T&&S.status!=="accepted")}}}function RB({quote:t,onClose:s,onEdit:r}){const n=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:["Quote #",t.id]}),e.jsx(Ee,{children:"Quote details and line items"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>r(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),e.jsx("p",{className:"font-medium",children:t.customerId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{className:Ge("ri-badge-status",n(t.status)),children:t.status.toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"font-medium",children:nt(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),e.jsx("p",{className:"font-medium",children:nt(t.validUntil)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),e.jsx("div",{className:"space-y-3",children:Array.isArray(t.items)&&t.items.length>0?t.items.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:a.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",De(a.unitPrice)]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-lg",children:De(a.total)})})]},a.id)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No items in this quote."})})]}),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:De(t.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:De(t.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:De(t.total)})]})]})}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function MB(){const{quotes:t,createQuote:s,updateQuote:r,deleteQuote:n,duplicateQuote:a,sendQuote:i}=FB(),{toast:l}=xt(),[o,c]=y.useState(""),[d,u]=y.useState("all"),[m,h]=y.useState(!1),[p,b]=y.useState(null),[j,x]=y.useState(null),[f,g]=y.useState(""),[v,w]=y.useState(null);y.useEffect(()=>{!j&&v&&(b(v),g(v.customerId),h(!0),w(null))},[j,v]);const k=F=>{switch(F){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},T=Array.isArray(t)?t.filter(F=>{var $,U,W,q;const B=((U=($=F.id)==null?void 0:$.toLowerCase())==null?void 0:U.includes(o.toLowerCase()))||((q=(W=F.customerId)==null?void 0:W.toLowerCase())==null?void 0:q.includes(o.toLowerCase())),R=d==="all"||F.status===d;return B&&R}):[],S=()=>{b(null),g(""),h(!0)},C=F=>{x(null),w(F)},E=F=>{x(F)},M=()=>x(null),D=async F=>{try{p?(await r(p.id,F),l({title:"Success",description:"Quote updated successfully"})):(await s(F),l({title:"Success",description:"Quote created successfully"})),h(!1),b(null)}catch(B){console.error("Error saving quote:",B),l({title:"Error",description:"Failed to save quote",variant:"destructive"})}},A=async F=>{try{await i(F),l({title:"Success",description:"Quote sent to customer"})}catch(B){console.error("Error sending quote:",B),l({title:"Error",description:"Failed to send quote",variant:"destructive"})}},I=async F=>{try{await a(F),l({title:"Success",description:"Quote duplicated successfully"})}catch(B){console.error("Error duplicating quote:",B),l({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},L=async F=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await n(F),l({title:"Success",description:"Quote deleted successfully"})}catch(B){console.error("Error deleting quote:",B),l({title:"Error",description:"Failed to delete quote",variant:"destructive"})}};return T.length,T.filter(F=>F.status==="draft").length,T.filter(F=>F.status==="sent").length,T.filter(F=>F.status==="accepted").length,T.reduce((F,B)=>F+(B.total||0),0),T.filter(F=>F.status==="accepted").reduce((F,B)=>F+(B.total||0),0),e.jsxs("div",{className:"space-y-8",children:[m&&e.jsx(EP,{quote:p,customerId:f,onSave:D,onCancel:()=>{h(!1),b(null)}}),j&&e.jsx(RB,{quote:j,onClose:M,onEdit:C}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),e.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),e.jsxs(H,{className:"shadow-sm",onClick:S,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),e.jsx("div",{className:"ri-stats-grid"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search quotes...",value:o,onChange:F=>c(F.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:"draft",children:"Draft"}),e.jsx(J,{value:"sent",children:"Sent"}),e.jsx(J,{value:"viewed",children:"Viewed"}),e.jsx(J,{value:"accepted",children:"Accepted"}),e.jsx(J,{value:"rejected",children:"Rejected"}),e.jsx(J,{value:"expired",children:"Expired"})]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"text-xl",children:["Quotes (",T.length,")"]}),e.jsx(Ee,{children:"Manage customer quotes with advanced pricing and bundling"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:Array.isArray(T)&&T.length>0?T.map(F=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",F.id]}),e.jsx(Ae,{className:Ge("ri-badge-status",k(F.status)),children:F.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Customer:"})," ",F.customerId]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," ",e.jsx("span",{className:"ml-1 font-bold text-primary",children:De(F.total)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",nt(F.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",nt(F.validUntil)]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>E(F),children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>C(F),children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Edit"]}),F.status==="draft"&&e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(F.id),children:[e.jsx(va,{className:"h-3 w-3 mr-1"}),"Send"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(F.id),children:[e.jsx(Mu,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>L(F.id),children:e.jsx(js,{className:"h-3 w-3"})})]})]},F.id)):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No quotes found"}),e.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})})})]})]})}function Xc({task:t,initialData:s,onSave:r,onCancel:n}){var h;const{toast:a}=xt(),{salesReps:i}=tl(),[l,o]=y.useState(!1),[c,d]=y.useState({title:"",description:"",status:qs.PENDING,priority:es.MEDIUM,module:er.CRM,assignedTo:"",dueDate:new Date(Date.now()+24*60*60*1e3),sourceId:"",sourceType:"",tags:[],customFields:{},...s,...t});y.useEffect(()=>{t?d(t):s&&d(p=>({...p,...s}))},[t,s]);const u=async p=>{var b;if(p.preventDefault(),!((b=c.title)!=null&&b.trim())){a({title:"Validation Error",description:"Task title is required",variant:"destructive"});return}o(!0);try{await r(c),a({title:"Success",description:`Task ${t?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"create"} task`,variant:"destructive"})}finally{o(!1)}},m=(p,b)=>{d(j=>({...j,[p]:b}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(ln,{className:"h-5 w-5 mr-2 text-primary"}),t?"Edit Task":"Create Task"]}),e.jsx(Ee,{children:t?"Update task details":"Create a new task to track work"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Task Information"}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"title",children:"Task Title *"}),e.jsx(ge,{id:"title",value:c.title||"",onChange:p=>m("title",p.target.value),placeholder:"Enter task title"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(kt,{id:"description",value:c.description||"",onChange:p=>m("description",p.target.value),placeholder:"Describe what needs to be done",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Task Properties"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:c.status,onValueChange:p=>m("status",p),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:qs.PENDING,children:"Pending"}),e.jsx(J,{value:qs.IN_PROGRESS,children:"In Progress"}),e.jsx(J,{value:qs.ON_HOLD,children:"On Hold"}),e.jsx(J,{value:qs.COMPLETED,children:"Completed"}),e.jsx(J,{value:qs.CANCELLED,children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"priority",children:"Priority"}),e.jsxs(Be,{value:c.priority,onValueChange:p=>m("priority",p),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:es.LOW,children:"Low"}),e.jsx(J,{value:es.MEDIUM,children:"Medium"}),e.jsx(J,{value:es.HIGH,children:"High"}),e.jsx(J,{value:es.URGENT,children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"module",children:"Module"}),e.jsxs(Be,{value:c.module,onValueChange:p=>m("module",p),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:er.CRM,children:"CRM"}),e.jsx(J,{value:er.SERVICE,children:"Service"}),e.jsx(J,{value:er.DELIVERY,children:"Delivery"}),e.jsx(J,{value:er.FINANCE,children:"Finance"}),e.jsx(J,{value:er.WARRANTY,children:"Warranty"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"assignedTo",children:"Assigned To"}),e.jsxs(Be,{value:c.assignedTo||"",onValueChange:p=>m("assignedTo",p),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select assignee"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"Unassigned"}),i.map(p=>e.jsx(J,{value:p.id,children:p.name},p.id))]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"dueDate",children:"Due Date"}),e.jsx(ge,{id:"dueDate",type:"date",value:c.dueDate?new Date(c.dueDate).toISOString().split("T")[0]:"",onChange:p=>m("dueDate",p.target.value?new Date(p.target.value):void 0)})]})]}),(c.sourceId||c.sourceType)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Source Information"}),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:e.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm",children:"Source Type"}),e.jsx("p",{className:"text-sm font-medium",children:(h=c.sourceType)==null?void 0:h.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm",children:"Source ID"}),e.jsx("p",{className:"text-sm font-medium font-mono",children:c.sourceId})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:n,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update Task":"Create Task"]})})]})]})})]})})}function PP(){const[t,s]=y.useState([]),[r,n]=y.useState(!1);y.useEffect(()=>{a()},[]);const a=()=>{const x=xs("renter-insight-service-tickets",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",title:"Annual Maintenance Service",description:"Complete annual maintenance including oil change, filter replacement, and system checks",priority:gr.MEDIUM,status:Xs.IN_PROGRESS,assignedTo:"Tech-001",scheduledDate:new Date("2024-01-20"),parts:[{id:"1",partNumber:"OIL-001",description:"Engine Oil Filter",quantity:1,unitCost:25.99,total:25.99}],labor:[{id:"1",description:"Annual Maintenance",hours:3,rate:85,total:255}],notes:"Customer requested additional inspection of brake system",customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"2024-01-22",customerAuthorization:!0,technicianNotes:"Check brake pads and rotors during service",customerPortalAccess:!0},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",title:"AC System Repair",description:"Air conditioning not cooling properly, needs diagnostic and repair",priority:gr.HIGH,status:Xs.WAITING_PARTS,assignedTo:"Tech-002",scheduledDate:new Date("2024-01-22"),parts:[{id:"2",partNumber:"AC-COMP-001",description:"AC Compressor",quantity:1,unitCost:450,total:450}],labor:[{id:"2",description:"AC System Diagnostic",hours:2,rate:85,total:170}],notes:"Waiting for compressor part to arrive",customFields:{warrantyStatus:"partial",estimatedCompletionDate:"2024-01-25",customerAuthorization:!0,technicianNotes:"Compressor needs replacement, on order from supplier",customerPortalAccess:!0},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-16")}]);s(x)},i=x=>{Xt("renter-insight-service-tickets",x)};return{tickets:t,loading:r,getTicketsByCustomerId:x=>t.filter(f=>f.customerId===x),getTicketsByVehicleId:x=>t.filter(f=>f.vehicleId===x),getTicketById:x=>t.find(f=>f.id===x),createTicket:async x=>{n(!0);try{const f={id:Math.random().toString(36).substr(2,9),customerId:x.customerId||"",vehicleId:x.vehicleId,title:x.title||"",description:x.description||"",priority:x.priority||gr.MEDIUM,status:x.status||Xs.OPEN,assignedTo:x.assignedTo,scheduledDate:x.scheduledDate,parts:x.parts||[],labor:x.labor||[],notes:x.notes||"",customFields:x.customFields||{},createdAt:new Date,updatedAt:new Date},g=[...t,f];return s(g),i(g),f}finally{n(!1)}},updateTicket:async(x,f)=>{const g=t.map(v=>v.id===x?{...v,...f,updatedAt:new Date}:v);s(g),i(g)},deleteTicket:async x=>{const f=t.filter(g=>g.id!==x);s(f),i(f)},updateTicketStatus:async(x,f)=>{const g=t.map(v=>v.id===x?{...v,status:f,completedDate:f===Xs.COMPLETED?new Date:v.completedDate,updatedAt:new Date}:v);s(g),i(g)},assignTechnician:async(x,f)=>{const g=t.map(v=>v.id===x?{...v,assignedTo:f,updatedAt:new Date}:v);s(g),i(g)},addPart:async(x,f)=>{if(!t.find(k=>k.id===x))return null;const v={id:Math.random().toString(36).substr(2,9),partNumber:f.partNumber||"",description:f.description||"",quantity:f.quantity||1,unitCost:f.unitCost||0,total:f.total||0},w=t.map(k=>k.id===x?{...k,parts:[...k.parts,v],updatedAt:new Date}:k);return s(w),i(w),v},addLabor:async(x,f)=>{if(!t.find(k=>k.id===x))return null;const v={id:Math.random().toString(36).substr(2,9),description:f.description||"",hours:f.hours||1,rate:f.rate||85,total:f.total||85},w=t.map(k=>k.id===x?{...k,labor:[...k.labor,v],updatedAt:new Date}:k);return s(w),i(w),v}}}function ed(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState(!0),[l,o]=y.useState(null),{leads:c,salesReps:d}=tl(),{tickets:u}=PP();y.useEffect(()=>{const I=xs("renter-insight-user-tasks",[]);n(I)},[]),y.useEffect(()=>{Xt("renter-insight-user-tasks",r)},[r]);const m=I=>{switch(I){case"new":return qs.PENDING;case"contacted":return qs.IN_PROGRESS;case"qualified":return qs.IN_PROGRESS;case"proposal":return qs.IN_PROGRESS;case"negotiation":return qs.IN_PROGRESS;case"closed_won":return qs.COMPLETED;case"closed_lost":return qs.CANCELLED;default:return qs.PENDING}},h=I=>{switch(I){case"open":return qs.PENDING;case"in_progress":return qs.IN_PROGRESS;case"waiting_parts":return qs.ON_HOLD;case"completed":return qs.COMPLETED;case"cancelled":return qs.CANCELLED;default:return qs.PENDING}},p=I=>I.score&&I.score>=80?es.HIGH:I.score&&I.score>=60?es.MEDIUM:es.LOW,b=I=>{switch(I.priority){case"urgent":return es.URGENT;case"high":return es.HIGH;case"medium":return es.MEDIUM;case"low":return es.LOW;default:return es.MEDIUM}},j=I=>{if(!I)return"Unassigned";const L=d.find(F=>F.id===I);return(L==null?void 0:L.name)||I},x=I=>{const L=I.lastActivity?new Date(I.lastActivity):new Date(I.createdAt);if(Math.floor((Date.now()-L.getTime())/(1e3*60*60*24))>3)return L;const B=new Date(L);return B.setDate(B.getDate()+1),B},f=y.useMemo(()=>c.filter(I=>!["closed_won","closed_lost"].includes(I.status)).map(I=>{var B;const L=x(I),F=L<new Date;return{id:`lead-${I.id}`,title:`Follow up with ${I.firstName} ${I.lastName}`,description:I.notes||`${I.status.replace("_"," ")} lead from ${I.source}`,dueDate:L,status:m(I.status),priority:p(I),module:er.CRM,sourceId:I.id,sourceType:"lead",assignedTo:I.assignedTo,assignedToName:j(I.assignedTo),link:"/crm",tags:((B=I.customFields)==null?void 0:B.tags)||[],isOverdue:F,customFields:{leadScore:I.score,leadSource:I.source,leadEmail:I.email,leadPhone:I.phone},createdAt:I.createdAt,updatedAt:I.updatedAt}}),[c,d]),g=y.useMemo(()=>u.filter(I=>!["completed","cancelled"].includes(I.status)).map(I=>{const L=I.scheduledDate||new Date,F=L<new Date&&I.status!=="completed";return{id:`service-${I.id}`,title:I.title,description:I.description,dueDate:L,status:h(I.status),priority:b(I),module:er.SERVICE,sourceId:I.id,sourceType:"service_ticket",assignedTo:I.assignedTo,assignedToName:I.assignedTo||"Unassigned",link:"/service",tags:[],isOverdue:F,customFields:{customerId:I.customerId,vehicleId:I.vehicleId,partsTotal:I.parts.reduce((B,R)=>B+R.total,0),laborTotal:I.labor.reduce((B,R)=>B+R.total,0)},createdAt:I.createdAt,updatedAt:I.updatedAt}}),[u]),v=y.useMemo(()=>[...f,...g,...r].sort((L,F)=>L.isOverdue&&!F.isOverdue?-1:!L.isOverdue&&F.isOverdue?1:L.dueDate.getTime()-F.dueDate.getTime()),[f,g,r]);y.useEffect(()=>{i(!0);try{s(v),o(null)}catch(I){console.error("Error aggregating tasks:",I),o("Failed to load tasks")}finally{i(!1)}},[v]);const w=y.useMemo(()=>{const I=t.length,L=t.filter(W=>W.isOverdue).length,F=t.filter(W=>W.status===qs.PENDING).length,B=t.filter(W=>W.status===qs.IN_PROGRESS).length,R=t.filter(W=>W.status===qs.COMPLETED).length,$=t.reduce((W,q)=>(W[q.module]=(W[q.module]||0)+1,W),{}),U=t.reduce((W,q)=>(W[q.priority]=(W[q.priority]||0)+1,W),{});return{totalTasks:I,overdueTasks:L,pendingTasks:F,inProgressTasks:B,completedTasks:R,tasksByModule:$,tasksByPriority:U}},[t]),k=I=>t.filter(L=>!(I.module&&L.module!==I.module||I.status&&L.status!==I.status||I.priority&&L.priority!==I.priority||I.assignedTo&&L.assignedTo!==I.assignedTo||I.isOverdue!==void 0&&L.isOverdue!==I.isOverdue)),T=I=>t.filter(L=>L.module===I),S=()=>t.filter(I=>I.isOverdue),C=I=>t.filter(L=>L.assignedTo===I),E=I=>{switch(I){case er.CRM:return"/crm";case er.SERVICE:return"/service";case er.DELIVERY:return"/delivery";case er.FINANCE:return"/finance";case er.WARRANTY:return"/warranty-mgmt";default:return"/"}};return{tasks:t,loading:a,error:l,metrics:w,filterTasks:k,getTasksByModule:T,getOverdueTasks:S,getTasksByAssignee:C,createTask:async I=>{i(!0);try{const L={id:`task-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:I.title||"",description:I.description||"",status:I.status||qs.PENDING,priority:I.priority||es.MEDIUM,module:I.module||er.CRM,assignedTo:I.assignedTo,assignedToName:I.assignedToName||j(I.assignedTo),dueDate:I.dueDate||new Date(Date.now()+864e5),sourceId:I.sourceId||"",sourceType:I.sourceType||"",link:I.link||E(I.module||er.CRM),tags:I.tags||[],isOverdue:!1,customFields:I.customFields||{},createdAt:new Date,updatedAt:new Date};return n(F=>[L,...F]),L}finally{i(!1)}},updateTask:async(I,L)=>{const F=r.find(R=>R.id===I);if(!F)return null;const B={...F,...L,updatedAt:new Date};return n(R=>R.map($=>$.id===I?B:$)),B},deleteTask:async I=>{n(L=>L.filter(F=>F.id!==I))}}}function V5(){var L;const{leads:t,sources:s,salesReps:r,getActivitiesByLead:n,getRemindersByUser:a,getLeadScore:i}=tl(),{createTask:l}=ed(),[o,c]=y.useState(""),[d,u]=y.useState("all"),[m,h]=y.useState("all"),[p,b]=y.useState("all"),[j,x]=y.useState(null),[f,g]=y.useState(!1),[v,w]=y.useState(!1),[k,T]=y.useState(null),S=F=>{switch(F){case Xr.NEW:return"bg-blue-50 text-blue-700 border-blue-200";case Xr.CONTACTED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Xr.QUALIFIED:return"bg-green-50 text-green-700 border-green-200";case Xr.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case Xr.NEGOTIATION:return"bg-orange-50 text-orange-700 border-orange-200";case Xr.CLOSED_WON:return"bg-emerald-50 text-emerald-700 border-emerald-200";case Xr.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},C=F=>F>=80?"text-green-600 bg-green-50":F>=60?"text-yellow-600 bg-yellow-50":F>=40?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",E=t.filter(F=>{const B=`${F.firstName} ${F.lastName}`.toLowerCase().includes(o.toLowerCase())||F.email.toLowerCase().includes(o.toLowerCase())||F.phone.includes(o),R=d==="all"||F.status===d,$=m==="all"||F.sourceId===m,U=p==="all"||F.assignedTo===p;return B&&R&&$&&U}),M=F=>{console.log("New lead created:",F)},D=async F=>{try{await l(F),w(!1),T(null),toast({title:"Task Created",description:"Task has been created successfully"})}catch(B){throw toast({title:"Error",description:"Failed to create task",variant:"destructive"}),B}},A=F=>{const B=F.lastActivity?new Date(F.lastActivity):new Date(F.createdAt),R=new Date(B);return R.setDate(R.getDate()+3),{title:`Follow up with ${F.firstName} ${F.lastName}`,description:`Follow up on ${F.status.replace("_"," ")} lead from ${F.source}`,module:er.CRM,priority:F.score&&F.score>=80?es.HIGH:F.score&&F.score>=60?es.MEDIUM:es.LOW,sourceId:F.id,sourceType:"lead",assignedTo:F.assignedTo,dueDate:R,customFields:{leadScore:F.score,leadSource:F.source,leadEmail:F.email,leadPhone:F.phone}}},I=F=>{const B=A(F);T(B),w(!0)};if(j){const F=n(j.id),B=a("current-user").filter($=>$.leadId===j.id),R=i(j.id);return e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx(Xc,{initialData:k||void 0,onSave:D,onCancel:()=>w(!1)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(H,{variant:"outline",onClick:()=>x(null),className:"mb-4",children:"← Back to Leads"}),e.jsxs("h1",{className:"ri-page-title",children:[j.firstName," ",j.lastName]}),e.jsx("p",{className:"ri-page-description",children:"Lead details and activity management"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:Ge("ri-badge-status",S(j.status)),children:j.status.replace("_"," ").toUpperCase()}),j.score&&e.jsxs(Ae,{className:Ge("ri-badge-status",C(j.score)),children:["Score: ",j.score]}),e.jsxs(H,{onClick:()=>w(!0),size:"sm",variant:"outline",children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})]}),e.jsxs(ms,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-6",children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"activity",children:"Activity"}),e.jsx(Ye,{value:"communication",children:"Communication"}),e.jsx(Ye,{value:"ai-insights",children:"AI Insights"}),e.jsx(Ye,{value:"nurturing",children:"Nurturing"}),e.jsx(Ye,{value:"reminders",children:"Reminders"})]}),e.jsx(Je,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsx(de,{children:"Lead Information"})}),e.jsxs(te,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:j.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:j.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Source"}),e.jsx("p",{className:"font-medium",children:j.source})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"font-medium",children:((L=r.find($=>$.id===j.assignedTo))==null?void 0:L.name)||"Unassigned"})]}),Object.entries(j.customFields||{}).map(([$,U])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground capitalize",children:$.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"font-medium",children:U})]},$))]}),j.notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:j.notes})]})]})]})}),e.jsx("div",{className:"space-y-6",children:R&&e.jsx(TB,{leadScore:R,lead:j})})]})}),e.jsx(Je,{value:"activity",children:e.jsx(EB,{leadId:j.id,activities:F})}),e.jsx(Je,{value:"communication",children:e.jsx(IB,{leadId:j.id,leadData:j})}),e.jsx(Je,{value:"ai-insights",children:e.jsx(DB,{leadId:j.id,leadData:j})}),e.jsx(Je,{value:"nurturing",children:e.jsx("div",{className:"space-y-6",children:e.jsx(z5,{})})}),e.jsx(Je,{value:"reminders",children:e.jsx(PB,{leadId:j.id,reminders:B})})]})]})}return e.jsxs("div",{className:"space-y-8",children:[f&&e.jsx(Vu,{onClose:()=>g(!1),onSuccess:M}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"CRM & Prospecting"}),e.jsx("p",{className:"ri-page-description",children:"Manage leads, track activities, and monitor sales pipeline with AI-powered insights"})]}),e.jsxs(H,{className:"shadow-sm",onClick:()=>g(!0),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Leads"}),e.jsx(Ks,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"+12% from last month"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"New Leads"}),e.jsx(Ks,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(F=>F.status===Xr.NEW).length}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"+8% from last week"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Qualified"}),e.jsx(Ua,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(F=>F.status===Xr.QUALIFIED).length}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"+15% from last month"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"AI Insights"}),e.jsx($i,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"47"}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx($i,{className:"h-3 w-3 mr-1"}),"Active recommendations"]})]})]})]}),e.jsxs(ms,{defaultValue:"leads",className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-6",children:[e.jsx(Ye,{value:"leads",children:"Leads"}),e.jsx(Ye,{value:"pipeline",children:"Pipeline"}),e.jsx(Ye,{value:"quotes",children:"Quotes"}),e.jsx(Ye,{value:"nurturing",children:"Nurturing"}),e.jsx(Ye,{value:"forms",children:"Intake Forms"}),e.jsx(Ye,{value:"sources",children:"Sources"})]}),e.jsxs(Je,{value:"leads",className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search leads...",value:o,onChange:F=>c(F.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:Xr.NEW,children:"New"}),e.jsx(J,{value:Xr.CONTACTED,children:"Contacted"}),e.jsx(J,{value:Xr.QUALIFIED,children:"Qualified"}),e.jsx(J,{value:Xr.PROPOSAL,children:"Proposal"}),e.jsx(J,{value:Xr.NEGOTIATION,children:"Negotiation"}),e.jsx(J,{value:Xr.CLOSED_WON,children:"Closed Won"}),e.jsx(J,{value:Xr.CLOSED_LOST,children:"Closed Lost"})]})]}),e.jsxs(Be,{value:m,onValueChange:h,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Source"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Sources"}),s.map(F=>e.jsx(J,{value:F.id,children:F.name},F.id))]})]}),e.jsxs(Be,{value:p,onValueChange:b,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Assignee"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Reps"}),r.map(F=>e.jsx(J,{value:F.id,children:F.name},F.id))]})]}),e.jsxs(H,{onClick:()=>g(!0),className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:["Leads (",E.length,")"]}),e.jsx(Ee,{children:"Manage your sales prospects with AI-powered insights and automated nurturing"})]}),e.jsxs(H,{onClick:()=>g(!0),variant:"outline",className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Lead"]})]})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:E.map(F=>{var B;return e.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>x(F),children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:[F.firstName," ",F.lastName]}),e.jsx(Ae,{className:Ge("ri-badge-status",S(F.status)),children:F.status.replace("_"," ").toUpperCase()}),F.score&&e.jsx(Ae,{className:Ge("ri-badge-status",C(F.score)),children:F.score}),e.jsxs(Ae,{variant:"outline",className:"text-xs",children:[e.jsx($i,{className:"h-3 w-3 mr-1"}),"AI Ready"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Sr,{className:"h-3 w-3 mr-2 text-blue-500"}),F.email]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Gc,{className:"h-3 w-3 mr-2 text-green-500"}),F.phone]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ks,{className:"h-3 w-3 mr-2 text-purple-500"}),((B=r.find(R=>R.id===F.assignedTo))==null?void 0:B.name)||"Unassigned"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-2 text-orange-500"}),nt(F.createdAt)]})]}),F.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:F.notes}),e.jsx("div",{className:"mt-2",children:e.jsx(Zo,{entityId:F.id,entityType:Fs.LEAD,onTagsChange:()=>{},placeholder:"Add lead tags...",className:"max-w-md"})})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:R=>{R.stopPropagation(),I(F)},children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),"Task"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:R=>{R.stopPropagation()},children:[e.jsx(sr,{className:"h-3 w-3 mr-1"}),"Contact"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:R=>{R.stopPropagation(),x(F)},children:[e.jsx($i,{className:"h-3 w-3 mr-1"}),"AI Insights"]})]})]},F.id)})})})]})]}),e.jsx(Je,{value:"pipeline",children:e.jsx(AB,{})}),e.jsx(Je,{value:"quotes",children:e.jsx(MB,{})}),e.jsx(Je,{value:"nurturing",children:e.jsx(z5,{})}),e.jsx(Je,{value:"forms",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Lead Intake Forms"}),e.jsx(Ee,{children:"Create and manage dynamic lead capture forms"})]}),e.jsx(te,{children:e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Form builder coming soon..."})})]})}),e.jsx(Je,{value:"sources",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Lead Sources"}),e.jsx(Ee,{children:"Manage and track lead source performance"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:s.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:F.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",F.type," • Conversion: ",F.conversionRate,"%",F.trackingCode&&` • Code: ${F.trackingCode}`]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:F.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:F.isActive?"Active":"Inactive"}),e.jsx(H,{variant:"outline",size:"sm",children:e.jsx(wn,{className:"h-3 w-3"})})]})]},F.id))})})]})})]})]})}function _B(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(V5,{})}),e.jsx(ot,{path:"/*",element:e.jsx(V5,{})})]})}const lx={locations:["Main Lot","Overflow Lot","Service Bay","Offsite"],features:["AC","Washer/Dryer","Solar Prep","Porch","Skirting","Appliances Included"],exampleInventory:[{stockNumber:"RV-001",type:"Fifth Wheel",condition:"Used",status:"Available",location:"Main Lot",year:2022,make:"Forest River",model:"Flagstaff 832IKRL"}]};function OB({vehicles:t,onEdit:s,onDelete:r,onView:n,onStatusChange:a,onCreateTask:i}){const{toast:l}=xt(),[o,c]=y.useState(""),[d,u]=y.useState("all"),[m,h]=y.useState("all"),[p,b]=y.useState("all"),[j,x]=y.useState([]),[f,g]=y.useState("updatedAt"),[v,w]=y.useState("desc"),k=Array.from(new Set(t.map(F=>F.location))),T=F=>{switch(F){case Jt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Jt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Jt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Jt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Jt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},S=F=>F.replace("_"," ").toUpperCase(),E=(t.length>0?t:lx.exampleInventory.map(F=>({id:"1",vin:"MOCK123456789",make:F.make,model:F.model,year:F.year,type:F.type,status:F.status,price:45e3,cost:35e3,location:F.location,features:["AC","Solar Prep"],images:[],customFields:{},createdAt:new Date,updatedAt:new Date}))).filter(F=>{const B=`${F.make} ${F.model}`.toLowerCase().includes(o.toLowerCase())||F.vin.toLowerCase().includes(o.toLowerCase())||F.year.toString().includes(o),R=d==="all"||F.status===d,$=m==="all"||F.type===m,U=p==="all"||F.location===p;return B&&R&&$&&U}).sort((F,B)=>{let R=F[f],$=B[f];return R instanceof Date&&$ instanceof Date&&(R=R.getTime(),$=$.getTime()),typeof R=="string"&&typeof $=="string"&&(R=R.toLowerCase(),$=$.toLowerCase()),R<$?v==="asc"?-1:1:R>$?v==="asc"?1:-1:0}),M=F=>{f===F?w(v==="asc"?"desc":"asc"):(g(F),w("asc"))},D=F=>{x(F?E.map(B=>B.id):[])},A=F=>{j.includes(F)?x(j.filter(B=>B!==F)):x([...j,F])},I=()=>{const B=(j.length>0?t.filter(q=>j.includes(q.id)):E).map(q=>({id:q.id,vin:q.vin,make:q.make,model:q.model,year:q.year,type:q.type,status:q.status,price:q.price,cost:q.cost,location:q.location,features:q.features.join(", "),createdAt:q.createdAt.toISOString(),updatedAt:q.updatedAt.toISOString()})),R=Rh.unparse(B),$=new Blob([R],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL($),W=document.createElement("a");W.href=U,W.setAttribute("download",`inventory_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(W),W.click(),document.body.removeChild(W),l({title:"Export Successful",description:`Exported ${B.length} vehicles to CSV`})},L=F=>{if(j.length===0){l({title:"No Vehicles Selected",description:"Please select vehicles to update",variant:"destructive"});return}j.forEach(B=>{a(B,F)}),l({title:"Status Updated",description:`Updated ${j.length} vehicles to ${F}`})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"ri-search-bar flex-1",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search by make, model, VIN...",value:o,onChange:F=>c(F.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-[130px]",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:Jt.AVAILABLE,children:"Available"}),e.jsx(J,{value:Jt.RESERVED,children:"Reserved"}),e.jsx(J,{value:Jt.SOLD,children:"Sold"}),e.jsx(J,{value:Jt.SERVICE,children:"Service"}),e.jsx(J,{value:Jt.DELIVERED,children:"Delivered"})]})]}),e.jsxs(Be,{value:m,onValueChange:h,children:[e.jsx(Oe,{className:"w-[130px]",children:e.jsx(ze,{placeholder:"Type"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Types"}),e.jsx(J,{value:$t.RV,children:"RV"}),e.jsx(J,{value:$t.MOTORHOME,children:"Motorhome"}),e.jsx(J,{value:$t.TRAVEL_TRAILER,children:"Travel Trailer"}),e.jsx(J,{value:$t.FIFTH_WHEEL,children:"Fifth Wheel"}),e.jsx(J,{value:$t.TOY_HAULER,children:"Toy Hauler"})]})]}),e.jsxs(Be,{value:p,onValueChange:b,children:[e.jsx(Oe,{className:"w-[130px]",children:e.jsx(ze,{placeholder:"Location"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Locations"}),k.map(F=>e.jsx(J,{value:F,children:F},F))]})]})]})]}),j.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium",children:[j.length," vehicles selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{onValueChange:F=>L(F),children:[e.jsx(Oe,{className:"w-[150px]",children:e.jsx(ze,{placeholder:"Change Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:Jt.AVAILABLE,children:"Available"}),e.jsx(J,{value:Jt.RESERVED,children:"Reserved"}),e.jsx(J,{value:Jt.SOLD,children:"Sold"}),e.jsx(J,{value:Jt.SERVICE,children:"Service"}),e.jsx(J,{value:Jt.DELIVERED,children:"Delivered"}),e.jsx(J,{value:$t.SINGLE_WIDE,children:"Single Wide MH"}),e.jsx(J,{value:$t.DOUBLE_WIDE,children:"Double Wide MH"}),e.jsx(J,{value:$t.TRIPLE_WIDE,children:"Triple Wide MH"}),e.jsx(J,{value:$t.PARK_MODEL,children:"Park Model"}),e.jsx(J,{value:$t.MODULAR_HOME,children:"Modular Home"})]})]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:I,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>x([]),children:[e.jsx(St,{className:"h-4 w-4 mr-2"}),"Clear Selection"]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:["Inventory (",E.length,")"]}),e.jsx(Ee,{children:"Manage your RV and motorhome inventory"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(H,{variant:"outline",size:"sm",onClick:I,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),e.jsx(te,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left",children:e.jsx(Ct,{checked:j.length===E.length&&E.length>0,onCheckedChange:D})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("make"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Make/Model"}),f==="make"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("year"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Year"}),f==="year"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("vin"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"VIN"}),f==="vin"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("type"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Type"}),f==="type"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("status"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Status"}),f==="status"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("location"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Location"}),f==="location"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left cursor-pointer hover:bg-muted/30",onClick:()=>M("price"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Price"}),f==="price"&&e.jsx("span",{className:"ml-1",children:v==="asc"?"↑":"↓"})]})}),e.jsx("th",{className:"p-2 text-left",children:"Media"}),e.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),e.jsxs("tbody",{children:[E.map(F=>e.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[e.jsx("td",{className:"p-2",children:e.jsx(Ct,{checked:j.includes(F.id),onCheckedChange:()=>A(F.id)})}),e.jsxs("td",{className:"p-2",children:[e.jsxs("div",{className:"font-medium",children:[F.make," ",F.model]}),e.jsx("div",{className:"mt-1",children:e.jsx(Zo,{entityId:F.id,entityType:Fs.INVENTORY,onTagsChange:()=>{},placeholder:"Add tags...",className:"max-w-xs"})})]}),e.jsx("td",{className:"p-2",children:F.year}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"font-mono text-xs",children:F.vin})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-sm",children:S(F.type)})}),e.jsx("td",{className:"p-2",children:e.jsx(Ae,{className:Ge("ri-badge-status",T(F.status)),children:F.status.toUpperCase()})}),e.jsx("td",{className:"p-2",children:F.location}),e.jsx("td",{className:"p-2 font-medium text-primary",children:De(F.price)}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsxs(Ae,{variant:"outline",className:"text-xs",children:[e.jsx(Nu,{className:"h-3 w-3 mr-1"}),F.images.length]}),F.customFields.videos&&e.jsxs(Ae,{variant:"outline",className:"text-xs",children:[e.jsx(Ry,{className:"h-3 w-3 mr-1"}),F.customFields.videos.length||0]})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>n(F),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>s(F),children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>i(F),children:e.jsx(ln,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>r(F.id),children:e.jsx(js,{className:"h-4 w-4"})})]})})]},F.id)),E.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:[e.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No vehicles found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})})]})]})})})]})]})}function $B({vehicle:t,onSave:s,onCancel:r}){const{toast:n}=xt(),[a,i]=y.useState(!1),[l,o]=y.useState({vin:(t==null?void 0:t.vin)||"",make:(t==null?void 0:t.make)||"",model:(t==null?void 0:t.model)||"",year:(t==null?void 0:t.year)||new Date().getFullYear(),type:(t==null?void 0:t.type)||$t.RV,status:(t==null?void 0:t.status)||Jt.AVAILABLE,price:(t==null?void 0:t.price)||0,cost:(t==null?void 0:t.cost)||0,location:(t==null?void 0:t.location)||lx.locations[0],features:(t==null?void 0:t.features)||[],images:(t==null?void 0:t.images)||[],customFields:(t==null?void 0:t.customFields)||{}}),c=async u=>{if(u.preventDefault(),!l.vin||!l.make||!l.model){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}i(!0);try{await s(l),n({title:"Success",description:`Vehicle ${t?"updated":"created"} successfully`})}catch{n({title:"Error",description:`Failed to ${t?"update":"create"} vehicle`,variant:"destructive"})}finally{i(!1)}},d=u=>{const m=l.features||[],h=m.includes(u)?m.filter(p=>p!==u):[...m,u];o({...l,features:h})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Vehicle":"Add New Vehicle"}),e.jsx(Ee,{children:t?"Update vehicle information":"Enter vehicle details"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vin",children:"VIN *"}),e.jsx(ge,{id:"vin",value:l.vin,onChange:u=>o({...l,vin:u.target.value}),placeholder:"Enter VIN number",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"year",children:"Year *"}),e.jsx(ge,{id:"year",type:"number",value:l.year,onChange:u=>o({...l,year:parseInt(u.target.value)}),min:"1900",max:new Date().getFullYear()+1,required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"make",children:"Make *"}),e.jsx(ge,{id:"make",value:l.make,onChange:u=>o({...l,make:u.target.value}),placeholder:"Enter make",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"model",children:"Model *"}),e.jsx(ge,{id:"model",value:l.model,onChange:u=>o({...l,model:u.target.value}),placeholder:"Enter model",required:!0})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Type"}),e.jsxs(Be,{value:l.type,onValueChange:u=>o({...l,type:u}),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select type"})}),e.jsx($e,{children:Object.values($t).map(u=>e.jsx(J,{value:u,children:u.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())},u))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:l.status,onValueChange:u=>o({...l,status:u}),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select status"})}),e.jsx($e,{children:Object.values(Jt).map(u=>e.jsx(J,{value:u,children:u.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())},u))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"price",children:"Sale Price"}),e.jsx(ge,{id:"price",type:"number",value:l.price,onChange:u=>o({...l,price:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"cost",children:"Cost"}),e.jsx(ge,{id:"cost",type:"number",value:l.cost,onChange:u=>o({...l,cost:parseFloat(u.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"location",children:"Location"}),e.jsxs(Be,{value:l.location,onValueChange:u=>o({...l,location:u}),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select location"})}),e.jsx($e,{children:lx.locations.map(u=>e.jsx(J,{value:u,children:u},u))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Features"}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:lx.features.map(u=>{var m;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:u,checked:((m=l.features)==null?void 0:m.includes(u))||!1,onCheckedChange:()=>d(u)}),e.jsx(Z,{htmlFor:u,className:"font-normal",children:u})]},u)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tags"}),e.jsx(Zo,{entityId:(t==null?void 0:t.id)||"new-vehicle",entityType:Fs.INVENTORY,onTagsChange:()=>{},placeholder:"Add vehicle tags...",className:"w-full"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Images"}),e.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ji,{className:"h-8 w-8 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Drop images here or click to browse"}),e.jsxs(H,{type:"button",variant:"outline",children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Choose Images"]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Vehicle"]})})]})]})})]})})}function BB({vehicle:t,onClose:s,onEdit:r,onCreateTask:n}){var l,o,c,d,u,m,h,p,b,j,x,f,g,v,w,k,T;const a=S=>{switch(S){case Jt.AVAILABLE:return"bg-green-50 text-green-700 border-green-200";case Jt.RESERVED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Jt.SOLD:return"bg-blue-50 text-blue-700 border-blue-200";case Jt.SERVICE:return"bg-orange-50 text-orange-700 border-orange-200";case Jt.DELIVERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=S=>S.replace("_"," ").toUpperCase();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:[t.year," ",t.make," ",t.model]}),e.jsxs(Ee,{children:["VIN: ",t.vin]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>{s(),r(t)},size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]}),e.jsxs(H,{onClick:()=>n(t),size:"sm",variant:"outline",children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",a(t.status)),children:t.status.toUpperCase()}),e.jsx(Ae,{variant:"outline",children:i(t.type)}),e.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:De(t.price)})]}),e.jsxs(ms,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"details",children:"Details"}),e.jsx(Ye,{value:"images",children:"Images"}),e.jsx(Ye,{value:"features",children:"Features"}),e.jsx(Ye,{value:"videos",children:"Videos"}),e.jsx(Ye,{value:"notes",children:"Notes"})]}),e.jsxs(Je,{value:"details",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Make"}),e.jsx("p",{className:"font-medium",children:t.make})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{className:"font-medium",children:t.model})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Year"}),e.jsx("p",{className:"font-medium",children:t.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIN"}),e.jsx("p",{className:"font-medium font-mono",children:t.vin})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-medium",children:i(t.type)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("p",{className:"font-medium",children:t.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price"}),e.jsx("p",{className:"font-medium text-primary",children:De(t.price)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Cost"}),e.jsx("p",{className:"font-medium",children:De(t.cost)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Specifications"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[((l=t.customFields)==null?void 0:l.exteriorColor)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Color"}),e.jsx("p",{className:"font-medium",children:t.customFields.exteriorColor})]}),((o=t.customFields)==null?void 0:o.interiorColor)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Interior Color"}),e.jsx("p",{className:"font-medium",children:t.customFields.interiorColor})]}),((c=t.customFields)==null?void 0:c.length)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Length"}),e.jsxs("p",{className:"font-medium",children:[t.customFields.length," ft"]})]}),((d=t.customFields)==null?void 0:d.weight)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Weight"}),e.jsxs("p",{className:"font-medium",children:[t.customFields.weight," lbs"]})]}),((u=t.customFields)==null?void 0:u.sleeps)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sleeps"}),e.jsx("p",{className:"font-medium",children:t.customFields.sleeps})]}),((m=t.customFields)==null?void 0:m.slideouts)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Slideouts"}),e.jsx("p",{className:"font-medium",children:t.customFields.slideouts})]}),((h=t.customFields)==null?void 0:h.fuelType)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Type"}),e.jsx("p",{className:"font-medium",children:t.customFields.fuelType})]}),((p=t.customFields)==null?void 0:p.mileage)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),e.jsx("p",{className:"font-medium",children:t.customFields.mileage})]}),((b=t.customFields)==null?void 0:b.condition)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx("p",{className:"font-medium",children:t.customFields.condition})]}),(t.type===$t.SINGLE_WIDE||t.type===$t.DOUBLE_WIDE||t.type===$t.TRIPLE_WIDE||t.type===$t.PARK_MODEL||t.type===$t.MODULAR_HOME)&&e.jsxs(e.Fragment,{children:[((j=t.customFields)==null?void 0:j.squareFootage)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Square Footage"}),e.jsxs("p",{className:"font-medium",children:[t.customFields.squareFootage," sq ft"]})]}),((x=t.customFields)==null?void 0:x.bedrooms)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bedrooms"}),e.jsx("p",{className:"font-medium",children:t.customFields.bedrooms})]}),((f=t.customFields)==null?void 0:f.bathrooms)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Bathrooms"}),e.jsx("p",{className:"font-medium",children:t.customFields.bathrooms})]}),((g=t.customFields)==null?void 0:g.constructionType)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Construction Type"}),e.jsx("p",{className:"font-medium",children:t.customFields.constructionType})]}),((v=t.customFields)==null?void 0:v.exteriorSiding)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Exterior Siding"}),e.jsx("p",{className:"font-medium",children:t.customFields.exteriorSiding})]}),((w=t.customFields)==null?void 0:w.roofType)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Roof Type"}),e.jsx("p",{className:"font-medium",children:t.customFields.roofType})]})]})]})]})]}),e.jsx(Je,{value:"images",children:t.images&&t.images.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.images.map((S,C)=>e.jsx("div",{className:"overflow-hidden rounded-md",children:e.jsx("img",{src:S,alt:`${t.make} ${t.model} ${C+1}`,className:"w-full h-auto object-cover hover:scale-105 transition-transform duration-300"})},C))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Nu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No images available"})]})}),e.jsx(Je,{value:"features",children:t.features&&t.features.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.features.map((S,C)=>e.jsxs("div",{className:"flex items-center p-2 bg-muted/30 rounded-md",children:[e.jsx(bn,{className:"h-4 w-4 mr-2 text-primary"}),e.jsx("span",{children:S})]},C))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No features listed"})]})}),e.jsx(Je,{value:"videos",children:(k=t.customFields)!=null&&k.videos&&t.customFields.videos.length>0?e.jsx("div",{className:"space-y-4",children:t.customFields.videos.map((S,C)=>e.jsx("div",{className:"p-3 bg-muted/30 rounded-md",children:e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ry,{className:"h-4 w-4 mr-2 text-primary"}),e.jsxs("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["Video ",C+1]})]})},C))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Ry,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No videos available"})]})}),e.jsx(Je,{value:"notes",children:(T=t.customFields)!=null&&T.notes?e.jsx("div",{className:"p-4 bg-muted/30 rounded-md whitespace-pre-wrap",children:t.customFields.notes}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No notes available"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:s,children:"Close"}),e.jsxs(H,{variant:"outline",onClick:()=>n(t),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]}),e.jsxs(H,{onClick:()=>r(t),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Home/RV"]})]})]})]})})}function zB({onImport:t,onCancel:s}){const{toast:r}=xt(),[n,a]=y.useState(null),[i,l]=y.useState([]),[o,c]=y.useState({}),[d,u]=y.useState(!1),[m,h]=y.useState("upload"),[p,b]=y.useState([]),j=["vin","make","model","year","price","cost"],x=[{key:"vin",label:"VIN"},{key:"make",label:"Make"},{key:"model",label:"Model"},{key:"year",label:"Year"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"price",label:"Price"},{key:"cost",label:"Cost"},{key:"location",label:"Location"},{key:"features",label:"Features"}],f=E=>{var D;const M=(D=E.target.files)==null?void 0:D[0];M&&(a(M),Rh.parse(M,{header:!0,skipEmptyLines:!0,complete:A=>{l(A.data),A.meta.fields&&A.meta.fields,h("map")},error:A=>{r({title:"Error Parsing CSV",description:A.message,variant:"destructive"})}}))},g=(E,M)=>{c(D=>({...D,[E]:M}))},v=()=>{if(j.filter(M=>Object.values(o).includes(M)).length<j.length){r({title:"Missing Required Fields",description:`Please map all required fields: ${j.join(", ")}`,variant:"destructive"});return}h("preview"),b(i.map((M,D)=>D))},w=E=>{b(E?i.map((M,D)=>D):[])},k=E=>{p.includes(E)?b(p.filter(M=>M!==E)):b([...p,E])},T=async()=>{if(p.length===0){r({title:"No Rows Selected",description:"Please select at least one row to import",variant:"destructive"});return}u(!0);try{const E=p.map(M=>{const D=i[M],A={images:[],features:[],customFields:{}};return Object.entries(o).forEach(([I,L])=>{const F=D[I];L==="features"?A.features=F?F.split(",").map(B=>B.trim()):[]:L==="year"||L==="price"||L==="cost"?A[L]=parseFloat(F)||0:L==="type"?A.type=S(F):L==="status"?A.status=C(F):["exteriorColor","interiorColor","length","weight","sleeps","slideouts","fuelType","mileage","condition"].includes(L)?A.customFields={...A.customFields,[L]:F}:A[L]=F}),A});await t(E),r({title:"Import Successful",description:`Imported ${E.length} vehicles`})}catch{r({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}finally{u(!1)}},S=E=>{const M=E.toLowerCase().replace(/[^a-z0-9]/g,"");return M.includes("motorhome")?$t.MOTORHOME:M.includes("travel")&&M.includes("trailer")?$t.TRAVEL_TRAILER:M.includes("fifth")&&M.includes("wheel")?$t.FIFTH_WHEEL:M.includes("toy")&&M.includes("hauler")?$t.TOY_HAULER:$t.RV},C=E=>{const M=E.toLowerCase().replace(/[^a-z0-9]/g,"");return M.includes("reserved")?Jt.RESERVED:M.includes("sold")?Jt.SOLD:M.includes("service")?Jt.SERVICE:M.includes("delivered")?Jt.DELIVERED:Jt.AVAILABLE};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Import Inventory from CSV"}),e.jsxs(Ee,{children:[m==="upload"&&"Upload a CSV file with your inventory data",m==="map"&&"Map CSV columns to vehicle fields",m==="preview"&&"Preview and select vehicles to import"]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{children:[m==="upload"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a CSV file with your inventory data"}),e.jsx(ge,{type:"file",accept:".csv",onChange:f,className:"max-w-sm mx-auto"})]}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"CSV Format Guidelines"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• File should be in CSV format"}),e.jsx("li",{children:"• First row should contain column headers"}),e.jsx("li",{children:"• Required fields: VIN, Make, Model, Year, Price, Cost"}),e.jsx("li",{children:"• Features should be comma-separated within quotes"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{variant:"outline",onClick:s,children:"Cancel"})})]}),m==="map"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg",children:[e.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),n==null?void 0:n.name]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," rows found"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Map CSV Columns to Vehicle Fields"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Required fields are marked with *"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto p-2",children:n&&i.length>0&&Object.keys(i[0]).map(E=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-1/3 font-medium truncate",children:E}),e.jsx("div",{className:"w-2/3",children:e.jsxs("select",{value:o[E]||"",onChange:M=>g(E,M.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"-- Skip this field --"}),x.map(M=>e.jsxs("option",{value:M.key,children:[M.label," ",j.includes(M.key)?"*":""]},M.key))]})})]},E))})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(H,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(H,{onClick:v,children:"Preview Data"})]})]}),m==="preview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{checked:p.length===i.length,onCheckedChange:w}),e.jsxs(Z,{children:["Select All (",i.length," vehicles)"]})]}),e.jsxs(Ae,{children:[p.length," selected"]})]}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left"}),Object.entries(o).filter(([E,M])=>M).map(([E,M])=>e.jsxs("th",{className:"p-2 text-left text-sm",children:[M,j.includes(M)&&e.jsx("span",{className:"text-red-500",children:"*"})]},E))]})}),e.jsx("tbody",{children:i.map((E,M)=>e.jsxs("tr",{className:"border-t hover:bg-muted/10",children:[e.jsx("td",{className:"p-2",children:e.jsx(Ct,{checked:p.includes(M),onCheckedChange:()=>k(M)})}),Object.entries(o).filter(([D,A])=>A).map(([D,A])=>e.jsx("td",{className:"p-2 text-sm",children:E[D]||e.jsx("span",{className:"text-muted-foreground italic",children:"Empty"})},D))]},M))})]})})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(H,{variant:"outline",onClick:()=>h("map"),children:"Back to Mapping"}),e.jsx(H,{onClick:T,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Import ",p.length," Vehicles"]})})]})]})]})]})})}function VB({onScan:t,onClose:s}){const{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState(null),o=["MOCK123456789","TEST987654321","DEMO555666777"];y.useEffect(()=>{const m=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(m)},[]);const c=()=>{const m="ABCDEFGHJKLMNPRSTUVWXYZ0123456789";let h="";for(let p=0;p<17;p++)h+=m.charAt(Math.floor(Math.random()*m.length));l(h),r({title:"Barcode Scanned",description:`VIN: ${h}`})},d=()=>{i&&t(i)},u=()=>{const m=o[Math.floor(Math.random()*o.length)];t(m),r({title:"Mock Scan Complete",description:`Scanned VIN: ${m}`})};return e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[60]",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Scan VIN Barcode"}),e.jsx(Ee,{children:"Position the barcode in front of your camera"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsx("div",{className:"bg-black h-64 flex items-center justify-center rounded-md relative",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3/4 h-1 bg-red-500 animate-pulse"})}),e.jsx("div",{className:"text-white text-sm absolute bottom-2 left-2"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(H,{onClick:u,className:"mb-4 bg-white/20 hover:bg-white/30 text-white border-white/30",children:"Simulate Scan"}),e.jsx(Ui,{className:"h-12 w-12 text-white/50"})]})]}):e.jsx(e.Fragment,{children:e.jsx(Ui,{className:"h-12 w-12 text-white/50"})})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(H,{variant:"outline",onClick:s,children:"Cancel"}),i?e.jsxs(H,{onClick:d,children:[e.jsx(Ru,{className:"h-4 w-4 mr-2"}),"Confirm"]}):e.jsx(H,{onClick:c,children:"Simulate Scan"})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Test VINs"}),e.jsx("div",{className:"space-y-1",children:o.map((m,h)=>e.jsx("button",{onClick:()=>{t(m)},className:"block text-sm text-yellow-700 hover:text-yellow-900 font-mono",children:m},h))})]})]})})}function U5(){const{vehicles:t,createVehicle:s,updateVehicleStatus:r,deleteVehicle:n}=Jc(),{toast:a}=xt(),{createTask:i}=ed(),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[b,j]=y.useState(null),[x,f]=y.useState(!1),[g,v]=y.useState(void 0),w=()=>{j(null),o(!0)},k=L=>{j(L),o(!0)},T=L=>{j(L),d(!0)},S=async L=>{try{await i(L),f(!1),v(void 0),a({title:"Task Created",description:"Task has been created successfully"})}catch{a({title:"Error",description:"Failed to create task",variant:"destructive"})}},C=L=>{const F=L.status==="service"?es.HIGH:L.status==="reserved"?es.MEDIUM:es.LOW,B=L.status==="service"?new Date(Date.now()+24*60*60*1e3):new Date(Date.now()+3*24*60*60*1e3);v({sourceId:L.id,sourceType:"vehicle",module:er.CRM,title:`Follow up on ${L.year} ${L.make} ${L.model}`,description:`Vehicle Status: ${L.status}, Location: ${L.location}`,priority:F,dueDate:B,link:"/inventory",customFields:{vehicleVin:L.vin,vehiclePrice:L.price,vehicleLocation:L.location,vehicleStatus:L.status}}),f(!0)},E=async L=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await n(L),a({title:"Vehicle Deleted",description:"The vehicle has been removed from inventory"})}catch{a({title:"Error",description:"Failed to delete vehicle",variant:"destructive"})}},M=async(L,F)=>{try{await r(L,F),a({title:"Status Updated",description:`Vehicle status changed to ${F}`})}catch{a({title:"Error",description:"Failed to update vehicle status",variant:"destructive"})}},D=async L=>{try{b?(await r(b.id,L.status||b.status),a({title:"Vehicle Updated",description:"Vehicle information has been updated"})):(await s(L),a({title:"Vehicle Added",description:"New vehicle has been added to inventory"})),o(!1),j(null)}catch{a({title:"Error",description:`Failed to ${b?"update":"create"} vehicle`,variant:"destructive"})}},A=async L=>{try{for(const F of L)await s(F);m(!1),a({title:"Import Successful",description:`Imported ${L.length} vehicles`})}catch{a({title:"Import Failed",description:"There was an error importing the vehicles",variant:"destructive"})}},I=L=>{const F=t.find(B=>B.vin===L);F?(j(F),d(!0),a({title:"Vehicle Found",description:`Found existing vehicle with VIN: ${L}`})):(j(null),o(!0),setTimeout(()=>{const B=document.getElementById("vin");if(B){B.value=L;const R=new Event("input",{bubbles:!0});B.dispatchEvent(R)}},100),a({title:"New VIN Scanned",description:`Creating new vehicle with VIN: ${L}`})),p(!1)};return e.jsxs("div",{className:"space-y-8",children:[x&&e.jsx(Xc,{initialData:g,onSave:S,onCancel:()=>{f(!1),v(void 0)}}),l&&e.jsx($B,{vehicle:b||void 0,onSave:D,onCancel:()=>{o(!1),j(null)}}),c&&b&&e.jsx(BB,{vehicle:b,onClose:()=>d(!1),onEdit:k,onCreateTask:C}),u&&e.jsx(zB,{onImport:A,onCancel:()=>m(!1)}),h&&e.jsx(VB,{onScan:I,onClose:()=>p(!1)}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Inventory Management"}),e.jsx("p",{className:"ri-page-description",children:"Manage your RV and motorhome inventory"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>p(!0),children:[e.jsx(L8,{className:"h-4 w-4 mr-2"}),"Scan Barcode"]}),e.jsxs(H,{variant:"outline",onClick:()=>m(!0),children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),e.jsxs(H,{onClick:w,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Home"]})]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Units"}),e.jsx(bn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"+5 units this month"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Available"}),e.jsx(bn,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(L=>L.status===Jt.AVAILABLE).length}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Ready for sale"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"Reserved"}),e.jsx(bn,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(L=>L.status===Jt.RESERVED).length}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Pending sale"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Total Value"}),e.jsx(wt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(t.reduce((L,F)=>L+F.price,0))}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Inventory value"]})]})]})]}),e.jsx(OB,{vehicles:t,onEdit:k,onDelete:E,onView:T,onStatusChange:M,onCreateTask:C})]})}function UB(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(U5,{})}),e.jsx(ot,{path:"/*",element:e.jsx(U5,{})})]})}const qB=[{id:"1",name:"Sunset Ridge Parcel A",location:"Highway 287, Sunset Ridge Development",size:2.5,price:125e3,status:"available",type:"Residential",description:"Beautiful 2.5-acre residential lot with stunning mountain views. Perfect for building your dream home with plenty of space for gardens and outdoor activities.",amenities:["Mountain Views","Mature Trees","Private Road","Underground Utilities"],zoning:"R-1",utilities:"Electric, Water, Sewer Available",access:"Paved Road",soilType:"Sandy Loam",waterRights:"Municipal Water Available",restrictions:"Single family residential only, minimum 2000 sq ft home",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Oak Creek Commercial",location:"1234 Main Street, Oak Creek Business District",size:1.2,price:28e4,status:"pending",type:"Commercial",description:"Prime commercial lot in the heart of Oak Creek business district. High traffic area with excellent visibility and access to major highways.",amenities:["High Traffic","Corner Lot","Highway Access","City Water/Sewer"],zoning:"C-2",utilities:"All utilities available at street",access:"Two street access points",soilType:"Clay",waterRights:"City water and sewer",restrictions:"Commercial use only, height restrictions apply",createdAt:"2024-01-10T14:30:00Z",updatedAt:"2024-01-20T09:15:00Z"},{id:"3",name:"Prairie Wind Farm",location:"County Road 45, Prairie Wind Valley",size:40,price:32e4,status:"available",type:"Agricultural",description:"Expansive 40-acre agricultural land perfect for farming or ranching. Includes existing barn and well. Fertile soil with irrigation rights.",amenities:["Existing Barn","Water Well","Irrigation Rights","Fenced Perimeter"],zoning:"A-1",utilities:"Electric available, well water",access:"Gravel road access",soilType:"Rich Black Soil",waterRights:"Irrigation rights included",restrictions:"Agricultural use, no residential development",createdAt:"2024-01-05T08:00:00Z",updatedAt:"2024-01-05T08:00:00Z"},{id:"4",name:"Riverside Recreation",location:"Riverside Drive, Willow Creek Area",size:5.8,price:95e3,status:"reserved",type:"Recreational",description:"Scenic recreational property along Willow Creek. Perfect for camping, fishing, and outdoor recreation. Includes creek frontage and mature forest.",amenities:["Creek Frontage","Mature Forest","Wildlife","Fishing Rights"],zoning:"REC-1",utilities:"None available",access:"Dirt road access",soilType:"Rocky with creek bottom",waterRights:"Creek access rights",restrictions:"Recreational use only, no permanent structures",createdAt:"2024-01-12T16:45:00Z",updatedAt:"2024-01-18T11:30:00Z"}];function Bg(){const[t,s]=y.useState(qB),{toast:r}=xt(),n=async h=>{try{const p={...h,id:Date.now().toString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(b=>[p,...b]),r({title:"Success",description:`${h.name} has been added successfully.`})}catch(p){throw r({title:"Error",description:"Failed to add land parcel.",variant:"destructive"}),p}},a=async(h,p)=>{try{s(b=>b.map(j=>j.id===h?{...j,...p,updatedAt:new Date().toISOString()}:j)),r({title:"Success",description:`${p.name} has been updated successfully.`})}catch(b){throw r({title:"Error",description:"Failed to update land parcel.",variant:"destructive"}),b}},i=async h=>{try{const p=t.find(b=>b.id===h);s(b=>b.filter(j=>j.id!==h)),r({title:"Success",description:`${(p==null?void 0:p.name)||"Land parcel"} has been deleted successfully.`})}catch(p){throw r({title:"Error",description:"Failed to delete land parcel.",variant:"destructive"}),p}},l=h=>t.find(p=>p.id===h),o=h=>t.filter(p=>p.status===h),c=h=>t.filter(p=>p.type===h),d=()=>t.reduce((h,p)=>h+p.price,0);return{lands:t,addLand:n,updateLand:a,deleteLand:i,getLandById:l,getLandsByStatus:o,getLandsByType:c,getTotalValue:d,getAveragePrice:()=>t.length===0?0:d()/t.length,getTotalAcreage:()=>t.reduce((h,p)=>h+p.size,0)}}function HB(){const{lands:t,getLandsByStatus:s,getTotalValue:r}=Bg(),n=s("available"),a=s("pending");s("sold");const i=r(),l=t.slice(0,3);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Land Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your land inventory and track sales performance"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{asChild:!0,children:e.jsxs(Dr,{to:"/land/new",children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Add Land Parcel"]})}),e.jsx(H,{variant:"outline",asChild:!0,children:e.jsxs(Dr,{to:"/land/list",children:[e.jsx(Gw,{className:"mr-2 h-4 w-4"}),"View All"]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Parcels"}),e.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Land parcels in inventory"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Available"}),e.jsx(Gt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for sale"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Zt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under contract"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",i.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Portfolio value"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(ee,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Dr,{to:"/land/new",children:e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center text-lg",children:[e.jsx(tt,{className:"mr-2 h-5 w-5 text-blue-600"}),"Add New Parcel"]}),e.jsx(Ee,{children:"Register a new land parcel in your inventory"})]})})}),e.jsx(ee,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(Dr,{to:"/land/list",children:e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center text-lg",children:[e.jsx(Gw,{className:"mr-2 h-5 w-5 text-green-600"}),"View All Parcels"]}),e.jsx(Ee,{children:"Browse and manage your complete land inventory"})]})})}),e.jsx(ee,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center text-lg",children:[e.jsx(tn,{className:"mr-2 h-5 w-5 text-purple-600"}),"Analytics"]}),e.jsx(Ee,{children:"View sales performance and market trends"})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Land Parcels"}),e.jsx(Ee,{children:"Latest additions to your land inventory"})]}),e.jsx(te,{children:l.length>0?e.jsx("div",{className:"space-y-4",children:l.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(ur,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.location})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",o.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.size," acres"]})]}),e.jsx(Ae,{variant:o.status==="available"?"default":o.status==="pending"?"secondary":o.status==="sold"?"destructive":"outline",children:o.status}),e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(Dr,{to:`/land/detail/${o.id}`,children:"View"})})]})]},o.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No land parcels yet"}),e.jsx("p",{className:"text-sm",children:"Add your first land parcel to get started"})]})})]})]})}function WB(){const{lands:t,deleteLand:s}=Bg(),{toast:r}=xt(),n=async(a,i)=>{if(window.confirm(`Are you sure you want to delete "${i}"?`))try{await s(a),r({title:"Success",description:`${i} has been deleted successfully.`})}catch{r({title:"Error",description:"Failed to delete land parcel.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(Dr,{to:"/land",children:[e.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Land Parcels"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your land inventory"})]})]}),e.jsx(H,{asChild:!0,children:e.jsxs(Dr,{to:"/land/new",children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Add Land Parcel"]})})]}),t.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(a=>e.jsxs(ee,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(ce,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ur,{className:"h-5 w-5 text-primary"}),e.jsx(de,{className:"text-lg",children:a.name})]}),e.jsx(Ae,{variant:a.status==="available"?"default":a.status==="pending"?"secondary":a.status==="sold"?"destructive":"outline",children:a.status})]}),e.jsx(Ee,{className:"line-clamp-2",children:a.location})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Size"}),e.jsxs("p",{className:"font-medium",children:[a.size," acres"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"font-medium",children:["$",a.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Type"}),e.jsx("p",{className:"font-medium",children:a.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Per Acre"}),e.jsxs("p",{className:"font-medium",children:["$",Math.round(a.price/a.size).toLocaleString()]})]})]}),a.amenities&&a.amenities.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Amenities"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.amenities.slice(0,3).map((i,l)=>e.jsx(Ae,{variant:"outline",className:"text-xs",children:i},l)),a.amenities.length>3&&e.jsxs(Ae,{variant:"outline",className:"text-xs",children:["+",a.amenities.length-3," more"]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(Dr,{to:`/land/detail/${a.id}`,children:[e.jsx(zs,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx(Dr,{to:`/land/edit/${a.id}`,children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>n(a.id,a.name),className:"text-destructive hover:text-destructive",children:e.jsx(js,{className:"h-4 w-4"})})]})]})]})})]},a.id))}):e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No land parcels yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first land parcel to the inventory"}),e.jsx(H,{asChild:!0,children:e.jsxs(Dr,{to:"/land/new",children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Add Land Parcel"]})})]})})})]})}function q5(){const t=Zn(),{id:s}=Yh(),{addLand:r,updateLand:n,getLandById:a}=Bg(),{toast:i}=xt(),l=!!s,[o,c]=y.useState(!1),[d,u]=y.useState({name:"",location:"",size:"",price:"",type:"",status:"available",description:"",amenities:[],zoning:"",utilities:"",access:"",soilType:"",waterRights:"",restrictions:""}),[m,h]=y.useState(""),[p,b]=y.useState({});y.useEffect(()=>{if(l&&s){const w=a(s);w&&u({name:w.name,location:w.location,size:w.size.toString(),price:w.price.toString(),type:w.type,status:w.status,description:w.description||"",amenities:w.amenities||[],zoning:w.zoning||"",utilities:w.utilities||"",access:w.access||"",soilType:w.soilType||"",waterRights:w.waterRights||"",restrictions:w.restrictions||""})}},[s,l,a]);const j=()=>{const w={};return d.name.trim()||(w.name="Name is required"),d.location.trim()||(w.location="Location is required"),d.size.trim()?(isNaN(Number(d.size))||Number(d.size)<=0)&&(w.size="Size must be a positive number"):w.size="Size is required",d.price.trim()?(isNaN(Number(d.price))||Number(d.price)<=0)&&(w.price="Price must be a positive number"):w.price="Price is required",d.type||(w.type="Type is required"),b(w),Object.keys(w).length===0},x=async w=>{if(w.preventDefault(),!j()){i({title:"Validation Error",description:"Please fix the errors in the form.",variant:"destructive"});return}c(!0);try{const k={name:d.name.trim(),location:d.location.trim(),size:Number(d.size),price:Number(d.price),type:d.type,status:d.status,description:d.description.trim(),amenities:d.amenities,zoning:d.zoning.trim(),utilities:d.utilities.trim(),access:d.access.trim(),soilType:d.soilType.trim(),waterRights:d.waterRights.trim(),restrictions:d.restrictions.trim()};l&&s?(await n(s,k),i({title:"Success",description:"Land parcel updated successfully."})):(await r(k),i({title:"Success",description:"Land parcel added successfully."})),t("/land")}catch{i({title:"Error",description:`Failed to ${l?"update":"add"} land parcel.`,variant:"destructive"})}finally{c(!1)}},f=(w,k)=>{u(T=>({...T,[w]:k})),p[w]&&b(T=>({...T,[w]:""}))},g=()=>{m.trim()&&!d.amenities.includes(m.trim())&&(u(w=>({...w,amenities:[...w.amenities,m.trim()]})),h(""))},v=w=>{u(k=>({...k,amenities:k.amenities.filter(T=>T!==w)}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(Dr,{to:"/land",children:[e.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:l?"Edit Land Parcel":"Add New Land Parcel"}),e.jsx("p",{className:"text-muted-foreground",children:l?"Update land parcel information":"Add a new land parcel to your inventory"})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Basic Information"}),e.jsx(Ee,{children:"Essential details about the land parcel"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Name *"}),e.jsx(ge,{id:"name",value:d.name,onChange:w=>f("name",w.target.value),placeholder:"e.g., Sunset Ridge Parcel A"}),p.name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p.name})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"location",children:"Location *"}),e.jsx(ge,{id:"location",value:d.location,onChange:w=>f("location",w.target.value),placeholder:"e.g., 123 Main St, City, State"}),p.location&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p.location})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"size",children:"Size (acres) *"}),e.jsx(ge,{id:"size",type:"number",step:"0.1",value:d.size,onChange:w=>f("size",w.target.value),placeholder:"2.5"}),p.size&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p.size})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"price",children:"Price ($) *"}),e.jsx(ge,{id:"price",type:"number",value:d.price,onChange:w=>f("price",w.target.value),placeholder:"125000"}),p.price&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p.price})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Type *"}),e.jsxs(Be,{value:d.type,onValueChange:w=>f("type",w),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select type"})}),e.jsxs($e,{children:[e.jsx(J,{value:"Residential",children:"Residential"}),e.jsx(J,{value:"Commercial",children:"Commercial"}),e.jsx(J,{value:"Agricultural",children:"Agricultural"}),e.jsx(J,{value:"Industrial",children:"Industrial"}),e.jsx(J,{value:"Recreational",children:"Recreational"}),e.jsx(J,{value:"Mixed Use",children:"Mixed Use"})]})]}),p.type&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p.type})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:d.status,onValueChange:w=>f("status",w),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"available",children:"Available"}),e.jsx(J,{value:"pending",children:"Pending"}),e.jsx(J,{value:"sold",children:"Sold"}),e.jsx(J,{value:"reserved",children:"Reserved"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(kt,{id:"description",value:d.description,onChange:w=>f("description",w.target.value),placeholder:"Describe the land parcel...",rows:3})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Additional Details"}),e.jsx(Ee,{children:"Detailed information about the land"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"zoning",children:"Zoning"}),e.jsx(ge,{id:"zoning",value:d.zoning,onChange:w=>f("zoning",w.target.value),placeholder:"e.g., R-1, C-2, A-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"utilities",children:"Utilities"}),e.jsx(ge,{id:"utilities",value:d.utilities,onChange:w=>f("utilities",w.target.value),placeholder:"e.g., Electric, Water, Sewer"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"access",children:"Access"}),e.jsx(ge,{id:"access",value:d.access,onChange:w=>f("access",w.target.value),placeholder:"e.g., Paved road, Gravel road"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"soilType",children:"Soil Type"}),e.jsx(ge,{id:"soilType",value:d.soilType,onChange:w=>f("soilType",w.target.value),placeholder:"e.g., Clay, Sandy, Loam"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"waterRights",children:"Water Rights"}),e.jsx(ge,{id:"waterRights",value:d.waterRights,onChange:w=>f("waterRights",w.target.value),placeholder:"e.g., Well rights, Creek access"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"restrictions",children:"Restrictions"}),e.jsx(kt,{id:"restrictions",value:d.restrictions,onChange:w=>f("restrictions",w.target.value),placeholder:"Any restrictions or covenants...",rows:2})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Amenities"}),e.jsx(Ee,{children:"Add features and amenities of the land parcel"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{value:m,onChange:w=>h(w.target.value),placeholder:"Add an amenity...",onKeyPress:w=>w.key==="Enter"&&(w.preventDefault(),g())}),e.jsx(H,{type:"button",onClick:g,children:e.jsx(tt,{className:"h-4 w-4"})})]}),d.amenities.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:d.amenities.map((w,k)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-secondary px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-sm",children:w}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(w),className:"h-4 w-4 p-0 hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(St,{className:"h-3 w-3"})})]},k))})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>t("/land"),children:"Cancel"}),e.jsx(H,{type:"submit",disabled:o,children:o?"Saving...":l?"Update Land Parcel":"Add Land Parcel"})]})]})]})}function GB(){const{id:t}=Yh(),s=Zn(),{getLandById:r,deleteLand:n}=Bg(),{toast:a}=xt(),i=t?r(t):null;if(!i)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(Dr,{to:"/land",children:[e.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Land parcel not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The requested land parcel could not be found."}),e.jsx(H,{asChild:!0,children:e.jsx(Dr,{to:"/land",children:"Back to Dashboard"})})]})})})]});const l=async()=>{if(window.confirm(`Are you sure you want to delete "${i.name}"?`))try{await n(i.id),a({title:"Success",description:`${i.name} has been deleted successfully.`}),s("/land")}catch{a({title:"Error",description:"Failed to delete land parcel.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(Dr,{to:"/land",children:[e.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.name}),e.jsx(Ae,{variant:i.status==="available"?"default":i.status==="pending"?"secondary":i.status==="sold"?"destructive":"outline",children:i.status})]}),e.jsxs("p",{className:"text-muted-foreground flex items-center",children:[e.jsx(ur,{className:"mr-1 h-4 w-4"}),i.location]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{variant:"outline",asChild:!0,children:e.jsxs(Dr,{to:`/land/edit/${i.id}`,children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(H,{variant:"destructive",onClick:l,children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Overview"})}),e.jsx(te,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Size"}),e.jsx("p",{className:"text-2xl font-bold",children:i.size}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"acres"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",i.price.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"total"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Per Acre"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",Math.round(i.price/i.size).toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"per acre"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-2xl font-bold",children:i.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"category"})]})]})})]}),i.description&&e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Description"})}),e.jsx(te,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.description})})]}),i.amenities&&i.amenities.length>0&&e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Amenities & Features"})}),e.jsx(te,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:i.amenities.map((o,c)=>e.jsx(Ae,{variant:"outline",children:o},c))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Additional Details"})}),e.jsxs(te,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.zoning&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Zoning"}),e.jsx("p",{children:i.zoning})]}),i.utilities&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Utilities"}),e.jsx("p",{children:i.utilities})]}),i.access&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Access"}),e.jsx("p",{children:i.access})]}),i.soilType&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Soil Type"}),e.jsx("p",{children:i.soilType})]}),i.waterRights&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Water Rights"}),e.jsx("p",{children:i.waterRights})]})]}),i.restrictions&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Restrictions"}),e.jsx("p",{className:"text-muted-foreground",children:i.restrictions})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Quick Actions"})}),e.jsxs(te,{className:"space-y-3",children:[e.jsx(H,{className:"w-full",asChild:!0,children:e.jsxs(Dr,{to:`/land/edit/${i.id}`,children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),"Edit Details"]})}),e.jsxs(H,{variant:"outline",className:"w-full",children:[e.jsx(wt,{className:"mr-2 h-4 w-4"}),"Generate Quote"]}),e.jsxs(H,{variant:"outline",className:"w-full",children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Schedule Viewing"]}),e.jsxs(H,{variant:"destructive",className:"w-full",onClick:l,children:[e.jsx(js,{className:"mr-2 h-4 w-4"}),"Delete Parcel"]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Timeline"})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Land Added"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(i.createdAt).toLocaleDateString()})]})]}),i.updatedAt&&i.updatedAt!==i.createdAt&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"h-2 w-2 bg-muted rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(i.updatedAt).toLocaleDateString()})]})]})]})})]})]})]})]})}function KB(){return e.jsx("div",{className:"space-y-6",children:e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(HB,{})}),e.jsx(ot,{path:"/list",element:e.jsx(WB,{})}),e.jsx(ot,{path:"/new",element:e.jsx(q5,{})}),e.jsx(ot,{path:"/edit/:id",element:e.jsx(q5,{})}),e.jsx(ot,{path:"/detail/:id",element:e.jsx(GB,{})})]})})}const YB=[{id:"1",customerId:"cust-1",vehicleId:"veh-1",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:_a.SENT,validUntil:new Date("2024-02-15"),notes:"Customer interested in financing options",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-16")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",items:[{id:"3",description:"2023 Winnebago View",quantity:1,unitPrice:89e3,total:89e3}],subtotal:89e3,tax:7120,total:96120,status:_a.ACCEPTED,validUntil:new Date("2024-02-20"),notes:"Ready to proceed with purchase",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}];function QB({quote:t,onClose:s,onEdit:r}){const n=a=>{switch(a){case"draft":return"bg-gray-50 text-gray-700 border-gray-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"viewed":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"accepted":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"expired":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:["Quote #",t.id]}),e.jsx(Ee,{children:"Quote details and line items"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>r(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Quote"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer ID"}),e.jsx("p",{className:"font-medium",children:t.customerId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Ae,{className:Ge("ri-badge-status",n(t.status)),children:t.status.toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"font-medium",children:nt(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Valid Until"}),e.jsx("p",{className:"font-medium",children:nt(t.validUntil)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Line Items"}),e.jsx("div",{className:"space-y-3",children:t.items.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:a.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity," × ",De(a.unitPrice)]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-lg",children:De(a.total)})})]},a.id))})]}),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:De(t.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:De(t.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:De(t.total)})]})]})}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm",children:t.notes})})]})]})]})})}function H5(){const{toast:t}=xt(),{createTask:s}=ed(),[r,n]=y.useState(YB),[a,i]=y.useState(""),[l,o]=y.useState("all"),[c,d]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(null),[b,j]=y.useState(""),[x,f]=y.useState(!1),[g,v]=y.useState(void 0),w=R=>{switch(R){case _a.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case _a.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case _a.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case _a.ACCEPTED:return"bg-green-50 text-green-700 border-green-200";case _a.REJECTED:return"bg-red-50 text-red-700 border-red-200";case _a.EXPIRED:return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},k=r.filter(R=>{const $=R.id.toLowerCase().includes(a.toLowerCase())||R.customerId.toLowerCase().includes(a.toLowerCase()),U=l==="all"||R.status===l;return $&&U}),T=()=>{m(null),j(""),d(!0)},S=R=>{m(R),j(R.customerId),d(!0)},C=R=>{p(R)},E=()=>p(null),M=async R=>{try{if(u)n($=>$.map(U=>U.id===u.id?{...U,...R,updatedAt:new Date}:U)),t({title:"Success",description:"Quote updated successfully"});else{const $={id:Math.random().toString(36).substr(2,9),...R,status:_a.DRAFT,createdAt:new Date,updatedAt:new Date};n(U=>[...U,$]),t({title:"Success",description:"Quote created successfully"})}d(!1),m(null)}catch{t({title:"Error",description:"Failed to save quote",variant:"destructive"})}},D=async R=>{try{n($=>$.map(U=>U.id===R?{...U,status:_a.SENT,updatedAt:new Date}:U)),t({title:"Success",description:"Quote sent to customer"})}catch{t({title:"Error",description:"Failed to send quote",variant:"destructive"})}},A=async R=>{try{const $=r.find(U=>U.id===R);if($){const U={...$,id:Math.random().toString(36).substr(2,9),status:_a.DRAFT,createdAt:new Date,updatedAt:new Date};n(W=>[...W,U]),t({title:"Success",description:"Quote duplicated successfully"})}}catch{t({title:"Error",description:"Failed to duplicate quote",variant:"destructive"})}},I=async R=>{if(window.confirm("Are you sure you want to delete this quote?"))try{n($=>$.filter(U=>U.id!==R)),t({title:"Success",description:"Quote deleted successfully"})}catch{t({title:"Error",description:"Failed to delete quote",variant:"destructive"})}},L=async R=>{try{await s(R),f(!1),v(void 0),t({title:"Task Created",description:"Task has been created successfully"})}catch{t({title:"Error",description:"Failed to create task",variant:"destructive"})}},F=R=>{const $=new Date(R.validUntil),U=Math.ceil(($.getTime()-Date.now())/(1e3*60*60*24)),W=U<=3?es.HIGH:U<=7?es.MEDIUM:es.LOW;v({sourceId:R.id,sourceType:"quote",module:er.QUOTE,title:`Follow up on quote #${R.id}`,description:`Quote total: ${De(R.total)}, Status: ${R.status}`,priority:W,dueDate:$,link:"/quotes",customFields:{quoteTotal:R.total,customerId:R.customerId,quoteStatus:R.status}}),f(!0)},B={total:r.length,draft:r.filter(R=>R.status==="draft").length,sent:r.filter(R=>R.status==="sent").length,accepted:r.filter(R=>R.status==="accepted").length,totalValue:r.reduce((R,$)=>R+$.total,0),acceptedValue:r.filter(R=>R.status==="accepted").reduce((R,$)=>R+$.total,0)};return e.jsxs("div",{className:"space-y-8",children:[x&&e.jsx(Xc,{initialData:g,onSave:L,onCancel:()=>{f(!1),v(void 0)}}),c&&e.jsx(EP,{quote:u,customerId:b,onSave:M,onCancel:()=>{d(!1),m(null)}}),h&&e.jsx(QB,{quote:h,onClose:E,onEdit:S}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Quote Builder"}),e.jsx("p",{className:"ri-page-description",children:"Create and manage customer quotes with advanced pricing rules"})]}),e.jsxs(H,{className:"shadow-sm",onClick:T,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Quote"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Quotes"}),e.jsx(Bt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:B.total}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"All quotes"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),e.jsx(Bt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:B.sent}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Awaiting response"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Accepted"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:B.accepted}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),B.total>0?Math.round(B.accepted/B.total*100):0,"% acceptance rate"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Quote Value"}),e.jsx(wt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(B.totalValue)}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(wt,{className:"h-3 w-3 mr-1"}),De(B.acceptedValue)," accepted"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search quotes...",value:a,onChange:R=>i(R.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:l,onValueChange:o,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:"draft",children:"Draft"}),e.jsx(J,{value:"sent",children:"Sent"}),e.jsx(J,{value:"viewed",children:"Viewed"}),e.jsx(J,{value:"accepted",children:"Accepted"}),e.jsx(J,{value:"rejected",children:"Rejected"}),e.jsx(J,{value:"expired",children:"Expired"})]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"text-xl",children:["Quotes (",k.length,")"]}),e.jsx(Ee,{children:"Manage customer quotes with advanced pricing and bundling"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[k.map(R=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Quote #",R.id]}),e.jsx(Ae,{className:Ge("ri-badge-status",w(R.status)),children:R.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Customer:"})," ",R.customerId]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total:"}),e.jsx("span",{className:"font-bold text-primary ml-1",children:De(R.total)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",nt(R.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Valid Until:"})," ",nt(R.validUntil)]})]}),e.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.items.length," item(s)"]}),R.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>C(R),children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>S(R),children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Edit"]}),R.status==="draft"&&e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(R.id),children:[e.jsx(va,{className:"h-3 w-3 mr-1"}),"Send"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(R.id),children:[e.jsx(Mu,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>F(R),children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),"Task"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>I(R.id),children:e.jsx(js,{className:"h-3 w-3"})})]})]},R.id)),k.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No quotes found"}),e.jsx("p",{className:"text-sm",children:"Create your first quote to get started"})]})]})})]})]})}function ZB(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(H5,{})}),e.jsx(ot,{path:"/*",element:e.jsx(H5,{})})]})}const JB=[{id:"loan-001",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-001",vehicleInfo:"2020 Forest River Cherokee 274RK",loanAmount:45e3,downPayment:5e3,interestRate:7.25,termMonths:60,monthlyPayment:895.5,startDate:"2023-06-15T00:00:00Z",status:oa.CURRENT,remainingBalance:38750,nextPaymentDate:"2024-02-15T00:00:00Z",totalPaid:11250,paymentsRemaining:43,history:[{id:"hist-001",timestamp:"2024-01-15T08:30:00Z",type:yl.PAYMENT,amount:895.5,principalAmount:645.3,interestAmount:250.2,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240115-001",status:"completed"},{id:"hist-002",timestamp:"2023-12-15T08:30:00Z",type:yl.PAYMENT,amount:895.5,principalAmount:641.85,interestAmount:253.65,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20231215-001",status:"completed"},{id:"hist-003",timestamp:"2023-06-15T10:00:00Z",type:yl.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"Your RV loan is current and in good standing. Automatic payments are set up for the 15th of each month.",createdAt:"2023-06-10T14:30:00Z",updatedAt:"2024-01-15T09:20:00Z"},{id:"loan-002",customerId:"portal-customer-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"vh-002",vehicleInfo:"2019 Keystone Montana 3761FL",loanAmount:62e3,downPayment:8e3,interestRate:6.5,termMonths:72,monthlyPayment:1025.75,startDate:"2023-03-01T00:00:00Z",status:oa.CURRENT,remainingBalance:51200,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:18900,paymentsRemaining:61,history:[{id:"hist-004",timestamp:"2024-01-01T08:30:00Z",type:yl.PAYMENT,amount:1025.75,principalAmount:692.4,interestAmount:333.35,description:"Monthly payment processed",paymentMethod:"Check",transactionId:"CHK-20240101-002",status:"completed"},{id:"hist-005",timestamp:"2023-03-01T10:00:00Z",type:yl.STATUS_CHANGE,description:"Loan originated and activated",status:"active"}],isPortalVisible:!0,portalNotes:"This is your second RV loan with us. Thank you for your continued business!",createdAt:"2023-02-25T11:15:00Z",updatedAt:"2024-01-01T16:45:00Z"},{id:"loan-003",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"vh-003",vehicleInfo:"2021 Grand Design Solitude 310GK",loanAmount:55e3,downPayment:7e3,interestRate:7,termMonths:60,monthlyPayment:1089.25,startDate:"2023-08-01T00:00:00Z",status:oa.CURRENT,remainingBalance:47500,nextPaymentDate:"2024-02-01T00:00:00Z",totalPaid:6535.5,paymentsRemaining:54,history:[{id:"hist-006",timestamp:"2024-01-01T08:30:00Z",type:yl.PAYMENT,amount:1089.25,principalAmount:767.5,interestAmount:321.75,description:"Monthly payment processed",paymentMethod:"ACH",transactionId:"TXN-20240101-003",status:"completed"}],isPortalVisible:!1,createdAt:"2023-07-25T09:00:00Z",updatedAt:"2024-01-01T08:30:00Z"}];function DP(){const[t,s]=y.useState([]);y.useEffect(()=>{const u=xs("loans",JB);s(u)},[]),y.useEffect(()=>{Xt("loans",t)},[t]);const r=u=>{const m={id:`loan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerId:u.customerId||"",customerName:u.customerName||"",customerEmail:u.customerEmail||"",customerPhone:u.customerPhone||"",vehicleId:u.vehicleId||"",vehicleInfo:u.vehicleInfo||"",loanAmount:u.loanAmount||0,downPayment:u.downPayment||0,interestRate:u.interestRate||0,termMonths:u.termMonths||60,monthlyPayment:u.monthlyPayment||0,startDate:u.startDate||new Date().toISOString(),status:u.status||oa.ACTIVE,remainingBalance:u.remainingBalance||u.loanAmount||0,nextPaymentDate:u.nextPaymentDate||new Date().toISOString(),totalPaid:u.totalPaid||0,paymentsRemaining:u.paymentsRemaining||u.termMonths||60,history:u.history||[],isPortalVisible:u.isPortalVisible||!1,portalNotes:u.portalNotes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return s(h=>[m,...h]),m},n=(u,m)=>{s(h=>h.map(p=>p.id===u?{...p,...m,updatedAt:new Date().toISOString()}:p))},a=u=>{s(m=>m.filter(h=>h.id!==u))},i=u=>t.find(m=>m.id===u),l=u=>t.filter(m=>m.customerId===u),o=u=>t.filter(m=>m.customerId===u&&m.isPortalVisible),c=(u,m)=>{const h=i(u);if(!h)return;const p={id:`hist-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),...m};n(u,{history:[p,...h.history]})};return{loans:t,createLoan:r,updateLoan:n,deleteLoan:a,getLoanById:i,getLoansByCustomer:l,getPortalLoansByCustomer:o,addLoanHistoryEntry:c,makePayment:(u,m,h="Online")=>{const p=i(u);if(!p)return;const b=p.remainingBalance*(p.interestRate/100)/12,j=Math.max(0,m-b),x=Math.min(m,b),f=Math.max(0,p.remainingBalance-j),g=p.totalPaid+m,v=Math.max(0,p.paymentsRemaining-1);c(u,{type:yl.PAYMENT,amount:m,principalAmount:j,interestAmount:x,description:`Payment processed via ${h}`,paymentMethod:h,transactionId:`TXN-${Date.now()}`,status:"completed"}),n(u,{remainingBalance:f,totalPaid:g,paymentsRemaining:v,status:f===0?oa.PAID_OFF:p.status,nextPaymentDate:f>0?new Date(Date.now()+30*24*60*60*1e3).toISOString():p.nextPaymentDate}),f===0&&c(u,{type:yl.PAYOFF,description:"Loan paid in full",status:"paid_off"})}}}function XB({loan:t,onClose:s,onSuccess:r}){const{createLoan:n,updateLoan:a}=DP(),{toast:i}=xt(),[l,o]=y.useState(!1),[c,d]=y.useState({customerId:(t==null?void 0:t.customerId)||"",customerName:(t==null?void 0:t.customerName)||"",customerEmail:(t==null?void 0:t.customerEmail)||"",customerPhone:(t==null?void 0:t.customerPhone)||"",vehicleId:(t==null?void 0:t.vehicleId)||"",vehicleInfo:(t==null?void 0:t.vehicleInfo)||"",loanAmount:(t==null?void 0:t.loanAmount)||0,downPayment:(t==null?void 0:t.downPayment)||0,interestRate:(t==null?void 0:t.interestRate)||7.25,termMonths:(t==null?void 0:t.termMonths)||60,startDate:t!=null&&t.startDate?t.startDate.split("T")[0]:new Date().toISOString().split("T")[0],status:(t==null?void 0:t.status)||oa.ACTIVE,isPortalVisible:(t==null?void 0:t.isPortalVisible)||!1,portalNotes:(t==null?void 0:t.portalNotes)||""}),m=(()=>{const p=c.loanAmount-c.downPayment,b=c.interestRate/100/12,j=c.termMonths;return b===0?p/j:p*(b*Math.pow(1+b,j))/(Math.pow(1+b,j)-1)})(),h=async p=>{p.preventDefault(),o(!0);try{const b={...c,monthlyPayment:m,remainingBalance:c.loanAmount-c.downPayment,nextPaymentDate:new Date(Date.now()+2592e6).toISOString(),totalPaid:0,paymentsRemaining:c.termMonths,history:[]};let j;t?(a(t.id,b),j={...t,...b}):j=n(b),i({title:t?"Loan Updated":"Loan Created",description:`Loan has been ${t?"updated":"created"} successfully.`}),r==null||r(j),s()}catch{i({title:"Error",description:`Failed to ${t?"update":"create"} loan.`,variant:"destructive"})}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),t?"Edit Loan":"Create New Loan"]}),e.jsx(Ee,{children:t?"Update loan details and settings":"Enter loan information and configure portal visibility"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer ID"}),e.jsx(ge,{id:"customerId",value:c.customerId,onChange:p=>d({...c,customerId:p.target.value}),placeholder:"Enter customer ID",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(ge,{id:"customerName",value:c.customerName,onChange:p=>d({...c,customerName:p.target.value}),placeholder:"Enter customer name",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerEmail",children:"Email"}),e.jsx(ge,{id:"customerEmail",type:"email",value:c.customerEmail,onChange:p=>d({...c,customerEmail:p.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerPhone",children:"Phone"}),e.jsx(ge,{id:"customerPhone",type:"tel",value:c.customerPhone,onChange:p=>d({...c,customerPhone:p.target.value}),placeholder:"Enter phone number"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle ID"}),e.jsx(ge,{id:"vehicleId",value:c.vehicleId,onChange:p=>d({...c,vehicleId:p.target.value}),placeholder:"Enter vehicle ID"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicleInfo",children:"Vehicle Description"}),e.jsx(ge,{id:"vehicleInfo",value:c.vehicleInfo,onChange:p=>d({...c,vehicleInfo:p.target.value}),placeholder:"e.g., 2023 Forest River Cherokee 274RK"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Loan Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"loanAmount",children:"Loan Amount"}),e.jsx(ge,{id:"loanAmount",type:"number",step:"0.01",value:c.loanAmount,onChange:p=>d({...c,loanAmount:parseFloat(p.target.value)||0}),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"downPayment",children:"Down Payment"}),e.jsx(ge,{id:"downPayment",type:"number",step:"0.01",value:c.downPayment,onChange:p=>d({...c,downPayment:parseFloat(p.target.value)||0}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"interestRate",children:"Interest Rate (%)"}),e.jsx(ge,{id:"interestRate",type:"number",step:"0.01",value:c.interestRate,onChange:p=>d({...c,interestRate:parseFloat(p.target.value)||0}),placeholder:"7.25",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"termMonths",children:"Term (Months)"}),e.jsxs(Be,{value:c.termMonths.toString(),onValueChange:p=>d({...c,termMonths:parseInt(p)}),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"12",children:"12 months"}),e.jsx(J,{value:"24",children:"24 months"}),e.jsx(J,{value:"36",children:"36 months"}),e.jsx(J,{value:"48",children:"48 months"}),e.jsx(J,{value:"60",children:"60 months"}),e.jsx(J,{value:"72",children:"72 months"}),e.jsx(J,{value:"84",children:"84 months"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),e.jsx(ge,{id:"startDate",type:"date",value:c.startDate,onChange:p=>d({...c,startDate:p.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:c.status,onValueChange:p=>d({...c,status:p}),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:oa.ACTIVE,children:"Active"}),e.jsx(J,{value:oa.CURRENT,children:"Current"}),e.jsx(J,{value:oa.LATE,children:"Late"}),e.jsx(J,{value:oa.DEFAULT,children:"Default"}),e.jsx(J,{value:oa.PAID_OFF,children:"Paid Off"}),e.jsx(J,{value:oa.CANCELLED,children:"Cancelled"})]})]})]})]}),e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Calculated Monthly Payment:"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:De(m)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portal Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"isPortalVisible",checked:c.isPortalVisible,onCheckedChange:p=>d({...c,isPortalVisible:!!p,portalNotes:p?c.portalNotes:""})}),e.jsx(Z,{htmlFor:"isPortalVisible",className:"font-medium",children:"Make this loan visible in customer portal"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, customers can view this loan, payment history, and make payments through the portal."}),c.isPortalVisible&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"portalNotes",children:"Portal Notes (Optional)"}),e.jsx(kt,{id:"portalNotes",value:c.portalNotes,onChange:p=>d({...c,portalNotes:p.target.value}),placeholder:"Add any notes or messages that will be visible to the customer in the portal...",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"These notes will be displayed to the customer when they view this loan in the portal."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update Loan":"Create Loan"]})})]})]})})]})})}function ez({schedule:t}){const[s,r]=y.useState(Os.calculatorDefaults.loanAmount),[n,a]=y.useState(Os.calculatorDefaults.interestRate),[i,l]=y.useState(Os.calculatorDefaults.termMonths),[o,c]=y.useState("asc"),[d,u]=y.useState(""),[m,h]=y.useState("month"),[p,b]=y.useState(1),j=12,f=[...t.filter(S=>S.month.toString().includes(d))].sort((S,C)=>{const E=S[m],M=C[m];return o==="asc"?E>M?1:-1:E<M?1:-1}),g=Math.ceil(f.length/j),v=(p-1)*j,w=f.slice(v,v+j),k=S=>{m===S?c(o==="asc"?"desc":"asc"):(h(S),c("asc"))},T=S=>{b(S)};return t.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No amortization schedule available. Please calculate a loan first."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(gs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by month...",value:d,onChange:S=>{u(S.target.value),b(1)},className:"pl-10"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",v+1,"-",Math.min(v+j,f.length)," of ",f.length," payments"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("month"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Month"}),m==="month"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("payment"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Payment"}),m==="payment"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("principal"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Principal"}),m==="principal"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("interest"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Interest"}),m==="interest"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Additional"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("balance"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Balance"}),m==="balance"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground cursor-pointer hover:bg-muted/80",onClick:()=>k("totalInterestPaid"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Total Interest"}),m==="totalInterestPaid"&&(o==="asc"?e.jsx(uo,{className:"ml-1 h-3 w-3"}):e.jsx(co,{className:"ml-1 h-3 w-3"}))]})})]})}),e.jsx("tbody",{children:w.map((S,C)=>e.jsxs("tr",{className:C%2===0?"bg-muted/20":"",children:[e.jsx("td",{className:"p-3",children:S.month}),e.jsx("td",{className:"p-3",children:De(S.payment)}),e.jsx("td",{className:"p-3",children:De(S.principal)}),e.jsx("td",{className:"p-3",children:De(S.interest)}),e.jsx("td",{className:"p-3",children:De(S.additionalCosts)}),e.jsx("td",{className:"p-3",children:De(S.balance)}),e.jsx("td",{className:"p-3",children:De(S.totalInterestPaid)})]},S.month))})]})}),g>1&&e.jsxs("div",{className:"flex justify-center space-x-2 mt-4",children:[e.jsx(H,{variant:"outline",size:"sm",onClick:()=>T(1),disabled:p===1,children:"First"}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>T(p-1),disabled:p===1,children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,g)},(S,C)=>{let E;return g<=5||p<=3?E=C+1:p>=g-2?E=g-4+C:E=p-2+C,e.jsx(H,{variant:p===E?"default":"outline",size:"sm",onClick:()=>T(E),children:E},E)})}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>T(p+1),disabled:p===g,children:"Next"}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>T(g),disabled:p===g,children:"Last"})]})]})}function tz({initialValues:t,onSave:s,onClose:r}){const{toast:n}=xt(),[a,i]=y.useState((t==null?void 0:t.loanAmount)||Os.defaultLoan.amount),[l,o]=y.useState((t==null?void 0:t.downPayment)||Os.defaultLoan.downPayment),[c,d]=y.useState((t==null?void 0:t.interestRate)||Os.defaultLoan.rate),[u,m]=y.useState((t==null?void 0:t.loanTerm)||Os.defaultLoan.termMonths),[h,p]=y.useState(Os.paymentFrequencies[0]),[b,j]=y.useState(!1),[x,f]=y.useState(0),[g,v]=y.useState(!1),[w,k]=y.useState(0),[T,S]=y.useState(Os.calculatorDefaults.termMonths),[C,E]=y.useState(0),[M,D]=y.useState(0),[A,I]=y.useState(0),[L,F]=y.useState([]),[B,R]=y.useState("calculator");y.useEffect(()=>{$()},[a,l,c,u,h,b,x,g,w]);const $=()=>{const V=a-l;if(V<=0){E(0),D(0),I(0),F([]);return}const Q=c/100/12,G=V*Q/(1-Math.pow(1+Q,-u));let Y=0;b&&(Y+=x),g&&(Y+=G*(w/100));let ne=1;switch(h){case"biweekly":ne=12/26;break;case"weekly":ne=12/52;break;default:ne=1;break}const le=G*ne+Y*ne,oe=u,pe=G*oe-V,je=V+pe+Y*oe,we=U(V,Q,u,G,Y);E(le),D(pe),I(je),F(we)},U=(V,Q,G,Y,ne)=>{let le=V,oe=0;const pe=[];for(let je=1;je<=G;je++){const we=le*Q;let Re=Y-we;if(Re>le&&(Re=le),le-=Re,oe+=we,pe.push({month:je,payment:Y+ne,principal:Re,interest:we,additionalCosts:ne,balance:le,totalInterestPaid:oe}),le<=0)break}return pe},W=()=>{s&&s({loanAmount:a,downPayment:l,interestRate:c,loanTerm:u,paymentFrequency:h,includeInsurance:b,insuranceAmount:x,includeTax:g,taxRate:w,monthlyPayment:C,totalInterest:M,totalCost:A,amortizationSchedule:L}),n({title:"Loan Calculation Saved",description:"Your loan calculation has been saved successfully."})},q=()=>{window.print()},_=()=>{const Q=[["Month","Payment","Principal","Interest","Additional Costs","Balance","Total Interest Paid"].join(","),...L.map(le=>[le.month,le.payment.toFixed(2),le.principal.toFixed(2),le.interest.toFixed(2),le.additionalCosts.toFixed(2),le.balance.toFixed(2),le.totalInterestPaid.toFixed(2)].join(","))].join(`
`),G=new Blob([Q],{type:"text/csv;charset=utf-8;"}),Y=URL.createObjectURL(G),ne=document.createElement("a");ne.href=Y,ne.setAttribute("download","amortization_schedule.csv"),document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),n({title:"Export Successful",description:"Amortization schedule exported to CSV."})};return e.jsx("div",{className:"space-y-6",children:e.jsxs(ms,{value:B,onValueChange:R,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-2",children:[e.jsx(Ye,{value:"calculator",children:"Calculator"}),e.jsx(Ye,{value:"amortization",children:"Amortization Schedule"})]}),e.jsxs(Je,{value:"calculator",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Mc,{className:"h-5 w-5 mr-2 text-primary"}),"Loan Details"]}),e.jsx(Ee,{children:"Enter the details of your loan"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"loanAmount",children:"Vehicle Price"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"loanAmount",type:"number",value:a,onChange:V=>i(parseFloat(V.target.value)||0),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"downPayment",children:"Down Payment"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"downPayment",type:"number",value:l,onChange:V=>o(parseFloat(V.target.value)||0),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"interestRate",children:"Interest Rate (%)"}),e.jsxs(Be,{value:c.toString(),onValueChange:V=>d(parseFloat(V)),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:Os.interestRates.map(V=>e.jsxs(J,{value:V.toString(),children:[V,"%"]},V))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"loanTerm",children:"Loan Term (months)"}),e.jsxs(Be,{value:u.toString(),onValueChange:V=>m(parseInt(V)),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:Os.termOptions.map(V=>e.jsxs(J,{value:V.toString(),children:[V," months"]},V))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"paymentFrequency",children:"Payment Frequency"}),e.jsxs(Be,{value:h,onValueChange:p,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:Os.paymentFrequencies.map(V=>e.jsx(J,{value:V,children:V},V))})]})]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-primary"}),"Additional Costs"]}),e.jsx(Ee,{children:"Include additional costs in your calculation"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"includeInsurance",checked:b,onCheckedChange:V=>j(!!V)}),e.jsx(Z,{htmlFor:"includeInsurance",children:"Include Insurance"})]}),b&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"insuranceAmount",children:"Monthly Insurance Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"insuranceAmount",type:"number",value:x,onChange:V=>f(parseFloat(V.target.value)||0),className:"pl-10"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"includeTax",checked:g,onCheckedChange:V=>v(!!V)}),e.jsx(Z,{htmlFor:"includeTax",children:"Include Tax"})]}),g&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(ge,{id:"taxRate",type:"number",step:"0.01",value:w,onChange:V=>k(parseFloat(V.target.value)||0)})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Loan Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Principal Amount:"}),e.jsx("span",{className:"font-medium",children:De(a-l)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-muted-foreground",children:[h==="monthly"?"Monthly":h==="biweekly"?"Bi-weekly":"Weekly"," Payment:"]}),e.jsx("span",{className:"font-bold text-primary",children:De(C)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Interest:"}),e.jsx("span",{className:"font-medium",children:De(M)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Cost:"}),e.jsx("span",{className:"font-medium",children:De(A)})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[r&&e.jsx(H,{variant:"outline",onClick:r,children:"Close"}),e.jsxs(H,{variant:"outline",onClick:()=>R("amortization"),children:[e.jsx(Zt,{className:"h-4 w-4 mr-2"}),"View Amortization"]}),s&&e.jsx(H,{onClick:W,children:"Save Calculation"})]})]}),e.jsxs(Je,{value:"amortization",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Zt,{className:"h-5 w-5 mr-2 text-primary"}),"Amortization Schedule"]}),e.jsx(Ee,{children:"Detailed payment schedule over the life of the loan"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:q,children:[e.jsx(wg,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),e.jsx(te,{children:e.jsx(ez,{schedule:L})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsxs(H,{variant:"outline",onClick:()=>R("calculator"),children:[e.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Back to Calculator"]}),s&&e.jsx(H,{onClick:W,children:"Save Calculation"})]})]})]})})}function sz(){var D,A,I,L;const[t,s]=y.useState("loan"),[r,n]=y.useState(""),[a,i]=y.useState(null),[l,o]=y.useState(""),[c,d]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(!1),{settings:b,loading:j}=fP(),{toast:x}=xt(),[f,g]=y.useState(null);y.useEffect(()=>{i(null),n(""),m(null)},[t]),y.useEffect(()=>{b!=null&&b.payment?g({processor:b.payment.processor||"none",stripePublishableKey:b.payment.stripePublishableKey,paypalClientId:b.payment.paypalClientId,squareApplicationId:b.payment.squareApplicationId}):g({processor:"none"})},[b]);const v=async()=>{if(!r.trim()){m("Please enter a search term");return}d(!0),m(null);try{await new Promise(B=>setTimeout(B,1e3));const F=iB.find(B=>{var R;return B.customerName.toLowerCase().includes(r.toLowerCase())||B.accountNumber.includes(r)||t==="invoice"&&((R=B.invoiceNumber)==null?void 0:R.includes(r))});F?(i(F),t==="loan"&&F.monthlyPayment?o(F.monthlyPayment.toString()):t==="invoice"&&F.invoiceAmount&&o(F.invoiceAmount.toString())):(m(`No ${t} account found for "${r}"`),i(null))}catch{m("Failed to lookup account. Please try again.")}finally{d(!1)}},w=F=>{o(F.toString())},k=async F=>{if(!(f!=null&&f.stripePublishableKey))throw new Error("Stripe configuration missing. Please configure Stripe in platform settings.");return await new Promise(B=>setTimeout(B,2e3)),{success:!0,transactionId:`stripe_${Date.now()}`}},T=async F=>{if(!(f!=null&&f.paypalClientId))throw new Error("PayPal configuration missing. Please configure PayPal in platform settings.");return await new Promise(B=>setTimeout(B,2e3)),{success:!0,transactionId:`paypal_${Date.now()}`}},S=async F=>{if(!(f!=null&&f.squareApplicationId))throw new Error("Square configuration missing. Please configure Square in platform settings.");return await new Promise(B=>setTimeout(B,2e3)),{success:!0,transactionId:`square_${Date.now()}`}},C=async F=>{if(!f)throw new Error("Payment configuration not loaded");switch(f.processor){case"stripe":return await k();case"paypal":return await T();case"square":return await S();case"none":throw new Error("No payment processor configured. Please configure a payment processor in platform settings.");default:throw new Error(`Unsupported payment processor: ${f.processor}`)}},E=async()=>{if(!a||!l)return;const F=parseFloat(l);p(!0);try{const B=await C(F);B.success&&(x({title:"Payment Successful",description:`Payment of $${F} processed successfully for ${a.customerName}. Transaction ID: ${B.transactionId}`}),i(null),o(""),n(""))}catch(B){const R=B instanceof Error?B.message:"Payment failed. Please try again.";x({title:"Payment Failed",description:R,variant:"destructive"})}finally{p(!1)}},M=a&&l&&parseFloat(l)>0;return j?e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsx(ee,{children:e.jsx(te,{className:"p-6 text-center",children:"Loading payment configuration..."})})}):e.jsx("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(nn,{className:"w-5 h-5"}),e.jsx("span",{children:"Payment Terminal"})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Payment Processor:"})]}),e.jsx(Ae,{variant:(f==null?void 0:f.processor)==="none"?"destructive":"default",children:(f==null?void 0:f.processor)==="none"?"Not Configured":((D=f==null?void 0:f.processor)==null?void 0:D.toUpperCase())||"Loading..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"payment-type",children:"Payment Type"}),e.jsxs(Be,{value:t,onValueChange:F=>s(F),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"loan",children:"Loan Payment"}),e.jsx(J,{value:"invoice",children:"Invoice Payment"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"search",children:["Search by ",t==="loan"?"Customer Name or Account Number":"Customer Name or Invoice Number"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{id:"search",placeholder:t==="loan"?"Enter name or account number...":"Enter name or invoice number...",value:r,onChange:F=>n(F.target.value),onKeyPress:F=>F.key==="Enter"&&v()}),e.jsx(H,{onClick:v,disabled:c||!r.trim(),children:c?"Searching...":"Search"})]})]}),u&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 text-sm",children:[e.jsx(Ir,{className:"w-4 h-4"}),e.jsx("span",{children:u})]})]}),a&&e.jsx(ee,{className:"bg-green-50 border-green-200",children:e.jsxs(te,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Account Found"})]}),e.jsx(Ae,{variant:a.status==="active"?"default":"destructive",children:a.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("p",{className:"font-medium",children:a.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Account:"}),e.jsx("p",{className:"font-medium",children:a.accountNumber})]}),t==="loan"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Loan Balance:"}),e.jsxs("p",{className:"font-medium",children:["$",(A=a.loanAmount)==null?void 0:A.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Payment:"}),e.jsxs("p",{className:"font-medium",children:["$",(I=a.monthlyPayment)==null?void 0:I.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Next Due:"}),e.jsx("p",{className:"font-medium",children:a.nextDueDate})]})]}),t==="invoice"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Invoice #:"}),e.jsx("p",{className:"font-medium",children:a.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount Due:"}),e.jsxs("p",{className:"font-medium",children:["$",(L=a.invoiceAmount)==null?void 0:L.toLocaleString()]})]})]})]})]})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"amount",children:"Payment Amount"}),e.jsx(ge,{id:"amount",type:"number",placeholder:"0.00",value:l,onChange:F=>o(F.target.value),min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex space-x-2",children:[t==="loan"&&a.monthlyPayment&&e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>w(a.monthlyPayment),children:["Monthly Payment ($",a.monthlyPayment,")"]}),t==="invoice"&&a.invoiceAmount&&e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>w(a.invoiceAmount),children:["Full Amount ($",a.invoiceAmount,")"]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:E,className:"w-full",disabled:!M||h||(f==null?void 0:f.processor)==="none",size:"lg",children:h?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Processing..."})]}):`Process Payment - $${l}`}),(f==null?void 0:f.processor)==="none"&&e.jsx("p",{className:"text-sm text-red-600 text-center mt-2",children:"Payment processing is disabled. Please configure a payment processor in platform settings."})]})]})]})})}function rz(){const{toast:t}=xt(),[s,r]=y.useState("general"),[n,a]=y.useState(6.99),[i,l]=y.useState(84),[o,c]=y.useState(10),[d,u]=y.useState("monthly"),[m,h]=y.useState(!0),[p,b]=y.useState(12.99),[j,x]=y.useState(48),[f,g]=y.useState(20),[v,w]=y.useState(!0),[k,T]=y.useState(!0),[S,C]=y.useState(!0),[E,M]=y.useState(!0),[D,A]=y.useState(!0),[I,L]=y.useState(10),[F,B]=y.useState(25),[R,$]=y.useState("fixed"),[U,W]=y.useState(""),[q,_]=y.useState(!0),[V,Q]=y.useState(!0),[G,Y]=y.useState(!0),[ne,le]=y.useState(5),oe=()=>{t({title:"Settings Saved",description:"Your loan settings have been updated successfully."})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ms,{value:s,onValueChange:r,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-4",children:[e.jsx(Ye,{value:"general",children:"General"}),e.jsx(Ye,{value:"bhph",children:"Buy Here Pay Here"}),e.jsx(Ye,{value:"payments",children:"Payments"}),e.jsx(Ye,{value:"documents",children:"Documents"})]}),e.jsx(Je,{value:"general",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(wn,{className:"h-5 w-5 mr-2 text-primary"}),"General Loan Settings"]}),e.jsx(Ee,{children:"Configure default loan parameters and settings"})]}),e.jsx(te,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defaultInterestRate",children:"Default Interest Rate (%)"}),e.jsx(ge,{id:"defaultInterestRate",type:"number",step:"0.01",value:n,onChange:pe=>a(parseFloat(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for new loans"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"maxLoanTerm",children:"Maximum Loan Term (months)"}),e.jsx(ge,{id:"maxLoanTerm",type:"number",value:i,onChange:pe=>l(parseInt(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Longest allowed loan term in months"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"minDownPaymentPercent",children:"Minimum Down Payment (%)"}),e.jsx(ge,{id:"minDownPaymentPercent",type:"number",value:o,onChange:pe=>c(parseFloat(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum required down payment as percentage of vehicle price"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defaultPaymentFrequency",children:"Default Payment Frequency"}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"monthly",children:"Monthly"}),e.jsx(J,{value:"biweekly",children:"Bi-weekly"}),e.jsx(J,{value:"weekly",children:"Weekly"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard payment schedule for new loans"})]})]})})]})}),e.jsx(Je,{value:"bhph",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2 text-primary"}),"Buy Here Pay Here Settings"]}),e.jsx(Ee,{children:"Configure in-house financing options"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"bhphEnabled",checked:m,onCheckedChange:pe=>h(!!pe)}),e.jsx(Z,{htmlFor:"bhphEnabled",children:"Enable Buy Here Pay Here Financing"})]}),m&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"bhphInterestRate",children:"BHPH Interest Rate (%)"}),e.jsx(ge,{id:"bhphInterestRate",type:"number",step:"0.01",value:p,onChange:pe=>b(parseFloat(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Standard interest rate for in-house loans"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"bhphMaxLoanTerm",children:"BHPH Maximum Term (months)"}),e.jsx(ge,{id:"bhphMaxLoanTerm",type:"number",value:j,onChange:pe=>x(parseInt(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum term for in-house financing"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"bhphMinDownPaymentPercent",children:"BHPH Minimum Down Payment (%)"}),e.jsx(ge,{id:"bhphMinDownPaymentPercent",type:"number",value:f,onChange:pe=>g(parseFloat(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum down payment for in-house financing"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"bhphRequireIncome",checked:v,onCheckedChange:pe=>w(!!pe)}),e.jsx(Z,{htmlFor:"bhphRequireIncome",children:"Require Income Verification"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"bhphRequireReference",checked:k,onCheckedChange:pe=>T(!!pe)}),e.jsx(Z,{htmlFor:"bhphRequireReference",children:"Require References"})]})]})]}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-md mt-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Gn,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Buy Here Pay Here financing is subject to state and federal regulations. Ensure your dealership complies with all applicable laws including Truth in Lending Act (TILA), Fair Credit Reporting Act (FCRA), and state-specific lending requirements."})]})]})})]})]})}),e.jsx(Je,{value:"payments",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(nn,{className:"h-5 w-5 mr-2 text-primary"}),"Payment Settings"]}),e.jsx(Ee,{children:"Configure payment options and late fee policies"})]}),e.jsx(te,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"allowAutoPay",checked:S,onCheckedChange:pe=>C(!!pe)}),e.jsx(Z,{htmlFor:"allowAutoPay",children:"Allow Automatic Payments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"allowOnlinePayments",checked:E,onCheckedChange:pe=>M(!!pe)}),e.jsx(Z,{htmlFor:"allowOnlinePayments",children:"Allow Online Payments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"allowPartialPayments",checked:D,onCheckedChange:pe=>A(!!pe)}),e.jsx(Z,{htmlFor:"allowPartialPayments",children:"Allow Partial Payments"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"gracePeriodDays",children:"Grace Period (days)"}),e.jsx(ge,{id:"gracePeriodDays",type:"number",value:I,onChange:pe=>L(parseInt(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days after due date before late fee applies"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lateFeeType",children:"Late Fee Type"}),e.jsxs(Be,{value:R,onValueChange:$,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"fixed",children:"Fixed Amount"}),e.jsx(J,{value:"percentage",children:"Percentage of Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lateFeeAmount",children:R==="fixed"?"Late Fee Amount ($)":"Late Fee Percentage (%)"}),e.jsx(ge,{id:"lateFeeAmount",type:"number",step:R==="percentage"?"0.01":"1",value:F,onChange:pe=>B(parseFloat(pe.target.value)||0)})]})]})})]})}),e.jsx(Je,{value:"documents",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Bt,{className:"h-5 w-5 mr-2 text-primary"}),"Document Settings"]}),e.jsx(Ee,{children:"Configure loan documents and notification settings"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"loanAgreementTemplate",children:"Loan Agreement Template"}),e.jsx(kt,{id:"loanAgreementTemplate",value:U,onChange:pe=>W(pe.target.value),placeholder:"Enter your loan agreement template text or HTML...",rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You can use variables like {{customer_name}}, {{loan_amount}}, {{interest_rate}}, etc."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"requireSignature",checked:q,onCheckedChange:pe=>_(!!pe)}),e.jsx(Z,{htmlFor:"requireSignature",children:"Require Digital Signature"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"sendPaymentReceipts",checked:V,onCheckedChange:pe=>Q(!!pe)}),e.jsx(Z,{htmlFor:"sendPaymentReceipts",children:"Send Payment Receipts"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"sendPaymentReminders",checked:G,onCheckedChange:pe=>Y(!!pe)}),e.jsx(Z,{htmlFor:"sendPaymentReminders",children:"Send Payment Reminders"})]})]}),G&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reminderDaysBefore",children:"Reminder Days Before Due"}),e.jsx(ge,{id:"reminderDaysBefore",type:"number",value:ne,onChange:pe=>le(parseInt(pe.target.value)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Number of days before due date to send reminder"})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-md mt-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Oc,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Compliance Notice"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ensure your loan documents comply with all applicable laws and regulations. Consider consulting with legal counsel to review your loan agreement templates."})]})]})})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{onClick:oe,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]})}const zg=y.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:Ge("w-full caption-bottom text-sm",t),...s})}));zg.displayName="Table";const Vg=y.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:Ge("[&_tr]:border-b",t),...s}));Vg.displayName="TableHeader";const Ug=y.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:Ge("[&_tr:last-child]:border-0",t),...s}));Ug.displayName="TableBody";const nz=y.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:Ge("bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));nz.displayName="TableFooter";const Io=y.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:Ge("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Io.displayName="TableRow";const Hs=y.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:Ge("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Hs.displayName="TableHead";const $s=y.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:Ge("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));$s.displayName="TableCell";const az=y.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:Ge("mt-4 text-sm text-muted-foreground",t),...s}));az.displayName="TableCaption";function W5({loanId:t}){const[s,r]=y.useState(""),[n,a]=y.useState("all"),[i,l]=y.useState(""),o=Os.samplePayments,d=(t?o.filter(h=>h.loanId===t):o).filter(h=>{var x;const p=!s||((x=h.transactionId)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))||h.paymentMethod.toLowerCase().includes(s.toLowerCase()),b=n==="all"||h.status===n,j=!i||new Date(h.paymentDate).toISOString().split("T")[0]>=i;return p&&b&&j}),u=h=>Os.paymentStatusColors[h]||"bg-gray-100 text-gray-800",m=d.filter(h=>h.status==="Completed").reduce((h,p)=>h+p.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Payments"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De(m)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.filter(h=>h.status==="Completed").length," completed payments"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.filter(h=>h.status==="Pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled payments"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Last Payment"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length>0?nt(d[0].paymentDate):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Most recent payment"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Payment History"}),e.jsx(Ee,{children:t?"Payment history for this loan":"All payment transactions"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by transaction ID or method",value:s,onChange:h=>r(h.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:n,onValueChange:a,children:[e.jsx(Oe,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Filter by Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),Object.keys(Os.paymentStatusColors).map(h=>e.jsx(J,{value:h,children:h},h))]})]}),e.jsx(ge,{type:"date",value:i,onChange:h=>l(h.target.value),className:"w-[180px]",title:"Filter by payment date (on or after)"}),e.jsxs(H,{variant:"outline",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(zg,{children:[e.jsx(Vg,{children:e.jsxs(Io,{children:[e.jsx(Hs,{children:"Payment Date"}),e.jsx(Hs,{children:"Amount"}),e.jsx(Hs,{children:"Principal"}),e.jsx(Hs,{children:"Interest"}),e.jsx(Hs,{children:"Method"}),e.jsx(Hs,{children:"Status"}),e.jsx(Hs,{children:"Transaction ID"}),e.jsx(Hs,{children:"Actions"})]})}),e.jsxs(Ug,{children:[d.map(h=>e.jsxs(Io,{children:[e.jsx($s,{children:nt(h.paymentDate)}),e.jsx($s,{className:"font-medium",children:De(h.amount)}),e.jsx($s,{children:De(h.principalAmount)}),e.jsx($s,{children:De(h.interestAmount)}),e.jsx($s,{children:h.paymentMethod}),e.jsx($s,{children:e.jsx(Ae,{className:u(h.status),children:h.status})}),e.jsx($s,{className:"font-mono text-sm",children:h.transactionId||"N/A"}),e.jsx($s,{children:e.jsx(H,{variant:"ghost",size:"sm",children:"View Details"})})]},h.id)),d.length===0&&e.jsx(Io,{children:e.jsx($s,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No payments found matching your criteria"})})]})]})})]})]})]})}function iz(){const{tenant:t}=kn(),{toast:s}=xt(),{loans:r,setLoans:n}=DP();Jc();const[a,i]=y.useState("overview"),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[b,j]=y.useState(null),[x,f]=y.useState("all"),[g,v]=y.useState(""),w=r.filter(B=>{var U,W,q,_;const R=((W=(U=B==null?void 0:B.customerName)==null?void 0:U.toLowerCase())==null?void 0:W.includes(l.toLowerCase()))||!1||((_=(q=B==null?void 0:B.vehicleInfo)==null?void 0:q.toLowerCase())==null?void 0:_.includes(l.toLowerCase()))||!1,$=c==="all"||(B==null?void 0:B.status)===c;return R&&$}),k=r.filter(B=>{const R=!g||B.customerName.toLowerCase().includes(g.toLowerCase())||B.vehicleInfo.toLowerCase().includes(g.toLowerCase()),$=x==="all"||B.status===x;return R&&$}),T=Os.sampleLoans.length,S=Os.sampleLoans.filter(B=>B.status==="Current").length,C=Os.sampleLoans.reduce((B,R)=>B+R.remainingBalance,0),E=T>0?C/T:0,M=()=>{switch(t==null?void 0:t.platform){case"rv":return"RV Finance";case"marine":return"Marine Finance";case"manufactured_home":return"MH Finance";default:return"Finance Management"}},D=()=>{j(null),m(!0)},A=B=>{j(B),m(!0)},I=()=>{m(!1),j(null)},L=B=>{s({title:b?"Loan Updated":"Loan Created",description:`Loan has been ${b?"updated":"created"} successfully.`})},F=async B=>{if(!b){s({title:"Error",description:"No loan selected",variant:"destructive"});return}try{const R={id:`payment-${Math.random().toString(36).substring(2,9)}`,loanId:b.id,amount:B.amount||0,method:B.method||Bi.CASH,status:B.status||Cl.COMPLETED,processedDate:B.processedDate||new Date,notes:B.notes||"",transactionId:B.transactionId||`txn_${Math.random().toString(36).substring(2,9)}`,customFields:{},createdAt:new Date,updatedAt:new Date};n(U=>U.map(W=>W.id===b.id?{...W,payments:[...W.payments,R]}:W));const $=U=>Os.statusColors[U]||"bg-gray-100 text-gray-800";return s({title:"Payment Recorded",description:`Payment of ${De(R.amount)} has been recorded.`}),Promise.resolve()}catch(R){return console.error("Error recording payment:",R),s({title:"Error",description:"Failed to record payment",variant:"destructive"}),Promise.reject(R)}};return e.jsxs("div",{className:"space-y-6",children:[u&&e.jsx(XB,{loan:b||void 0,onClose:I,onSuccess:L}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:M()}),e.jsx("p",{className:"ri-page-description",children:"Manage loans, payments, and financial operations"})]}),e.jsx("div",{children:e.jsxs(H,{onClick:D,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Loan"]})})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Loans"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:T}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S," active loans"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Portfolio"}),e.jsx(Gt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De(C)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Outstanding balance"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Average Loan"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De(E)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average loan amount"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Default Rate"}),e.jsx(Mc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2.1%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.5% from last month"})]})]})]}),e.jsxs(ms,{value:a,onValueChange:i,children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"loans",children:"Loans"}),e.jsx(Ye,{value:"calculator",children:"Calculator"}),e.jsx(Ye,{value:"checkout",children:"Checkout"}),e.jsx(Ye,{value:"payments",children:"Payments"}),e.jsx(Ye,{value:"settings",children:"Settings"})]}),e.jsx(Je,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"ri-content-grid",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Loans"}),e.jsx(Ee,{children:"Latest loan applications and approvals"})]}),e.jsx(te,{children:r.length>0?e.jsx("div",{className:"space-y-4",children:r.slice(0,5).map(B=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>A(B),children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[B.customerName," - ",B.vehicleInfo||"Loan"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",B.loanAmount.toLocaleString()," • ",B.interestRate,"% • ",B.termMonths," months"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{children:B.status.replace("_"," ").toUpperCase()}),B.isPortalVisible&&e.jsx(Ae,{variant:"outline",children:"Portal"})]})]},B.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No loans created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Payment Activity"}),e.jsx(Ee,{children:"Recent payment transactions"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Payment Received"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"John Smith - $372.86"})]}),e.jsx(Ae,{variant:"outline",children:"Today"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Payment Received"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maria Rodriguez - $485.20"})]}),e.jsx(Ae,{variant:"outline",children:"Yesterday"})]})]})})]})]})}),e.jsx(Je,{value:"loans",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Active Loans"}),e.jsx(Ee,{children:"Manage customer loans and financing"})]}),e.jsxs(H,{onClick:D,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Loan"]})]})}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by customer or vehicle",value:g,onChange:B=>v(B.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:x,onValueChange:f,children:[e.jsx(Oe,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Filter by Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),Os.statusOptions.map(B=>e.jsx(J,{value:B,children:B},B))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[k.length>0?k.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-semibold",children:B.customerName}),e.jsx(Ae,{className:Os.statusColors[B.status]||"bg-gray-100 text-gray-800",children:B.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[B.vehicleInfo," • ",De(B.loanAmount)," • ",B.termMonths," months"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Balance: ",De(B.remainingBalance)," • Next Payment: ",nt(B.nextPaymentDate)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(H,{variant:"outline",size:"sm",children:"Payment History"})]})]},B.id)):Os.sampleLoans.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-semibold",children:B.customerName}),e.jsx(Ae,{className:Os.statusColors[B.status]||"bg-gray-100 text-gray-800",children:B.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[B.vehicleInfo," • ",De(B.loanAmount)," • ",B.termMonths," months"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Balance: ",De(B.remainingBalance)," • Next Payment: ",nt(B.nextPaymentDate)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(H,{variant:"outline",size:"sm",children:"Payment History"})]})]},B.id)),Os.sampleLoans.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No loans found"}),e.jsx("p",{className:"text-sm",children:"Create your first loan to get started"})]})]})]})]})}),e.jsx(Je,{value:"calculator",className:"space-y-4",children:e.jsx(tz,{})}),e.jsx(Je,{value:"checkout",children:e.jsx(sz,{})}),e.jsx(Je,{value:"payments",children:e.jsx(W5,{loan:w.length>0?w[0]:null,onClose:()=>p(!1),onRecordPayment:F})}),e.jsx(Je,{value:"settings",children:e.jsx(rz,{})})]}),h&&b&&e.jsx(W5,{loan:b,onClose:()=>p(!1),onRecordPayment:F})]})}const lz=iz;var jt=(t=>(t.PROSPECTING="prospecting",t.QUALIFICATION="qualification",t.NEEDS_ANALYSIS="needs_analysis",t.PROPOSAL="proposal",t.NEGOTIATION="negotiation",t.CLOSED_WON="closed_won",t.CLOSED_LOST="closed_lost",t))(jt||{}),As=(t=>(t.ACTIVE="active",t.WON="won",t.LOST="lost",t.ON_HOLD="on_hold",t.CANCELLED="cancelled",t))(As||{}),Vi=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(Vi||{}),io=(t=>(t.GEOGRAPHIC="geographic",t.INDUSTRY="industry",t.ACCOUNT_SIZE="account_size",t.PRODUCT_LINE="product_line",t))(io||{});function oz(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState([]),[u,m]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=()=>{const L=xs("renter-insight-deals",[{id:"1",name:"Georgetown Class A Sale - Smith Family",customerId:"cust-001",customerName:"John & Mary Smith",stage:jt.PROPOSAL,status:As.ACTIVE,priority:"high",value:145e3,probability:75,expectedCloseDate:new Date("2024-02-15"),assignedTo:"rep-001",territoryId:"territory-001",sourceId:"source-001",competitorIds:["comp-001"],products:[{id:"1",productId:"prod-001",productName:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,discount:5e3,total:12e4},{id:"2",productId:"prod-002",productName:"Extended Warranty Package",quantity:1,unitPrice:3500,discount:0,total:3500}],stageHistory:[],notes:"Customer very interested, financing pre-approved",requiresApproval:!0,approvalStatus:"pending",customFields:{tradeInValue:25e3,financingType:"bank_loan"},createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-20")},{id:"2",name:"Travel Trailer - Johnson Family",customerId:"cust-002",customerName:"Sarah Johnson",stage:jt.NEGOTIATION,status:As.ACTIVE,priority:"medium",value:75e3,probability:85,expectedCloseDate:new Date("2024-02-10"),assignedTo:"rep-002",territoryId:"territory-002",competitorIds:[],products:[{id:"3",productId:"prod-003",productName:"2024 Airstream Flying Cloud",quantity:1,unitPrice:75e3,discount:2e3,total:73e3}],stageHistory:[],notes:"Ready to close, just finalizing delivery details",requiresApproval:!1,customFields:{},createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-18")}]),F=xs("renter-insight-territories",[{id:"territory-001",name:"North Region",type:"geographic",description:"Northern states territory",assignedTo:["rep-001","rep-003"],rules:[{id:"1",field:"state",operator:"in_range",value:["IL","WI","MN","IA"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"territory-002",name:"South Region",type:"geographic",description:"Southern states territory",assignedTo:["rep-002"],rules:[{id:"2",field:"state",operator:"in_range",value:["TX","FL","GA","NC"],priority:1}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),B=xs("renter-insight-stage-history",[{id:"1",dealId:"1",fromStage:jt.QUALIFICATION,toStage:jt.NEEDS_ANALYSIS,changedBy:"rep-001",changedAt:new Date("2024-01-12"),duration:48,notes:"Customer qualified, moving to needs analysis"},{id:"2",dealId:"1",fromStage:jt.NEEDS_ANALYSIS,toStage:jt.PROPOSAL,changedBy:"rep-001",changedAt:new Date("2024-01-18"),duration:144,notes:"Proposal prepared and presented"}]);s(L),n(F),d(B)},p=L=>{Xt("renter-insight-deals",L)},b=L=>{Xt("renter-insight-stage-history",L)},j=async L=>{m(!0);try{const F={id:Math.random().toString(36).substr(2,9),name:L.name||"",customerId:L.customerId||"",customerName:L.customerName||"",stage:jt.PROSPECTING,status:As.ACTIVE,priority:L.priority||"medium",value:L.value||0,probability:10,expectedCloseDate:L.expectedCloseDate||new Date,assignedTo:L.assignedTo||"",territoryId:L.territoryId||"",sourceId:L.sourceId,competitorIds:L.competitorIds||[],products:L.products||[],stageHistory:[],notes:L.notes||"",requiresApproval:(L.value||0)>1e5,customFields:L.customFields||{},createdAt:new Date,updatedAt:new Date},B=[...t,F];return s(B),p(B),await f(F.id,void 0,jt.PROSPECTING,"system"),F}finally{m(!1)}},x=async(L,F,B)=>{const R=t.find(V=>V.id===L);if(!R)return;const $=R.stage,U=v(F),W=F===jt.CLOSED_WON?As.WON:F===jt.CLOSED_LOST?As.LOST:As.ACTIVE,q=F===jt.CLOSED_WON||F===jt.CLOSED_LOST?new Date:void 0,_=t.map(V=>V.id===L?{...V,stage:F,probability:U,status:W,actualCloseDate:q,updatedAt:new Date}:V);return s(_),p(_),await f(L,$,F,"current-user",B||`Stage changed from ${($==null?void 0:$.replace("_"," "))||"none"} to ${F.replace("_"," ")}`),_.find(V=>V.id===L)},f=async(L,F,B,R,$)=>{const U=F?g(L,F):void 0,W={id:Math.random().toString(36).substr(2,9),dealId:L,fromStage:F,toStage:B,changedBy:R,changedAt:new Date,duration:U,notes:$},q=[...c,W];d(q),b(q)},g=(L,F)=>{const R=c.filter($=>$.dealId===L).find($=>$.toStage===F);return R?Math.floor((Date.now()-R.changedAt.getTime())/36e5):0},v=L=>{switch(L){case jt.PROSPECTING:return 10;case jt.QUALIFICATION:return 25;case jt.NEEDS_ANALYSIS:return 40;case jt.PROPOSAL:return 60;case jt.NEGOTIATION:return 80;case jt.CLOSED_WON:return 100;case jt.CLOSED_LOST:return 0;default:return 10}},w=async(L,F)=>{const B=r.find(R=>R.isActive);if(B){const R=t.map($=>$.id===L?{...$,territoryId:B.id,updatedAt:new Date}:$);s(R),p(R)}},k=async(L,F)=>{const B={id:Math.random().toString(36).substr(2,9),dealId:L,workflowType:F,currentStep:1,totalSteps:2,steps:[{id:"1",stepNumber:1,approverRole:"sales_manager",approverIds:["manager-001"],requiredApprovals:1,currentApprovals:[],status:"pending"},{id:"2",stepNumber:2,approverRole:"sales_director",approverIds:["director-001"],requiredApprovals:1,currentApprovals:[],status:"pending"}],status:"pending",requestedBy:"current-user",requestedAt:new Date};return i(R=>[...R,B]),B},T=async(L,F,B)=>{const R={id:Math.random().toString(36).substr(2,9),dealId:L,outcome:F,primaryReason:B.primaryReason||"",secondaryReasons:B.secondaryReasons||[],competitorWon:B.competitorWon,feedback:B.feedback||"",lessonsLearned:B.lessonsLearned||[],actionItems:B.actionItems||[],reportedBy:"current-user",reportedAt:new Date};return o($=>[...$,R]),R},S=()=>{const L=t.length,F=t.reduce((V,Q)=>V+Q.value,0),B=t.filter(V=>V.status===As.WON).length,R=t.filter(V=>V.status===As.WON).reduce((V,Q)=>V+Q.value,0),$=t.filter(V=>V.status===As.LOST).length,U=t.filter(V=>V.status===As.LOST).reduce((V,Q)=>V+Q.value,0),W=L>0?B/L*100:0,q=L>0?F/L:0,_=C();return{totalDeals:L,totalValue:F,wonDeals:B,wonValue:R,lostDeals:$,lostValue:U,winRate:W,averageDealSize:q,averageSalesCycle:_,conversionRates:E()}},C=()=>{const L=t.filter(B=>B.actualCloseDate);return L.length===0?0:L.reduce((B,R)=>{const $=new Date(R.actualCloseDate),U=new Date(R.createdAt),W=isNaN($.getTime())?0:$.getTime(),q=isNaN(U.getTime())?0:U.getTime(),_=W&&q?Math.floor((W-q)/(1e3*60*60*24)):0;return B+_},0)/L.length},E=()=>[{fromStage:jt.PROSPECTING,toStage:jt.QUALIFICATION,rate:65,averageDuration:72},{fromStage:jt.QUALIFICATION,toStage:jt.NEEDS_ANALYSIS,rate:75,averageDuration:48},{fromStage:jt.NEEDS_ANALYSIS,toStage:jt.PROPOSAL,rate:80,averageDuration:96},{fromStage:jt.PROPOSAL,toStage:jt.NEGOTIATION,rate:70,averageDuration:120},{fromStage:jt.NEGOTIATION,toStage:jt.CLOSED_WON,rate:85,averageDuration:168}];return{deals:t,territories:r,approvalWorkflows:a,winLossReports:l,stageHistory:c,loading:u,createDeal:j,updateDealStage:x,assignTerritory:w,createApprovalWorkflow:k,createWinLossReport:T,getDealMetrics:S,getDealsByStage:L=>t.filter(F=>F.stage===L),getDealsByTerritory:L=>t.filter(F=>F.territoryId===L),getDealsByRep:L=>t.filter(F=>F.assignedTo===L),getStageHistory:L=>c.filter(F=>F.dealId===L).sort((F,B)=>new Date(F.changedAt).getTime()-new Date(B.changedAt).getTime())}}function Jy(t,s){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Jy(t,s)}function IP(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,Jy(t,s)}function us(t){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},us(t)}function cz(t,s){if(us(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(us(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function dz(t){var s=cz(t,"string");return us(s)=="symbol"?s:s+""}function uz(t,s,r){return(s=dz(s))in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function G5(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K5(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?G5(Object(r),!0).forEach(function(n){uz(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Y5=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Q5=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z5={INIT:"@@redux/INIT"+Q5(),REPLACE:"@@redux/REPLACE"+Q5()};function mz(t){if(typeof t!="object"||t===null)return!1;for(var s=t;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s}function kP(t,s,r){var n;if(typeof s=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bn(0));if(typeof s=="function"&&typeof r>"u"&&(r=s,s=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bn(1));return r(kP)(t,s)}if(typeof t!="function")throw new Error(Bn(2));var a=t,i=s,l=[],o=l,c=!1;function d(){o===l&&(o=l.slice())}function u(){if(c)throw new Error(Bn(3));return i}function m(j){if(typeof j!="function")throw new Error(Bn(4));if(c)throw new Error(Bn(5));var x=!0;return d(),o.push(j),function(){if(x){if(c)throw new Error(Bn(6));x=!1,d();var g=o.indexOf(j);o.splice(g,1),l=null}}}function h(j){if(!mz(j))throw new Error(Bn(7));if(typeof j.type>"u")throw new Error(Bn(8));if(c)throw new Error(Bn(9));try{c=!0,i=a(i,j)}finally{c=!1}for(var x=l=o,f=0;f<x.length;f++){var g=x[f];g()}return j}function p(j){if(typeof j!="function")throw new Error(Bn(10));a=j,h({type:Z5.REPLACE})}function b(){var j,x=m;return j={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Bn(11));function v(){g.next&&g.next(u())}v();var w=x(v);return{unsubscribe:w}}},j[Y5]=function(){return this},j}return h({type:Z5.INIT}),n={dispatch:h,subscribe:m,getState:u,replaceReducer:p},n[Y5]=b,n}function J5(t,s){return function(){return s(t.apply(this,arguments))}}function X5(t,s){if(typeof t=="function")return J5(t,s);if(typeof t!="object"||t===null)throw new Error(Bn(16));var r={};for(var n in t){var a=t[n];typeof a=="function"&&(r[n]=J5(a,s))}return r}function LP(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return s.length===0?function(n){return n}:s.length===1?s[0]:s.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function hz(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(Bn(15))},l={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=s.map(function(c){return c(l)});return i=LP.apply(void 0,o)(a.dispatch),K5(K5({},a),{},{dispatch:i})}}}var FP={exports:{}},pz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fz=pz,xz=fz;function RP(){}function MP(){}MP.resetWarningCache=RP;var gz=function(){function t(n,a,i,l,o,c){if(c!==xz){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:MP,resetWarningCache:RP};return r.PropTypes=r,r};FP.exports=gz();var vz=FP.exports;const ks=Ho(vz);var _P=vt.createContext(null);function jz(t){t()}var OP=jz,yz=function(s){return OP=s},bz=function(){return OP};function Nz(){var t=bz(),s=null,r=null;return{clear:function(){s=null,r=null},notify:function(){t(function(){for(var a=s;a;)a.callback(),a=a.next})},get:function(){for(var a=[],i=s;i;)a.push(i),i=i.next;return a},subscribe:function(a){var i=!0,l=r={callback:a,next:null,prev:r};return l.prev?l.prev.next=l:s=l,function(){!i||s===null||(i=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:s=l.next)}}}}var e4={notify:function(){},get:function(){return[]}};function $P(t,s){var r,n=e4;function a(m){return c(),n.subscribe(m)}function i(){n.notify()}function l(){u.onStateChange&&u.onStateChange()}function o(){return!!r}function c(){r||(r=s?s.addNestedSub(l):t.subscribe(l),n=Nz())}function d(){r&&(r(),r=void 0,n.clear(),n=e4)}var u={addNestedSub:a,notifyNestedSubs:i,handleChangeWrapper:l,isSubscribed:o,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return n}};return u}var BP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;function wz(t){var s=t.store,r=t.context,n=t.children,a=y.useMemo(function(){var o=$P(s);return{store:s,subscription:o}},[s]),i=y.useMemo(function(){return s.getState()},[s]);BP(function(){var o=a.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),i!==s.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[a,i]);var l=r||_P;return vt.createElement(l.Provider,{value:a},n)}function Ux(t,s){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(s.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var zP={exports:{}},Es={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr=typeof Symbol=="function"&&Symbol.for,lb=Kr?Symbol.for("react.element"):60103,ob=Kr?Symbol.for("react.portal"):60106,qg=Kr?Symbol.for("react.fragment"):60107,Hg=Kr?Symbol.for("react.strict_mode"):60108,Wg=Kr?Symbol.for("react.profiler"):60114,Gg=Kr?Symbol.for("react.provider"):60109,Kg=Kr?Symbol.for("react.context"):60110,cb=Kr?Symbol.for("react.async_mode"):60111,Yg=Kr?Symbol.for("react.concurrent_mode"):60111,Qg=Kr?Symbol.for("react.forward_ref"):60112,Zg=Kr?Symbol.for("react.suspense"):60113,Sz=Kr?Symbol.for("react.suspense_list"):60120,Jg=Kr?Symbol.for("react.memo"):60115,Xg=Kr?Symbol.for("react.lazy"):60116,Cz=Kr?Symbol.for("react.block"):60121,Az=Kr?Symbol.for("react.fundamental"):60117,Tz=Kr?Symbol.for("react.responder"):60118,Ez=Kr?Symbol.for("react.scope"):60119;function Ca(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case lb:switch(t=t.type,t){case cb:case Yg:case qg:case Wg:case Hg:case Zg:return t;default:switch(t=t&&t.$$typeof,t){case Kg:case Qg:case Xg:case Jg:case Gg:return t;default:return s}}case ob:return s}}}function VP(t){return Ca(t)===Yg}Es.AsyncMode=cb;Es.ConcurrentMode=Yg;Es.ContextConsumer=Kg;Es.ContextProvider=Gg;Es.Element=lb;Es.ForwardRef=Qg;Es.Fragment=qg;Es.Lazy=Xg;Es.Memo=Jg;Es.Portal=ob;Es.Profiler=Wg;Es.StrictMode=Hg;Es.Suspense=Zg;Es.isAsyncMode=function(t){return VP(t)||Ca(t)===cb};Es.isConcurrentMode=VP;Es.isContextConsumer=function(t){return Ca(t)===Kg};Es.isContextProvider=function(t){return Ca(t)===Gg};Es.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===lb};Es.isForwardRef=function(t){return Ca(t)===Qg};Es.isFragment=function(t){return Ca(t)===qg};Es.isLazy=function(t){return Ca(t)===Xg};Es.isMemo=function(t){return Ca(t)===Jg};Es.isPortal=function(t){return Ca(t)===ob};Es.isProfiler=function(t){return Ca(t)===Wg};Es.isStrictMode=function(t){return Ca(t)===Hg};Es.isSuspense=function(t){return Ca(t)===Zg};Es.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qg||t===Yg||t===Wg||t===Hg||t===Zg||t===Sz||typeof t=="object"&&t!==null&&(t.$$typeof===Xg||t.$$typeof===Jg||t.$$typeof===Gg||t.$$typeof===Kg||t.$$typeof===Qg||t.$$typeof===Az||t.$$typeof===Tz||t.$$typeof===Ez||t.$$typeof===Cz)};Es.typeOf=Ca;zP.exports=Es;var Pz=zP.exports,db=Pz,Dz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Iz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},kz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},UP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ub={};ub[db.ForwardRef]=kz;ub[db.Memo]=UP;function t4(t){return db.isMemo(t)?UP:ub[t.$$typeof]||Dz}var Lz=Object.defineProperty,Fz=Object.getOwnPropertyNames,s4=Object.getOwnPropertySymbols,Rz=Object.getOwnPropertyDescriptor,Mz=Object.getPrototypeOf,r4=Object.prototype;function qP(t,s,r){if(typeof s!="string"){if(r4){var n=Mz(s);n&&n!==r4&&qP(t,n,r)}var a=Fz(s);s4&&(a=a.concat(s4(s)));for(var i=t4(t),l=t4(s),o=0;o<a.length;++o){var c=a[o];if(!Iz[c]&&!(r&&r[c])&&!(l&&l[c])&&!(i&&i[c])){var d=Rz(s,c);try{Lz(t,c,d)}catch{}}}}return t}var _z=qP;const n4=Ho(_z);var HP={exports:{}},Rs={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev=60103,tv=60106,tp=60107,sp=60108,rp=60114,np=60109,ap=60110,ip=60112,lp=60113,mb=60120,op=60115,cp=60116,WP=60121,GP=60122,KP=60117,YP=60129,QP=60131;if(typeof Symbol=="function"&&Symbol.for){var Jr=Symbol.for;ev=Jr("react.element"),tv=Jr("react.portal"),tp=Jr("react.fragment"),sp=Jr("react.strict_mode"),rp=Jr("react.profiler"),np=Jr("react.provider"),ap=Jr("react.context"),ip=Jr("react.forward_ref"),lp=Jr("react.suspense"),mb=Jr("react.suspense_list"),op=Jr("react.memo"),cp=Jr("react.lazy"),WP=Jr("react.block"),GP=Jr("react.server.block"),KP=Jr("react.fundamental"),YP=Jr("react.debug_trace_mode"),QP=Jr("react.legacy_hidden")}function wi(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case ev:switch(t=t.type,t){case tp:case rp:case sp:case lp:case mb:return t;default:switch(t=t&&t.$$typeof,t){case ap:case ip:case cp:case op:case np:return t;default:return s}}case tv:return s}}}var Oz=np,$z=ev,Bz=ip,zz=tp,Vz=cp,Uz=op,qz=tv,Hz=rp,Wz=sp,Gz=lp;Rs.ContextConsumer=ap;Rs.ContextProvider=Oz;Rs.Element=$z;Rs.ForwardRef=Bz;Rs.Fragment=zz;Rs.Lazy=Vz;Rs.Memo=Uz;Rs.Portal=qz;Rs.Profiler=Hz;Rs.StrictMode=Wz;Rs.Suspense=Gz;Rs.isAsyncMode=function(){return!1};Rs.isConcurrentMode=function(){return!1};Rs.isContextConsumer=function(t){return wi(t)===ap};Rs.isContextProvider=function(t){return wi(t)===np};Rs.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ev};Rs.isForwardRef=function(t){return wi(t)===ip};Rs.isFragment=function(t){return wi(t)===tp};Rs.isLazy=function(t){return wi(t)===cp};Rs.isMemo=function(t){return wi(t)===op};Rs.isPortal=function(t){return wi(t)===tv};Rs.isProfiler=function(t){return wi(t)===rp};Rs.isStrictMode=function(t){return wi(t)===sp};Rs.isSuspense=function(t){return wi(t)===lp};Rs.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===tp||t===rp||t===YP||t===sp||t===lp||t===mb||t===QP||typeof t=="object"&&t!==null&&(t.$$typeof===cp||t.$$typeof===op||t.$$typeof===np||t.$$typeof===ap||t.$$typeof===ip||t.$$typeof===KP||t.$$typeof===WP||t[0]===GP)};Rs.typeOf=wi;HP.exports=Rs;var Kz=HP.exports,Yz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Qz=["reactReduxForwardedRef"],Zz=[],Jz=[null,null];function Xz(t,s){var r=t[1];return[s.payload,r+1]}function a4(t,s,r){BP(function(){return t.apply(void 0,s)},r)}function eV(t,s,r,n,a,i,l){t.current=n,s.current=a,r.current=!1,i.current&&(i.current=null,l())}function tV(t,s,r,n,a,i,l,o,c,d){if(t){var u=!1,m=null,h=function(){if(!u){var j=s.getState(),x,f;try{x=n(j,a.current)}catch(g){f=g,m=g}f||(m=null),x===i.current?l.current||c():(i.current=x,o.current=x,l.current=!0,d({type:"STORE_UPDATED",payload:{error:f}}))}};r.onStateChange=h,r.trySubscribe(),h();var p=function(){if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m};return p}}var sV=function(){return[null,0]};function rV(t,s){s===void 0&&(s={});var r=s,n=r.getDisplayName,a=n===void 0?function(v){return"ConnectAdvanced("+v+")"}:n,i=r.methodName,l=i===void 0?"connectAdvanced":i,o=r.renderCountProp,c=o===void 0?void 0:o,d=r.shouldHandleStateChanges,u=d===void 0?!0:d,m=r.storeKey,h=m===void 0?"store":m;r.withRef;var p=r.forwardRef,b=p===void 0?!1:p,j=r.context,x=j===void 0?_P:j,f=Ux(r,Yz),g=x;return function(w){var k=w.displayName||w.name||"Component",T=a(k),S=it({},f,{getDisplayName:a,methodName:l,renderCountProp:c,shouldHandleStateChanges:u,storeKey:h,displayName:T,wrappedComponentName:k,WrappedComponent:w}),C=f.pure;function E(L){return t(L.dispatch,S)}var M=C?y.useMemo:function(L){return L()};function D(L){var F=y.useMemo(function(){var Pe=L.reactReduxForwardedRef,qe=Ux(L,Qz);return[L.context,Pe,qe]},[L]),B=F[0],R=F[1],$=F[2],U=y.useMemo(function(){return B&&B.Consumer&&Kz.isContextConsumer(vt.createElement(B.Consumer,null))?B:g},[B,g]),W=y.useContext(U),q=!!L.store&&!!L.store.getState&&!!L.store.dispatch;W&&W.store;var _=q?L.store:W.store,V=y.useMemo(function(){return E(_)},[_]),Q=y.useMemo(function(){if(!u)return Jz;var Pe=$P(_,q?null:W.subscription),qe=Pe.notifyNestedSubs.bind(Pe);return[Pe,qe]},[_,q,W]),G=Q[0],Y=Q[1],ne=y.useMemo(function(){return q?W:it({},W,{subscription:G})},[q,W,G]),le=y.useReducer(Xz,Zz,sV),oe=le[0],pe=oe[0],je=le[1];if(pe&&pe.error)throw pe.error;var we=y.useRef(),Re=y.useRef($),ye=y.useRef(),Se=y.useRef(!1),he=M(function(){return ye.current&&$===Re.current?ye.current:V(_.getState(),$)},[_,pe,$]);a4(eV,[Re,we,Se,$,he,ye,Y]),a4(tV,[u,_,G,V,Re,we,Se,ye,Y,je],[_,G,V]);var ke=y.useMemo(function(){return vt.createElement(w,it({},he,{ref:R}))},[R,w,he]),xe=y.useMemo(function(){return u?vt.createElement(U.Provider,{value:ne},ke):ke},[U,ke,ne]);return xe}var A=C?vt.memo(D):D;if(A.WrappedComponent=w,A.displayName=D.displayName=T,b){var I=vt.forwardRef(function(F,B){return vt.createElement(A,it({},F,{reactReduxForwardedRef:B}))});return I.displayName=T,I.WrappedComponent=w,n4(I,w)}return n4(A,w)}}function i4(t,s){return t===s?t!==0||s!==0||1/t===1/s:t!==t&&s!==s}function X0(t,s){if(i4(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(s,r[a])||!i4(t[r[a]],s[r[a]]))return!1;return!0}function nV(t,s){var r={},n=function(l){var o=t[l];typeof o=="function"&&(r[l]=function(){return s(o.apply(void 0,arguments))})};for(var a in t)n(a);return r}function hb(t){return function(r,n){var a=t(r,n);function i(){return a}return i.dependsOnOwnProps=!1,i}}function l4(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function ZP(t,s){return function(n,a){a.displayName;var i=function(o,c){return i.dependsOnOwnProps?i.mapToProps(o,c):i.mapToProps(o)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,c){i.mapToProps=t,i.dependsOnOwnProps=l4(t);var d=i(o,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=l4(d),d=i(o,c)),d},i}}function aV(t){return typeof t=="function"?ZP(t):void 0}function iV(t){return t?void 0:hb(function(s){return{dispatch:s}})}function lV(t){return t&&typeof t=="object"?hb(function(s){return nV(t,s)}):void 0}const oV=[aV,iV,lV];function cV(t){return typeof t=="function"?ZP(t):void 0}function dV(t){return t?void 0:hb(function(){return{}})}const uV=[cV,dV];function mV(t,s,r){return it({},r,t,s)}function hV(t){return function(r,n){n.displayName;var a=n.pure,i=n.areMergedPropsEqual,l=!1,o;return function(d,u,m){var h=t(d,u,m);return l?(!a||!i(h,o))&&(o=h):(l=!0,o=h),o}}}function pV(t){return typeof t=="function"?hV(t):void 0}function fV(t){return t?void 0:function(){return mV}}const xV=[pV,fV];var gV=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function vV(t,s,r,n){return function(i,l){return r(t(i,l),s(n,l),l)}}function jV(t,s,r,n,a){var i=a.areStatesEqual,l=a.areOwnPropsEqual,o=a.areStatePropsEqual,c=!1,d,u,m,h,p;function b(v,w){return d=v,u=w,m=t(d,u),h=s(n,u),p=r(m,h,u),c=!0,p}function j(){return m=t(d,u),s.dependsOnOwnProps&&(h=s(n,u)),p=r(m,h,u),p}function x(){return t.dependsOnOwnProps&&(m=t(d,u)),s.dependsOnOwnProps&&(h=s(n,u)),p=r(m,h,u),p}function f(){var v=t(d,u),w=!o(v,m);return m=v,w&&(p=r(m,h,u)),p}function g(v,w){var k=!l(w,u),T=!i(v,d,w,u);return d=v,u=w,k&&T?j():k?x():T?f():p}return function(w,k){return c?g(w,k):b(w,k)}}function yV(t,s){var r=s.initMapStateToProps,n=s.initMapDispatchToProps,a=s.initMergeProps,i=Ux(s,gV),l=r(t,i),o=n(t,i),c=a(t,i),d=i.pure?jV:vV;return d(l,o,c,t,i)}var bV=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function ej(t,s,r){for(var n=s.length-1;n>=0;n--){var a=s[n](t);if(a)return a}return function(i,l){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+l.wrappedComponentName+".")}}function NV(t,s){return t===s}function wV(t){var s=t===void 0?{}:t,r=s.connectHOC,n=r===void 0?rV:r,a=s.mapStateToPropsFactories,i=a===void 0?uV:a,l=s.mapDispatchToPropsFactories,o=l===void 0?oV:l,c=s.mergePropsFactories,d=c===void 0?xV:c,u=s.selectorFactory,m=u===void 0?yV:u;return function(p,b,j,x){x===void 0&&(x={});var f=x,g=f.pure,v=g===void 0?!0:g,w=f.areStatesEqual,k=w===void 0?NV:w,T=f.areOwnPropsEqual,S=T===void 0?X0:T,C=f.areStatePropsEqual,E=C===void 0?X0:C,M=f.areMergedPropsEqual,D=M===void 0?X0:M,A=Ux(f,bV),I=ej(p,i,"mapStateToProps"),L=ej(b,o,"mapDispatchToProps"),F=ej(j,d,"mergeProps");return n(m,it({methodName:"connect",getDisplayName:function(R){return"Connect("+R+")"},shouldHandleStateChanges:!!p,initMapStateToProps:I,initMapDispatchToProps:L,initMergeProps:F,pure:v,areStatesEqual:k,areOwnPropsEqual:S,areStatePropsEqual:E,areMergedPropsEqual:D},A))}}const JP=wV();yz(Ml.unstable_batchedUpdates);function SV(t,s){if(t.length!==s.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==s[r])return!1;return!0}function XP(t,s){var r=y.useState(function(){return{inputs:s,result:t()}})[0],n=y.useRef(!0),a=y.useRef(r),i=n.current||!!(s&&a.current.inputs&&SV(s,a.current.inputs)),l=i?a.current:{inputs:s,result:t()};return y.useEffect(function(){n.current=!1,a.current=l},[l]),l.result}function CV(t,s){return XP(function(){return t},s)}var os=XP,At=CV,AV="Invariant failed";function TV(t,s){throw new Error(AV)}var fi=function(s){var r=s.top,n=s.right,a=s.bottom,i=s.left,l=n-i,o=a-r,c={top:r,right:n,bottom:a,left:i,width:l,height:o,x:i,y:r,center:{x:(n+i)/2,y:(a+r)/2}};return c},pb=function(s,r){return{top:s.top-r.top,left:s.left-r.left,bottom:s.bottom+r.bottom,right:s.right+r.right}},o4=function(s,r){return{top:s.top+r.top,left:s.left+r.left,bottom:s.bottom-r.bottom,right:s.right-r.right}},EV=function(s,r){return{top:s.top+r.y,left:s.left+r.x,bottom:s.bottom+r.y,right:s.right+r.x}},tj={top:0,right:0,bottom:0,left:0},fb=function(s){var r=s.borderBox,n=s.margin,a=n===void 0?tj:n,i=s.border,l=i===void 0?tj:i,o=s.padding,c=o===void 0?tj:o,d=fi(pb(r,a)),u=fi(o4(r,l)),m=fi(o4(u,c));return{marginBox:d,borderBox:fi(r),paddingBox:u,contentBox:m,margin:a,border:l,padding:c}},Fa=function(s){var r=s.slice(0,-2),n=s.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&TV(),a},PV=function(){return{x:window.pageXOffset,y:window.pageYOffset}},qx=function(s,r){var n=s.borderBox,a=s.border,i=s.margin,l=s.padding,o=EV(n,r);return fb({borderBox:o,border:a,margin:i,padding:l})},Hx=function(s,r){return r===void 0&&(r=PV()),qx(s,r)},eD=function(s,r){var n={top:Fa(r.marginTop),right:Fa(r.marginRight),bottom:Fa(r.marginBottom),left:Fa(r.marginLeft)},a={top:Fa(r.paddingTop),right:Fa(r.paddingRight),bottom:Fa(r.paddingBottom),left:Fa(r.paddingLeft)},i={top:Fa(r.borderTopWidth),right:Fa(r.borderRightWidth),bottom:Fa(r.borderBottomWidth),left:Fa(r.borderLeftWidth)};return fb({borderBox:s,margin:n,padding:a,border:i})},tD=function(s){var r=s.getBoundingClientRect(),n=window.getComputedStyle(s);return eD(r,n)},c4=Number.isNaN||function(s){return typeof s=="number"&&s!==s};function DV(t,s){return!!(t===s||c4(t)&&c4(s))}function IV(t,s){if(t.length!==s.length)return!1;for(var r=0;r<t.length;r++)if(!DV(t[r],s[r]))return!1;return!0}function Hr(t,s){s===void 0&&(s=IV);var r,n=[],a,i=!1;function l(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return i&&r===this&&s(o,n)||(a=t.apply(this,o),i=!0,r=this,n=o),a}return l}var Mh=function(s){var r=[],n=null,a=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];r=o,!n&&(n=requestAnimationFrame(function(){n=null,s.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function sD(t,s){}sD.bind(null,"warn");sD.bind(null,"error");function ko(){}function kV(t,s){return it({},t,{},s)}function za(t,s,r){var n=s.map(function(a){var i=kV(r,a.options);return t.addEventListener(a.eventName,a.fn,i),function(){t.removeEventListener(a.eventName,a.fn,i)}});return function(){n.forEach(function(i){i()})}}var LV="Invariant failed";function Wx(t){this.message=t}Wx.prototype.toString=function(){return this.message};function ct(t,s){throw new Wx(LV)}var FV=function(t){IP(s,t);function s(){for(var n,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=t.call.apply(t,[this].concat(i))||this,n.callbacks=null,n.unbind=ko,n.onWindowError=function(o){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var d=o.error;d instanceof Wx&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var r=s.prototype;return r.componentDidMount=function(){this.unbind=za(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(a){if(a instanceof Wx){this.setState({});return}throw a},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},s}(vt.Component),RV=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gx=function(s){return s+1},MV=function(s){return`
  You have lifted an item in position `+Gx(s.source.index)+`
`},rD=function(s,r){var n=s.droppableId===r.droppableId,a=Gx(s.index),i=Gx(r.index);return n?`
      You have moved the item from position `+a+`
      to position `+i+`
    `:`
    You have moved the item from position `+a+`
    in list `+s.droppableId+`
    to list `+r.droppableId+`
    in position `+i+`
  `},nD=function(s,r,n){var a=r.droppableId===n.droppableId;return a?`
      The item `+s+`
      has been combined with `+n.draggableId:`
      The item `+s+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},_V=function(s){var r=s.destination;if(r)return rD(s.source,r);var n=s.combine;return n?nD(s.draggableId,s.source,n):"You are over an area that cannot be dropped on"},d4=function(s){return`
  The item has returned to its starting position
  of `+Gx(s.index)+`
`},OV=function(s){if(s.reason==="CANCEL")return`
      Movement cancelled.
      `+d4(s.source)+`
    `;var r=s.destination,n=s.combine;return r?`
      You have dropped the item.
      `+rD(s.source,r)+`
    `:n?`
      You have dropped the item.
      `+nD(s.draggableId,s.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+d4(s.source)+`
  `},ox={dragHandleUsageInstructions:RV,onDragStart:MV,onDragUpdate:_V,onDragEnd:OV},Gr={x:0,y:0},sn=function(s,r){return{x:s.x+r.x,y:s.y+r.y}},ha=function(s,r){return{x:s.x-r.x,y:s.y-r.y}},Lo=function(s,r){return s.x===r.x&&s.y===r.y},Uu=function(s){return{x:s.x!==0?-s.x:0,y:s.y!==0?-s.y:0}},Uc=function(s,r,n){var a;return n===void 0&&(n=0),a={},a[s]=r,a[s==="x"?"y":"x"]=n,a},_h=function(s,r){return Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2))},u4=function(s,r){return Math.min.apply(Math,r.map(function(n){return _h(s,n)}))},aD=function(s){return function(r){return{x:s(r.x),y:s(r.y)}}},$V=function(t,s){var r=fi({top:Math.max(s.top,t.top),right:Math.min(s.right,t.right),bottom:Math.min(s.bottom,t.bottom),left:Math.max(s.left,t.left)});return r.width<=0||r.height<=0?null:r},dp=function(s,r){return{top:s.top+r.y,left:s.left+r.x,bottom:s.bottom+r.y,right:s.right+r.x}},m4=function(s){return[{x:s.left,y:s.top},{x:s.right,y:s.top},{x:s.left,y:s.bottom},{x:s.right,y:s.bottom}]},BV={top:0,right:0,bottom:0,left:0},zV=function(s,r){return r?dp(s,r.scroll.diff.displacement):s},VV=function(s,r,n){if(n&&n.increasedBy){var a;return it({},s,(a={},a[r.end]=s[r.end]+n.increasedBy[r.line],a))}return s},UV=function(s,r){return r&&r.shouldClipSubject?$V(r.pageMarginBox,s):fi(s)},Cu=function(t){var s=t.page,r=t.withPlaceholder,n=t.axis,a=t.frame,i=zV(s.marginBox,a),l=VV(i,n,r),o=UV(l,a);return{page:s,withPlaceholder:r,active:o}},xb=function(t,s){t.frame||ct();var r=t.frame,n=ha(s,r.scroll.initial),a=Uu(n),i=it({},r,{scroll:{initial:r.scroll.initial,current:s,diff:{value:n,displacement:a},max:r.scroll.max}}),l=Cu({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:i}),o=it({},t,{frame:i,subject:l});return o};function Kx(t){return Object.values?Object.values(t):Object.keys(t).map(function(s){return t[s]})}function gb(t,s){if(t.findIndex)return t.findIndex(s);for(var r=0;r<t.length;r++)if(s(t[r]))return r;return-1}function Jo(t,s){if(t.find)return t.find(s);var r=gb(t,s);if(r!==-1)return t[r]}function iD(t){return Array.prototype.slice.call(t)}var lD=Hr(function(t){return t.reduce(function(s,r){return s[r.descriptor.id]=r,s},{})}),oD=Hr(function(t){return t.reduce(function(s,r){return s[r.descriptor.id]=r,s},{})}),sv=Hr(function(t){return Kx(t)}),qV=Hr(function(t){return Kx(t)}),qu=Hr(function(t,s){var r=qV(s).filter(function(n){return t===n.descriptor.droppableId}).sort(function(n,a){return n.descriptor.index-a.descriptor.index});return r});function vb(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function rv(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var nv=Hr(function(t,s){return s.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),HV=function(t){var s=t.isMovingForward,r=t.draggable,n=t.destination,a=t.insideDestination,i=t.previousImpact;if(!n.isCombineEnabled)return null;var l=vb(i);if(!l)return null;function o(j){var x={type:"COMBINE",combine:{draggableId:j,droppableId:n.descriptor.id}};return it({},i,{at:x})}var c=i.displaced.all,d=c.length?c[0]:null;if(s)return d?o(d):null;var u=nv(r,a);if(!d){if(!u.length)return null;var m=u[u.length-1];return o(m.descriptor.id)}var h=gb(u,function(j){return j.descriptor.id===d});h===-1&&ct();var p=h-1;if(p<0)return null;var b=u[p];return o(b.descriptor.id)},Hu=function(t,s){return t.descriptor.droppableId===s.descriptor.id},cD={point:Gr,value:0},Oh={invisible:{},visible:{},all:[]},WV={displaced:Oh,displacedBy:cD,at:null},qa=function(t,s){return function(r){return t<=r&&r<=s}},dD=function(t){var s=qa(t.top,t.bottom),r=qa(t.left,t.right);return function(n){var a=s(n.top)&&s(n.bottom)&&r(n.left)&&r(n.right);if(a)return!0;var i=s(n.top)||s(n.bottom),l=r(n.left)||r(n.right),o=i&&l;if(o)return!0;var c=n.top<t.top&&n.bottom>t.bottom,d=n.left<t.left&&n.right>t.right,u=c&&d;if(u)return!0;var m=c&&l||d&&i;return m}},GV=function(t){var s=qa(t.top,t.bottom),r=qa(t.left,t.right);return function(n){var a=s(n.top)&&s(n.bottom)&&r(n.left)&&r(n.right);return a}},jb={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},uD={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},KV=function(t){return function(s){var r=qa(s.top,s.bottom),n=qa(s.left,s.right);return function(a){return t===jb?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)}}},YV=function(s,r){var n=r.frame?r.frame.scroll.diff.displacement:Gr;return dp(s,n)},QV=function(s,r,n){return r.subject.active?n(r.subject.active)(s):!1},ZV=function(s,r,n){return n(r)(s)},yb=function(s){var r=s.target,n=s.destination,a=s.viewport,i=s.withDroppableDisplacement,l=s.isVisibleThroughFrameFn,o=i?YV(r,n):r;return QV(o,n,l)&&ZV(o,a,l)},JV=function(s){return yb(it({},s,{isVisibleThroughFrameFn:dD}))},mD=function(s){return yb(it({},s,{isVisibleThroughFrameFn:GV}))},XV=function(s){return yb(it({},s,{isVisibleThroughFrameFn:KV(s.destination.axis)}))},eU=function(s,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var a=r.invisible,i=r.visible;if(a[s])return!1;var l=i[s];return l?l.shouldAnimate:!0};function tU(t,s){var r=t.page.marginBox,n={top:s.point.y,right:0,bottom:0,left:s.point.x};return fi(pb(r,n))}function $h(t){var s=t.afterDragging,r=t.destination,n=t.displacedBy,a=t.viewport,i=t.forceShouldAnimate,l=t.last;return s.reduce(function(c,d){var u=tU(d,n),m=d.descriptor.id;c.all.push(m);var h=JV({target:u,destination:r,viewport:a,withDroppableDisplacement:!0});if(!h)return c.invisible[d.descriptor.id]=!0,c;var p=eU(m,l,i),b={draggableId:m,shouldAnimate:p};return c.visible[m]=b,c},{all:[],visible:{},invisible:{}})}function sU(t,s){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return s.inHomeList?r:r+1}function h4(t){var s=t.insideDestination,r=t.inHomeList,n=t.displacedBy,a=t.destination,i=sU(s,{inHomeList:r});return{displaced:Oh,displacedBy:n,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function Yx(t){var s=t.draggable,r=t.insideDestination,n=t.destination,a=t.viewport,i=t.displacedBy,l=t.last,o=t.index,c=t.forceShouldAnimate,d=Hu(s,n);if(o==null)return h4({insideDestination:r,inHomeList:d,displacedBy:i,destination:n});var u=Jo(r,function(j){return j.descriptor.index===o});if(!u)return h4({insideDestination:r,inHomeList:d,displacedBy:i,destination:n});var m=nv(s,r),h=r.indexOf(u),p=m.slice(h),b=$h({afterDragging:p,destination:n,displacedBy:i,last:l,viewport:a.frame,forceShouldAnimate:c});return{displaced:b,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Vo(t,s){return!!s.effected[t]}var rU=function(t){var s=t.isMovingForward,r=t.destination,n=t.draggables,a=t.combine,i=t.afterCritical;if(!r.isCombineEnabled)return null;var l=a.draggableId,o=n[l],c=o.descriptor.index,d=Vo(l,i);return d?s?c:c-1:s?c+1:c},nU=function(t){var s=t.isMovingForward,r=t.isInHomeList,n=t.insideDestination,a=t.location;if(!n.length)return null;var i=a.index,l=s?i+1:i-1,o=n[0].descriptor.index,c=n[n.length-1].descriptor.index,d=r?c:c+1;return l<o||l>d?null:l},aU=function(t){var s=t.isMovingForward,r=t.isInHomeList,n=t.draggable,a=t.draggables,i=t.destination,l=t.insideDestination,o=t.previousImpact,c=t.viewport,d=t.afterCritical,u=o.at;if(u||ct(),u.type==="REORDER"){var m=nU({isMovingForward:s,isInHomeList:r,location:u.destination,insideDestination:l});return m==null?null:Yx({draggable:n,insideDestination:l,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:m})}var h=rU({isMovingForward:s,destination:i,displaced:o.displaced,draggables:a,combine:u.combine,afterCritical:d});return h==null?null:Yx({draggable:n,insideDestination:l,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:h})},iU=function(t){var s=t.displaced,r=t.afterCritical,n=t.combineWith,a=t.displacedBy,i=!!(s.visible[n]||s.invisible[n]);return Vo(n,r)?i?Gr:Uu(a.point):i?a.point:Gr},lU=function(t){var s=t.afterCritical,r=t.impact,n=t.draggables,a=rv(r);a||ct();var i=a.draggableId,l=n[i].page.borderBox.center,o=iU({displaced:r.displaced,afterCritical:s,combineWith:i,displacedBy:r.displacedBy});return sn(l,o)},hD=function(s,r){return r.margin[s.start]+r.borderBox[s.size]/2},oU=function(s,r){return r.margin[s.end]+r.borderBox[s.size]/2},bb=function(s,r,n){return r[s.crossAxisStart]+n.margin[s.crossAxisStart]+n.borderBox[s.crossAxisSize]/2},p4=function(s){var r=s.axis,n=s.moveRelativeTo,a=s.isMoving;return Uc(r.line,n.marginBox[r.end]+hD(r,a),bb(r,n.marginBox,a))},f4=function(s){var r=s.axis,n=s.moveRelativeTo,a=s.isMoving;return Uc(r.line,n.marginBox[r.start]-oU(r,a),bb(r,n.marginBox,a))},cU=function(s){var r=s.axis,n=s.moveInto,a=s.isMoving;return Uc(r.line,n.contentBox[r.start]+hD(r,a),bb(r,n.contentBox,a))},dU=function(t){var s=t.impact,r=t.draggable,n=t.draggables,a=t.droppable,i=t.afterCritical,l=qu(a.descriptor.id,n),o=r.page,c=a.axis;if(!l.length)return cU({axis:c,moveInto:a.page,isMoving:o});var d=s.displaced,u=s.displacedBy,m=d.all[0];if(m){var h=n[m];if(Vo(m,i))return f4({axis:c,moveRelativeTo:h.page,isMoving:o});var p=qx(h.page,u.point);return f4({axis:c,moveRelativeTo:p,isMoving:o})}var b=l[l.length-1];if(b.descriptor.id===r.descriptor.id)return o.borderBox.center;if(Vo(b.descriptor.id,i)){var j=qx(b.page,Uu(i.displacedBy.point));return p4({axis:c,moveRelativeTo:j,isMoving:o})}return p4({axis:c,moveRelativeTo:b.page,isMoving:o})},Xy=function(t,s){var r=t.frame;return r?sn(s,r.scroll.diff.displacement):s},uU=function(s){var r=s.impact,n=s.draggable,a=s.droppable,i=s.draggables,l=s.afterCritical,o=n.page.borderBox.center,c=r.at;return!a||!c?o:c.type==="REORDER"?dU({impact:r,draggable:n,draggables:i,droppable:a,afterCritical:l}):lU({impact:r,draggables:i,afterCritical:l})},av=function(t){var s=uU(t),r=t.droppable,n=r?Xy(r,s):s;return n},pD=function(t,s){var r=ha(s,t.scroll.initial),n=Uu(r),a=fi({top:s.y,bottom:s.y+t.frame.height,left:s.x,right:s.x+t.frame.width}),i={frame:a,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:s,diff:{value:r,displacement:n}}};return i};function x4(t,s){return t.map(function(r){return s[r]})}function mU(t,s){for(var r=0;r<s.length;r++){var n=s[r].visible[t];if(n)return n}return null}var hU=function(t){var s=t.impact,r=t.viewport,n=t.destination,a=t.draggables,i=t.maxScrollChange,l=pD(r,sn(r.scroll.current,i)),o=n.frame?xb(n,sn(n.frame.scroll.current,i)):n,c=s.displaced,d=$h({afterDragging:x4(c.all,a),destination:n,displacedBy:s.displacedBy,viewport:l.frame,last:c,forceShouldAnimate:!1}),u=$h({afterDragging:x4(c.all,a),destination:o,displacedBy:s.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),m={},h={},p=[c,d,u];c.all.forEach(function(j){var x=mU(j,p);if(x){h[j]=x;return}m[j]=!0});var b=it({},s,{displaced:{all:c.all,invisible:m,visible:h}});return b},pU=function(t,s){return sn(t.scroll.diff.displacement,s)},Nb=function(t){var s=t.pageBorderBoxCenter,r=t.draggable,n=t.viewport,a=pU(n,s),i=ha(a,r.page.borderBox.center);return sn(r.client.borderBox.center,i)},fD=function(t){var s=t.draggable,r=t.destination,n=t.newPageBorderBoxCenter,a=t.viewport,i=t.withDroppableDisplacement,l=t.onlyOnMainAxis,o=l===void 0?!1:l,c=ha(n,s.page.borderBox.center),d=dp(s.page.borderBox,c),u={target:d,destination:r,withDroppableDisplacement:i,viewport:a};return o?XV(u):mD(u)},fU=function(t){var s=t.isMovingForward,r=t.draggable,n=t.destination,a=t.draggables,i=t.previousImpact,l=t.viewport,o=t.previousPageBorderBoxCenter,c=t.previousClientSelection,d=t.afterCritical;if(!n.isEnabled)return null;var u=qu(n.descriptor.id,a),m=Hu(r,n),h=HV({isMovingForward:s,draggable:r,destination:n,insideDestination:u,previousImpact:i})||aU({isMovingForward:s,isInHomeList:m,draggable:r,draggables:a,destination:n,insideDestination:u,previousImpact:i,viewport:l,afterCritical:d});if(!h)return null;var p=av({impact:h,draggable:r,droppable:n,draggables:a,afterCritical:d}),b=fD({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(b){var j=Nb({pageBorderBoxCenter:p,draggable:r,viewport:l});return{clientSelection:j,impact:h,scrollJumpRequest:null}}var x=ha(p,o),f=hU({impact:h,viewport:l,destination:n,draggables:a,maxScrollChange:x});return{clientSelection:c,impact:f,scrollJumpRequest:x}},Tn=function(s){var r=s.subject.active;return r||ct(),r},xU=function(t){var s=t.isMovingForward,r=t.pageBorderBoxCenter,n=t.source,a=t.droppables,i=t.viewport,l=n.subject.active;if(!l)return null;var o=n.axis,c=qa(l[o.start],l[o.end]),d=sv(a).filter(function(m){return m!==n}).filter(function(m){return m.isEnabled}).filter(function(m){return!!m.subject.active}).filter(function(m){return dD(i.frame)(Tn(m))}).filter(function(m){var h=Tn(m);return s?l[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<l[o.crossAxisStart]}).filter(function(m){var h=Tn(m),p=qa(h[o.start],h[o.end]);return c(h[o.start])||c(h[o.end])||p(l[o.start])||p(l[o.end])}).sort(function(m,h){var p=Tn(m)[o.crossAxisStart],b=Tn(h)[o.crossAxisStart];return s?p-b:b-p}).filter(function(m,h,p){return Tn(m)[o.crossAxisStart]===Tn(p[0])[o.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var u=d.filter(function(m){var h=qa(Tn(m)[o.start],Tn(m)[o.end]);return h(r[o.line])});return u.length===1?u[0]:u.length>1?u.sort(function(m,h){return Tn(m)[o.start]-Tn(h)[o.start]})[0]:d.sort(function(m,h){var p=u4(r,m4(Tn(m))),b=u4(r,m4(Tn(h)));return p!==b?p-b:Tn(m)[o.start]-Tn(h)[o.start]})[0]},g4=function(s,r){var n=s.page.borderBox.center;return Vo(s.descriptor.id,r)?ha(n,r.displacedBy.point):n},gU=function(s,r){var n=s.page.borderBox;return Vo(s.descriptor.id,r)?dp(n,Uu(r.displacedBy.point)):n},vU=function(t){var s=t.pageBorderBoxCenter,r=t.viewport,n=t.destination,a=t.insideDestination,i=t.afterCritical,l=a.filter(function(o){return mD({target:gU(o,i),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var d=_h(s,Xy(n,g4(o,i))),u=_h(s,Xy(n,g4(c,i)));return d<u?-1:u<d?1:o.descriptor.index-c.descriptor.index});return l[0]||null},up=Hr(function(s,r){var n=r[s.line];return{value:n,point:Uc(s.line,n)}}),jU=function(s,r,n){var a=s.axis;if(s.descriptor.mode==="virtual")return Uc(a.line,r[a.line]);var i=s.subject.page.contentBox[a.size],l=qu(s.descriptor.id,n),o=l.reduce(function(u,m){return u+m.client.marginBox[a.size]},0),c=o+r[a.line],d=c-i;return d<=0?null:Uc(a.line,d)},xD=function(s,r){return it({},s,{scroll:it({},s.scroll,{max:r})})},gD=function(s,r,n){var a=s.frame;Hu(r,s)&&ct(),s.subject.withPlaceholder&&ct();var i=up(s.axis,r.displaceBy).point,l=jU(s,i,n),o={placeholderSize:i,increasedBy:l,oldFrameMaxScroll:s.frame?s.frame.scroll.max:null};if(!a){var c=Cu({page:s.subject.page,withPlaceholder:o,axis:s.axis,frame:s.frame});return it({},s,{subject:c})}var d=l?sn(a.scroll.max,l):a.scroll.max,u=xD(a,d),m=Cu({page:s.subject.page,withPlaceholder:o,axis:s.axis,frame:u});return it({},s,{subject:m,frame:u})},yU=function(s){var r=s.subject.withPlaceholder;r||ct();var n=s.frame;if(!n){var a=Cu({page:s.subject.page,axis:s.axis,frame:null,withPlaceholder:null});return it({},s,{subject:a})}var i=r.oldFrameMaxScroll;i||ct();var l=xD(n,i),o=Cu({page:s.subject.page,axis:s.axis,frame:l,withPlaceholder:null});return it({},s,{subject:o,frame:l})},bU=function(t){var s=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,n=t.insideDestination,a=t.draggable,i=t.draggables,l=t.destination,o=t.viewport,c=t.afterCritical;if(!r){if(n.length)return null;var d={displaced:Oh,displacedBy:cD,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},u=av({impact:d,draggable:a,droppable:l,draggables:i,afterCritical:c}),m=Hu(a,l)?l:gD(l,a,i),h=fD({draggable:a,destination:m,newPageBorderBoxCenter:u,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return h?d:null}var p=s[l.axis.line]<=r.page.borderBox.center[l.axis.line],b=function(){var x=r.descriptor.index;return r.descriptor.id===a.descriptor.id||p?x:x+1}(),j=up(l.axis,a.displaceBy);return Yx({draggable:a,insideDestination:n,destination:l,viewport:o,displacedBy:j,last:Oh,index:b})},NU=function(t){var s=t.isMovingForward,r=t.previousPageBorderBoxCenter,n=t.draggable,a=t.isOver,i=t.draggables,l=t.droppables,o=t.viewport,c=t.afterCritical,d=xU({isMovingForward:s,pageBorderBoxCenter:r,source:a,droppables:l,viewport:o});if(!d)return null;var u=qu(d.descriptor.id,i),m=vU({pageBorderBoxCenter:r,viewport:o,destination:d,insideDestination:u,afterCritical:c}),h=bU({previousPageBorderBoxCenter:r,destination:d,draggable:n,draggables:i,moveRelativeTo:m,insideDestination:u,viewport:o,afterCritical:c});if(!h)return null;var p=av({impact:h,draggable:n,droppable:d,draggables:i,afterCritical:c}),b=Nb({pageBorderBoxCenter:p,draggable:n,viewport:o});return{clientSelection:b,impact:h,scrollJumpRequest:null}},ya=function(t){var s=t.at;return s?s.type==="REORDER"?s.destination.droppableId:s.combine.droppableId:null},wU=function(s,r){var n=ya(s);return n?r[n]:null},SU=function(t){var s=t.state,r=t.type,n=wU(s.impact,s.dimensions.droppables),a=!!n,i=s.dimensions.droppables[s.critical.droppable.id],l=n||i,o=l.axis.direction,c=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!a)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",u=s.dimensions.draggables[s.critical.draggable.id],m=s.current.page.borderBoxCenter,h=s.dimensions,p=h.draggables,b=h.droppables;return c?fU({isMovingForward:d,previousPageBorderBoxCenter:m,draggable:u,destination:l,draggables:p,viewport:s.viewport,previousClientSelection:s.current.client.selection,previousImpact:s.impact,afterCritical:s.afterCritical}):NU({isMovingForward:d,previousPageBorderBoxCenter:m,draggable:u,isOver:l,draggables:p,droppables:b,viewport:s.viewport,afterCritical:s.afterCritical})};function fc(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function vD(t){var s=qa(t.top,t.bottom),r=qa(t.left,t.right);return function(a){return s(a.y)&&r(a.x)}}function CU(t,s){return t.left<s.right&&t.right>s.left&&t.top<s.bottom&&t.bottom>s.top}function AU(t){var s=t.pageBorderBox,r=t.draggable,n=t.candidates,a=r.page.borderBox.center,i=n.map(function(l){var o=l.axis,c=Uc(l.axis.line,s.center[o.line],l.page.borderBox.center[o.crossAxisLine]);return{id:l.descriptor.id,distance:_h(a,c)}}).sort(function(l,o){return o.distance-l.distance});return i[0]?i[0].id:null}function TU(t){var s=t.pageBorderBox,r=t.draggable,n=t.droppables,a=sv(n).filter(function(i){if(!i.isEnabled)return!1;var l=i.subject.active;if(!l||!CU(s,l))return!1;if(vD(l)(s.center))return!0;var o=i.axis,c=l.center[o.crossAxisLine],d=s[o.crossAxisStart],u=s[o.crossAxisEnd],m=qa(l[o.crossAxisStart],l[o.crossAxisEnd]),h=m(d),p=m(u);return!h&&!p?!0:h?d<c:u>c});return a.length?a.length===1?a[0].descriptor.id:AU({pageBorderBox:s,draggable:r,candidates:a}):null}var jD=function(s,r){return fi(dp(s,r))},EU=function(t,s){var r=t.frame;return r?jD(s,r.scroll.diff.value):s};function yD(t){var s=t.displaced,r=t.id;return!!(s.visible[r]||s.invisible[r])}function PU(t){var s=t.draggable,r=t.closest,n=t.inHomeList;return r?n&&r.descriptor.index>s.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var DU=function(t){var s=t.pageBorderBoxWithDroppableScroll,r=t.draggable,n=t.destination,a=t.insideDestination,i=t.last,l=t.viewport,o=t.afterCritical,c=n.axis,d=up(n.axis,r.displaceBy),u=d.value,m=s[c.start],h=s[c.end],p=nv(r,a),b=Jo(p,function(x){var f=x.descriptor.id,g=x.page.borderBox.center[c.line],v=Vo(f,o),w=yD({displaced:i,id:f});return v?w?h<=g:m<g-u:w?h<=g+u:m<g}),j=PU({draggable:r,closest:b,inHomeList:Hu(r,n)});return Yx({draggable:r,insideDestination:a,destination:n,viewport:l,last:i,displacedBy:d,index:j})},IU=4,kU=function(t){var s=t.draggable,r=t.pageBorderBoxWithDroppableScroll,n=t.previousImpact,a=t.destination,i=t.insideDestination,l=t.afterCritical;if(!a.isCombineEnabled)return null;var o=a.axis,c=up(a.axis,s.displaceBy),d=c.value,u=r[o.start],m=r[o.end],h=nv(s,i),p=Jo(h,function(j){var x=j.descriptor.id,f=j.page.borderBox,g=f[o.size],v=g/IU,w=Vo(x,l),k=yD({displaced:n.displaced,id:x});return w?k?m>f[o.start]+v&&m<f[o.end]-v:u>f[o.start]-d+v&&u<f[o.end]-d-v:k?m>f[o.start]+d+v&&m<f[o.end]+d-v:u>f[o.start]+v&&u<f[o.end]-v});if(!p)return null;var b={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}};return b},bD=function(t){var s=t.pageOffset,r=t.draggable,n=t.draggables,a=t.droppables,i=t.previousImpact,l=t.viewport,o=t.afterCritical,c=jD(r.page.borderBox,s),d=TU({pageBorderBox:c,draggable:r,droppables:a});if(!d)return WV;var u=a[d],m=qu(u.descriptor.id,n),h=EU(u,c);return kU({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:i,destination:u,insideDestination:m,afterCritical:o})||DU({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:u,insideDestination:m,last:i.displaced,viewport:l,afterCritical:o})},wb=function(t,s){var r;return it({},t,(r={},r[s.descriptor.id]=s,r))},LU=function(s){var r=s.previousImpact,n=s.impact,a=s.droppables,i=ya(r),l=ya(n);if(!i||i===l)return a;var o=a[i];if(!o.subject.withPlaceholder)return a;var c=yU(o);return wb(a,c)},FU=function(t){var s=t.draggable,r=t.draggables,n=t.droppables,a=t.previousImpact,i=t.impact,l=LU({previousImpact:a,impact:i,droppables:n}),o=ya(i);if(!o)return l;var c=n[o];if(Hu(s,c)||c.subject.withPlaceholder)return l;var d=gD(c,s,r);return wb(l,d)},ah=function(t){var s=t.state,r=t.clientSelection,n=t.dimensions,a=t.viewport,i=t.impact,l=t.scrollJumpRequest,o=a||s.viewport,c=n||s.dimensions,d=r||s.current.client.selection,u=ha(d,s.initial.client.selection),m={offset:u,selection:d,borderBoxCenter:sn(s.initial.client.borderBoxCenter,u)},h={selection:sn(m.selection,o.scroll.current),borderBoxCenter:sn(m.borderBoxCenter,o.scroll.current),offset:sn(m.offset,o.scroll.diff.value)},p={client:m,page:h};if(s.phase==="COLLECTING")return it({phase:"COLLECTING"},s,{dimensions:c,viewport:o,current:p});var b=c.draggables[s.critical.draggable.id],j=i||bD({pageOffset:h.offset,draggable:b,draggables:c.draggables,droppables:c.droppables,previousImpact:s.impact,viewport:o,afterCritical:s.afterCritical}),x=FU({draggable:b,impact:j,previousImpact:s.impact,draggables:c.draggables,droppables:c.droppables}),f=it({},s,{current:p,dimensions:{draggables:c.draggables,droppables:x},impact:j,viewport:o,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null});return f};function RU(t,s){return t.map(function(r){return s[r]})}var ND=function(t){var s=t.impact,r=t.viewport,n=t.draggables,a=t.destination,i=t.forceShouldAnimate,l=s.displaced,o=RU(l.all,n),c=$h({afterDragging:o,destination:a,displacedBy:s.displacedBy,viewport:r.frame,forceShouldAnimate:i,last:l});return it({},s,{displaced:c})},wD=function(t){var s=t.impact,r=t.draggable,n=t.droppable,a=t.draggables,i=t.viewport,l=t.afterCritical,o=av({impact:s,draggable:r,draggables:a,droppable:n,afterCritical:l});return Nb({pageBorderBoxCenter:o,draggable:r,viewport:i})},SD=function(t){var s=t.state,r=t.dimensions,n=t.viewport;s.movementMode!=="SNAP"&&ct();var a=s.impact,i=n||s.viewport,l=r||s.dimensions,o=l.draggables,c=l.droppables,d=o[s.critical.draggable.id],u=ya(a);u||ct();var m=c[u],h=ND({impact:a,viewport:i,destination:m,draggables:o}),p=wD({impact:h,draggable:d,droppable:m,draggables:o,viewport:i,afterCritical:s.afterCritical});return ah({impact:h,clientSelection:p,state:s,dimensions:l,viewport:i})},MU=function(t){return{index:t.index,droppableId:t.droppableId}},CD=function(t){var s=t.draggable,r=t.home,n=t.draggables,a=t.viewport,i=up(r.axis,s.displaceBy),l=qu(r.descriptor.id,n),o=l.indexOf(s);o===-1&&ct();var c=l.slice(o+1),d=c.reduce(function(p,b){return p[b.descriptor.id]=!0,p},{}),u={inVirtualList:r.descriptor.mode==="virtual",displacedBy:i,effected:d},m=$h({afterDragging:c,destination:r,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),h={displaced:m,displacedBy:i,at:{type:"REORDER",destination:MU(s.descriptor)}};return{impact:h,afterCritical:u}},_U=function(t,s){return{draggables:t.draggables,droppables:wb(t.droppables,s)}},OU=function(t){var s=t.draggable,r=t.offset,n=t.initialWindowScroll,a=qx(s.client,r),i=Hx(a,n),l=it({},s,{placeholder:it({},s.placeholder,{client:a}),client:a,page:i});return l},$U=function(t){var s=t.frame;return s||ct(),s},BU=function(t){var s=t.additions,r=t.updatedDroppables,n=t.viewport,a=n.scroll.diff.value;return s.map(function(i){var l=i.descriptor.droppableId,o=r[l],c=$U(o),d=c.scroll.diff.value,u=sn(a,d),m=OU({draggable:i,offset:u,initialWindowScroll:n.scroll.initial});return m})},zU=function(t){var s=t.state,r=t.published,n=r.modified.map(function(v){var w=s.dimensions.droppables[v.droppableId],k=xb(w,v.scroll);return k}),a=it({},s.dimensions.droppables,{},lD(n)),i=oD(BU({additions:r.additions,updatedDroppables:a,viewport:s.viewport})),l=it({},s.dimensions.draggables,{},i);r.removals.forEach(function(v){delete l[v]});var o={droppables:a,draggables:l},c=ya(s.impact),d=c?o.droppables[c]:null,u=o.draggables[s.critical.draggable.id],m=o.droppables[s.critical.droppable.id],h=CD({draggable:u,home:m,draggables:l,viewport:s.viewport}),p=h.impact,b=h.afterCritical,j=d&&d.isCombineEnabled?s.impact:p,x=bD({pageOffset:s.current.page.offset,draggable:o.draggables[s.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:j,viewport:s.viewport,afterCritical:b}),f=it({phase:"DRAGGING"},s,{phase:"DRAGGING",impact:x,onLiftImpact:p,dimensions:o,afterCritical:b,forceShouldAnimate:!1});if(s.phase==="COLLECTING")return f;var g=it({phase:"DROP_PENDING"},f,{phase:"DROP_PENDING",reason:s.reason,isWaiting:!1});return g},e1=function(s){return s.movementMode==="SNAP"},sj=function(s,r,n){var a=_U(s.dimensions,r);return!e1(s)||n?ah({state:s,dimensions:a}):SD({state:s,dimensions:a})};function rj(t){return t.isDragging&&t.movementMode==="SNAP"?it({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var v4={phase:"IDLE",completed:null,shouldFlush:!1},VU=function(t,s){if(t===void 0&&(t=v4),s.type==="FLUSH")return it({},v4,{shouldFlush:!0});if(s.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ct();var r=s.payload,n=r.critical,a=r.clientSelection,i=r.viewport,l=r.dimensions,o=r.movementMode,c=l.draggables[n.draggable.id],d=l.droppables[n.droppable.id],u={selection:a,borderBoxCenter:c.client.borderBox.center,offset:Gr},m={client:u,page:{selection:sn(u.selection,i.scroll.initial),borderBoxCenter:sn(u.selection,i.scroll.initial),offset:sn(u.selection,i.scroll.diff.value)}},h=sv(l.droppables).every(function(je){return!je.isFixedOnPage}),p=CD({draggable:c,home:d,draggables:l.draggables,viewport:i}),b=p.impact,j=p.afterCritical,x={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:l,initial:m,current:m,isWindowScrollAllowed:h,impact:b,afterCritical:j,onLiftImpact:b,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return x}if(s.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ct();var f=it({phase:"COLLECTING"},t,{phase:"COLLECTING"});return f}if(s.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ct(),zU({state:t,published:s.payload});if(s.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;fc(t)||ct();var g=s.payload.client;return Lo(g,t.current.client.selection)?t:ah({state:t,clientSelection:g,impact:e1(t)?t.impact:null})}if(s.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return rj(t);fc(t)||ct();var v=s.payload,w=v.id,k=v.newScroll,T=t.dimensions.droppables[w];if(!T)return t;var S=xb(T,k);return sj(t,S,!1)}if(s.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;fc(t)||ct();var C=s.payload,E=C.id,M=C.isEnabled,D=t.dimensions.droppables[E];D||ct(),D.isEnabled===M&&ct();var A=it({},D,{isEnabled:M});return sj(t,A,!0)}if(s.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;fc(t)||ct();var I=s.payload,L=I.id,F=I.isCombineEnabled,B=t.dimensions.droppables[L];B||ct(),B.isCombineEnabled===F&&ct();var R=it({},B,{isCombineEnabled:F});return sj(t,R,!0)}if(s.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;fc(t)||ct(),t.isWindowScrollAllowed||ct();var $=s.payload.newScroll;if(Lo(t.viewport.scroll.current,$))return rj(t);var U=pD(t.viewport,$);return e1(t)?SD({state:t,viewport:U}):ah({state:t,viewport:U})}if(s.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!fc(t))return t;var W=s.payload.maxScroll;if(Lo(W,t.viewport.scroll.max))return t;var q=it({},t.viewport,{scroll:it({},t.viewport.scroll,{max:W})});return it({phase:"DRAGGING"},t,{viewport:q})}if(s.type==="MOVE_UP"||s.type==="MOVE_DOWN"||s.type==="MOVE_LEFT"||s.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ct();var _=SU({state:t,type:s.type});return _?ah({state:t,impact:_.impact,clientSelection:_.clientSelection,scrollJumpRequest:_.scrollJumpRequest}):t}if(s.type==="DROP_PENDING"){var V=s.payload.reason;t.phase!=="COLLECTING"&&ct();var Q=it({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:V});return Q}if(s.type==="DROP_ANIMATE"){var G=s.payload,Y=G.completed,ne=G.dropDuration,le=G.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ct();var oe={phase:"DROP_ANIMATING",completed:Y,dropDuration:ne,newHomeClientOffset:le,dimensions:t.dimensions};return oe}if(s.type==="DROP_COMPLETE"){var pe=s.payload.completed;return{phase:"IDLE",completed:pe,shouldFlush:!1}}return t},UU=function(s){return{type:"BEFORE_INITIAL_CAPTURE",payload:s}},qU=function(s){return{type:"LIFT",payload:s}},HU=function(s){return{type:"INITIAL_PUBLISH",payload:s}},WU=function(s){return{type:"PUBLISH_WHILE_DRAGGING",payload:s}},GU=function(){return{type:"COLLECTION_STARTING",payload:null}},KU=function(s){return{type:"UPDATE_DROPPABLE_SCROLL",payload:s}},YU=function(s){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:s}},QU=function(s){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:s}},AD=function(s){return{type:"MOVE",payload:s}},ZU=function(s){return{type:"MOVE_BY_WINDOW_SCROLL",payload:s}},JU=function(s){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:s}},XU=function(){return{type:"MOVE_UP",payload:null}},eq=function(){return{type:"MOVE_DOWN",payload:null}},tq=function(){return{type:"MOVE_RIGHT",payload:null}},sq=function(){return{type:"MOVE_LEFT",payload:null}},Sb=function(){return{type:"FLUSH",payload:null}},rq=function(s){return{type:"DROP_ANIMATE",payload:s}},Cb=function(s){return{type:"DROP_COMPLETE",payload:s}},TD=function(s){return{type:"DROP",payload:s}},nq=function(s){return{type:"DROP_PENDING",payload:s}},ED=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},aq=function(t){return function(s){var r=s.getState,n=s.dispatch;return function(a){return function(i){if(i.type!=="LIFT"){a(i);return}var l=i.payload,o=l.id,c=l.clientSelection,d=l.movementMode,u=r();u.phase==="DROP_ANIMATING"&&n(Cb({completed:u.completed})),r().phase!=="IDLE"&&ct(),n(Sb()),n(UU({draggableId:o,movementMode:d}));var m={shouldPublishImmediately:d==="SNAP"},h={draggableId:o,scrollOptions:m},p=t.startPublishing(h),b=p.critical,j=p.dimensions,x=p.viewport;n(HU({critical:b,dimensions:j,clientSelection:c,movementMode:d,viewport:x}))}}}},iq=function(t){return function(){return function(s){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),s(r)}}}},Ab={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Bh={opacity:{drop:0,combining:.7},scale:{drop:.75}},Tb={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},uc=Tb.outOfTheWay+"s "+Ab.outOfTheWay,ih={fluid:"opacity "+uc,snap:"transform "+uc+", opacity "+uc,drop:function(s){var r=s+"s "+Ab.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+uc,placeholder:"height "+uc+", width "+uc+", margin "+uc},j4=function(s){return Lo(s,Gr)?null:"translate("+s.x+"px, "+s.y+"px)"},t1={moveTo:j4,drop:function(s,r){var n=j4(s);return n?r?n+" scale("+Bh.scale.drop+")":n:null}},s1=Tb.minDropTime,PD=Tb.maxDropTime,lq=PD-s1,y4=1500,oq=.6,cq=function(t){var s=t.current,r=t.destination,n=t.reason,a=_h(s,r);if(a<=0)return s1;if(a>=y4)return PD;var i=a/y4,l=s1+lq*i,o=n==="CANCEL"?l*oq:l;return Number(o.toFixed(2))},dq=function(t){var s=t.impact,r=t.draggable,n=t.dimensions,a=t.viewport,i=t.afterCritical,l=n.draggables,o=n.droppables,c=ya(s),d=c?o[c]:null,u=o[r.descriptor.droppableId],m=wD({impact:s,draggable:r,draggables:l,afterCritical:i,droppable:d||u,viewport:a}),h=ha(m,r.client.borderBox.center);return h},uq=function(t){var s=t.draggables,r=t.reason,n=t.lastImpact,a=t.home,i=t.viewport,l=t.onLiftImpact;if(!n.at||r!=="DROP"){var o=ND({draggables:s,impact:l,destination:a,viewport:i,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=it({},n,{displaced:Oh});return{impact:c,didDropInsideDroppable:!0}},mq=function(t){var s=t.getState,r=t.dispatch;return function(n){return function(a){if(a.type!=="DROP"){n(a);return}var i=s(),l=a.payload.reason;if(i.phase==="COLLECTING"){r(nq({reason:l}));return}if(i.phase!=="IDLE"){var o=i.phase==="DROP_PENDING"&&i.isWaiting;o&&ct(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||ct();var c=i.critical,d=i.dimensions,u=d.draggables[i.critical.draggable.id],m=uq({reason:l,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=m.impact,p=m.didDropInsideDroppable,b=p?vb(h):null,j=p?rv(h):null,x={index:c.draggable.index,droppableId:c.droppable.id},f={draggableId:u.descriptor.id,type:u.descriptor.type,source:x,reason:l,mode:i.movementMode,destination:b,combine:j},g=dq({impact:h,draggable:u,dimensions:d,viewport:i.viewport,afterCritical:i.afterCritical}),v={critical:i.critical,afterCritical:i.afterCritical,result:f,impact:h},w=!Lo(i.current.client.offset,g)||!!f.combine;if(!w){r(Cb({completed:v}));return}var k=cq({current:i.current.client.offset,destination:g,reason:l}),T={newHomeClientOffset:g,dropDuration:k,completed:v};r(rq(T))}}}},DD=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function hq(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function pq(t){var s=t.onWindowScroll;function r(){s(DD())}var n=Mh(r),a=hq(n),i=ko;function l(){return i!==ko}function o(){l()&&ct(),i=za(window,[a])}function c(){l()||ct(),n.cancel(),i(),i=ko}return{start:o,stop:c,isActive:l}}var fq=function(s){return s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATE"||s.type==="FLUSH"},xq=function(t){var s=pq({onWindowScroll:function(n){t.dispatch(ZU({newScroll:n}))}});return function(r){return function(n){!s.isActive()&&n.type==="INITIAL_PUBLISH"&&s.start(),s.isActive()&&fq(n)&&s.stop(),r(n)}}},gq=function(t){var s=!1,r=!1,n=setTimeout(function(){r=!0}),a=function(l){s||r||(s=!0,t(l),clearTimeout(n))};return a.wasCalled=function(){return s},a},vq=function(){var t=[],s=function(i){var l=gb(t,function(d){return d.timerId===i});l===-1&&ct();var o=t.splice(l,1),c=o[0];c.callback()},r=function(i){var l=setTimeout(function(){return s(l)}),o={timerId:l,callback:i};t.push(o)},n=function(){if(t.length){var i=[].concat(t);t.length=0,i.forEach(function(l){clearTimeout(l.timerId),l.callback()})}};return{add:r,flush:n}},jq=function(s,r){return s==null&&r==null?!0:s==null||r==null?!1:s.droppableId===r.droppableId&&s.index===r.index},yq=function(s,r){return s==null&&r==null?!0:s==null||r==null?!1:s.draggableId===r.draggableId&&s.droppableId===r.droppableId},bq=function(s,r){if(s===r)return!0;var n=s.draggable.id===r.draggable.id&&s.draggable.droppableId===r.draggable.droppableId&&s.draggable.type===r.draggable.type&&s.draggable.index===r.draggable.index,a=s.droppable.id===r.droppable.id&&s.droppable.type===r.droppable.type;return n&&a},Rm=function(s,r){r()},If=function(s,r){return{draggableId:s.draggable.id,type:s.droppable.type,source:{droppableId:s.droppable.id,index:s.draggable.index},mode:r}},nj=function(s,r,n,a){if(!s){n(a(r));return}var i=gq(n),l={announce:i};s(r,l),i.wasCalled()||n(a(r))},Nq=function(t,s){var r=vq(),n=null,a=function(h,p){n&&ct(),Rm("onBeforeCapture",function(){var b=t().onBeforeCapture;if(b){var j={draggableId:h,mode:p};b(j)}})},i=function(h,p){n&&ct(),Rm("onBeforeDragStart",function(){var b=t().onBeforeDragStart;b&&b(If(h,p))})},l=function(h,p){n&&ct();var b=If(h,p);n={mode:p,lastCritical:h,lastLocation:b.source,lastCombine:null},r.add(function(){Rm("onDragStart",function(){return nj(t().onDragStart,b,s,ox.onDragStart)})})},o=function(h,p){var b=vb(p),j=rv(p);n||ct();var x=!bq(h,n.lastCritical);x&&(n.lastCritical=h);var f=!jq(n.lastLocation,b);f&&(n.lastLocation=b);var g=!yq(n.lastCombine,j);if(g&&(n.lastCombine=j),!(!x&&!f&&!g)){var v=it({},If(h,n.mode),{combine:j,destination:b});r.add(function(){Rm("onDragUpdate",function(){return nj(t().onDragUpdate,v,s,ox.onDragUpdate)})})}},c=function(){n||ct(),r.flush()},d=function(h){n||ct(),n=null,Rm("onDragEnd",function(){return nj(t().onDragEnd,h,s,ox.onDragEnd)})},u=function(){if(n){var h=it({},If(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});d(h)}};return{beforeCapture:a,beforeStart:i,start:l,update:o,flush:c,drop:d,abort:u}},wq=function(t,s){var r=Nq(t,s);return function(n){return function(a){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var l=i.payload.critical;r.beforeStart(l,i.payload.movementMode),a(i),r.start(l,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var o=i.payload.completed.result;r.flush(),a(i),r.drop(o);return}if(a(i),i.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Sq=function(t){return function(s){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){s(r);return}var n=t.getState();n.phase!=="DROP_ANIMATING"&&ct(),t.dispatch(Cb({completed:n.completed}))}}},Cq=function(t){var s=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),s&&(s(),s=null)}return function(a){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),a(i),i.type==="DROP_ANIMATE"){var l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=t.getState();c.phase==="DROP_ANIMATING"&&t.dispatch(ED())}};r=requestAnimationFrame(function(){r=null,s=za(window,[l])})}}}},Aq=function(t){return function(){return function(s){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),s(r)}}}},Tq=function(t){var s=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){s=!0,t.tryRecordFocus(n.payload.critical.draggable.id),r(n),t.tryRestoreFocusRecorded();return}if(r(n),!!s){if(n.type==="FLUSH"){s=!1,t.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){s=!1;var a=n.payload.completed.result;a.combine&&t.tryShiftRecord(a.draggableId,a.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},Eq=function(s){return s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATE"||s.type==="FLUSH"},Pq=function(t){return function(s){return function(r){return function(n){if(Eq(n)){t.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var a=s.getState();a.phase!=="DRAGGING"&&ct(),t.start(a);return}r(n),t.scroll(s.getState())}}}},Dq=function(t){return function(s){return function(r){if(s(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=t.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||t.dispatch(TD({reason:n.reason})))}}}},Iq=LP,kq=function(t){var s=t.dimensionMarshal,r=t.focusMarshal,n=t.styleMarshal,a=t.getResponders,i=t.announce,l=t.autoScroller;return kP(VU,Iq(hz(iq(n),Aq(s),aq(s),mq,Sq,Cq,Dq,Pq(l),xq,Tq(r),wq(a,i))))},aj=function(){return{additions:{},removals:{},modified:{}}};function Lq(t){var s=t.registry,r=t.callbacks,n=aj(),a=null,i=function(){a||(r.collectionStarting(),a=requestAnimationFrame(function(){a=null;var u=n,m=u.additions,h=u.removals,p=u.modified,b=Object.keys(m).map(function(f){return s.draggable.getById(f).getDimension(Gr)}).sort(function(f,g){return f.descriptor.index-g.descriptor.index}),j=Object.keys(p).map(function(f){var g=s.droppable.getById(f),v=g.callbacks.getScrollWhileDragging();return{droppableId:f,scroll:v}}),x={additions:b,removals:Object.keys(h),modified:j};n=aj(),r.publish(x)}))},l=function(u){var m=u.descriptor.id;n.additions[m]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[m]&&delete n.removals[m],i()},o=function(u){var m=u.descriptor;n.removals[m.id]=!0,n.modified[m.droppableId]=!0,n.additions[m.id]&&delete n.additions[m.id],i()},c=function(){a&&(cancelAnimationFrame(a),a=null,n=aj())};return{add:l,remove:o,stop:c}}var ID=function(t){var s=t.scrollHeight,r=t.scrollWidth,n=t.height,a=t.width,i=ha({x:r,y:s},{x:a,y:n}),l={x:Math.max(0,i.x),y:Math.max(0,i.y)};return l},kD=function(){var t=document.documentElement;return t||ct(),t},LD=function(){var t=kD(),s=ID({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return s},Fq=function(){var t=DD(),s=LD(),r=t.y,n=t.x,a=kD(),i=a.clientWidth,l=a.clientHeight,o=n+i,c=r+l,d=fi({top:r,left:n,right:o,bottom:c}),u={frame:d,scroll:{initial:t,current:t,max:s,diff:{value:Gr,displacement:Gr}}};return u},Rq=function(t){var s=t.critical,r=t.scrollOptions,n=t.registry,a=Fq(),i=a.scroll.current,l=s.droppable,o=n.droppable.getAllByType(l.type).map(function(m){return m.callbacks.getDimensionAndWatchScroll(i,r)}),c=n.draggable.getAllByType(s.draggable.type).map(function(m){return m.getDimension(i)}),d={draggables:oD(c),droppables:lD(o)},u={dimensions:d,critical:s,viewport:a};return u};function b4(t,s,r){if(r.descriptor.id===s.id||r.descriptor.type!==s.type)return!1;var n=t.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Mq=function(t,s){var r=null,n=Lq({callbacks:{publish:s.publishWhileDragging,collectionStarting:s.collectionStarting},registry:t}),a=function(p,b){t.droppable.exists(p)||ct(),r&&s.updateDroppableIsEnabled({id:p,isEnabled:b})},i=function(p,b){r&&(t.droppable.exists(p)||ct(),s.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:b}))},l=function(p,b){r&&(t.droppable.exists(p)||ct(),s.updateDroppableScroll({id:p,newScroll:b}))},o=function(p,b){r&&t.droppable.getById(p).callbacks.scroll(b)},c=function(){if(r){n.stop();var p=r.critical.droppable;t.droppable.getAllByType(p.type).forEach(function(b){return b.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(p){r||ct();var b=r.critical.draggable;p.type==="ADDITION"&&b4(t,b,p.value)&&n.add(p.value),p.type==="REMOVAL"&&b4(t,b,p.value)&&n.remove(p.value)},u=function(p){r&&ct();var b=t.draggable.getById(p.draggableId),j=t.droppable.getById(b.descriptor.droppableId),x={draggable:b.descriptor,droppable:j.descriptor},f=t.subscribe(d);return r={critical:x,unsubscribe:f},Rq({critical:x,registry:t,scrollOptions:p.scrollOptions})},m={updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:o,updateDroppableScroll:l,startPublishing:u,stopPublishing:c};return m},FD=function(t,s){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===s?!1:t.completed.result.reason==="DROP"},_q=function(t){window.scrollBy(t.x,t.y)},Oq=Hr(function(t){return sv(t).filter(function(s){return!(!s.isEnabled||!s.frame)})}),$q=function(s,r){var n=Jo(Oq(r),function(a){return a.frame||ct(),vD(a.frame.pageMarginBox)(s)});return n},Bq=function(t){var s=t.center,r=t.destination,n=t.droppables;if(r){var a=n[r];return a.frame?a:null}var i=$q(s,n);return i},Fo={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(s){return Math.pow(s,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},zq=function(t,s){var r=t[s.size]*Fo.startFromPercentage,n=t[s.size]*Fo.maxScrollAtPercentage,a={startScrollingFrom:r,maxScrollValueAt:n};return a},RD=function(t){var s=t.startOfRange,r=t.endOfRange,n=t.current,a=r-s;if(a===0)return 0;var i=n-s,l=i/a;return l},Eb=1,Vq=function(t,s){if(t>s.startScrollingFrom)return 0;if(t<=s.maxScrollValueAt)return Fo.maxPixelScroll;if(t===s.startScrollingFrom)return Eb;var r=RD({startOfRange:s.maxScrollValueAt,endOfRange:s.startScrollingFrom,current:t}),n=1-r,a=Fo.maxPixelScroll*Fo.ease(n);return Math.ceil(a)},N4=Fo.durationDampening.accelerateAt,w4=Fo.durationDampening.stopDampeningAt,Uq=function(t,s){var r=s,n=w4,a=Date.now(),i=a-r;if(i>=w4)return t;if(i<N4)return Eb;var l=RD({startOfRange:N4,endOfRange:n,current:i}),o=t*Fo.ease(l);return Math.ceil(o)},S4=function(t){var s=t.distanceToEdge,r=t.thresholds,n=t.dragStartTime,a=t.shouldUseTimeDampening,i=Vq(s,r);return i===0?0:a?Math.max(Uq(i,n),Eb):i},C4=function(t){var s=t.container,r=t.distanceToEdges,n=t.dragStartTime,a=t.axis,i=t.shouldUseTimeDampening,l=zq(s,a),o=r[a.end]<r[a.start];return o?S4({distanceToEdge:r[a.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i}):-1*S4({distanceToEdge:r[a.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i})},qq=function(t){var s=t.container,r=t.subject,n=t.proposedScroll,a=r.height>s.height,i=r.width>s.width;return!i&&!a?n:i&&a?null:{x:i?0:n.x,y:a?0:n.y}},Hq=aD(function(t){return t===0?0:t}),MD=function(t){var s=t.dragStartTime,r=t.container,n=t.subject,a=t.center,i=t.shouldUseTimeDampening,l={top:a.y-r.top,right:r.right-a.x,bottom:r.bottom-a.y,left:a.x-r.left},o=C4({container:r,distanceToEdges:l,dragStartTime:s,axis:jb,shouldUseTimeDampening:i}),c=C4({container:r,distanceToEdges:l,dragStartTime:s,axis:uD,shouldUseTimeDampening:i}),d=Hq({x:c,y:o});if(Lo(d,Gr))return null;var u=qq({container:r,subject:n,proposedScroll:d});return u?Lo(u,Gr)?null:u:null},Wq=aD(function(t){return t===0?0:t>0?1:-1}),Pb=function(){var t=function(r,n){return r<0?r:r>n?r-n:0};return function(s){var r=s.current,n=s.max,a=s.change,i=sn(r,a),l={x:t(i.x,n.x),y:t(i.y,n.y)};return Lo(l,Gr)?null:l}}(),_D=function(s){var r=s.max,n=s.current,a=s.change,i={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},l=Wq(a),o=Pb({max:i,current:n,change:l});return!o||l.x!==0&&o.x===0||l.y!==0&&o.y===0},Db=function(s,r){return _D({current:s.scroll.current,max:s.scroll.max,change:r})},Gq=function(s,r){if(!Db(s,r))return null;var n=s.scroll.max,a=s.scroll.current;return Pb({current:a,max:n,change:r})},Ib=function(s,r){var n=s.frame;return n?_D({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Kq=function(s,r){var n=s.frame;return!n||!Ib(s,r)?null:Pb({current:n.scroll.current,max:n.scroll.max,change:r})},Yq=function(t){var s=t.viewport,r=t.subject,n=t.center,a=t.dragStartTime,i=t.shouldUseTimeDampening,l=MD({dragStartTime:a,container:s.frame,subject:r,center:n,shouldUseTimeDampening:i});return l&&Db(s,l)?l:null},Qq=function(t){var s=t.droppable,r=t.subject,n=t.center,a=t.dragStartTime,i=t.shouldUseTimeDampening,l=s.frame;if(!l)return null;var o=MD({dragStartTime:a,container:l.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:i});return o&&Ib(s,o)?o:null},A4=function(t){var s=t.state,r=t.dragStartTime,n=t.shouldUseTimeDampening,a=t.scrollWindow,i=t.scrollDroppable,l=s.current.page.borderBoxCenter,o=s.dimensions.draggables[s.critical.draggable.id],c=o.page.marginBox;if(s.isWindowScrollAllowed){var d=s.viewport,u=Yq({dragStartTime:r,viewport:d,subject:c,center:l,shouldUseTimeDampening:n});if(u){a(u);return}}var m=Bq({center:l,destination:ya(s.impact),droppables:s.dimensions.droppables});if(m){var h=Qq({dragStartTime:r,droppable:m,subject:c,center:l,shouldUseTimeDampening:n});h&&i(m.descriptor.id,h)}},Zq=function(t){var s=t.scrollWindow,r=t.scrollDroppable,n=Mh(s),a=Mh(r),i=null,l=function(u){i||ct();var m=i,h=m.shouldUseTimeDampening,p=m.dragStartTime;A4({state:u,scrollWindow:n,scrollDroppable:a,dragStartTime:p,shouldUseTimeDampening:h})},o=function(u){i&&ct();var m=Date.now(),h=!1,p=function(){h=!0};A4({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p}),i={dragStartTime:m,shouldUseTimeDampening:h},h&&l(u)},c=function(){i&&(n.cancel(),a.cancel(),i=null)};return{start:o,stop:c,scroll:l}},Jq=function(t){var s=t.move,r=t.scrollDroppable,n=t.scrollWindow,a=function(d,u){var m=sn(d.current.client.selection,u);s({client:m})},i=function(d,u){if(!Ib(d,u))return u;var m=Kq(d,u);if(!m)return r(d.descriptor.id,u),null;var h=ha(u,m);r(d.descriptor.id,h);var p=ha(u,h);return p},l=function(d,u,m){if(!d||!Db(u,m))return m;var h=Gq(u,m);if(!h)return n(m),null;var p=ha(m,h);n(p);var b=ha(m,p);return b},o=function(d){var u=d.scrollJumpRequest;if(u){var m=ya(d.impact);m||ct();var h=i(d.dimensions.droppables[m],u);if(h){var p=d.viewport,b=l(d.isWindowScrollAllowed,p,h);b&&a(d,b)}}};return o},Xq=function(t){var s=t.scrollDroppable,r=t.scrollWindow,n=t.move,a=Zq({scrollWindow:r,scrollDroppable:s}),i=Jq({move:n,scrollWindow:r,scrollDroppable:s}),l=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){a.scroll(d);return}d.scrollJumpRequest&&i(d)}},o={scroll:l,start:a.start,stop:a.stop};return o},Au="data-rbd",Tu=function(){var t=Au+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),r1=function(){var t=Au+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),eH=function(){var t=Au+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),T4={contextId:Au+"-scroll-container-context-id"},tH=function(s){return function(r){return"["+r+'="'+s+'"]'}},Mm=function(s,r){return s.map(function(n){var a=n.styles[r];return a?n.selector+" { "+a+" }":""}).join(" ")},sH="pointer-events: none;",rH=function(t){var s=tH(t),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:s(Tu.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:sH,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+ih.outOfTheWay+`;
    `;return{selector:s(r1.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),a={selector:s(eH.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},l=[n,r,a,i];return{always:Mm(l,"always"),resting:Mm(l,"resting"),dragging:Mm(l,"dragging"),dropAnimating:Mm(l,"dropAnimating"),userCancel:Mm(l,"userCancel")}},ba=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,ij=function(){var s=document.querySelector("head");return s||ct(),s},E4=function(s){var r=document.createElement("style");return s&&r.setAttribute("nonce",s),r.type="text/css",r};function nH(t,s){var r=os(function(){return rH(t)},[t]),n=y.useRef(null),a=y.useRef(null),i=At(Hr(function(m){var h=a.current;h||ct(),h.textContent=m}),[]),l=At(function(m){var h=n.current;h||ct(),h.textContent=m},[]);ba(function(){!n.current&&!a.current||ct();var m=E4(s),h=E4(s);return n.current=m,a.current=h,m.setAttribute(Au+"-always",t),h.setAttribute(Au+"-dynamic",t),ij().appendChild(m),ij().appendChild(h),l(r.always),i(r.resting),function(){var p=function(j){var x=j.current;x||ct(),ij().removeChild(x),j.current=null};p(n),p(a)}},[s,l,i,r.always,r.resting,t]);var o=At(function(){return i(r.dragging)},[i,r.dragging]),c=At(function(m){if(m==="DROP"){i(r.dropAnimating);return}i(r.userCancel)},[i,r.dropAnimating,r.userCancel]),d=At(function(){a.current&&i(r.resting)},[i,r.resting]),u=os(function(){return{dragging:o,dropping:c,resting:d}},[o,c,d]);return u}var OD=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function iv(t){return t instanceof OD(t).HTMLElement}function aH(t,s){var r="["+Tu.contextId+'="'+t+'"]',n=iD(document.querySelectorAll(r));if(!n.length)return null;var a=Jo(n,function(i){return i.getAttribute(Tu.draggableId)===s});return!a||!iv(a)?null:a}function iH(t){var s=y.useRef({}),r=y.useRef(null),n=y.useRef(null),a=y.useRef(!1),i=At(function(h,p){var b={id:h,focus:p};return s.current[h]=b,function(){var x=s.current,f=x[h];f!==b&&delete x[h]}},[]),l=At(function(h){var p=aH(t,h);p&&p!==document.activeElement&&p.focus()},[t]),o=At(function(h,p){r.current===h&&(r.current=p)},[]),c=At(function(){n.current||a.current&&(n.current=requestAnimationFrame(function(){n.current=null;var h=r.current;h&&l(h)}))},[l]),d=At(function(h){r.current=null;var p=document.activeElement;p&&p.getAttribute(Tu.draggableId)===h&&(r.current=h)},[]);ba(function(){return a.current=!0,function(){a.current=!1;var h=n.current;h&&cancelAnimationFrame(h)}},[]);var u=os(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[i,d,c,o]);return u}function lH(){var t={draggables:{},droppables:{}},s=[];function r(m){return s.push(m),function(){var p=s.indexOf(m);p!==-1&&s.splice(p,1)}}function n(m){s.length&&s.forEach(function(h){return h(m)})}function a(m){return t.draggables[m]||null}function i(m){var h=a(m);return h||ct(),h}var l={register:function(h){t.draggables[h.descriptor.id]=h,n({type:"ADDITION",value:h})},update:function(h,p){var b=t.draggables[p.descriptor.id];b&&b.uniqueId===h.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[h.descriptor.id]=h)},unregister:function(h){var p=h.descriptor.id,b=a(p);b&&h.uniqueId===b.uniqueId&&(delete t.draggables[p],n({type:"REMOVAL",value:h}))},getById:i,findById:a,exists:function(h){return!!a(h)},getAllByType:function(h){return Kx(t.draggables).filter(function(p){return p.descriptor.type===h})}};function o(m){return t.droppables[m]||null}function c(m){var h=o(m);return h||ct(),h}var d={register:function(h){t.droppables[h.descriptor.id]=h},unregister:function(h){var p=o(h.descriptor.id);p&&h.uniqueId===p.uniqueId&&delete t.droppables[h.descriptor.id]},getById:c,findById:o,exists:function(h){return!!o(h)},getAllByType:function(h){return Kx(t.droppables).filter(function(p){return p.descriptor.type===h})}};function u(){t.draggables={},t.droppables={},s.length=0}return{draggable:l,droppable:d,subscribe:r,clean:u}}function oH(){var t=os(lH,[]);return y.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var kb=vt.createContext(null),Qx=function(){var t=document.body;return t||ct(),t},cH={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},dH=function(s){return"rbd-announcement-"+s};function uH(t){var s=os(function(){return dH(t)},[t]),r=y.useRef(null);y.useEffect(function(){var i=document.createElement("div");return r.current=i,i.id=s,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),it(i.style,cH),Qx().appendChild(i),function(){setTimeout(function(){var c=Qx();c.contains(i)&&c.removeChild(i),i===r.current&&(r.current=null)})}},[s]);var n=At(function(a){var i=r.current;if(i){i.textContent=a;return}},[]);return n}var mH=0,hH={separator:"::"};function Lb(t,s){return s===void 0&&(s=hH),os(function(){return""+t+s.separator+mH++},[s.separator,t])}function pH(t){var s=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+s+"-"+r}function fH(t){var s=t.contextId,r=t.text,n=Lb("hidden-text",{separator:"-"}),a=os(function(){return pH({contextId:s,uniqueId:n})},[n,s]);return y.useEffect(function(){var l=document.createElement("div");return l.id=a,l.textContent=r,l.style.display="none",Qx().appendChild(l),function(){var c=Qx();c.contains(l)&&c.removeChild(l)}},[a,r]),a}var lv=vt.createContext(null);function $D(t){var s=y.useRef(t);return y.useEffect(function(){s.current=t}),s}function xH(){var t=null;function s(){return!!t}function r(l){return l===t}function n(l){t&&ct();var o={abandon:l};return t=o,o}function a(){t||ct(),t=null}function i(){t&&(t.abandon(),a())}return{isClaimed:s,isActive:r,claim:n,release:a,tryAbandon:i}}var gH=9,vH=13,Fb=27,BD=32,jH=33,yH=34,bH=35,NH=36,wH=37,SH=38,CH=39,AH=40,kf,TH=(kf={},kf[vH]=!0,kf[gH]=!0,kf),zD=function(t){TH[t.keyCode]&&t.preventDefault()},ov=function(){var t="visibilitychange";if(typeof document>"u")return t;var s=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Jo(s,function(n){return"on"+n in document});return r||t}(),VD=0,P4=5;function EH(t,s){return Math.abs(s.x-t.x)>=P4||Math.abs(s.y-t.y)>=P4}var D4={type:"IDLE"};function PH(t){var s=t.cancel,r=t.completed,n=t.getPhase,a=t.setPhase;return[{eventName:"mousemove",fn:function(l){var o=l.button,c=l.clientX,d=l.clientY;if(o===VD){var u={x:c,y:d},m=n();if(m.type==="DRAGGING"){l.preventDefault(),m.actions.move(u);return}m.type!=="PENDING"&&ct();var h=m.point;if(EH(h,u)){l.preventDefault();var p=m.actions.fluidLift(u);a({type:"DRAGGING",actions:p})}}}},{eventName:"mouseup",fn:function(l){var o=n();if(o.type!=="DRAGGING"){s();return}l.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(l){n().type==="DRAGGING"&&l.preventDefault(),s()}},{eventName:"keydown",fn:function(l){var o=n();if(o.type==="PENDING"){s();return}if(l.keyCode===Fb){l.preventDefault(),s();return}zD(l)}},{eventName:"resize",fn:s},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&s()}},{eventName:"webkitmouseforcedown",fn:function(l){var o=n();if(o.type==="IDLE"&&ct(),o.actions.shouldRespectForcePress()){s();return}l.preventDefault()}},{eventName:ov,fn:s}]}function DH(t){var s=y.useRef(D4),r=y.useRef(ko),n=os(function(){return{eventName:"mousedown",fn:function(m){if(!m.defaultPrevented&&m.button===VD&&!(m.ctrlKey||m.metaKey||m.shiftKey||m.altKey)){var h=t.findClosestDraggableId(m);if(h){var p=t.tryGetLock(h,l,{sourceEvent:m});if(p){m.preventDefault();var b={x:m.clientX,y:m.clientY};r.current(),d(p,b)}}}}}},[t]),a=os(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(m){if(!m.defaultPrevented){var h=t.findClosestDraggableId(m);if(h){var p=t.findOptionsForDraggable(h);p&&(p.shouldRespectForcePress||t.canGetLock(h)&&m.preventDefault())}}}}},[t]),i=At(function(){var m={passive:!1,capture:!0};r.current=za(window,[a,n],m)},[a,n]),l=At(function(){var u=s.current;u.type!=="IDLE"&&(s.current=D4,r.current(),i())},[i]),o=At(function(){var u=s.current;l(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[l]),c=At(function(){var m={capture:!0,passive:!1},h=PH({cancel:o,completed:l,getPhase:function(){return s.current},setPhase:function(b){s.current=b}});r.current=za(window,h,m)},[o,l]),d=At(function(m,h){s.current.type!=="IDLE"&&ct(),s.current={type:"PENDING",point:h,actions:m},c()},[c]);ba(function(){return i(),function(){r.current()}},[i])}var Od;function IH(){}var kH=(Od={},Od[yH]=!0,Od[jH]=!0,Od[NH]=!0,Od[bH]=!0,Od);function LH(t,s){function r(){s(),t.cancel()}function n(){s(),t.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===Fb){i.preventDefault(),r();return}if(i.keyCode===BD){i.preventDefault(),n();return}if(i.keyCode===AH){i.preventDefault(),t.moveDown();return}if(i.keyCode===SH){i.preventDefault(),t.moveUp();return}if(i.keyCode===CH){i.preventDefault(),t.moveRight();return}if(i.keyCode===wH){i.preventDefault(),t.moveLeft();return}if(kH[i.keyCode]){i.preventDefault();return}zD(i)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ov,fn:r}]}function FH(t){var s=y.useRef(IH),r=os(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==BD)return;var l=t.findClosestDraggableId(i);if(!l)return;var o=t.tryGetLock(l,u,{sourceEvent:i});if(!o)return;i.preventDefault();var c=!0,d=o.snapLift();s.current();function u(){c||ct(),c=!1,s.current(),n()}s.current=za(window,LH(d,u),{capture:!0,passive:!1})}}},[t]),n=At(function(){var i={passive:!1,capture:!0};s.current=za(window,[r],i)},[r]);ba(function(){return n(),function(){s.current()}},[n])}var lj={type:"IDLE"},RH=120,MH=.15;function _H(t){var s=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:s},{eventName:"resize",fn:s},{eventName:"contextmenu",fn:function(a){a.preventDefault()}},{eventName:"keydown",fn:function(a){if(r().type!=="DRAGGING"){s();return}a.keyCode===Fb&&a.preventDefault(),s()}},{eventName:ov,fn:s}]}function OH(t){var s=t.cancel,r=t.completed,n=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var l=n();if(l.type!=="DRAGGING"){s();return}l.hasMoved=!0;var o=i.touches[0],c=o.clientX,d=o.clientY,u={x:c,y:d};i.preventDefault(),l.actions.move(u)}},{eventName:"touchend",fn:function(i){var l=n();if(l.type!=="DRAGGING"){s();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){s();return}i.preventDefault(),s()}},{eventName:"touchforcechange",fn:function(i){var l=n();l.type==="IDLE"&&ct();var o=i.touches[0];if(o){var c=o.force>=MH;if(c){var d=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){d&&s();return}if(d){if(l.hasMoved){i.preventDefault();return}s();return}i.preventDefault()}}}},{eventName:ov,fn:s}]}function $H(t){var s=y.useRef(lj),r=y.useRef(ko),n=At(function(){return s.current},[]),a=At(function(p){s.current=p},[]),i=os(function(){return{eventName:"touchstart",fn:function(p){if(!p.defaultPrevented){var b=t.findClosestDraggableId(p);if(b){var j=t.tryGetLock(b,o,{sourceEvent:p});if(j){var x=p.touches[0],f=x.clientX,g=x.clientY,v={x:f,y:g};r.current(),m(j,v)}}}}}},[t]),l=At(function(){var p={capture:!0,passive:!1};r.current=za(window,[i],p)},[i]),o=At(function(){var h=s.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(lj),r.current(),l())},[l,a]),c=At(function(){var h=s.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),d=At(function(){var p={capture:!0,passive:!1},b={cancel:c,completed:o,getPhase:n},j=za(window,OH(b),p),x=za(window,_H(b),p);r.current=function(){j(),x()}},[c,n,o]),u=At(function(){var p=n();p.type!=="PENDING"&&ct();var b=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:b,hasMoved:!1})},[n,a]),m=At(function(p,b){n().type!=="IDLE"&&ct();var j=setTimeout(u,RH);a({type:"PENDING",point:b,actions:p,longPressTimerId:j}),d()},[d,n,a,u]);ba(function(){return l(),function(){r.current();var b=n();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),a(lj))}},[n,l,a]),ba(function(){var p=za(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return p},[])}var BH={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function UD(t,s){if(s==null)return!1;var r=!!BH[s.tagName.toLowerCase()];if(r)return!0;var n=s.getAttribute("contenteditable");return n==="true"||n===""?!0:s===t?!1:UD(t,s.parentElement)}function zH(t,s){var r=s.target;return iv(r)?UD(t,r):!1}var VH=function(t){return fi(t.getBoundingClientRect()).center};function UH(t){return t instanceof OD(t).Element}var qH=function(){var t="matches";if(typeof document>"u")return t;var s=[t,"msMatchesSelector","webkitMatchesSelector"],r=Jo(s,function(n){return n in Element.prototype});return r||t}();function qD(t,s){return t==null?null:t[qH](s)?t:qD(t.parentElement,s)}function HH(t,s){return t.closest?t.closest(s):qD(t,s)}function WH(t){return"["+Tu.contextId+'="'+t+'"]'}function GH(t,s){var r=s.target;if(!UH(r))return null;var n=WH(t),a=HH(r,n);return!a||!iv(a)?null:a}function KH(t,s){var r=GH(t,s);return r?r.getAttribute(Tu.draggableId):null}function YH(t,s){var r="["+r1.contextId+'="'+t+'"]',n=iD(document.querySelectorAll(r)),a=Jo(n,function(i){return i.getAttribute(r1.id)===s});return!a||!iv(a)?null:a}function QH(t){t.preventDefault()}function Lf(t){var s=t.expected,r=t.phase,n=t.isLockActive;return t.shouldWarn,!(!n()||s!==r)}function HD(t){var s=t.lockAPI,r=t.store,n=t.registry,a=t.draggableId;if(s.isClaimed())return!1;var i=n.draggable.findById(a);return!(!i||!i.options.isEnabled||!FD(r.getState(),a))}function ZH(t){var s=t.lockAPI,r=t.contextId,n=t.store,a=t.registry,i=t.draggableId,l=t.forceSensorStop,o=t.sourceEvent,c=HD({lockAPI:s,store:n,registry:a,draggableId:i});if(!c)return null;var d=a.draggable.getById(i),u=YH(r,d.descriptor.id);if(!u||o&&!d.options.canDragInteractiveElements&&zH(u,o))return null;var m=s.claim(l||ko),h="PRE_DRAG";function p(){return d.options.shouldRespectForcePress}function b(){return s.isActive(m)}function j(T,S){Lf({expected:T,phase:h,isLockActive:b,shouldWarn:!0})&&n.dispatch(S())}var x=j.bind(null,"DRAGGING");function f(T){function S(){s.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(S(),h!=="PRE_DRAG"&&ct()),n.dispatch(qU(T.liftActionArgs)),h="DRAGGING";function C(E,M){if(M===void 0&&(M={shouldBlockNextClick:!1}),T.cleanup(),M.shouldBlockNextClick){var D=za(window,[{eventName:"click",fn:QH,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(D)}S(),n.dispatch(TD({reason:E}))}return it({isActive:function(){return Lf({expected:"DRAGGING",phase:h,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(M){return C("DROP",M)},cancel:function(M){return C("CANCEL",M)}},T.actions)}function g(T){var S=Mh(function(E){x(function(){return AD({client:E})})}),C=f({liftActionArgs:{id:i,clientSelection:T,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return it({},C,{move:S})}function v(){var T={moveUp:function(){return x(XU)},moveRight:function(){return x(tq)},moveDown:function(){return x(eq)},moveLeft:function(){return x(sq)}};return f({liftActionArgs:{id:i,clientSelection:VH(u),movementMode:"SNAP"},cleanup:ko,actions:T})}function w(){var T=Lf({expected:"PRE_DRAG",phase:h,isLockActive:b,shouldWarn:!0});T&&s.release()}var k={isActive:function(){return Lf({expected:"PRE_DRAG",phase:h,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:g,snapLift:v,abort:w};return k}var JH=[DH,FH,$H];function XH(t){var s=t.contextId,r=t.store,n=t.registry,a=t.customSensors,i=t.enableDefaultSensors,l=[].concat(i?JH:[],a||[]),o=y.useState(function(){return xH()})[0],c=At(function(g,v){g.isDragging&&!v.isDragging&&o.tryAbandon()},[o]);ba(function(){var g=r.getState(),v=r.subscribe(function(){var w=r.getState();c(g,w),g=w});return v},[o,r,c]),ba(function(){return o.tryAbandon},[o.tryAbandon]);for(var d=At(function(f){return HD({lockAPI:o,registry:n,store:r,draggableId:f})},[o,n,r]),u=At(function(f,g,v){return ZH({lockAPI:o,registry:n,contextId:s,store:r,draggableId:f,forceSensorStop:g,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null})},[s,o,n,r]),m=At(function(f){return KH(s,f)},[s]),h=At(function(f){var g=n.draggable.findById(f);return g?g.options:null},[n.draggable]),p=At(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(Sb()))},[o,r]),b=At(o.isClaimed,[o]),j=os(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:m,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:b}},[d,u,m,h,p,b]),x=0;x<l.length;x++)l[x](j)}var eW=function(s){return{onBeforeCapture:s.onBeforeCapture,onBeforeDragStart:s.onBeforeDragStart,onDragStart:s.onDragStart,onDragEnd:s.onDragEnd,onDragUpdate:s.onDragUpdate}};function _m(t){return t.current||ct(),t.current}function tW(t){var s=t.contextId,r=t.setCallbacks,n=t.sensors,a=t.nonce,i=t.dragHandleUsageInstructions,l=y.useRef(null),o=$D(t),c=At(function(){return eW(o.current)},[o]),d=uH(s),u=fH({contextId:s,text:i}),m=nH(s,a),h=At(function(E){_m(l).dispatch(E)},[]),p=os(function(){return X5({publishWhileDragging:WU,updateDroppableScroll:KU,updateDroppableIsEnabled:YU,updateDroppableIsCombineEnabled:QU,collectionStarting:GU},h)},[h]),b=oH(),j=os(function(){return Mq(b,p)},[b,p]),x=os(function(){return Xq(it({scrollWindow:_q,scrollDroppable:j.scrollDroppable},X5({move:AD},h)))},[j.scrollDroppable,h]),f=iH(s),g=os(function(){return kq({announce:d,autoScroller:x,dimensionMarshal:j,focusMarshal:f,getResponders:c,styleMarshal:m})},[d,x,j,f,c,m]);l.current=g;var v=At(function(){var E=_m(l),M=E.getState();M.phase!=="IDLE"&&E.dispatch(Sb())},[]),w=At(function(){var E=_m(l).getState();return E.isDragging||E.phase==="DROP_ANIMATING"},[]),k=os(function(){return{isDragging:w,tryAbort:v}},[w,v]);r(k);var T=At(function(E){return FD(_m(l).getState(),E)},[]),S=At(function(){return fc(_m(l).getState())},[]),C=os(function(){return{marshal:j,focus:f,contextId:s,canLift:T,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:b}},[s,j,u,f,T,S,b]);return XH({contextId:s,store:g,registry:b,customSensors:n,enableDefaultSensors:t.enableDefaultSensors!==!1}),y.useEffect(function(){return v},[v]),vt.createElement(lv.Provider,{value:C},vt.createElement(wz,{context:kb,store:g},t.children))}var sW=0;function rW(){return os(function(){return""+sW++},[])}function nW(t){var s=rW(),r=t.dragHandleUsageInstructions||ox.dragHandleUsageInstructions;return vt.createElement(FV,null,function(n){return vt.createElement(tW,{nonce:t.nonce,contextId:s,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var WD=function(s){return function(r){return s===r}},aW=WD("scroll"),iW=WD("auto"),I4=function(s,r){return r(s.overflowX)||r(s.overflowY)},lW=function(s){var r=window.getComputedStyle(s),n={overflowX:r.overflowX,overflowY:r.overflowY};return I4(n,aW)||I4(n,iW)},oW=function(){return!1},cW=function t(s){return s==null?null:s===document.body?oW()?s:null:s===document.documentElement?null:lW(s)?s:t(s.parentElement)},n1=function(t){return{x:t.scrollLeft,y:t.scrollTop}},dW=function t(s){if(!s)return!1;var r=window.getComputedStyle(s);return r.position==="fixed"?!0:t(s.parentElement)},uW=function(t){var s=cW(t),r=dW(t);return{closestScrollable:s,isFixedOnPage:r}},mW=function(t){var s=t.descriptor,r=t.isEnabled,n=t.isCombineEnabled,a=t.isFixedOnPage,i=t.direction,l=t.client,o=t.page,c=t.closest,d=function(){if(!c)return null;var p=c.scrollSize,b=c.client,j=ID({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:b,scrollSize:p,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:j,diff:{value:Gr,displacement:Gr}}}}(),u=i==="vertical"?jb:uD,m=Cu({page:o,withPlaceholder:null,axis:u,frame:d}),h={descriptor:s,isCombineEnabled:n,isFixedOnPage:a,axis:u,isEnabled:r,client:l,page:o,frame:d,subject:m};return h},hW=function(s,r){var n=tD(s);if(!r||s!==r)return n;var a=n.paddingBox.top-r.scrollTop,i=n.paddingBox.left-r.scrollLeft,l=a+r.scrollHeight,o=i+r.scrollWidth,c={top:a,right:o,bottom:l,left:i},d=pb(c,n.border),u=fb({borderBox:d,margin:n.margin,border:n.border,padding:n.padding});return u},pW=function(t){var s=t.ref,r=t.descriptor,n=t.env,a=t.windowScroll,i=t.direction,l=t.isDropDisabled,o=t.isCombineEnabled,c=t.shouldClipSubject,d=n.closestScrollable,u=hW(s,d),m=Hx(u,a),h=function(){if(!d)return null;var b=tD(d),j={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:b,page:Hx(b,a),scroll:n1(d),scrollSize:j,shouldClipSubject:c}}(),p=mW({descriptor:r,isEnabled:!l,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:u,page:m,closest:h});return p},fW={passive:!1},xW={passive:!0},k4=function(t){return t.shouldPublishImmediately?fW:xW};function Zx(t){var s=y.useContext(t);return s||ct(),s}var Ff=function(s){return s&&s.env.closestScrollable||null};function gW(t){var s=y.useRef(null),r=Zx(lv),n=Lb("droppable"),a=r.registry,i=r.marshal,l=$D(t),o=os(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),c=y.useRef(o),d=os(function(){return Hr(function(w,k){s.current||ct();var T={x:w,y:k};i.updateDroppableScroll(o.id,T)})},[o.id,i]),u=At(function(){var w=s.current;return!w||!w.env.closestScrollable?Gr:n1(w.env.closestScrollable)},[]),m=At(function(){var w=u();d(w.x,w.y)},[u,d]),h=os(function(){return Mh(m)},[m]),p=At(function(){var w=s.current,k=Ff(w);w&&k||ct();var T=w.scrollOptions;if(T.shouldPublishImmediately){m();return}h()},[h,m]),b=At(function(w,k){s.current&&ct();var T=l.current,S=T.getDroppableRef();S||ct();var C=uW(S),E={ref:S,descriptor:o,env:C,scrollOptions:k};s.current=E;var M=pW({ref:S,descriptor:o,env:C,windowScroll:w,direction:T.direction,isDropDisabled:T.isDropDisabled,isCombineEnabled:T.isCombineEnabled,shouldClipSubject:!T.ignoreContainerClipping}),D=C.closestScrollable;return D&&(D.setAttribute(T4.contextId,r.contextId),D.addEventListener("scroll",p,k4(E.scrollOptions))),M},[r.contextId,o,p,l]),j=At(function(){var w=s.current,k=Ff(w);return w&&k||ct(),n1(k)},[]),x=At(function(){var w=s.current;w||ct();var k=Ff(w);s.current=null,k&&(h.cancel(),k.removeAttribute(T4.contextId),k.removeEventListener("scroll",p,k4(w.scrollOptions)))},[p,h]),f=At(function(w){var k=s.current;k||ct();var T=Ff(k);T||ct(),T.scrollTop+=w.y,T.scrollLeft+=w.x},[]),g=os(function(){return{getDimensionAndWatchScroll:b,getScrollWhileDragging:j,dragStopped:x,scroll:f}},[x,b,j,f]),v=os(function(){return{uniqueId:n,descriptor:o,callbacks:g}},[g,o,n]);ba(function(){return c.current=v.descriptor,a.droppable.register(v),function(){s.current&&x(),a.droppable.unregister(v)}},[g,o,x,v,i,a.droppable]),ba(function(){s.current&&i.updateDroppableIsEnabled(c.current.id,!t.isDropDisabled)},[t.isDropDisabled,i]),ba(function(){s.current&&i.updateDroppableIsCombineEnabled(c.current.id,t.isCombineEnabled)},[t.isCombineEnabled,i])}function oj(){}var L4={width:0,height:0,margin:BV},vW=function(s){var r=s.isAnimatingOpenOnMount,n=s.placeholder,a=s.animate;return r||a==="close"?L4:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},jW=function(s){var r=s.isAnimatingOpenOnMount,n=s.placeholder,a=s.animate,i=vW({isAnimatingOpenOnMount:r,placeholder:n,animate:a});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:a!=="none"?ih.placeholder:null}};function yW(t){var s=y.useRef(null),r=At(function(){s.current&&(clearTimeout(s.current),s.current=null)},[]),n=t.animate,a=t.onTransitionEnd,i=t.onClose,l=t.contextId,o=y.useState(t.animate==="open"),c=o[0],d=o[1];y.useEffect(function(){return c?n!=="open"?(r(),d(!1),oj):s.current?oj:(s.current=setTimeout(function(){s.current=null,d(!1)}),r):oj},[n,c,r]);var u=At(function(h){h.propertyName==="height"&&(a(),n==="close"&&i())},[n,i,a]),m=jW({isAnimatingOpenOnMount:c,animate:t.animate,placeholder:t.placeholder});return vt.createElement(t.placeholder.tagName,{style:m,"data-rbd-placeholder-context-id":l,onTransitionEnd:u,ref:t.innerRef})}var bW=vt.memo(yW),Rb=vt.createContext(null),NW=function(t){IP(s,t);function s(){for(var n,a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=t.call.apply(t,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}s.getDerivedStateFromProps=function(a,i){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}};var r=s.prototype;return r.render=function(){if(!this.state.isVisible)return null;var a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)},s}(vt.PureComponent),F4={dragging:5e3,dropAnimating:4500},wW=function(s,r){return r?ih.drop(r.duration):s?ih.snap:ih.fluid},SW=function(s,r){return s?r?Bh.opacity.drop:Bh.opacity.combining:null},CW=function(s){return s.forceShouldAnimate!=null?s.forceShouldAnimate:s.mode==="SNAP"};function AW(t){var s=t.dimension,r=s.client,n=t.offset,a=t.combineWith,i=t.dropping,l=!!a,o=CW(t),c=!!i,d=c?t1.drop(n,l):t1.moveTo(n),u={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:wW(o,i),transform:d,opacity:SW(l,c),zIndex:c?F4.dropAnimating:F4.dragging,pointerEvents:"none"};return u}function TW(t){return{transform:t1.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function EW(t){return t.type==="DRAGGING"?AW(t):TW(t)}function PW(t,s,r){r===void 0&&(r=Gr);var n=window.getComputedStyle(s),a=s.getBoundingClientRect(),i=eD(a,n),l=Hx(i,r),o={client:i,tagName:s.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},d={descriptor:t,placeholder:o,displaceBy:c,client:i,page:l};return d}function DW(t){var s=Lb("draggable"),r=t.descriptor,n=t.registry,a=t.getDraggableRef,i=t.canDragInteractiveElements,l=t.shouldRespectForcePress,o=t.isEnabled,c=os(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}},[i,o,l]),d=At(function(p){var b=a();return b||ct(),PW(r,b,p)},[r,a]),u=os(function(){return{uniqueId:s,descriptor:r,options:c,getDimension:d}},[r,d,c,s]),m=y.useRef(u),h=y.useRef(!0);ba(function(){return n.draggable.register(m.current),function(){return n.draggable.unregister(m.current)}},[n.draggable]),ba(function(){if(h.current){h.current=!1;return}var p=m.current;m.current=u,n.draggable.update(u,p)},[u,n.draggable])}function IW(t){t.preventDefault()}function kW(t){var s=y.useRef(null),r=At(function(E){s.current=E},[]),n=At(function(){return s.current},[]),a=Zx(lv),i=a.contextId,l=a.dragHandleUsageInstructionsId,o=a.registry,c=Zx(Rb),d=c.type,u=c.droppableId,m=os(function(){return{id:t.draggableId,index:t.index,type:d,droppableId:u}},[t.draggableId,t.index,d,u]),h=t.children,p=t.draggableId,b=t.isEnabled,j=t.shouldRespectForcePress,x=t.canDragInteractiveElements,f=t.isClone,g=t.mapped,v=t.dropAnimationFinished;if(!f){var w=os(function(){return{descriptor:m,registry:o,getDraggableRef:n,canDragInteractiveElements:x,shouldRespectForcePress:j,isEnabled:b}},[m,o,n,x,j,b]);DW(w)}var k=os(function(){return b?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:IW}:null},[i,l,p,b]),T=At(function(E){g.type==="DRAGGING"&&g.dropping&&E.propertyName==="transform"&&v()},[v,g]),S=os(function(){var E=EW(g),M=g.type==="DRAGGING"&&g.dropping?T:null,D={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":p,style:E,onTransitionEnd:M},dragHandleProps:k};return D},[i,k,p,g,T,r]),C=os(function(){return{draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}},[m.droppableId,m.id,m.index,m.type]);return h(S,g.snapshot,C)}var GD=function(t,s){return t===s},KD=function(t){var s=t.combine,r=t.destination;return r?r.droppableId:s?s.droppableId:null},LW=function(s){return s.combine?s.combine.draggableId:null},FW=function(s){return s.at&&s.at.type==="COMBINE"?s.at.combine.draggableId:null};function RW(){var t=Hr(function(a,i){return{x:a,y:i}}),s=Hr(function(a,i,l,o,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:l,combineWith:o,combineTargetFor:null}}),r=Hr(function(a,i,l,o,c,d,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:l,forceShouldAnimate:u,snapshot:s(i,o,c,d,null)}}}),n=function(i,l){if(i.isDragging){if(i.critical.draggable.id!==l.draggableId)return null;var o=i.current.client.offset,c=i.dimensions.draggables[l.draggableId],d=ya(i.impact),u=FW(i.impact),m=i.forceShouldAnimate;return r(t(o.x,o.y),i.movementMode,c,l.isClone,d,u,m)}if(i.phase==="DROP_ANIMATING"){var h=i.completed;if(h.result.draggableId!==l.draggableId)return null;var p=l.isClone,b=i.dimensions.draggables[l.draggableId],j=h.result,x=j.mode,f=KD(j),g=LW(j),v=i.dropDuration,w={duration:v,curve:Ab.drop,moveTo:i.newHomeClientOffset,opacity:g?Bh.opacity.drop:null,scale:g?Bh.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:b,dropping:w,draggingOver:f,combineWith:g,mode:x,forceShouldAnimate:null,snapshot:s(x,p,f,g,w)}}}return null};return n}function YD(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var MW={mapped:{type:"SECONDARY",offset:Gr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:YD(null)}};function _W(){var t=Hr(function(l,o){return{x:l,y:o}}),s=Hr(YD),r=Hr(function(l,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:s(o)}}}),n=function(o){return o?r(Gr,o,!0):null},a=function(o,c,d,u){var m=d.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),p=rv(d),b=p&&p.draggableId===o?c:null;if(!m){if(!h)return n(b);if(d.displaced.invisible[o])return null;var j=Uu(u.displacedBy.point),x=t(j.x,j.y);return r(x,b,!0)}if(h)return n(b);var f=d.displacedBy.point,g=t(f.x,f.y);return r(g,b,m.shouldAnimate)},i=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:a(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var d=o.completed;return d.result.draggableId===c.draggableId?null:a(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return i}var OW=function(){var s=RW(),r=_W(),n=function(i,l){return s(i,l)||r(i,l)||MW};return n},$W={dropAnimationFinished:ED},BW=JP(OW,$W,null,{context:kb,pure:!0,areStatePropsEqual:GD})(kW);function QD(t){var s=Zx(Rb),r=s.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:vt.createElement(BW,t)}function zW(t){var s=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,n=!!t.shouldRespectForcePress;return vt.createElement(QD,it({},t,{isClone:!1,isEnabled:s,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function VW(t){var s=y.useContext(lv);s||ct();var r=s.contextId,n=s.isMovementAllowed,a=y.useRef(null),i=y.useRef(null),l=t.children,o=t.droppableId,c=t.type,d=t.mode,u=t.direction,m=t.ignoreContainerClipping,h=t.isDropDisabled,p=t.isCombineEnabled,b=t.snapshot,j=t.useClone,x=t.updateViewportMaxScroll,f=t.getContainerForClone,g=At(function(){return a.current},[]),v=At(function(D){a.current=D},[]);At(function(){return i.current},[]);var w=At(function(D){i.current=D},[]),k=At(function(){n()&&x({maxScroll:LD()})},[n,x]);gW({droppableId:o,type:c,mode:d,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:m,getDroppableRef:g});var T=vt.createElement(NW,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(D){var A=D.onClose,I=D.data,L=D.animate;return vt.createElement(bW,{placeholder:I,onClose:A,innerRef:w,animate:L,contextId:r,onTransitionEnd:k})}),S=os(function(){return{innerRef:v,placeholder:T,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,T,v]),C=j?j.dragging.draggableId:null,E=os(function(){return{droppableId:o,type:c,isUsingCloneFor:C}},[o,C,c]);function M(){if(!j)return null;var D=j.dragging,A=j.render,I=vt.createElement(QD,{draggableId:D.draggableId,index:D.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(L,F){return A(L,F,D)});return g2.createPortal(I,f())}return vt.createElement(Rb.Provider,{value:E},l(S,b),M())}var cj=function(s,r){return s===r.droppable.type},R4=function(s,r){return r.draggables[s.draggable.id]},UW=function(){var s={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=it({},s,{shouldAnimatePlaceholder:!1}),n=Hr(function(l){return{draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}}),a=Hr(function(l,o,c,d,u,m){var h=u.descriptor.id,p=u.descriptor.droppableId===l;if(p){var b=m?{render:m,dragging:n(u.descriptor)}:null,j={isDraggingOver:c,draggingOverWith:c?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:j,useClone:b}}if(!o)return r;if(!d)return s;var x={isDraggingOver:c,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:x,useClone:null}}),i=function(o,c){var d=c.droppableId,u=c.type,m=!c.isDropDisabled,h=c.renderClone;if(o.isDragging){var p=o.critical;if(!cj(u,p))return r;var b=R4(p,o.dimensions),j=ya(o.impact)===d;return a(d,m,j,j,b,h)}if(o.phase==="DROP_ANIMATING"){var x=o.completed;if(!cj(u,x.critical))return r;var f=R4(x.critical,o.dimensions);return a(d,m,KD(x.result)===d,ya(x.impact)===d,f,h)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var g=o.completed;if(!cj(u,g.critical))return r;var v=ya(g.impact)===d,w=!!(g.impact.at&&g.impact.at.type==="COMBINE"),k=g.critical.droppable.id===d;return v?w?s:r:k?s:r}return r};return i},qW={updateViewportMaxScroll:JU};function HW(){return document.body||ct(),document.body}var WW={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:HW},ZD=JP(UW,qW,null,{context:kb,pure:!0,areStatePropsEqual:GD})(VW);ZD.defaultProps=WW;const a1={dealStages:["New","Qualified","Proposal Sent","Negotiation","Closed Won","Closed Lost"],defaultDeal:{expectedCloseDate:new Date().toISOString().split("T")[0]},sampleDeals:[{id:"deal-001",customerId:"cust-001",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"(555) 123-4567",vehicleId:"veh-001",vehicleInfo:"2023 Forest River Cherokee 274RK",stage:"Qualified",amount:35e3,source:"Referral",type:"New Sale",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:75,expectedCloseDate:"2024-02-15",createdAt:"2024-01-10T09:30:00Z",updatedAt:"2024-01-20T14:22:00Z",notes:"Customer very interested, ready to move forward with financing",activities:[{id:"activity-001",type:"Call",description:"Initial qualification call",date:"2024-01-10T10:00:00Z",userId:"rep-001"},{id:"activity-002",type:"Meeting",description:"Product demonstration",date:"2024-01-15T14:00:00Z",userId:"rep-001"}]},{id:"deal-002",customerId:"cust-002",customerName:"Maria Rodriguez",customerEmail:"maria.rodriguez@email.com",customerPhone:"(555) 987-6543",vehicleId:"veh-002",vehicleInfo:"2024 Keystone Montana 3761FL",stage:"Proposal Sent",amount:62e3,source:"Trade Show",type:"New Sale",priority:"Medium",repId:"rep-002",repName:"Avery Seller",probability:60,expectedCloseDate:"2024-02-28",createdAt:"2024-01-05T11:15:00Z",updatedAt:"2024-01-18T16:45:00Z",notes:"Proposal sent, waiting for customer decision",activities:[{id:"activity-003",type:"Email",description:"Sent detailed proposal",date:"2024-01-18T09:00:00Z",userId:"rep-002"}]},{id:"deal-003",customerId:"cust-003",customerName:"David Johnson",customerEmail:"david.johnson@email.com",customerPhone:"(555) 456-7890",vehicleId:"veh-003",vehicleInfo:"2023 Grand Design Solitude 310GK",stage:"Negotiation",amount:48e3,source:"Online",type:"Trade-in",priority:"High",repId:"rep-001",repName:"Jamie Closer",probability:85,expectedCloseDate:"2024-02-10",createdAt:"2024-01-08T13:20:00Z",updatedAt:"2024-01-22T10:30:00Z",notes:"Negotiating trade-in value, close to agreement",activities:[{id:"activity-004",type:"Meeting",description:"Trade-in appraisal",date:"2024-01-20T11:00:00Z",userId:"rep-001"}]}],metrics:{}},M4=[{stage:jt.PROSPECTING,name:"Prospecting",color:"bg-blue-500"},{stage:jt.QUALIFICATION,name:"Qualification",color:"bg-yellow-500"},{stage:jt.NEEDS_ANALYSIS,name:"Needs Analysis",color:"bg-orange-500"},{stage:jt.PROPOSAL,name:"Proposal",color:"bg-purple-500"},{stage:jt.NEGOTIATION,name:"Negotiation",color:"bg-indigo-500"},{stage:jt.CLOSED_WON,name:"Closed Won",color:"bg-green-500"},{stage:jt.CLOSED_LOST,name:"Closed Lost",color:"bg-red-500"}];function GW({deals:t,onDealStageChange:s,onDealClick:r}){var x;const{tenant:n}=kn(),[a,i]=y.useState(null);(x=n==null?void 0:n.settings)!=null&&x.dealStages||a1.dealStages;const[l,o]=y.useState((n==null?void 0:n.deals)||a1.sampleDeals),c=f=>{switch(f){case As.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case As.WON:return"bg-green-50 text-green-700 border-green-200";case As.LOST:return"bg-red-50 text-red-700 border-red-200";case As.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case As.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=f=>{switch(f){case"critical":return"bg-red-50 text-red-700 border-red-200";case"high":return"bg-orange-50 text-orange-700 border-orange-200";case"medium":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"low":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},u=f=>new Date(f.expectedCloseDate)<new Date&&f.status===As.ACTIVE,m=f=>{if(i(null),!f.destination||f.source.droppableId===f.destination.droppableId)return;const g=f.draggableId,v=f.destination.droppableId;s(g,v)},h=f=>{i(f.draggableId)},p=f=>t.filter(g=>g.stage===f),b=f=>p(f).reduce((g,v)=>g+v.value,0),j=f=>p(f).reduce((g,v)=>g+v.value*v.probability/100,0);return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-7",children:M4.map(f=>{const g=p(f.stage),v=b(f.stage),w=j(f.stage);return e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:Ge("w-3 h-3 rounded-full",f.color)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:g.length})]}),e.jsx(de,{className:"text-sm font-medium",children:f.name})]}),e.jsx(te,{className:"pt-0",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-lg font-bold",children:De(v)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Weighted: ",De(w)]})]})})]},f.stage)})}),e.jsx(nW,{onDragEnd:m,onDragStart:h,children:e.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-7 min-h-[600px]",children:M4.map(f=>e.jsx(ZD,{droppableId:f.stage,children:(g,v)=>e.jsxs("div",{ref:g.innerRef,...g.droppableProps,className:Ge("space-y-3 p-3 rounded-lg border-2 border-dashed transition-colors min-h-[200px]",v.isDraggingOver?"border-primary bg-primary/5":"border-muted"),children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:Ge("w-3 h-3 rounded-full",f.color)}),e.jsx("h3",{className:"font-semibold text-sm",children:f.name})]}),p(f.stage).map((w,k)=>e.jsx(zW,{draggableId:w.id,index:k,children:(T,S)=>e.jsx(ee,{ref:T.innerRef,...T.draggableProps,...T.dragHandleProps,className:Ge("cursor-pointer transition-all hover:shadow-md",S.isDragging&&"rotate-3 shadow-lg",a===w.id&&"opacity-50"),onClick:()=>r(w),children:e.jsx(te,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm line-clamp-2",children:w.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:w.customerName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-bold text-primary",children:De(w.value)}),e.jsx(Ae,{className:Ge("ri-badge-status text-xs",d(w.priority)),children:w.priority.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Gt,{className:"h-3 w-3"}),e.jsxs("span",{children:[w.probability,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Zt,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:new Date(w.expectedCloseDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ae,{className:Ge("ri-badge-status text-xs",c(w.status)),children:w.status.toUpperCase()}),u(w)&&e.jsxs("div",{className:"flex items-center space-x-1 text-red-500",children:[e.jsx(Ir,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Overdue"})]})]})]})})},w.id)},w.id)),g.placeholder]})},f.stage))})})]})}function KW(t){return t>=75?"text-green-600":t>=50?"text-yellow-600":"text-red-600"}function YW({metrics:t}){const{tenant:s}=kn();return t||s!=null&&s.dealMetrics||a1.metrics,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),e.jsx(wt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(t.totalValue)}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(tn,{className:"h-3 w-3 mr-1"}),t.totalDeals," active deals"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),e.jsx(Gt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(t.wonValue)}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Ua,{className:"h-3 w-3 mr-1"}),t.wonDeals," deals closed"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Win Rate"}),e.jsx(Ua,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[t.winRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Industry average: 27%"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Avg Deal Size"}),e.jsx(wt,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:De(t.averageDealSize)}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),t.averageSalesCycle.toFixed(0)," day cycle"]})]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Stage Conversion Rates"}),e.jsx(Ee,{children:"Conversion rates and average time spent in each stage"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-6",children:t.conversionRates.map((r,n)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium capitalize",children:[r.fromStage.replace("_"," ")," → ",r.toStage.replace("_"," ")]}),e.jsxs("span",{className:`text-sm font-bold ${KW(r.rate)}`,children:[r.rate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(zt,{className:"h-3 w-3"}),e.jsxs("span",{children:[r.averageDuration,"h avg"]})]})]}),e.jsx(Ga,{value:r.rate,className:"h-2"})]},`${r.fromStage}-${r.toStage}`))})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Pipeline Health"}),e.jsx(Ee,{children:"Key performance indicators"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Win Rate"})]}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[t.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Average Deal Size"})]}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:De(t.averageDealSize)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Sales Cycle"})]}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[t.averageSalesCycle.toFixed(0)," days"]})]})]})})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Deal Breakdown"}),e.jsx(Ee,{children:"Current pipeline composition"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Deals"}),e.jsx("span",{className:"font-bold",children:t.totalDeals})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Won Deals"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-green-600",children:t.wonDeals}),e.jsxs("span",{className:"text-xs text-green-600",children:["(",De(t.wonValue),")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Lost Deals"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-red-600",children:t.lostDeals}),e.jsxs("span",{className:"text-xs text-red-600",children:["(",De(t.lostValue),")"]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active Pipeline"}),e.jsx("span",{className:"font-bold text-primary",children:De(t.totalValue-t.wonValue-t.lostValue)})]})})]})})]})]})]})}const QW=["Best Price","Superior Product Features","Excellent Service","Strong Relationship","Competitive Financing","Quick Delivery","Brand Reputation","Referral/Recommendation"],ZW=["Price Too High","Lost to Competitor","Budget Constraints","Timing Issues","Product Limitations","Service Concerns","Decision Delayed","Requirements Changed"],JW=["Camping World","Lazydays","General RV","PPL Motor Homes","Local Dealer","Private Seller","Other"];function XW({deals:t,winLossReports:s,onCreateReport:r}){const[n,a]=y.useState(!1),[i,l]=y.useState(null),[o,c]=y.useState({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}),d=t.filter(T=>T.status==="won"||T.status==="lost"),u=t.filter(T=>T.status==="won"),m=t.filter(T=>T.status==="lost"),h=d.length>0?u.length/d.length*100:0,p=u.length>0?u.reduce((T,S)=>T+S.value,0)/u.length:0,b=m.length>0?m.reduce((T,S)=>T+S.value,0)/m.length:0,j=T=>{l(T),c({...o,outcome:T.status==="won"?"won":"lost"}),a(!0)},x=()=>{i&&(r(i.id,o.outcome,o),a(!1),l(null),c({outcome:"won",primaryReason:"",secondaryReasons:[],competitorWon:"",feedback:"",lessonsLearned:[],actionItems:[]}))},f=(T,S,C)=>{S.trim()&&!T.includes(S.trim())&&C([...T,S.trim()])},g=(T,S,C)=>{C(T.filter((E,M)=>M!==S))},v=T=>{const S=s.filter(E=>E.outcome===T),C={};return S.forEach(E=>{C[E.primaryReason]=(C[E.primaryReason]||0)+1}),Object.entries(C).sort(([,E],[,M])=>M-E).slice(0,5).map(([E,M])=>({reason:E,count:M,percentage:S.length>0?M/S.length*100:0}))},w=v("won"),k=v("lost");return e.jsxs("div",{className:"space-y-6",children:[n&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Win/Loss Report"}),e.jsxs(Ee,{children:[i.name," - ",De(i.value)]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>a(!1),children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Outcome"}),e.jsxs(Be,{value:o.outcome,onValueChange:T=>c(S=>({...S,outcome:T})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"won",children:"Won"}),e.jsx(J,{value:"lost",children:"Lost"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Primary Reason"}),e.jsxs(Be,{value:o.primaryReason,onValueChange:T=>c(S=>({...S,primaryReason:T})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select primary reason"})}),e.jsx($e,{children:(o.outcome==="won"?QW:ZW).map(T=>e.jsx(J,{value:T,children:T},T))})]})]}),o.outcome==="lost"&&e.jsxs("div",{children:[e.jsx(Z,{children:"Competitor Won"}),e.jsxs(Be,{value:o.competitorWon,onValueChange:T=>c(S=>({...S,competitorWon:T})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select competitor"})}),e.jsx($e,{children:JW.map(T=>e.jsx(J,{value:T,children:T},T))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Customer Feedback"}),e.jsx(kt,{value:o.feedback,onChange:T=>c(S=>({...S,feedback:T.target.value})),placeholder:"What did the customer say about their decision?",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Lessons Learned"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{placeholder:"Add a lesson learned",onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const S=T.currentTarget;f(o.lessonsLearned,S.value,C=>c(E=>({...E,lessonsLearned:C}))),S.value=""}}}),e.jsx(H,{type:"button",variant:"outline",onClick:T=>{const S=T.currentTarget.previousElementSibling;f(o.lessonsLearned,S.value,C=>c(E=>({...E,lessonsLearned:C}))),S.value=""},children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.lessonsLearned.map((T,S)=>e.jsxs(Ae,{variant:"secondary",className:"flex items-center gap-1",children:[T,e.jsx(St,{className:"h-3 w-3 cursor-pointer",onClick:()=>g(o.lessonsLearned,S,C=>c(E=>({...E,lessonsLearned:C})))})]},S))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Action Items"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{placeholder:"Add an action item",onKeyDown:T=>{if(T.key==="Enter"){T.preventDefault();const S=T.currentTarget;f(o.actionItems,S.value,C=>c(E=>({...E,actionItems:C}))),S.value=""}}}),e.jsx(H,{type:"button",variant:"outline",onClick:T=>{const S=T.currentTarget.previousElementSibling;f(o.actionItems,S.value,C=>c(E=>({...E,actionItems:C}))),S.value=""},children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.actionItems.map((T,S)=>e.jsxs(Ae,{variant:"secondary",className:"flex items-center gap-1",children:[T,e.jsx(St,{className:"h-3 w-3 cursor-pointer",onClick:()=>g(o.actionItems,S,C=>c(E=>({...E,actionItems:C})))})]},S))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsxs(H,{onClick:x,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Report"]})]})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Win Rate"}),e.jsx(Ua,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[h.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(tn,{className:"h-3 w-3 mr-1"}),d.length," closed deals"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Won Deals"}),e.jsx(Gt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:u.length}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),De(p)," avg"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-red-900",children:"Lost Deals"}),e.jsx(L0,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-900",children:m.length}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[e.jsx(L0,{className:"h-3 w-3 mr-1"}),De(b)," avg"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Reports"}),e.jsx(tn,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:s.length}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(tn,{className:"h-3 w-3 mr-1"}),"Completed reports"]})]})]})]}),e.jsxs(ms,{defaultValue:"analysis",className:"space-y-6",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"analysis",children:"Analysis"}),e.jsx(Ye,{value:"closed-deals",children:"Closed Deals"}),e.jsx(Ye,{value:"reports",children:"Reports"})]}),e.jsxs(Je,{value:"analysis",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Gt,{className:"h-5 w-5 mr-2 text-green-500"}),"Win Reasons"]}),e.jsx(Ee,{children:"Top reasons for winning deals"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:w.length>0?w.map((T,S)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:T.reason}),e.jsxs("span",{className:"text-sm text-green-600",children:[T.percentage.toFixed(0),"%"]})]}),e.jsx(Ga,{value:T.percentage,className:"h-2"})]},S)):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win reports available"})})})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(L0,{className:"h-5 w-5 mr-2 text-red-500"}),"Loss Reasons"]}),e.jsx(Ee,{children:"Top reasons for losing deals"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:k.length>0?k.map((T,S)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:T.reason}),e.jsxs("span",{className:"text-sm text-red-600",children:[T.percentage.toFixed(0),"%"]})]}),e.jsx(Ga,{value:T.percentage,className:"h-2"})]},S)):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No loss reports available"})})})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Lessons Learned"}),e.jsx(Ee,{children:"Key insights from win/loss reports"})]}),e.jsx(te,{children:s.length>0?e.jsx("div",{className:"space-y-4",children:s.slice(0,5).map((T,S)=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[T.outcome==="won"?e.jsx(Ae,{className:"bg-green-50 text-green-700 border-green-200",children:"WON"}):e.jsx(Ae,{className:"bg-red-50 text-red-700 border-red-200",children:"LOST"}),e.jsx("span",{className:"text-sm font-medium",children:T.primaryReason})]}),e.jsx("div",{className:"space-y-2",children:T.lessonsLearned.map((C,E)=>e.jsxs("p",{className:"text-sm text-muted-foreground",children:["• ",C]},E))})]},S))}):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No lessons learned available"})})]})]}),e.jsx(Je,{value:"closed-deals",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recently Closed Deals"}),e.jsx(Ee,{children:"Deals that have been won or lost"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:d.length>0?d.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:T.name}),e.jsx(Ae,{className:T.status==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:T.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Customer:"})," ",T.customerName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Value:"})," ",De(T.value)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Closed:"})," ",T.actualCloseDate?nt(T.actualCloseDate):"N/A"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rep:"})," ",T.assignedTo]})]})]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>j(T),className:"shadow-sm",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Report"]})]},T.id)):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No closed deals available"})})})]})}),e.jsx(Je,{value:"reports",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Win/Loss Reports"}),e.jsx(Ee,{children:"Detailed reports on won and lost deals"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:s.length>0?s.map(T=>{const S=t.find(C=>C.id===T.dealId);return e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:T.outcome==="won"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",children:T.outcome.toUpperCase()}),e.jsx("h3",{className:"font-semibold",children:(S==null?void 0:S.name)||"Unknown Deal"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:nt(T.reportedAt)})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Reasons"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Primary:"})," ",T.primaryReason]}),T.secondaryReasons.length>0&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Secondary:"})," ",T.secondaryReasons.join(", ")]}),T.competitorWon&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Competitor:"})," ",T.competitorWon]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Feedback"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.feedback})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Lessons & Action Items"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Lessons Learned:"}),e.jsx("ul",{className:"text-sm space-y-1",children:T.lessonsLearned.map((C,E)=>e.jsxs("li",{children:["• ",C]},E))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Action Items:"}),e.jsx("ul",{className:"text-sm space-y-1",children:T.actionItems.map((C,E)=>e.jsxs("li",{children:["• ",C]},E))})]})]})]})]},T.id)}):e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No win/loss reports available"})})})]})})]})]})}function eG({deal:t,onClose:s,onEdit:r,onCreateTask:n}){const a=c=>{switch(c){case As.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case As.WON:return"bg-green-50 text-green-700 border-green-200";case As.LOST:return"bg-red-50 text-red-700 border-red-200";case As.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case As.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},i=c=>{switch(c){case Vi.CRITICAL:return"bg-red-50 text-red-700 border-red-200";case Vi.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case Vi.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Vi.LOW:return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},l=c=>{switch(c){case jt.PROSPECTING:return"bg-blue-50 text-blue-700 border-blue-200";case jt.QUALIFICATION:return"bg-yellow-50 text-yellow-700 border-yellow-200";case jt.NEEDS_ANALYSIS:return"bg-orange-50 text-orange-700 border-orange-200";case jt.PROPOSAL:return"bg-purple-50 text-purple-700 border-purple-200";case jt.NEGOTIATION:return"bg-indigo-50 text-indigo-700 border-indigo-200";case jt.CLOSED_WON:return"bg-green-50 text-green-700 border-green-200";case jt.CLOSED_LOST:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},o=c=>new Date(c.expectedCloseDate)<new Date&&c.status===As.ACTIVE;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:t.name}),e.jsx(Ee,{children:"Deal details and information"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>r(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Deal"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",a(t.status)),children:t.status.toUpperCase()}),e.jsx(Ae,{className:Ge("ri-badge-status",l(t.stage)),children:t.stage.replace("_"," ").toUpperCase()}),e.jsx(Ae,{className:Ge("ri-badge-status",i(t.priority)),children:t.priority.toUpperCase()}),o(t)&&e.jsxs(Ae,{className:"bg-red-50 text-red-700 border-red-200",children:[e.jsx(Gn,{className:"h-3 w-3 mr-1"}),"OVERDUE"]}),t.requiresApproval&&e.jsx(Ae,{className:"bg-orange-50 text-orange-700 border-orange-200",children:"REQUIRES APPROVAL"})]}),e.jsxs(ms,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"products",children:"Products"}),e.jsx(Ye,{value:"history",children:"History"})]}),e.jsxs(Je,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("p",{className:"font-medium",children:t.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Value"}),e.jsx("p",{className:"font-bold text-primary text-lg",children:De(t.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Probability"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ua,{className:"h-4 w-4 text-blue-500"}),e.jsxs("p",{className:"font-medium",children:[t.probability,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expected Close"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-purple-500"}),e.jsx("p",{className:"font-medium",children:nt(t.expectedCloseDate)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"h-4 w-4 text-green-500"}),e.jsx("p",{className:"font-medium",children:t.assignedTo||"Unassigned"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Territory"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ur,{className:"h-4 w-4 text-orange-500"}),e.jsx("p",{className:"font-medium",children:t.territoryId||"No Territory"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4 text-blue-500"}),e.jsx("p",{className:"font-medium",children:nt(t.createdAt)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4 text-blue-500"}),e.jsx("p",{className:"font-medium",children:nt(t.updatedAt)})]})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.notes})})]}),Object.keys(t.customFields||{}).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Custom Fields"}),e.jsx("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:Object.entries(t.customFields||{}).map(([c,d])=>e.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[e.jsxs("span",{className:"text-sm font-medium capitalize",children:[c.replace(/([A-Z])/g," $1").trim(),": "]}),e.jsx("span",{className:"text-sm",children:d==null?void 0:d.toString()})]},c))})]})]}),e.jsxs(Je,{value:"products",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Products & Services"}),t.products&&t.products.length>0?e.jsxs("div",{className:"space-y-3",children:[t.products.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(bn,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:c.productName})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Quantity: ",c.quantity]}),e.jsxs("span",{children:["Unit Price: ",De(c.unitPrice)]}),c.discount>0&&e.jsxs("span",{className:"text-green-600",children:["Discount: ",De(c.discount)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold",children:De(c.total)})})]},c.id)),e.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),e.jsx("span",{className:"text-lg font-bold text-primary",children:De(t.value)})]})})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No products added to this deal"}),e.jsx("p",{className:"text-sm",children:"Edit the deal to add products"})]})]}),e.jsxs(Je,{value:"history",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Stage History"}),t.stageHistory&&t.stageHistory.length>0?e.jsx("div",{className:"space-y-3",children:t.stageHistory.map((c,d)=>e.jsxs("div",{className:"relative",children:[d<t.stageHistory.length-1&&e.jsx("div",{className:"absolute left-4 top-8 bottom-0 w-px bg-border"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center text-primary-foreground",children:d+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium capitalize",children:c.fromStage?`${c.fromStage.replace("_"," ")} → ${c.toStage.replace("_"," ")}`:`Started at ${c.toStage.replace("_"," ")}`}),e.jsx("span",{className:"text-xs text-muted-foreground",children:nt(c.changedAt)})]}),c.duration!==void 0&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Duration: ",c.duration," hours"]}),c.notes&&e.jsx("div",{className:"mt-1 text-sm bg-muted/30 p-2 rounded-md",children:c.notes})]})]})]},d))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No stage history available"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:s,children:"Close"}),n&&e.jsxs(H,{variant:"outline",onClick:()=>n(t),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]}),e.jsxs(H,{onClick:()=>r(t),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Deal"]})]})]})]})})}function tG({territories:t,salesReps:s,deals:r,onCreateTerritory:n,onUpdateTerritory:a,onDeleteTerritory:i}){var T,S,C;const[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,m]=y.useState({name:"",type:io.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),[h,p]=y.useState({field:"",operator:"equals",value:"",priority:1}),b=()=>{d(null),m({name:"",type:io.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}),o(!0)},j=E=>{d(E),m({name:E.name,type:E.type,description:E.description,assignedTo:[...E.assignedTo],rules:[...E.rules],isActive:E.isActive}),o(!0)},x=()=>{u.name&&(c?a(c.id,u):n(u),o(!1),d(null),m({name:"",type:io.GEOGRAPHIC,description:"",assignedTo:[],rules:[],isActive:!0}))},f=()=>{if(!h.field||!h.operator)return;const E={id:Math.random().toString(36).substr(2,9),field:h.field,operator:h.operator,value:h.value,priority:h.priority||1};m(M=>({...M,rules:[...M.rules||[],E]})),p({field:"",operator:"equals",value:"",priority:1})},g=E=>{m(M=>{var D;return{...M,rules:((D=M.rules)==null?void 0:D.filter(A=>A.id!==E))||[]}})},v=(E,M)=>{m(M?D=>({...D,assignedTo:[...D.assignedTo||[],E]}):D=>{var A;return{...D,assignedTo:((A=D.assignedTo)==null?void 0:A.filter(I=>I!==E))||[]}})},w=E=>r.filter(D=>D.territoryId===E).length,k=E=>{const M=t.find(D=>D.id===E);return M?s.filter(D=>M.assignedTo.includes(D.id)):[]};return e.jsxs("div",{className:"space-y-6",children:[l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:c?"Edit Territory":"Create Territory"}),e.jsx(Ee,{children:c?"Update territory details and rules":"Define a new sales territory"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Territory Name *"}),e.jsx(ge,{id:"name",value:u.name,onChange:E=>m(M=>({...M,name:E.target.value})),placeholder:"e.g., North Region"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Territory Type"}),e.jsxs(Be,{value:u.type,onValueChange:E=>m(M=>({...M,type:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:io.GEOGRAPHIC,children:"Geographic"}),e.jsx(J,{value:io.INDUSTRY,children:"Industry"}),e.jsx(J,{value:io.ACCOUNT_SIZE,children:"Account Size"}),e.jsx(J,{value:io.PRODUCT_LINE,children:"Product Line"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(kt,{id:"description",value:u.description,onChange:E=>m(M=>({...M,description:E.target.value})),placeholder:"Describe the territory",rows:3})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx(Z,{children:"Territory Rules"})}),e.jsxs("div",{className:"space-y-4",children:[(T=u.rules)==null?void 0:T.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:E.field}),e.jsx("span",{className:"text-muted-foreground",children:E.operator}),e.jsx("span",{children:E.value.toString()})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Priority: ",E.priority]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g(E.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]},E.id)),e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Field"}),e.jsxs(Be,{value:h.field,onValueChange:E=>p(M=>({...M,field:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select field"})}),e.jsxs($e,{children:[e.jsx(J,{value:"state",children:"State"}),e.jsx(J,{value:"zipCode",children:"Zip Code"}),e.jsx(J,{value:"country",children:"Country"}),e.jsx(J,{value:"industry",children:"Industry"}),e.jsx(J,{value:"dealSize",children:"Deal Size"}),e.jsx(J,{value:"productType",children:"Product Type"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Operator"}),e.jsxs(Be,{value:h.operator,onValueChange:E=>p(M=>({...M,operator:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"equals",children:"Equals"}),e.jsx(J,{value:"contains",children:"Contains"}),e.jsx(J,{value:"starts_with",children:"Starts With"}),e.jsx(J,{value:"in_range",children:"In Range"}),e.jsx(J,{value:"greater_than",children:"Greater Than"}),e.jsx(J,{value:"less_than",children:"Less Than"})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{children:"Value"}),e.jsx(ge,{value:((S=h.value)==null?void 0:S.toString())||"",onChange:E=>p(M=>({...M,value:E.target.value})),placeholder:"Rule value"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"For multiple values, separate with commas"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{children:"Priority"}),e.jsxs(Be,{value:((C=h.priority)==null?void 0:C.toString())||"1",onValueChange:E=>p(M=>({...M,priority:parseInt(E)})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"1",children:"1 - Highest"}),e.jsx(J,{value:"2",children:"2"}),e.jsx(J,{value:"3",children:"3"}),e.jsx(J,{value:"4",children:"4"}),e.jsx(J,{value:"5",children:"5 - Lowest"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(H,{onClick:f,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})})]})})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"mb-2 block",children:"Assign Sales Reps"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-2 border rounded-lg",children:s.map(E=>{var M;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`rep-${E.id}`,checked:(M=u.assignedTo)==null?void 0:M.includes(E.id),onCheckedChange:D=>v(E.id,!!D)}),e.jsx(Z,{htmlFor:`rep-${E.id}`,className:"text-sm cursor-pointer",children:E.name})]},E.id)})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"isActive",checked:u.isActive,onCheckedChange:E=>m(M=>({...M,isActive:!!E}))}),e.jsx(Z,{htmlFor:"isActive",children:"Active territory"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(H,{onClick:x,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Territory"]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Territory Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Define and manage sales territories and assignment rules"})]}),e.jsxs(H,{onClick:b,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),e.jsxs("div",{className:"space-y-6",children:[t.map(E=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{children:E.name}),e.jsx(Ae,{className:E.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:E.isActive?"Active":"Inactive"}),e.jsx(Ae,{variant:"outline",children:E.type.replace("_"," ")})]}),e.jsx(Ee,{className:"mt-1",children:E.description})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>j(E),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Rules"}),e.jsxs("div",{className:"space-y-2",children:[E.rules.map(M=>e.jsx("div",{className:"p-2 bg-muted/30 rounded-lg text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:M.field}),e.jsx("span",{className:"text-muted-foreground",children:M.operator}),e.jsx("span",{children:M.value.toString()})]})},M.id)),E.rules.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No rules defined"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Assigned Sales Reps"}),e.jsxs("div",{className:"space-y-2",children:[k(E.id).map(M=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-lg",children:[e.jsx(Ks,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:M.name})]},M.id)),E.assignedTo.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No reps assigned"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Territory Stats"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Deals"}),e.jsx("span",{className:"font-bold text-blue-700",children:w(E.id)})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Reps"}),e.jsx("span",{className:"font-bold text-green-700",children:E.assignedTo.length})]})]})]})]})})]},E.id)),t.length===0&&e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ur,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Territories Defined"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create territories to organize your sales team and deals by region, industry, or other criteria."}),e.jsxs(H,{onClick:b,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create First Territory"]})]})})]})]})}function sG({deals:t,approvalWorkflows:s,onApprove:r,onReject:n,onEscalate:a}){var g;const[i,l]=y.useState("pending"),[o,c]=y.useState(null),[d,u]=y.useState(""),m=v=>{switch(v){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"escalated":return"bg-orange-50 text-orange-700 border-orange-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=v=>{switch(v){case"pending":return e.jsx(zt,{className:"h-4 w-4 text-yellow-500"});case"approved":return e.jsx(_t,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(xa,{className:"h-4 w-4 text-red-500"});case"escalated":return e.jsx(Gn,{className:"h-4 w-4 text-orange-500"});default:return e.jsx(zt,{className:"h-4 w-4 text-gray-500"})}},p=v=>s.filter(w=>w.status===v),b=v=>t.find(w=>w.id===v),j=()=>{if(!o)return;const v=o.steps.find(w=>w.stepNumber===o.currentStep);v&&(r(o.id,v.id,d),u(""),c(null))},x=()=>{if(!o)return;const v=o.steps.find(w=>w.stepNumber===o.currentStep);v&&(n(o.id,v.id,d),u(""),c(null))},f=()=>{if(!o)return;const v=o.steps.find(w=>w.stepNumber===o.currentStep);v&&(a(o.id,v.id,d),u(""),c(null))};return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Approval Request"}),e.jsx(Ee,{children:((g=b(o.dealId))==null?void 0:g.name)||"Unknown Deal"})]}),e.jsx(Ae,{className:Ge("ri-badge-status",m(o.status)),children:o.status.toUpperCase()})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-muted/30 rounded-lg",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:(()=>{const v=b(o.dealId);return v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Customer:"}),e.jsx("p",{className:"text-sm",children:v.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),e.jsx("p",{className:"text-sm font-bold",children:De(v.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Stage:"}),e.jsx("p",{className:"text-sm",children:v.stage.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Assigned To:"}),e.jsx("p",{className:"text-sm",children:v.assignedTo})]})]}):null})()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Workflow Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Type:"}),e.jsx("p",{className:"text-sm",children:o.workflowType.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),e.jsx("p",{className:"text-sm",children:o.requestedBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),e.jsx("p",{className:"text-sm",children:nt(o.requestedAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Step:"}),e.jsxs("p",{className:"text-sm",children:[o.currentStep," of ",o.totalSteps]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"comments",children:"Comments"}),e.jsx(kt,{id:"comments",value:d,onChange:v=>u(v.target.value),placeholder:"Add your comments here...",rows:3})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Approval Steps"}),e.jsx("div",{className:"space-y-4",children:o.steps.map((v,w)=>{const k=v.stepNumber===o.currentStep,T=v.stepNumber<o.currentStep;return e.jsxs("div",{className:Ge("p-3 rounded-lg border-2",k?"border-primary bg-primary/5":T?"border-muted bg-muted/10":"border-dashed border-muted"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-muted text-xs font-bold",children:v.stepNumber}),e.jsx("span",{className:"font-medium",children:v.approverRole.replace("_"," ")})]}),e.jsxs(Ae,{className:Ge("ri-badge-status",m(v.status)),children:[h(v.status),e.jsx("span",{className:"ml-1",children:v.status.toUpperCase()})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:["Requires ",v.requiredApprovals," approval(s) from ",v.approverIds.length," approver(s)"]}),v.currentApprovals.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium",children:"Approvals:"}),v.currentApprovals.map((S,C)=>e.jsxs("div",{className:"flex items-start space-x-2 text-xs p-2 bg-muted/30 rounded",children:[S.action==="approve"?e.jsx(_8,{className:"h-3 w-3 text-green-500 mt-0.5"}):S.action==="reject"?e.jsx(M8,{className:"h-3 w-3 text-red-500 mt-0.5"}):e.jsx(Gn,{className:"h-3 w-3 text-orange-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.approverId}),e.jsx("div",{className:"text-muted-foreground",children:nt(S.actionDate)}),S.comments&&e.jsx("div",{className:"mt-1 italic",children:S.comments})]})]},C))]})]},v.id)})})]}),o.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"comments",children:"Comments"}),e.jsx(kt,{id:"comments",value:d,onChange:v=>u(v.target.value),placeholder:"Add your comments here...",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),e.jsxs(H,{variant:"outline",onClick:f,children:[e.jsx(Gn,{className:"h-4 w-4 mr-2"}),"Escalate"]}),e.jsxs(H,{variant:"destructive",onClick:x,children:[e.jsx(xa,{className:"h-4 w-4 mr-2"}),"Reject"]}),e.jsxs(H,{variant:"default",onClick:j,children:[e.jsx(_t,{className:"h-4 w-4 mr-2"}),"Approve"]})]})]}),o.status!=="pending"&&e.jsx("div",{className:"flex justify-end pt-6 border-t",children:e.jsx(H,{variant:"outline",onClick:()=>c(null),children:"Close"})})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Approval Workflows"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage approval requests for deals above threshold"})]})}),e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-6",children:[e.jsxs(ds,{children:[e.jsxs(Ye,{value:"pending",children:["Pending",e.jsx(Ae,{className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:p("pending").length})]}),e.jsxs(Ye,{value:"approved",children:["Approved",e.jsx(Ae,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:p("approved").length})]}),e.jsxs(Ye,{value:"rejected",children:["Rejected",e.jsx(Ae,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:p("rejected").length})]}),e.jsxs(Ye,{value:"escalated",children:["Escalated",e.jsx(Ae,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",children:p("escalated").length})]})]}),e.jsx(Je,{value:"pending",className:"space-y-4",children:p("pending").length>0?p("pending").map(v=>{const w=b(v.dealId);return w?e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(v),children:e.jsxs(te,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),e.jsxs(Ae,{className:Ge("ri-badge-status",m(v.status)),children:[h(v.status),e.jsx("span",{className:"ml-1",children:v.status.toUpperCase()})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:De(w.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Requested By:"}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(mr,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:v.requestedBy})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),e.jsx("p",{className:"text-sm",children:nt(v.requestedAt)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Approval Progress:"}),e.jsxs("span",{className:"text-sm",children:[v.currentStep," of ",v.totalSteps]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:v.steps.map((k,T)=>{const S=k.stepNumber<v.currentStep,C=k.stepNumber===v.currentStep;return e.jsxs(vt.Fragment,{children:[e.jsx("div",{className:Ge("flex items-center justify-center w-8 h-8 rounded-full",S?"bg-primary text-primary-foreground":C?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:k.stepNumber}),T<v.steps.length-1&&e.jsx(P2,{className:"h-4 w-4 text-muted-foreground"})]},k.id)})})]})]})},v.id):null}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(zt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Pending Approvals"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deals currently waiting for your approval."})]})})}),e.jsx(Je,{value:"approved",className:"space-y-4",children:p("approved").length>0?p("approved").map(v=>{const w=b(v.dealId);return w?e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(v),children:e.jsxs(te,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),e.jsxs(Ae,{className:Ge("ri-badge-status",m(v.status)),children:[h(v.status),e.jsx("span",{className:"ml-1",children:v.status.toUpperCase()})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:De(w.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),e.jsx("p",{className:"text-sm",children:v.completedAt?nt(v.completedAt):"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),e.jsx("p",{className:"text-sm capitalize",children:v.workflowType.replace("_"," ")})]})]})]})},v.id):null}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(_t,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Approved Workflows"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"There are no approved deal workflows yet."})]})})}),e.jsx(Je,{value:"rejected",className:"space-y-4",children:p("rejected").length>0?p("rejected").map(v=>{const w=b(v.dealId);return w?e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(v),children:e.jsxs(te,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),e.jsxs(Ae,{className:Ge("ri-badge-status",m(v.status)),children:[h(v.status),e.jsx("span",{className:"ml-1",children:v.status.toUpperCase()})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:De(w.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Completed:"}),e.jsx("p",{className:"text-sm",children:v.completedAt?nt(v.completedAt):"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),e.jsx("p",{className:"text-sm capitalize",children:v.workflowType.replace("_"," ")})]})]})]})},v.id):null}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(xa,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Rejected Workflows"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"There are no rejected deal workflows."})]})})}),e.jsx(Je,{value:"escalated",className:"space-y-4",children:p("escalated").length>0?p("escalated").map(v=>{const w=b(v.dealId);return w?e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c(v),children:e.jsxs(te,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.customerName})]}),e.jsxs(Ae,{className:Ge("ri-badge-status",m(v.status)),children:[h(v.status),e.jsx("span",{className:"ml-1",children:v.status.toUpperCase()})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Deal Value:"}),e.jsx("p",{className:"text-lg font-bold text-primary",children:De(w.value)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Requested:"}),e.jsx("p",{className:"text-sm",children:nt(v.requestedAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Workflow Type:"}),e.jsx("p",{className:"text-sm capitalize",children:v.workflowType.replace("_"," ")})]})]})]})},v.id):null}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gn,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Escalated Workflows"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"There are no escalated deal workflows."})]})})})]})]})}function rG({deal:t,customers:s,salesReps:r,territories:n,products:a,onSave:i,onCancel:l}){const{toast:o}=xt(),[c,d]=y.useState(!1),[u,m]=y.useState({name:"",customerId:"",customerName:"",stage:jt.PROSPECTING,status:As.ACTIVE,priority:Vi.MEDIUM,value:0,probability:10,expectedCloseDate:new Date(Date.now()+30*24*60*60*1e3),assignedTo:"",territoryId:"",sourceId:"",competitorIds:[],products:[],notes:"",requiresApproval:!1,customFields:{}}),[h,p]=y.useState(!1),[b,j]=y.useState(!1),[x,f]=y.useState({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0});y.useEffect(()=>{t&&m({...t,expectedCloseDate:new Date(t.expectedCloseDate)})},[t]),y.useEffect(()=>{if(u.customerId){const S=s.find(C=>C.id===u.customerId);S&&m(C=>({...C,customerName:`${S.firstName} ${S.lastName}`}))}},[u.customerId,s]),y.useEffect(()=>{if(u.products&&u.products.length>0){const S=u.products.reduce((C,E)=>C+E.total,0);m(C=>({...C,value:S}))}},[u.products]),y.useEffect(()=>{const S=x.quantity||1,C=x.unitPrice||0,E=x.discount||0,M=S*C-E;f(D=>({...D,total:M}))},[x.quantity,x.unitPrice,x.discount]);const g=async S=>{var C;if(S.preventDefault(),!((C=u.name)!=null&&C.trim())||!u.customerId||!u.expectedCloseDate){o({title:"Validation Error",description:"Please fill in Deal Name, Customer, and Expected Close Date",variant:"destructive"});return}d(!0);try{await i(u),o({title:"Success",description:`Deal ${t?"updated":"created"} successfully`})}catch{o({title:"Error",description:`Failed to ${t?"update":"create"} deal`,variant:"destructive"})}finally{d(!1)}},v=()=>{if(!x.productId||!x.productName){o({title:"Validation Error",description:"Please select a product",variant:"destructive"});return}const S={id:Math.random().toString(36).substr(2,9),productId:x.productId,productName:x.productName,quantity:x.quantity||1,unitPrice:x.unitPrice||0,discount:x.discount||0,total:x.total||0};m(C=>({...C,products:[...C.products||[],S]})),f({productId:"",productName:"",quantity:1,unitPrice:0,discount:0,total:0}),p(!1)},w=S=>{m(C=>{var E;return{...C,products:((E=C.products)==null?void 0:E.filter(M=>M.id!==S))||[]}})},k=S=>{const C=a.find(E=>E.id===S);C&&f({productId:C.id,productName:C.name,quantity:1,unitPrice:C.price,discount:0,total:C.price})},T=S=>{m(C=>({...C,customerId:S.id,customerName:`${S.firstName} ${S.lastName}`})),j(!1),o({title:"Customer Added",description:`${S.firstName} ${S.lastName} has been added as a customer.`})};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[b&&e.jsx(Vu,{onClose:()=>j(!1),onSuccess:T}),e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Deal":"Create Deal"}),e.jsx(Ee,{children:t?"Update deal details":"Create a new sales deal"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:l,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Deal Information"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Deal Name *"}),e.jsx(ge,{id:"name",value:u.name,onChange:S=>m(C=>({...C,name:S.target.value})),placeholder:"Enter deal name"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),e.jsxs(Be,{value:u.customerId||"",onValueChange:S=>m(C=>({...C,customerId:S})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select customer"})}),e.jsxs($e,{children:[e.jsx("div",{className:"px-2 py-1.5",children:e.jsxs(H,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>j(!0),children:[e.jsx(tt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),e.jsx("div",{className:"px-2 py-1 border-t"}),s.map(S=>e.jsxs(J,{value:S.id,children:[S.firstName," ",S.lastName]},S.id))]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"stage",children:"Stage"}),e.jsxs(Be,{value:u.stage,onValueChange:S=>m(C=>({...C,stage:S,probability:S===jt.PROSPECTING?10:S===jt.QUALIFICATION?25:S===jt.NEEDS_ANALYSIS?40:S===jt.PROPOSAL?60:S===jt.NEGOTIATION?80:S===jt.CLOSED_WON?100:S===jt.CLOSED_LOST?0:10})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:jt.PROSPECTING,children:"Prospecting"}),e.jsx(J,{value:jt.QUALIFICATION,children:"Qualification"}),e.jsx(J,{value:jt.NEEDS_ANALYSIS,children:"Needs Analysis"}),e.jsx(J,{value:jt.PROPOSAL,children:"Proposal"}),e.jsx(J,{value:jt.NEGOTIATION,children:"Negotiation"}),e.jsx(J,{value:jt.CLOSED_WON,children:"Closed Won"}),e.jsx(J,{value:jt.CLOSED_LOST,children:"Closed Lost"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"priority",children:"Priority"}),e.jsxs(Be,{value:u.priority,onValueChange:S=>m(C=>({...C,priority:S})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Vi.LOW,children:"Low"}),e.jsx(J,{value:Vi.MEDIUM,children:"Medium"}),e.jsx(J,{value:Vi.HIGH,children:"High"}),e.jsx(J,{value:Vi.CRITICAL,children:"Critical"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"probability",children:"Probability (%)"}),e.jsx(ge,{id:"probability",type:"number",min:"0",max:"100",value:u.probability,onChange:S=>m(C=>({...C,probability:parseInt(S.target.value)||0}))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"expectedCloseDate",children:"Expected Close Date *"}),e.jsx(ge,{id:"expectedCloseDate",type:"date",value:u.expectedCloseDate?new Date(u.expectedCloseDate).toISOString().split("T")[0]:"",onChange:S=>m(C=>({...C,expectedCloseDate:new Date(S.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"assignedTo",children:"Assigned To"}),e.jsxs(Be,{value:u.assignedTo,onValueChange:S=>m(C=>({...C,assignedTo:S})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select sales rep"})}),e.jsx($e,{children:r.map(S=>e.jsx(J,{value:S.id,children:S.name},S.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"territoryId",children:"Territory"}),e.jsxs(Be,{value:u.territoryId,onValueChange:S=>m(C=>({...C,territoryId:S})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select territory"})}),e.jsx($e,{children:n.map(S=>e.jsx(J,{value:S.id,children:S.name},S.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(bn,{className:"h-4 w-4 mr-2"}),"Products"]}),e.jsxs(H,{type:"button",onClick:()=>p(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),h&&e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Product"}),e.jsxs(Be,{onValueChange:k,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select product"})}),e.jsx($e,{children:a.map(S=>e.jsxs(J,{value:S.id,children:[S.name," - ",De(S.price)]},S.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Quantity"}),e.jsx(ge,{type:"number",min:"1",value:x.quantity,onChange:S=>f(C=>({...C,quantity:parseInt(S.target.value)||1}))})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Unit Price"}),e.jsx(ge,{type:"number",min:"0",step:"0.01",value:x.unitPrice,onChange:S=>f(C=>({...C,unitPrice:parseFloat(S.target.value)||0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Discount"}),e.jsx(ge,{type:"number",min:"0",step:"0.01",value:x.discount,onChange:S=>f(C=>({...C,discount:parseFloat(S.target.value)||0}))})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Total: "}),e.jsx("span",{className:"font-bold",children:De(x.total||0)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(H,{type:"button",onClick:v,children:"Add Product"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:u.products&&u.products.length>0?u.products.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:S.productName}),e.jsxs(Ae,{variant:"outline",children:[S.quantity," × ",De(S.unitPrice)]})]}),S.discount>0&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["Discount: ",De(S.discount)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-bold",children:De(S.total)}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(S.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},S.id)):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No products added yet"}),e.jsx("p",{className:"text-sm",children:"Add products to calculate deal value"})]})}),u.products&&u.products.length>0&&e.jsx("div",{className:"flex justify-end p-3 bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Deal Value: "}),e.jsx("span",{className:"text-lg font-bold text-primary",children:De(u.value||0)})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),e.jsx(kt,{value:u.notes,onChange:S=>m(C=>({...C,notes:S.target.value})),placeholder:"Add any additional notes about this deal...",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tags"}),e.jsx(Zo,{entityId:(t==null?void 0:t.id)||"new-deal",entityType:Fs.DEAL,onTagsChange:()=>{},placeholder:"Add deal tags...",className:"w-full"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Approval Settings"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"requiresApproval",checked:u.requiresApproval,onCheckedChange:S=>m(C=>({...C,requiresApproval:!!S}))}),e.jsx(Z,{htmlFor:"requiresApproval",children:"This deal requires approval"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Deals over $100,000 automatically require approval"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:l,disabled:c,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Deal"]})})]})]})})]})]})}function _4(){const{deals:t,territories:s,approvalWorkflows:r,winLossReports:n,createDeal:a,updateDealStage:i,createApprovalWorkflow:l,createWinLossReport:o,getDealMetrics:c}=oz(),{leads:d,salesReps:u}=tl(),{vehicles:m}=Jc(),{createTask:h}=ed(),[p,b]=y.useState(""),[j,x]=y.useState("all"),[f,g]=y.useState("all"),[v,w]=y.useState(null),[k,T]=y.useState(!1),[S,C]=y.useState("pipeline"),[E,M]=y.useState(!1),[D,A]=y.useState(!1),[I,L]=y.useState(void 0),{toast:F}=xt(),B=oe=>{switch(oe){case As.ACTIVE:return"bg-blue-50 text-blue-700 border-blue-200";case As.WON:return"bg-green-50 text-green-700 border-green-200";case As.LOST:return"bg-red-50 text-red-700 border-red-200";case As.ON_HOLD:return"bg-yellow-50 text-yellow-700 border-yellow-200";case As.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},R=t.filter(oe=>{const pe=oe.name.toLowerCase().includes(p.toLowerCase())||oe.customerName.toLowerCase().includes(p.toLowerCase()),je=j==="all"||oe.stage===j,we=f==="all"||oe.assignedTo===f;return pe&&je&&we}),$=async(oe,pe)=>{try{await i(oe,pe);const je=t.find(we=>we.id===oe);je&&F({title:"Deal Stage Updated",description:`${je.name} moved to ${pe.replace("_"," ").toLowerCase()}`})}catch{F({title:"Error",description:"Failed to update deal stage",variant:"destructive"})}},U=oe=>{w(oe),M(!0)},W=()=>{w(null),T(!0)},q=oe=>{w(oe),T(!0)},_=async oe=>{v?await i(v.id,oe.stage||v.stage):await a(oe),T(!1),w(null)},V=async(oe,pe)=>{await l(oe,pe)},Q=async(oe,pe,je)=>{await o(oe,pe,je)},G=oe=>{const pe=new Date(oe.expectedCloseDate),je=pe<new Date,we=oe.value>1e5?es.HIGH:oe.value>5e4?es.MEDIUM:es.LOW;L({sourceId:oe.id,sourceType:"deal",module:er.CRM,title:`Follow up on deal: ${oe.name}`,description:`Deal value: ${De(oe.value)}, Stage: ${oe.stage.replace("_"," ")}`,priority:we,assignedTo:oe.assignedTo,dueDate:je?new Date(Date.now()+24*60*60*1e3):pe,link:"/deals",customFields:{dealValue:oe.value,dealProbability:oe.probability,customerName:oe.customerName,dealStage:oe.stage}}),A(!0)},Y=async oe=>{try{await h(oe),A(!1),L(void 0),F({title:"Task Created",description:"Task has been created successfully"})}catch{F({title:"Error",description:"Failed to create task",variant:"destructive"})}},ne=c(),le=m.map(oe=>({id:oe.id,name:`${oe.year} ${oe.make} ${oe.model}`,price:oe.price,category:"vehicle"})).concat([{id:"prod-001",name:"Extended Warranty Package",price:3500,category:"warranty"},{id:"prod-002",name:"Premium Interior Upgrade",price:2200,category:"upgrade"},{id:"prod-003",name:"Solar Panel Package",price:3500,category:"accessory"}]);return e.jsxs("div",{className:"space-y-8",children:[D&&e.jsx(Xc,{initialData:I,onSave:Y,onCancel:()=>{A(!1),L(void 0)}}),E&&v&&e.jsx(eG,{deal:v,onClose:()=>M(!1),onEdit:q,onCreateTask:G}),k&&e.jsx(rG,{deal:v||void 0,customers:d,salesReps:u,territories:s,products:le,onSave:_,onCancel:()=>{T(!1),w(null)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Sales Deal Management"}),e.jsx("p",{className:"ri-page-description",children:"Track deals through the sales pipeline with approvals and territory management"})]}),e.jsxs(H,{className:"shadow-sm",onClick:W,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Deal"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Pipeline"}),e.jsx(wt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(ne.totalValue)}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),ne.totalDeals," active deals"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Win Rate"}),e.jsx(Ua,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[ne.winRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),ne.wonDeals," won deals"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Avg Deal Size"}),e.jsx(wt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(ne.averageDealSize)}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),ne.averageSalesCycle.toFixed(0)," day cycle"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Territories"}),e.jsx(ur,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:s.length}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Active territories"]})]})]})]}),e.jsxs(ms,{value:S,onValueChange:C,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-5",children:[e.jsx(Ye,{value:"pipeline",children:"Pipeline"}),e.jsx(Ye,{value:"deals",children:"Deals"}),e.jsx(Ye,{value:"analytics",children:"Analytics"}),e.jsx(Ye,{value:"territories",children:"Territories"}),e.jsx(Ye,{value:"approvals",children:"Approvals"})]}),e.jsx(Je,{value:"pipeline",className:"space-y-6",children:e.jsx(GW,{deals:t,onDealStageChange:$,onDealClick:U})}),e.jsxs(Je,{value:"deals",className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search deals...",value:p,onChange:oe=>b(oe.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:j,onValueChange:x,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Stage"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Stages"}),e.jsx(J,{value:jt.PROSPECTING,children:"Prospecting"}),e.jsx(J,{value:jt.QUALIFICATION,children:"Qualification"}),e.jsx(J,{value:jt.NEEDS_ANALYSIS,children:"Needs Analysis"}),e.jsx(J,{value:jt.PROPOSAL,children:"Proposal"}),e.jsx(J,{value:jt.NEGOTIATION,children:"Negotiation"}),e.jsx(J,{value:jt.CLOSED_WON,children:"Closed Won"}),e.jsx(J,{value:jt.CLOSED_LOST,children:"Closed Lost"})]})]}),e.jsxs(Be,{value:f,onValueChange:g,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Sales Rep"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Reps"}),u.map(oe=>e.jsx(J,{value:oe.id,children:oe.name},oe.id))]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"text-xl",children:["Deals (",R.length,")"]}),e.jsx(Ee,{children:"Manage your sales pipeline and deal progression"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[R.map(oe=>{var pe;return e.jsxs("div",{className:"ri-table-row cursor-pointer",onClick:()=>q(oe),children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:oe.name}),e.jsx(Ae,{className:Ge("ri-badge-status",B(oe.status)),children:oe.status.toUpperCase()}),e.jsx(Ae,{variant:"outline",children:oe.stage.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ks,{className:"h-3 w-3 mr-2 text-blue-500"}),oe.customerName]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(wt,{className:"h-3 w-3 mr-2 text-green-500"}),De(oe.value)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ua,{className:"h-3 w-3 mr-2 text-purple-500"}),oe.probability,"% probability"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ur,{className:"h-3 w-3 mr-2 text-orange-500"}),((pe=s.find(je=>je.id===oe.territoryId))==null?void 0:pe.name)||"No Territory"]})]}),oe.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/30 p-2 rounded-md",children:oe.notes}),e.jsx("div",{className:"mt-2",children:e.jsx(Zo,{entityId:oe.id,entityType:Fs.DEAL,onTagsChange:()=>{},placeholder:"Add deal tags...",className:"max-w-md"})})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:je=>{je.stopPropagation(),U(oe)},children:"View"}),oe.requiresApproval&&e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:je=>{je.stopPropagation(),V(oe.id,"deal_value")},children:"Request Approval"})]})]},oe.id)}),R.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ua,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No deals found"}),e.jsx("p",{className:"text-sm",children:"Create your first deal to get started"})]})]})})]})]}),e.jsx(Je,{value:"analytics",className:"space-y-6",children:e.jsxs(ms,{defaultValue:"metrics",className:"space-y-6",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"metrics",children:"Deal Metrics"}),e.jsx(Ye,{value:"win-loss",children:"Win/Loss Analysis"})]}),e.jsx(Je,{value:"metrics",children:e.jsx(YW,{metrics:ne})}),e.jsx(Je,{value:"win-loss",children:e.jsx(XW,{deals:t,winLossReports:n,onCreateReport:Q})})]})}),e.jsx(Je,{value:"territories",className:"space-y-6",children:e.jsx(tG,{territories:s,salesReps:u,deals:t,onCreateTerritory:()=>{},onUpdateTerritory:()=>{},onDeleteTerritory:()=>{}})}),e.jsx(Je,{value:"approvals",className:"space-y-6",children:e.jsx(sG,{deals:t,approvalWorkflows:r,onApprove:()=>{},onReject:()=>{},onEscalate:()=>{}})})]})]})}function nG(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(_4,{})}),e.jsx(ot,{path:"/*",element:e.jsx(_4,{})})]})}var Cs=(t=>(t.TEXT="text",t.DATE="date",t.SIGNATURE="signature",t.CHECKBOX="checkbox",t))(Cs||{});const dj="JVBERi0xLjQKMSAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCjIgMCBvYmoKPDwKL1R5cGUgL1BhZ2VzCi9LaWRzIFszIDAgUl0KL0NvdW50IDEKPD4KZW5kb2JqCjMgMCBvYmoKPDwKL1R5cGUgL1BhZ2UKL1BhcmVudCAyIDAgUgovTWVkaWFCb3ggWzAgMCA2MTIgNzkyXQovUmVzb3VyY2VzIDw8Ci9Gb250IDw8Ci9GMSA0IDAgUgo+Pgo+PgovQ29udGVudHMgNSAwIFIKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL1R5cGUgL0ZvbnQKL1N1YnR5cGUgL1R5cGUxCi9CYXNlRm9udCAvSGVsdmV0aWNhCj4+CmVuZG9iago1IDAgb2JqCjw8Ci9MZW5ndGggNDQKPj4Kc3RyZWFtCkJUCi9GMSAxMiBUZgoxMDAgNzAwIFRkCihTYW1wbGUgUERGKSBUagpFVApzdHJlYW0KZW5kb2JqCnhyZWYKMCA2CjAwMDAwMDAwMDAgNjU1MzUgZiAKMDAwMDAwMDAwOSAwMDAwMCBuIAowMDAwMDAwMDU4IDAwMDAwIG4gCjAwMDAwMDAxMTUgMDAwMDAgbiAKMDAwMDAwMDI0NSAwMDAwMCBuIAowMDAwMDAwMzIyIDAwMDAwIG4gCnRyYWlsZXIKPDwKL1NpemUgNgovUm9vdCAxIDAgUgo+PgpzdGFydHhyZWYKNDE0CiUlRU9G",uj=[{id:"template-001",name:"Standard Purchase Agreement",description:"Standard vehicle purchase agreement template",pdfBase64:dj,fields:[{id:"field-001",type:Cs.TEXT,label:"Customer Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter customer name"},{id:"field-002",type:Cs.DATE,label:"Agreement Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-003",type:Cs.TEXT,label:"Vehicle VIN",x:100,y:200,width:250,height:30,required:!0,defaultValue:"",placeholder:"Enter VIN number"},{id:"field-004",type:Cs.SIGNATURE,label:"Customer Signature",x:100,y:400,width:200,height:60,required:!0},{id:"field-005",type:Cs.CHECKBOX,label:"Terms Accepted",x:100,y:350,width:20,height:20,required:!0,checkboxLabel:"I agree to the terms and conditions"}],createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-15T14:30:00Z",isActive:!0},{id:"template-002",name:"Lease Agreement Template",description:"Standard lease agreement for RV rentals",pdfBase64:dj,fields:[{id:"field-006",type:Cs.TEXT,label:"Lessee Name",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter lessee name"},{id:"field-007",type:Cs.DATE,label:"Lease Start Date",x:350,y:150,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-008",type:Cs.DATE,label:"Lease End Date",x:350,y:200,width:150,height:30,required:!0,format:"MM/dd/yyyy"},{id:"field-009",type:Cs.TEXT,label:"Monthly Payment",x:100,y:250,width:150,height:30,required:!0,defaultValue:"$",placeholder:"Enter amount"},{id:"field-010",type:Cs.SIGNATURE,label:"Lessee Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-12T11:00:00Z",updatedAt:"2024-01-18T16:45:00Z",isActive:!0},{id:"template-003",name:"Service Agreement",description:"Service agreement template for maintenance contracts",pdfBase64:dj,fields:[{id:"field-011",type:Cs.TEXT,label:"Service Provider",x:100,y:150,width:200,height:30,required:!0,defaultValue:"",placeholder:"Enter service provider name"},{id:"field-012",type:Cs.TEXT,label:"Service Description",x:100,y:200,width:400,height:60,required:!0,defaultValue:"",placeholder:"Describe services to be provided"},{id:"field-013",type:Cs.CHECKBOX,label:"Emergency Service",x:100,y:280,width:20,height:20,required:!1,checkboxLabel:"Include 24/7 emergency service"},{id:"field-014",type:Cs.SIGNATURE,label:"Authorized Signature",x:100,y:400,width:200,height:60,required:!0}],createdAt:"2024-01-08T09:00:00Z",updatedAt:"2024-01-20T12:15:00Z",isActive:!0}],mj="agreement_templates";function Mb(){const[t,s]=y.useState([]),[r,n]=y.useState(!0),[a,i]=y.useState(null);y.useEffect(()=>{try{const f=xs(mj,[]);f.length===0?(s(uj),Xt(mj,uj)):s(f)}catch(f){console.error("Error loading templates:",f),i("Failed to load templates"),s(uj)}finally{n(!1)}},[]);const l=y.useCallback(f=>{try{Xt(mj,f),s(f),i(null)}catch(g){console.error("Error saving templates:",g),i("Failed to save templates")}},[]),o=y.useCallback(()=>t,[t]),c=y.useCallback(f=>t.find(g=>g.id===f),[t]),d=y.useCallback(f=>{const g={...f,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},v=[...t,g];return l(v),g},[t,l]),u=y.useCallback((f,g)=>{const v=t.map(w=>w.id===f?{...w,...g,updatedAt:new Date().toISOString()}:w);return l(v),v.find(w=>w.id===f)},[t,l]),m=y.useCallback(f=>{const g=t.filter(v=>v.id!==f);l(g)},[t,l]),h=y.useCallback(f=>{const g=t.find(k=>k.id===f);if(!g)throw new Error("Template not found");const v={...g,id:`template-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Copy of ${g.name}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),fields:g.fields.map(k=>({...k,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))},w=[...t,v];return l(w),v},[t,l]),p=y.useCallback((f,g)=>{u(f,{fields:g})},[u]),b=y.useCallback((f,g)=>{const v=c(f);if(!v)return;const w=[...v.fields,g];u(f,{fields:w})},[c,u]),j=y.useCallback((f,g)=>{const v=c(f);if(!v)return;const w=v.fields.filter(k=>k.id!==g);u(f,{fields:w})},[c,u]),x=y.useCallback((f,g,v)=>{const w=c(f);if(!w)return;const k=w.fields.map(T=>T.id===g?{...T,...v}:T);u(f,{fields:k})},[c,u]);return{templates:t,loading:r,error:a,getTemplates:o,getTemplate:c,addTemplate:d,updateTemplate:u,deleteTemplate:m,duplicateTemplate:h,updateTemplateFields:p,addFieldToTemplate:b,removeFieldFromTemplate:j,updateFieldInTemplate:x}}function aG({onSelect:t,onClose:s,onCreateNew:r}){const{templates:n,loading:a}=Mb(),[i,l]=y.useState(""),o=n.filter(u=>{var m;return u.isActive&&(u.name.toLowerCase().includes(i.toLowerCase())||((m=u.description)==null?void 0:m.toLowerCase().includes(i.toLowerCase())))}),c=u=>{t(u),s()},d=()=>{s(),r&&r()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"Select Agreement Template"}),e.jsx(Ee,{children:"Choose a template to start your new agreement"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search templates...",value:i,onChange:u=>l(u.target.value),className:"pl-10 shadow-sm"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(u=>e.jsxs(ee,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-primary/50",onClick:()=>c(u),children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(de,{className:"text-base",children:u.name}),u.description&&e.jsx(Ee,{className:"mt-1 text-sm",children:u.description})]}),e.jsx(Ae,{variant:"default",className:"ml-2",children:"Active"})]})}),e.jsxs(te,{className:"pt-0",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),u.fields.length," fields"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),nt(u.updatedAt)]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(H,{size:"sm",className:"w-full",onClick:m=>{m.stopPropagation(),c(u)},children:"Use This Template"})})]})]},u.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:i?"No templates found":"No templates available"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:i?"Try adjusting your search terms":"Create your first template to get started"}),r&&e.jsxs(H,{onClick:d,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create New Template"]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),o.length," template",o.length!==1?"s":""," available"]}),e.jsxs("div",{className:"flex space-x-3",children:[r&&e.jsxs(H,{variant:"outline",onClick:d,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create New Template"]}),e.jsx(H,{variant:"outline",onClick:s,children:"Cancel"})]})]})]})]})})}function iG(){const t=Zn(),{toast:s}=xt(),{templates:r,loading:n,deleteTemplate:a,duplicateTemplate:i}=Mb(),[l,o]=y.useState(""),[c,d]=y.useState(null),u=r.filter(j=>{var x;return j.name.toLowerCase().includes(l.toLowerCase())||((x=j.description)==null?void 0:x.toLowerCase().includes(l.toLowerCase()))}),m=()=>{t("/agreements/templates/new")},h=j=>{t(`/agreements/templates/edit/${j}`)},p=async j=>{try{const x=i(j);s({title:"Template Duplicated",description:`Created "${x.name}" successfully.`})}catch{s({title:"Error",description:"Failed to duplicate template.",variant:"destructive"})}},b=async j=>{try{a(j),d(null),s({title:"Template Deleted",description:"Template has been removed successfully."})}catch{s({title:"Error",description:"Failed to delete template.",variant:"destructive"})}};return n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"ri-page-header",children:[e.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),e.jsx("p",{className:"ri-page-description",children:"Manage your agreement templates"})]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.jsxs("div",{className:"space-y-6",children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Delete Template"}),e.jsx(Ee,{children:"Are you sure you want to delete this template? This action cannot be undone."})]}),e.jsx(te,{children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(H,{variant:"outline",onClick:()=>d(null),children:"Cancel"}),e.jsx(H,{variant:"destructive",onClick:()=>b(c),children:"Delete"})]})})]})}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Agreement Templates"}),e.jsx("p",{className:"ri-page-description",children:"Create and manage reusable agreement templates"})]}),e.jsxs(H,{onClick:m,className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),e.jsx(ee,{className:"shadow-sm",children:e.jsx(te,{className:"pt-6",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search templates...",value:l,onChange:j=>o(j.target.value),className:"ri-search-input"})]})})})}),u.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:u.map(j=>e.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(de,{className:"text-lg",children:j.name}),j.description&&e.jsx(Ee,{className:"mt-1",children:j.description})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(Ae,{variant:j.isActive?"default":"secondary",children:j.isActive?"Active":"Inactive"})})]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),j.fields.length," fields"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),nt(j.updatedAt)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>h(j.id),className:"flex-1 mr-2",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>p(j.id),title:"Duplicate",children:e.jsx(Mu,{className:"h-3 w-3"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>d(j.id),title:"Delete",className:"text-red-600 hover:text-red-700",children:e.jsx(js,{className:"h-3 w-3"})})]})]})]})]},j.id))}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:l?"No templates found":"No templates yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:l?"Try adjusting your search terms":"Create your first agreement template to get started"}),!l&&e.jsxs(H,{onClick:m,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create Your First Template"]})]})})]})}const lG="modulepreload",oG=function(t){return"/"+t},O4={},Jx=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=oG(c),c in O4)return;O4[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":lG,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,p)=>{m.addEventListener("load",h),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})},$4=[{type:Cs.TEXT,label:"Text Field",icon:"Type",defaultSize:{width:200,height:30}},{type:Cs.DATE,label:"Date Field",icon:"Calendar",defaultSize:{width:150,height:30}},{type:Cs.SIGNATURE,label:"Signature",icon:"PenTool",defaultSize:{width:200,height:60}},{type:Cs.CHECKBOX,label:"Checkbox",icon:"CheckSquare",defaultSize:{width:20,height:20}}];function hj({type:t,className:s="h-4 w-4"}){switch(t){case Cs.TEXT:return e.jsx(Kw,{className:s});case Cs.DATE:return e.jsx(Zt,{className:s});case Cs.SIGNATURE:return e.jsx(k8,{className:s});case Cs.CHECKBOX:return e.jsx($c,{className:s});default:return e.jsx(Kw,{className:s})}}function B4(){const{templateId:t}=Yh(),s=Zn(),{toast:r}=xt(),{getTemplate:n,addTemplate:a,updateTemplate:i}=Mb(),[l,o]=y.useState(null),[c,d]=y.useState(""),[u,m]=y.useState(""),[h,p]=y.useState(null),[b,j]=y.useState(!1),[x,f]=y.useState({x:0,y:0}),[g,v]=y.useState(null),[w,k]=y.useState(""),[T,S]=y.useState(!1),C=y.useRef(null),E=y.useRef(null),M=y.useRef(null);y.useEffect(()=>{if(t){const q=n(t);q?(o(q),d(q.name),m(q.description||""),k(q.pdfBase64)):(r({title:"Template Not Found",description:"The requested template could not be found.",variant:"destructive"}),s("/agreements/templates"))}else o({id:"",name:"",description:"",pdfBase64:"",fields:[],createdAt:"",updatedAt:"",isActive:!0})},[t,n,s,r]);const D=y.useCallback(async()=>{if(!(!w||!C.current))try{const q=await Jx(()=>import("./pdf-BnPRJEQ6.js"),[]);q.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${q.version}/pdf.worker.min.js`;const _=C.current,V=_.getContext("2d");if(!V)return;const Q=atob(w),G=new Uint8Array(Q.length);for(let pe=0;pe<Q.length;pe++)G[pe]=Q.charCodeAt(pe);const ne=await(await q.getDocument({data:G}).promise).getPage(1),le=ne.getViewport({scale:1.5});_.width=le.width,_.height=le.height;const oe={canvasContext:V,viewport:le};await ne.render(oe).promise}catch(q){console.error("Error rendering PDF:",q),r({title:"PDF Rendering Error",description:"Failed to render the PDF. Please try uploading a different file.",variant:"destructive"})}},[w,r]);y.useEffect(()=>{w&&D()},[w,D]);const A=q=>{var Q;const _=(Q=q.target.files)==null?void 0:Q[0];if(!_)return;if(_.type!=="application/pdf"){r({title:"Invalid File Type",description:"Please upload a PDF file.",variant:"destructive"});return}v(_);const V=new FileReader;V.onload=G=>{var le;const ne=((le=G.target)==null?void 0:le.result).split(",")[1];k(ne)},V.readAsDataURL(_)},I=(q,_,V)=>{if(!l)return;const Q=$4.find(ne=>ne.type===q);if(!Q)return;const G={id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:q,label:`${Q.label} ${l.fields.length+1}`,x:_,y:V,width:Q.defaultSize.width,height:Q.defaultSize.height,required:!1,...q===Cs.TEXT&&{defaultValue:"",placeholder:"Enter text"},...q===Cs.DATE&&{format:"MM/dd/yyyy"},...q===Cs.CHECKBOX&&{defaultChecked:!1,checkboxLabel:"Check this box"}},Y={...l,fields:[...l.fields,G]};o(Y),p(G)},L=q=>{if(!C.current||!M.current)return;const _=M.current.getBoundingClientRect(),V=q.clientX-_.left,Q=q.clientY-_.top,G=l==null?void 0:l.fields.find(Y=>V>=Y.x&&V<=Y.x+Y.width&&Q>=Y.y&&Q<=Y.y+Y.height);p(G||null)},F=(q,_)=>{var Q;q.stopPropagation(),p(_),j(!0);const V=(Q=M.current)==null?void 0:Q.getBoundingClientRect();V&&f({x:q.clientX-V.left-_.x,y:q.clientY-V.top-_.y})},B=y.useCallback(q=>{if(!b||!h||!M.current||!l)return;const _=M.current.getBoundingClientRect(),V=Math.max(0,q.clientX-_.left-x.x),Q=Math.max(0,q.clientY-_.top-x.y),G=l.fields.map(Y=>Y.id===h.id?{...Y,x:V,y:Q}:Y);o({...l,fields:G}),p({...h,x:V,y:Q})},[b,h,x,l]),R=y.useCallback(()=>{j(!1)},[]);y.useEffect(()=>{if(b)return document.addEventListener("mousemove",B),document.addEventListener("mouseup",R),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",R)}},[b,B,R]);const $=(q,_,V)=>{if(!l)return;const Q=l.fields.map(Y=>Y.id===q?{...Y,[_]:V}:Y),G={...l,fields:Q};o(G),(h==null?void 0:h.id)===q&&p({...h,[_]:V})},U=q=>{if(!l)return;const _=l.fields.filter(V=>V.id!==q);o({...l,fields:_}),(h==null?void 0:h.id)===q&&p(null)},W=async()=>{if(!l||!c.trim()){r({title:"Validation Error",description:"Please provide a template name.",variant:"destructive"});return}if(!w){r({title:"Validation Error",description:"Please upload a PDF file.",variant:"destructive"});return}S(!0);try{const q={name:c,description:u,pdfBase64:w,fields:l.fields,isActive:!0};t?(i(t,q),r({title:"Template Updated",description:"Template has been saved successfully."})):(a(q),r({title:"Template Created",description:"Template has been created successfully."})),s("/agreements/templates")}catch{r({title:"Save Error",description:"Failed to save template. Please try again.",variant:"destructive"})}finally{S(!1)}};return l?e.jsx(gP,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>s("/agreements/templates"),children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:t?"Edit Template":"Create Template"}),e.jsx("p",{className:"ri-page-description",children:"Design your agreement template with interactive fields"})]})]}),e.jsx(H,{onClick:W,disabled:T,children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Template"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Template Information"})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"templateName",children:"Template Name *"}),e.jsx(ge,{id:"templateName",value:c,onChange:q=>d(q.target.value),placeholder:"Enter template name",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"templateDescription",children:"Description"}),e.jsx(kt,{id:"templateDescription",value:u,onChange:q=>m(q.target.value),placeholder:"Enter template description",className:"shadow-sm",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"PDF Document"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>{var q;return(q=E.current)==null?void 0:q.click()},className:"w-full",children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),g?g.name:"Upload PDF"]}),e.jsx("input",{ref:E,type:"file",accept:".pdf",onChange:A,className:"hidden"})]})]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Field Toolbox"}),e.jsx(Ee,{children:"Click on a field type, then click on the PDF to place it"})]}),e.jsx(te,{className:"space-y-3",children:$4.map(q=>e.jsxs(H,{variant:"outline",className:"w-full justify-start",onClick:()=>{const _=C.current?C.current.width/2-q.defaultSize.width/2:100,V=C.current?C.current.height/2-q.defaultSize.height/2:100;I(q.type,_,V)},children:[e.jsx(hj,{type:q.type,className:"h-4 w-4 mr-2"}),q.label]},q.type))})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs(de,{className:"text-lg",children:["Fields (",l.fields.length,")"]})}),e.jsx(te,{children:l.fields.length>0?e.jsx("div",{className:"space-y-2",children:l.fields.map(q=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md border cursor-pointer transition-colors ${(h==null?void 0:h.id)===q.id?"bg-primary/10 border-primary":"hover:bg-accent"}`,onClick:()=>p(q),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hj,{type:q.type,className:"h-3 w-3"}),e.jsx("span",{className:"text-sm font-medium",children:q.label}),q.required&&e.jsx(Ae,{variant:"secondary",className:"text-xs",children:"Required"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),U(q.id)},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:e.jsx(js,{className:"h-3 w-3"})})]},q.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No fields added yet. Use the toolbox to add fields."})})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Template Preview"}),e.jsx(Ee,{children:"Click to select fields, drag to move them"})]}),e.jsx(te,{children:e.jsx("div",{ref:M,className:"relative border rounded-lg overflow-auto bg-gray-50",style:{minHeight:"600px"},onClick:L,children:w?e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:C,className:"block mx-auto",style:{maxWidth:"100%",height:"auto"}}),l.fields.map(q=>e.jsxs("div",{className:`absolute border-2 cursor-move flex items-center justify-center text-xs font-medium bg-white/80 ${(h==null?void 0:h.id)===q.id?"border-primary bg-primary/10":"border-gray-400 hover:border-gray-600"}`,style:{left:q.x,top:q.y,width:q.width,height:q.height},onMouseDown:_=>F(_,q),children:[e.jsx(hj,{type:q.type,className:"h-3 w-3 mr-1"}),q.label]},q.id))]}):e.jsx("div",{className:"flex items-center justify-center h-96 text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ji,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Upload a PDF to start designing your template"})]})})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs(de,{className:"text-lg",children:[e.jsx(wn,{className:"h-4 w-4 mr-2 inline"}),"Field Properties"]})}),e.jsx(te,{children:h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldLabel",children:"Field Label"}),e.jsx(ge,{id:"fieldLabel",value:h.label,onChange:q=>$(h.id,"label",q.target.value),className:"shadow-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"fieldRequired",checked:h.required,onCheckedChange:q=>$(h.id,"required",q)}),e.jsx(Z,{htmlFor:"fieldRequired",children:"Required field"})]}),h.type===Cs.TEXT&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldDefaultValue",children:"Default Value"}),e.jsx(ge,{id:"fieldDefaultValue",value:h.defaultValue||"",onChange:q=>$(h.id,"defaultValue",q.target.value),className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldPlaceholder",children:"Placeholder"}),e.jsx(ge,{id:"fieldPlaceholder",value:h.placeholder||"",onChange:q=>$(h.id,"placeholder",q.target.value),className:"shadow-sm"})]})]}),h.type===Cs.DATE&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldFormat",children:"Date Format"}),e.jsx(ge,{id:"fieldFormat",value:h.format||"MM/dd/yyyy",onChange:q=>$(h.id,"format",q.target.value),className:"shadow-sm"})]}),h.type===Cs.CHECKBOX&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"fieldDefaultChecked",checked:h.defaultChecked||!1,onCheckedChange:q=>$(h.id,"defaultChecked",q)}),e.jsx(Z,{htmlFor:"fieldDefaultChecked",children:"Default checked"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldCheckboxLabel",children:"Checkbox Label"}),e.jsx(ge,{id:"fieldCheckboxLabel",value:h.checkboxLabel||"",onChange:q=>$(h.id,"checkboxLabel",q.target.value),className:"shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldWidth",children:"Width"}),e.jsx(ge,{id:"fieldWidth",type:"number",value:h.width,onChange:q=>$(h.id,"width",parseInt(q.target.value)),className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldHeight",children:"Height"}),e.jsx(ge,{id:"fieldHeight",type:"number",value:h.height,onChange:q=>$(h.id,"height",parseInt(q.target.value)),className:"shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldX",children:"X Position"}),e.jsx(ge,{id:"fieldX",type:"number",value:h.x,onChange:q=>$(h.id,"x",parseInt(q.target.value)),className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldY",children:"Y Position"}),e.jsx(ge,{id:"fieldY",type:"number",value:h.y,onChange:q=>$(h.id,"y",parseInt(q.target.value)),className:"shadow-sm"})]})]}),e.jsxs(H,{variant:"destructive",size:"sm",onClick:()=>U(h.id),className:"w-full",children:[e.jsx(js,{className:"h-3 w-3 mr-2"}),"Delete Field"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Select a field to edit its properties"})})]})})]})]})}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}function z4(){const t=Zn(),{toast:s}=xt(),[r,n]=y.useState(""),[a]=y.useState(Vd.sampleAgreements),[i,l]=y.useState("all"),[o,c]=y.useState(!1),[d,u]=y.useState(null),[m,h]=y.useState(null),[p,b]=y.useState("all"),j=a.filter(S=>{var D,A;const C=((D=S.customerName)==null?void 0:D.toLowerCase().includes(r.toLowerCase()))||((A=S.vehicleInfo)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))||S.id.toLowerCase().includes(r.toLowerCase()),E=i==="all"||S.type===i,M=p==="all"||S.status===p;return C&&E&&M}),x=S=>{const C=Vd.agreementStatuses.find(E=>E.value===S);return C?e.jsx(Ae,{className:C.color,children:C.label}):null},f=S=>{u(S),setShowNewAgreementForm(!0)},g=()=>{t("/agreements/templates/new"),t("/agreements/templates/new")},v=S=>{const C=Vd.agreementTypes.find(E=>E.value===S);return C?C.label:S},w=S=>{s({title:"Opening Agreement",description:`Opening agreement ${S} for review`})},k=S=>{s({title:"Signature Request Sent",description:`Signature request sent for agreement ${S}`})},T=S=>{s({description:`Downloading agreement ${S}`})};return e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx(aG,{onSelect:f,onClose:()=>c(!1),onCreateNew:g}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Agreement Vault"}),e.jsx("p",{className:"ri-page-description",children:"Manage contracts, agreements, and digital signatures"})]}),e.jsxs(H,{className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Agreement",e.jsxs(H,{variant:"outline",onClick:()=>t("/agreements/templates"),className:"shadow-sm",children:[e.jsx(wn,{className:"h-4 w-4 mr-2"}),"Manage Templates"]})]})]})}),e.jsx(ee,{className:"shadow-sm",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{className:"ri-search-input shadow-sm",placeholder:"Search agreements...",value:r,onChange:S=>n(S.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i,onChange:S=>l(S.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),Vd.agreementTypes.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]}),e.jsxs("select",{value:p,onChange:S=>b(S.target.value),className:"px-3 py-2 border rounded-md shadow-sm",children:[e.jsx("option",{value:"all",children:"All Statuses"}),Vd.agreementStatuses.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))]})]})]})})}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Agreements"}),e.jsxs(Ee,{children:[j.length," agreement",j.length!==1?"s":""," found"]})]}),e.jsxs(te,{children:[e.jsxs(zg,{children:[e.jsx(Vg,{children:e.jsxs(Io,{children:[e.jsx(Hs,{children:"Agreement ID"}),e.jsx(Hs,{children:"Customer"}),e.jsx(Hs,{children:"Type"}),e.jsx(Hs,{children:"Vehicle"}),e.jsx(Hs,{children:"Status"}),e.jsx(Hs,{children:"Amount"}),e.jsx(Hs,{children:"Created"}),e.jsx(Hs,{children:"Actions"})]})}),e.jsx(Ug,{children:j.map(S=>e.jsxs(Io,{children:[e.jsx($s,{className:"font-medium",children:S.id}),e.jsx($s,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.customerName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:S.customerEmail})]})}),e.jsx($s,{children:e.jsx(Ae,{variant:"outline",children:v(S.type)})}),e.jsx($s,{children:e.jsx("div",{className:"text-sm",children:S.vehicleInfo||"N/A"})}),e.jsx($s,{children:x(S.status)}),e.jsx($s,{children:S.totalAmount?De(S.totalAmount):"N/A"}),e.jsx($s,{children:nt(S.createdAt)}),e.jsx($s,{children:e.jsxs("div",{className:"ri-action-buttons",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>w(S.id),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(S.id),children:e.jsx(ga,{className:"h-4 w-4"})}),S.status==="PENDING"&&e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>k(S.id),children:e.jsx(va,{className:"h-4 w-4"})})]})})]},S.id))})]}),j.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No agreements found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})}function cG(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(z4,{})}),e.jsx(ot,{path:"/templates",element:e.jsx(iG,{})}),e.jsx(ot,{path:"/templates/new",element:e.jsx(B4,{})}),e.jsx(ot,{path:"/templates/edit/:templateId",element:e.jsx(B4,{})}),e.jsx(ot,{path:"/*",element:e.jsx(z4,{})})]})}function dG({ticket:t,onSave:s,onCancel:r}){var L,F,B,R,$,U,W;const{toast:n}=xt(),{vehicles:a}=Jc(),{leads:i}=tl(),[l,o]=y.useState(!1),[c,d]=y.useState(!1),[u,m]=y.useState({customerId:"",vehicleId:"",title:"",description:"",priority:gr.MEDIUM,status:Xs.OPEN,assignedTo:"",scheduledDate:void 0,notes:"",parts:[],labor:[],customFields:{warrantyStatus:"not_covered",estimatedCompletionDate:"",customerAuthorization:!1,technicianNotes:"",customerPortalAccess:!0}}),[h,p]=y.useState(!1),[b,j]=y.useState(!1),[x,f]=y.useState({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),[g,v]=y.useState({description:"",hours:1,rate:85,total:85});y.useEffect(()=>{var q,_,V,Q,G;t&&m({...t,customFields:{...t.customFields,warrantyStatus:((q=t.customFields)==null?void 0:q.warrantyStatus)||"not_covered",estimatedCompletionDate:((_=t.customFields)==null?void 0:_.estimatedCompletionDate)||"",customerAuthorization:((V=t.customFields)==null?void 0:V.customerAuthorization)||!1,technicianNotes:((Q=t.customFields)==null?void 0:Q.technicianNotes)||"",customerPortalAccess:((G=t.customFields)==null?void 0:G.customerPortalAccess)!==!1}})},[t]),y.useEffect(()=>{const q=x.quantity||1,_=x.unitCost||0;f(V=>({...V,total:q*_}))},[x.quantity,x.unitCost]),y.useEffect(()=>{const q=g.hours||1,_=g.rate||85;v(V=>({...V,total:q*_}))},[g.hours,g.rate]);const w=async q=>{if(q.preventDefault(),!u.customerId||!u.title||!u.description){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}o(!0);try{await s(u),n({title:"Success",description:`Service ticket ${t?"updated":"created"} successfully`})}catch{n({title:"Error",description:`Failed to ${t?"update":"create"} service ticket`,variant:"destructive"})}finally{o(!1)}},k=q=>{q==="add-new"?d(!0):m(_=>({..._,customerId:q}))},T=q=>{m(_=>({..._,customerId:q.id})),d(!1),n({title:"Customer Added",description:`${q.firstName} ${q.lastName} has been added as a customer.`})},S=()=>{if(!x.partNumber||!x.description){n({title:"Validation Error",description:"Part number and description are required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),partNumber:x.partNumber||"",description:x.description||"",quantity:x.quantity||1,unitCost:x.unitCost||0,total:x.total||0};m(_=>({..._,parts:[..._.parts||[],q]})),f({partNumber:"",description:"",quantity:1,unitCost:0,total:0}),p(!1)},C=q=>{m(_=>{var V;return{..._,parts:((V=_.parts)==null?void 0:V.filter(Q=>Q.id!==q))||[]}})},E=()=>{if(!g.description){n({title:"Validation Error",description:"Labor description is required",variant:"destructive"});return}const q={id:Math.random().toString(36).substr(2,9),description:g.description||"",hours:g.hours||1,rate:g.rate||85,total:g.total||85};m(_=>({..._,labor:[..._.labor||[],q]})),v({description:"",hours:1,rate:85,total:85}),j(!1)},M=q=>{m(_=>{var V;return{..._,labor:((V=_.labor)==null?void 0:V.filter(Q=>Q.id!==q))||[]}})},A=(()=>{var V,Q;const q=((V=u.parts)==null?void 0:V.reduce((G,Y)=>G+Y.total,0))||0,_=((Q=u.labor)==null?void 0:Q.reduce((G,Y)=>G+Y.total,0))||0;return{partsTotal:q,laborTotal:_,grandTotal:q+_}})(),I=[{id:"Tech-001",name:"John Smith"},{id:"Tech-002",name:"Sarah Johnson"},{id:"Tech-003",name:"Mike Davis"}];return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[c&&e.jsx(Vu,{onClose:()=>d(!1),onSuccess:T}),e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Service Ticket":"Create Service Ticket"}),e.jsx(Ee,{children:t?"Update service ticket details":"Create a new service ticket"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ticket Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),e.jsxs(Be,{value:u.customerId,onValueChange:k,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select customer"})}),e.jsxs($e,{children:[e.jsx("div",{className:"px-2 py-1.5",children:e.jsxs(H,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>k("add-new"),children:[e.jsx(tt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),e.jsx("div",{className:"px-2 py-1 border-t"}),i.map(q=>e.jsxs(J,{value:q.id,children:[q.firstName," ",q.lastName]},q.id))]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle"}),e.jsxs(Be,{value:u.vehicleId,onValueChange:q=>m(_=>({..._,vehicleId:q})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select vehicle (optional)"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"No Vehicle"}),a.map(q=>e.jsxs(J,{value:q.id,children:[q.year," ",q.make," ",q.model]},q.id))]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"title",children:"Service Title *"}),e.jsx(ge,{id:"title",value:u.title,onChange:q=>m(_=>({..._,title:q.target.value})),placeholder:"e.g., Annual Maintenance Service"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description *"}),e.jsx(kt,{id:"description",value:u.description,onChange:q=>m(_=>({..._,description:q.target.value})),placeholder:"Describe the service needed",rows:3})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"priority",children:"Priority"}),e.jsxs(Be,{value:u.priority,onValueChange:q=>m(_=>({..._,priority:q})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:gr.LOW,children:"Low"}),e.jsx(J,{value:gr.MEDIUM,children:"Medium"}),e.jsx(J,{value:gr.HIGH,children:"High"}),e.jsx(J,{value:gr.URGENT,children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:u.status,onValueChange:q=>m(_=>({..._,status:q})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Xs.OPEN,children:"Open"}),e.jsx(J,{value:Xs.IN_PROGRESS,children:"In Progress"}),e.jsx(J,{value:Xs.WAITING_PARTS,children:"Waiting for Parts"}),e.jsx(J,{value:Xs.COMPLETED,children:"Completed"}),e.jsx(J,{value:Xs.CANCELLED,children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"assignedTo",children:"Assigned Technician"}),e.jsxs(Be,{value:u.assignedTo,onValueChange:q=>m(_=>({..._,assignedTo:q})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select technician"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"Unassigned"}),I.map(q=>e.jsx(J,{value:q.id,children:q.name},q.id))]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"scheduledDate",children:"Scheduled Date"}),e.jsx(ge,{id:"scheduledDate",type:"date",value:u.scheduledDate?new Date(u.scheduledDate).toISOString().split("T")[0]:"",onChange:q=>m(_=>({..._,scheduledDate:q.target.value?new Date(q.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"estimatedCompletionDate",children:"Estimated Completion"}),e.jsx(ge,{id:"estimatedCompletionDate",type:"date",value:((L=u.customFields)==null?void 0:L.estimatedCompletionDate)||"",onChange:q=>m(_=>({..._,customFields:{..._.customFields,estimatedCompletionDate:q.target.value}}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Warranty Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"warrantyStatus",children:"Warranty Status"}),e.jsxs(Be,{value:((F=u.customFields)==null?void 0:F.warrantyStatus)||"not_covered",onValueChange:q=>m(_=>({..._,customFields:{..._.customFields,warrantyStatus:q}})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"covered",children:"Covered by Warranty"}),e.jsx(J,{value:"partial",children:"Partially Covered"}),e.jsx(J,{value:"not_covered",children:"Not Covered"}),e.jsx(J,{value:"extended",children:"Extended Warranty"}),e.jsx(J,{value:"expired",children:"Warranty Expired"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[e.jsx(Ct,{id:"customerAuthorization",checked:((B=u.customFields)==null?void 0:B.customerAuthorization)||!1,onCheckedChange:q=>m(_=>({..._,customFields:{..._.customFields,customerAuthorization:!!q}}))}),e.jsx(Z,{htmlFor:"customerAuthorization",children:"Customer has authorized work"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Parts"}),e.jsxs(H,{type:"button",onClick:()=>p(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Part"]})]}),h&&e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"partNumber",children:"Part Number *"}),e.jsx(ge,{id:"partNumber",value:x.partNumber,onChange:q=>f(_=>({..._,partNumber:q.target.value})),placeholder:"e.g., AC-COMP-001"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"partDescription",children:"Description *"}),e.jsx(ge,{id:"partDescription",value:x.description,onChange:q=>f(_=>({..._,description:q.target.value})),placeholder:"e.g., AC Compressor"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"partQuantity",children:"Quantity"}),e.jsx(ge,{id:"partQuantity",type:"number",min:"1",value:x.quantity,onChange:q=>f(_=>({..._,quantity:parseInt(q.target.value)||1}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"partUnitCost",children:"Unit Cost"}),e.jsx(ge,{id:"partUnitCost",type:"number",step:"0.01",min:"0",value:x.unitCost,onChange:q=>f(_=>({..._,unitCost:parseFloat(q.target.value)||0}))})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Total: "}),e.jsx("span",{className:"font-bold",children:De(x.total||0)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(H,{type:"button",onClick:S,children:"Add Part"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:u.parts&&u.parts.length>0?u.parts.map(q=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:q.description}),e.jsx(Ae,{variant:"outline",children:q.partNumber})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",q.quantity," × ",De(q.unitCost)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-bold",children:De(q.total)}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(q.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(ma,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No parts added yet"}),e.jsx("p",{className:"text-sm",children:"Add parts needed for this service"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Labor"}),e.jsxs(H,{type:"button",onClick:()=>j(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Labor"]})]}),b&&e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx(Z,{htmlFor:"laborDescription",children:"Description *"}),e.jsx(ge,{id:"laborDescription",value:g.description,onChange:q=>v(_=>({..._,description:q.target.value})),placeholder:"e.g., Diagnostic and Repair"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"laborHours",children:"Hours"}),e.jsx(ge,{id:"laborHours",type:"number",step:"0.5",min:"0.5",value:g.hours,onChange:q=>v(_=>({..._,hours:parseFloat(q.target.value)||1}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"laborRate",children:"Hourly Rate"}),e.jsx(ge,{id:"laborRate",type:"number",step:"0.01",min:"0",value:g.rate,onChange:q=>v(_=>({..._,rate:parseFloat(q.target.value)||85}))})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Total"}),e.jsx("div",{className:"h-10 px-3 py-2 rounded-md border border-input bg-muted/50 flex items-center",children:De(g.total||0)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(H,{type:"button",onClick:E,children:"Add Labor"})]})]})}),e.jsx("div",{className:"space-y-3",children:u.labor&&u.labor.length>0?u.labor.map(q=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:q.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[q.hours," hours × ",De(q.rate),"/hr"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-bold",children:De(q.total)}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(q.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},q.id)):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No labor added yet"}),e.jsx("p",{className:"text-sm",children:"Add labor for this service"})]})})]}),(((R=u.parts)==null?void 0:R.length)>0||(($=u.labor)==null?void 0:$.length)>0)&&e.jsx(ee,{className:"bg-muted/30",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Parts Total:"}),e.jsx("span",{children:De(A.partsTotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Labor Total:"}),e.jsx("span",{children:De(A.laborTotal)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Grand Total:"}),e.jsx("span",{children:De(A.grandTotal)})]})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"technicianNotes",children:"Technician Notes"}),e.jsx(kt,{id:"technicianNotes",value:((U=u.customFields)==null?void 0:U.technicianNotes)||"",onChange:q=>m(_=>({..._,customFields:{..._.customFields,technicianNotes:q.target.value}})),placeholder:"Notes for technicians only (not visible to customer)",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Customer Notes"}),e.jsx(kt,{id:"notes",value:u.notes,onChange:q=>m(_=>({..._,notes:q.target.value})),placeholder:"Notes visible to the customer",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"customerPortalAccess",checked:((W=u.customFields)==null?void 0:W.customerPortalAccess)!==!1,onCheckedChange:q=>m(_=>({..._,customFields:{..._.customFields,customerPortalAccess:!!q}}))}),e.jsx(Z,{htmlFor:"customerPortalAccess",children:"Allow customer to view this ticket in portal"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Ticket"]})})]})]})})]})]})}function uG({ticketId:t,onUpdate:s,onClose:r,onCreateTask:n}){const{toast:a}=xt(),[i,l]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState(Vn.formDefaults.status),[m,h]=y.useState(""),p=Vn.sampleTickets.find(f=>f.id===t)||Vn.sampleTickets[0],b=f=>Vn.statusColors[f]||"bg-gray-100 text-gray-800",j=f=>Vn.priorityColors[f]||"bg-gray-100 text-gray-800",x=async()=>{c(!0);try{s&&s(t,{status:d}),a({title:"Status Updated",description:`Ticket status changed to ${d}`})}catch{a({title:"Error",description:"Failed to update ticket status",variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:p.title}),e.jsxs("p",{className:"text-muted-foreground",children:["Ticket #",p.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>l(!i),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),i?"Cancel":"Edit"]}),n&&e.jsxs(H,{variant:"outline",onClick:()=>n(p),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]}),r&&e.jsx(H,{variant:"outline",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:b(p.status),children:p.status}),e.jsxs(Ae,{className:j(p.priority),children:[p.priority," Priority"]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Ticket Information"})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Customer:"}),e.jsx("span",{className:"font-medium",children:p.customerName})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Assigned to:"}),e.jsx("span",{className:"font-medium",children:p.assignedTechName})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled:"}),e.jsx("span",{className:"font-medium",children:Xm(p.scheduledDate)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Created:"}),e.jsx("span",{className:"font-medium",children:Xm(p.createdAt)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p.description})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Update Status"})}),e.jsx(te,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-48",children:e.jsx(ze,{})}),e.jsx($e,{children:Vn.defaultStatuses.map(f=>e.jsx(J,{value:f,children:f},f))})]})}),e.jsxs(H,{onClick:x,disabled:o,size:"sm",children:[e.jsx(_t,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Parts"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-3",children:p.parts.map(f=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Qty: ",f.quantity]})]}),e.jsx("p",{className:"font-medium",children:De(f.cost*f.quantity)})]},f.id))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Labor"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-3",children:p.labor.map(f=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.hours," hrs @ ",De(f.rate),"/hr"]})]}),e.jsx("p",{className:"font-medium",children:De(f.hours*f.rate)})]},f.id))})})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center",children:[e.jsx(wt,{className:"h-5 w-5 mr-2"}),"Total Cost"]})}),e.jsx(te,{children:e.jsx("div",{className:"text-2xl font-bold",children:De(p.totalCost)})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Timeline"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:p.timeline.map(f=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full mt-2"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:f.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Xm(f.timestamp)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.details}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",f.user]})]})]},f.id))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2"}),"Notes"]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(kt,{value:m,onChange:f=>h(f.target.value),placeholder:p.notes||"Add notes about this service ticket...",rows:4}),e.jsxs(H,{onClick:()=>console.log("Save notes:",m),children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Notes"]})]})})]})]})}function mG({customerId:t}){const[s,r]=y.useState(""),[n,a]=y.useState("all"),[i,l]=y.useState("all"),c=(t?Vn.sampleTickets.filter(h=>h.customerId===t):Vn.sampleTickets).filter(h=>{const p=h.title.toLowerCase().includes(s.toLowerCase())||h.description.toLowerCase().includes(s.toLowerCase()),b=n==="all"||h.status===n,j=i==="all"||h.category===i;return p&&b&&j}),d=h=>Vn.statusColors[h]||"bg-gray-100 text-gray-800",u=h=>Vn.priorityColors[h]||"bg-gray-100 text-gray-800",m=h=>{switch(h){case"Completed":return e.jsx(_t,{className:"h-4 w-4"});case"In Progress":return e.jsx(zt,{className:"h-4 w-4"});default:return e.jsx(Ir,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"View and track your service requests"})]})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(ge,{placeholder:"Search tickets...",value:s,onChange:h=>r(h.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:n,onValueChange:a,children:[e.jsx(Oe,{className:"w-48",children:e.jsx(ze,{placeholder:"All statuses"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),Vn.defaultStatuses.map(h=>e.jsx(J,{value:h,children:h},h))]})]}),e.jsxs(Be,{value:i,onValueChange:l,children:[e.jsx(Oe,{className:"w-48",children:e.jsx(ze,{placeholder:"All categories"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Categories"}),Vn.categoryOptions.map(h=>e.jsx(J,{value:h,children:h},h))]})]})]})})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(h=>{var p;return e.jsxs(ee,{className:"hover:shadow-md transition-shadow",children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(de,{className:"text-lg",children:h.title}),e.jsxs(Ee,{className:"text-sm",children:["#",h.id]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx(Ae,{className:d(h.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[m(h.status),e.jsx("span",{children:h.status})]})}),e.jsx(Ae,{variant:"outline",className:u(h.priority),children:h.priority})]})]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:h.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center space-x-2 text-sm",children:e.jsx(Ae,{variant:"secondary",children:h.category})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(mr,{className:"h-4 w-4"}),e.jsx("span",{children:((p=Vn.technicianOptions.find(b=>b.id===h.assignedTo))==null?void 0:p.name)||h.assignedTo})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx("span",{children:Xm(h.scheduledDate)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsxs("span",{children:[h.estimatedHours,"h estimated"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Created ",Xm(h.createdAt)]}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(zs,{className:"h-4 w-4 mr-1"}),"View"]})]})]})]},h.id)})}),c.length===0&&e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ir,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-muted-foreground",children:s||n!=="all"||i!=="all"?"Try adjusting your search criteria":"No service tickets have been created yet"})]})})})]})}function hG(){const{tickets:t,createTicket:s,updateTicket:r}=PP(),{toast:n}=xt(),{createTask:a}=ed(),[i,l]=y.useState(""),[o,c]=y.useState("all"),[d,u]=y.useState("all"),[m,h]=y.useState(!1),[p,b]=y.useState(!1),[j,x]=y.useState(!1),[f,g]=y.useState(!1),[v,w]=y.useState(null),[k,T]=y.useState(!1),[S,C]=y.useState(void 0),E=W=>{switch(W){case Xs.OPEN:return"bg-blue-50 text-blue-700 border-blue-200";case Xs.IN_PROGRESS:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Xs.WAITING_PARTS:return"bg-orange-50 text-orange-700 border-orange-200";case Xs.COMPLETED:return"bg-green-50 text-green-700 border-green-200";case Xs.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},M=W=>{switch(W){case gr.LOW:return"bg-green-50 text-green-700 border-green-200";case gr.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case gr.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case gr.URGENT:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},D=t.filter(W=>{var q,_,V,Q;return((q=W.title)==null?void 0:q.toLowerCase().includes(i.toLowerCase()))||((_=W.description)==null?void 0:_.toLowerCase().includes(i.toLowerCase()))||((V=W.customerId)==null?void 0:V.toLowerCase().includes(i.toLowerCase()))||((Q=W.id)==null?void 0:Q.toLowerCase().includes(i.toLowerCase()))}).filter(W=>o==="all"||W.status===o).filter(W=>d==="all"||W.priority===d),A=()=>{w(null),h(!0)},I=W=>{w(W),h(!0),b(!1)},L=W=>{w(W),b(!0)},F=W=>{w(W),x(!0)},B=async W=>{try{v?(await r(v.id,W),n({title:"Success",description:"Service ticket updated successfully"})):(await s(W),n({title:"Success",description:"Service ticket created successfully"})),h(!1),w(null)}catch{n({title:"Error",description:`Failed to ${v?"update":"create"} service ticket`,variant:"destructive"})}},R=W=>{n({title:"Customer Added",description:`${W.firstName} ${W.lastName} has been added.`}),w(null),g(!1),h(!0)},$=async W=>{try{await a(W),T(!1),C(void 0),n({title:"Task Created",description:"Task has been created successfully"})}catch{n({title:"Error",description:"Failed to create task",variant:"destructive"})}},U=W=>{const q=W.priority===gr.URGENT?es.URGENT:W.priority===gr.HIGH?es.HIGH:W.priority===gr.MEDIUM?es.MEDIUM:es.LOW,_=W.scheduledDate||(W.priority===gr.URGENT?new Date(Date.now()+24*60*60*1e3):new Date(Date.now()+3*24*60*60*1e3)),V=W.parts.reduce((Q,G)=>Q+G.total,0)+W.labor.reduce((Q,G)=>Q+G.total,0);C({sourceId:W.id,sourceType:"service_ticket",module:er.SERVICE,title:`Service: ${W.title}`,description:`${W.description} - Status: ${W.status}, Total: ${De(V)}`,priority:q,assignedTo:W.assignedTo,dueDate:_,link:"/service",customFields:{customerId:W.customerId,vehicleId:W.vehicleId,ticketPriority:W.priority,partsTotal:W.parts.reduce((Q,G)=>Q+G.total,0),laborTotal:W.labor.reduce((Q,G)=>Q+G.total,0),totalCost:V}}),T(!0)};return e.jsxs("div",{className:"space-y-8",children:[k&&e.jsx(Xc,{initialData:S,onSave:$,onCancel:()=>{T(!1),C(void 0)}}),f&&e.jsx(Vu,{onClose:()=>g(!1),onSuccess:R}),m&&e.jsx(dG,{ticket:v||void 0,onSave:B,onCancel:()=>{h(!1),w(null)}}),p&&v&&e.jsx(uG,{ticket:v,onClose:()=>b(!1),onEdit:I,onCreateTask:U}),j&&v&&e.jsx(mG,{ticket:v,onClose:()=>x(!1)}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Service Operations"}),e.jsx("p",{className:"ri-page-description",children:"Manage service tickets and maintenance schedules"})]}),e.jsxs(H,{className:"shadow-sm",onClick:A,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Service Ticket"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Tickets"}),e.jsx(ma,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"All service requests"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),e.jsx(ma,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(W=>W.status===Xs.IN_PROGRESS).length}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),"Currently working"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Waiting Parts"}),e.jsx(ma,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(W=>W.status===Xs.WAITING_PARTS).length}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),"Parts on order"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Revenue"}),e.jsx(wt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(t.reduce((W,q)=>W+q.parts.reduce((_,V)=>_+V.total,0)+q.labor.reduce((_,V)=>_+V.total,0),0))}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Service revenue"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search service tickets...",value:i,onChange:W=>l(W.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{value:o,onValueChange:c,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:Xs.OPEN,children:"Open"}),e.jsx(J,{value:Xs.IN_PROGRESS,children:"In Progress"}),e.jsx(J,{value:Xs.WAITING_PARTS,children:"Waiting Parts"}),e.jsx(J,{value:Xs.COMPLETED,children:"Completed"}),e.jsx(J,{value:Xs.CANCELLED,children:"Cancelled"})]})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Priority"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Priorities"}),e.jsx(J,{value:gr.LOW,children:"Low"}),e.jsx(J,{value:gr.MEDIUM,children:"Medium"}),e.jsx(J,{value:gr.HIGH,children:"High"}),e.jsx(J,{value:gr.URGENT,children:"Urgent"})]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Service Tickets"}),e.jsx(Ee,{children:"Manage service requests and maintenance schedules"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[D.map(W=>{var q;return e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:W.title}),e.jsx(Ae,{className:Ge("ri-badge-status",M(W.priority)),children:W.priority.toUpperCase()}),e.jsx(Ae,{className:Ge("ri-badge-status",E(W.status)),children:W.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"h-3 w-3 mr-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Customer:"}),e.jsx("span",{className:"ml-1",children:W.customerId})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"h-3 w-3 mr-2 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Assigned:"}),e.jsx("span",{className:"ml-1",children:W.assignedTo||"Unassigned"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-2 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Scheduled:"}),e.jsx("span",{className:"ml-1",children:W.scheduledDate?nt(W.scheduledDate):"Not scheduled"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(zt,{className:"h-3 w-3 mr-2 text-orange-500"}),e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("span",{className:"ml-1",children:nt(W.createdAt)})]})]}),e.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:W.description}),W.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",W.notes]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm",children:[e.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md",children:[e.jsx("span",{className:"font-medium",children:"Parts:"})," ",De(W.parts.reduce((_,V)=>_+V.total,0))]}),e.jsxs("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded-md",children:[e.jsx("span",{className:"font-medium",children:"Labor:"})," ",De(W.labor.reduce((_,V)=>_+V.total,0))]}),e.jsxs("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded-md font-semibold",children:[e.jsx("span",{className:"font-medium",children:"Total:"})," ",De(W.parts.reduce((_,V)=>_+V.total,0)+W.labor.reduce((_,V)=>_+V.total,0))]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>L(W),children:"View"}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>I(W),children:"Edit"}),((q=W.customFields)==null?void 0:q.customerPortalAccess)!==!1&&e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>F(W),children:"Customer View"}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>U(W),children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),"Task"]})]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>U(W),children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),"Task"]})]})]},W.id)}),D.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(ma,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No service tickets found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function pG(){return e.jsx(kr,{children:e.jsx(ot,{path:"/*",element:e.jsx(hG,{})})})}function JD(){const[t,s]=y.useState([]),[r,n]=y.useState(!1);y.useEffect(()=>{a()},[]);const a=()=>{const x=xs("renter-insight-deliveries",[{id:"1",customerId:"cust-1",vehicleId:"veh-1",status:Wt.SCHEDULED,scheduledDate:new Date("2024-01-25"),address:{street:"123 Main St",city:"Springfield",state:"IL",zipCode:"62701",country:"USA"},driver:"Driver-001",notes:"Customer prefers morning delivery",customFields:{contactPhone:"(555) 123-4567",contactEmail:"customer@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"10:00"},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:"2",customerId:"cust-2",vehicleId:"veh-2",status:Wt.IN_TRANSIT,scheduledDate:new Date("2024-01-20"),deliveredDate:void 0,address:{street:"456 Oak Ave",city:"Chicago",state:"IL",zipCode:"60601",country:"USA"},driver:"Driver-002",notes:"Call customer 30 minutes before arrival",customFields:{contactPhone:"(555) 987-6543",contactEmail:"customer2@example.com",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"14:30",departureTime:"2024-01-20T08:00:00",departureNotes:"Left dealership on schedule",customerNotified:"2024-01-20T08:15:00",notificationMethod:"SMS",etaUpdated:"2024-01-20T10:30:00"},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-20")}]);s(x)},i=x=>{Xt("renter-insight-deliveries",x)};return{deliveries:t,loading:r,getDeliveriesByCustomerId:x=>t.filter(f=>f.customerId===x),getDeliveriesByVehicleId:x=>t.filter(f=>f.vehicleId===x),getDeliveryById:x=>t.find(f=>f.id===x),createDelivery:async x=>{n(!0);try{const f={id:Math.random().toString(36).substr(2,9),customerId:x.customerId||"",vehicleId:x.vehicleId||"",status:x.status||Wt.SCHEDULED,scheduledDate:x.scheduledDate||new Date,deliveredDate:x.deliveredDate,address:x.address||{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:x.driver||"",notes:x.notes||"",customFields:x.customFields||{},createdAt:new Date,updatedAt:new Date},g=[...t,f];return s(g),i(g),f}finally{n(!1)}},updateDelivery:async(x,f)=>{const g=t.map(v=>v.id===x?{...v,...f,updatedAt:new Date}:v);s(g),i(g)},deleteDelivery:async x=>{const f=t.filter(g=>g.id!==x);s(f),i(f)},updateDeliveryStatus:async(x,f)=>{const g=t.map(v=>v.id===x?{...v,status:f,deliveredDate:f===Wt.DELIVERED?new Date:v.deliveredDate,updatedAt:new Date}:v);s(g),i(g)},sendNotification:async(x,f,g)=>{if(!t.find(k=>k.id===x))return;const w=t.map(k=>k.id===x?{...k,customFields:{...k.customFields,customerNotified:new Date().toISOString(),notificationMethod:f==="sms"?"SMS":"Email",lastNotificationMessage:g},updatedAt:new Date}:k);return s(w),i(w),await new Promise(k=>setTimeout(k,1e3)),!0},updateETA:async(x,f)=>{if(!t.find(w=>w.id===x))return;const v=t.map(w=>w.id===x?{...w,customFields:{...w.customFields,estimatedArrival:f,etaUpdated:new Date().toISOString()},updatedAt:new Date}:w);s(v),i(v)},addDeliveryPhotos:async(x,f,g)=>{if(!t.find(T=>T.id===x))return;const w=f.map((T,S)=>({url:T,caption:g[S]||""})),k=t.map(T=>{var S,C;return T.id===x?{...T,customFields:{...T.customFields,deliveryPhotos:[...((S=T.customFields)==null?void 0:S.deliveryPhotos)||[],...f],photoDetails:[...((C=T.customFields)==null?void 0:C.photoDetails)||[],...w]},updatedAt:new Date}:T});s(k),i(k)}}}const bl={deliveryStatuses:["Pending","Scheduled","In Transit","Delivered","Rescheduled","Cancelled"],deliveryTypes:["Home Delivery","RV Park Delivery","Customer Pickup"],checklistItems:["VIN matched","Skirting Installed","Electric Connected","Water Connected","Walkthrough Completed","Customer Signed"],driverNames:["John Smith","Maria Lopez","Dan Cooper"],photoInstructions:["Front view","Side view","Setup complete","Interior"]},fG=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Eu(t,s,r){const n=xG(t),{webkitRelativePath:a}=t,i=typeof s=="string"?s:typeof a=="string"&&a.length>0?a:`./${t.name}`;return typeof n.path!="string"&&V4(n,"path",i),V4(n,"relativePath",i),n}function xG(t){const{name:s}=t;if(s&&s.lastIndexOf(".")!==-1&&!t.type){const n=s.split(".").pop().toLowerCase(),a=fG.get(n);a&&Object.defineProperty(t,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return t}function V4(t,s,r){Object.defineProperty(t,s,{value:r,writable:!1,configurable:!1,enumerable:!0})}const gG=[".DS_Store","Thumbs.db"];function vG(t){return Kc(this,void 0,void 0,function*(){return Xx(t)&&jG(t.dataTransfer)?wG(t.dataTransfer,t.type):yG(t)?bG(t):Array.isArray(t)&&t.every(s=>"getFile"in s&&typeof s.getFile=="function")?NG(t):[]})}function jG(t){return Xx(t)}function yG(t){return Xx(t)&&Xx(t.target)}function Xx(t){return typeof t=="object"&&t!==null}function bG(t){return i1(t.target.files).map(s=>Eu(s))}function NG(t){return Kc(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>r.getFile()))).map(r=>Eu(r))})}function wG(t,s){return Kc(this,void 0,void 0,function*(){if(t.items){const r=i1(t.items).filter(a=>a.kind==="file");if(s!=="drop")return r;const n=yield Promise.all(r.map(SG));return U4(XD(n))}return U4(i1(t.files).map(r=>Eu(r)))})}function U4(t){return t.filter(s=>gG.indexOf(s.name)===-1)}function i1(t){if(t===null)return[];const s=[];for(let r=0;r<t.length;r++){const n=t[r];s.push(n)}return s}function SG(t){if(typeof t.webkitGetAsEntry!="function")return q4(t);const s=t.webkitGetAsEntry();return s&&s.isDirectory?eI(s):q4(t,s)}function XD(t){return t.reduce((s,r)=>[...s,...Array.isArray(r)?XD(r):[r]],[])}function q4(t,s){return Kc(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){const l=yield i.getFile();return l.handle=i,Eu(l)}}const n=t.getAsFile();if(!n)throw new Error(`${t} is not a File`);return Eu(n,(r=s==null?void 0:s.fullPath)!==null&&r!==void 0?r:void 0)})}function CG(t){return Kc(this,void 0,void 0,function*(){return t.isDirectory?eI(t):AG(t)})}function eI(t){const s=t.createReader();return new Promise((r,n)=>{const a=[];function i(){s.readEntries(l=>Kc(this,void 0,void 0,function*(){if(l.length){const o=Promise.all(l.map(CG));a.push(o),i()}else try{const o=yield Promise.all(a);r(o)}catch(o){n(o)}}),l=>{n(l)})}i()})}function AG(t){return Kc(this,void 0,void 0,function*(){return new Promise((s,r)=>{t.file(n=>{const a=Eu(n,t.fullPath);s(a)},n=>{r(n)})})})}var pj=function(t,s){if(t&&s){var r=Array.isArray(s)?s:s.split(",");if(r.length===0)return!0;var n=t.name||"",a=(t.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return r.some(function(l){var o=l.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?i===o.replace(/\/.*$/,""):a===o})}return!0};function H4(t){return PG(t)||EG(t)||sI(t)||TG()}function TG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PG(t){if(Array.isArray(t))return l1(t)}function W4(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function G4(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?W4(Object(r),!0).forEach(function(n){tI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tI(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function zh(t,s){return kG(t)||IG(t,s)||sI(t,s)||DG()}function DG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sI(t,s){if(t){if(typeof t=="string")return l1(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1(t,s)}}function l1(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function IG(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,l,o;try{for(r=r.call(t);!(a=(l=r.next()).done)&&(n.push(l.value),!(s&&n.length===s));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function kG(t){if(Array.isArray(t))return t}var LG=typeof pj=="function"?pj:pj.default,FG="file-invalid-type",RG="file-too-large",MG="file-too-small",_G="too-many-files",OG=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=s.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:FG,message:"File type must be ".concat(n)}},K4=function(s){return{code:RG,message:"File is larger than ".concat(s," ").concat(s===1?"byte":"bytes")}},Y4=function(s){return{code:MG,message:"File is smaller than ".concat(s," ").concat(s===1?"byte":"bytes")}},$G={code:_G,message:"Too many files"};function rI(t,s){var r=t.type==="application/x-moz-file"||LG(t,s);return[r,r?null:OG(s)]}function nI(t,s,r){if(gc(t.size))if(gc(s)&&gc(r)){if(t.size>r)return[!1,K4(r)];if(t.size<s)return[!1,Y4(s)]}else{if(gc(s)&&t.size<s)return[!1,Y4(s)];if(gc(r)&&t.size>r)return[!1,K4(r)]}return[!0,null]}function gc(t){return t!=null}function BG(t){var s=t.files,r=t.accept,n=t.minSize,a=t.maxSize,i=t.multiple,l=t.maxFiles,o=t.validator;return!i&&s.length>1||i&&l>=1&&s.length>l?!1:s.every(function(c){var d=rI(c,r),u=zh(d,1),m=u[0],h=nI(c,n,a),p=zh(h,1),b=p[0],j=o?o(c):null;return m&&b&&!j})}function eg(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Rf(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(s){return s==="Files"||s==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Q4(t){t.preventDefault()}function zG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function VG(t){return t.indexOf("Edge/")!==-1}function UG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return zG(t)||VG(t)}function Mi(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),l=1;l<a;l++)i[l-1]=arguments[l];return s.some(function(o){return!eg(n)&&o&&o.apply(void 0,[n].concat(i)),eg(n)})}}function qG(){return"showOpenFilePicker"in window}function HG(t){if(gc(t)){var s=Object.entries(t).filter(function(r){var n=zh(r,2),a=n[0],i=n[1],l=!0;return aI(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(i)||!i.every(iI))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(r,n){var a=zh(n,2),i=a[0],l=a[1];return G4(G4({},r),{},tI({},i,l))},{});return[{description:"Files",accept:s}]}return t}function WG(t){if(gc(t))return Object.entries(t).reduce(function(s,r){var n=zh(r,2),a=n[0],i=n[1];return[].concat(H4(s),[a],H4(i))},[]).filter(function(s){return aI(s)||iI(s)}).join(",")}function GG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function KG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function aI(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function iI(t){return/^.*\.[\w]+$/.test(t)}var YG=["children"],QG=["open"],ZG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],JG=["refKey","onChange","onClick"];function XG(t){return sK(t)||tK(t)||lI(t)||eK()}function eK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sK(t){if(Array.isArray(t))return o1(t)}function fj(t,s){return aK(t)||nK(t,s)||lI(t,s)||rK()}function rK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lI(t,s){if(t){if(typeof t=="string")return o1(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o1(t,s)}}function o1(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function nK(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,i=!1,l,o;try{for(r=r.call(t);!(a=(l=r.next()).done)&&(n.push(l.value),!(s&&n.length===s));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function aK(t){if(Array.isArray(t))return t}function Z4(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Z4(Object(r),!0).forEach(function(n){c1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c1(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function tg(t,s){if(t==null)return{};var r=iK(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iK(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}var _b=y.forwardRef(function(t,s){var r=t.children,n=tg(t,YG),a=cv(n),i=a.open,l=tg(a,QG);return y.useImperativeHandle(s,function(){return{open:i}},[i]),vt.createElement(y.Fragment,null,r(Js(Js({},l),{},{open:i})))});_b.displayName="Dropzone";var oI={disabled:!1,getFilesFromEvent:vG,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};_b.defaultProps=oI;_b.propTypes={children:ks.func,accept:ks.objectOf(ks.arrayOf(ks.string)),multiple:ks.bool,preventDropOnDocument:ks.bool,noClick:ks.bool,noKeyboard:ks.bool,noDrag:ks.bool,noDragEventsBubbling:ks.bool,minSize:ks.number,maxSize:ks.number,maxFiles:ks.number,disabled:ks.bool,getFilesFromEvent:ks.func,onFileDialogCancel:ks.func,onFileDialogOpen:ks.func,useFsAccessApi:ks.bool,autoFocus:ks.bool,onDragEnter:ks.func,onDragLeave:ks.func,onDragOver:ks.func,onDrop:ks.func,onDropAccepted:ks.func,onDropRejected:ks.func,onError:ks.func,validator:ks.func};var d1={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function cv(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Js(Js({},oI),t),r=s.accept,n=s.disabled,a=s.getFilesFromEvent,i=s.maxSize,l=s.minSize,o=s.multiple,c=s.maxFiles,d=s.onDragEnter,u=s.onDragLeave,m=s.onDragOver,h=s.onDrop,p=s.onDropAccepted,b=s.onDropRejected,j=s.onFileDialogCancel,x=s.onFileDialogOpen,f=s.useFsAccessApi,g=s.autoFocus,v=s.preventDropOnDocument,w=s.noClick,k=s.noKeyboard,T=s.noDrag,S=s.noDragEventsBubbling,C=s.onError,E=s.validator,M=y.useMemo(function(){return WG(r)},[r]),D=y.useMemo(function(){return HG(r)},[r]),A=y.useMemo(function(){return typeof x=="function"?x:J4},[x]),I=y.useMemo(function(){return typeof j=="function"?j:J4},[j]),L=y.useRef(null),F=y.useRef(null),B=y.useReducer(lK,d1),R=fj(B,2),$=R[0],U=R[1],W=$.isFocused,q=$.isFileDialogActive,_=y.useRef(typeof window<"u"&&window.isSecureContext&&f&&qG()),V=function(){!_.current&&q&&setTimeout(function(){if(F.current){var We=F.current.files;We.length||(U({type:"closeDialog"}),I())}},300)};y.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[F,q,I,_]);var Q=y.useRef([]),G=function(We){L.current&&L.current.contains(We.target)||(We.preventDefault(),Q.current=[])};y.useEffect(function(){return v&&(document.addEventListener("dragover",Q4,!1),document.addEventListener("drop",G,!1)),function(){v&&(document.removeEventListener("dragover",Q4),document.removeEventListener("drop",G))}},[L,v]),y.useEffect(function(){return!n&&g&&L.current&&L.current.focus(),function(){}},[L,g,n]);var Y=y.useCallback(function(Le){C?C(Le):console.error(Le)},[C]),ne=y.useCallback(function(Le){Le.preventDefault(),Le.persist(),qe(Le),Q.current=[].concat(XG(Q.current),[Le.target]),Rf(Le)&&Promise.resolve(a(Le)).then(function(We){if(!(eg(Le)&&!S)){var ut=We.length,gt=ut>0&&BG({files:We,accept:M,minSize:l,maxSize:i,multiple:o,maxFiles:c,validator:E}),Et=ut>0&&!gt;U({isDragAccept:gt,isDragReject:Et,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Le)}}).catch(function(We){return Y(We)})},[a,d,Y,S,M,l,i,o,c,E]),le=y.useCallback(function(Le){Le.preventDefault(),Le.persist(),qe(Le);var We=Rf(Le);if(We&&Le.dataTransfer)try{Le.dataTransfer.dropEffect="copy"}catch{}return We&&m&&m(Le),!1},[m,S]),oe=y.useCallback(function(Le){Le.preventDefault(),Le.persist(),qe(Le);var We=Q.current.filter(function(gt){return L.current&&L.current.contains(gt)}),ut=We.indexOf(Le.target);ut!==-1&&We.splice(ut,1),Q.current=We,!(We.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Rf(Le)&&u&&u(Le))},[L,u,S]),pe=y.useCallback(function(Le,We){var ut=[],gt=[];Le.forEach(function(Et){var Nt=rI(Et,M),Lt=fj(Nt,2),dt=Lt[0],hs=Lt[1],Kt=nI(Et,l,i),Lr=fj(Kt,2),ps=Lr[0],Ps=Lr[1],Ln=E?E(Et):null;if(dt&&ps&&!Ln)ut.push(Et);else{var ns=[hs,Ps];Ln&&(ns=ns.concat(Ln)),gt.push({file:Et,errors:ns.filter(function(rl){return rl})})}}),(!o&&ut.length>1||o&&c>=1&&ut.length>c)&&(ut.forEach(function(Et){gt.push({file:Et,errors:[$G]})}),ut.splice(0)),U({acceptedFiles:ut,fileRejections:gt,isDragReject:gt.length>0,type:"setFiles"}),h&&h(ut,gt,We),gt.length>0&&b&&b(gt,We),ut.length>0&&p&&p(ut,We)},[U,o,M,l,i,c,h,p,b,E]),je=y.useCallback(function(Le){Le.preventDefault(),Le.persist(),qe(Le),Q.current=[],Rf(Le)&&Promise.resolve(a(Le)).then(function(We){eg(Le)&&!S||pe(We,Le)}).catch(function(We){return Y(We)}),U({type:"reset"})},[a,pe,Y,S]),we=y.useCallback(function(){if(_.current){U({type:"openDialog"}),A();var Le={multiple:o,types:D};window.showOpenFilePicker(Le).then(function(We){return a(We)}).then(function(We){pe(We,null),U({type:"closeDialog"})}).catch(function(We){GG(We)?(I(We),U({type:"closeDialog"})):KG(We)?(_.current=!1,F.current?(F.current.value=null,F.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Y(We)});return}F.current&&(U({type:"openDialog"}),A(),F.current.value=null,F.current.click())},[U,A,I,f,pe,Y,D,o]),Re=y.useCallback(function(Le){!L.current||!L.current.isEqualNode(Le.target)||(Le.key===" "||Le.key==="Enter"||Le.keyCode===32||Le.keyCode===13)&&(Le.preventDefault(),we())},[L,we]),ye=y.useCallback(function(){U({type:"focus"})},[]),Se=y.useCallback(function(){U({type:"blur"})},[]),he=y.useCallback(function(){w||(UG()?setTimeout(we,0):we())},[w,we]),ke=function(We){return n?null:We},xe=function(We){return k?null:ke(We)},Pe=function(We){return T?null:ke(We)},qe=function(We){S&&We.stopPropagation()},lt=y.useMemo(function(){return function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},We=Le.refKey,ut=We===void 0?"ref":We,gt=Le.role,Et=Le.onKeyDown,Nt=Le.onFocus,Lt=Le.onBlur,dt=Le.onClick,hs=Le.onDragEnter,Kt=Le.onDragOver,Lr=Le.onDragLeave,ps=Le.onDrop,Ps=tg(Le,ZG);return Js(Js(c1({onKeyDown:xe(Mi(Et,Re)),onFocus:xe(Mi(Nt,ye)),onBlur:xe(Mi(Lt,Se)),onClick:ke(Mi(dt,he)),onDragEnter:Pe(Mi(hs,ne)),onDragOver:Pe(Mi(Kt,le)),onDragLeave:Pe(Mi(Lr,oe)),onDrop:Pe(Mi(ps,je)),role:typeof gt=="string"&&gt!==""?gt:"presentation"},ut,L),!n&&!k?{tabIndex:0}:{}),Ps)}},[L,Re,ye,Se,he,ne,le,oe,je,k,T,n]),at=y.useCallback(function(Le){Le.stopPropagation()},[]),He=y.useMemo(function(){return function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},We=Le.refKey,ut=We===void 0?"ref":We,gt=Le.onChange,Et=Le.onClick,Nt=tg(Le,JG),Lt=c1({accept:M,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ke(Mi(gt,je)),onClick:ke(Mi(Et,at)),tabIndex:-1},ut,F);return Js(Js({},Lt),Nt)}},[F,r,o,je,n]);return Js(Js({},$),{},{isFocused:W&&!n,getRootProps:lt,getInputProps:He,rootRef:L,inputRef:F,open:ke(we)})}function lK(t,s){switch(s.type){case"focus":return Js(Js({},t),{},{isFocused:!0});case"blur":return Js(Js({},t),{},{isFocused:!1});case"openDialog":return Js(Js({},d1),{},{isFileDialogActive:!0});case"closeDialog":return Js(Js({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Js(Js({},t),{},{isDragActive:s.isDragActive,isDragAccept:s.isDragAccept,isDragReject:s.isDragReject});case"setFiles":return Js(Js({},t),{},{acceptedFiles:s.acceptedFiles,fileRejections:s.fileRejections,isDragReject:s.isDragReject});case"reset":return Js({},d1);default:return t}}function J4(){}function cI({delivery:t,vehicles:s,customers:r,onSave:n,onCancel:a}){var A,I,L,F,B,R,$,U,W,q,_,V,Q;const{toast:i}=xt(),[l,o]=y.useState(!1),[c,d]=y.useState((t==null?void 0:t.type)||bl.deliveryTypes[0]),[u,m]=y.useState((t==null?void 0:t.status)||bl.deliveryStatuses[0]),[h,p]=y.useState(t!=null&&t.scheduledDate?new Date(t.scheduledDate).toISOString().split("T")[0]:""),[b,j]=y.useState(!1),[x,f]=y.useState({customerId:"",vehicleId:"",status:Wt.SCHEDULED,scheduledDate:new Date,address:{street:"",city:"",state:"",zipCode:"",country:"USA"},driver:"",notes:"",customFields:{contactPhone:"",contactEmail:"",sendSMSUpdates:!0,sendEmailUpdates:!0,estimatedArrival:"",departureTime:"",departureNotes:"",deliveryNotes:"",deliveryPhotos:[]}}),[g,v]=y.useState((t==null?void 0:t.notes)||""),[w,k]=y.useState(()=>{const G={};return bl.checklistItems.forEach(Y=>{G[Y]=!1}),{...G,...t==null?void 0:t.checklist}});y.useEffect(()=>{var G,Y,ne,le,oe,pe,je,we,Re;t&&f({...t,customFields:{...t.customFields,contactPhone:((G=t.customFields)==null?void 0:G.contactPhone)||"",contactEmail:((Y=t.customFields)==null?void 0:Y.contactEmail)||"",sendSMSUpdates:((ne=t.customFields)==null?void 0:ne.sendSMSUpdates)!==!1,sendEmailUpdates:((le=t.customFields)==null?void 0:le.sendEmailUpdates)!==!1,estimatedArrival:((oe=t.customFields)==null?void 0:oe.estimatedArrival)||"",departureTime:((pe=t.customFields)==null?void 0:pe.departureTime)||"",departureNotes:((je=t.customFields)==null?void 0:je.departureNotes)||"",deliveryNotes:((we=t.customFields)==null?void 0:we.deliveryNotes)||"",deliveryPhotos:((Re=t.customFields)==null?void 0:Re.deliveryPhotos)||[]}})},[t]);const{getRootProps:T,getInputProps:S}=cv({accept:{"image/*":[]},onDrop:G=>{const Y=G.map(ne=>URL.createObjectURL(ne));f(ne=>{var le;return{...ne,customFields:{...ne.customFields,deliveryPhotos:[...((le=ne.customFields)==null?void 0:le.deliveryPhotos)||[],...Y]}}}),i({title:"Photos Added",description:`Added ${G.length} delivery photos`})}}),C=G=>{G==="__add_new_customer__"?j(!0):f(Y=>({...Y,customerId:G}))},E=G=>{f(Y=>({...Y,customerId:G.id})),j(!1),i({title:"Customer Added",description:`${G.firstName} ${G.lastName} has been added as a customer.`})},M=async G=>{var Y,ne,le,oe;if(G.preventDefault(),!x.customerId||!x.vehicleId||!x.scheduledDate){i({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!((Y=x.address)!=null&&Y.street)||!((ne=x.address)!=null&&ne.city)||!((le=x.address)!=null&&le.state)||!((oe=x.address)!=null&&oe.zipCode)){i({title:"Validation Error",description:"Please provide a complete delivery address",variant:"destructive"});return}o(!0);try{await n(x),i({title:"Success",description:`Delivery ${t?"updated":"scheduled"} successfully`})}catch{i({title:"Error",description:`Failed to ${t?"update":"schedule"} delivery`,variant:"destructive"})}finally{o(!1)}},D=G=>{f(Y=>{var ne,le;return{...Y,customFields:{...Y.customFields,deliveryPhotos:((le=(ne=Y.customFields)==null?void 0:ne.deliveryPhotos)==null?void 0:le.filter(oe=>oe!==G))||[]}}})};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[b&&e.jsx(Vu,{onClose:()=>j(!1),onSuccess:E}),e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Delivery":"Schedule Delivery"}),e.jsx(Ee,{children:t?"Update delivery details":"Schedule a new delivery"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),e.jsxs(Be,{value:x.customerId,onValueChange:C,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select customer"})}),e.jsxs($e,{className:"z-50",children:[e.jsx("div",{className:"px-2 py-1.5",children:e.jsxs(H,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>C("__add_new_customer__"),children:[e.jsx(tt,{className:"h-3.5 w-3.5 mr-2"}),"Add New Customer"]})}),e.jsx("div",{className:"px-2 py-1 border-t"}),r.map(G=>e.jsx(J,{value:G.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:[G.firstName," ",G.lastName]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:G.phone})]})},G.id)),r.length===0&&e.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:"No customers found"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicleId",children:"Vehicle *"}),e.jsxs(Be,{value:x.vehicleId,onValueChange:G=>f(Y=>({...Y,vehicleId:G})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select vehicle"})}),e.jsx($e,{className:"z-50",children:s.map(G=>e.jsxs(J,{value:G.id,children:[G.year," ",G.make," ",G.model]},G.id))})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"scheduledDate",children:"Scheduled Date *"}),e.jsx(ge,{id:"scheduledDate",type:"date",value:x.scheduledDate?new Date(x.scheduledDate).toISOString().split("T")[0]:"",onChange:G=>f(Y=>({...Y,scheduledDate:G.target.value?new Date(G.target.value):new Date}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"estimatedArrival",children:"Estimated Arrival Time"}),e.jsx(ge,{id:"estimatedArrival",type:"time",value:((A=x.customFields)==null?void 0:A.estimatedArrival)||"",onChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,estimatedArrival:G.target.value}}))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"deliveryType",children:"Delivery Type"}),e.jsxs(Be,{value:c,onValueChange:d,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select delivery type"})}),e.jsx($e,{children:bl.deliveryTypes.map(G=>e.jsx(J,{value:G,children:G},G))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:u,onValueChange:m,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select status"})}),e.jsx($e,{children:bl.deliveryStatuses.map(G=>e.jsx(J,{value:G,children:G},G))})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"driver",children:"Driver"}),e.jsx(ge,{id:"driver",value:x.driver||"",onChange:G=>f(Y=>({...Y,driver:G.target.value})),placeholder:"Driver name"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Address"}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"street",children:"Street Address *"}),e.jsx(ge,{id:"street",value:((I=x.address)==null?void 0:I.street)||"",onChange:G=>f(Y=>({...Y,address:{...Y.address,street:G.target.value}})),placeholder:"123 Main St"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"city",children:"City *"}),e.jsx(ge,{id:"city",value:((L=x.address)==null?void 0:L.city)||"",onChange:G=>f(Y=>({...Y,address:{...Y.address,city:G.target.value}})),placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"state",children:"State *"}),e.jsx(ge,{id:"state",value:((F=x.address)==null?void 0:F.state)||"",onChange:G=>f(Y=>({...Y,address:{...Y.address,state:G.target.value}})),placeholder:"State"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"zipCode",children:"Zip Code *"}),e.jsx(ge,{id:"zipCode",value:((B=x.address)==null?void 0:B.zipCode)||"",onChange:G=>f(Y=>({...Y,address:{...Y.address,zipCode:G.target.value}})),placeholder:"Zip Code"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"country",children:"Country"}),e.jsx(ge,{id:"country",value:((R=x.address)==null?void 0:R.country)||"USA",onChange:G=>f(Y=>({...Y,address:{...Y.address,country:G.target.value}})),placeholder:"Country"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Contact Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"contactPhone",children:"Contact Phone"}),e.jsx(ge,{id:"contactPhone",value:(($=x.customFields)==null?void 0:$.contactPhone)||"",onChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,contactPhone:G.target.value}})),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"contactEmail",children:"Contact Email"}),e.jsx(ge,{id:"contactEmail",type:"email",value:((U=x.customFields)==null?void 0:U.contactEmail)||"",onChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,contactEmail:G.target.value}})),placeholder:"customer@example.com"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"sendSMSUpdates",checked:((W=x.customFields)==null?void 0:W.sendSMSUpdates)!==!1,onCheckedChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,sendSMSUpdates:!!G}}))}),e.jsx(Z,{htmlFor:"sendSMSUpdates",children:"Send SMS updates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"sendEmailUpdates",checked:((q=x.customFields)==null?void 0:q.sendEmailUpdates)!==!1,onCheckedChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,sendEmailUpdates:!!G}}))}),e.jsx(Z,{htmlFor:"sendEmailUpdates",children:"Send email updates"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),(x.status===Wt.IN_TRANSIT||x.status===Wt.DELIVERED)&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"departureTime",children:"Departure Time"}),e.jsx(ge,{id:"departureTime",type:"datetime-local",value:((_=x.customFields)==null?void 0:_.departureTime)||"",onChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,departureTime:G.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"departureNotes",children:"Departure Notes"}),e.jsx(ge,{id:"departureNotes",value:((V=x.customFields)==null?void 0:V.departureNotes)||"",onChange:G=>f(Y=>({...Y,customFields:{...Y.customFields,departureNotes:G.target.value}})),placeholder:"Notes about departure"})]})]}),x.status===Wt.DELIVERED&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"deliveredDate",children:"Delivery Date"}),e.jsx(ge,{id:"deliveredDate",type:"datetime-local",value:x.deliveredDate?new Date(x.deliveredDate).toISOString().slice(0,16):"",onChange:G=>f(Y=>({...Y,deliveredDate:G.target.value?new Date(G.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Delivery Notes"}),e.jsx(kt,{id:"notes",value:x.notes||"",onChange:G=>f(Y=>({...Y,notes:G.target.value})),placeholder:"Add any notes about this delivery",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Delivery Checklist"}),e.jsx("div",{className:"space-y-2 mt-2",children:bl.checklistItems.map(G=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{checked:w[G]||!1,onCheckedChange:Y=>k(ne=>({...ne,[G]:!!Y}))}),e.jsx(Z,{className:"text-sm",children:G})]},G))})]})]}),(x.status===Wt.DELIVERED||x.status===Wt.IN_TRANSIT)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),e.jsxs("div",{...T(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[e.jsx("input",{...S()}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Camera,{className:"h-8 w-8 mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop photos here, or click to select files"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Upload photos for delivery verification"})]})]}),((Q=x.customFields)==null?void 0:Q.deliveryPhotos)&&x.customFields.deliveryPhotos.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:x.customFields.deliveryPhotos.map((G,Y)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:G,alt:`Delivery photo ${Y+1}`,className:"h-24 w-full object-cover rounded-md"}),e.jsx(H,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>D(G),children:e.jsx(St,{className:"h-3 w-3"})})]},Y))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Scheduling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Schedule"," Delivery"]})})]})]})})]})]})}function oK({delivery:t,onAddMilestone:s}){const n=(()=>{try{const a=[],i=t.customFields||{},l=c=>c?new Date(c):new Date;return a.push({id:"scheduled",title:"Delivery Scheduled",description:`Scheduled for ${nt(t.scheduledDate)}`,date:l(t.createdAt),icon:Zt}),[Wt.IN_TRANSIT,Wt.DELIVERED].includes(t.status)&&(a.push({id:"preparation",title:"Preparation Complete",description:"Vehicle prepared and ready for delivery",date:new Date(new Date(t.scheduledDate).getTime()-864e5),icon:_t}),a.push({id:"in_transit",title:"In Transit",description:i.departureNotes||"Vehicle has left the dealership",date:l(i.departureTime),icon:Hn})),i.etaUpdated&&i.estimatedArrival&&a.push({id:"eta_update",title:"ETA Updated",description:`New estimated arrival: ${i.estimatedArrival}`,date:l(i.etaUpdated),icon:zt}),i.customerNotified&&a.push({id:"customer_notified",title:"Customer Notified",description:`${i.notificationMethod||"SMS"} notification sent to customer`,date:l(i.customerNotified),icon:sr}),t.status===Wt.DELIVERED&&(a.push({id:"arrived",title:"Arrived at Destination",description:"Vehicle arrived at delivery location",date:l(t.deliveredDate),icon:ur}),a.push({id:"delivered",title:"Delivery Confirmed",description:i.deliveryNotes||"Delivery completed successfully",date:l(t.deliveredDate),icon:_t}),Array.isArray(i.deliveryPhotos)&&i.deliveryPhotos.length>0&&a.push({id:"photos",title:"Delivery Photos",description:`${i.deliveryPhotos.length} photo(s) captured`,date:l(t.deliveredDate),icon:Ui})),Array.from(new Map(a.map(c=>[c.id,c])).values()).sort((c,d)=>c.date.getTime()-d.date.getTime())}catch(a){return console.error("Failed to generate milestones:",a),[]}})();return e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Hn,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Timeline"]}),e.jsx(Ee,{children:"Track the progress of this delivery"})]}),e.jsx(te,{children:e.jsxs("div",{className:"relative pl-8 space-y-8",children:[e.jsx("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-border"}),n.map((a,i)=>{var o;const l=a.icon;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:Ge("absolute left-[-21px] w-6 h-6 rounded-full flex items-center justify-center","bg-primary text-primary-foreground"),children:e.jsx(l,{className:"h-3 w-3"})}),e.jsxs("div",{className:"mb-1 flex items-center",children:[e.jsx("h3",{className:"text-base font-semibold",children:a.title}),e.jsx(Ae,{className:"ml-2 text-xs",variant:"outline",children:nt(a.date)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),a.id==="photos"&&((o=t.customFields)==null?void 0:o.deliveryPhotos)&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.customFields.deliveryPhotos.map((c,d)=>e.jsx("img",{src:c,alt:`Delivery photo ${d+1}`,className:"h-20 w-full object-cover rounded-md"},d))})]},a.id)})]})})]})}var yn=Uint8Array,pa=Uint16Array,Ob=Int32Array,dv=new yn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uv=new yn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u1=new yn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dI=function(t,s){for(var r=new pa(31),n=0;n<31;++n)r[n]=s+=1<<t[n-1];for(var a=new Ob(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},uI=dI(dv,2),mI=uI.b,m1=uI.r;mI[28]=258,m1[258]=28;var hI=dI(uv,0),cK=hI.b,X4=hI.r,h1=new pa(32768);for(var Ws=0;Ws<32768;++Ws){var so=(Ws&43690)>>1|(Ws&21845)<<1;so=(so&52428)>>2|(so&13107)<<2,so=(so&61680)>>4|(so&3855)<<4,h1[Ws]=((so&65280)>>8|(so&255)<<8)>>1}var Yi=function(t,s,r){for(var n=t.length,a=0,i=new pa(s);a<n;++a)t[a]&&++i[t[a]-1];var l=new pa(s);for(a=1;a<s;++a)l[a]=l[a-1]+i[a-1]<<1;var o;if(r){o=new pa(1<<s);var c=15-s;for(a=0;a<n;++a)if(t[a])for(var d=a<<4|t[a],u=s-t[a],m=l[t[a]-1]++<<u,h=m|(1<<u)-1;m<=h;++m)o[h1[m]>>c]=d}else for(o=new pa(n),a=0;a<n;++a)t[a]&&(o[a]=h1[l[t[a]-1]++]>>15-t[a]);return o},Uo=new yn(288);for(var Ws=0;Ws<144;++Ws)Uo[Ws]=8;for(var Ws=144;Ws<256;++Ws)Uo[Ws]=9;for(var Ws=256;Ws<280;++Ws)Uo[Ws]=7;for(var Ws=280;Ws<288;++Ws)Uo[Ws]=8;var Vh=new yn(32);for(var Ws=0;Ws<32;++Ws)Vh[Ws]=5;var dK=Yi(Uo,9,0),uK=Yi(Uo,9,1),mK=Yi(Vh,5,0),hK=Yi(Vh,5,1),xj=function(t){for(var s=t[0],r=1;r<t.length;++r)t[r]>s&&(s=t[r]);return s},li=function(t,s,r){var n=s/8|0;return(t[n]|t[n+1]<<8)>>(s&7)&r},gj=function(t,s){var r=s/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(s&7)},$b=function(t){return(t+7)/8|0},pI=function(t,s,r){return(r==null||r>t.length)&&(r=t.length),new yn(t.subarray(s,r))},pK=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ui=function(t,s,r){var n=new Error(s||pK[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ui),!r)throw n;return n},fK=function(t,s,r,n){var a=t.length,i=0;if(!a||s.f&&!s.l)return r||new yn(0);var l=!r,o=l||s.i!=2,c=s.i;l&&(r=new yn(a*3));var d=function(je){var we=r.length;if(je>we){var Re=new yn(Math.max(we*2,je));Re.set(r),r=Re}},u=s.f||0,m=s.p||0,h=s.b||0,p=s.l,b=s.d,j=s.m,x=s.n,f=a*8;do{if(!p){u=li(t,m,1);var g=li(t,m+1,3);if(m+=3,g)if(g==1)p=uK,b=hK,j=9,x=5;else if(g==2){var T=li(t,m,31)+257,S=li(t,m+10,15)+4,C=T+li(t,m+5,31)+1;m+=14;for(var E=new yn(C),M=new yn(19),D=0;D<S;++D)M[u1[D]]=li(t,m+D*3,7);m+=S*3;for(var A=xj(M),I=(1<<A)-1,L=Yi(M,A,1),D=0;D<C;){var F=L[li(t,m,I)];m+=F&15;var v=F>>4;if(v<16)E[D++]=v;else{var B=0,R=0;for(v==16?(R=3+li(t,m,3),m+=2,B=E[D-1]):v==17?(R=3+li(t,m,7),m+=3):v==18&&(R=11+li(t,m,127),m+=7);R--;)E[D++]=B}}var $=E.subarray(0,T),U=E.subarray(T);j=xj($),x=xj(U),p=Yi($,j,1),b=Yi(U,x,1)}else ui(1);else{var v=$b(m)+4,w=t[v-4]|t[v-3]<<8,k=v+w;if(k>a){c&&ui(0);break}o&&d(h+w),r.set(t.subarray(v,k),h),s.b=h+=w,s.p=m=k*8,s.f=u;continue}if(m>f){c&&ui(0);break}}o&&d(h+131072);for(var W=(1<<j)-1,q=(1<<x)-1,_=m;;_=m){var B=p[gj(t,m)&W],V=B>>4;if(m+=B&15,m>f){c&&ui(0);break}if(B||ui(2),V<256)r[h++]=V;else if(V==256){_=m,p=null;break}else{var Q=V-254;if(V>264){var D=V-257,G=dv[D];Q=li(t,m,(1<<G)-1)+mI[D],m+=G}var Y=b[gj(t,m)&q],ne=Y>>4;Y||ui(3),m+=Y&15;var U=cK[ne];if(ne>3){var G=uv[ne];U+=gj(t,m)&(1<<G)-1,m+=G}if(m>f){c&&ui(0);break}o&&d(h+131072);var le=h+Q;if(h<U){var oe=i-U,pe=Math.min(U,le);for(oe+h<0&&ui(3);h<pe;++h)r[h]=n[oe+h]}for(;h<le;++h)r[h]=r[h-U]}}s.l=p,s.p=_,s.b=h,s.f=u,p&&(u=1,s.m=j,s.d=b,s.n=x)}while(!u);return h!=r.length&&l?pI(r,0,h):r.subarray(0,h)},xl=function(t,s,r){r<<=s&7;var n=s/8|0;t[n]|=r,t[n+1]|=r>>8},Om=function(t,s,r){r<<=s&7;var n=s/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},vj=function(t,s){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,i=r.slice();if(!a)return{t:xI,l:0};if(a==1){var l=new yn(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(k,T){return k.f-T.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,u=1,m=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=a-1;)o=r[r[d].f<r[m].f?d++:m++],c=r[d!=u&&r[d].f<r[m].f?d++:m++],r[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=i[0].s,n=1;n<a;++n)i[n].s>h&&(h=i[n].s);var p=new pa(h+1),b=p1(r[u-1],p,0);if(b>s){var n=0,j=0,x=b-s,f=1<<x;for(i.sort(function(T,S){return p[S.s]-p[T.s]||T.f-S.f});n<a;++n){var g=i[n].s;if(p[g]>s)j+=f-(1<<b-p[g]),p[g]=s;else break}for(j>>=x;j>0;){var v=i[n].s;p[v]<s?j-=1<<s-p[v]++-1:++n}for(;n>=0&&j;--n){var w=i[n].s;p[w]==s&&(--p[w],++j)}b=s}return{t:new yn(p),l:b}},p1=function(t,s,r){return t.s==-1?Math.max(p1(t.l,s,r+1),p1(t.r,s,r+1)):s[t.s]=r},eS=function(t){for(var s=t.length;s&&!t[--s];);for(var r=new pa(++s),n=0,a=t[0],i=1,l=function(c){r[n++]=c},o=1;o<=s;++o)if(t[o]==a&&o!=s)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=t[o]}return{c:r.subarray(0,n),n:s}},$m=function(t,s){for(var r=0,n=0;n<s.length;++n)r+=t[n]*s[n];return r},fI=function(t,s,r){var n=r.length,a=$b(s+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=r[i];return(a+4+n)*8},tS=function(t,s,r,n,a,i,l,o,c,d,u){xl(s,u++,r),++a[256];for(var m=vj(a,15),h=m.t,p=m.l,b=vj(i,15),j=b.t,x=b.l,f=eS(h),g=f.c,v=f.n,w=eS(j),k=w.c,T=w.n,S=new pa(19),C=0;C<g.length;++C)++S[g[C]&31];for(var C=0;C<k.length;++C)++S[k[C]&31];for(var E=vj(S,7),M=E.t,D=E.l,A=19;A>4&&!M[u1[A-1]];--A);var I=d+5<<3,L=$m(a,Uo)+$m(i,Vh)+l,F=$m(a,h)+$m(i,j)+l+14+3*A+$m(S,M)+2*S[16]+3*S[17]+7*S[18];if(c>=0&&I<=L&&I<=F)return fI(s,u,t.subarray(c,c+d));var B,R,$,U;if(xl(s,u,1+(F<L)),u+=2,F<L){B=Yi(h,p,0),R=h,$=Yi(j,x,0),U=j;var W=Yi(M,D,0);xl(s,u,v-257),xl(s,u+5,T-1),xl(s,u+10,A-4),u+=14;for(var C=0;C<A;++C)xl(s,u+3*C,M[u1[C]]);u+=3*A;for(var q=[g,k],_=0;_<2;++_)for(var V=q[_],C=0;C<V.length;++C){var Q=V[C]&31;xl(s,u,W[Q]),u+=M[Q],Q>15&&(xl(s,u,V[C]>>5&127),u+=V[C]>>12)}}else B=dK,R=Uo,$=mK,U=Vh;for(var C=0;C<o;++C){var G=n[C];if(G>255){var Q=G>>18&31;Om(s,u,B[Q+257]),u+=R[Q+257],Q>7&&(xl(s,u,G>>23&31),u+=dv[Q]);var Y=G&31;Om(s,u,$[Y]),u+=U[Y],Y>3&&(Om(s,u,G>>5&8191),u+=uv[Y])}else Om(s,u,B[G]),u+=R[G]}return Om(s,u,B[256]),u+R[256]},xK=new Ob([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),xI=new yn(0),gK=function(t,s,r,n,a,i){var l=i.z||t.length,o=new yn(n+l+5*(1+Math.ceil(l/7e3))+a),c=o.subarray(n,o.length-a),d=i.l,u=(i.r||0)&7;if(s){u&&(c[0]=i.r>>3);for(var m=xK[s-1],h=m>>13,p=m&8191,b=(1<<r)-1,j=i.p||new pa(32768),x=i.h||new pa(b+1),f=Math.ceil(r/3),g=2*f,v=function(ye){return(t[ye]^t[ye+1]<<f^t[ye+2]<<g)&b},w=new Ob(25e3),k=new pa(288),T=new pa(32),S=0,C=0,E=i.i||0,M=0,D=i.w||0,A=0;E+2<l;++E){var I=v(E),L=E&32767,F=x[I];if(j[L]=F,x[I]=L,D<=E){var B=l-E;if((S>7e3||M>24576)&&(B>423||!d)){u=tS(t,c,0,w,k,T,C,M,A,E-A,u),M=S=C=0,A=E;for(var R=0;R<286;++R)k[R]=0;for(var R=0;R<30;++R)T[R]=0}var $=2,U=0,W=p,q=L-F&32767;if(B>2&&I==v(E-q))for(var _=Math.min(h,B)-1,V=Math.min(32767,E),Q=Math.min(258,B);q<=V&&--W&&L!=F;){if(t[E+$]==t[E+$-q]){for(var G=0;G<Q&&t[E+G]==t[E+G-q];++G);if(G>$){if($=G,U=q,G>_)break;for(var Y=Math.min(q,G-2),ne=0,R=0;R<Y;++R){var le=E-q+R&32767,oe=j[le],pe=le-oe&32767;pe>ne&&(ne=pe,F=le)}}}L=F,F=j[L],q+=L-F&32767}if(U){w[M++]=268435456|m1[$]<<18|X4[U];var je=m1[$]&31,we=X4[U]&31;C+=dv[je]+uv[we],++k[257+je],++T[we],D=E+$,++S}else w[M++]=t[E],++k[t[E]]}}for(E=Math.max(E,D);E<l;++E)w[M++]=t[E],++k[t[E]];u=tS(t,c,d,w,k,T,C,M,A,E-A,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=x,i.p=j,i.i=E,i.w=D)}else{for(var E=i.w||0;E<l+d;E+=65535){var Re=E+65535;Re>=l&&(c[u/8|0]=d,Re=l),u=fI(c,u+1,t.subarray(E,Re))}i.i=l}return pI(o,0,n+$b(u)+a)},gI=function(){var t=1,s=0;return{p:function(r){for(var n=t,a=s,i=r.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)a+=n+=r[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,s=a},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},vK=function(t,s,r,n,a){if(!a&&(a={l:1},s.dictionary)){var i=s.dictionary.subarray(-32768),l=new yn(i.length+t.length);l.set(i),l.set(t,i.length),t=l,a.w=i.length}return gK(t,s.level==null?6:s.level,s.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,r,n,a)},vI=function(t,s,r){for(;r;++s)t[s]=r,r>>>=8},jK=function(t,s){var r=s.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var a=gI();a.p(s.dictionary),vI(t,2,a.d())}},yK=function(t,s){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ui(6,"invalid zlib data"),(t[1]>>5&1)==1&&ui(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function f1(t,s){s||(s={});var r=gI();r.p(t);var n=vK(t,s,s.dictionary?6:2,4);return jK(n,s),vI(n,n.length-4,r.d()),n}function bK(t,s){return fK(t.subarray(yK(t),-4),{i:2},s,s)}var NK=typeof TextDecoder<"u"&&new TextDecoder,wK=0;try{NK.decode(xI,{stream:!0}),wK=1}catch{}var Rt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function jj(){Rt.console&&typeof Rt.console.log=="function"&&Rt.console.log.apply(Rt.console,arguments)}var Ls={log:jj,warn:function(t){Rt.console&&(typeof Rt.console.warn=="function"?Rt.console.warn.apply(Rt.console,arguments):jj.call(null,arguments))},error:function(t){Rt.console&&(typeof Rt.console.error=="function"?Rt.console.error.apply(Rt.console,arguments):jj(t))}};function yj(t,s,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){xc(n.response,s,r)},n.onerror=function(){Ls.error("could not download file")},n.send()}function sS(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function Mf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var lh,x1,xc=Rt.saveAs||((typeof window>"u"?"undefined":us(window))!=="object"||window!==Rt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,r){var n=Rt.URL||Rt.webkitURL,a=document.createElement("a");s=s||t.name||"download",a.download=s,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?sS(a.href)?yj(t,s,r):Mf(a,a.target="_blank"):Mf(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Mf(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,r){if(s=s||t.name||"download",typeof t=="string")if(sS(t))yj(t,s,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Mf(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:us(i)!=="object"&&(Ls.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),s)}:function(t,s,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return yj(t,s,r);var a=t.type==="application/octet-stream",i=/constructor/i.test(Rt.HTMLElement)||Rt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&i)&&(typeof FileReader>"u"?"undefined":us(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=l?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var c=Rt.URL||Rt.webkitURL,d=c.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jI(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,l=a.exec(t);l&&(s=i(l),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function bj(t,s){var r=t[0],n=t[1],a=t[2],i=t[3];r=mn(r,n,a,i,s[0],7,-680876936),i=mn(i,r,n,a,s[1],12,-389564586),a=mn(a,i,r,n,s[2],17,606105819),n=mn(n,a,i,r,s[3],22,-1044525330),r=mn(r,n,a,i,s[4],7,-176418897),i=mn(i,r,n,a,s[5],12,1200080426),a=mn(a,i,r,n,s[6],17,-1473231341),n=mn(n,a,i,r,s[7],22,-45705983),r=mn(r,n,a,i,s[8],7,1770035416),i=mn(i,r,n,a,s[9],12,-1958414417),a=mn(a,i,r,n,s[10],17,-42063),n=mn(n,a,i,r,s[11],22,-1990404162),r=mn(r,n,a,i,s[12],7,1804603682),i=mn(i,r,n,a,s[13],12,-40341101),a=mn(a,i,r,n,s[14],17,-1502002290),r=hn(r,n=mn(n,a,i,r,s[15],22,1236535329),a,i,s[1],5,-165796510),i=hn(i,r,n,a,s[6],9,-1069501632),a=hn(a,i,r,n,s[11],14,643717713),n=hn(n,a,i,r,s[0],20,-373897302),r=hn(r,n,a,i,s[5],5,-701558691),i=hn(i,r,n,a,s[10],9,38016083),a=hn(a,i,r,n,s[15],14,-660478335),n=hn(n,a,i,r,s[4],20,-405537848),r=hn(r,n,a,i,s[9],5,568446438),i=hn(i,r,n,a,s[14],9,-1019803690),a=hn(a,i,r,n,s[3],14,-187363961),n=hn(n,a,i,r,s[8],20,1163531501),r=hn(r,n,a,i,s[13],5,-1444681467),i=hn(i,r,n,a,s[2],9,-51403784),a=hn(a,i,r,n,s[7],14,1735328473),r=pn(r,n=hn(n,a,i,r,s[12],20,-1926607734),a,i,s[5],4,-378558),i=pn(i,r,n,a,s[8],11,-2022574463),a=pn(a,i,r,n,s[11],16,1839030562),n=pn(n,a,i,r,s[14],23,-35309556),r=pn(r,n,a,i,s[1],4,-1530992060),i=pn(i,r,n,a,s[4],11,1272893353),a=pn(a,i,r,n,s[7],16,-155497632),n=pn(n,a,i,r,s[10],23,-1094730640),r=pn(r,n,a,i,s[13],4,681279174),i=pn(i,r,n,a,s[0],11,-358537222),a=pn(a,i,r,n,s[3],16,-722521979),n=pn(n,a,i,r,s[6],23,76029189),r=pn(r,n,a,i,s[9],4,-640364487),i=pn(i,r,n,a,s[12],11,-421815835),a=pn(a,i,r,n,s[15],16,530742520),r=fn(r,n=pn(n,a,i,r,s[2],23,-995338651),a,i,s[0],6,-198630844),i=fn(i,r,n,a,s[7],10,1126891415),a=fn(a,i,r,n,s[14],15,-1416354905),n=fn(n,a,i,r,s[5],21,-57434055),r=fn(r,n,a,i,s[12],6,1700485571),i=fn(i,r,n,a,s[3],10,-1894986606),a=fn(a,i,r,n,s[10],15,-1051523),n=fn(n,a,i,r,s[1],21,-2054922799),r=fn(r,n,a,i,s[8],6,1873313359),i=fn(i,r,n,a,s[15],10,-30611744),a=fn(a,i,r,n,s[6],15,-1560198380),n=fn(n,a,i,r,s[13],21,1309151649),r=fn(r,n,a,i,s[4],6,-145523070),i=fn(i,r,n,a,s[11],10,-1120210379),a=fn(a,i,r,n,s[2],15,718787259),n=fn(n,a,i,r,s[9],21,-343485551),t[0]=yo(r,t[0]),t[1]=yo(n,t[1]),t[2]=yo(a,t[2]),t[3]=yo(i,t[3])}function mv(t,s,r,n,a,i){return s=yo(yo(s,t),yo(n,i)),yo(s<<a|s>>>32-a,r)}function mn(t,s,r,n,a,i,l){return mv(s&r|~s&n,t,s,a,i,l)}function hn(t,s,r,n,a,i,l){return mv(s&n|r&~n,t,s,a,i,l)}function pn(t,s,r,n,a,i,l){return mv(s^r^n,t,s,a,i,l)}function fn(t,s,r,n,a,i,l){return mv(r^(s|~n),t,s,a,i,l)}function yI(t){var s,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)bj(n,SK(t.substring(s-64,s)));t=t.substring(s-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)a[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(a[s>>2]|=128<<(s%4<<3),s>55)for(bj(n,a),s=0;s<16;s++)a[s]=0;return a[14]=8*r,bj(n,a),n}function SK(t){var s,r=[];for(s=0;s<64;s+=4)r[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return r}lh=Rt.atob.bind(Rt),x1=Rt.btoa.bind(Rt);var rS="0123456789abcdef".split("");function CK(t){for(var s="",r=0;r<4;r++)s+=rS[t>>8*r+4&15]+rS[t>>8*r&15];return s}function AK(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function g1(t){return yI(t).map(AK).join("")}var TK=function(t){for(var s=0;s<t.length;s++)t[s]=CK(t[s]);return t.join("")}(yI("hello"))!="5d41402abc4b2a76b9719d911017c592";function yo(t,s){if(TK){var r=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(r>>16)<<16|65535&r}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function v1(t,s){var r,n,a,i;if(t!==r){for(var l=(a=t,i=1+(256/t.length>>0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+l.charCodeAt(c))%256,o[c]=o[d],o[d]=u}r=t,n=o}else o=n;var m=s.length,h=0,p=0,b="";for(c=0;c<m;c++)p=(p+(u=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=u,l=o[(o[h]+o[p])%256],b+=String.fromCharCode(s.charCodeAt(c)^l);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nS={print:4,modify:8,copy:16,"annot-forms":32};function Ud(t,s,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(o){if(nS.perm!==void 0)throw new Error("Invalid permission: "+o);a+=nS[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(s+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^a)),this.encryptionKey=g1(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=v1(this.encryptionKey,this.padding)}function qd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?s+="#"+("0"+a.toString(16)).slice(-2):s+=t[n]}return s}function aS(t){if(us(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(r)||(s[r]={});var i=Math.random().toString(35);return s[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in s)if(s[n][r])return delete s[n][r],Object.keys(s[n]).length===0&&delete s[n],!0;return!1},this.publish=function(r){if(s.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in s[r]){var l=s[r][i];try{l[0].apply(t,n)}catch(o){Rt.console&&Ls.error("jsPDF PubSub Error",o.message,o)}l[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function Uh(t){if(!(this instanceof Uh))return new Uh(t);var s="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&s.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function bI(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function po(t,s,r,n,a){if(!(this instanceof po))return new po(t,s,r,n,a);this.type=t==="axial"?2:3,this.coords=s,this.colors=r,bI.call(this,n,a)}function bc(t,s,r,n,a){if(!(this instanceof bc))return new bc(t,s,r,n,a);this.boundingBox=t,this.xStep=s,this.yStep=r,this.stream="",this.cloneIndex=0,bI.call(this,n,a)}function Pt(t){var s,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],l=[],o=1,c=16,d="S",u=null;us(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),l=t.filters||(i===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=aS;var b="1.3",j=p.__private__.getPdfVersion=function(){return b};p.__private__.setPdfVersion=function(O){b=O};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var f=p.__private__.getPageFormat=function(O){return x[O]};a=a||"a4";var g={COMPAT:"compat",ADVANCED:"advanced"},v=g.COMPAT;function w(){this.saveGraphicsState(),he(new It(dt,0,0,-dt,0,zl()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),d="n",v=g.ADVANCED}function k(){this.restoreGraphicsState(),d="S",v=g.COMPAT}var T=p.__private__.combineFontStyleAndFontWeight=function(O,re){if(O=="bold"&&re=="normal"||O=="bold"&&re==400||O=="normal"&&re=="italic"||O=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(O=re==400||re==="normal"?O==="italic"?"italic":"normal":re!=700&&re!=="bold"||O!=="normal"?(re==700?"bold":re)+""+O:"bold"),O};p.advancedAPI=function(O){var re=v===g.COMPAT;return re&&w.call(this),typeof O!="function"||(O(this),re&&k.call(this)),this},p.compatAPI=function(O){var re=v===g.ADVANCED;return re&&k.call(this),typeof O!="function"||(O(this),re&&w.call(this)),this},p.isAdvancedAPI=function(){return v===g.ADVANCED};var S,C=function(O){if(v!==g.ADVANCED)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=p.roundToPrecision=p.__private__.roundToPrecision=function(O,re){var ve=s||re;if(isNaN(O)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(ve).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf=typeof c=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return E(O,c)}:c==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return E(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return E(O,16)};var M=p.f2=p.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return E(O,2)},D=p.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return E(O,3)},A=p.scale=p.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return v===g.COMPAT?O*dt:v===g.ADVANCED?O:void 0},I=function(O){return v===g.COMPAT?zl()-O:v===g.ADVANCED?O:void 0},L=function(O){return A(I(O))};p.__private__.setPrecision=p.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(s=parseInt(O,10))};var F,B="00000000000000000000000000000000",R=p.__private__.getFileId=function(){return B},$=p.__private__.setFileId=function(O){return B=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(on=new Ud(u.userPermissions,u.userPassword,u.ownerPassword,B)),B};p.setFileId=function(O){return $(O),this},p.getFileId=function(){return R()};var U=p.__private__.convertDateToPDFDate=function(O){var re=O.getTimezoneOffset(),ve=re<0?"+":"-",be=Math.floor(Math.abs(re/60)),Fe=Math.abs(re%60),Ue=[ve,Q(be),"'",Q(Fe),"'"].join("");return["D:",O.getFullYear(),Q(O.getMonth()+1),Q(O.getDate()),Q(O.getHours()),Q(O.getMinutes()),Q(O.getSeconds()),Ue].join("")},W=p.__private__.convertPDFDateToDate=function(O){var re=parseInt(O.substr(2,4),10),ve=parseInt(O.substr(6,2),10)-1,be=parseInt(O.substr(8,2),10),Fe=parseInt(O.substr(10,2),10),Ue=parseInt(O.substr(12,2),10),et=parseInt(O.substr(14,2),10);return new Date(re,ve,be,Fe,Ue,et,0)},q=p.__private__.setCreationDate=function(O){var re;if(O===void 0&&(O=new Date),O instanceof Date)re=U(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=O}return F=re},_=p.__private__.getCreationDate=function(O){var re=F;return O==="jsDate"&&(re=W(F)),re};p.setCreationDate=function(O){return q(O),this},p.getCreationDate=function(O){return _(O)};var V,Q=p.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},G=p.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},Y=0,ne=[],le=[],oe=0,pe=[],je=[],we=!1,Re=le,ye=function(){Y=0,oe=0,le=[],ne=[],pe=[],al=Cr(),Za=Cr()};p.__private__.setCustomOutputDestination=function(O){we=!0,Re=O};var Se=function(O){we||(Re=O)};p.__private__.resetCustomOutputDestination=function(){we=!1,Re=le};var he=p.__private__.out=function(O){return O=O.toString(),oe+=O.length+1,Re.push(O),Re},ke=p.__private__.write=function(O){return he(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},xe=p.__private__.getArrayBuffer=function(O){for(var re=O.length,ve=new ArrayBuffer(re),be=new Uint8Array(ve);re--;)be[re]=O.charCodeAt(re);return ve},Pe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Pe};var qe=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(O){return qe=v===g.ADVANCED?O/dt:O,this};var lt,at=p.__private__.getFontSize=p.getFontSize=function(){return v===g.COMPAT?qe:qe*dt},He=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(O){return He=O,this},p.__private__.getR2L=p.getR2L=function(){return He};var Le,We=p.__private__.setZoomMode=function(O){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))lt=O;else if(isNaN(O)){if(re.indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');lt=O}else lt=parseInt(O,10)};p.__private__.getZoomMode=function(){return lt};var ut,gt=p.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');Le=O};p.__private__.getPageMode=function(){return Le};var Et=p.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');ut=O};p.__private__.getLayoutMode=function(){return ut},p.__private__.setDisplayMode=p.setDisplayMode=function(O,re,ve){return We(O),Et(re),gt(ve),this};var Nt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(O){if(Object.keys(Nt).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Nt[O]},p.__private__.getDocumentProperties=function(){return Nt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(O){for(var re in Nt)Nt.hasOwnProperty(re)&&O[re]&&(Nt[re]=O[re]);return this},p.__private__.setDocumentProperty=function(O,re){if(Object.keys(Nt).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Nt[O]=re};var Lt,dt,hs,Kt,Lr,ps={},Ps={},Ln=[],ns={},rl={},ar={},Ya={},nl=null,ir=0,Vt=[],bs=new aS(p),Xo=t.hotfixes||[],Yr={},Ai={},Ti=[],It=function O(re,ve,be,Fe,Ue,et){if(!(this instanceof O))return new O(re,ve,be,Fe,Ue,et);isNaN(re)&&(re=1),isNaN(ve)&&(ve=0),isNaN(be)&&(be=0),isNaN(Fe)&&(Fe=1),isNaN(Ue)&&(Ue=0),isNaN(et)&&(et=0),this._matrix=[re,ve,be,Fe,Ue,et]};Object.defineProperty(It.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(It.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(It.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(It.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(It.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(It.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(It.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(It.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(It.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(It.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(It.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(It.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(It.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(It.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(It.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(It.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),It.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(O)},It.prototype.multiply=function(O){var re=O.sx*this.sx+O.shy*this.shx,ve=O.sx*this.shy+O.shy*this.sy,be=O.shx*this.sx+O.sy*this.shx,Fe=O.shx*this.shy+O.sy*this.sy,Ue=O.tx*this.sx+O.ty*this.shx+this.tx,et=O.tx*this.shy+O.ty*this.sy+this.ty;return new It(re,ve,be,Fe,Ue,et)},It.prototype.decompose=function(){var O=this.sx,re=this.shy,ve=this.shx,be=this.sy,Fe=this.tx,Ue=this.ty,et=Math.sqrt(O*O+re*re),pt=(O/=et)*ve+(re/=et)*be;ve-=O*pt,be-=re*pt;var Tt=Math.sqrt(ve*ve+be*be);return pt/=Tt,O*(be/=Tt)<re*(ve/=Tt)&&(O=-O,re=-re,pt=-pt,et=-et),{scale:new It(et,0,0,Tt,0,0),translate:new It(1,0,0,1,Fe,Ue),rotate:new It(O,re,-re,O,0,0),skew:new It(1,0,pt,1,0,0)}},It.prototype.toString=function(O){return this.join(" ")},It.prototype.inversed=function(){var O=this.sx,re=this.shy,ve=this.shx,be=this.sy,Fe=this.tx,Ue=this.ty,et=1/(O*be-re*ve),pt=be*et,Tt=-re*et,Ht=-ve*et,Ut=O*et;return new It(pt,Tt,Ht,Ut,-pt*Fe-Ht*Ue,-Tt*Fe-Ut*Ue)},It.prototype.applyToPoint=function(O){var re=O.x*this.sx+O.y*this.shx+this.tx,ve=O.x*this.shy+O.y*this.sy+this.ty;return new fd(re,ve)},It.prototype.applyToRectangle=function(O){var re=this.applyToPoint(O),ve=this.applyToPoint(new fd(O.x+O.w,O.y+O.h));return new sm(re.x,re.y,ve.x-re.x,ve.y-re.y)},It.prototype.clone=function(){var O=this.sx,re=this.shy,ve=this.shx,be=this.sy,Fe=this.tx,Ue=this.ty;return new It(O,re,ve,be,Fe,Ue)},p.Matrix=It;var Qa=p.matrixMult=function(O,re){return re.multiply(O)},Ei=new It(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ei;var Fn=function(O,re){if(!rl[O]){var ve=(re instanceof po?"Sh":"P")+(Object.keys(ns).length+1).toString(10);re.id=ve,rl[O]=ve,ns[ve]=re,bs.publish("addPattern",re)}};p.ShadingPattern=po,p.TilingPattern=bc,p.addShadingPattern=function(O,re){return C("addShadingPattern()"),Fn(O,re),this},p.beginTilingPattern=function(O){C("beginTilingPattern()"),Dp(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},p.endTilingPattern=function(O,re){C("endTilingPattern()"),re.stream=je[V].join(`
`),Fn(O,re),bs.publish("endTilingPattern",re),Ti.pop().restore()};var Fr=p.__private__.newObject=function(){var O=Cr();return ta(O,!0),O},Cr=p.__private__.newObjectDeferred=function(){return Y++,ne[Y]=function(){return oe},Y},ta=function(O,re){return re=typeof re=="boolean"&&re,ne[O]=oe,re&&he(O+" 0 obj"),O},sd=p.__private__.newAdditionalObject=function(){var O={objId:Cr(),content:""};return pe.push(O),O},al=Cr(),Za=Cr(),Ja=p.__private__.decodeColorString=function(O){var re=O.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var ve=parseFloat(re[0]);re=[ve,ve,ve,"r"]}for(var be="#",Fe=0;Fe<3;Fe++)be+=("0"+Math.floor(255*parseFloat(re[Fe])).toString(16)).slice(-2);return be},Xa=p.__private__.encodeColorString=function(O){var re;typeof O=="string"&&(O={ch1:O});var ve=O.ch1,be=O.ch2,Fe=O.ch3,Ue=O.ch4,et=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var pt=new jI(ve);if(pt.ok)ve=pt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var Tt=parseInt(ve.substr(1),16);ve=Tt>>16&255,be=Tt>>8&255,Fe=255&Tt}if(be===void 0||Ue===void 0&&ve===be&&be===Fe)if(typeof ve=="string")re=ve+" "+et[0];else switch(O.precision){case 2:re=M(ve/255)+" "+et[0];break;case 3:default:re=D(ve/255)+" "+et[0]}else if(Ue===void 0||us(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return re=["1.","1.","1.",et[1]].join(" ");if(typeof ve=="string")re=[ve,be,Fe,et[1]].join(" ");else switch(O.precision){case 2:re=[M(ve/255),M(be/255),M(Fe/255),et[1]].join(" ");break;default:case 3:re=[D(ve/255),D(be/255),D(Fe/255),et[1]].join(" ")}}else if(typeof ve=="string")re=[ve,be,Fe,Ue,et[2]].join(" ");else switch(O.precision){case 2:re=[M(ve),M(be),M(Fe),M(Ue),et[2]].join(" ");break;case 3:default:re=[D(ve),D(be),D(Fe),D(Ue),et[2]].join(" ")}return re},Pi=p.__private__.getFilters=function(){return l},Aa=p.__private__.putStream=function(O){var re=(O=O||{}).data||"",ve=O.filters||Pi(),be=O.alreadyAppliedFilters||[],Fe=O.addLength1||!1,Ue=re.length,et=O.objectId,pt=function(cn){return cn};if(u!==null&&et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(pt=on.encryptor(et,0));var Tt={};ve===!0&&(ve=["FlateEncode"]);var Ht=O.additionalKeyValues||[],Ut=(Tt=Pt.API.processDataByFilters!==void 0?Pt.API.processDataByFilters(re,ve):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Tt.data.length!==0&&(Ht.push({key:"Length",value:Tt.data.length}),Fe===!0&&Ht.push({key:"Length1",value:Ue})),Ut.length!=0)if(Ut.split("/").length-1==1)Ht.push({key:"Filter",value:Ut});else{Ht.push({key:"Filter",value:"["+Ut+"]"});for(var as=0;as<Ht.length;as+=1)if(Ht[as].key==="DecodeParms"){for(var Qs=[],lr=0;lr<Tt.reverseChain.split("/").length-1;lr+=1)Qs.push("null");Qs.push(Ht[as].value),Ht[as].value="["+Qs.join(" ")+"]"}}he("<<");for(var Ar=0;Ar<Ht.length;Ar++)he("/"+Ht[Ar].key+" "+Ht[Ar].value);he(">>"),Tt.data.length!==0&&(he("stream"),he(pt(Tt.data)),he("endstream"))},Di=p.__private__.putPage=function(O){var re=O.number,ve=O.data,be=O.objId,Fe=O.contentsObjId;ta(be,!0),he("<</Type /Page"),he("/Parent "+O.rootDictionaryObjId+" 0 R"),he("/Resources "+O.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(S(O.mediaBox.bottomLeftX))+" "+parseFloat(S(O.mediaBox.bottomLeftY))+" "+S(O.mediaBox.topRightX)+" "+S(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&he("/CropBox ["+S(O.cropBox.bottomLeftX)+" "+S(O.cropBox.bottomLeftY)+" "+S(O.cropBox.topRightX)+" "+S(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&he("/BleedBox ["+S(O.bleedBox.bottomLeftX)+" "+S(O.bleedBox.bottomLeftY)+" "+S(O.bleedBox.topRightX)+" "+S(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&he("/TrimBox ["+S(O.trimBox.bottomLeftX)+" "+S(O.trimBox.bottomLeftY)+" "+S(O.trimBox.topRightX)+" "+S(O.trimBox.topRightY)+"]"),O.artBox!==null&&he("/ArtBox ["+S(O.artBox.bottomLeftX)+" "+S(O.artBox.bottomLeftY)+" "+S(O.artBox.topRightX)+" "+S(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&he("/UserUnit "+O.userUnit),bs.publish("putPage",{objId:be,pageContext:Vt[re],pageNumber:re,page:ve}),he("/Contents "+Fe+" 0 R"),he(">>"),he("endobj");var Ue=ve.join(`
`);return v===g.ADVANCED&&(Ue+=`
Q`),ta(Fe,!0),Aa({data:Ue,filters:Pi(),objectId:Fe}),he("endobj"),be},ec=p.__private__.putPages=function(){var O,re,ve=[];for(O=1;O<=ir;O++)Vt[O].objId=Cr(),Vt[O].contentsObjId=Cr();for(O=1;O<=ir;O++)ve.push(Di({number:O,data:je[O],objId:Vt[O].objId,contentsObjId:Vt[O].contentsObjId,mediaBox:Vt[O].mediaBox,cropBox:Vt[O].cropBox,bleedBox:Vt[O].bleedBox,trimBox:Vt[O].trimBox,artBox:Vt[O].artBox,userUnit:Vt[O].userUnit,rootDictionaryObjId:al,resourceDictionaryObjId:Za}));ta(al,!0),he("<</Type /Pages");var be="/Kids [";for(re=0;re<ir;re++)be+=ve[re]+" 0 R ";he(be+"]"),he("/Count "+ir),he(">>"),he("endobj"),bs.publish("postPutPages")},rd=function(O){bs.publish("putFont",{font:O,out:he,newObject:Fr,putStream:Aa}),O.isAlreadyPutted!==!0&&(O.objectNumber=Fr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+qd(O.postScriptName)),he("/Subtype /Type1"),typeof O.encoding=="string"&&he("/Encoding /"+O.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},nd=function(){for(var O in ps)ps.hasOwnProperty(O)&&(m===!1||m===!0&&h.hasOwnProperty(O))&&rd(ps[O])},ad=function(O){O.objectNumber=Fr();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[S(O.x),S(O.y),S(O.x+O.width),S(O.y+O.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var ve=O.pages[1].join(`
`);Aa({data:ve,additionalKeyValues:re,objectId:O.objectNumber}),he("endobj")},id=function(){for(var O in Yr)Yr.hasOwnProperty(O)&&ad(Yr[O])},mp=function(O,re){var ve,be=[],Fe=1/(re-1);for(ve=0;ve<1;ve+=Fe)be.push(ve);if(be.push(1),O[0].offset!=0){var Ue={offset:0,color:O[0].color};O.unshift(Ue)}if(O[O.length-1].offset!=1){var et={offset:1,color:O[O.length-1].color};O.push(et)}for(var pt="",Tt=0,Ht=0;Ht<be.length;Ht++){for(ve=be[Ht];ve>O[Tt+1].offset;)Tt++;var Ut=O[Tt].offset,as=(ve-Ut)/(O[Tt+1].offset-Ut),Qs=O[Tt].color,lr=O[Tt+1].color;pt+=G(Math.round((1-as)*Qs[0]+as*lr[0]).toString(16))+G(Math.round((1-as)*Qs[1]+as*lr[1]).toString(16))+G(Math.round((1-as)*Qs[2]+as*lr[2]).toString(16))}return pt.trim()},hv=function(O,re){re||(re=21);var ve=Fr(),be=mp(O.colors,re),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+re+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Aa({data:be,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),he("endobj"),O.objectNumber=Fr(),he("<< /ShadingType "+O.type),he("/ColorSpace /DeviceRGB");var Ue="/Coords ["+S(parseFloat(O.coords[0]))+" "+S(parseFloat(O.coords[1]))+" ";O.type===2?Ue+=S(parseFloat(O.coords[2]))+" "+S(parseFloat(O.coords[3])):Ue+=S(parseFloat(O.coords[2]))+" "+S(parseFloat(O.coords[3]))+" "+S(parseFloat(O.coords[4]))+" "+S(parseFloat(O.coords[5])),he(Ue+="]"),O.matrix&&he("/Matrix ["+O.matrix.toString()+"]"),he("/Function "+ve+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},pv=function(O,re){var ve=Cr(),be=Fr();re.push({resourcesOid:ve,objectOid:be}),O.objectNumber=be;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+O.boundingBox.map(S).join(" ")+"]"}),Fe.push({key:"XStep",value:S(O.xStep)}),Fe.push({key:"YStep",value:S(O.yStep)}),Fe.push({key:"Resources",value:ve+" 0 R"}),O.matrix&&Fe.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),Aa({data:O.stream,additionalKeyValues:Fe,objectId:O.objectNumber}),he("endobj")},ld=function(O){var re;for(re in ns)ns.hasOwnProperty(re)&&(ns[re]instanceof po?hv(ns[re]):ns[re]instanceof bc&&pv(ns[re],O))},hp=function(O){for(var re in O.objectNumber=Fr(),he("<<"),O)switch(re){case"opacity":he("/ca "+M(O[re]));break;case"stroke-opacity":he("/CA "+M(O[re]))}he(">>"),he("endobj")},fv=function(){var O;for(O in ar)ar.hasOwnProperty(O)&&hp(ar[O])},Wu=function(){for(var O in he("/XObject <<"),Yr)Yr.hasOwnProperty(O)&&Yr[O].objectNumber>=0&&he("/"+O+" "+Yr[O].objectNumber+" 0 R");bs.publish("putXobjectDict"),he(">>")},xv=function(){on.oid=Fr(),he("<<"),he("/Filter /Standard"),he("/V "+on.v),he("/R "+on.r),he("/U <"+on.toHexString(on.U)+">"),he("/O <"+on.toHexString(on.O)+">"),he("/P "+on.P),he(">>"),he("endobj")},pp=function(){for(var O in he("/Font <<"),ps)ps.hasOwnProperty(O)&&(m===!1||m===!0&&h.hasOwnProperty(O))&&he("/"+O+" "+ps[O].objectNumber+" 0 R");he(">>")},gv=function(){if(Object.keys(ns).length>0){for(var O in he("/Shading <<"),ns)ns.hasOwnProperty(O)&&ns[O]instanceof po&&ns[O].objectNumber>=0&&he("/"+O+" "+ns[O].objectNumber+" 0 R");bs.publish("putShadingPatternDict"),he(">>")}},od=function(O){if(Object.keys(ns).length>0){for(var re in he("/Pattern <<"),ns)ns.hasOwnProperty(re)&&ns[re]instanceof p.TilingPattern&&ns[re].objectNumber>=0&&ns[re].objectNumber<O&&he("/"+re+" "+ns[re].objectNumber+" 0 R");bs.publish("putTilingPatternDict"),he(">>")}},vv=function(){if(Object.keys(ar).length>0){var O;for(O in he("/ExtGState <<"),ar)ar.hasOwnProperty(O)&&ar[O].objectNumber>=0&&he("/"+O+" "+ar[O].objectNumber+" 0 R");bs.publish("putGStateDict"),he(">>")}},hr=function(O){ta(O.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),pp(),gv(),od(O.objectOid),vv(),Wu(),he(">>"),he("endobj")},fp=function(){var O=[];nd(),fv(),id(),ld(O),bs.publish("putResources"),O.forEach(hr),hr({resourcesOid:Za,objectOid:Number.MAX_SAFE_INTEGER}),bs.publish("postPutResources")},xp=function(){bs.publish("putAdditionalObjects");for(var O=0;O<pe.length;O++){var re=pe[O];ta(re.objId,!0),he(re.content),he("endobj")}bs.publish("postPutAdditionalObjects")},gp=function(O){Ps[O.fontName]=Ps[O.fontName]||{},Ps[O.fontName][O.fontStyle]=O.id},Gu=function(O,re,ve,be,Fe){var Ue={id:"F"+(Object.keys(ps).length+1).toString(10),postScriptName:O,fontName:re,fontStyle:ve,encoding:be,isStandardFont:Fe||!1,metadata:{}};return bs.publish("addFont",{font:Ue,instance:this}),ps[Ue.id]=Ue,gp(Ue),Ue.id},jv=function(O){for(var re=0,ve=Pe.length;re<ve;re++){var be=Gu.call(this,O[re][0],O[re][1],O[re][2],Pe[re][3],!0);m===!1&&(h[be]=!0);var Fe=O[re][0].split("-");gp({id:be,fontName:Fe[0],fontStyle:Fe[1]||""})}bs.publish("addFonts",{fonts:ps,dictionary:Ps})},ei=function(O){return O.foo=function(){try{return O.apply(this,arguments)}catch(be){var re=be.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var ve="Error in function "+re.split(`
`)[0].split("<")[0]+": "+be.message;if(!Rt.console)throw new Error(ve);Rt.console.error(ve,be),Rt.alert&&alert(ve)}},O.foo.bar=O,O.foo},cd=function(O,re){var ve,be,Fe,Ue,et,pt,Tt,Ht,Ut;if(Fe=(re=re||{}).sourceEncoding||"Unicode",et=re.outputEncoding,(re.autoencode||et)&&ps[Lt].metadata&&ps[Lt].metadata[Fe]&&ps[Lt].metadata[Fe].encoding&&(Ue=ps[Lt].metadata[Fe].encoding,!et&&ps[Lt].encoding&&(et=ps[Lt].encoding),!et&&Ue.codePages&&(et=Ue.codePages[0]),typeof et=="string"&&(et=Ue[et]),et)){for(Tt=!1,pt=[],ve=0,be=O.length;ve<be;ve++)(Ht=et[O.charCodeAt(ve)])?pt.push(String.fromCharCode(Ht)):pt.push(O[ve]),pt[ve].charCodeAt(0)>>8&&(Tt=!0);O=pt.join("")}for(ve=O.length;Tt===void 0&&ve!==0;)O.charCodeAt(ve-1)>>8&&(Tt=!0),ve--;if(!Tt)return O;for(pt=re.noBOM?[]:[254,255],ve=0,be=O.length;ve<be;ve++){if((Ut=(Ht=O.charCodeAt(ve))>>8)>>8)throw new Error("Character at position "+ve+" of string '"+O+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Ut),pt.push(Ht-(Ut<<8))}return String.fromCharCode.apply(void 0,pt)},Rn=p.__private__.pdfEscape=p.pdfEscape=function(O,re){return cd(O,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ku=p.__private__.beginPage=function(O){je[++ir]=[],Vt[ir]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},jp(ir),Se(je[V])},vp=function(O,re){var ve,be,Fe;switch(r=re||r,typeof O=="string"&&(ve=f(O.toLowerCase()),Array.isArray(ve)&&(be=ve[0],Fe=ve[1])),Array.isArray(O)&&(be=O[0]*dt,Fe=O[1]*dt),isNaN(be)&&(be=a[0],Fe=a[1]),(be>14400||Fe>14400)&&(Ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Fe=Math.min(14400,Fe)),a=[be,Fe],r.substr(0,1)){case"l":Fe>be&&(a=[Fe,be]);break;case"p":be>Fe&&(a=[Fe,be])}Ku(a),Cp(Ju),he(ti),em!==0&&he(em+" J"),tm!==0&&he(tm+" j"),bs.publish("addPage",{pageNumber:ir})},yv=function(O){O>0&&O<=ir&&(je.splice(O,1),Vt.splice(O,1),ir--,V>ir&&(V=ir),this.setPage(V))},jp=function(O){O>0&&O<=ir&&(V=O)},bv=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return je.length-1},yp=function(O,re,ve){var be,Fe=void 0;return ve=ve||{},O=O!==void 0?O:ps[Lt].fontName,re=re!==void 0?re:ps[Lt].fontStyle,be=O.toLowerCase(),Ps[be]!==void 0&&Ps[be][re]!==void 0?Fe=Ps[be][re]:Ps[O]!==void 0&&Ps[O][re]!==void 0?Fe=Ps[O][re]:ve.disableWarning===!1&&Ls.warn("Unable to look up font label for font '"+O+"', '"+re+"'. Refer to getFontList() for available fonts."),Fe||ve.noFallback||(Fe=Ps.times[re])==null&&(Fe=Ps.times.normal),Fe},Nv=p.__private__.putInfo=function(){var O=Fr(),re=function(be){return be};for(var ve in u!==null&&(re=on.encryptor(O,0)),he("<<"),he("/Producer ("+Rn(re("jsPDF "+Pt.version))+")"),Nt)Nt.hasOwnProperty(ve)&&Nt[ve]&&he("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+Rn(re(Nt[ve]))+")");he("/CreationDate ("+Rn(re(F))+")"),he(">>"),he("endobj")},Yu=p.__private__.putCatalog=function(O){var re=(O=O||{}).rootDictionaryObjId||al;switch(Fr(),he("<<"),he("/Type /Catalog"),he("/Pages "+re+" 0 R"),lt||(lt="fullwidth"),lt){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+lt;ve.substr(ve.length-1)==="%"&&(lt=parseInt(lt)/100),typeof lt=="number"&&he("/OpenAction [3 0 R /XYZ null null "+M(lt)+"]")}switch(ut||(ut="continuous"),ut){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Le&&he("/PageMode /"+Le),bs.publish("putCatalog"),he(">>"),he("endobj")},wv=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(Y+1)),he("/Root "+Y+" 0 R"),he("/Info "+(Y-1)+" 0 R"),u!==null&&he("/Encrypt "+on.oid+" 0 R"),he("/ID [ <"+B+"> <"+B+"> ]"),he(">>")},Sv=p.__private__.putHeader=function(){he("%PDF-"+b),he("%ºß¬à")},Cv=p.__private__.putXRef=function(){var O="0000000000";he("xref"),he("0 "+(Y+1)),he("0000000000 65535 f ");for(var re=1;re<=Y;re++)typeof ne[re]=="function"?he((O+ne[re]()).slice(-10)+" 00000 n "):ne[re]!==void 0?he((O+ne[re]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},il=p.__private__.buildDocument=function(){ye(),Se(le),bs.publish("buildDocument"),Sv(),ec(),xp(),fp(),u!==null&&xv(),Nv(),Yu();var O=oe;return Cv(),wv(),he("startxref"),he(""+O),he("%%EOF"),Se(je[V]),le.join(`
`)},dd=p.__private__.getBlob=function(O){return new Blob([xe(O)],{type:"application/pdf"})},ud=p.output=p.__private__.output=ei(function(O,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",O){case void 0:return il();case"save":p.save(re.filename);break;case"arraybuffer":return xe(il());case"blob":return dd(il());case"bloburi":case"bloburl":if(Rt.URL!==void 0&&typeof Rt.URL.createObjectURL=="function")return Rt.URL&&Rt.URL.createObjectURL(dd(il()))||void 0;Ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",be=il();try{ve=x1(be)}catch{ve=x1(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+re.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rt)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Fe=re.pdfObjectUrl,Ue="");var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",pt=Rt.open();return pt!==null&&pt.document.write(et),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rt)==="[object Window]"){var Tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Ht=Rt.open();if(Ht!==null){Ht.document.write(Tt);var Ut=this;Ht.document.documentElement.querySelector("#pdfViewer").onload=function(){Ht.document.title=re.filename,Ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',Qs=Rt.open();if(Qs!==null&&(Qs.document.write(as),Qs.document.title=re.filename),Qs||typeof safari>"u")return Qs;break;case"datauri":case"dataurl":return Rt.document.location.href=this.output("datauristring",re);default:return null}}),bp=function(O){return Array.isArray(Xo)===!0&&Xo.indexOf(O)>-1};switch(n){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=bp("px_scaling")==1?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);dt=n}var on=null;q(),$();var Av=function(O){return u!==null?on.encryptor(O,0):function(re){return re}},Np=p.__private__.getPageInfo=p.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Vt[O].objId,pageNumber:O,pageContext:Vt[O]}},Ot=p.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Vt)if(Vt[re].objId===O)break;return Np(re)},Tv=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Vt[V].objId,pageNumber:V,pageContext:Vt[V]}};p.addPage=function(){return vp.apply(this,arguments),this},p.setPage=function(){return jp.apply(this,arguments),Se.call(this,je[V]),this},p.insertPage=function(O){return this.addPage(),this.movePage(V,O),this},p.movePage=function(O,re){var ve,be;if(O>re){ve=je[O],be=Vt[O];for(var Fe=O;Fe>re;Fe--)je[Fe]=je[Fe-1],Vt[Fe]=Vt[Fe-1];je[re]=ve,Vt[re]=be,this.setPage(re)}else if(O<re){ve=je[O],be=Vt[O];for(var Ue=O;Ue<re;Ue++)je[Ue]=je[Ue+1],Vt[Ue]=Vt[Ue+1];je[re]=ve,Vt[re]=be,this.setPage(re)}return this},p.deletePage=function(){return yv.apply(this,arguments),this},p.__private__.text=p.text=function(O,re,ve,be,Fe){var Ue,et,pt,Tt,Ht,Ut,as,Qs,lr,Ar=(be=be||{}).scope||this;if(typeof O=="number"&&typeof re=="number"&&(typeof ve=="string"||Array.isArray(ve))){var cn=ve;ve=re,re=O,O=cn}if(arguments[3]instanceof It?(C("The transform parameter of text() with a Matrix value"),lr=Fe):(pt=arguments[4],Tt=arguments[5],us(as=arguments[3])==="object"&&as!==null||(typeof pt=="string"&&(Tt=pt,pt=null),typeof as=="string"&&(Tt=as,as=null),typeof as=="number"&&(pt=as,as=null),be={flags:as,angle:pt,align:Tt})),isNaN(re)||isNaN(ve)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return Ar;var $r="",si=!1,sa=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:sc,Li=Ar.internal.scaleFactor;function Ip(Ms){return Ms=Ms.split("	").join(Array(be.TabLen||9).join(" ")),Rn(Ms,as)}function im(Ms){for(var _s,fr=Ms.concat(),Rr=[],ul=fr.length;ul--;)typeof(_s=fr.shift())=="string"?Rr.push(_s):Array.isArray(Ms)&&(_s.length===1||_s[1]===void 0&&_s[2]===void 0)?Rr.push(_s[0]):Rr.push([_s[0],_s[1],_s[2]]);return Rr}function lm(Ms,_s){var fr;if(typeof Ms=="string")fr=_s(Ms)[0];else if(Array.isArray(Ms)){for(var Rr,ul,fm=Ms.concat(),Ad=[],Mp=fm.length;Mp--;)typeof(Rr=fm.shift())=="string"?Ad.push(_s(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(ul=_s(Rr[0],Rr[1],Rr[2]),Ad.push([ul[0],ul[1],ul[2]]));fr=Ad}return fr}var gd=!1,om=!0;if(typeof O=="string")gd=!0;else if(Array.isArray(O)){var cm=O.concat();et=[];for(var vd,Qr=cm.length;Qr--;)(typeof(vd=cm.shift())!="string"||Array.isArray(vd)&&typeof vd[0]!="string")&&(om=!1);gd=om}if(gd===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var jd=qe/Ar.internal.scaleFactor,yd=jd*(sa-1);switch(be.baseline){case"bottom":ve-=yd;break;case"top":ve+=jd-yd;break;case"hanging":ve+=jd-2*yd;break;case"middle":ve+=jd/2-yd}if((Ut=be.maxWidth||0)>0&&(typeof O=="string"?O=Ar.splitTextToSize(O,Ut):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(Ms,_s){return Ms.concat(Ar.splitTextToSize(_s,Ut))},[]))),Ue={text:O,x:re,y:ve,options:be,mutex:{pdfEscape:Rn,activeFontKey:Lt,fonts:ps,activeFontSize:qe}},bs.publish("preProcessText",Ue),O=Ue.text,pt=(be=Ue.options).angle,!(lr instanceof It)&&pt&&typeof pt=="number"){pt*=Math.PI/180,be.rotationDirection===0&&(pt=-pt),v===g.ADVANCED&&(pt=-pt);var bd=Math.cos(pt),dm=Math.sin(pt);lr=new It(bd,dm,-dm,bd,0,0)}else pt&&pt instanceof It&&(lr=pt);v!==g.ADVANCED||lr||(lr=Ei),(Ht=be.charSpace||pd)!==void 0&&($r+=S(A(Ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qs=be.horizontalScale)!==void 0&&($r+=S(100*Qs)+` Tz
`),be.lang;var Mn=-1,_v=be.renderingMode!==void 0?be.renderingMode:be.stroke,um=Ar.internal.getCurrentPageInfo().pageContext;switch(_v){case 0:case!1:case"fill":Mn=0;break;case 1:case!0:case"stroke":Mn=1;break;case 2:case"fillThenStroke":Mn=2;break;case 3:case"invisible":Mn=3;break;case 4:case"fillAndAddForClipping":Mn=4;break;case 5:case"strokeAndAddPathForClipping":Mn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Mn=6;break;case 7:case"addToPathForClipping":Mn=7}var kp=um.usedRenderingMode!==void 0?um.usedRenderingMode:-1;Mn!==-1?$r+=Mn+` Tr
`:kp!==-1&&($r+=`0 Tr
`),Mn!==-1&&(um.usedRenderingMode=Mn),Tt=be.align||"left";var Ta,Nd=qe*sa,Lp=Ar.internal.pageSize.getWidth(),Fp=ps[Lt];Ht=be.charSpace||pd,Ut=be.maxWidth||0,as=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Vl=[],ac=function(Ms){return Ar.getStringUnitWidth(Ms,{font:Fp,charSpace:Ht,fontSize:qe,doKerning:!1})*qe/Li};if(Object.prototype.toString.call(O)==="[object Array]"){var _n;et=im(O),Tt!=="left"&&(Ta=et.map(ac));var Sn,Ul=0;if(Tt==="right"){re-=Ta[0],O=[],Qr=et.length;for(var ol=0;ol<Qr;ol++)ol===0?(Sn=ki(re),_n=ll(ve)):(Sn=A(Ul-Ta[ol]),_n=-Nd),O.push([et[ol],Sn,_n]),Ul=Ta[ol]}else if(Tt==="center"){re-=Ta[0]/2,O=[],Qr=et.length;for(var cl=0;cl<Qr;cl++)cl===0?(Sn=ki(re),_n=ll(ve)):(Sn=A((Ul-Ta[cl])/2),_n=-Nd),O.push([et[cl],Sn,_n]),Ul=Ta[cl]}else if(Tt==="left"){O=[],Qr=et.length;for(var wd=0;wd<Qr;wd++)O.push(et[wd])}else if(Tt==="justify"&&Fp.encoding==="Identity-H"){O=[],Qr=et.length,Ut=Ut!==0?Ut:Lp;for(var dl=0,pr=0;pr<Qr;pr++)if(_n=pr===0?ll(ve):-Nd,Sn=pr===0?ki(re):dl,pr<Qr-1){var mm=A((Ut-Ta[pr])/(et[pr].split(" ").length-1)),Cn=et[pr].split(" ");O.push([Cn[0]+" ",Sn,_n]),dl=0;for(var Ea=1;Ea<Cn.length;Ea++){var Sd=(ac(Cn[Ea-1]+" "+Cn[Ea])-ac(Cn[Ea]))*Li+mm;Ea==Cn.length-1?O.push([Cn[Ea],Sd,0]):O.push([Cn[Ea]+" ",Sd,0]),dl-=Sd}}else O.push([et[pr],Sn,_n]);O.push(["",dl,0])}else{if(Tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],Qr=et.length,Ut=Ut!==0?Ut:Lp,pr=0;pr<Qr;pr++)_n=pr===0?ll(ve):-Nd,Sn=pr===0?ki(re):0,pr<Qr-1?Vl.push(S(A((Ut-Ta[pr])/(et[pr].split(" ").length-1)))):Vl.push(0),O.push([et[pr],Sn,_n])}}var Rp=typeof be.R2L=="boolean"?be.R2L:He;Rp===!0&&(O=lm(O,function(Ms,_s,fr){return[Ms.split("").reverse().join(""),_s,fr]})),Ue={text:O,x:re,y:ve,options:be,mutex:{pdfEscape:Rn,activeFontKey:Lt,fonts:ps,activeFontSize:qe}},bs.publish("postProcessText",Ue),O=Ue.text,si=Ue.mutex.isHex||!1;var hm=ps[Lt].encoding;hm!=="WinAnsiEncoding"&&hm!=="StandardEncoding"||(O=lm(O,function(Ms,_s,fr){return[Ip(Ms),_s,fr]})),et=im(O),O=[];for(var ic,lc,ql,oc=0,Cd=1,cc=Array.isArray(et[0])?Cd:oc,Hl="",pm=function(Ms,_s,fr){var Rr="";return fr instanceof It?(fr=typeof be.angle=="number"?Qa(fr,new It(1,0,0,1,Ms,_s)):Qa(new It(1,0,0,1,Ms,_s),fr),v===g.ADVANCED&&(fr=Qa(new It(1,0,0,-1,0,0),fr)),Rr=fr.join(" ")+` Tm
`):Rr=S(Ms)+" "+S(_s)+` Td
`,Rr},Pa=0;Pa<et.length;Pa++){switch(Hl="",cc){case Cd:ql=(si?"<":"(")+et[Pa][0]+(si?">":")"),ic=parseFloat(et[Pa][1]),lc=parseFloat(et[Pa][2]);break;case oc:ql=(si?"<":"(")+et[Pa]+(si?">":")"),ic=ki(re),lc=ll(ve)}Vl!==void 0&&Vl[Pa]!==void 0&&(Hl=Vl[Pa]+` Tw
`),Pa===0?O.push(Hl+pm(ic,lc,lr)+ql):cc===oc?O.push(Hl+ql):cc===Cd&&O.push(Hl+pm(ic,lc,lr)+ql)}O=cc===oc?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Da=`BT
/`;return Da+=Lt+" "+qe+` Tf
`,Da+=S(qe*sa)+` TL
`,Da+=rc+`
`,Da+=$r,Da+=O,he(Da+="ET"),h[Lt]=!0,Ar};var Ev=p.__private__.clip=p.clip=function(O){return he(O==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Ev("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var Ii=p.__private__.isValidStyle=function(O){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(re=!0),re};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(O){return Ii(O)&&(d=O),this};var wp=p.__private__.getStyle=p.getStyle=function(O){var re=d;switch(O){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=O}return re},Sp=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(O){return md("f",O),this},p.fillEvenOdd=function(O){return md("f*",O),this},p.fillStroke=function(O){return md("B",O),this},p.fillStrokeEvenOdd=function(O){return md("B*",O),this};var md=function(O,re){us(re)==="object"?Dv(re,O):he(O)},Qu=function(O){O===null||v===g.ADVANCED&&O===void 0||(O=wp(O),he(O))};function Pv(O,re,ve,be,Fe){var Ue=new bc(re||this.boundingBox,ve||this.xStep,be||this.yStep,this.gState,Fe||this.matrix);Ue.stream=this.stream;var et=O+"$$"+this.cloneIndex+++"$$";return Fn(et,Ue),Ue}var Dv=function(O,re){var ve=rl[O.key],be=ns[ve];if(be instanceof po)he("q"),he(Iv(re)),be.gState&&p.setGState(be.gState),he(O.matrix.toString()+" cm"),he("/"+ve+" sh"),he("Q");else if(be instanceof bc){var Fe=new It(1,0,0,-1,0,zl());O.matrix&&(Fe=Fe.multiply(O.matrix||Ei),ve=Pv.call(be,O.key,O.boundingBox,O.xStep,O.yStep,Fe).id),he("q"),he("/Pattern cs"),he("/"+ve+" scn"),be.gState&&p.setGState(be.gState),he(re),he("Q")}},Iv=function(O){switch(O){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zu=p.moveTo=function(O,re){return he(S(A(O))+" "+S(L(re))+" m"),this},tc=p.lineTo=function(O,re){return he(S(A(O))+" "+S(L(re))+" l"),this},$l=p.curveTo=function(O,re,ve,be,Fe,Ue){return he([S(A(O)),S(L(re)),S(A(ve)),S(L(be)),S(A(Fe)),S(L(Ue)),"c"].join(" ")),this};p.__private__.line=p.line=function(O,re,ve,be,Fe){if(isNaN(O)||isNaN(re)||isNaN(ve)||isNaN(be)||!Ii(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return v===g.COMPAT?this.lines([[ve-O,be-re]],O,re,[1,1],Fe||"S"):this.lines([[ve-O,be-re]],O,re,[1,1]).stroke()},p.__private__.lines=p.lines=function(O,re,ve,be,Fe,Ue){var et,pt,Tt,Ht,Ut,as,Qs,lr,Ar,cn,$r,si;if(typeof O=="number"&&(si=ve,ve=re,re=O,O=si),be=be||[1,1],Ue=Ue||!1,isNaN(re)||isNaN(ve)||!Array.isArray(O)||!Array.isArray(be)||!Ii(Fe)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zu(re,ve),et=be[0],pt=be[1],Ht=O.length,cn=re,$r=ve,Tt=0;Tt<Ht;Tt++)(Ut=O[Tt]).length===2?(cn=Ut[0]*et+cn,$r=Ut[1]*pt+$r,tc(cn,$r)):(as=Ut[0]*et+cn,Qs=Ut[1]*pt+$r,lr=Ut[2]*et+cn,Ar=Ut[3]*pt+$r,cn=Ut[4]*et+cn,$r=Ut[5]*pt+$r,$l(as,Qs,lr,Ar,cn,$r));return Ue&&Sp(),Qu(Fe),this},p.path=function(O){for(var re=0;re<O.length;re++){var ve=O[re],be=ve.c;switch(ve.op){case"m":Zu(be[0],be[1]);break;case"l":tc(be[0],be[1]);break;case"c":$l.apply(this,be);break;case"h":Sp()}}return this},p.__private__.rect=p.rect=function(O,re,ve,be,Fe){if(isNaN(O)||isNaN(re)||isNaN(ve)||isNaN(be)||!Ii(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return v===g.COMPAT&&(be=-be),he([S(A(O)),S(L(re)),S(A(ve)),S(A(be)),"re"].join(" ")),Qu(Fe),this},p.__private__.triangle=p.triangle=function(O,re,ve,be,Fe,Ue,et){if(isNaN(O)||isNaN(re)||isNaN(ve)||isNaN(be)||isNaN(Fe)||isNaN(Ue)||!Ii(et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-O,be-re],[Fe-ve,Ue-be],[O-Fe,re-Ue]],O,re,[1,1],et,!0),this},p.__private__.roundedRect=p.roundedRect=function(O,re,ve,be,Fe,Ue,et){if(isNaN(O)||isNaN(re)||isNaN(ve)||isNaN(be)||isNaN(Fe)||isNaN(Ue)||!Ii(et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*ve),Ue=Math.min(Ue,.5*be),this.lines([[ve-2*Fe,0],[Fe*pt,0,Fe,Ue-Ue*pt,Fe,Ue],[0,be-2*Ue],[0,Ue*pt,-Fe*pt,Ue,-Fe,Ue],[2*Fe-ve,0],[-Fe*pt,0,-Fe,-Ue*pt,-Fe,-Ue],[0,2*Ue-be],[0,-Ue*pt,Fe*pt,-Ue,Fe,-Ue]],O+Fe,re,[1,1],et,!0),this},p.__private__.ellipse=p.ellipse=function(O,re,ve,be,Fe){if(isNaN(O)||isNaN(re)||isNaN(ve)||isNaN(be)||!Ii(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*ve,et=4/3*(Math.SQRT2-1)*be;return Zu(O+ve,re),$l(O+ve,re-et,O+Ue,re-be,O,re-be),$l(O-Ue,re-be,O-ve,re-et,O-ve,re),$l(O-ve,re+et,O-Ue,re+be,O,re+be),$l(O+Ue,re+be,O+ve,re+et,O+ve,re),Qu(Fe),this},p.__private__.circle=p.circle=function(O,re,ve,be){if(isNaN(O)||isNaN(re)||isNaN(ve)||!Ii(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,re,ve,ve,be)},p.setFont=function(O,re,ve){return ve&&(re=T(re,ve)),Lt=yp(O,re,{disableWarning:!1}),this};var kv=p.__private__.getFont=p.getFont=function(){return ps[yp.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var O,re,ve={};for(O in Ps)if(Ps.hasOwnProperty(O))for(re in ve[O]=[],Ps[O])Ps[O].hasOwnProperty(re)&&ve[O].push(re);return ve},p.addFont=function(O,re,ve,be,Fe){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(ve=T(ve,be)),Fe=Fe||"Identity-H",Gu.call(this,O,re,ve,Fe)};var sc,Ju=t.lineWidth||.200025,hd=p.__private__.getLineWidth=p.getLineWidth=function(){return Ju},Cp=p.__private__.setLineWidth=p.setLineWidth=function(O){return Ju=O,he(S(A(O))+" w"),this};p.__private__.setLineDash=Pt.API.setLineDash=Pt.API.setLineDashPattern=function(O,re){if(O=O||[],re=re||0,isNaN(re)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(ve){return S(A(ve))}).join(" "),re=S(A(re)),he("["+O+"] "+re+" d"),this};var Ap=p.__private__.getLineHeight=p.getLineHeight=function(){return qe*sc};p.__private__.getLineHeight=p.getLineHeight=function(){return qe*sc};var Tp=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(sc=O),this},Ep=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return sc};Tp(t.lineHeight);var ki=p.__private__.getHorizontalCoordinate=function(O){return A(O)},ll=p.__private__.getVerticalCoordinate=function(O){return v===g.ADVANCED?O:Vt[V].mediaBox.topRightY-Vt[V].mediaBox.bottomLeftY-A(O)},Lv=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(O){return S(ki(O))},Bl=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(O){return S(ll(O))},ti=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ja(ti)},p.__private__.setStrokeColor=p.setDrawColor=function(O,re,ve,be){return ti=Xa({ch1:O,ch2:re,ch3:ve,ch4:be,pdfColorType:"draw",precision:2}),he(ti),this};var Xu=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ja(Xu)},p.__private__.setFillColor=p.setFillColor=function(O,re,ve,be){return Xu=Xa({ch1:O,ch2:re,ch3:ve,ch4:be,pdfColorType:"fill",precision:2}),he(Xu),this};var rc=t.textColor||"0 g",Fv=p.__private__.getTextColor=p.getTextColor=function(){return Ja(rc)};p.__private__.setTextColor=p.setTextColor=function(O,re,ve,be){return rc=Xa({ch1:O,ch2:re,ch3:ve,ch4:be,pdfColorType:"text",precision:3}),this};var pd=t.charSpace,Rv=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(pd||0)};p.__private__.setCharSpace=p.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return pd=O,this};var em=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(O){var re=p.CapJoinStyles[O];if(re===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return em=re,he(re+" J"),this};var tm=0;p.__private__.setLineJoin=p.setLineJoin=function(O){var re=p.CapJoinStyles[O];if(re===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tm=re,he(re+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(S(A(O))+" M"),this},p.GState=Uh,p.setGState=function(O){(O=typeof O=="string"?ar[Ya[O]]:Pp(null,O)).equals(nl)||(he("/"+O.id+" gs"),nl=O)};var Pp=function(O,re){if(!O||!Ya[O]){var ve=!1;for(var be in ar)if(ar.hasOwnProperty(be)&&ar[be].equals(re)){ve=!0;break}if(ve)re=ar[be];else{var Fe="GS"+(Object.keys(ar).length+1).toString(10);ar[Fe]=re,re.id=Fe}return O&&(Ya[O]=re.id),bs.publish("addGState",re),re}};p.addGState=function(O,re){return Pp(O,re),this},p.saveGraphicsState=function(){return he("q"),Ln.push({key:Lt,size:qe,color:rc}),this},p.restoreGraphicsState=function(){he("Q");var O=Ln.pop();return Lt=O.key,qe=O.size,rc=O.color,nl=null,this},p.setCurrentTransformationMatrix=function(O){return he(O.toString()+" cm"),this},p.comment=function(O){return he("#"+O),this};var fd=function(O,re){var ve=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(Ue){isNaN(Ue)||(ve=parseFloat(Ue))}});var be=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ue){isNaN(Ue)||(be=parseFloat(Ue))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Ue){Fe=Ue.toString()}}),this},sm=function(O,re,ve,be){fd.call(this,O,re),this.type="rect";var Fe=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(et){isNaN(et)||(Fe=parseFloat(et))}});var Ue=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function(et){isNaN(et)||(Ue=parseFloat(et))}}),this},rm=function(){this.page=ir,this.currentPage=V,this.pages=je.slice(0),this.pagesContext=Vt.slice(0),this.x=hs,this.y=Kt,this.matrix=Lr,this.width=nc(V),this.height=zl(V),this.outputDestination=Re,this.id="",this.objectNumber=-1};rm.prototype.restore=function(){ir=this.page,V=this.currentPage,Vt=this.pagesContext,je=this.pages,hs=this.x,Kt=this.y,Lr=this.matrix,nm(V,this.width),am(V,this.height),Re=this.outputDestination};var Dp=function(O,re,ve,be,Fe){Ti.push(new rm),ir=V=0,je=[],hs=O,Kt=re,Lr=Fe,Ku([ve,be])},Mv=function(O){if(Ai[O])Ti.pop().restore();else{var re=new rm,ve="Xo"+(Object.keys(Yr).length+1).toString(10);re.id=ve,Ai[O]=ve,Yr[ve]=re,bs.publish("addFormObject",re),Ti.pop().restore()}};for(var xd in p.beginFormObject=function(O,re,ve,be,Fe){return Dp(O,re,ve,be,Fe),this},p.endFormObject=function(O){return Mv(O),this},p.doFormObject=function(O,re){var ve=Yr[Ai[O]];return he("q"),he(re.toString()+" cm"),he("/"+ve.id+" Do"),he("Q"),this},p.getFormObject=function(O){var re=Yr[Ai[O]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},p.save=function(O,re){return O=O||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(xc(dd(il()),O),typeof xc.unload=="function"&&Rt.setTimeout&&setTimeout(xc.unload,911),this):new Promise(function(ve,be){try{var Fe=xc(dd(il()),O);typeof xc.unload=="function"&&Rt.setTimeout&&setTimeout(xc.unload,911),ve(Fe)}catch(Ue){be(Ue.message)}})},Pt.API)Pt.API.hasOwnProperty(xd)&&(xd==="events"&&Pt.API.events.length?function(O,re){var ve,be,Fe;for(Fe=re.length-1;Fe!==-1;Fe--)ve=re[Fe][0],be=re[Fe][1],O.subscribe.apply(O,[ve].concat(typeof be=="function"?[be]:be))}(bs,Pt.API.events):p[xd]=Pt.API[xd]);var nc=p.getPageWidth=function(O){return(Vt[O=O||V].mediaBox.topRightX-Vt[O].mediaBox.bottomLeftX)/dt},nm=p.setPageWidth=function(O,re){Vt[O].mediaBox.topRightX=re*dt+Vt[O].mediaBox.bottomLeftX},zl=p.getPageHeight=function(O){return(Vt[O=O||V].mediaBox.topRightY-Vt[O].mediaBox.bottomLeftY)/dt},am=p.setPageHeight=function(O,re){Vt[O].mediaBox.topRightY=re*dt+Vt[O].mediaBox.bottomLeftY};return p.internal={pdfEscape:Rn,getStyle:wp,getFont:kv,getFontSize:at,getCharSpace:Rv,getTextColor:Fv,getLineHeight:Ap,getLineHeightFactor:Ep,getLineWidth:hd,write:ke,getHorizontalCoordinate:ki,getVerticalCoordinate:ll,getCoordinateString:Lv,getVerticalCoordinateString:Bl,collections:{},newObject:Fr,newAdditionalObject:sd,newObjectDeferred:Cr,newObjectDeferredBegin:ta,getFilters:Pi,putStream:Aa,events:bs,scaleFactor:dt,pageSize:{getWidth:function(){return nc(V)},setWidth:function(O){nm(V,O)},getHeight:function(){return zl(V)},setHeight:function(O){am(V,O)}},encryptionOptions:u,encryption:on,getEncryptor:Av,output:ud,getNumberOfPages:bv,pages:je,out:he,f2:M,f3:D,getPageInfo:Np,getPageInfoByObjId:Ot,getCurrentPageInfo:Tv,getPDFVersion:j,Point:fd,Rectangle:sm,Matrix:It,hasHotfix:bp},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return nc(V)},set:function(O){nm(V,O)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return zl(V)},set:function(O){am(V,O)},enumerable:!0,configurable:!0}),jv.call(p,Pe),Lt="F1",vp(a,r),bs.publish("initialized"),p}Ud.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ud.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ud.prototype.hexToBytes=function(t){for(var s=[],r=0;r<t.length;r+=2)s.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return s.join("")},Ud.prototype.processOwnerPassword=function(t,s){return v1(g1(s).substr(0,5),t)},Ud.prototype.encryptor=function(t,s){var r=g1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(n){return v1(r,n)}},Uh.prototype.equals=function(t){var s,r="id,objectNumber,equals";if(!t||us(t)!==us(this))return!1;var n=0;for(s in this)if(!(r.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;n++}for(s in t)t.hasOwnProperty(s)&&r.indexOf(s)<0&&n--;return n===0},Pt.API={events:[]},Pt.version="2.5.2";var cr=Pt.API,Bb=1,td=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$d=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qt=function(t){return t.toFixed(2)},ro=function(t){return t.toFixed(5)};cr.__acroform__={};var ea=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},iS=function(t){return t*Bb},_i=function(t){var s=new wI,r=bt.internal.getHeight(t)||0,n=bt.internal.getWidth(t)||0;return s.BBox=[0,0,Number(qt(n)),Number(qt(r))],s},EK=cr.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<s},PK=cr.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<s)},DK=cr.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},yr=cr.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return DK(t,s-1)},br=cr.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return EK(t,s-1)},Nr=cr.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return PK(t,s-1)},IK=cr.__acroform__.calculateCoordinates=function(t,s){var r=s.internal.getHorizontalCoordinate,n=s.internal.getVerticalCoordinate,a=t[0],i=t[1],l=t[2],o=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(a+l)||0,c.upperRight_Y=n(i)||0,[Number(qt(c.lowerLeft_X)),Number(qt(c.lowerLeft_Y)),Number(qt(c.upperRight_X)),Number(qt(c.upperRight_Y))]},kK=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],r=t._V||t.DV,n=j1(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+a+" "+qt(n.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(n.text),s.push("ET"),s.push("Q"),s.push("EMC");var i=_i(t);return i.scope=t.scope,i.stream=s.join(`
`),i}},j1=function(t,s){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");a=t.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var i=r,l=bt.internal.getHeight(t)||0;l=l<0?-l:l;var o=bt.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(D,A,I){if(D+1<a.length){var L=A+" "+a[D+1][0];return _f(L,t,I).width<=o-4}return!1};i++;e:for(;i>0;){s="",i--;var d,u,m=_f("3",t,i).height,h=t.multiline?l-i:(l-m)/2,p=h+=2,b=0,j=0,x=0;if(i<=0){s=`(...) Tj
`,s+="% Width of Text: "+_f(s,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var f="",g=0,v=0;v<a.length;v++)if(a.hasOwnProperty(v)){var w=!1;if(a[v].length!==1&&x!==a[v].length-1){if((m+2)*(g+2)+2>l)continue e;f+=a[v][x],w=!0,j=v,v--}else{f=(f+=a[v][x]+" ").substr(f.length-1)==" "?f.substr(0,f.length-1):f;var k=parseInt(v),T=c(k,f,i),S=v>=a.length-1;if(T&&!S){f+=" ",x=0;continue}if(T||S){if(S)j=k;else if(t.multiline&&(m+2)*(g+2)+2>l)continue e}else{if(!t.multiline||(m+2)*(g+2)+2>l)continue e;j=k}}for(var C="",E=b;E<=j;E++){var M=a[E];if(t.multiline){if(E===j){C+=M[x]+" ",x=(x+1)%M.length;continue}if(E===b){C+=M[M.length-1]+" ";continue}}C+=M[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,u=_f(C,t,i).width,t.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;case"left":default:d=2}s+=qt(d)+" "+qt(p)+` Td
`,s+="("+td(C)+`) Tj
`,s+=-qt(d)+` 0 Td
`,p=-(i+2),u=0,b=w?j:j+1,g++,f=""}break}return n.text=s,n.fontSize=i,n},_f=function(t,s,r){var n=s.scope.internal.getFont(s.fontName,s.fontStyle),a=s.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:s.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},LK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},FK=function(t,s){var r={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(r)},RK=function(t,s){for(var r in t)if(t.hasOwnProperty(r)){var n=r,a=t[r];s.internal.newObjectDeferredBegin(a.objId,!0),us(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete t[n]}},MK=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Si.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(LK)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Bb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new SI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&FK(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var l in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var o=n[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=IK(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=bt.createDefaultAppearanceStream(o),us(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=kK(o);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var m="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(m+="/"+h+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var l in p)if(p.hasOwnProperty(l)){var b=p[l];typeof b=="function"&&(b=b.call(a,o)),m+="/"+l+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=p)=="function"&&(b=b.call(a,o)),m+="/"+l+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&RK(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},NI=cr.__acroform__.arrayToPdfArray=function(t,s,r){var n=function(l){return l};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),us(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(s!==void 0&&r&&(n=r.internal.getEncryptor(s)),a+="("+td(n(t[i].toString()))+")"):a+=t[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nj=function(t,s,r){var n=function(a){return a};return s!==void 0&&r&&(n=r.internal.getEncryptor(s)),(t=t||"").toString(),t="("+td(n(t))+")"},Hi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Hi.prototype.toString=function(){return this.objId+" 0 R"},Hi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Hi.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in s)if(Object.getOwnPropertyDescriptor(this,s[r]).configurable===!1){var n=s[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:NI(a,this.objId,this.scope)}):a instanceof Hi?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var wI=function(){Hi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ea(wI,Hi);var SI=function(){Hi.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+td(r(t))+")"}},set:function(r){t=r}})};ea(SI,Hi);var Si=function t(){Hi.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute F supplied.');s=f}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!yr(s,3)},set:function(f){f?this.F=br(s,3):this.F=Nr(s,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute Ff supplied.');r=f}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(f){n=f!==void 0?f:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(f){n[0]=f}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(f){n[1]=f}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(f){n[2]=f}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(f){n[3]=f}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(f){switch(f){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=f;break;default:throw new Error('Invalid value "'+f+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof sg)return;i="FieldObject"+t.FieldNum++}var f=function(g){return g};return this.scope&&(f=this.scope.internal.getEncryptor(this.objId)),"("+td(f(i))+")"},set:function(f){i=f.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(f){i=f}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(f){l=f}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(f){o=f}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(f){c=f}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Bb:d},set:function(f){d=f}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(f){u=f}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof sg||this instanceof Ro))return Nj(m,this.objId,this.scope)},set:function(f){f=f.toString(),m=f}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof _r?h:Nj(h,this.objId,this.scope)},set:function(f){f=f.toString(),h=this instanceof _r?f:f.substr(0,1)==="("?$d(f.substr(1,f.length-2)):$d(f)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _r?$d(h.substr(1,h.length-1)):h},set:function(f){f=f.toString(),h=this instanceof _r?"/"+f:f}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(f){this.V=f}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof _r?p:Nj(p,this.objId,this.scope)},set:function(f){f=f.toString(),p=this instanceof _r?f:f.substr(0,1)==="("?$d(f.substr(1,f.length-2)):$d(f)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _r?$d(p.substr(1,p.length-1)):p},set:function(f){f=f.toString(),p=this instanceof _r?"/"+f:f}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(f){f=!!f,j=f}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(f){b=f}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,1)},set:function(f){f?this.Ff=br(this.Ff,1):this.Ff=Nr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,2)},set:function(f){f?this.Ff=br(this.Ff,2):this.Ff=Nr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,3)},set:function(f){f?this.Ff=br(this.Ff,3):this.Ff=Nr(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(f){if([0,1,2].indexOf(f)===-1)throw new Error('Invalid value "'+f+'" for attribute Q supplied.');x=f}}),Object.defineProperty(this,"textAlign",{get:function(){var f;switch(x){case 0:default:f="left";break;case 1:f="center";break;case 2:f="right"}return f},configurable:!0,enumerable:!0,set:function(f){switch(f){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};ea(Si,Hi);var Cc=function(){Si.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return NI(s,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,l,o){o||(o=1);for(var c,d=[];c=l.exec(i);)d.push(c[o]);return d}(n,/\((.*?)\)/g)),s=a}}),this.getOptions=function(){return s},this.setOptions=function(r){s=r,this.sort&&s.sort()},this.addOption=function(r){r=(r=r||"").toString(),s.push(r),this.sort&&s.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();s.indexOf(r)!==-1&&(s.splice(s.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,18)},set:function(r){r?this.Ff=br(this.Ff,18):this.Ff=Nr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=br(this.Ff,19):this.Ff=Nr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,20)},set:function(r){r?(this.Ff=br(this.Ff,20),s.sort()):this.Ff=Nr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,22)},set:function(r){r?this.Ff=br(this.Ff,22):this.Ff=Nr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,23)},set:function(r){r?this.Ff=br(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,27)},set:function(r){r?this.Ff=br(this.Ff,27):this.Ff=Nr(this.Ff,27)}}),this.hasAppearanceStream=!1};ea(Cc,Si);var Ac=function(){Cc.call(this),this.fontName="helvetica",this.combo=!1};ea(Ac,Cc);var Tc=function(){Ac.call(this),this.combo=!0};ea(Tc,Ac);var oh=function(){Tc.call(this),this.edit=!0};ea(oh,Tc);var _r=function(){Si.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,15)},set:function(r){r?this.Ff=br(this.Ff,15):this.Ff=Nr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,16)},set:function(r){r?this.Ff=br(this.Ff,16):this.Ff=Nr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,17)},set:function(r){r?this.Ff=br(this.Ff,17):this.Ff=Nr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,26)},set:function(r){r?this.Ff=br(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var n,a=[];for(n in a.push("<<"),s)a.push("/"+n+" ("+td(r(s[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){us(r)==="object"&&(s=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(r){typeof r=="string"&&(s.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ea(_r,Si);var ch=function(){_r.call(this),this.pushButton=!0};ea(ch,_r);var Ec=function(){_r.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};ea(Ec,_r);var sg=function(){var t,s;Si.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(a){s=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),n)l.push("/"+i+" ("+td(a(n[i]))+")");return l.push(">>"),l.join(`
`)},set:function(a){us(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ea(sg,Si),Ec.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var r=this.Kids[s];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ec.prototype.createOption=function(t){var s=new sg;return s.Parent=this,s.optionName=t,this.Kids.push(s),_K.call(this.scope,s),s};var dh=function(){_r.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};ea(dh,_r);var Ro=function(){Si.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,13)},set:function(s){s?this.Ff=br(this.Ff,13):this.Ff=Nr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,21)},set:function(s){s?this.Ff=br(this.Ff,21):this.Ff=Nr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,23)},set:function(s){s?this.Ff=br(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,24)},set:function(s){s?this.Ff=br(this.Ff,24):this.Ff=Nr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,25)},set:function(s){s?this.Ff=br(this.Ff,25):this.Ff=Nr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,26)},set:function(s){s?this.Ff=br(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ea(Ro,Si);var uh=function(){Ro.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!yr(this.Ff,14)},set:function(t){t?this.Ff=br(this.Ff,14):this.Ff=Nr(this.Ff,14)}}),this.password=!0};ea(uh,Ro);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=j1(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+qt(bt.internal.getWidth(t))+" "+qt(bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+qt(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),s.stream=r.join(`
`),s},YesNormal:function(t){var s=_i(t);s.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=bt.internal.getHeight(t),l=bt.internal.getWidth(t),o=j1(t,t.caption);return a.push("1 g"),a.push("0 0 "+qt(l)+" "+qt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+qt(l-1)+" "+qt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+qt(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),s.stream=a.join(`
`),s},OffPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+qt(bt.internal.getWidth(t))+" "+qt(bt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=bt.RadioButton.Circle.YesNormal,s.D[t]=bt.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=_i(t);s.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=bt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ro(bt.internal.getWidth(t)/2)+" "+ro(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*bt.internal.Bezier_C).toFixed(5)),l=Number((n*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ro(bt.internal.getWidth(t)/2)+" "+ro(bt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ro(bt.internal.getWidth(t)/2)+" "+ro(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ro(bt.internal.getWidth(t)/2)+" "+ro(bt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),s.stream=r.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=bt.RadioButton.Cross.YesNormal,s.D[t]=bt.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=_i(t);s.scope=t.scope;var r=[],n=bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+qt(bt.internal.getWidth(t)-2)+" "+qt(bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(qt(n.x1.x)+" "+qt(n.x1.y)+" m"),r.push(qt(n.x2.x)+" "+qt(n.x2.y)+" l"),r.push(qt(n.x4.x)+" "+qt(n.x4.y)+" m"),r.push(qt(n.x3.x)+" "+qt(n.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},YesPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+qt(bt.internal.getWidth(t))+" "+qt(bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+qt(bt.internal.getWidth(t)-2)+" "+qt(bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(qt(r.x1.x)+" "+qt(r.x1.y)+" m"),n.push(qt(r.x2.x)+" "+qt(r.x2.y)+" l"),n.push(qt(r.x4.x)+" "+qt(r.x4.y)+" m"),n.push(qt(r.x3.x)+" "+qt(r.x3.y)+" l"),n.push("s"),n.push("Q"),s.stream=n.join(`
`),s},OffPushDown:function(t){var s=_i(t);s.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+qt(bt.internal.getWidth(t))+" "+qt(bt.internal.getHeight(t))+" re"),r.push("f"),s.stream=r.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+r}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=bt.internal.getWidth(t),r=bt.internal.getHeight(t),n=Math.min(s,r);return{x1:{x:(s-n)/2,y:(r-n)/2+n},x2:{x:(s-n)/2+n,y:(r-n)/2},x3:{x:(s-n)/2,y:(r-n)/2},x4:{x:(s-n)/2+n,y:(r-n)/2+n}}}},bt.internal.getWidth=function(t){var s=0;return us(t)==="object"&&(s=iS(t.Rect[2])),s},bt.internal.getHeight=function(t){var s=0;return us(t)==="object"&&(s=iS(t.Rect[3])),s};var _K=cr.addField=function(t){if(MK(this,t),!(t instanceof Si))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};cr.AcroFormChoiceField=Cc,cr.AcroFormListBox=Ac,cr.AcroFormComboBox=Tc,cr.AcroFormEditBox=oh,cr.AcroFormButton=_r,cr.AcroFormPushButton=ch,cr.AcroFormRadioButton=Ec,cr.AcroFormCheckBox=dh,cr.AcroFormTextField=Ro,cr.AcroFormPasswordField=uh,cr.AcroFormAppearance=bt,cr.AcroForm={ChoiceField:Cc,ListBox:Ac,ComboBox:Tc,EditBox:oh,Button:_r,PushButton:ch,RadioButton:Ec,CheckBox:dh,TextField:Ro,PasswordField:uh,Appearance:bt},Pt.AcroForm={ChoiceField:Cc,ListBox:Ac,ComboBox:Tc,EditBox:oh,Button:_r,PushButton:ch,RadioButton:Ec,CheckBox:dh,TextField:Ro,PasswordField:uh,Appearance:bt};var OK=Pt.AcroForm;function CI(t){return t.reduce(function(s,r,n){return s[r]=n,s},{})}(function(t){t.__addimage__={};var s="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(D,A){var I,L,F,B,R,$=s;if((A=A||s)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(T(D))for(R in r)for(F=r[R],I=0;I<F.length;I+=1){for(B=!0,L=0;L<F[I].length;L+=1)if(F[I][L]!==void 0&&F[I][L]!==D[L]){B=!1;break}if(B===!0){$=R;break}}else for(R in r)for(F=r[R],I=0;I<F.length;I+=1){for(B=!0,L=0;L<F[I].length;L+=1)if(F[I][L]!==void 0&&F[I][L]!==D.charCodeAt(L)){B=!1;break}if(B===!0){$=R;break}}return $===s&&A!==s&&($=A),$},a=function D(A){for(var I=this.internal.write,L=this.internal.putStream,F=(0,this.internal.getFilters)();F.indexOf("FlateEncode")!==-1;)F.splice(F.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:A.width}),B.push({key:"Height",value:A.height}),A.colorSpace===x.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===x.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var R="",$=0,U=A.transparency.length;$<U;$++)R+=A.transparency[$]+" "+A.transparency[$]+" ";B.push({key:"Mask",value:"["+R+"]"})}A.sMask!==void 0&&B.push({key:"SMask",value:A.objectId+1+" 0 R"});var W=A.filter!==void 0?["/"+A.filter]:void 0;if(L({data:A.data,additionalKeyValues:B,alreadyAppliedFilters:W,objectId:A.objectId}),I("endobj"),"sMask"in A&&A.sMask!==void 0){var q="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,_={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:q,data:A.sMask};"filter"in A&&(_.filter=A.filter),D.call(this,_)}if(A.colorSpace===x.INDEXED){var V=this.internal.newObject();L({data:C(new Uint8Array(A.palette)),objectId:V}),I("endobj")}},i=function(){var D=this.internal.collections.addImage_images;for(var A in D)a.call(this,D[A])},l=function(){var D,A=this.internal.collections.addImage_images,I=this.internal.write;for(var L in A)I("/I"+(D=A[L]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof t["process"+D.toUpperCase()]=="function"},m=function(D){return us(D)==="object"&&D.nodeType===1},h=function(D,A){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var I=""+D.getAttribute("src");if(I.indexOf("data:image/")===0)return lh(unescape(I).split("base64,").pop());var L=t.loadFile(I,!0);if(L!==void 0)return L}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var F;switch(A){case"PNG":F="image/png";break;case"WEBP":F="image/webp";break;case"JPEG":case"JPG":default:F="image/jpeg"}return lh(D.toDataURL(F,1).split("base64,").pop())}},p=function(D){var A=this.internal.collections.addImage_images;if(A){for(var I in A)if(D===A[I].alias)return A[I]}},b=function(D,A,I){return D||A||(D=-96,A=-96),D<0&&(D=-1*I.width*72/D/this.internal.scaleFactor),A<0&&(A=-1*I.height*72/A/this.internal.scaleFactor),D===0&&(D=A*I.width/I.height),A===0&&(A=D*I.height/I.width),[D,A]},j=function(D,A,I,L,F,B){var R=b.call(this,I,L,F),$=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,W=c.call(this);if(I=R[0],L=R[1],W[F.index]=F,B){B*=Math.PI/180;var q=Math.cos(B),_=Math.sin(B),V=function(G){return G.toFixed(4)},Q=[V(q),V(_),V(-1*_),V(q),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,$(D),U(A+L),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([$(I),"0","0",$(L),"0","0","cm"].join(" "))):this.internal.write([$(I),"0","0",$(L),$(D),U(A+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+F.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var f=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},g=t.__addimage__.sHashCode=function(D){var A,I,L=0;if(typeof D=="string")for(I=D.length,A=0;A<I;A++)L=(L<<5)-L+D.charCodeAt(A),L|=0;else if(T(D))for(I=D.byteLength/2,A=0;A<I;A++)L=(L<<5)-L+D[A],L|=0;return L},v=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var A=!0;return D.length===0&&(A=!1),D.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(A=!1),A},w=t.__addimage__.extractImageFromDataUrl=function(D){var A=(D=D||"").split("base64,"),I=null;if(A.length===2){var L=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(L)&&(I={mimeType:L[1],charset:L[2],data:A[1]})}return I},k=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return k()&&D instanceof ArrayBuffer};var T=t.__addimage__.isArrayBufferView=function(D){return k()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},S=t.__addimage__.binaryStringToUint8Array=function(D){for(var A=D.length,I=new Uint8Array(A),L=0;L<A;L++)I[L]=D.charCodeAt(L);return I},C=t.__addimage__.arrayBufferToBinaryString=function(D){for(var A="",I=T(D)?D:new Uint8Array(D),L=0;L<I.length;L+=8192)A+=String.fromCharCode.apply(null,I.subarray(L,L+8192));return A};t.addImage=function(){var D,A,I,L,F,B,R,$,U;if(typeof arguments[1]=="number"?(A=s,I=arguments[1],L=arguments[2],F=arguments[3],B=arguments[4],R=arguments[5],$=arguments[6],U=arguments[7]):(A=arguments[1],I=arguments[2],L=arguments[3],F=arguments[4],B=arguments[5],R=arguments[6],$=arguments[7],U=arguments[8]),us(D=arguments[0])==="object"&&!m(D)&&"imageData"in D){var W=D;D=W.imageData,A=W.format||A||s,I=W.x||I||0,L=W.y||L||0,F=W.w||W.width||F,B=W.h||W.height||B,R=W.alias||R,$=W.compression||$,U=W.rotation||W.angle||U}var q=this.internal.getFilters();if($===void 0&&q.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(I)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var _=E.call(this,D,A,R,$);return j.call(this,I,L,F,B,_,U),this};var E=function(D,A,I,L){var F,B,R;if(typeof D=="string"&&n(D)===s){D=unescape(D);var $=M(D,!1);($!==""||($=t.loadFile(D,!0))!==void 0)&&(D=$)}if(m(D)&&(D=h(D,A)),A=n(D,A),!u(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((R=I)==null||R.length===0)&&(I=function(U){return typeof U=="string"||T(U)?g(U):T(U.data)?g(U.data):null}(D)),(F=p.call(this,I))||(k()&&(D instanceof Uint8Array||A==="RGBA"||(B=D,D=S(D))),F=this["process"+A.toUpperCase()](D,d.call(this),I,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in t.image_compression?U:f.NONE}(L),B)),!F)throw new Error("An unknown error occurred whilst processing the image.");return F},M=t.__addimage__.convertBase64ToBinaryString=function(D,A){var I;A=typeof A!="boolean"||A;var L,F="";if(typeof D=="string"){L=(I=w(D))!==null?I.data:D;try{F=lh(L)}catch(B){if(A)throw v(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};t.getImageProperties=function(D){var A,I,L="";if(m(D)&&(D=h(D)),typeof D=="string"&&n(D)===s&&((L=M(D,!1))===""&&(L=t.loadFile(D)||""),D=L),I=n(D),!u(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!k()||D instanceof Uint8Array||(D=S(D)),!(A=this["process"+I.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=I,A}})(Pt.API),function(t){var s=function(r){if(r!==void 0&&r!="")return!0};Pt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,m=0;m<d.length&&!u;m++)switch((n=d[m]).type){case"link":(s(n.options.url)||s(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<d.length;h++){n=d[h];var p=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),f=this.internal.getEncryptor(j.objId),g=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(f(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(f(g))+") >>",j.content=i;var v=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(j.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(b(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var T=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+T+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,i,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+i)},options:l,type:"link"})},t.textWithLink=function(r,n,a,i){var l,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;l=Math.ceil(d*u)}else o=c,l=d;return this.text(r,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,o,l,i),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Pt.API),function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(j){return s[j.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},o=t.__arabicParser__.isArabicEndLetter=function(j){return l(j)&&i(j)&&s[j.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(j){return l(j)&&a.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return l(j)&&i(j)&&s[j.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return l(j)&&i(j)&&s[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return l(j)&&i(j)&&s[j.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return l(j)&&i(j)&&s[j.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(j){var x=0,f=r,g="",v=0;for(x=0;x<j.length;x+=1)f[j.charCodeAt(x)]!==void 0?(v++,typeof(f=f[j.charCodeAt(x)])=="number"&&(g+=String.fromCharCode(f),f=r,v=0),x===j.length-1&&(f=r,g+=j.charAt(x-(v-1)),x-=v-1,v=0)):(f=r,g+=j.charAt(x-v),x-=v,v=0);return g};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(j,x,f){return l(j)?i(j)===!1?-1:!d(j)||!l(x)&&!l(f)||!l(f)&&o(x)||o(j)&&!l(x)||o(j)&&c(x)||o(j)&&o(x)?0:u(j)&&l(x)&&!o(x)&&l(f)&&d(f)?3:o(j)||!l(f)?1:2:-1},p=function(j){var x=0,f=0,g=0,v="",w="",k="",T=(j=j||"").split("\\s+"),S=[];for(x=0;x<T.length;x+=1){for(S.push(""),f=0;f<T[x].length;f+=1)v=T[x][f],w=T[x][f-1],k=T[x][f+1],l(v)?(g=h(v,w,k),S[x]+=g!==-1?String.fromCharCode(s[v.charCodeAt(0)][g]):v):S[x]+=v;S[x]=m(S[x])}return S.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var j,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,f=[];if(Array.isArray(x)){var g=0;for(f=[],g=0;g<x.length;g+=1)Array.isArray(x[g])?f.push([p(x[g][0]),x[g][1],x[g][2]]):f.push([p(x[g])]);j=f}else j=p(x);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",b])}(Pt.API),Pt.API.autoPrint=function(t){var s;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})}return this},function(t){var s=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])}(Pt.API),function(t){var s={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(j){c=j}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(j){b=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),m=d.font||this.getFont(),h=d.scaleFactor||this.internal.scaleFactor,p=0,b=0,j=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var f=d.maxWidth;f>0?typeof c=="string"?c=this.splitTextToSize(c,f):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(v,w){return v.concat(x.splitTextToSize(w,f))},[])):c=Array.isArray(c)?c:[c];for(var g=0;g<c.length;g++)p<(j=this.getStringUnitWidth(c[g],{font:m})*u)&&(p=j);return p!==0&&(b=c.length),{w:p/=h,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,m=this.internal.__cell__.margins||s,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,m,h){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,b,j,x,f=[],g=[],v=[],w={},k={},T=[],S=[],C=(h=h||{}).autoSize||!1,E=h.printHeaders!==!1,M=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},s),A=typeof h.padding=="number"?h.padding:3,I=h.headerBackgroundColor||"#c8c8c8",L=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=L,this.setFontSize(M),m==null)g=f=Object.keys(u[0]),v=f.map(function(){return"left"});else if(Array.isArray(m)&&us(m[0])==="object")for(f=m.map(function(W){return W.name}),g=m.map(function(W){return W.prompt||W.name||""}),v=m.map(function(W){return W.align||"left"}),p=0;p<m.length;p+=1)k[m[p].name]=m[p].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(g=f=m,v=f.map(function(){return"left"}));if(C||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<f.length;p+=1){for(w[x=f[p]]=u.map(function(W){return W[x]}),this.setFont(void 0,"bold"),T.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=w[x],this.setFont(void 0,"normal"),j=0;j<b.length;j+=1)T.push(this.getTextDimensions(b[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[x]=Math.max.apply(null,T)+A+A,T=[]}if(E){var F={};for(p=0;p<f.length;p+=1)F[f[p]]={},F[f[p]].text=g[p],F[f[p]].align=v[p];var B=o.call(this,F,k);S=f.map(function(W){return new i(c,d,k[W],B,F[W].text,void 0,F[W].align)}),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var R=m.reduce(function(W,q){return W[q.name]=q.align,W},{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var $=o.call(this,u[p],k);for(j=0;j<f.length;j+=1){var U=u[p][f[j]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:j,data:U},this),l.call(this,new i(c,d,k[f[j]],$,U,p+2,R[f[j]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var b=c[p];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/h+u+u},this).reduce(function(p,b){return Math.max(p,b)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,u),this.setTextColor(b)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Pt.API);var AI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],y1=CI(TI),EI=[100,200,300,400,500,600,700,800,900],$K=CI(EI);function b1(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return AI[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),a=function(i){return typeof y1[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:s,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:s,style:[a,r,n].join(" ")}}}function lS(t,s,r,n){var a;for(a=r;a>=0&&a<s.length;a+=n)if(t[s[a]])return t[s[a]];for(a=r;a>=0&&a<s.length;a-=n)if(t[s[a]])return t[s[a]]}var BK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},oS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function cS(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function zK(t,s,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},BK,r.genericFontFamilies||{}),i=null,l=null,o=0;o<s.length;++o)if(a[(i=b1(s[o])).family]&&(i.family=a[i.family]),t.hasOwnProperty(i.family)){l=t[i.family];break}if(!(l=l||t[n]))throw new Error("Could not find a font-family for the rule '"+cS(i)+"' and default family '"+n+"'.");if(l=function(c,d){if(d[c])return d[c];var u=y1[c],m=u<=y1.normal?-1:1,h=lS(d,TI,u,m);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(i.stretch,l),l=function(c,d){if(d[c])return d[c];for(var u=AI[c],m=0;m<u.length;++m)if(d[u[m]])return d[u[m]];throw new Error("Could not find a matching font-style for "+c)}(i.style,l),!(l=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=$K[c],m=lS(d,EI,u,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(i.weight,l)))throw new Error("Failed to resolve a font for the rule '"+cS(i)+"'.");return l}function dS(t){return t.trimLeft()}function VK(t,s){for(var r=0;r<t.length;){if(t.charAt(r)===s)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function UK(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var Of,uS,mS,wj=["times"];(function(t){var s,r,n,a,i,l,o,c,d,u=function(_){return _=_||{},this.isStrokeTransparent=_.isStrokeTransparent||!1,this.strokeOpacity=_.strokeOpacity||1,this.strokeStyle=_.strokeStyle||"#000000",this.fillStyle=_.fillStyle||"#000000",this.isFillTransparent=_.isFillTransparent||!1,this.fillOpacity=_.fillOpacity||1,this.font=_.font||"10px sans-serif",this.textBaseline=_.textBaseline||"alphabetic",this.textAlign=_.textAlign||"left",this.lineWidth=_.lineWidth||1,this.lineJoin=_.lineJoin||"miter",this.lineCap=_.lineCap||"butt",this.path=_.path||[],this.transform=_.transform!==void 0?_.transform.clone():new c,this.globalCompositeOperation=_.globalCompositeOperation||"normal",this.globalAlpha=_.globalAlpha||1,this.clip_path=_.clip_path||[],this.currentPoint=_.currentPoint||new l,this.miterLimit=_.miterLimit||10,this.lastPoint=_.lastPoint||new l,this.lineDashOffset=_.lineDashOffset||0,this.lineDash=_.lineDash||[],this.margin=_.margin||[0,0,0,0],this.prevPageLastElemOffset=_.prevPageLastElemOffset||0,this.ignoreClearRect=typeof _.ignoreClearRect!="boolean"||_.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),s=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var m=function(_){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=_;Object.defineProperty(this,"pdf",{get:function(){return V}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Se){Q=!!Se}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(Se){G=!!Se}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(Se){isNaN(Se)||(Y=Se)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(Se){isNaN(Se)||(ne=Se)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Se){var he;typeof Se=="number"?he=[Se,Se,Se,Se]:((he=new Array(4))[0]=Se[0],he[1]=Se.length>=2?Se[1]:he[0],he[2]=Se.length>=3?Se[2]:he[0],he[3]=Se.length>=4?Se[3]:he[1]),d.margin=he}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Se){le=Se}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Se){oe=Se}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(Se){pe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Se){Se instanceof u&&(d=Se)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Se){d.path=Se}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(Se){je=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var he;he=h(Se),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var he=h(Se);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var we=null;function Re(Se,he){if(we===null){var ke=function(xe){var Pe=[];return Object.keys(xe).forEach(function(qe){xe[qe].forEach(function(lt){var at=null;switch(lt){case"bold":at={family:qe,weight:"bold"};break;case"italic":at={family:qe,style:"italic"};break;case"bolditalic":at={family:qe,weight:"bold",style:"italic"};break;case"":case"normal":at={family:qe}}at!==null&&(at.ref={name:qe,style:lt},Pe.push(at))})}),Pe}(Se.getFontList());we=function(xe){for(var Pe={},qe=0;qe<xe.length;++qe){var lt=b1(xe[qe]),at=lt.family,He=lt.stretch,Le=lt.style,We=lt.weight;Pe[at]=Pe[at]||{},Pe[at][He]=Pe[at][He]||{},Pe[at][He][Le]=Pe[at][He][Le]||{},Pe[at][He][Le][We]=lt}return Pe}(ke.concat(he))}return we}var ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return ye},set:function(Se){we=null,ye=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var he;if(this.ctx.font=Se,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var ke=he[1],xe=(he[2],he[3]),Pe=he[4],qe=(he[5],he[6]),lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(lt==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var at=function(Nt){var Lt,dt,hs=[],Kt=Nt.trim();if(Kt==="")return wj;if(Kt in oS)return[oS[Kt]];for(;Kt!=="";){switch(dt=null,Lt=(Kt=dS(Kt)).charAt(0)){case'"':case"'":dt=VK(Kt.substring(1),Lt);break;default:dt=UK(Kt)}if(dt===null||(hs.push(dt[0]),(Kt=dS(dt[1]))!==""&&Kt.charAt(0)!==","))return wj;Kt=Kt.replace(/^,/,"")}return hs}(qe);if(this.fontFaces){var He=zK(Re(this.pdf,this.fontFaces),at.map(function(Nt){return{family:Nt,stretch:"normal",weight:xe,style:ke}}));this.pdf.setFont(He.ref.name,He.ref.style)}else{var Le="";(xe==="bold"||parseInt(xe,10)>=700||ke==="bold")&&(Le="bold"),ke==="italic"&&(Le+="italic"),Le.length===0&&(Le="normal");for(var We="",ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<at.length;gt++){if(this.pdf.internal.getFont(at[gt],Le,{noFallback:!0,disableWarning:!0})!==void 0){We=at[gt];break}if(Le==="bolditalic"&&this.pdf.internal.getFont(at[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=at[gt],Le="bold";else if(this.pdf.internal.getFont(at[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=at[gt],Le="normal";break}}if(We===""){for(var Et=0;Et<at.length;Et++)if(ut[at[Et]]){We=ut[at[Et]];break}}We=We===""?"Times":We,this.pdf.setFont(We,Le)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};m.prototype.setLineDash=function(_){this.lineDash=_},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){w.call(this,"fill",!1)},m.prototype.stroke=function(){w.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(_,V){if(isNaN(_)||isNaN(V))throw Ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new l(_,V));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(_,V)},m.prototype.closePath=function(){var _=new l(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&us(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){_=new l(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(_.x,_.y)},m.prototype.lineTo=function(_,V){if(isNaN(_)||isNaN(V))throw Ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new l(_,V));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},m.prototype.quadraticCurveTo=function(_,V,Q,G){if(isNaN(Q)||isNaN(G)||isNaN(_)||isNaN(V))throw Ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new l(Q,G)),ne=this.ctx.transform.applyToPoint(new l(_,V));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(Y.x,Y.y)},m.prototype.bezierCurveTo=function(_,V,Q,G,Y,ne){if(isNaN(Y)||isNaN(ne)||isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G))throw Ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new l(Y,ne)),oe=this.ctx.transform.applyToPoint(new l(_,V)),pe=this.ctx.transform.applyToPoint(new l(Q,G));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:pe.x,y2:pe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new l(le.x,le.y)},m.prototype.arc=function(_,V,Q,G,Y,ne){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G)||isNaN(Y))throw Ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new l(_,V));_=le.x,V=le.y;var oe=this.ctx.transform.applyToPoint(new l(0,Q)),pe=this.ctx.transform.applyToPoint(new l(0,0));Q=Math.sqrt(Math.pow(oe.x-pe.x,2)+Math.pow(oe.y-pe.y,2))}Math.abs(Y-G)>=2*Math.PI&&(G=0,Y=2*Math.PI),this.path.push({type:"arc",x:_,y:V,radius:Q,startAngle:G,endAngle:Y,counterclockwise:ne})},m.prototype.arcTo=function(_,V,Q,G,Y){throw new Error("arcTo not implemented.")},m.prototype.rect=function(_,V,Q,G){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G))throw Ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(_,V),this.lineTo(_+Q,V),this.lineTo(_+Q,V+G),this.lineTo(_,V+G),this.lineTo(_,V),this.lineTo(_+Q,V),this.lineTo(_,V)},m.prototype.fillRect=function(_,V,Q,G){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G))throw Ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(_,V,Q,G),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},m.prototype.strokeRect=function(_,V,Q,G){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G))throw Ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(_,V,Q,G),this.stroke())},m.prototype.clearRect=function(_,V,Q,G){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G))throw Ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(_,V,Q,G))},m.prototype.save=function(_){_=typeof _!="boolean"||_;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),_){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},m.prototype.restore=function(_){_=typeof _!="boolean"||_;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(V),_&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(_){var V,Q,G,Y;if(_.isCanvasGradient===!0&&(_=_.getColor()),!_)return{r:0,g:0,b:0,a:0,style:_};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(_))V=0,Q=0,G=0,Y=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(_);if(ne!==null)V=parseInt(ne[1]),Q=parseInt(ne[2]),G=parseInt(ne[3]),Y=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(_))!==null)V=parseInt(ne[1]),Q=parseInt(ne[2]),G=parseInt(ne[3]),Y=parseFloat(ne[4]);else{if(Y=1,typeof _=="string"&&_.charAt(0)!=="#"){var le=new jI(_);_=le.ok?le.toHex():"#000000"}_.length===4?(V=_.substring(1,2),V+=V,Q=_.substring(2,3),Q+=Q,G=_.substring(3,4),G+=G):(V=_.substring(1,3),Q=_.substring(3,5),G=_.substring(5,7)),V=parseInt(V,16),Q=parseInt(Q,16),G=parseInt(G,16)}}return{r:V,g:Q,b:G,a:Y,style:_}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(_,V,Q,G){if(isNaN(V)||isNaN(Q)||typeof _!="string")throw Ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!p.call(this)){var Y=$(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;A.call(this,{text:_,x:V,y:Q,scale:ne,angle:Y,align:this.textAlign,maxWidth:G})}},m.prototype.strokeText=function(_,V,Q,G){if(isNaN(V)||isNaN(Q)||typeof _!="string")throw Ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){G=isNaN(G)?void 0:G;var Y=$(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;A.call(this,{text:_,x:V,y:Q,scale:ne,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:G})}},m.prototype.measureText=function(_){if(typeof _!="string")throw Ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,Q=this.pdf.internal.scaleFactor,G=V.internal.getFontSize(),Y=V.getStringUnitWidth(_)*G/V.internal.scaleFactor,ne=function(le){var oe=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new ne({width:Y*=Math.round(96*Q/72*1e4)/1e4})},m.prototype.scale=function(_,V){if(isNaN(_)||isNaN(V))throw Ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new c(_,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},m.prototype.rotate=function(_){if(isNaN(_))throw Ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(_),Math.sin(_),-Math.sin(_),Math.cos(_),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.translate=function(_,V){if(isNaN(_)||isNaN(V))throw Ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new c(1,0,0,1,_,V);this.ctx.transform=this.ctx.transform.multiply(Q)},m.prototype.transform=function(_,V,Q,G,Y,ne){if(isNaN(_)||isNaN(V)||isNaN(Q)||isNaN(G)||isNaN(Y)||isNaN(ne))throw Ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(_,V,Q,G,Y,ne);this.ctx.transform=this.ctx.transform.multiply(le)},m.prototype.setTransform=function(_,V,Q,G,Y,ne){_=isNaN(_)?1:_,V=isNaN(V)?0:V,Q=isNaN(Q)?0:Q,G=isNaN(G)?1:G,Y=isNaN(Y)?0:Y,ne=isNaN(ne)?0:ne,this.ctx.transform=new c(_,V,Q,G,Y,ne)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(_,V,Q,G,Y,ne,le,oe,pe){var je=this.pdf.getImageProperties(_),we=1,Re=1,ye=1,Se=1;G!==void 0&&oe!==void 0&&(ye=oe/G,Se=pe/Y,we=je.width/G*oe/G,Re=je.height/Y*pe/Y),ne===void 0&&(ne=V,le=Q,V=0,Q=0),G!==void 0&&oe===void 0&&(oe=G,pe=Y),G===void 0&&oe===void 0&&(oe=je.width,pe=je.height);for(var he,ke=this.ctx.transform.decompose(),xe=$(ke.rotate.shx),Pe=new c,qe=(Pe=(Pe=(Pe=Pe.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new o(ne-V*ye,le-Q*Se,G*we,Y*Re)),lt=x.call(this,qe),at=[],He=0;He<lt.length;He+=1)at.indexOf(lt[He])===-1&&at.push(lt[He]);if(v(at),this.autoPaging)for(var Le=at[0],We=at[at.length-1],ut=Le;ut<We+1;ut++){this.pdf.setPage(ut);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=ut===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=ut===1?0:Nt+(ut-2)*Lt;if(this.ctx.clip_path.length!==0){var hs=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(he,this.posX+this.margin[3],-dt+Et+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=hs}var Kt=JSON.parse(JSON.stringify(qe));Kt=g([Kt],this.posX+this.margin[3],-dt+Et+this.ctx.prevPageLastElemOffset)[0];var Lr=(ut>Le||ut<We)&&j.call(this);Lr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,Lt,null).clip().discardPath()),this.pdf.addImage(_,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,xe),Lr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(_,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,xe)};var x=function(_,V,Q){var G=[];V=V||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(_.type){default:case"mt":case"lt":G.push(Math.floor((_.y+Y)/Q)+1);break;case"arc":G.push(Math.floor((_.y+Y-_.radius)/Q)+1),G.push(Math.floor((_.y+Y+_.radius)/Q)+1);break;case"qct":var ne=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,_.x1,_.y1,_.x,_.y);G.push(Math.floor((ne.y+Y)/Q)+1),G.push(Math.floor((ne.y+ne.h+Y)/Q)+1);break;case"bct":var le=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,_.x1,_.y1,_.x2,_.y2,_.x,_.y);G.push(Math.floor((le.y+Y)/Q)+1),G.push(Math.floor((le.y+le.h+Y)/Q)+1);break;case"rect":G.push(Math.floor((_.y+Y)/Q)+1),G.push(Math.floor((_.y+_.h+Y)/Q)+1)}for(var oe=0;oe<G.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<G[oe];)f.call(this);return G},f=function(){var _=this.fillStyle,V=this.strokeStyle,Q=this.font,G=this.lineCap,Y=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=_,this.strokeStyle=V,this.font=Q,this.lineCap=G,this.lineWidth=Y,this.lineJoin=ne},g=function(_,V,Q){for(var G=0;G<_.length;G++)switch(_[G].type){case"bct":_[G].x2+=V,_[G].y2+=Q;case"qct":_[G].x1+=V,_[G].y1+=Q;case"mt":case"lt":case"arc":default:_[G].x+=V,_[G].y+=Q}return _},v=function(_){return _.sort(function(V,Q){return V-Q})},w=function(_,V){for(var Q,G,Y=this.fillStyle,ne=this.strokeStyle,le=this.lineCap,oe=this.lineWidth,pe=Math.abs(oe*this.ctx.transform.scaleX),je=this.lineJoin,we=JSON.parse(JSON.stringify(this.path)),Re=JSON.parse(JSON.stringify(this.path)),ye=[],Se=0;Se<Re.length;Se++)if(Re[Se].x!==void 0)for(var he=x.call(this,Re[Se]),ke=0;ke<he.length;ke+=1)ye.indexOf(he[ke])===-1&&ye.push(he[ke]);for(var xe=0;xe<ye.length;xe++)for(;this.pdf.internal.getNumberOfPages()<ye[xe];)f.call(this);if(v(ye),this.autoPaging)for(var Pe=ye[0],qe=ye[ye.length-1],lt=Pe;lt<qe+1;lt++){this.pdf.setPage(lt),this.fillStyle=Y,this.strokeStyle=ne,this.lineCap=le,this.lineWidth=pe,this.lineJoin=je;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=lt===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ut=lt===1?0:Le+(lt-2)*We;if(this.ctx.clip_path.length!==0){var gt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(Q,this.posX+this.margin[3],-ut+He+this.ctx.prevPageLastElemOffset),k.call(this,_,!0),this.path=gt}if(G=JSON.parse(JSON.stringify(we)),this.path=g(G,this.posX+this.margin[3],-ut+He+this.ctx.prevPageLastElemOffset),V===!1||lt===0){var Et=(lt>Pe||lt<qe)&&j.call(this);Et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,We,null).clip().discardPath()),k.call(this,_,V),Et&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=pe,k.call(this,_,V),this.lineWidth=oe;this.path=we},k=function(_,V){if((_!=="stroke"||V||!b.call(this))&&(_==="stroke"||V||!p.call(this))){for(var Q,G,Y=[],ne=this.path,le=0;le<ne.length;le++){var oe=ne[le];switch(oe.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:oe,deltas:[],abs:[]});break;case"lt":var pe=Y.length;if(ne[le-1]&&!isNaN(ne[le-1].x)&&(Q=[oe.x-ne[le-1].x,oe.y-ne[le-1].y],pe>0)){for(;pe>=0;pe--)if(Y[pe-1].close!==!0&&Y[pe-1].begin!==!0){Y[pe-1].deltas.push(Q),Y[pe-1].abs.push(oe);break}}break;case"bct":Q=[oe.x1-ne[le-1].x,oe.y1-ne[le-1].y,oe.x2-ne[le-1].x,oe.y2-ne[le-1].y,oe.x-ne[le-1].x,oe.y-ne[le-1].y],Y[Y.length-1].deltas.push(Q);break;case"qct":var je=ne[le-1].x+2/3*(oe.x1-ne[le-1].x),we=ne[le-1].y+2/3*(oe.y1-ne[le-1].y),Re=oe.x+2/3*(oe.x1-oe.x),ye=oe.y+2/3*(oe.y1-oe.y),Se=oe.x,he=oe.y;Q=[je-ne[le-1].x,we-ne[le-1].y,Re-ne[le-1].x,ye-ne[le-1].y,Se-ne[le-1].x,he-ne[le-1].y],Y[Y.length-1].deltas.push(Q);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(oe)}}G=V?null:_==="stroke"?"stroke":"fill";for(var ke=!1,xe=0;xe<Y.length;xe++)if(Y[xe].arc)for(var Pe=Y[xe].abs,qe=0;qe<Pe.length;qe++){var lt=Pe[qe];lt.type==="arc"?C.call(this,lt.x,lt.y,lt.radius,lt.startAngle,lt.endAngle,lt.counterclockwise,void 0,V,!ke):I.call(this,lt.x,lt.y),ke=!0}else if(Y[xe].close===!0)this.pdf.internal.out("h"),ke=!1;else if(Y[xe].begin!==!0){var at=Y[xe].start.x,He=Y[xe].start.y;L.call(this,Y[xe].deltas,at,He),ke=!0}G&&E.call(this,G),V&&M.call(this)}},T=function(_){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return _-Q;case"top":return _+V-Q;case"hanging":return _+V-2*Q;case"middle":return _+V/2-Q;case"ideographic":return _;case"alphabetic":default:return _}},S=function(_){return _+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var _=function(){};return _.colorStops=[],_.addColorStop=function(V,Q){this.colorStops.push([V,Q])},_.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},_.isCanvasGradient=!0,_},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(_,V,Q,G,Y,ne,le,oe,pe){for(var je=B.call(this,Q,G,Y,ne),we=0;we<je.length;we++){var Re=je[we];we===0&&(pe?D.call(this,Re.x1+_,Re.y1+V):I.call(this,Re.x1+_,Re.y1+V)),F.call(this,_,V,Re.x2,Re.y2,Re.x3,Re.y3,Re.x4,Re.y4)}oe?M.call(this):E.call(this,le)},E=function(_){switch(_){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(_,V){this.pdf.internal.out(r(_)+" "+n(V)+" m")},A=function(_){var V;switch(_.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var Q=this.pdf.getTextDimensions(_.text),G=T.call(this,_.y),Y=S.call(this,G)-Q.h,ne=this.ctx.transform.applyToPoint(new l(_.x,G)),le=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var pe,je,we,Re=this.ctx.transform.applyToRectangle(new o(_.x,G,Q.w,Q.h)),ye=oe.applyToRectangle(new o(_.x,Y,Q.w,Q.h)),Se=x.call(this,ye),he=[],ke=0;ke<Se.length;ke+=1)he.indexOf(Se[ke])===-1&&he.push(Se[ke]);if(v(he),this.autoPaging)for(var xe=he[0],Pe=he[he.length-1],qe=xe;qe<Pe+1;qe++){this.pdf.setPage(qe);var lt=qe===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],Le=He-this.margin[0],We=this.pdf.internal.pageSize.width-this.margin[1],ut=We-this.margin[3],gt=qe===1?0:at+(qe-2)*Le;if(this.ctx.clip_path.length!==0){var Et=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=g(pe,this.posX+this.margin[3],-1*gt+lt),k.call(this,"fill",!0),this.path=Et}var Nt=g([JSON.parse(JSON.stringify(ye))],this.posX+this.margin[3],-gt+lt+this.ctx.prevPageLastElemOffset)[0];_.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*_.scale),we=this.lineWidth,this.lineWidth=we*_.scale);var Lt=this.autoPaging!=="text";if(Lt||Nt.y+Nt.h<=He){if(Lt||Nt.y>=lt&&Nt.x<=We){var dt=Lt?_.text:this.pdf.splitTextToSize(_.text,_.maxWidth||We-Nt.x)[0],hs=g([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-gt+lt+this.ctx.prevPageLastElemOffset)[0],Kt=Lt&&(qe>xe||qe<Pe)&&j.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Le,null).clip().discardPath()),this.pdf.text(dt,hs.x,hs.y,{angle:_.angle,align:V,renderingMode:_.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else Nt.y<He&&(this.ctx.prevPageLastElemOffset+=He-Nt.y);_.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=we)}else _.scale>=.01&&(je=this.pdf.internal.getFontSize(),this.pdf.setFontSize(je*_.scale),we=this.lineWidth,this.lineWidth=we*_.scale),this.pdf.text(_.text,ne.x+this.posX,ne.y+this.posY,{angle:_.angle,align:V,renderingMode:_.renderingMode,maxWidth:_.maxWidth}),_.scale>=.01&&(this.pdf.setFontSize(je),this.lineWidth=we)},I=function(_,V,Q,G){Q=Q||0,G=G||0,this.pdf.internal.out(r(_+Q)+" "+n(V+G)+" l")},L=function(_,V,Q){return this.pdf.lines(_,V,Q,null,null)},F=function(_,V,Q,G,Y,ne,le,oe){this.pdf.internal.out([s(a(Q+_)),s(i(G+V)),s(a(Y+_)),s(i(ne+V)),s(a(le+_)),s(i(oe+V)),"c"].join(" "))},B=function(_,V,Q,G){for(var Y=2*Math.PI,ne=Math.PI/2;V>Q;)V-=Y;var le=Math.abs(Q-V);le<Y&&G&&(le=Y-le);for(var oe=[],pe=G?-1:1,je=V;le>1e-5;){var we=je+pe*Math.min(le,ne);oe.push(R.call(this,_,je,we)),le-=Math.abs(we-je),je=we}return oe},R=function(_,V,Q){var G=(Q-V)/2,Y=_*Math.cos(G),ne=_*Math.sin(G),le=Y,oe=-ne,pe=le*le+oe*oe,je=pe+le*Y+oe*ne,we=4/3*(Math.sqrt(2*pe*je)-je)/(le*ne-oe*Y),Re=le-we*oe,ye=oe+we*le,Se=Re,he=-ye,ke=G+V,xe=Math.cos(ke),Pe=Math.sin(ke);return{x1:_*Math.cos(V),y1:_*Math.sin(V),x2:Re*xe-ye*Pe,y2:Re*Pe+ye*xe,x3:Se*xe-he*Pe,y3:Se*Pe+he*xe,x4:_*Math.cos(Q),y4:_*Math.sin(Q)}},$=function(_){return 180*_/Math.PI},U=function(_,V,Q,G,Y,ne){var le=_+.5*(Q-_),oe=V+.5*(G-V),pe=Y+.5*(Q-Y),je=ne+.5*(G-ne),we=Math.min(_,Y,le,pe),Re=Math.max(_,Y,le,pe),ye=Math.min(V,ne,oe,je),Se=Math.max(V,ne,oe,je);return new o(we,ye,Re-we,Se-ye)},W=function(_,V,Q,G,Y,ne,le,oe){var pe,je,we,Re,ye,Se,he,ke,xe,Pe,qe,lt,at,He,Le=Q-_,We=G-V,ut=Y-Q,gt=ne-G,Et=le-Y,Nt=oe-ne;for(je=0;je<41;je++)xe=(he=(we=_+(pe=je/40)*Le)+pe*((ye=Q+pe*ut)-we))+pe*(ye+pe*(Y+pe*Et-ye)-he),Pe=(ke=(Re=V+pe*We)+pe*((Se=G+pe*gt)-Re))+pe*(Se+pe*(ne+pe*Nt-Se)-ke),je==0?(qe=xe,lt=Pe,at=xe,He=Pe):(qe=Math.min(qe,xe),lt=Math.min(lt,Pe),at=Math.max(at,xe),He=Math.max(He,Pe));return new o(Math.round(qe),Math.round(lt),Math.round(at-qe),Math.round(He-lt))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var _,V,Q=(_=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:_,lineDashOffset:V}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Pt.API),function(t){var s=function(i){var l,o,c,d,u,m,h,p,b,j;for(o=[],c=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(m=(u=((u=((u=((u=(u-(j=u%85))/85)-(b=u%85))/85)-(p=u%85))/85)-(h=u%85))/85)%85,o.push(m+33,h+33,p+33,b+33,j+33)):o.push(122);return function(x,f){for(var g=f;g>0;g--)x.pop()}(o,l.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var l,o,c,d,u,m=String,h="length",p=255,b="charCodeAt",j="slice",x="replace";for(i[j](-2),i=i[j](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],d=0,u=(i+=l="uuuuu"[j](i[h]%5||5))[h];u>d;d+=5)o=52200625*(i[b](d)-33)+614125*(i[b](d+1)-33)+7225*(i[b](d+2)-33)+85*(i[b](d+3)-33)+(i[b](d+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(f,g){for(var v=g;v>0;v--)f.pop()}(c,l[h]),m.fromCharCode.apply(m,c)},n=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var o="",c=0;c<i.length;c+=2)o+=String.fromCharCode("0x"+(i[c]+i[c+1]));return o},a=function(i){for(var l=new Uint8Array(i.length),o=i.length;o--;)l[o]=i.charCodeAt(o);return i=(l=f1(l)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var o=0,c=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),o=0;o<l.length;o+=1)switch(l[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=s(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[o]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Pt.API),function(t){t.loadFile=function(s,r,n){return function(a,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=function(c,d,u){var m=new XMLHttpRequest,h=0,p=function(b){var j=b.length,x=[],f=String.fromCharCode;for(h=0;h<j;h+=1)x.push(f(255&b.charCodeAt(h)));return x.join("")};if(m.open("GET",c,!d),m.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(m.onload=function(){m.status===200?u(p(this.responseText)):u(void 0)}),m.send(null),d&&m.status===200)return p(m.responseText)}(a,i,l)}catch{}return o}(s,r,n)},t.loadImageFile=t.loadFile}(Pt.API),function(t){function s(){return(Rt.html2canvas?Promise.resolve(Rt.html2canvas):Jx(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Rt.DOMPurify?Promise.resolve(Rt.DOMPurify):Jx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var o=us(l);return o==="undefined"?"undefined":o==="string"||l instanceof String?"string":o==="number"||l instanceof Number?"number":o==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(l,o){var c=document.createElement(l);for(var d in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[d]=o.style[d];return c},i=function l(o){var c=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,l,1,[l])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,o){return l.__proto__=o||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:l,dompurify:c})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(d,u){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||m.appendChild(c(h,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(s).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(s).then(function(o){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var p=d[h],b=p.src.find(function(j){return j.format==="truetype"});b&&c.addFont(b.url,p.ref.name,p.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),o(this.prop.container,m)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(l,o):this.outputPdf(l,o)},i.prototype.outputPdf=function(l,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,o)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var o=Object.keys(l||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=l[c]};switch(c){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[c]=l[c]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(l,o){return this.then(function(){var c=l in i.template.prop?this.prop[l]:this.opt[l];return o?o(c):c})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function o(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(l=l||Pt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:o(l.inner.width,l.k),height:o(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,o,c,d){return l!=null&&(this.progress.val=l),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,o,c,d){return this.setProgress(l?this.progress.val+l:null,o||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,o){var c=this;return this.thenCore(l,o,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,d),m}).then(d,u).then(function(m){return c.updateProgress(1),m})})},i.prototype.thenCore=function(l,o,c){c=c||Promise.prototype.then,l&&(l=l.bind(this)),o&&(o=o.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,l,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(l,o){return Promise.prototype.then.call(this,l,o)},i.prototype.thenList=function(l){var o=this;return l.forEach(function(c){o=o.thenCore(c)}),o},i.prototype.catch=function(l){l&&(l=l.bind(this));var o=Promise.prototype.catch.call(this,l);return i.convert(o,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Pt.getPageSize=function(l,o,c){if(us(l)==="object"){var d=l;l=d.orientation,o=d.unit||o,c=d.format||c}o=o||"mm",c=c||"a4",l=(""+(l||"P")).toLowerCase();var u,m=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,b=0,j=0;if(h.hasOwnProperty(m))b=h[m][1]/u,j=h[m][0]/u;else try{b=c[1],j=c[0]}catch{throw new Error("Invalid format: "+c)}if(l==="p"||l==="portrait")l="p",j>b&&(p=j,j=b,b=p);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",b>j&&(p=j,j=b,b=p)}return{width:j,height:b,unit:o,k:u,orientation:l}},t.html=function(l,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(b1):null;var c=new i(o);return o.worker?c:c.from(l).doCallback()}}(Pt.API),Pt.API.addJS=function(t){return mS=t,this.internal.events.subscribe("postPutResources",function(){Of=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Of+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Of!==void 0&&uS!==void 0&&this.internal.out("/Names <</JavaScript "+Of+" 0 R>>")}),this},function(t){var s;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var l=a[i],o=n.exec(l);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var m=r.internal.newObject();u.push(m);var h=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),s=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var l={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var l=n.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(Pt.API),function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,i,l,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(m){for(var h,p=256*m.charCodeAt(4)+m.charCodeAt(5),b=m.length,j={width:0,height:0,numcomponents:1},x=4;x<b;x+=2){if(x+=p,s.indexOf(m.charCodeAt(x+1))!==-1){h=256*m.charCodeAt(x+5)+m.charCodeAt(x+6),j={width:256*m.charCodeAt(x+7)+m.charCodeAt(x+8),height:h,numcomponents:m.charCodeAt(x+9)};break}p=256*m.charCodeAt(x+2)+m.charCodeAt(x+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:a}}return u}}(Pt.API);var Bd,$f,hS,pS,fS,qK=function(){var t,s,r;function n(i){var l,o,c,d,u,m,h,p,b,j,x,f,g,v;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(l=this.readUInt32(),b=(function(){var w,k;for(k=[],w=0;w<4;++w)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*u/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,l-=4),i=(m!=null?m.data:void 0)||this.imgData,f=0;0<=l?f<l:f>l;0<=l?++f:--f)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((j=c-this.transparency.indexed.length)>0)for(g=0;0<=j?g<j:g>j;0<=j?++g:--g)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":h=(x=this.read(l)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,x.slice(h+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(v=this.colorType)===4||v===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var l,o;for(o=[],l=0;0<=i?l<i:l>i;0<=i?++l:--l)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var l=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*l),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(m,h,p,b){var j,x,f,g,v,w,k,T,S,C,E,M,D,A,I,L,F,B,R,$,U,W=Math.ceil((d.width-m)/p),q=Math.ceil((d.height-h)/b),_=d.width==W&&d.height==q;for(A=l*W,M=_?o:new Uint8Array(A*q),w=i.length,D=0,x=0;D<q&&c<w;){switch(i[c++]){case 0:for(g=F=0;F<A;g=F+=1)M[x++]=i[c++];break;case 1:for(g=B=0;B<A;g=B+=1)j=i[c++],v=g<l?0:M[x-l],M[x++]=(j+v)%256;break;case 2:for(g=R=0;R<A;g=R+=1)j=i[c++],f=(g-g%l)/l,I=D&&M[(D-1)*A+f*l+g%l],M[x++]=(I+j)%256;break;case 3:for(g=$=0;$<A;g=$+=1)j=i[c++],f=(g-g%l)/l,v=g<l?0:M[x-l],I=D&&M[(D-1)*A+f*l+g%l],M[x++]=(j+Math.floor((v+I)/2))%256;break;case 4:for(g=U=0;U<A;g=U+=1)j=i[c++],f=(g-g%l)/l,v=g<l?0:M[x-l],D===0?I=L=0:(I=M[(D-1)*A+f*l+g%l],L=f&&M[(D-1)*A+(f-1)*l+g%l]),k=v+I-L,T=Math.abs(k-v),C=Math.abs(k-I),E=Math.abs(k-L),S=T<=C&&T<=E?v:C<=E?I:L,M[x++]=(j+S)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!_){var V=((h+D*b)*d.width+m)*l,Q=D*A;for(g=0;g<W;g+=1){for(var G=0;G<l;G+=1)o[V++]=M[Q++];V+=(p-1)*l}}D++}}return i=bK(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,l,o,c,d,u,m,h,p;for(o=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+o.length),c=0,i=0,l=m=0,h=o.length;m<h;l=m+=3)d[c++]=o[l],d[c++]=o[l+1],d[c++]=o[l+2],d[c++]=(p=u[i++])!=null?p:255;return d},n.prototype.copyToImageData=function(i,l){var o,c,d,u,m,h,p,b,j,x,f;if(c=this.colors,j=null,o=this.hasAlphaChannel,this.palette.length&&(j=(f=this._decodedPalette)!=null?f:this._decodedPalette=this.decodePalette(),c=4,o=!0),b=(d=i.data||i).length,m=j||l,u=h=0,c===1)for(;u<b;)p=j?4*l[u/4]:h,x=m[p++],d[u++]=x,d[u++]=x,d[u++]=x,d[u++]=o?m[p++]:255,h=p;else for(;u<b;)p=j?4*l[u/4]:h,d[u++]=m[p++],d[u++]=m[p++],d[u++]=m[p++],d[u++]=o?m[p++]:255,h=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Rt)==="[object Window]"){try{s=Rt.document.createElement("canvas"),r=s.getContext("2d")}catch{return!1}return!0}return!1};return a(),t=function(i){var l;if(a()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(l=new Image).src=s.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var l,o,c,d,u,m,h,p;if(this.animation){for(p=[],o=u=0,m=(h=this.animation.frames).length;u<m;o=++u)l=h[o],c=i.createImageData(l.width,l.height),d=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(c,d),l.imageData=c,p.push(l.image=t(c));return p}},n.prototype.renderFrame=function(i,l){var o,c,d;return o=(c=this.animation.frames)[l],d=c[l-1],l===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var l,o,c,d,u,m,h=this;return o=0,m=this.animation,d=m.numFrames,c=m.frames,u=m.numPlays,(l=function(){var p,b;if(p=o++%d,b=c[p],h.renderFrame(i,p),d>1&&o/d<u)return h.animation._timeout=setTimeout(l,b.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var l,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,l=i.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(o=l.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),l.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function HK(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[s++]|t[s++]<<8,n=t[s++]|t[s++]<<8,a=t[s++],i=a>>7,l=1<<(7&a)+1;t[s++],t[s++];var o=null,c=null;i&&(o=s,c=l,s+=3*l);var d=!0,u=[],m=0,h=null,p=0,b=null;for(this.width=r,this.height=n;d&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,b=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((D=t[s++])>=0))throw Error("Invalid block size");if(D===0)break;s+=D}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[s++];m=t[s++]|t[s++]<<8,h=t[s++],!(1&j)&&(h=null),p=j>>2&7,s++;break;case 254:for(;;){if(!((D=t[s++])>=0))throw Error("Invalid block size");if(D===0)break;s+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var x=t[s++]|t[s++]<<8,f=t[s++]|t[s++]<<8,g=t[s++]|t[s++]<<8,v=t[s++]|t[s++]<<8,w=t[s++],k=w>>6&1,T=1<<(7&w)+1,S=o,C=c,E=!1;w>>7&&(E=!0,S=s,C=T,s+=3*T);var M=s;for(s++;;){var D;if(!((D=t[s++])>=0))throw Error("Invalid block size");if(D===0)break;s+=D}u.push({x,y:f,width:g,height:v,has_local_palette:E,palette_offset:S,palette_size:C,data_offset:M,data_length:s-M,transparent_index:h,interlaced:!!k,delay:m,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(A){if(A<0||A>=u.length)throw new Error("Frame index out of range.");return u[A]},this.decodeAndBlitFrameBGRA=function(A,I){var L=this.frameInfo(A),F=L.width*L.height,B=new Uint8Array(F);xS(t,L.data_offset,B,F);var R=L.palette_offset,$=L.transparent_index;$===null&&($=256);var U=L.width,W=r-U,q=U,_=4*(L.y*r+L.x),V=4*((L.y+L.height)*r+L.x),Q=_,G=4*W;L.interlaced===!0&&(G+=4*r*7);for(var Y=8,ne=0,le=B.length;ne<le;++ne){var oe=B[ne];if(q===0&&(q=U,(Q+=G)>=V&&(G=4*W+4*r*(Y-1),Q=_+(U+W)*(Y<<1),Y>>=1)),oe===$)Q+=4;else{var pe=t[R+3*oe],je=t[R+3*oe+1],we=t[R+3*oe+2];I[Q++]=we,I[Q++]=je,I[Q++]=pe,I[Q++]=255}--q}},this.decodeAndBlitFrameRGBA=function(A,I){var L=this.frameInfo(A),F=L.width*L.height,B=new Uint8Array(F);xS(t,L.data_offset,B,F);var R=L.palette_offset,$=L.transparent_index;$===null&&($=256);var U=L.width,W=r-U,q=U,_=4*(L.y*r+L.x),V=4*((L.y+L.height)*r+L.x),Q=_,G=4*W;L.interlaced===!0&&(G+=4*r*7);for(var Y=8,ne=0,le=B.length;ne<le;++ne){var oe=B[ne];if(q===0&&(q=U,(Q+=G)>=V&&(G=4*W+4*r*(Y-1),Q=_+(U+W)*(Y<<1),Y>>=1)),oe===$)Q+=4;else{var pe=t[R+3*oe],je=t[R+3*oe+1],we=t[R+3*oe+2];I[Q++]=pe,I[Q++]=je,I[Q++]=we,I[Q++]=255}--q}}}function xS(t,s,r,n){for(var a=t[s++],i=1<<a,l=i+1,o=l+1,c=a+1,d=(1<<c)-1,u=0,m=0,h=0,p=t[s++],b=new Int32Array(4096),j=null;;){for(;u<16&&p!==0;)m|=t[s++]<<u,u+=8,p===1?p=t[s++]:--p;if(u<c)break;var x=m&d;if(m>>=c,u-=c,x!==i){if(x===l)break;for(var f=x<o?x:j,g=0,v=f;v>i;)v=b[v]>>8,++g;var w=v;if(h+g+(f!==x?1:0)>n)return void Ls.log("Warning, gif stream longer than expected.");r[h++]=w;var k=h+=g;for(f!==x&&(r[h++]=w),v=f;g--;)v=b[v],r[--k]=255&v,v>>=8;j!==null&&o<4096&&(b[o++]=j<<8|w,o>=d+1&&c<12&&(++c,d=d<<1|1)),j=x}else o=l+1,d=(1<<(c=a+1))-1,j=null}return h!==n&&Ls.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sj(t){var s,r,n,a,i,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),m=new Array(65535),h=new Array(65535),p=new Array(64),b=new Array(64),j=[],x=0,f=7,g=new Array(64),v=new Array(64),w=new Array(64),k=new Array(256),T=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(_,V){for(var Q=0,G=0,Y=new Array,ne=1;ne<=16;ne++){for(var le=1;le<=_[ne];le++)Y[V[G]]=[],Y[V[G]][0]=Q,Y[V[G]][1]=ne,G++,Q++;Q*=2}return Y}function R(_){for(var V=_[0],Q=_[1]-1;Q>=0;)V&1<<Q&&(x|=1<<f),Q--,--f<0&&(x==255?($(255),$(0)):$(x),f=7,x=0)}function $(_){j.push(_)}function U(_){$(_>>8&255),$(255&_)}function W(_,V,Q,G,Y){for(var ne,le=Y[0],oe=Y[240],pe=function(Pe,qe){var lt,at,He,Le,We,ut,gt,Et,Nt,Lt,dt=0;for(Nt=0;Nt<8;++Nt){lt=Pe[dt],at=Pe[dt+1],He=Pe[dt+2],Le=Pe[dt+3],We=Pe[dt+4],ut=Pe[dt+5],gt=Pe[dt+6];var hs=lt+(Et=Pe[dt+7]),Kt=lt-Et,Lr=at+gt,ps=at-gt,Ps=He+ut,Ln=He-ut,ns=Le+We,rl=Le-We,ar=hs+ns,Ya=hs-ns,nl=Lr+Ps,ir=Lr-Ps;Pe[dt]=ar+nl,Pe[dt+4]=ar-nl;var Vt=.707106781*(ir+Ya);Pe[dt+2]=Ya+Vt,Pe[dt+6]=Ya-Vt;var bs=.382683433*((ar=rl+Ln)-(ir=ps+Kt)),Xo=.5411961*ar+bs,Yr=1.306562965*ir+bs,Ai=.707106781*(nl=Ln+ps),Ti=Kt+Ai,It=Kt-Ai;Pe[dt+5]=It+Xo,Pe[dt+3]=It-Xo,Pe[dt+1]=Ti+Yr,Pe[dt+7]=Ti-Yr,dt+=8}for(dt=0,Nt=0;Nt<8;++Nt){lt=Pe[dt],at=Pe[dt+8],He=Pe[dt+16],Le=Pe[dt+24],We=Pe[dt+32],ut=Pe[dt+40],gt=Pe[dt+48];var Qa=lt+(Et=Pe[dt+56]),Ei=lt-Et,Fn=at+gt,Fr=at-gt,Cr=He+ut,ta=He-ut,sd=Le+We,al=Le-We,Za=Qa+sd,Ja=Qa-sd,Xa=Fn+Cr,Pi=Fn-Cr;Pe[dt]=Za+Xa,Pe[dt+32]=Za-Xa;var Aa=.707106781*(Pi+Ja);Pe[dt+16]=Ja+Aa,Pe[dt+48]=Ja-Aa;var Di=.382683433*((Za=al+ta)-(Pi=Fr+Ei)),ec=.5411961*Za+Di,rd=1.306562965*Pi+Di,nd=.707106781*(Xa=ta+Fr),ad=Ei+nd,id=Ei-nd;Pe[dt+40]=id+ec,Pe[dt+24]=id-ec,Pe[dt+8]=ad+rd,Pe[dt+56]=ad-rd,dt++}for(Nt=0;Nt<64;++Nt)Lt=Pe[Nt]*qe[Nt],p[Nt]=Lt>0?Lt+.5|0:Lt-.5|0;return p}(_,V),je=0;je<64;++je)b[S[je]]=pe[je];var we=b[0]-Q;Q=b[0],we==0?R(G[0]):(R(G[h[ne=32767+we]]),R(m[ne]));for(var Re=63;Re>0&&b[Re]==0;)Re--;if(Re==0)return R(le),Q;for(var ye,Se=1;Se<=Re;){for(var he=Se;b[Se]==0&&Se<=Re;)++Se;var ke=Se-he;if(ke>=16){ye=ke>>4;for(var xe=1;xe<=ye;++xe)R(oe);ke&=15}ne=32767+b[Se],R(Y[(ke<<4)+h[ne]]),R(m[ne]),Se++}return Re!=63&&R(le),Q}function q(_){_=Math.min(Math.max(_,1),100),i!=_&&(function(V){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var Y=l((Q[G]*V+50)/100);Y=Math.min(Math.max(Y,1),255),o[S[G]]=Y}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var oe=l((ne[le]*V+50)/100);oe=Math.min(Math.max(oe,1),255),c[S[le]]=oe}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,we=0;we<8;we++)for(var Re=0;Re<8;Re++)d[je]=1/(o[S[je]]*pe[we]*pe[Re]*8),u[je]=1/(c[S[je]]*pe[we]*pe[Re]*8),je++}(_<50?Math.floor(5e3/_):Math.floor(200-2*_)),i=_)}this.encode=function(_,V){V&&q(V),j=new Array,x=0,f=7,U(65496),U(65504),U(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),U(1),U(1),$(0),$(0),function(){U(65499),U(132),$(0);for(var at=0;at<64;at++)$(o[at]);$(1);for(var He=0;He<64;He++)$(c[He])}(),function(at,He){U(65472),U(17),$(8),U(He),U(at),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(_.width,_.height),function(){U(65476),U(418),$(0);for(var at=0;at<16;at++)$(C[at+1]);for(var He=0;He<=11;He++)$(E[He]);$(16);for(var Le=0;Le<16;Le++)$(M[Le+1]);for(var We=0;We<=161;We++)$(D[We]);$(1);for(var ut=0;ut<16;ut++)$(A[ut+1]);for(var gt=0;gt<=11;gt++)$(I[gt]);$(17);for(var Et=0;Et<16;Et++)$(L[Et+1]);for(var Nt=0;Nt<=161;Nt++)$(F[Nt])}(),U(65498),U(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var Q=0,G=0,Y=0;x=0,f=7,this.encode.displayName="_encode_";for(var ne,le,oe,pe,je,we,Re,ye,Se,he=_.data,ke=_.width,xe=_.height,Pe=4*ke,qe=0;qe<xe;){for(ne=0;ne<Pe;){for(je=Pe*qe+ne,Re=-1,ye=0,Se=0;Se<64;Se++)we=je+(ye=Se>>3)*Pe+(Re=4*(7&Se)),qe+ye>=xe&&(we-=Pe*(qe+1+ye-xe)),ne+Re>=Pe&&(we-=ne+Re-Pe+4),le=he[we++],oe=he[we++],pe=he[we++],g[Se]=(T[le]+T[oe+256>>0]+T[pe+512>>0]>>16)-128,v[Se]=(T[le+768>>0]+T[oe+1024>>0]+T[pe+1280>>0]>>16)-128,w[Se]=(T[le+1280>>0]+T[oe+1536>>0]+T[pe+1792>>0]>>16)-128;Q=W(g,d,Q,s,n),G=W(v,u,G,r,a),Y=W(w,u,Y,r,a),ne+=32}qe+=8}if(f>=0){var lt=[];lt[1]=f+1,lt[0]=(1<<f+1)-1,R(lt)}return U(65497),new Uint8Array(j)},t=t||50,function(){for(var _=String.fromCharCode,V=0;V<256;V++)k[V]=_(V)}(),s=B(C,E),r=B(A,I),n=B(M,D),a=B(L,F),function(){for(var _=1,V=2,Q=1;Q<=15;Q++){for(var G=_;G<V;G++)h[32767+G]=Q,m[32767+G]=[],m[32767+G][1]=Q,m[32767+G][0]=G;for(var Y=-(V-1);Y<=-_;Y++)h[32767+Y]=Q,m[32767+Y]=[],m[32767+Y][1]=Q,m[32767+Y][0]=V-1+Y;_<<=1,V<<=1}}(),function(){for(var _=0;_<256;_++)T[_]=19595*_,T[_+256>>0]=38470*_,T[_+512>>0]=7471*_+32768,T[_+768>>0]=-11059*_,T[_+1024>>0]=-21709*_,T[_+1280>>0]=32768*_+8421375,T[_+1536>>0]=-27439*_,T[_+1792>>0]=-5329*_}(),q(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oi(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function gS(t){function s(C){if(!C)throw Error("assert :P")}function r(C,E,M){for(var D=0;4>D;D++)if(C[E+D]!=M.charCodeAt(D))return!0;return!1}function n(C,E,M,D,A){for(var I=0;I<A;I++)C[E+I]=M[D+I]}function a(C,E,M,D){for(var A=0;A<D;A++)C[E+A]=M}function i(C){return new Int32Array(C)}function l(C,E){for(var M=[],D=0;D<C;D++)M.push(new E);return M}function o(C,E){var M=[];return function D(A,I,L){for(var F=L[I],B=0;B<F&&(A.push(L.length>I+1?[]:new E),!(L.length<I+1));B++)D(A[B],I+1,L)}(M,0,C),M}var c=function(){var C=this;function E(N,P){for(var z=1<<P-1>>>0;N&z;)z>>>=1;return z?(N&z-1)+z:N}function M(N,P,z,K,se){s(!(K%z));do N[P+(K-=z)]=se;while(0<K)}function D(N,P,z,K,se){if(s(2328>=se),512>=se)var ae=i(512);else if((ae=i(se))==null)return 0;return function(ie,ue,me,fe,Ne,Me){var _e,Ie,Ze=ue,Ve=1<<me,Ce=i(16),Te=i(16);for(s(Ne!=0),s(fe!=null),s(ie!=null),s(0<me),Ie=0;Ie<Ne;++Ie){if(15<fe[Ie])return 0;++Ce[fe[Ie]]}if(Ce[0]==Ne)return 0;for(Te[1]=0,_e=1;15>_e;++_e){if(Ce[_e]>1<<_e)return 0;Te[_e+1]=Te[_e]+Ce[_e]}for(Ie=0;Ie<Ne;++Ie)_e=fe[Ie],0<fe[Ie]&&(Me[Te[_e]++]=Ie);if(Te[15]==1)return(fe=new A).g=0,fe.value=Me[0],M(ie,Ze,1,Ve,fe),Ve;var Ke,Xe=-1,Qe=Ve-1,ft=0,mt=1,Dt=1,ht=1<<me;for(Ie=0,_e=1,Ne=2;_e<=me;++_e,Ne<<=1){if(mt+=Dt<<=1,0>(Dt-=Ce[_e]))return 0;for(;0<Ce[_e];--Ce[_e])(fe=new A).g=_e,fe.value=Me[Ie++],M(ie,Ze+ft,Ne,ht,fe),ft=E(ft,_e)}for(_e=me+1,Ne=2;15>=_e;++_e,Ne<<=1){if(mt+=Dt<<=1,0>(Dt-=Ce[_e]))return 0;for(;0<Ce[_e];--Ce[_e]){if(fe=new A,(ft&Qe)!=Xe){for(Ze+=ht,Ke=1<<(Xe=_e)-me;15>Xe&&!(0>=(Ke-=Ce[Xe]));)++Xe,Ke<<=1;Ve+=ht=1<<(Ke=Xe-me),ie[ue+(Xe=ft&Qe)].g=Ke+me,ie[ue+Xe].value=Ze-ue-Xe}fe.g=_e-me,fe.value=Me[Ie++],M(ie,Ze+(ft>>me),Ne,ht,fe),ft=E(ft,_e)}}return mt!=2*Te[15]-1?0:Ve}(N,P,z,K,se,ae)}function A(){this.value=this.g=0}function I(){this.value=this.g=0}function L(){this.G=l(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Qr,I)}function F(N,P,z,K){s(N!=null),s(P!=null),s(2147483648>K),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=P,N.pa=z,N.Jd=P,N.Yc=z+K,N.Zc=4<=K?z+K-4+1:z,ne(N)}function B(N,P){for(var z=0;0<P--;)z|=oe(N,128)<<P;return z}function R(N,P){var z=B(N,P);return le(N)?-z:z}function $(N,P,z,K){var se,ae=0;for(s(N!=null),s(P!=null),s(4294967288>K),N.Sb=K,N.Ra=0,N.u=0,N.h=0,4<K&&(K=4),se=0;se<K;++se)ae+=P[z+se]<<8*se;N.Ra=ae,N.bb=K,N.oa=P,N.pa=z}function U(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<bd-8>>>0,++N.bb,N.u-=8;Q(N)&&(N.h=1,N.u=0)}function W(N,P){if(s(0<=P),!N.h&&P<=yd){var z=V(N)&jd[P];return N.u+=P,U(N),z}return N.h=1,N.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(N){return N.Ra>>>(N.u&bd-1)>>>0}function Q(N){return s(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>bd}function G(N,P){N.u=P,N.h=Q(N)}function Y(N){N.u>=dm&&(s(N.u>=dm),U(N))}function ne(N){s(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(s(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function le(N){return B(N,1)}function oe(N,P){var z=N.Ca;0>N.b&&ne(N);var K=N.b,se=z*P>>>8,ae=(N.I>>>K>se)+0;for(ae?(z-=se,N.I-=se+1<<K>>>0):z=se+1,K=z,se=0;256<=K;)se+=8,K>>=8;return K=7^se+Mn[K],N.b-=K,N.Ca=(z<<K)-1,ae}function pe(N,P,z){N[P+0]=z>>24&255,N[P+1]=z>>16&255,N[P+2]=z>>8&255,N[P+3]=z>>0&255}function je(N,P){return N[P+0]<<0|N[P+1]<<8}function we(N,P){return je(N,P)|N[P+2]<<16}function Re(N,P){return je(N,P)|je(N,P+2)<<16}function ye(N,P){var z=1<<P;return s(N!=null),s(0<P),N.X=i(z),N.X==null?0:(N.Mb=32-P,N.Xa=P,1)}function Se(N,P){s(N!=null),s(P!=null),s(N.Xa==P.Xa),n(P.X,0,N.X,0,1<<P.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function ke(N,P,z,K){s(z!=null),s(K!=null);var se=z[0],ae=K[0];return se==0&&(se=(N*ae+P/2)/P),ae==0&&(ae=(P*se+N/2)/N),0>=se||0>=ae?0:(z[0]=se,K[0]=ae,1)}function xe(N,P){return N+(1<<P)-1>>>P}function Pe(N,P){return((4278255360&N)+(4278255360&P)>>>0&4278255360)+((16711935&N)+(16711935&P)>>>0&16711935)>>>0}function qe(N,P){C[P]=function(z,K,se,ae,ie,ue,me){var fe;for(fe=0;fe<ie;++fe){var Ne=C[N](ue[me+fe-1],se,ae+fe);ue[me+fe]=Pe(z[K+fe],Ne)}}}function lt(){this.ud=this.hd=this.jd=0}function at(N,P){return((4278124286&(N^P))>>>1)+(N&P)>>>0}function He(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Le(N,P){return He(N+(N-P+.5>>1))}function We(N,P,z){return Math.abs(P-z)-Math.abs(N-z)}function ut(N,P,z,K,se,ae,ie){for(K=ae[ie-1],z=0;z<se;++z)ae[ie+z]=K=Pe(N[P+z],K)}function gt(N,P,z,K,se){var ae;for(ae=0;ae<z;++ae){var ie=N[P+ae],ue=ie>>8&255,me=16711935&(me=(me=16711935&ie)+((ue<<16)+ue));K[se+ae]=(4278255360&ie)+me>>>0}}function Et(N,P){P.jd=N>>0&255,P.hd=N>>8&255,P.ud=N>>16&255}function Nt(N,P,z,K,se,ae){var ie;for(ie=0;ie<K;++ie){var ue=P[z+ie],me=ue>>>8,fe=ue,Ne=255&(Ne=(Ne=ue>>>16)+((N.jd<<24>>24)*(me<<24>>24)>>>5));fe=255&(fe=(fe=fe+((N.hd<<24>>24)*(me<<24>>24)>>>5))+((N.ud<<24>>24)*(Ne<<24>>24)>>>5)),se[ae+ie]=(4278255360&ue)+(Ne<<16)+fe}}function Lt(N,P,z,K,se){C[P]=function(ae,ie,ue,me,fe,Ne,Me,_e,Ie){for(me=Me;me<_e;++me)for(Me=0;Me<Ie;++Me)fe[Ne++]=se(ue[K(ae[ie++])])},C[N]=function(ae,ie,ue,me,fe,Ne,Me){var _e=8>>ae.b,Ie=ae.Ea,Ze=ae.K[0],Ve=ae.w;if(8>_e)for(ae=(1<<ae.b)-1,Ve=(1<<_e)-1;ie<ue;++ie){var Ce,Te=0;for(Ce=0;Ce<Ie;++Ce)Ce&ae||(Te=K(me[fe++])),Ne[Me++]=se(Ze[Te&Ve]),Te>>=_e}else C["VP8LMapColor"+z](me,fe,Ze,Ve,Ne,Me,ie,ue,Ie)}}function dt(N,P,z,K,se){for(z=P+z;P<z;){var ae=N[P++];K[se++]=ae>>16&255,K[se++]=ae>>8&255,K[se++]=ae>>0&255}}function hs(N,P,z,K,se){for(z=P+z;P<z;){var ae=N[P++];K[se++]=ae>>16&255,K[se++]=ae>>8&255,K[se++]=ae>>0&255,K[se++]=ae>>24&255}}function Kt(N,P,z,K,se){for(z=P+z;P<z;){var ae=(ie=N[P++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;K[se++]=ae,K[se++]=ie}}function Lr(N,P,z,K,se){for(z=P+z;P<z;){var ae=(ie=N[P++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;K[se++]=ae,K[se++]=ie}}function ps(N,P,z,K,se){for(z=P+z;P<z;){var ae=N[P++];K[se++]=ae>>0&255,K[se++]=ae>>8&255,K[se++]=ae>>16&255}}function Ps(N,P,z,K,se,ae){if(ae==0)for(z=P+z;P<z;)pe(K,((ae=N[P++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),se+=32;else n(K,se,N,P,z)}function Ln(N,P){C[P][0]=C[N+"0"],C[P][1]=C[N+"1"],C[P][2]=C[N+"2"],C[P][3]=C[N+"3"],C[P][4]=C[N+"4"],C[P][5]=C[N+"5"],C[P][6]=C[N+"6"],C[P][7]=C[N+"7"],C[P][8]=C[N+"8"],C[P][9]=C[N+"9"],C[P][10]=C[N+"10"],C[P][11]=C[N+"11"],C[P][12]=C[N+"12"],C[P][13]=C[N+"13"],C[P][14]=C[N+"0"],C[P][15]=C[N+"0"]}function ns(N){return N==Bv||N==zv||N==Vp||N==Vv}function rl(){this.eb=[],this.size=this.A=this.fb=0}function ar(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ya(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rl,this.f.kb=new ar,this.sd=null}function nl(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ir(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function bs(N,P){var z=N.T,K=P.ba.f.RGBA,se=K.eb,ae=K.fb+N.ka*K.A,ie=ka[P.ba.S],ue=N.y,me=N.O,fe=N.f,Ne=N.N,Me=N.ea,_e=N.W,Ie=P.cc,Ze=P.dc,Ve=P.Mc,Ce=P.Nc,Te=N.ka,Ke=N.ka+N.T,Xe=N.U,Qe=Xe+1>>1;for(Te==0?ie(ue,me,null,null,fe,Ne,Me,_e,fe,Ne,Me,_e,se,ae,null,null,Xe):(ie(P.ec,P.fc,ue,me,Ie,Ze,Ve,Ce,fe,Ne,Me,_e,se,ae-K.A,se,ae,Xe),++z);Te+2<Ke;Te+=2)Ie=fe,Ze=Ne,Ve=Me,Ce=_e,Ne+=N.Rc,_e+=N.Rc,ae+=2*K.A,ie(ue,(me+=2*N.fa)-N.fa,ue,me,Ie,Ze,Ve,Ce,fe,Ne,Me,_e,se,ae-K.A,se,ae,Xe);return me+=N.fa,N.j+Ke<N.o?(n(P.ec,P.fc,ue,me,Xe),n(P.cc,P.dc,fe,Ne,Qe),n(P.Mc,P.Nc,Me,_e,Qe),z--):1&Ke||ie(ue,me,null,null,fe,Ne,Me,_e,fe,Ne,Me,_e,se,ae+K.A,null,null,Xe),z}function Xo(N,P,z){var K=N.F,se=[N.J];if(K!=null){var ae=N.U,ie=P.ba.S,ue=ie==zp||ie==Vp;P=P.ba.f.RGBA;var me=[0],fe=N.ka;me[0]=N.T,N.Kb&&(fe==0?--me[0]:(--fe,se[0]-=N.width),N.j+N.ka+N.T==N.o&&(me[0]=N.o-N.j-fe));var Ne=P.eb;fe=P.fb+fe*P.A,N=_s(K,se[0],N.width,ae,me,Ne,fe+(ue?0:3),P.A),s(z==me),N&&ns(ie)&&Da(Ne,fe,ue,ae,me,P.A)}return 0}function Yr(N){var P=N.ma,z=P.ba.S,K=11>z,se=z==$p||z==Bp||z==zp||z==$v||z==12||ns(z);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!om(P.Oa,N,se?11:12))return 0;if(se&&ns(z)&&et(),N.da)alert("todo:use_scaling");else{if(K){if(P.Ib=Vt,N.Kb){if(z=N.U+1>>1,P.memory=i(N.U+2*z),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+N.U,P.Mc=P.cc,P.Nc=P.dc+z,P.Ib=bs,et()}}else alert("todo:EmitYUV");se&&(P.Jb=Xo,K&&Fe())}if(K&&!Xb){for(N=0;256>N;++N)tk[N]=89858*(N-128)+qp>>Up,nk[N]=-22014*(N-128)+qp,rk[N]=-45773*(N-128),sk[N]=113618*(N-128)+qp>>Up;for(N=gm;N<Hv;++N)P=76283*(N-16)+qp>>Up,ak[N-gm]=sa(P,255),ik[N-gm]=sa(P+8>>4,15);Xb=1}return 1}function Ai(N){var P=N.ma,z=N.U,K=N.T;return s(!(1&N.ka)),0>=z||0>=K?0:(z=P.Ib(N,P),P.Jb!=null&&P.Jb(N,P,z),P.Dc+=z,1)}function Ti(N){N.ma.memory=null}function It(N,P,z,K){return W(N,8)!=47?0:(P[0]=W(N,14)+1,z[0]=W(N,14)+1,K[0]=W(N,1),W(N,3)!=0?0:!N.h)}function Qa(N,P){if(4>N)return N+1;var z=N-2>>1;return(2+(1&N)<<z)+W(P,z)+1}function Ei(N,P){return 120<P?P-120:1<=(z=((z=zI[P-1])>>4)*N+(8-(15&z)))?z:1;var z}function Fn(N,P,z){var K=V(z),se=N[P+=255&K].g-8;return 0<se&&(G(z,z.u+8),K=V(z),P+=N[P].value,P+=K&(1<<se)-1),G(z,z.u+N[P].g),N[P].value}function Fr(N,P,z){return z.g+=N.g,z.value+=N.value<<P>>>0,s(8>=z.g),N.g}function Cr(N,P,z){var K=N.xc;return s((P=K==0?0:N.vc[N.md*(z>>K)+(P>>K)])<N.Wb),N.Ya[P]}function ta(N,P,z,K){var se=N.ab,ae=N.c*P,ie=N.C;P=ie+P;var ue=z,me=K;for(K=N.Ta,z=N.Ua;0<se--;){var fe=N.gc[se],Ne=ie,Me=P,_e=ue,Ie=me,Ze=(me=K,ue=z,fe.Ea);switch(s(Ne<Me),s(Me<=fe.nc),fe.hc){case 2:kp(_e,Ie,(Me-Ne)*Ze,me,ue);break;case 0:var Ve=Ne,Ce=Me,Te=me,Ke=ue,Xe=(ht=fe).Ea;Ve==0&&(_v(_e,Ie,null,null,1,Te,Ke),ut(_e,Ie+1,0,0,Xe-1,Te,Ke+1),Ie+=Xe,Ke+=Xe,++Ve);for(var Qe=1<<ht.b,ft=Qe-1,mt=xe(Xe,ht.b),Dt=ht.K,ht=ht.w+(Ve>>ht.b)*mt;Ve<Ce;){var fs=Dt,ws=ht,is=1;for(um(_e,Ie,Te,Ke-Xe,1,Te,Ke);is<Xe;){var rs=(is&~ft)+Qe;rs>Xe&&(rs=Xe),(0,Vl[fs[ws++]>>8&15])(_e,Ie+ +is,Te,Ke+is-Xe,rs-is,Te,Ke+is),is=rs}Ie+=Xe,Ke+=Xe,++Ve&ft||(ht+=mt)}Me!=fe.nc&&n(me,ue-Ze,me,ue+(Me-Ne-1)*Ze,Ze);break;case 1:for(Ze=_e,Ce=Ie,Xe=(_e=fe.Ea)-(Ke=_e&~(Te=(Ie=1<<fe.b)-1)),Ve=xe(_e,fe.b),Qe=fe.K,fe=fe.w+(Ne>>fe.b)*Ve;Ne<Me;){for(ft=Qe,mt=fe,Dt=new lt,ht=Ce+Ke,fs=Ce+_e;Ce<ht;)Et(ft[mt++],Dt),ac(Dt,Ze,Ce,Ie,me,ue),Ce+=Ie,ue+=Ie;Ce<fs&&(Et(ft[mt++],Dt),ac(Dt,Ze,Ce,Xe,me,ue),Ce+=Xe,ue+=Xe),++Ne&Te||(fe+=Ve)}break;case 3:if(_e==me&&Ie==ue&&0<fe.b){for(Ce=me,_e=Ze=ue+(Me-Ne)*Ze-(Ke=(Me-Ne)*xe(fe.Ea,fe.b)),Ie=me,Te=ue,Ve=[],Ke=(Xe=Ke)-1;0<=Ke;--Ke)Ve[Ke]=Ie[Te+Ke];for(Ke=Xe-1;0<=Ke;--Ke)Ce[_e+Ke]=Ve[Ke];Ta(fe,Ne,Me,me,Ze,me,ue)}else Ta(fe,Ne,Me,_e,Ie,me,ue)}ue=K,me=z}me!=z&&n(K,z,ue,me,ae)}function sd(N,P){var z=N.V,K=N.Ba+N.c*N.C,se=P-N.C;if(s(P<=N.l.o),s(16>=se),0<se){var ae=N.l,ie=N.Ta,ue=N.Ua,me=ae.width;if(ta(N,se,z,K),se=ue=[ue],s((z=N.C)<(K=P)),s(ae.v<ae.va),K>ae.o&&(K=ae.o),z<ae.j){var fe=ae.j-z;z=ae.j,se[0]+=fe*me}if(z>=K?z=0:(se[0]+=4*ae.v,ae.ka=z-ae.j,ae.U=ae.va-ae.v,ae.T=K-z,z=1),z){if(ue=ue[0],11>(z=N.ca).S){var Ne=z.f.RGBA,Me=(K=z.S,se=ae.U,ae=ae.T,fe=Ne.eb,Ne.A),_e=ae;for(Ne=Ne.fb+N.Ma*Ne.A;0<_e--;){var Ie=ie,Ze=ue,Ve=se,Ce=fe,Te=Ne;switch(K){case Op:_n(Ie,Ze,Ve,Ce,Te);break;case $p:Sn(Ie,Ze,Ve,Ce,Te);break;case Bv:Sn(Ie,Ze,Ve,Ce,Te),Da(Ce,Te,0,Ve,1,0);break;case qb:cl(Ie,Ze,Ve,Ce,Te);break;case Bp:Ps(Ie,Ze,Ve,Ce,Te,1);break;case zv:Ps(Ie,Ze,Ve,Ce,Te,1),Da(Ce,Te,0,Ve,1,0);break;case zp:Ps(Ie,Ze,Ve,Ce,Te,0);break;case Vp:Ps(Ie,Ze,Ve,Ce,Te,0),Da(Ce,Te,1,Ve,1,0);break;case $v:Ul(Ie,Ze,Ve,Ce,Te);break;case Vv:Ul(Ie,Ze,Ve,Ce,Te),Ms(Ce,Te,Ve,1,0);break;case Hb:ol(Ie,Ze,Ve,Ce,Te);break;default:s(0)}ue+=me,Ne+=Me}N.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");s(N.Ma<=z.height)}}N.C=P,s(N.C<=N.i)}function al(N){var P;if(0<N.ua)return 0;for(P=0;P<N.Wb;++P){var z=N.Ya[P].G,K=N.Ya[P].H;if(0<z[1][K[1]+0].g||0<z[2][K[2]+0].g||0<z[3][K[3]+0].g)return 0}return 1}function Za(N,P,z,K,se,ae){if(N.Z!=0){var ie=N.qd,ue=N.rd;for(s(Gl[N.Z]!=null);P<z;++P)Gl[N.Z](ie,ue,K,se,K,se,ae),ie=K,ue=se,se+=ae;N.qd=ie,N.rd=ue}}function Ja(N,P){var z=N.l.ma,K=z.Z==0||z.Z==1?N.l.j:N.C;if(K=N.C<K?K:N.C,s(P<=N.l.o),P>K){var se=N.l.width,ae=z.ca,ie=z.tb+se*K,ue=N.V,me=N.Ba+N.c*K,fe=N.gc;s(N.ab==1),s(fe[0].hc==3),Lp(fe[0],K,P,ue,me,ae,ie),Za(z,K,P,ae,ie,se)}N.C=N.Ma=P}function Xa(N,P,z,K,se,ae,ie){var ue=N.$/K,me=N.$%K,fe=N.m,Ne=N.s,Me=z+N.$,_e=Me;se=z+K*se;var Ie=z+K*ae,Ze=280+Ne.ua,Ve=N.Pb?ue:16777216,Ce=0<Ne.ua?Ne.Wa:null,Te=Ne.wc,Ke=Me<Ie?Cr(Ne,me,ue):null;s(N.C<ae),s(Ie<=se);var Xe=!1;e:for(;;){for(;Xe||Me<Ie;){var Qe=0;if(ue>=Ve){var ft=Me-z;s((Ve=N).Pb),Ve.wd=Ve.m,Ve.xd=ft,0<Ve.s.ua&&Se(Ve.s.Wa,Ve.s.vb),Ve=ue+UI}if(me&Te||(Ke=Cr(Ne,me,ue)),s(Ke!=null),Ke.Qb&&(P[Me]=Ke.qb,Xe=!0),!Xe)if(Y(fe),Ke.jc){Qe=fe,ft=P;var mt=Me,Dt=Ke.pd[V(Qe)&Qr-1];s(Ke.jc),256>Dt.g?(G(Qe,Qe.u+Dt.g),ft[mt]=Dt.value,Qe=0):(G(Qe,Qe.u+Dt.g-256),s(256<=Dt.value),Qe=Dt.value),Qe==0&&(Xe=!0)}else Qe=Fn(Ke.G[0],Ke.H[0],fe);if(fe.h)break;if(Xe||256>Qe){if(!Xe)if(Ke.nd)P[Me]=(Ke.qb|Qe<<8)>>>0;else{if(Y(fe),Xe=Fn(Ke.G[1],Ke.H[1],fe),Y(fe),ft=Fn(Ke.G[2],Ke.H[2],fe),mt=Fn(Ke.G[3],Ke.H[3],fe),fe.h)break;P[Me]=(mt<<24|Xe<<16|Qe<<8|ft)>>>0}if(Xe=!1,++Me,++me>=K&&(me=0,++ue,ie!=null&&ue<=ae&&!(ue%16)&&ie(N,ue),Ce!=null))for(;_e<Me;)Qe=P[_e++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else if(280>Qe){if(Qe=Qa(Qe-256,fe),ft=Fn(Ke.G[4],Ke.H[4],fe),Y(fe),ft=Ei(K,ft=Qa(ft,fe)),fe.h)break;if(Me-z<ft||se-Me<Qe)break e;for(mt=0;mt<Qe;++mt)P[Me+mt]=P[Me+mt-ft];for(Me+=Qe,me+=Qe;me>=K;)me-=K,++ue,ie!=null&&ue<=ae&&!(ue%16)&&ie(N,ue);if(s(Me<=se),me&Te&&(Ke=Cr(Ne,me,ue)),Ce!=null)for(;_e<Me;)Qe=P[_e++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else{if(!(Qe<Ze))break e;for(Xe=Qe-280,s(Ce!=null);_e<Me;)Qe=P[_e++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe;Qe=Me,s(!(Xe>>>(ft=Ce).Xa)),P[Qe]=ft.X[Xe],Xe=!0}Xe||s(fe.h==Q(fe))}if(N.Pb&&fe.h&&Me<se)s(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Se(N.s.vb,N.s.Wa);else{if(fe.h)break e;ie!=null&&ie(N,ue>ae?ae:ue),N.a=0,N.$=Me-z}return 1}return N.a=3,0}function Pi(N){s(N!=null),N.vc=null,N.yc=null,N.Ya=null;var P=N.Wa;P!=null&&(P.X=null),N.vb=null,s(N!=null)}function Aa(){var N=new Mv;return N==null?null:(N.a=0,N.xb=Kb,Ln("Predictor","VP8LPredictors"),Ln("Predictor","VP8LPredictors_C"),Ln("PredictorAdd","VP8LPredictorsAdd"),Ln("PredictorAdd","VP8LPredictorsAdd_C"),kp=gt,ac=Nt,_n=dt,Sn=hs,Ul=Kt,ol=Lr,cl=ps,C.VP8LMapColor32b=Nd,C.VP8LMapColor8b=Fp,N)}function Di(N,P,z,K,se){var ae=1,ie=[N],ue=[P],me=K.m,fe=K.s,Ne=null,Me=0;e:for(;;){if(z)for(;ae&&W(me,1);){var _e=ie,Ie=ue,Ze=K,Ve=1,Ce=Ze.m,Te=Ze.gc[Ze.ab],Ke=W(Ce,2);if(Ze.Oc&1<<Ke)ae=0;else{switch(Ze.Oc|=1<<Ke,Te.hc=Ke,Te.Ea=_e[0],Te.nc=Ie[0],Te.K=[null],++Ze.ab,s(4>=Ze.ab),Ke){case 0:case 1:Te.b=W(Ce,3)+2,Ve=Di(xe(Te.Ea,Te.b),xe(Te.nc,Te.b),0,Ze,Te.K),Te.K=Te.K[0];break;case 3:var Xe,Qe=W(Ce,8)+1,ft=16<Qe?0:4<Qe?1:2<Qe?2:3;if(_e[0]=xe(Te.Ea,ft),Te.b=ft,Xe=Ve=Di(Qe,1,0,Ze,Te.K)){var mt,Dt=Qe,ht=Te,fs=1<<(8>>ht.b),ws=i(fs);if(ws==null)Xe=0;else{var is=ht.K[0],rs=ht.w;for(ws[0]=ht.K[0][0],mt=1;mt<1*Dt;++mt)ws[mt]=Pe(is[rs+mt],ws[mt-1]);for(;mt<4*fs;++mt)ws[mt]=0;ht.K[0]=null,ht.K[0]=ws,Xe=1}}Ve=Xe;break;case 2:break;default:s(0)}ae=Ve}}if(ie=ie[0],ue=ue[0],ae&&W(me,1)&&!(ae=1<=(Me=W(me,4))&&11>=Me)){K.a=3;break e}var Is;if(Is=ae)t:{var Ds,Yt,Tr,On=K,Er=ie,$n=ue,Ss=Me,na=z,aa=On.m,Br=On.s,Zr=[null],An=1,La=0,Fi=VI[Ss];s:for(;;){if(na&&W(aa,1)){var zr=W(aa,3)+2,hl=xe(Er,zr),dc=xe($n,zr),Td=hl*dc;if(!Di(hl,dc,0,On,Zr))break s;for(Zr=Zr[0],Br.xc=zr,Ds=0;Ds<Td;++Ds){var Kl=Zr[Ds]>>8&65535;Zr[Ds]=Kl,Kl>=An&&(An=Kl+1)}}if(aa.h)break s;for(Yt=0;5>Yt;++Yt){var or=Wb[Yt];!Yt&&0<Ss&&(or+=1<<Ss),La<or&&(La=or)}var Wv=l(An*Fi,A),sN=An,rN=l(sN,L);if(rN==null)var Wp=null;else s(65536>=sN),Wp=rN;var vm=i(La);if(Wp==null||vm==null||Wv==null){On.a=1;break s}var Gp=Wv;for(Ds=Tr=0;Ds<An;++Ds){var ni=Wp[Ds],Ed=ni.G,Pd=ni.H,nN=0,Kp=1,aN=0;for(Yt=0;5>Yt;++Yt){or=Wb[Yt],Ed[Yt]=Gp,Pd[Yt]=Tr,!Yt&&0<Ss&&(or+=1<<Ss);n:{var Yp,Gv=or,Qp=On,jm=vm,ck=Gp,dk=Tr,Kv=0,Yl=Qp.m,uk=W(Yl,1);if(a(jm,0,0,Gv),uk){var mk=W(Yl,1)+1,hk=W(Yl,1),iN=W(Yl,hk==0?1:8);jm[iN]=1,mk==2&&(jm[iN=W(Yl,8)]=1);var Zp=1}else{var lN=i(19),oN=W(Yl,4)+4;if(19<oN){Qp.a=3;var Jp=0;break n}for(Yp=0;Yp<oN;++Yp)lN[BI[Yp]]=W(Yl,3);var Yv=void 0,ym=void 0,cN=Qp,pk=lN,Xp=Gv,dN=jm,Qv=0,Ql=cN.m,uN=8,mN=l(128,A);r:for(;D(mN,0,7,pk,19);){if(W(Ql,1)){var fk=2+2*W(Ql,3);if((Yv=2+W(Ql,fk))>Xp)break r}else Yv=Xp;for(ym=0;ym<Xp&&Yv--;){Y(Ql);var hN=mN[0+(127&V(Ql))];G(Ql,Ql.u+hN.g);var Dd=hN.value;if(16>Dd)dN[ym++]=Dd,Dd!=0&&(uN=Dd);else{var xk=Dd==16,pN=Dd-16,gk=OI[pN],fN=W(Ql,_I[pN])+gk;if(ym+fN>Xp)break r;for(var vk=xk?uN:0;0<fN--;)dN[ym++]=vk}}Qv=1;break r}Qv||(cN.a=3),Zp=Qv}(Zp=Zp&&!Yl.h)&&(Kv=D(ck,dk,8,jm,Gv)),Zp&&Kv!=0?Jp=Kv:(Qp.a=3,Jp=0)}if(Jp==0)break s;if(Kp&&$I[Yt]==1&&(Kp=Gp[Tr].g==0),nN+=Gp[Tr].g,Tr+=Jp,3>=Yt){var bm,Zv=vm[0];for(bm=1;bm<or;++bm)vm[bm]>Zv&&(Zv=vm[bm]);aN+=Zv}}if(ni.nd=Kp,ni.Qb=0,Kp&&(ni.qb=(Ed[3][Pd[3]+0].value<<24|Ed[1][Pd[1]+0].value<<16|Ed[2][Pd[2]+0].value)>>>0,nN==0&&256>Ed[0][Pd[0]+0].value&&(ni.Qb=1,ni.qb+=Ed[0][Pd[0]+0].value<<8)),ni.jc=!ni.Qb&&6>aN,ni.jc){var ef,pl=ni;for(ef=0;ef<Qr;++ef){var Zl=ef,Jl=pl.pd[Zl],tf=pl.G[0][pl.H[0]+Zl];256<=tf.value?(Jl.g=tf.g+256,Jl.value=tf.value):(Jl.g=0,Jl.value=0,Zl>>=Fr(tf,8,Jl),Zl>>=Fr(pl.G[1][pl.H[1]+Zl],16,Jl),Zl>>=Fr(pl.G[2][pl.H[2]+Zl],0,Jl),Fr(pl.G[3][pl.H[3]+Zl],24,Jl))}}}Br.vc=Zr,Br.Wb=An,Br.Ya=Wp,Br.yc=Wv,Is=1;break t}Is=0}if(!(ae=Is)){K.a=3;break e}if(0<Me){if(fe.ua=1<<Me,!ye(fe.Wa,Me)){K.a=1,ae=0;break e}}else fe.ua=0;var Jv=K,xN=ie,jk=ue,Xv=Jv.s,e0=Xv.xc;if(Jv.c=xN,Jv.i=jk,Xv.md=xe(xN,e0),Xv.wc=e0==0?-1:(1<<e0)-1,z){K.xb=QI;break e}if((Ne=i(ie*ue))==null){K.a=1,ae=0;break e}ae=(ae=Xa(K,Ne,0,ie,ue,ue,null))&&!me.h;break e}return ae?(se!=null?se[0]=Ne:(s(Ne==null),s(z)),K.$=0,z||Pi(fe)):Pi(fe),ae}function ec(N,P){var z=N.c*N.i,K=z+P+16*P;return s(N.c<=P),N.V=i(K),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+z+P,1)}function rd(N,P){var z=N.C,K=P-z,se=N.V,ae=N.Ba+N.c*z;for(s(P<=N.l.o);0<K;){var ie=16<K?16:K,ue=N.l.ma,me=N.l.width,fe=me*ie,Ne=ue.ca,Me=ue.tb+me*z,_e=N.Ta,Ie=N.Ua;ta(N,ie,se,ae),fr(_e,Ie,Ne,Me,fe),Za(ue,z,z+ie,Ne,Me,me),K-=ie,se+=ie*N.c,z+=ie}s(z==P),N.C=N.Ma=P}function nd(){this.ub=this.yd=this.td=this.Rb=0}function ad(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function id(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function mp(){this.Yb=function(){var N=[];return function P(z,K,se){for(var ae=se[K],ie=0;ie<ae&&(z.push(se.length>K+1?[]:0),!(se.length<K+1));ie++)P(z[ie],K+1,se)}(N,0,[3,11]),N}()}function hv(){this.jb=i(3),this.Wc=o([4,8],mp),this.Xc=o([4,17],mp)}function pv(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ld(){this.ld=this.La=this.dd=this.tc=0}function hp(){this.Na=this.la=0}function fv(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Wu(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xv(){this.uc=this.M=this.Nb=0,this.wa=Array(new ld),this.Y=0,this.ya=Array(new Wu),this.aa=0,this.l=new od}function pp(){this.y=i(16),this.f=i(8),this.ea=i(8)}function gv(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new nd,this.Kc=new ad,this.ed=new pv,this.Qa=new id,this.Ic=this.$c=this.Aa=0,this.D=new xv,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,q),this.ia=0,this.pb=l(4,fv),this.Pa=new hv,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pp),this.Hd=0,this.rb=Array(new hp),this.sb=0,this.wa=Array(new ld),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Wu),this.L=this.aa=0,this.gd=o([4,2],ld),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function od(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vv(){var N=new gv;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,xm||(xm=gp)),N}function hr(N,P,z){return N.a==0&&(N.a=P,N.sc=z,N.cb=0),0}function fp(N,P,z){return 3<=z&&N[P+0]==157&&N[P+1]==1&&N[P+2]==42}function xp(N,P){if(N==null)return 0;if(N.a=0,N.sc="OK",P==null)return hr(N,2,"null VP8Io passed to VP8GetHeaders()");var z=P.data,K=P.w,se=P.ha;if(4>se)return hr(N,7,"Truncated header.");var ae=z[K+0]|z[K+1]<<8|z[K+2]<<16,ie=N.Od;if(ie.Rb=!(1&ae),ie.td=ae>>1&7,ie.yd=ae>>4&1,ie.ub=ae>>5,3<ie.td)return hr(N,3,"Incorrect keyframe parameters.");if(!ie.yd)return hr(N,4,"Frame not displayable.");K+=3,se-=3;var ue=N.Kc;if(ie.Rb){if(7>se)return hr(N,7,"cannot parse picture header");if(!fp(z,K,se))return hr(N,3,"Bad code word");ue.c=16383&(z[K+4]<<8|z[K+3]),ue.Td=z[K+4]>>6,ue.i=16383&(z[K+6]<<8|z[K+5]),ue.Ud=z[K+6]>>6,K+=7,se-=7,N.za=ue.c+15>>4,N.Ub=ue.i+15>>4,P.width=ue.c,P.height=ue.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,a((ae=N.Pa).jb,0,255,ae.jb.length),s((ae=N.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,a(ae.Zb,0,0,ae.Zb.length),a(ae.Lb,0,0,ae.Lb)}if(ie.ub>se)return hr(N,7,"bad partition length");F(ae=N.m,z,K,ie.ub),K+=ie.ub,se-=ie.ub,ie.Rb&&(ue.Ld=le(ae),ue.Kd=le(ae)),ue=N.Qa;var me,fe=N.Pa;if(s(ae!=null),s(ue!=null),ue.Cb=le(ae),ue.Cb){if(ue.Bb=le(ae),le(ae)){for(ue.Fb=le(ae),me=0;4>me;++me)ue.Zb[me]=le(ae)?R(ae,7):0;for(me=0;4>me;++me)ue.Lb[me]=le(ae)?R(ae,6):0}if(ue.Bb)for(me=0;3>me;++me)fe.jb[me]=le(ae)?B(ae,8):255}else ue.Bb=0;if(ae.Ka)return hr(N,3,"cannot parse segment header");if((ue=N.ed).zd=le(ae),ue.Tb=B(ae,6),ue.wb=B(ae,3),ue.Pc=le(ae),ue.Pc&&le(ae)){for(fe=0;4>fe;++fe)le(ae)&&(ue.vd[fe]=R(ae,6));for(fe=0;4>fe;++fe)le(ae)&&(ue.od[fe]=R(ae,6))}if(N.L=ue.Tb==0?0:ue.zd?1:2,ae.Ka)return hr(N,3,"cannot parse filter header");var Ne=se;if(se=me=K,K=me+Ne,ue=Ne,N.Xb=(1<<B(N.m,2))-1,Ne<3*(fe=N.Xb))z=7;else{for(me+=3*fe,ue-=3*fe,Ne=0;Ne<fe;++Ne){var Me=z[se+0]|z[se+1]<<8|z[se+2]<<16;Me>ue&&(Me=ue),F(N.Jc[+Ne],z,me,Me),me+=Me,ue-=Me,se+=3}F(N.Jc[+fe],z,me,ue),z=me<K?0:5}if(z!=0)return hr(N,z,"cannot parse partitions");for(z=B(me=N.m,7),se=le(me)?R(me,4):0,K=le(me)?R(me,4):0,ue=le(me)?R(me,4):0,fe=le(me)?R(me,4):0,me=le(me)?R(me,4):0,Ne=N.Qa,Me=0;4>Me;++Me){if(Ne.Cb){var _e=Ne.Zb[Me];Ne.Fb||(_e+=z)}else{if(0<Me){N.pb[Me]=N.pb[0];continue}_e=z}var Ie=N.pb[Me];Ie.Sc[0]=Uv[sa(_e+se,127)],Ie.Sc[1]=qv[sa(_e+0,127)],Ie.Eb[0]=2*Uv[sa(_e+K,127)],Ie.Eb[1]=101581*qv[sa(_e+ue,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=Uv[sa(_e+fe,117)],Ie.Qc[1]=qv[sa(_e+me,127)],Ie.lc=_e+me}if(!ie.Rb)return hr(N,4,"Not a key frame.");for(le(ae),ie=N.Pa,z=0;4>z;++z){for(se=0;8>se;++se)for(K=0;3>K;++K)for(ue=0;11>ue;++ue)fe=oe(ae,KI[z][se][K][ue])?B(ae,8):WI[z][se][K][ue],ie.Wc[z][se].Yb[K][ue]=fe;for(se=0;17>se;++se)ie.Xc[z][se]=ie.Wc[z][YI[se]]}return N.kc=le(ae),N.kc&&(N.Bd=B(ae,8)),N.cb=1}function gp(N,P,z,K,se,ae,ie){var ue=P[se].Yb[z];for(z=0;16>se;++se){if(!oe(N,ue[z+0]))return se;for(;!oe(N,ue[z+1]);)if(ue=P[++se].Yb[0],z=0,se==16)return 16;var me=P[se+1].Yb;if(oe(N,ue[z+2])){var fe=N,Ne=0;if(oe(fe,(_e=ue)[(Me=z)+3]))if(oe(fe,_e[Me+6])){for(ue=0,Me=2*(Ne=oe(fe,_e[Me+8]))+(_e=oe(fe,_e[Me+9+Ne])),Ne=0,_e=qI[Me];_e[ue];++ue)Ne+=Ne+oe(fe,_e[ue]);Ne+=3+(8<<Me)}else oe(fe,_e[Me+7])?(Ne=7+2*oe(fe,165),Ne+=oe(fe,145)):Ne=5+oe(fe,159);else Ne=oe(fe,_e[Me+4])?3+oe(fe,_e[Me+5]):2;ue=me[2]}else Ne=1,ue=me[1];me=ie+HI[se],0>(fe=N).b&&ne(fe);var Me,_e=fe.b,Ie=(Me=fe.Ca>>1)-(fe.I>>_e)>>31;--fe.b,fe.Ca+=Ie,fe.Ca|=1,fe.I-=(Me+1&Ie)<<_e,ae[me]=((Ne^Ie)-Ie)*K[(0<se)+0]}return 16}function Gu(N){var P=N.rb[N.sb-1];P.la=0,P.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function jv(N,P){if(N==null)return 0;if(P==null)return hr(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!xp(N,P))return 0;if(s(N.cb),P.ac==null||P.ac(P)){P.ob&&(N.L=0);var z=Hp[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=P.v-z>>4,N.zb=P.j-z>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=P.o+15+z>>4,N.Hb=P.va+15+z>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var K=N.ed;for(z=0;4>z;++z){var se;if(N.Qa.Cb){var ae=N.Qa.Lb[z];N.Qa.Fb||(ae+=K.Tb)}else ae=K.Tb;for(se=0;1>=se;++se){var ie=N.gd[z][se],ue=ae;if(K.Pc&&(ue+=K.vd[0],se&&(ue+=K.od[0])),0<(ue=0>ue?0:63<ue?63:ue)){var me=ue;0<K.wb&&(me=4<K.wb?me>>2:me>>1)>9-K.wb&&(me=9-K.wb),1>me&&(me=1),ie.dd=me,ie.tc=2*ue+me,ie.ld=40<=ue?2:15<=ue?1:0}else ie.tc=0;ie.La=se}}}z=0}else hr(N,6,"Frame setup failed"),z=N.a;if(z=z==0){if(z){N.$c=0,0<N.Aa||(N.Ic=ok);e:{z=N.Ic,K=4*(me=N.za);var fe=32*me,Ne=me+1,Me=0<N.L?me*(0<N.Aa?2:1):0,_e=(N.Aa==2?2:1)*me;if((ie=K+832+(se=3*(16*z+Hp[N.L])/2*fe)+(ae=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=ie)z=0;else{if(ie>N.Vb){if(N.Vb=0,N.Ec=i(ie),N.Fc=0,N.Ec==null){z=hr(N,1,"no memory during frame initialization.");break e}N.Vb=ie}ie=N.Ec,ue=N.Fc,N.Ac=ie,N.Bc=ue,ue+=K,N.Gd=l(fe,pp),N.Hd=0,N.rb=l(Ne+1,hp),N.sb=1,N.wa=Me?l(Me,ld):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=me),s(!0),N.oc=ie,N.pc=ue,ue+=832,N.ya=l(_e,Wu),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=me),N.R=16*me,N.B=8*me,me=(fe=Hp[N.L])*N.R,fe=fe/2*N.B,N.sa=ie,N.ta=ue+me,N.qa=N.sa,N.ra=N.ta+16*z*N.R+fe,N.Ha=N.qa,N.Ia=N.ra+8*z*N.B+fe,N.$c=0,ue+=se,N.mb=ae?ie:null,N.nb=ae?ue:null,s(ue+ae<=N.Fc+N.Vb),Gu(N),a(N.Ac,N.Bc,0,K),z=1}}if(z){if(P.ka=0,P.y=N.sa,P.O=N.ta,P.f=N.qa,P.N=N.ra,P.ea=N.Ha,P.Vd=N.Ia,P.fa=N.R,P.Rc=N.B,P.F=null,P.J=0,!Mp){for(z=-255;255>=z;++z)Rr[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)ul[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)fm[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Ad[255+z]=0>z?0:255<z?255:z;Mp=1}wd=Nv,dl=yv,mm=jp,Cn=bv,Ea=yp,pr=vp,Sd=Xu,Rp=rc,hm=Rv,ic=em,lc=Fv,ql=pd,oc=tm,Cd=Pp,cc=Ep,Hl=ki,pm=ll,Pa=Lv,ri[0]=Ii,ri[1]=wv,ri[2]=Tv,ri[3]=Ev,ri[4]=wp,ri[5]=md,ri[6]=Sp,ri[7]=Qu,ri[8]=Dv,ri[9]=Pv,Wl[0]=bp,Wl[1]=Cv,Wl[2]=il,Wl[3]=dd,Wl[4]=on,Wl[5]=Av,Wl[6]=Np,ml[0]=$l,ml[1]=Sv,ml[2]=Iv,ml[3]=Zu,ml[4]=sc,ml[5]=kv,ml[6]=Ju,z=1}else z=0}z&&(z=function(Ie,Ze){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var Ve,Ce=Ie.Jc[Ie.M&Ie.Xb],Te=Ie.m,Ke=Ie;for(Ve=0;Ve<Ke.za;++Ve){var Xe=Te,Qe=Ke,ft=Qe.Ac,mt=Qe.Bc+4*Ve,Dt=Qe.zc,ht=Qe.ya[Qe.aa+Ve];if(Qe.Qa.Bb?ht.$b=oe(Xe,Qe.Pa.jb[0])?2+oe(Xe,Qe.Pa.jb[2]):oe(Xe,Qe.Pa.jb[1]):ht.$b=0,Qe.kc&&(ht.Ad=oe(Xe,Qe.Bd)),ht.Za=!oe(Xe,145)+0,ht.Za){var fs=ht.Ob,ws=0;for(Qe=0;4>Qe;++Qe){var is,rs=Dt[0+Qe];for(is=0;4>is;++is){rs=GI[ft[mt+is]][rs];for(var Is=Gb[oe(Xe,rs[0])];0<Is;)Is=Gb[2*Is+oe(Xe,rs[Is])];rs=-Is,ft[mt+is]=rs}n(fs,ws,ft,mt,4),ws+=4,Dt[0+Qe]=rs}}else rs=oe(Xe,156)?oe(Xe,128)?1:3:oe(Xe,163)?2:0,ht.Ob[0]=rs,a(ft,mt,rs,4),a(Dt,0,rs,4);ht.Dd=oe(Xe,142)?oe(Xe,114)?oe(Xe,183)?1:3:2:0}if(Ke.m.Ka)return hr(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if(Ke=Ce,Xe=(Te=Ie).rb[Te.sb-1],ft=Te.rb[Te.sb+Te.ja],Ve=Te.ya[Te.aa+Te.ja],mt=Te.kc?Ve.Ad:0)Xe.la=ft.la=0,Ve.Za||(Xe.Na=ft.Na=0),Ve.Hc=0,Ve.Gc=0,Ve.ia=0;else{var Ds,Yt;if(Xe=ft,ft=Ke,mt=Te.Pa.Xc,Dt=Te.ya[Te.aa+Te.ja],ht=Te.pb[Dt.$b],Qe=Dt.ad,fs=0,ws=Te.rb[Te.sb-1],rs=is=0,a(Qe,fs,0,384),Dt.Za)var Tr=0,On=mt[3];else{Is=i(16);var Er=Xe.Na+ws.Na;if(Er=xm(ft,mt[1],Er,ht.Eb,0,Is,0),Xe.Na=ws.Na=(0<Er)+0,1<Er)wd(Is,0,Qe,fs);else{var $n=Is[0]+3>>3;for(Is=0;256>Is;Is+=16)Qe[fs+Is]=$n}Tr=1,On=mt[0]}var Ss=15&Xe.la,na=15&ws.la;for(Is=0;4>Is;++Is){var aa=1&na;for($n=Yt=0;4>$n;++$n)Ss=Ss>>1|(aa=(Er=xm(ft,On,Er=aa+(1&Ss),ht.Sc,Tr,Qe,fs))>Tr)<<7,Yt=Yt<<2|(3<Er?3:1<Er?2:Qe[fs+0]!=0),fs+=16;Ss>>=4,na=na>>1|aa<<7,is=(is<<8|Yt)>>>0}for(On=Ss,Tr=na>>4,Ds=0;4>Ds;Ds+=2){for(Yt=0,Ss=Xe.la>>4+Ds,na=ws.la>>4+Ds,Is=0;2>Is;++Is){for(aa=1&na,$n=0;2>$n;++$n)Er=aa+(1&Ss),Ss=Ss>>1|(aa=0<(Er=xm(ft,mt[2],Er,ht.Qc,0,Qe,fs)))<<3,Yt=Yt<<2|(3<Er?3:1<Er?2:Qe[fs+0]!=0),fs+=16;Ss>>=2,na=na>>1|aa<<5}rs|=Yt<<4*Ds,On|=Ss<<4<<Ds,Tr|=(240&na)<<Ds}Xe.la=On,ws.la=Tr,Dt.Hc=is,Dt.Gc=rs,Dt.ia=43690&rs?0:ht.ia,mt=!(is|rs)}if(0<Te.L&&(Te.wa[Te.Y+Te.ja]=Te.gd[Ve.$b][Ve.Za],Te.wa[Te.Y+Te.ja].La|=!mt),Ke.Ka)return hr(Ie,7,"Premature end-of-file encountered.")}if(Gu(Ie),Te=Ze,Ke=1,Ve=(Ce=Ie).D,Xe=0<Ce.L&&Ce.M>=Ce.zb&&Ce.M<=Ce.Va,Ce.Aa==0)e:{if(Ve.M=Ce.M,Ve.uc=Xe,lm(Ce,Ve),Ke=1,Ve=(Yt=Ce.D).Nb,Xe=(rs=Hp[Ce.L])*Ce.R,ft=rs/2*Ce.B,Is=16*Ve*Ce.R,$n=8*Ve*Ce.B,mt=Ce.sa,Dt=Ce.ta-Xe+Is,ht=Ce.qa,Qe=Ce.ra-ft+$n,fs=Ce.Ha,ws=Ce.Ia-ft+$n,na=(Ss=Yt.M)==0,is=Ss>=Ce.Va-1,Ce.Aa==2&&lm(Ce,Yt),Yt.uc)for(aa=(Er=Ce).D.M,s(Er.D.uc),Yt=Er.yb;Yt<Er.Hb;++Yt){Tr=Yt,On=aa;var Br=(Zr=(or=Er).D).Nb;Ds=or.R;var Zr=Zr.wa[Zr.Y+Tr],An=or.sa,La=or.ta+16*Br*Ds+16*Tr,Fi=Zr.dd,zr=Zr.tc;if(zr!=0)if(s(3<=zr),or.L==1)0<Tr&&Hl(An,La,Ds,zr+4),Zr.La&&Pa(An,La,Ds,zr),0<On&&cc(An,La,Ds,zr+4),Zr.La&&pm(An,La,Ds,zr);else{var hl=or.B,dc=or.qa,Td=or.ra+8*Br*hl+8*Tr,Kl=or.Ha,or=or.Ia+8*Br*hl+8*Tr;Br=Zr.ld,0<Tr&&(Rp(An,La,Ds,zr+4,Fi,Br),ic(dc,Td,Kl,or,hl,zr+4,Fi,Br)),Zr.La&&(ql(An,La,Ds,zr,Fi,Br),Cd(dc,Td,Kl,or,hl,zr,Fi,Br)),0<On&&(Sd(An,La,Ds,zr+4,Fi,Br),hm(dc,Td,Kl,or,hl,zr+4,Fi,Br)),Zr.La&&(lc(An,La,Ds,zr,Fi,Br),oc(dc,Td,Kl,or,hl,zr,Fi,Br))}}if(Ce.ia&&alert("todo:DitherRow"),Te.put!=null){if(Yt=16*Ss,Ss=16*(Ss+1),na?(Te.y=Ce.sa,Te.O=Ce.ta+Is,Te.f=Ce.qa,Te.N=Ce.ra+$n,Te.ea=Ce.Ha,Te.W=Ce.Ia+$n):(Yt-=rs,Te.y=mt,Te.O=Dt,Te.f=ht,Te.N=Qe,Te.ea=fs,Te.W=ws),is||(Ss-=rs),Ss>Te.o&&(Ss=Te.o),Te.F=null,Te.J=null,Ce.Fa!=null&&0<Ce.Fa.length&&Yt<Ss&&(Te.J=am(Ce,Te,Yt,Ss-Yt),Te.F=Ce.mb,Te.F==null&&Te.F.length==0)){Ke=hr(Ce,3,"Could not decode alpha data.");break e}Yt<Te.j&&(rs=Te.j-Yt,Yt=Te.j,s(!(1&rs)),Te.O+=Ce.R*rs,Te.N+=Ce.B*(rs>>1),Te.W+=Ce.B*(rs>>1),Te.F!=null&&(Te.J+=Te.width*rs)),Yt<Ss&&(Te.O+=Te.v,Te.N+=Te.v>>1,Te.W+=Te.v>>1,Te.F!=null&&(Te.J+=Te.v),Te.ka=Yt-Te.j,Te.U=Te.va-Te.v,Te.T=Ss-Yt,Ke=Te.put(Te))}Ve+1!=Ce.Ic||is||(n(Ce.sa,Ce.ta-Xe,mt,Dt+16*Ce.R,Xe),n(Ce.qa,Ce.ra-ft,ht,Qe+8*Ce.B,ft),n(Ce.Ha,Ce.Ia-ft,fs,ws+8*Ce.B,ft))}if(!Ke)return hr(Ie,6,"Output aborted.")}return 1}(N,P)),P.bc!=null&&P.bc(P),z&=1}return z?(N.cb=0,z):0}function ei(N,P,z,K,se){se=N[P+z+32*K]+(se>>3),N[P+z+32*K]=-256&se?0>se?0:255:se}function cd(N,P,z,K,se,ae){ei(N,P,0,z,K+se),ei(N,P,1,z,K+ae),ei(N,P,2,z,K-ae),ei(N,P,3,z,K-se)}function Rn(N){return(20091*N>>16)+N}function Ku(N,P,z,K){var se,ae=0,ie=i(16);for(se=0;4>se;++se){var ue=N[P+0]+N[P+8],me=N[P+0]-N[P+8],fe=(35468*N[P+4]>>16)-Rn(N[P+12]),Ne=Rn(N[P+4])+(35468*N[P+12]>>16);ie[ae+0]=ue+Ne,ie[ae+1]=me+fe,ie[ae+2]=me-fe,ie[ae+3]=ue-Ne,ae+=4,P++}for(se=ae=0;4>se;++se)ue=(N=ie[ae+0]+4)+ie[ae+8],me=N-ie[ae+8],fe=(35468*ie[ae+4]>>16)-Rn(ie[ae+12]),ei(z,K,0,0,ue+(Ne=Rn(ie[ae+4])+(35468*ie[ae+12]>>16))),ei(z,K,1,0,me+fe),ei(z,K,2,0,me-fe),ei(z,K,3,0,ue-Ne),ae++,K+=32}function vp(N,P,z,K){var se=N[P+0]+4,ae=35468*N[P+4]>>16,ie=Rn(N[P+4]),ue=35468*N[P+1]>>16;cd(z,K,0,se+ie,N=Rn(N[P+1]),ue),cd(z,K,1,se+ae,N,ue),cd(z,K,2,se-ae,N,ue),cd(z,K,3,se-ie,N,ue)}function yv(N,P,z,K,se){Ku(N,P,z,K),se&&Ku(N,P+16,z,K+4)}function jp(N,P,z,K){dl(N,P+0,z,K,1),dl(N,P+32,z,K+128,1)}function bv(N,P,z,K){var se;for(N=N[P+0]+4,se=0;4>se;++se)for(P=0;4>P;++P)ei(z,K,P,se,N)}function yp(N,P,z,K){N[P+0]&&Cn(N,P+0,z,K),N[P+16]&&Cn(N,P+16,z,K+4),N[P+32]&&Cn(N,P+32,z,K+128),N[P+48]&&Cn(N,P+48,z,K+128+4)}function Nv(N,P,z,K){var se,ae=i(16);for(se=0;4>se;++se){var ie=N[P+0+se]+N[P+12+se],ue=N[P+4+se]+N[P+8+se],me=N[P+4+se]-N[P+8+se],fe=N[P+0+se]-N[P+12+se];ae[0+se]=ie+ue,ae[8+se]=ie-ue,ae[4+se]=fe+me,ae[12+se]=fe-me}for(se=0;4>se;++se)ie=(N=ae[0+4*se]+3)+ae[3+4*se],ue=ae[1+4*se]+ae[2+4*se],me=ae[1+4*se]-ae[2+4*se],fe=N-ae[3+4*se],z[K+0]=ie+ue>>3,z[K+16]=fe+me>>3,z[K+32]=ie-ue>>3,z[K+48]=fe-me>>3,K+=64}function Yu(N,P,z){var K,se=P-32,ae=ra,ie=255-N[se-1];for(K=0;K<z;++K){var ue,me=ae,fe=ie+N[P-1];for(ue=0;ue<z;++ue)N[P+ue]=me[fe+N[se+ue]];P+=32}}function wv(N,P){Yu(N,P,4)}function Sv(N,P){Yu(N,P,8)}function Cv(N,P){Yu(N,P,16)}function il(N,P){var z;for(z=0;16>z;++z)n(N,P+32*z,N,P-32,16)}function dd(N,P){var z;for(z=16;0<z;--z)a(N,P,N[P-1],16),P+=32}function ud(N,P,z){var K;for(K=0;16>K;++K)a(P,z+32*K,N,16)}function bp(N,P){var z,K=16;for(z=0;16>z;++z)K+=N[P-1+32*z]+N[P+z-32];ud(K>>5,N,P)}function on(N,P){var z,K=8;for(z=0;16>z;++z)K+=N[P-1+32*z];ud(K>>4,N,P)}function Av(N,P){var z,K=8;for(z=0;16>z;++z)K+=N[P+z-32];ud(K>>4,N,P)}function Np(N,P){ud(128,N,P)}function Ot(N,P,z){return N+2*P+z+2>>2}function Tv(N,P){var z,K=P-32;for(K=new Uint8Array([Ot(N[K-1],N[K+0],N[K+1]),Ot(N[K+0],N[K+1],N[K+2]),Ot(N[K+1],N[K+2],N[K+3]),Ot(N[K+2],N[K+3],N[K+4])]),z=0;4>z;++z)n(N,P+32*z,K,0,K.length)}function Ev(N,P){var z=N[P-1],K=N[P-1+32],se=N[P-1+64],ae=N[P-1+96];pe(N,P+0,16843009*Ot(N[P-1-32],z,K)),pe(N,P+32,16843009*Ot(z,K,se)),pe(N,P+64,16843009*Ot(K,se,ae)),pe(N,P+96,16843009*Ot(se,ae,ae))}function Ii(N,P){var z,K=4;for(z=0;4>z;++z)K+=N[P+z-32]+N[P-1+32*z];for(K>>=3,z=0;4>z;++z)a(N,P+32*z,K,4)}function wp(N,P){var z=N[P-1+0],K=N[P-1+32],se=N[P-1+64],ae=N[P-1-32],ie=N[P+0-32],ue=N[P+1-32],me=N[P+2-32],fe=N[P+3-32];N[P+0+96]=Ot(K,se,N[P-1+96]),N[P+1+96]=N[P+0+64]=Ot(z,K,se),N[P+2+96]=N[P+1+64]=N[P+0+32]=Ot(ae,z,K),N[P+3+96]=N[P+2+64]=N[P+1+32]=N[P+0+0]=Ot(ie,ae,z),N[P+3+64]=N[P+2+32]=N[P+1+0]=Ot(ue,ie,ae),N[P+3+32]=N[P+2+0]=Ot(me,ue,ie),N[P+3+0]=Ot(fe,me,ue)}function Sp(N,P){var z=N[P+1-32],K=N[P+2-32],se=N[P+3-32],ae=N[P+4-32],ie=N[P+5-32],ue=N[P+6-32],me=N[P+7-32];N[P+0+0]=Ot(N[P+0-32],z,K),N[P+1+0]=N[P+0+32]=Ot(z,K,se),N[P+2+0]=N[P+1+32]=N[P+0+64]=Ot(K,se,ae),N[P+3+0]=N[P+2+32]=N[P+1+64]=N[P+0+96]=Ot(se,ae,ie),N[P+3+32]=N[P+2+64]=N[P+1+96]=Ot(ae,ie,ue),N[P+3+64]=N[P+2+96]=Ot(ie,ue,me),N[P+3+96]=Ot(ue,me,me)}function md(N,P){var z=N[P-1+0],K=N[P-1+32],se=N[P-1+64],ae=N[P-1-32],ie=N[P+0-32],ue=N[P+1-32],me=N[P+2-32],fe=N[P+3-32];N[P+0+0]=N[P+1+64]=ae+ie+1>>1,N[P+1+0]=N[P+2+64]=ie+ue+1>>1,N[P+2+0]=N[P+3+64]=ue+me+1>>1,N[P+3+0]=me+fe+1>>1,N[P+0+96]=Ot(se,K,z),N[P+0+64]=Ot(K,z,ae),N[P+0+32]=N[P+1+96]=Ot(z,ae,ie),N[P+1+32]=N[P+2+96]=Ot(ae,ie,ue),N[P+2+32]=N[P+3+96]=Ot(ie,ue,me),N[P+3+32]=Ot(ue,me,fe)}function Qu(N,P){var z=N[P+0-32],K=N[P+1-32],se=N[P+2-32],ae=N[P+3-32],ie=N[P+4-32],ue=N[P+5-32],me=N[P+6-32],fe=N[P+7-32];N[P+0+0]=z+K+1>>1,N[P+1+0]=N[P+0+64]=K+se+1>>1,N[P+2+0]=N[P+1+64]=se+ae+1>>1,N[P+3+0]=N[P+2+64]=ae+ie+1>>1,N[P+0+32]=Ot(z,K,se),N[P+1+32]=N[P+0+96]=Ot(K,se,ae),N[P+2+32]=N[P+1+96]=Ot(se,ae,ie),N[P+3+32]=N[P+2+96]=Ot(ae,ie,ue),N[P+3+64]=Ot(ie,ue,me),N[P+3+96]=Ot(ue,me,fe)}function Pv(N,P){var z=N[P-1+0],K=N[P-1+32],se=N[P-1+64],ae=N[P-1+96];N[P+0+0]=z+K+1>>1,N[P+2+0]=N[P+0+32]=K+se+1>>1,N[P+2+32]=N[P+0+64]=se+ae+1>>1,N[P+1+0]=Ot(z,K,se),N[P+3+0]=N[P+1+32]=Ot(K,se,ae),N[P+3+32]=N[P+1+64]=Ot(se,ae,ae),N[P+3+64]=N[P+2+64]=N[P+0+96]=N[P+1+96]=N[P+2+96]=N[P+3+96]=ae}function Dv(N,P){var z=N[P-1+0],K=N[P-1+32],se=N[P-1+64],ae=N[P-1+96],ie=N[P-1-32],ue=N[P+0-32],me=N[P+1-32],fe=N[P+2-32];N[P+0+0]=N[P+2+32]=z+ie+1>>1,N[P+0+32]=N[P+2+64]=K+z+1>>1,N[P+0+64]=N[P+2+96]=se+K+1>>1,N[P+0+96]=ae+se+1>>1,N[P+3+0]=Ot(ue,me,fe),N[P+2+0]=Ot(ie,ue,me),N[P+1+0]=N[P+3+32]=Ot(z,ie,ue),N[P+1+32]=N[P+3+64]=Ot(K,z,ie),N[P+1+64]=N[P+3+96]=Ot(se,K,z),N[P+1+96]=Ot(ae,se,K)}function Iv(N,P){var z;for(z=0;8>z;++z)n(N,P+32*z,N,P-32,8)}function Zu(N,P){var z;for(z=0;8>z;++z)a(N,P,N[P-1],8),P+=32}function tc(N,P,z){var K;for(K=0;8>K;++K)a(P,z+32*K,N,8)}function $l(N,P){var z,K=8;for(z=0;8>z;++z)K+=N[P+z-32]+N[P-1+32*z];tc(K>>4,N,P)}function kv(N,P){var z,K=4;for(z=0;8>z;++z)K+=N[P+z-32];tc(K>>3,N,P)}function sc(N,P){var z,K=4;for(z=0;8>z;++z)K+=N[P-1+32*z];tc(K>>3,N,P)}function Ju(N,P){tc(128,N,P)}function hd(N,P,z){var K=N[P-z],se=N[P+0],ae=3*(se-K)+Ov[1020+N[P-2*z]-N[P+z]],ie=_p[112+(ae+4>>3)];N[P-z]=ra[255+K+_p[112+(ae+3>>3)]],N[P+0]=ra[255+se-ie]}function Cp(N,P,z,K){var se=N[P+0],ae=N[P+z];return Ia[255+N[P-2*z]-N[P-z]]>K||Ia[255+ae-se]>K}function Ap(N,P,z,K){return 4*Ia[255+N[P-z]-N[P+0]]+Ia[255+N[P-2*z]-N[P+z]]<=K}function Tp(N,P,z,K,se){var ae=N[P-3*z],ie=N[P-2*z],ue=N[P-z],me=N[P+0],fe=N[P+z],Ne=N[P+2*z],Me=N[P+3*z];return 4*Ia[255+ue-me]+Ia[255+ie-fe]>K?0:Ia[255+N[P-4*z]-ae]<=se&&Ia[255+ae-ie]<=se&&Ia[255+ie-ue]<=se&&Ia[255+Me-Ne]<=se&&Ia[255+Ne-fe]<=se&&Ia[255+fe-me]<=se}function Ep(N,P,z,K){var se=2*K+1;for(K=0;16>K;++K)Ap(N,P+K,z,se)&&hd(N,P+K,z)}function ki(N,P,z,K){var se=2*K+1;for(K=0;16>K;++K)Ap(N,P+K*z,1,se)&&hd(N,P+K*z,1)}function ll(N,P,z,K){var se;for(se=3;0<se;--se)Ep(N,P+=4*z,z,K)}function Lv(N,P,z,K){var se;for(se=3;0<se;--se)ki(N,P+=4,z,K)}function Bl(N,P,z,K,se,ae,ie,ue){for(ae=2*ae+1;0<se--;){if(Tp(N,P,z,ae,ie))if(Cp(N,P,z,ue))hd(N,P,z);else{var me=N,fe=P,Ne=z,Me=me[fe-2*Ne],_e=me[fe-Ne],Ie=me[fe+0],Ze=me[fe+Ne],Ve=me[fe+2*Ne],Ce=27*(Ke=Ov[1020+3*(Ie-_e)+Ov[1020+Me-Ze]])+63>>7,Te=18*Ke+63>>7,Ke=9*Ke+63>>7;me[fe-3*Ne]=ra[255+me[fe-3*Ne]+Ke],me[fe-2*Ne]=ra[255+Me+Te],me[fe-Ne]=ra[255+_e+Ce],me[fe+0]=ra[255+Ie-Ce],me[fe+Ne]=ra[255+Ze-Te],me[fe+2*Ne]=ra[255+Ve-Ke]}P+=K}}function ti(N,P,z,K,se,ae,ie,ue){for(ae=2*ae+1;0<se--;){if(Tp(N,P,z,ae,ie))if(Cp(N,P,z,ue))hd(N,P,z);else{var me=N,fe=P,Ne=z,Me=me[fe-Ne],_e=me[fe+0],Ie=me[fe+Ne],Ze=_p[112+((Ve=3*(_e-Me))+4>>3)],Ve=_p[112+(Ve+3>>3)],Ce=Ze+1>>1;me[fe-2*Ne]=ra[255+me[fe-2*Ne]+Ce],me[fe-Ne]=ra[255+Me+Ve],me[fe+0]=ra[255+_e-Ze],me[fe+Ne]=ra[255+Ie-Ce]}P+=K}}function Xu(N,P,z,K,se,ae){Bl(N,P,z,1,16,K,se,ae)}function rc(N,P,z,K,se,ae){Bl(N,P,1,z,16,K,se,ae)}function Fv(N,P,z,K,se,ae){var ie;for(ie=3;0<ie;--ie)ti(N,P+=4*z,z,1,16,K,se,ae)}function pd(N,P,z,K,se,ae){var ie;for(ie=3;0<ie;--ie)ti(N,P+=4,1,z,16,K,se,ae)}function Rv(N,P,z,K,se,ae,ie,ue){Bl(N,P,se,1,8,ae,ie,ue),Bl(z,K,se,1,8,ae,ie,ue)}function em(N,P,z,K,se,ae,ie,ue){Bl(N,P,1,se,8,ae,ie,ue),Bl(z,K,1,se,8,ae,ie,ue)}function tm(N,P,z,K,se,ae,ie,ue){ti(N,P+4*se,se,1,8,ae,ie,ue),ti(z,K+4*se,se,1,8,ae,ie,ue)}function Pp(N,P,z,K,se,ae,ie,ue){ti(N,P+4,1,se,8,ae,ie,ue),ti(z,K+4,1,se,8,ae,ie,ue)}function fd(){this.ba=new Ya,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ir,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sm(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rm(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dp(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new A}function Mv(){this.xb=this.a=0,this.l=new od,this.ca=new Ya,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _,this.Pb=0,this.wd=new _,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dp,this.ab=0,this.gc=l(4,rm),this.Oc=0}function xd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new od,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nc(N,P,z,K,se,ae,ie){for(N=N==null?0:N[P+0],P=0;P<ie;++P)se[ae+P]=N+z[K+P]&255,N=se[ae+P]}function nm(N,P,z,K,se,ae,ie){var ue;if(N==null)nc(null,null,z,K,se,ae,ie);else for(ue=0;ue<ie;++ue)se[ae+ue]=N[P+ue]+z[K+ue]&255}function zl(N,P,z,K,se,ae,ie){if(N==null)nc(null,null,z,K,se,ae,ie);else{var ue,me=N[P+0],fe=me,Ne=me;for(ue=0;ue<ie;++ue)fe=Ne+(me=N[P+ue])-fe,Ne=z[K+ue]+(-256&fe?0>fe?0:255:fe)&255,fe=me,se[ae+ue]=Ne}}function am(N,P,z,K){var se=P.width,ae=P.o;if(s(N!=null&&P!=null),0>z||0>=K||z+K>ae)return null;if(!N.Cc){if(N.ga==null){var ie;if(N.ga=new xd,(ie=N.ga==null)||(ie=P.width*P.o,s(N.Gb.length==0),N.Gb=i(ie),N.Uc=0,N.Gb==null?ie=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,ie=1),ie=!ie),!ie){ie=N.ga;var ue=N.Fa,me=N.P,fe=N.qc,Ne=N.mb,Me=N.nb,_e=me+1,Ie=fe-1,Ze=ie.l;if(s(ue!=null&&Ne!=null&&P!=null),Gl[0]=null,Gl[1]=nc,Gl[2]=nm,Gl[3]=zl,ie.ca=Ne,ie.tb=Me,ie.c=P.width,ie.i=P.height,s(0<ie.c&&0<ie.i),1>=fe)P=0;else if(ie.$a=ue[me+0]>>0&3,ie.Z=ue[me+0]>>2&3,ie.Lc=ue[me+0]>>4&3,me=ue[me+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||me)P=0;else if(Ze.put=Ai,Ze.ac=Yr,Ze.bc=Ti,Ze.ma=ie,Ze.width=P.width,Ze.height=P.height,Ze.Da=P.Da,Ze.v=P.v,Ze.va=P.va,Ze.j=P.j,Ze.o=P.o,ie.$a)e:{s(ie.$a==1),P=Aa();t:for(;;){if(P==null){P=0;break e}if(s(ie!=null),ie.mc=P,P.c=ie.c,P.i=ie.i,P.l=ie.l,P.l.ma=ie,P.l.width=ie.c,P.l.height=ie.i,P.a=0,$(P.m,ue,_e,Ie),!Di(ie.c,ie.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&al(P.s)?(ie.ic=1,ue=P.c*P.i,P.Ta=null,P.Ua=0,P.V=i(ue),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(ie.ic=0,P=ec(P,ie.c)),!P))break t;P=1;break e}ie.mc=null,P=0}else P=Ie>=ie.c*ie.i;ie=!P}if(ie)return null;N.ga.Lc!=1?N.Ga=0:K=ae-z}s(N.ga!=null),s(z+K<=ae);e:{if(P=(ue=N.ga).c,ae=ue.l.o,ue.$a==0){if(_e=N.rc,Ie=N.Vc,Ze=N.Fa,me=N.P+1+z*P,fe=N.mb,Ne=N.nb+z*P,s(me<=N.P+N.qc),ue.Z!=0)for(s(Gl[ue.Z]!=null),ie=0;ie<K;++ie)Gl[ue.Z](_e,Ie,Ze,me,fe,Ne,P),_e=fe,Ie=Ne,Ne+=P,me+=P;else for(ie=0;ie<K;++ie)n(fe,Ne,Ze,me,P),_e=fe,Ie=Ne,Ne+=P,me+=P;N.rc=_e,N.Vc=Ie}else{if(s(ue.mc!=null),P=z+K,s((ie=ue.mc)!=null),s(P<=ie.i),ie.C>=P)P=1;else if(ue.ic||Fe(),ue.ic){ue=ie.V,_e=ie.Ba,Ie=ie.c;var Ve=ie.i,Ce=(Ze=1,me=ie.$/Ie,fe=ie.$%Ie,Ne=ie.m,Me=ie.s,ie.$),Te=Ie*Ve,Ke=Ie*P,Xe=Me.wc,Qe=Ce<Ke?Cr(Me,fe,me):null;s(Ce<=Te),s(P<=Ve),s(al(Me));t:for(;;){for(;!Ne.h&&Ce<Ke;){if(fe&Xe||(Qe=Cr(Me,fe,me)),s(Qe!=null),Y(Ne),256>(Ve=Fn(Qe.G[0],Qe.H[0],Ne)))ue[_e+Ce]=Ve,++Ce,++fe>=Ie&&(fe=0,++me<=P&&!(me%16)&&Ja(ie,me));else{if(!(280>Ve)){Ze=0;break t}Ve=Qa(Ve-256,Ne);var ft,mt=Fn(Qe.G[4],Qe.H[4],Ne);if(Y(Ne),!(Ce>=(mt=Ei(Ie,mt=Qa(mt,Ne)))&&Te-Ce>=Ve)){Ze=0;break t}for(ft=0;ft<Ve;++ft)ue[_e+Ce+ft]=ue[_e+Ce+ft-mt];for(Ce+=Ve,fe+=Ve;fe>=Ie;)fe-=Ie,++me<=P&&!(me%16)&&Ja(ie,me);Ce<Ke&&fe&Xe&&(Qe=Cr(Me,fe,me))}s(Ne.h==Q(Ne))}Ja(ie,me>P?P:me);break t}!Ze||Ne.h&&Ce<Te?(Ze=0,ie.a=Ne.h?5:3):ie.$=Ce,P=Ze}else P=Xa(ie,ie.V,ie.Ba,ie.c,ie.i,P,rd);if(!P){K=0;break e}}z+K>=ae&&(N.Cc=1),K=1}if(!K)return null;if(N.Cc&&((K=N.ga)!=null&&(K.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+z*se}function O(N,P,z,K,se,ae){for(;0<se--;){var ie,ue=N,me=P+(z?1:0),fe=N,Ne=P+(z?0:3);for(ie=0;ie<K;++ie){var Me=fe[Ne+4*ie];Me!=255&&(Me*=32897,ue[me+4*ie+0]=ue[me+4*ie+0]*Me>>23,ue[me+4*ie+1]=ue[me+4*ie+1]*Me>>23,ue[me+4*ie+2]=ue[me+4*ie+2]*Me>>23)}P+=ae}}function re(N,P,z,K,se){for(;0<K--;){var ae;for(ae=0;ae<z;++ae){var ie=N[P+2*ae+0],ue=15&(fe=N[P+2*ae+1]),me=4369*ue,fe=(240&fe|fe>>4)*me>>16;N[P+2*ae+0]=(240&ie|ie>>4)*me>>16&240|(15&ie|ie<<4)*me>>16>>4&15,N[P+2*ae+1]=240&fe|ue}P+=se}}function ve(N,P,z,K,se,ae,ie,ue){var me,fe,Ne=255;for(fe=0;fe<se;++fe){for(me=0;me<K;++me){var Me=N[P+me];ae[ie+4*me]=Me,Ne&=Me}P+=z,ie+=ue}return Ne!=255}function be(N,P,z,K,se){var ae;for(ae=0;ae<se;++ae)z[K+ae]=N[P+ae]>>8}function Fe(){Da=O,Ms=re,_s=ve,fr=be}function Ue(N,P,z){C[N]=function(K,se,ae,ie,ue,me,fe,Ne,Me,_e,Ie,Ze,Ve,Ce,Te,Ke,Xe){var Qe,ft=Xe-1>>1,mt=ue[me+0]|fe[Ne+0]<<16,Dt=Me[_e+0]|Ie[Ze+0]<<16;s(K!=null);var ht=3*mt+Dt+131074>>2;for(P(K[se+0],255&ht,ht>>16,Ve,Ce),ae!=null&&(ht=3*Dt+mt+131074>>2,P(ae[ie+0],255&ht,ht>>16,Te,Ke)),Qe=1;Qe<=ft;++Qe){var fs=ue[me+Qe]|fe[Ne+Qe]<<16,ws=Me[_e+Qe]|Ie[Ze+Qe]<<16,is=mt+fs+Dt+ws+524296,rs=is+2*(fs+Dt)>>3;ht=rs+mt>>1,mt=(is=is+2*(mt+ws)>>3)+fs>>1,P(K[se+2*Qe-1],255&ht,ht>>16,Ve,Ce+(2*Qe-1)*z),P(K[se+2*Qe-0],255&mt,mt>>16,Ve,Ce+(2*Qe-0)*z),ae!=null&&(ht=is+Dt>>1,mt=rs+ws>>1,P(ae[ie+2*Qe-1],255&ht,ht>>16,Te,Ke+(2*Qe-1)*z),P(ae[ie+2*Qe+0],255&mt,mt>>16,Te,Ke+(2*Qe+0)*z)),mt=fs,Dt=ws}1&Xe||(ht=3*mt+Dt+131074>>2,P(K[se+Xe-1],255&ht,ht>>16,Ve,Ce+(Xe-1)*z),ae!=null&&(ht=3*Dt+mt+131074>>2,P(ae[ie+Xe-1],255&ht,ht>>16,Te,Ke+(Xe-1)*z)))}}function et(){ka[Op]=ZI,ka[$p]=Yb,ka[qb]=JI,ka[Bp]=Qb,ka[zp]=Zb,ka[$v]=Jb,ka[Hb]=XI,ka[Bv]=Yb,ka[zv]=Qb,ka[Vp]=Zb,ka[Vv]=Jb}function pt(N){return N&-16384?0>N?0:255:N>>ek}function Tt(N,P){return pt((19077*N>>8)+(26149*P>>8)-14234)}function Ht(N,P,z){return pt((19077*N>>8)-(6419*P>>8)-(13320*z>>8)+8708)}function Ut(N,P){return pt((19077*N>>8)+(33050*P>>8)-17685)}function as(N,P,z,K,se){K[se+0]=Tt(N,z),K[se+1]=Ht(N,P,z),K[se+2]=Ut(N,P)}function Qs(N,P,z,K,se){K[se+0]=Ut(N,P),K[se+1]=Ht(N,P,z),K[se+2]=Tt(N,z)}function lr(N,P,z,K,se){var ae=Ht(N,P,z);P=ae<<3&224|Ut(N,P)>>3,K[se+0]=248&Tt(N,z)|ae>>5,K[se+1]=P}function Ar(N,P,z,K,se){var ae=240&Ut(N,P)|15;K[se+0]=240&Tt(N,z)|Ht(N,P,z)>>4,K[se+1]=ae}function cn(N,P,z,K,se){K[se+0]=255,as(N,P,z,K,se+1)}function $r(N,P,z,K,se){Qs(N,P,z,K,se),K[se+3]=255}function si(N,P,z,K,se){as(N,P,z,K,se),K[se+3]=255}function sa(N,P){return 0>N?0:N>P?P:N}function Li(N,P,z){C[N]=function(K,se,ae,ie,ue,me,fe,Ne,Me){for(var _e=Ne+(-2&Me)*z;Ne!=_e;)P(K[se+0],ae[ie+0],ue[me+0],fe,Ne),P(K[se+1],ae[ie+0],ue[me+0],fe,Ne+z),se+=2,++ie,++me,Ne+=2*z;1&Me&&P(K[se+0],ae[ie+0],ue[me+0],fe,Ne)}}function Ip(N,P,z){return z==0?N==0?P==0?6:5:P==0?4:0:z}function im(N,P,z,K,se){switch(N>>>30){case 3:dl(P,z,K,se,0);break;case 2:pr(P,z,K,se);break;case 1:Cn(P,z,K,se)}}function lm(N,P){var z,K,se=P.M,ae=P.Nb,ie=N.oc,ue=N.pc+40,me=N.oc,fe=N.pc+584,Ne=N.oc,Me=N.pc+600;for(z=0;16>z;++z)ie[ue+32*z-1]=129;for(z=0;8>z;++z)me[fe+32*z-1]=129,Ne[Me+32*z-1]=129;for(0<se?ie[ue-1-32]=me[fe-1-32]=Ne[Me-1-32]=129:(a(ie,ue-32-1,127,21),a(me,fe-32-1,127,9),a(Ne,Me-32-1,127,9)),K=0;K<N.za;++K){var _e=P.ya[P.aa+K];if(0<K){for(z=-1;16>z;++z)n(ie,ue+32*z-4,ie,ue+32*z+12,4);for(z=-1;8>z;++z)n(me,fe+32*z-4,me,fe+32*z+4,4),n(Ne,Me+32*z-4,Ne,Me+32*z+4,4)}var Ie=N.Gd,Ze=N.Hd+K,Ve=_e.ad,Ce=_e.Hc;if(0<se&&(n(ie,ue-32,Ie[Ze].y,0,16),n(me,fe-32,Ie[Ze].f,0,8),n(Ne,Me-32,Ie[Ze].ea,0,8)),_e.Za){var Te=ie,Ke=ue-32+16;for(0<se&&(K>=N.za-1?a(Te,Ke,Ie[Ze].y[15],4):n(Te,Ke,Ie[Ze+1].y,0,4)),z=0;4>z;z++)Te[Ke+128+z]=Te[Ke+256+z]=Te[Ke+384+z]=Te[Ke+0+z];for(z=0;16>z;++z,Ce<<=2)Te=ie,Ke=ue+eN[z],ri[_e.Ob[z]](Te,Ke),im(Ce,Ve,16*+z,Te,Ke)}else if(Te=Ip(K,se,_e.Ob[0]),Wl[Te](ie,ue),Ce!=0)for(z=0;16>z;++z,Ce<<=2)im(Ce,Ve,16*+z,ie,ue+eN[z]);for(z=_e.Gc,Te=Ip(K,se,_e.Dd),ml[Te](me,fe),ml[Te](Ne,Me),Ce=Ve,Te=me,Ke=fe,255&(_e=z>>0)&&(170&_e?mm(Ce,256,Te,Ke):Ea(Ce,256,Te,Ke)),_e=Ne,Ce=Me,255&(z>>=8)&&(170&z?mm(Ve,320,_e,Ce):Ea(Ve,320,_e,Ce)),se<N.Ub-1&&(n(Ie[Ze].y,0,ie,ue+480,16),n(Ie[Ze].f,0,me,fe+224,8),n(Ie[Ze].ea,0,Ne,Me+224,8)),z=8*ae*N.B,Ie=N.sa,Ze=N.ta+16*K+16*ae*N.R,Ve=N.qa,_e=N.ra+8*K+z,Ce=N.Ha,Te=N.Ia+8*K+z,z=0;16>z;++z)n(Ie,Ze+z*N.R,ie,ue+32*z,16);for(z=0;8>z;++z)n(Ve,_e+z*N.B,me,fe+32*z,8),n(Ce,Te+z*N.B,Ne,Me+32*z,8)}}function gd(N,P,z,K,se,ae,ie,ue,me){var fe=[0],Ne=[0],Me=0,_e=me!=null?me.kd:0,Ie=me??new sm;if(N==null||12>z)return 7;Ie.data=N,Ie.w=P,Ie.ha=z,P=[P],z=[z],Ie.gb=[Ie.gb];e:{var Ze=P,Ve=z,Ce=Ie.gb;if(s(N!=null),s(Ve!=null),s(Ce!=null),Ce[0]=0,12<=Ve[0]&&!r(N,Ze[0],"RIFF")){if(r(N,Ze[0]+8,"WEBP")){Ce=3;break e}var Te=Re(N,Ze[0]+4);if(12>Te||4294967286<Te){Ce=3;break e}if(_e&&Te>Ve[0]-8){Ce=7;break e}Ce[0]=Te,Ze[0]+=12,Ve[0]-=12}Ce=0}if(Ce!=0)return Ce;for(Te=0<Ie.gb[0],z=z[0];;){e:{var Ke=N;Ve=P,Ce=z;var Xe=fe,Qe=Ne,ft=Ze=[0];if((ht=Me=[Me])[0]=0,8>Ce[0])Ce=7;else{if(!r(Ke,Ve[0],"VP8X")){if(Re(Ke,Ve[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var mt=Re(Ke,Ve[0]+8),Dt=1+we(Ke,Ve[0]+12);if(2147483648<=Dt*(Ke=1+we(Ke,Ve[0]+15))){Ce=3;break e}ft!=null&&(ft[0]=mt),Xe!=null&&(Xe[0]=Dt),Qe!=null&&(Qe[0]=Ke),Ve[0]+=18,Ce[0]-=18,ht[0]=1}Ce=0}}if(Me=Me[0],Ze=Ze[0],Ce!=0)return Ce;if(Ve=!!(2&Ze),!Te&&Me)return 3;if(ae!=null&&(ae[0]=!!(16&Ze)),ie!=null&&(ie[0]=Ve),ue!=null&&(ue[0]=0),ie=fe[0],Ze=Ne[0],Me&&Ve&&me==null){Ce=0;break}if(4>z){Ce=7;break}if(Te&&Me||!Te&&!Me&&!r(N,P[0],"ALPH")){z=[z],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{mt=N,Ce=P,Te=z;var ht=Ie.gb;Xe=Ie.na,Qe=Ie.P,ft=Ie.Sa,Dt=22,s(mt!=null),s(Te!=null),Ke=Ce[0];var fs=Te[0];for(s(Xe!=null),s(ft!=null),Xe[0]=null,Qe[0]=null,ft[0]=0;;){if(Ce[0]=Ke,Te[0]=fs,8>fs){Ce=7;break e}var ws=Re(mt,Ke+4);if(4294967286<ws){Ce=3;break e}var is=8+ws+1&-2;if(Dt+=is,0<ht&&Dt>ht){Ce=3;break e}if(!r(mt,Ke,"VP8 ")||!r(mt,Ke,"VP8L")){Ce=0;break e}if(fs[0]<is){Ce=7;break e}r(mt,Ke,"ALPH")||(Xe[0]=mt,Qe[0]=Ke+8,ft[0]=ws),Ke+=is,fs-=is}}if(z=z[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Ce!=0)break}z=[z],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(ht=N,Ce=P,Te=z,Xe=Ie.gb[0],Qe=Ie.Ja,ft=Ie.xa,mt=Ce[0],Ke=!r(ht,mt,"VP8 "),Dt=!r(ht,mt,"VP8L"),s(ht!=null),s(Te!=null),s(Qe!=null),s(ft!=null),8>Te[0])Ce=7;else{if(Ke||Dt){if(ht=Re(ht,mt+4),12<=Xe&&ht>Xe-12){Ce=3;break e}if(_e&&ht>Te[0]-8){Ce=7;break e}Qe[0]=ht,Ce[0]+=8,Te[0]-=8,ft[0]=Dt}else ft[0]=5<=Te[0]&&ht[mt+0]==47&&!(ht[mt+4]>>5),Qe[0]=Te[0];Ce=0}if(z=z[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],P=P[0],Ce!=0)break;if(4294967286<Ie.Ja)return 3;if(ue==null||Ve||(ue[0]=Ie.xa?2:1),ie=[ie],Ze=[Ze],Ie.xa){if(5>z){Ce=7;break}ue=ie,_e=Ze,Ve=ae,N==null||5>z?N=0:5<=z&&N[P+0]==47&&!(N[P+4]>>5)?(Te=[0],ht=[0],Xe=[0],$(Qe=new _,N,P,z),It(Qe,Te,ht,Xe)?(ue!=null&&(ue[0]=Te[0]),_e!=null&&(_e[0]=ht[0]),Ve!=null&&(Ve[0]=Xe[0]),N=1):N=0):N=0}else{if(10>z){Ce=7;break}ue=Ze,N==null||10>z||!fp(N,P+3,z-3)?N=0:(_e=N[P+0]|N[P+1]<<8|N[P+2]<<16,Ve=16383&(N[P+7]<<8|N[P+6]),N=16383&(N[P+9]<<8|N[P+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=Ie.Ja||!Ve||!N?N=0:(ie&&(ie[0]=Ve),ue&&(ue[0]=N),N=1))}if(!N||(ie=ie[0],Ze=Ze[0],Me&&(fe[0]!=ie||Ne[0]!=Ze)))return 3;me!=null&&(me[0]=Ie,me.offset=P-me.w,s(4294967286>P-me.w),s(me.offset==me.ha-z));break}return Ce==0||Ce==7&&Me&&me==null?(ae!=null&&(ae[0]|=Ie.na!=null&&0<Ie.na.length),K!=null&&(K[0]=ie),se!=null&&(se[0]=Ze),0):Ce}function om(N,P,z){var K=P.width,se=P.height,ae=0,ie=0,ue=K,me=se;if(P.Da=N!=null&&0<N.Da,P.Da&&(ue=N.cd,me=N.bd,ae=N.v,ie=N.j,11>z||(ae&=-2,ie&=-2),0>ae||0>ie||0>=ue||0>=me||ae+ue>K||ie+me>se))return 0;if(P.v=ae,P.j=ie,P.va=ae+ue,P.o=ie+me,P.U=ue,P.T=me,P.da=N!=null&&0<N.da,P.da){if(!ke(ue,me,z=[N.ib],ae=[N.hb]))return 0;P.ib=z[0],P.hb=ae[0]}return P.ob=N!=null&&N.ob,P.Kb=N==null||!N.Sd,P.da&&(P.ob=P.ib<3*K/4&&P.hb<3*se/4,P.Kb=0),1}function cm(N){if(N==null)return 2;if(11>N.S){var P=N.f.RGBA;P.fb+=(N.height-1)*P.A,P.A=-P.A}else P=N.f.kb,N=N.height,P.O+=(N-1)*P.fa,P.fa=-P.fa,P.N+=(N-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(N-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(N-1)*P.lb,P.lb=-P.lb);return 0}function vd(N,P,z,K){if(K==null||0>=N||0>=P)return 2;if(z!=null){if(z.Da){var se=z.cd,ae=z.bd,ie=-2&z.v,ue=-2&z.j;if(0>ie||0>ue||0>=se||0>=ae||ie+se>N||ue+ae>P)return 2;N=se,P=ae}if(z.da){if(!ke(N,P,se=[z.ib],ae=[z.hb]))return 2;N=se[0],P=ae[0]}}K.width=N,K.height=P;e:{var me=K.width,fe=K.height;if(N=K.S,0>=me||0>=fe||!(N>=Op&&13>N))N=2;else{if(0>=K.Rd&&K.sd==null){ie=ae=se=P=0;var Ne=(ue=me*tN[N])*fe;if(11>N||(ae=(fe+1)/2*(P=(me+1)/2),N==12&&(ie=(se=me)*fe)),(fe=i(Ne+2*ae+ie))==null){N=1;break e}K.sd=fe,11>N?((me=K.f.RGBA).eb=fe,me.fb=0,me.A=ue,me.size=Ne):((me=K.f.kb).y=fe,me.O=0,me.fa=ue,me.Fd=Ne,me.f=fe,me.N=0+Ne,me.Ab=P,me.Cd=ae,me.ea=fe,me.W=0+Ne+ae,me.Db=P,me.Ed=ae,N==12&&(me.F=fe,me.J=0+Ne+2*ae),me.Tc=ie,me.lb=se)}if(P=1,se=K.S,ae=K.width,ie=K.height,se>=Op&&13>se)if(11>se)N=K.f.RGBA,P&=(ue=Math.abs(N.A))*(ie-1)+ae<=N.size,P&=ue>=ae*tN[se],P&=N.eb!=null;else{N=K.f.kb,ue=(ae+1)/2,Ne=(ie+1)/2,me=Math.abs(N.fa),fe=Math.abs(N.Ab);var Me=Math.abs(N.Db),_e=Math.abs(N.lb),Ie=_e*(ie-1)+ae;P&=me*(ie-1)+ae<=N.Fd,P&=fe*(Ne-1)+ue<=N.Cd,P=(P&=Me*(Ne-1)+ue<=N.Ed)&me>=ae&fe>=ue&Me>=ue,P&=N.y!=null,P&=N.f!=null,P&=N.ea!=null,se==12&&(P&=_e>=ae,P&=Ie<=N.Tc,P&=N.F!=null)}else P=0;N=P?0:2}}return N!=0||z!=null&&z.fd&&(N=cm(K)),N}var Qr=64,jd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yd=24,bd=32,dm=8,Mn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];qe("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(N){return N},C.Predictor2=function(N,P,z){return P[z+0]},C.Predictor3=function(N,P,z){return P[z+1]},C.Predictor4=function(N,P,z){return P[z-1]},C.Predictor5=function(N,P,z){return at(at(N,P[z+1]),P[z+0])},C.Predictor6=function(N,P,z){return at(N,P[z-1])},C.Predictor7=function(N,P,z){return at(N,P[z+0])},C.Predictor8=function(N,P,z){return at(P[z-1],P[z+0])},C.Predictor9=function(N,P,z){return at(P[z+0],P[z+1])},C.Predictor10=function(N,P,z){return at(at(N,P[z-1]),at(P[z+0],P[z+1]))},C.Predictor11=function(N,P,z){var K=P[z+0];return 0>=We(K>>24&255,N>>24&255,(P=P[z-1])>>24&255)+We(K>>16&255,N>>16&255,P>>16&255)+We(K>>8&255,N>>8&255,P>>8&255)+We(255&K,255&N,255&P)?K:N},C.Predictor12=function(N,P,z){var K=P[z+0];return(He((N>>24&255)+(K>>24&255)-((P=P[z-1])>>24&255))<<24|He((N>>16&255)+(K>>16&255)-(P>>16&255))<<16|He((N>>8&255)+(K>>8&255)-(P>>8&255))<<8|He((255&N)+(255&K)-(255&P)))>>>0},C.Predictor13=function(N,P,z){var K=P[z-1];return(Le((N=at(N,P[z+0]))>>24&255,K>>24&255)<<24|Le(N>>16&255,K>>16&255)<<16|Le(N>>8&255,K>>8&255)<<8|Le(N>>0&255,K>>0&255))>>>0};var _v=C.PredictorAdd0;C.PredictorAdd1=ut,qe("Predictor2","PredictorAdd2"),qe("Predictor3","PredictorAdd3"),qe("Predictor4","PredictorAdd4"),qe("Predictor5","PredictorAdd5"),qe("Predictor6","PredictorAdd6"),qe("Predictor7","PredictorAdd7"),qe("Predictor8","PredictorAdd8"),qe("Predictor9","PredictorAdd9"),qe("Predictor10","PredictorAdd10"),qe("Predictor11","PredictorAdd11"),qe("Predictor12","PredictorAdd12"),qe("Predictor13","PredictorAdd13");var um=C.PredictorAdd2;Lt("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var kp,Ta=C.ColorIndexInverseTransform,Nd=C.MapARGB,Lp=C.VP8LColorIndexInverseTransformAlpha,Fp=C.MapAlpha,Vl=C.VP8LPredictorsAdd=[];Vl.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var ac,_n,Sn,Ul,ol,cl,wd,dl,pr,mm,Cn,Ea,Sd,Rp,hm,ic,lc,ql,oc,Cd,cc,Hl,pm,Pa,Da,Ms,_s,fr,Rr=i(511),ul=i(2041),fm=i(225),Ad=i(767),Mp=0,Ov=ul,_p=fm,ra=Ad,Ia=Rr,Op=0,$p=1,qb=2,Bp=3,zp=4,$v=5,Hb=6,Bv=7,zv=8,Vp=9,Vv=10,_I=[2,3,7],OI=[3,3,11],Wb=[280,256,256,256,40],$I=[0,1,1,1,0],BI=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],VI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],UI=8,Uv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],qv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],xm=null,qI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],HI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],WI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],GI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],KI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],YI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Wl=[],ri=[],ml=[],QI=1,Kb=2,Gl=[],ka=[];Ue("UpsampleRgbLinePair",as,3),Ue("UpsampleBgrLinePair",Qs,3),Ue("UpsampleRgbaLinePair",si,4),Ue("UpsampleBgraLinePair",$r,4),Ue("UpsampleArgbLinePair",cn,4),Ue("UpsampleRgba4444LinePair",Ar,2),Ue("UpsampleRgb565LinePair",lr,2);var ZI=C.UpsampleRgbLinePair,JI=C.UpsampleBgrLinePair,Yb=C.UpsampleRgbaLinePair,Qb=C.UpsampleBgraLinePair,Zb=C.UpsampleArgbLinePair,Jb=C.UpsampleRgba4444LinePair,XI=C.UpsampleRgb565LinePair,Up=16,qp=1<<Up-1,gm=-227,Hv=482,ek=6,Xb=0,tk=i(256),sk=i(256),rk=i(256),nk=i(256),ak=i(Hv-gm),ik=i(Hv-gm);Li("YuvToRgbRow",as,3),Li("YuvToBgrRow",Qs,3),Li("YuvToRgbaRow",si,4),Li("YuvToBgraRow",$r,4),Li("YuvToArgbRow",cn,4),Li("YuvToRgba4444Row",Ar,2),Li("YuvToRgb565Row",lr,2);var eN=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hp=[0,2,8],lk=[8,7,6,4,4,2,2,2,1,1,1,1],ok=1;this.WebPDecodeRGBA=function(N,P,z,K,se){var ae=$p,ie=new fd,ue=new Ya;ie.ba=ue,ue.S=ae,ue.width=[ue.width],ue.height=[ue.height];var me=ue.width,fe=ue.height,Ne=new nl;if(Ne==null||N==null)var Me=2;else s(Ne!=null),Me=gd(N,P,z,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Me!=0?me=0:(me!=null&&(me[0]=Ne.width[0]),fe!=null&&(fe[0]=Ne.height[0]),me=1),me){ue.width=ue.width[0],ue.height=ue.height[0],K!=null&&(K[0]=ue.width),se!=null&&(se[0]=ue.height);e:{if(K=new od,(se=new sm).data=N,se.w=P,se.ha=z,se.kd=1,P=[0],s(se!=null),((N=gd(se.data,se.w,se.ha,null,null,null,P,null,se))==0||N==7)&&P[0]&&(N=4),(P=N)==0){if(s(ie!=null),K.data=se.data,K.w=se.w+se.offset,K.ha=se.ha-se.offset,K.put=Ai,K.ac=Yr,K.bc=Ti,K.ma=ie,se.xa){if((N=Aa())==null){ie=1;break e}if(function(_e,Ie){var Ze=[0],Ve=[0],Ce=[0];t:for(;;){if(_e==null)return 0;if(Ie==null)return _e.a=2,0;if(_e.l=Ie,_e.a=0,$(_e.m,Ie.data,Ie.w,Ie.ha),!It(_e.m,Ze,Ve,Ce)){_e.a=3;break t}if(_e.xb=Kb,Ie.width=Ze[0],Ie.height=Ve[0],!Di(Ze[0],Ve[0],1,_e,null))break t;return 1}return s(_e.a!=0),0}(N,K)){if(K=(P=vd(K.width,K.height,ie.Oa,ie.ba))==0){t:{K=N;s:for(;;){if(K==null){K=0;break t}if(s(K.s.yc!=null),s(K.s.Ya!=null),s(0<K.s.Wb),s((z=K.l)!=null),s((se=z.ma)!=null),K.xb!=0){if(K.ca=se.ba,K.tb=se.tb,s(K.ca!=null),!om(se.Oa,z,Bp)){K.a=2;break s}if(!ec(K,z.width)||z.da)break s;if((z.da||ns(K.ca.S))&&Fe(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&Fe()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ye(K.s.vb,K.s.Wa.Xa)){K.a=1;break s}K.xb=0}if(!Xa(K,K.V,K.Ba,K.c,K.i,z.o,sd))break s;se.Dc=K.Ma,K=1;break t}s(K.a!=0),K=0}K=!K}K&&(P=N.a)}else P=N.a}else{if((N=new vv)==null){ie=1;break e}if(N.Fa=se.na,N.P=se.P,N.qc=se.Sa,xp(N,K)){if((P=vd(K.width,K.height,ie.Oa,ie.ba))==0){if(N.Aa=0,z=ie.Oa,s((se=N)!=null),z!=null){if(0<(me=0>(me=z.Md)?0:100<me?255:255*me/100)){for(fe=Ne=0;4>fe;++fe)12>(Me=se.pb[fe]).lc&&(Me.ia=me*lk[0>Me.lc?0:Me.lc]>>3),Ne|=Me.ia;Ne&&(alert("todo:VP8InitRandom"),se.ia=1)}se.Ga=z.Id,100<se.Ga?se.Ga=100:0>se.Ga&&(se.Ga=0)}jv(N,K)||(P=N.a)}}else P=N.a}P==0&&ie.Oa!=null&&ie.Oa.fd&&(P=cm(ie.ba))}ie=P}ae=ie!=0?null:11>ae?ue.f.RGBA.eb:ue.f.kb.y}else ae=null;return ae};var tN=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(C,E){for(var M="",D=0;D<4;D++)M+=String.fromCharCode(C[E++]);return M}function u(C,E){return(C[E+0]<<0|C[E+1]<<8|C[E+2]<<16)>>>0}function m(C,E){return(C[E+0]<<0|C[E+1]<<8|C[E+2]<<16|C[E+3]<<24)>>>0}new c;var h=[0],p=[0],b=[],j=new c,x=t,f=function(C,E){var M={},D=0,A=!1,I=0,L=0;if(M.frames=[],!function(V,Q,G,Y){for(var ne=0;ne<Y;ne++)if(V[Q+ne]!=G.charCodeAt(ne))return!0;return!1}(C,E,"RIFF",4)){var F,B;for(m(C,E+=4),E+=8;E<C.length;){var R=d(C,E),$=m(C,E+=4);E+=4;var U=$+(1&$);switch(R){case"VP8 ":case"VP8L":M.frames[D]===void 0&&(M.frames[D]={}),(_=M.frames[D]).src_off=A?L:E-8,_.src_size=I+$+8,D++,A&&(A=!1,I=0,L=0);break;case"VP8X":(_=M.header={}).feature_flags=C[E];var W=E+4;_.canvas_width=1+u(C,W),W+=3,_.canvas_height=1+u(C,W),W+=3;break;case"ALPH":A=!0,I=U+8,L=E-8;break;case"ANIM":(_=M.header).bgcolor=m(C,E),W=E+4,_.loop_count=(F=C)[(B=W)+0]<<0|F[B+1]<<8,W+=2;break;case"ANMF":var q,_;(_=M.frames[D]={}).offset_x=2*u(C,E),E+=3,_.offset_y=2*u(C,E),E+=3,_.width=1+u(C,E),E+=3,_.height=1+u(C,E),E+=3,_.duration=u(C,E),E+=3,q=C[E++],_.dispose=1&q,_.blend=q>>1&1}R!="ANMF"&&(E+=U)}return M}}(x,0);f.response=x,f.rgbaoutput=!0,f.dataurl=!1;var g=f.header?f.header:null,v=f.frames?f.frames:null;if(g){g.loop_counter=g.loop_count,h=[g.canvas_height],p=[g.canvas_width];for(var w=0;w<v.length&&v[w].blend!=0;w++);}var k=v[0],T=j.WebPDecodeRGBA(x,k.src_off,k.src_size,p,h);k.rgba=T,k.imgwidth=p[0],k.imgheight=h[0];for(var S=0;S<p[0]*h[0]*4;S++)b[S]=T[S];return this.width=p,this.height=h,this.data=b,this}(function(t){var s=function(){return typeof f1=="function"},r=function(h,p,b,j){var x=4,f=l;switch(j){case t.image_compression.FAST:x=1,f=i;break;case t.image_compression.MEDIUM:x=6,f=o;break;case t.image_compression.SLOW:x=9,f=c}h=n(h,p,b,f);var g=f1(h,{level:x});return t.__addimage__.arrayBufferToBinaryString(g)},n=function(h,p,b,j){for(var x,f,g,v=h.length/p,w=new Uint8Array(h.length+v),k=u(),T=0;T<v;T+=1){if(g=T*p,x=h.subarray(g,g+p),j)w.set(j(x,b,f),g+T);else{for(var S,C=k.length,E=[];S<C;S+=1)E[S]=k[S](x,b,f);var M=m(E.concat());w.set(E[M],g+T)}f=x}return w},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},i=function(h,p){var b,j=[],x=h.length;j[0]=1;for(var f=0;f<x;f+=1)b=h[f-p]||0,j[f+1]=h[f]-b+256&255;return j},l=function(h,p,b){var j,x=[],f=h.length;x[0]=2;for(var g=0;g<f;g+=1)j=b&&b[g]||0,x[g+1]=h[g]-j+256&255;return x},o=function(h,p,b){var j,x,f=[],g=h.length;f[0]=3;for(var v=0;v<g;v+=1)j=h[v-p]||0,x=b&&b[v]||0,f[v+1]=h[v]+256-(j+x>>>1)&255;return f},c=function(h,p,b){var j,x,f,g,v=[],w=h.length;v[0]=4;for(var k=0;k<w;k+=1)j=h[k-p]||0,x=b&&b[k]||0,f=b&&b[k-p]||0,g=d(j,x,f),v[k+1]=h[k]-g+256&255;return v},d=function(h,p,b){if(h===p&&p===b)return h;var j=Math.abs(p-b),x=Math.abs(h-b),f=Math.abs(h+p-b-b);return j<=x&&j<=f?h:x<=f?p:b},u=function(){return[a,i,l,o,c]},m=function(h){var p=h.map(function(b){return b.reduce(function(j,x){return j+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(h,p,b,j){var x,f,g,v,w,k,T,S,C,E,M,D,A,I,L,F=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(g=new qK(h)).imgData,f=g.bits,x=g.colorSpace,w=g.colors,[4,6].indexOf(g.colorType)!==-1){if(g.bits===8){C=(S=g.pixelBitlength==32?new Uint32Array(g.decodePixels().buffer):g.pixelBitlength==16?new Uint16Array(g.decodePixels().buffer):new Uint8Array(g.decodePixels().buffer)).length,M=new Uint8Array(C*g.colors),E=new Uint8Array(C);var R,$=g.pixelBitlength-g.bits;for(I=0,L=0;I<C;I++){for(A=S[I],R=0;R<$;)M[L++]=A>>>R&255,R+=g.bits;E[I]=A>>>R&255}}if(g.bits===16){C=(S=new Uint32Array(g.decodePixels().buffer)).length,M=new Uint8Array(C*(32/g.pixelBitlength)*g.colors),E=new Uint8Array(C*(32/g.pixelBitlength)),D=g.colors>1,I=0,L=0;for(var U=0;I<C;)A=S[I++],M[L++]=A>>>0&255,D&&(M[L++]=A>>>16&255,A=S[I++],M[L++]=A>>>0&255),E[U++]=A>>>16&255;f=8}j!==t.image_compression.NONE&&s()?(h=r(M,g.width*g.colors,g.colors,j),T=r(E,g.width,1,j)):(h=M,T=E,F=void 0)}if(g.colorType===3&&(x=this.color_spaces.INDEXED,k=g.palette,g.transparency.indexed)){var W=g.transparency.indexed,q=0;for(I=0,C=W.length;I<C;++I)q+=W[I];if((q/=255)===C-1&&W.indexOf(0)!==-1)v=[W.indexOf(0)];else if(q!==C){for(S=g.decodePixels(),E=new Uint8Array(S.length),I=0,C=S.length;I<C;I++)E[I]=W[S[I]];T=r(E,g.width,1)}}var _=function(V){var Q;switch(V){case t.image_compression.FAST:Q=11;break;case t.image_compression.MEDIUM:Q=13;break;case t.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(j);return F===this.decode.FLATE_DECODE&&(B="/Predictor "+_+" "),B+="/Colors "+w+" /BitsPerComponent "+f+" /Columns "+g.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:b,data:h,index:p,filter:F,decodeParameters:B,transparency:v,palette:k,sMask:T,predictor:_,width:g.width,height:g.height,bitsPerComponent:f,colorSpace:x}}}})(Pt.API),function(t){t.processGIF89A=function(s,r,n,a){var i=new HK(s),l=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},u=new Sj(100).encode(d,100);return t.processJPEG.call(this,u,r,n,a)},t.processGIF87A=t.processGIF89A}(Pt.API),oi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(r){Ls.log("bit decode error:"+r)}},oi.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),r=s%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<s;a++)for(var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},oi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*a*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}s!==0&&(this.pos+=4-s)}},oi.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var r=this.bottom_up?s:this.height-1-s,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var l=this.palette[a];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},oi.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&s)/s*255|0,o=(i>>5&s)/s*255|0,c=(i>>10&s)/s*255|0,d=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=l,this.data[u+3]=d}this.pos+=t}},oi.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&s)/s*255|0,c=(l>>5&r)/r*255|0,d=(l>>11)/s*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},oi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},oi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=l}},oi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(s,r,n,a){var i=new oi(s,!1),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new Sj(100).encode(c,100);return t.processJPEG.call(this,d,r,n,a)}}(Pt.API),gS.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(s,r,n,a){var i=new gS(s),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new Sj(100).encode(c,100);return t.processJPEG.call(this,d,r,n,a)}}(Pt.API),Pt.API.processRGBA=function(t,s,r){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),l=new Uint8Array(a/4),o=0,c=0,d=0;d<a;d+=4){var u=n[d],m=n[d+1],h=n[d+2],p=n[d+3];i[o++]=u,i[o++]=m,i[o++]=h,l[c++]=p}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:b,index:s,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Pt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bd=Pt.API,$f=Bd.getCharWidthsArray=function(t,s){var r,n,a=(s=s||{}).font||this.internal.getFont(),i=s.fontSize||this.internal.getFontSize(),l=s.charSpace||this.internal.getCharSpace(),o=s.widths?s.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,d=s.kerning?s.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,m=s.doKerning!==!1,h=0,p=t.length,b=0,j=o[0]||c,x=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+l*(1e3/i)||0)/1e3):(h=m&&us(d[n])==="object"&&!isNaN(parseInt(d[n][b],10))?d[n][b]/u:0,x.push((o[n]||j)/c+h)),b=n;return x},hS=Bd.getStringUnitWidth=function(t,s){var r=(s=s||{}).fontSize||this.internal.getFontSize(),n=s.font||this.internal.getFont(),a=s.charSpace||this.internal.getCharSpace();return Bd.processArabic&&(t=Bd.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:$f.apply(this,arguments).reduce(function(i,l){return i+l},0)},pS=function(t,s,r,n){for(var a=[],i=0,l=t.length,o=0;i!==l&&o+s[i]<r;)o+=s[i],i++;a.push(t.slice(0,i));var c=i;for(o=0;i!==l;)o+s[i]>n&&(a.push(t.slice(c,i)),o=0,c=i),o+=s[i],i++;return c!==i&&a.push(t.slice(c,i)),a},fS=function(t,s,r){r||(r={});var n,a,i,l,o,c,d,u=[],m=[u],h=r.textIndent||0,p=0,b=0,j=t.split(" "),x=$f.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var f=Array(c).join(" "),g=[];j.map(function(w){(w=w.split(/\s*\n/)).length>1?g=g.concat(w.map(function(k,T){return(T&&k.length?`
`:"")+k})):g.push(w[0])}),j=g,c=hS.apply(this,[f,r])}for(i=0,l=j.length;i<l;i++){var v=0;if(n=j[i],c&&n[0]==`
`&&(n=n.substr(1),v=1),h+p+(b=(a=$f.apply(this,[n,r])).reduce(function(w,k){return w+k},0))>s||v){if(b>s){for(o=pS.apply(this,[n,a,s-(h+p),s]),u.push(o.shift()),u=[o.pop()];o.length;)m.push([o.shift()]);b=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(w,k){return w+k},0)}else u=[n];m.push(u),h=b+c,p=x}else u.push(n),h+=p+b,p=x}return d=c?function(w,k){return(k?f:"")+w.join(" ")}:function(w){return w.join(" ")},m.map(d)},Bd.splitTextToSize=function(t,s,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var m=this.internal.getFont(u.fontName,u.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*s/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=n.length;o<c;o++)d=d.concat(fS.apply(this,[n[o],l,i]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="klmnopqrstuvwxyz",r={},n={},a=0;a<s.length;a++)r[s[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=s[a];var i=function(m){return"0x"+parseInt(m,10).toString(16)},l=t.__fontmetrics__.compress=function(m){var h,p,b,j,x=["{"];for(var f in m){if(h=m[f],isNaN(parseInt(f,10))?p="'"+f+"'":(f=parseInt(f,10),p=(p=i(f).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(b=i(h).slice(3),j="-"):(b=i(h).slice(2),j=""),b=j+b.slice(0,-1)+n[b.slice(-1)];else{if(us(h)!=="object")throw new Error("Don't know what to do with value type "+us(h)+".");b=l(h)}x.push(p+b)}return x.push("}"),x.join("")},o=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,b,j,x={},f=1,g=x,v=[],w="",k="",T=m.length-1,S=1;S<T;S+=1)(j=m[S])=="'"?h?(b=h.join(""),h=void 0):h=[]:h?h.push(j):j=="{"?(v.push([g,b]),g={},b=void 0):j=="}"?((p=v.pop())[0][p[1]]=g,b=void 0,g=p[0]):j=="-"?f=-1:b===void 0?r.hasOwnProperty(j)?(w+=r[j],b=parseInt(w,16)*f,f=1,w=""):w+=j:r.hasOwnProperty(j)?(k+=r[j],g[b]=parseInt(k,16)*f,f=1,b=void 0,k=""):k+=j;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var h=m.font,p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var b=d.Unicode[h.postScriptName];b&&(h.metadata.Unicode.encoding=b,h.encoding=b.codePages[0])}])}(Pt.API),function(t){var s=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?s(o):s(lh(o)),l.metadata=t.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,n)}}])}(Pt),function(t){function s(){return(Rt.canvg?Promise.resolve(Rt.canvg):Jx(()=>import("./index.es-0uG1awTX.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Pt.API.addSvgAsImage=function(r,n,a,i,l,o,c,d){if(isNaN(n)||isNaN(a))throw Ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(l))throw Ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=l;var m=u.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return s().then(function(b){return b.fromString(m,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,a,i,l,c,d)})}}(),Pt.API.putTotalPages=function(t){var s,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(s,r);return this},Pt.API.viewerPreferences=function(t,s){var r;t=t||{},s=s||!1;var n,a,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,u=0,m=0;function h(b,j){var x,f=!1;for(x=0;x<b.length;x+=1)b[x]===j&&(f=!0);return f}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var p=o.length;for(m=0;m<p;m+=1)r[o[m]].value=r[o[m]].defaultValue,r[o[m]].explicitSet=!1}if(us(t)==="object"){for(a in t)if(i=t[a],h(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&h(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,j=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?j.push("/"+b+" /"+r[b].value):j.push("/"+b+" "+r[b].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var s=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",s)),this}}(Pt.API),function(t){var s=t.API,r=s.pdfEscape16=function(i,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],m=0,h=i.length;m<h;++m){if(o=l.metadata.characterToGlyph(i.charCodeAt(m)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(m),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},n=function(i){var l,o,c,d,u,m,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,h=(o=Object.keys(i).sort(function(p,b){return p-b})).length;m<h;m++)l=o[m],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var m=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",b=0;b<h.length;b++)p+=String.fromCharCode(h[b]);var j=d();u({data:p,addLength1:!0,objectId:j}),c("endobj");var x=d();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var f=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+qd(o.fontName)),c("/FontFile2 "+j+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var g=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+qd(o.fontName)),c("/FontDescriptor "+f+" 0 R"),c("/W "+t.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+qd(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+g+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),s.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,u=l.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var m=o.metadata.rawData,h="",p=0;p<m.length;p++)h+=String.fromCharCode(m[p]);var b=d();u({data:h,addLength1:!0,objectId:b}),c("endobj");var j=d();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var x=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+qd(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var f=0;f<o.metadata.hmtx.widths.length;f++)o.metadata.hmtx.widths[f]=parseInt(o.metadata.hmtx.widths[f]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+qd(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var l,o=i.text||"",c=i.x,d=i.y,u=i.options||{},m=i.mutex||{},h=m.pdfEscape,p=m.activeFontKey,b=m.fonts,j=p,x="",f=0,g="",v=b[j].encoding;if(b[j].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:m};for(g=o,j=p,Array.isArray(o)&&(g=o[0]),f=0;f<g.length;f+=1)b[j].metadata.hasOwnProperty("cmap")&&(l=b[j].metadata.cmap.unicode.codeMap[g[f].charCodeAt(0)]),l||g[f].charCodeAt(0)<256&&b[j].metadata.hasOwnProperty("Unicode")?x+=g[f]:x+="";var w="";return parseInt(j.slice(1))<14||v==="WinAnsiEncoding"?w=h(x,j).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(w=r(x,b[j])),m.isHex=!0,{text:w,x:c,y:d,options:u,mutex:m}};s.events.push(["postProcessText",function(i){var l=i.text||"",o=[],c={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([a(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(a(Object.assign({},c,{text:l[d]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:l})).text}])}(Pt),function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return s.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return s.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Pt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,l,o,c,d,u,m=s,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var w=function(D){var A=D.charCodeAt(),I=A>>8,L=j[I];return L!==void 0?m[256*L+(255&A)]:I===252||I===253?"AL":f.test(I)?"L":I===8?"R":"N"},k=function(D){for(var A,I=0;I<D.length;I++){if((A=w(D.charAt(I)))==="L")return!1;if(A==="R")return!0}return!1},T=function(D,A,I,L){var F,B,R,$,U=A[L];switch(U){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(U="AN");break;case"AL":g=!0,U="R";break;case"WS":U="N";break;case"CS":L<1||L+1>=A.length||(F=I[L-1])!=="EN"&&F!=="AN"||(B=A[L+1])!=="EN"&&B!=="AN"?U="N":g&&(B="AN"),U=B===F?B:"N";break;case"ES":U=(F=L>0?I[L-1]:"B")==="EN"&&L+1<A.length&&A[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&I[L-1]==="EN"){U="EN";break}if(g){U="N";break}for(R=L+1,$=A.length;R<$&&A[R]==="ET";)R++;U=R<$&&A[R]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for($=A.length,R=L+1;R<$&&A[R]==="NSM";)R++;if(R<$){var W=D[L],q=W>=1425&&W<=2303||W===64286;if(F=A[R],q&&(F==="R"||F==="AL")){U="R";break}}}U=L<1||(F=A[L-1])==="B"?"N":I[L-1];break;case"B":g=!1,a=!0,U=v;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":U="N"}return U},S=function(D,A,I){var L=D.split("");return I&&C(L,I,{hiLevel:v}),L.reverse(),A&&A.reverse(),L.join("")},C=function(D,A,I){var L,F,B,R,$,U=-1,W=D.length,q=0,_=[],V=v?p:h,Q=[];for(g=!1,a=!1,i=!1,F=0;F<W;F++)Q[F]=w(D[F]);for(B=0;B<W;B++){if($=q,_[B]=T(D,Q,_,B),L=240&(q=V[$][b[_[B]]]),q&=15,A[B]=R=V[q][5],L>0)if(L===16){for(F=U;F<B;F++)A[F]=1;U=-1}else U=-1;if(V[q][6])U===-1&&(U=B);else if(U>-1){for(F=U;F<B;F++)A[F]=R;U=-1}Q[B]==="B"&&(A[B]=0),I.hiLevel|=R}i&&function(G,Y,ne){for(var le=0;le<ne;le++)if(G[le]==="S"){Y[le]=v;for(var oe=le-1;oe>=0&&G[oe]==="WS";oe--)Y[oe]=v}}(Q,A,W)},E=function(D,A,I,L,F){if(!(F.hiLevel<D)){if(D===1&&v===1&&!a)return A.reverse(),void(I&&I.reverse());for(var B,R,$,U,W=A.length,q=0;q<W;){if(L[q]>=D){for($=q+1;$<W&&L[$]>=D;)$++;for(U=q,R=$-1;U<R;U++,R--)B=A[U],A[U]=A[R],A[R]=B,I&&(B=I[U],I[U]=I[R],I[R]=B);q=$}q++}}},M=function(D,A,I){var L=D.split(""),F={hiLevel:v};return I||(I=[]),C(L,I,F),function(B,R,$){if($.hiLevel!==0&&u)for(var U,W=0;W<B.length;W++)R[W]===1&&(U=x.indexOf(B[W]))>=0&&(B[W]=x[U+1])}(L,I,F),E(2,L,A,I,F),E(1,L,A,I,F),L.join("")};return this.__bidiEngine__.doBidiReorder=function(D,A,I){if(function(F,B){if(B)for(var R=0;R<F.length;R++)B[R]=R;o===void 0&&(o=k(F)),d===void 0&&(d=k(F))}(D,A),l||!c||d)if(l&&c&&o^d)v=o?1:0,D=S(D,A,I);else if(!l&&c&&d)v=o?1:0,D=M(D,A,I),D=S(D,A);else if(!l||o||c||d){if(l&&!c&&o^d)D=S(D,A),o?(v=0,D=M(D,A,I)):(v=1,D=M(D,A,I),D=S(D,A));else if(l&&o&&!c&&d)v=1,D=M(D,A,I),D=S(D,A);else if(!l&&!c&&o^d){var L=u;o?(v=1,D=M(D,A,I),v=0,u=!1,D=M(D,A,I),u=L):(v=0,D=M(D,A,I),D=S(D,A),v=1,u=!1,D=M(D,A,I),u=L,D=S(D,A))}}else v=0,D=M(D,A,I);else v=o?1:0,D=M(D,A,I);return D},this.__bidiEngine__.setOptions=function(D){D&&(l=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,d=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text,i=(n.x,n.y,n.options||{}),l=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(l=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?l.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):l.push([r.doBidiReorder(a[o])]);n.text=l}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Pt),Pt.API.TTFFont=function(){function t(s){var r;if(this.rawData=s,r=this.contents=new qo(s),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new iY(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new WK(this.contents),this.head=new KK(this),this.name=new XK(this),this.cmap=new PI(this),this.toUnicode={},this.hhea=new YK(this),this.maxp=new eY(this),this.hmtx=new tY(this),this.post=new ZK(this),this.os2=new QK(this),this.loca=new aY(this),this.glyf=new sY(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)s=c[l],d.push(Math.round(s*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var r;return((r=this.cmap.unicode)!=null?r.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*r},t.prototype.widthOfString=function(s,r,n){var a,i,l,o;for(l=0,i=0,o=(s=""+s).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=s.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return l*(r/1e3)},t.prototype.lineHeight=function(s,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*s},t}();var Ci,qo=function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var r,n;for(n=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(s){var r,n,a;for(a=[],r=0,n=s.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(s.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,r,n,a,i,l,o,c;return s=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*s+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*l+256*o+c},t.prototype.writeLongLong=function(s){var r,n;return r=Math.floor(s/4294967296),n=4294967295&s,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var r,n;for(r=[],n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(s){var r,n,a,i;for(i=[],n=0,a=s.length;n<a;n++)r=s[n],i.push(this.writeByte(r));return i},t}(),WK=function(){var t;function s(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return s.prototype.encode=function(r){var n,a,i,l,o,c,d,u,m,h,p,b,j;for(j in p=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(p)/c),l=Math.floor(m/c),u=16*p-m,(a=new qo).writeInt(this.scalarType),a.writeShort(p),a.writeShort(m),a.writeShort(l),a.writeShort(u),i=16*p,d=a.pos+i,o=null,b=[],r)for(h=r[j],a.writeString(j),a.writeInt(t(h)),a.writeInt(d),a.writeInt(h.length),b=b.concat(h),j==="head"&&(o=d),d+=h.length;d%4;)b.push(0),d++;return a.write(b),n=2981146554-t(a.data),a.pos=o+8,a.writeUInt32(n),a.data},t=function(r){var n,a,i,l;for(r=DI.call(r);r.length%4;)r.push(0);for(i=new qo(r),a=0,n=0,l=r.length;n<l;n=n+=4)a+=i.readUInt32();return 4294967295&a},s}(),GK={}.hasOwnProperty,sl=function(t,s){for(var r in s)GK.call(s,r)&&(t[r]=s[r]);function n(){this.constructor=t}return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t};Ci=function(){function t(s){var r;this.file=s,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var KK=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="head",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},s.prototype.encode=function(r){var n;return(n=new qo).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},s}(),vS=function(){function t(s,r){var n,a,i,l,o,c,d,u,m,h,p,b,j,x,f,g,v;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=r+s.readInt(),m=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=s.readByte();break;case 4:for(p=s.readUInt16(),h=p/2,s.pos+=6,i=function(){var w,k;for(k=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)k.push(s.readUInt16());return k}(),s.pos+=2,j=function(){var w,k;for(k=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)k.push(s.readUInt16());return k}(),d=function(){var w,k;for(k=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)k.push(s.readUInt16());return k}(),u=function(){var w,k;for(k=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)k.push(s.readUInt16());return k}(),a=(this.length-s.pos+this.offset)/2,o=function(){var w,k;for(k=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)k.push(s.readUInt16());return k}(),c=f=0,v=i.length;f<v;c=++f)for(x=i[c],n=g=b=j[c];b<=x?g<=x:g>=x;n=b<=x?++g:--g)u[c]===0?l=n+d[c]:(l=o[u[c]/2+(n-b)-(h-c)]||0)!==0&&(l+=d[c]),this.codeMap[n]=65535&l}s.pos=m}return t.encode=function(s,r){var n,a,i,l,o,c,d,u,m,h,p,b,j,x,f,g,v,w,k,T,S,C,E,M,D,A,I,L,F,B,R,$,U,W,q,_,V,Q,G,Y,ne,le,oe,pe,je,we;switch(L=new qo,l=Object.keys(s).sort(function(Re,ye){return Re-ye}),r){case"macroman":for(j=0,x=function(){var Re=[];for(b=0;b<256;++b)Re.push(0);return Re}(),g={0:0},i={},F=0,U=l.length;F<U;F++)g[oe=s[a=l[F]]]==null&&(g[oe]=++j),i[a]={old:s[a],new:g[s[a]]},x[a]=g[s[a]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(x),{charMap:i,subtable:L.data,maxGlyphID:j+1};case"unicode":for(A=[],m=[],v=0,g={},n={},f=d=null,B=0,W=l.length;B<W;B++)g[k=s[a=l[B]]]==null&&(g[k]=++v),n[a]={old:k,new:g[k]},o=g[k]-a,f!=null&&o===d||(f&&m.push(f),A.push(a),d=o),f=a;for(f&&m.push(f),m.push(65535),A.push(65535),M=2*(E=A.length),C=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,S=2*E-C,c=[],T=[],p=[],b=R=0,q=A.length;R<q;b=++R){if(D=A[b],u=m[b],D===65535){c.push(0),T.push(0);break}if(D-(I=n[D].new)>=32768)for(c.push(0),T.push(2*(p.length+E-b)),a=$=D;D<=u?$<=u:$>=u;a=D<=u?++$:--$)p.push(n[a].new);else c.push(I-D),T.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*E+2*p.length),L.writeUInt16(0),L.writeUInt16(M),L.writeUInt16(C),L.writeUInt16(h),L.writeUInt16(S),ne=0,_=m.length;ne<_;ne++)a=m[ne],L.writeUInt16(a);for(L.writeUInt16(0),le=0,V=A.length;le<V;le++)a=A[le],L.writeUInt16(a);for(pe=0,Q=c.length;pe<Q;pe++)o=c[pe],L.writeUInt16(o);for(je=0,G=T.length;je<G;je++)w=T[je],L.writeUInt16(w);for(we=0,Y=p.length;we<Y;we++)j=p[we],L.writeUInt16(j);return{charMap:n,subtable:L.data,maxGlyphID:v+1}}},t}(),PI=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="cmap",s.prototype.parse=function(r){var n,a,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new vS(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},s.encode=function(r,n){var a,i;return n==null&&(n="macroman"),a=vS.encode(r,n),(i=new qo).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},s}(),YK=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="hhea",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},s}(),QK=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="OS/2",s.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},s}(),ZK=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="post",s.prototype.parse=function(r){var n,a,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,d;for(d=[],l=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;l=0<=c?++o:--o)d.push(r.readUInt32());return d}).call(this)}},s}(),JK=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},XK=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="name",s.prototype.parse=function(r){var n,a,i,l,o,c,d,u,m,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},l=m=0,h=a.length;m<h;l=++m)i=a[l],r.pos=i.offset,u=r.readString(i.length),o=new JK(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},s}(),eY=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="maxp",s.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},s}(),tY=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="hmtx",s.prototype.parse=function(r){var n,a,i,l,o,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,m;for(m=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)m.push(r.readInt16());return m}(),this.widths=(function(){var u,m,h,p;for(p=[],u=0,m=(h=this.metrics).length;u<m;u++)l=h[u],p.push(l.advance);return p}).call(this),a=this.widths[this.widths.length-1],d=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)d.push(this.widths.push(a));return d},s.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},s}(),DI=[].slice,sY=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(r){var n,a,i,l,o,c,d,u,m,h;return r in this.cache?this.cache[r]:(l=this.file.loca,n=this.file.contents,a=l.indexOf(r),(i=l.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new qo(n.read(i))).readShort(),u=c.readShort(),h=c.readShort(),d=c.readShort(),m=c.readShort(),this.cache[r]=o===-1?new nY(c,u,h,d,m):new rY(c,o,u,h,d,m),this.cache[r]))},s.prototype.encode=function(r,n,a){var i,l,o,c,d;for(o=[],l=[],c=0,d=n.length;c<d;c++)i=r[n[c]],l.push(o.length),i&&(o=o.concat(i.encode(a)));return l.push(o.length),{table:o,offsets:l}},s}(),rY=function(){function t(s,r,n,a,i,l){this.raw=s,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),nY=function(){function t(s,r,n,a,i){var l,o;for(this.raw=s,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return t.prototype.encode=function(){var s,r,n;for(r=new qo(DI.call(this.raw.data)),s=0,n=this.glyphIDs.length;s<n;++s)r.pos=this.glyphOffsets[s];return r.data},t}(),aY=function(t){function s(){return s.__super__.constructor.apply(this,arguments)}return sl(s,Ci),s.prototype.tag="loca",s.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,l;for(l=[],a=0,i=this.length;a<i;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var i,l;for(l=[],a=0,i=this.length;a<i;a+=4)l.push(r.readUInt32());return l}).call(this)},s.prototype.indexOf=function(r){return this.offsets[r]},s.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},s.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),i=0,l=0,o=0;o<a.length;++o)if(a[o]=i,l<n.length&&n[l]==o){++l,a[o]=i;var c=this.offsets[o],d=this.offsets[o+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),m=0;m<a.length;++m)u[4*m+3]=255&a[m],u[4*m+2]=(65280&a[m])>>8,u[4*m+1]=(16711680&a[m])>>16,u[4*m]=(4278190080&a[m])>>24;return u},s}(),iY=function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,s={},i=this.subset)n=i[r],s[r]=a[n];return s},t.prototype.glyphsFor=function(s){var r,n,a,i,l,o,c;for(a={},l=0,o=s.length;l<o;l++)a[i=s[l]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},t.prototype.encode=function(s,r){var n,a,i,l,o,c,d,u,m,h,p,b,j,x,f;for(a in n=PI.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(s),p={0:0},f=n.charMap)p[(c=f[a]).old]=c.new;for(b in h=n.maxGlyphID,l)b in p||(p[b]=h++);return u=function(g){var v,w;for(v in w={},g)w[g[v]]=v;return w}(p),m=Object.keys(u).sort(function(g,v){return g-v}),j=function(){var g,v,w;for(w=[],g=0,v=m.length;g<v;g++)o=m[g],w.push(u[o]);return w}(),i=this.font.glyf.encode(l,j,p),d=this.font.loca.encode(i.offsets,j),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t}();Pt.API.PDFObject=function(){var t;function s(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},s.convert=function(r){var n,a,i,l;if(Array.isArray(r))return"["+function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)n=r[o],d.push(s.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)l=r[a],i.push("/"+a+" "+s.convert(l));return i.push(">>"),i.join(`
`)}return""+r},s}();const lY=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:OK,AcroFormAppearance:bt,AcroFormButton:_r,AcroFormCheckBox:dh,AcroFormChoiceField:Cc,AcroFormComboBox:Tc,AcroFormEditBox:oh,AcroFormListBox:Ac,AcroFormPasswordField:uh,AcroFormPushButton:ch,AcroFormRadioButton:Ec,AcroFormTextField:Ro,GState:Uh,ShadingPattern:po,TilingPattern:bc,default:Pt,jsPDF:Pt},Symbol.toStringTag,{value:"Module"}));var oY={exports:{}};const cY=wk(lY);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,s){(function(n,a){t.exports=a(function(){try{return cY}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Vf<"u"?Vf:typeof window<"u"?window:typeof self<"u"?self:Vf,function(r){return function(){var n={172:function(o,c){var d=this&&this.__extends||function(){var h=function(p,b){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var f in x)Object.prototype.hasOwnProperty.call(x,f)&&(j[f]=x[f])},h(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");h(p,b);function j(){this.constructor=p}p.prototype=b===null?Object.create(b):(j.prototype=b.prototype,new j)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var u=function(){function h(p,b,j){this.table=b,this.pageNumber=b.pageNumber,this.pageCount=this.pageNumber,this.settings=b.settings,this.cursor=j,this.doc=p.getDocument()}return h}();c.HookData=u;var m=function(h){d(p,h);function p(b,j,x,f,g,v){var w=h.call(this,b,j,v)||this;return w.cell=x,w.row=f,w.column=g,w.section=f.section,w}return p}(u);c.CellHookData=m},340:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0});var u=d(4),m=d(136),h=d(744),p=d(776),b=d(664),j=d(972);function x(f){f.API.autoTable=function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];var w;g.length===1?w=g[0]:(console.error("Use of deprecated autoTable initiation"),w=g[2]||{},w.columns=g[0],w.body=g[1]);var k=(0,p.parseInput)(this,w),T=(0,j.createTable)(this,k);return(0,b.drawTable)(this,T),this},f.API.lastAutoTable=!1,f.API.previousAutoTable=!1,f.API.autoTable.previous=!1,f.API.autoTableText=function(g,v,w,k){(0,m.default)(g,v,w,k,this)},f.API.autoTableSetDefaults=function(g){return h.DocHandler.setDefaults(g,this),this},f.autoTableSetDefaults=function(g,v){h.DocHandler.setDefaults(g,v)},f.API.autoTableHtmlToJson=function(g,v){var w;if(v===void 0&&(v=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var k=new h.DocHandler(this),T=(0,u.parseHtml)(k,g,window,v,!1),S=T.head,C=T.body,E=((w=S[0])===null||w===void 0?void 0:w.map(function(M){return M.content}))||[];return{columns:E,rows:C,data:C}},f.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var g=this.lastAutoTable;return g&&g.finalY?g.finalY:0},f.API.autoTableAddPageContent=function(g){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),f.API.autoTable.globalDefaults||(f.API.autoTable.globalDefaults={}),f.API.autoTable.globalDefaults.addPageContent=g,this},f.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=x},136:function(o,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,m,h,p,b){p=p||{};var j=1.15,x=b.internal.scaleFactor,f=b.internal.getFontSize()/x,g=b.getLineHeightFactor?b.getLineHeightFactor():j,v=f*g,w=/\r\n|\r|\n/g,k="",T=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(k=typeof u=="string"?u.split(w):u,T=k.length||1),h+=f*(2-j),p.valign==="middle"?h-=T/2*v:p.valign==="bottom"&&(h-=T*v),p.halign==="center"||p.halign==="right"){var S=f;if(p.halign==="center"&&(S*=.5),k&&T>=1){for(var C=0;C<k.length;C++)b.text(k[C],m-b.getStringUnitWidth(k[C])*S,h),h+=v;return b}m-=b.getStringUnitWidth(u)*S}return p.halign==="justify"?b.text(u,m,h,{maxWidth:p.maxWidth||100,align:"justify"}):b.text(u,m,h),b}c.default=d},420:function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(b,j,x){x.applyStyles(j,!0);var f=Array.isArray(b)?b:[b],g=f.map(function(v){return x.getTextWidth(v)}).reduce(function(v,w){return Math.max(v,w)},0);return g}c.getStringWidth=d;function u(b,j,x,f){var g=j.settings.tableLineWidth,v=j.settings.tableLineColor;b.applyStyles({lineWidth:g,lineColor:v});var w=m(g,!1);w&&b.rect(x.x,x.y,j.getWidth(b.pageSize().width),f.y-x.y,w)}c.addTableBorder=u;function m(b,j){var x=b>0,f=j||j===0;return x&&f?"DF":x?"S":f?"F":null}c.getFillStyle=m;function h(b,j){var x,f,g,v;if(b=b||j,Array.isArray(b)){if(b.length>=4)return{top:b[0],right:b[1],bottom:b[2],left:b[3]};if(b.length===3)return{top:b[0],right:b[1],bottom:b[2],left:b[1]};if(b.length===2)return{top:b[0],right:b[1],bottom:b[0],left:b[1]};b.length===1?b=b[0]:b=j}return typeof b=="object"?(typeof b.vertical=="number"&&(b.top=b.vertical,b.bottom=b.vertical),typeof b.horizontal=="number"&&(b.right=b.horizontal,b.left=b.horizontal),{left:(x=b.left)!==null&&x!==void 0?x:j,top:(f=b.top)!==null&&f!==void 0?f:j,right:(g=b.right)!==null&&g!==void 0?g:j,bottom:(v=b.bottom)!==null&&v!==void 0?v:j}):(typeof b!="number"&&(b=j),{top:b,right:b,bottom:b,left:b})}c.parseSpacing=h;function p(b,j){var x=h(j.settings.margin,0);return b.pageSize().width-(x.left+x.right)}c.getPageAvailableWidth=p},796:function(o,c){var d=this&&this.__extends||function(){var p=function(b,j){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,f){x.__proto__=f}||function(x,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(x[g]=f[g])},p(b,j)};return function(b,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");p(b,j);function x(){this.constructor=b}b.prototype=j===null?Object.create(j):(x.prototype=j.prototype,new x)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var u=function(p){d(b,p);function b(j){var x=p.call(this)||this;return x._element=j,x}return b}(Array);c.HtmlRowInput=u;function m(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=m;function h(p){var b={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return b[p]}c.getTheme=h},903:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var u=d(420);function m(x,f,g,v,w){var k={},T=1.3333333333333333,S=p(f,function(U){return w.getComputedStyle(U).backgroundColor});S!=null&&(k.fillColor=S);var C=p(f,function(U){return w.getComputedStyle(U).color});C!=null&&(k.textColor=C);var E=j(v,g);E&&(k.cellPadding=E);var M="borderTopColor",D=T*g,A=v.borderTopWidth;if(v.borderBottomWidth===A&&v.borderRightWidth===A&&v.borderLeftWidth===A){var I=(parseFloat(A)||0)/D;I&&(k.lineWidth=I)}else k.lineWidth={top:(parseFloat(v.borderTopWidth)||0)/D,right:(parseFloat(v.borderRightWidth)||0)/D,bottom:(parseFloat(v.borderBottomWidth)||0)/D,left:(parseFloat(v.borderLeftWidth)||0)/D},k.lineWidth.top||(k.lineWidth.right?M="borderRightColor":k.lineWidth.bottom?M="borderBottomColor":k.lineWidth.left&&(M="borderLeftColor"));var L=p(f,function(U){return w.getComputedStyle(U)[M]});L!=null&&(k.lineColor=L);var F=["left","right","center","justify"];F.indexOf(v.textAlign)!==-1&&(k.halign=v.textAlign),F=["middle","bottom","top"],F.indexOf(v.verticalAlign)!==-1&&(k.valign=v.verticalAlign);var B=parseInt(v.fontSize||"");isNaN(B)||(k.fontSize=B/T);var R=h(v);R&&(k.fontStyle=R);var $=(v.fontFamily||"").toLowerCase();return x.indexOf($)!==-1&&(k.font=$),k}c.parseCss=m;function h(x){var f="";return(x.fontWeight==="bold"||x.fontWeight==="bolder"||parseInt(x.fontWeight)>=700)&&(f="bold"),(x.fontStyle==="italic"||x.fontStyle==="oblique")&&(f+="italic"),f}function p(x,f){var g=b(x,f);if(!g)return null;var v=g.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!v||!Array.isArray(v))return null;var w=[parseInt(v[1]),parseInt(v[2]),parseInt(v[3])],k=parseInt(v[4]);return k===0||isNaN(w[0])||isNaN(w[1])||isNaN(w[2])?null:w}function b(x,f){var g=f(x);return g==="rgba(0, 0, 0, 0)"||g==="transparent"||g==="initial"||g==="inherit"?x.parentElement==null?null:b(x.parentElement,f):g}function j(x,f){var g=[x.paddingTop,x.paddingRight,x.paddingBottom,x.paddingLeft],v=96/(72/f),w=(parseInt(x.lineHeight)-parseInt(x.fontSize))/f/2,k=g.map(function(S){return parseInt(S||"0")/v}),T=(0,u.parseSpacing)(k,0);return w>T.top&&(T.top=w),w>T.bottom&&(T.bottom=w),T}},744:function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},u=function(){function m(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return m.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:d=h},m.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},m.prototype.applyStyles=function(h,p){var b,j,x;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var f=this.jsPDFDocument.internal.getFont(),g=f.fontStyle,v=f.fontName;if(h.font&&(v=h.font),h.fontStyle){g=h.fontStyle;var w=this.getFontList()[v];w&&w.indexOf(g)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(w[0]),g=w[0])}if(this.jsPDFDocument.setFont(v,g),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var k=m.unifyColor(h.fillColor);k&&(b=this.jsPDFDocument).setFillColor.apply(b,k),k=m.unifyColor(h.textColor),k&&(j=this.jsPDFDocument).setTextColor.apply(j,k),k=m.unifyColor(h.lineColor),k&&(x=this.jsPDFDocument).setDrawColor.apply(x,k),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},m.prototype.splitTextToSize=function(h,p,b){return this.jsPDFDocument.splitTextToSize(h,p,b)},m.prototype.rect=function(h,p,b,j,x){return this.jsPDFDocument.rect(h,p,b,j,x)},m.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},m.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},m.prototype.getDocument=function(){return this.jsPDFDocument},m.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},m.prototype.addPage=function(){return this.jsPDFDocument.addPage()},m.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},m.prototype.getGlobalOptions=function(){return d||{}},m.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},m.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},m.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},m.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},m.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},m.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},m}();c.DocHandler=u},4:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var u=d(903),m=d(796);function h(j,x,f,g,v){var w,k;g===void 0&&(g=!1),v===void 0&&(v=!1);var T;typeof x=="string"?T=f.document.querySelector(x):T=x;var S=Object.keys(j.getFontList()),C=j.scaleFactor(),E=[],M=[],D=[];if(!T)return console.error("Html table could not be found with input: ",x),{head:E,body:M,foot:D};for(var A=0;A<T.rows.length;A++){var I=T.rows[A],L=(k=(w=I==null?void 0:I.parentElement)===null||w===void 0?void 0:w.tagName)===null||k===void 0?void 0:k.toLowerCase(),F=p(S,C,f,I,g,v);F&&(L==="thead"?E.push(F):L==="tfoot"?D.push(F):M.push(F))}return{head:E,body:M,foot:D}}c.parseHtml=h;function p(j,x,f,g,v,w){for(var k=new m.HtmlRowInput(g),T=0;T<g.cells.length;T++){var S=g.cells[T],C=f.getComputedStyle(S);if(v||C.display!=="none"){var E=void 0;w&&(E=(0,u.parseCss)(j,S,x,C,f)),k.push({rowSpan:S.rowSpan,colSpan:S.colSpan,styles:E,_element:S,content:b(S)})}}var M=f.getComputedStyle(g);if(k.length>0&&(v||M.display!=="none"))return k}function b(j){var x=j.cloneNode(!0);return x.innerHTML=x.innerHTML.replace(/\n/g,"").replace(/ +/g," "),x.innerHTML=x.innerHTML.split(/<br.*?>/).map(function(f){return f.trim()}).join(`
`),x.innerText||x.textContent||""}},776:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var u=d(4),m=d(356),h=d(420),p=d(744),b=d(792);function j(T,S){var C=new p.DocHandler(T),E=C.getDocumentOptions(),M=C.getGlobalOptions();(0,b.default)(C,M,E,S);var D=(0,m.assign)({},M,E,S),A;typeof window<"u"&&(A=window);var I=x(M,E,S),L=f(M,E,S),F=g(C,D),B=w(C,D,A);return{id:S.tableId,content:B,hooks:L,styles:I,settings:F}}c.parseInput=j;function x(T,S,C){for(var E={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},M=function(L){if(L==="columnStyles"){var F=T[L],B=S[L],R=C[L];E.columnStyles=(0,m.assign)({},F,B,R)}else{var $=[T,S,C],U=$.map(function(W){return W[L]||{}});E[L]=(0,m.assign)({},U[0],U[1],U[2])}},D=0,A=Object.keys(E);D<A.length;D++){var I=A[D];M(I)}return E}function f(T,S,C){for(var E=[T,S,C],M={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,A=E;D<A.length;D++){var I=A[D];I.didParseCell&&M.didParseCell.push(I.didParseCell),I.willDrawCell&&M.willDrawCell.push(I.willDrawCell),I.didDrawCell&&M.didDrawCell.push(I.didDrawCell),I.willDrawPage&&M.willDrawPage.push(I.willDrawPage),I.didDrawPage&&M.didDrawPage.push(I.didDrawPage)}return M}function g(T,S){var C,E,M,D,A,I,L,F,B,R,$,U,W=(0,h.parseSpacing)(S.margin,40/T.scaleFactor()),q=(C=v(T,S.startY))!==null&&C!==void 0?C:W.top,_;S.showFoot===!0?_="everyPage":S.showFoot===!1?_="never":_=(E=S.showFoot)!==null&&E!==void 0?E:"everyPage";var V;S.showHead===!0?V="everyPage":S.showHead===!1?V="never":V=(M=S.showHead)!==null&&M!==void 0?M:"everyPage";var Q=(D=S.useCss)!==null&&D!==void 0?D:!1,G=S.theme||(Q?"plain":"striped"),Y=!!S.horizontalPageBreak,ne=(A=S.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(I=S.includeHiddenHtml)!==null&&I!==void 0?I:!1,useCss:Q,theme:G,startY:q,margin:W,pageBreak:(L=S.pageBreak)!==null&&L!==void 0?L:"auto",rowPageBreak:(F=S.rowPageBreak)!==null&&F!==void 0?F:"auto",tableWidth:(B=S.tableWidth)!==null&&B!==void 0?B:"auto",showHead:V,showFoot:_,tableLineWidth:(R=S.tableLineWidth)!==null&&R!==void 0?R:0,tableLineColor:($=S.tableLineColor)!==null&&$!==void 0?$:200,horizontalPageBreak:Y,horizontalPageBreakRepeat:ne,horizontalPageBreakBehaviour:(U=S.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function v(T,S){var C=T.getLastAutoTable(),E=T.scaleFactor(),M=T.pageNumber(),D=!1;if(C&&C.startPageNumber){var A=C.startPageNumber+C.pageNumber-1;D=A===M}return typeof S=="number"?S:(S==null||S===!1)&&D&&(C==null?void 0:C.finalY)!=null?C.finalY+20/E:null}function w(T,S,C){var E=S.head||[],M=S.body||[],D=S.foot||[];if(S.html){var A=S.includeHiddenHtml;if(C){var I=(0,u.parseHtml)(T,S.html,C,A,S.useCss)||{};E=I.head||E,M=I.body||E,D=I.foot||E}else console.error("Cannot parse html in non browser environment")}var L=S.columns||k(E,M,D);return{columns:L,head:E,body:M,foot:D}}function k(T,S,C){var E=T[0]||S[0]||C[0]||[],M=[];return Object.keys(E).filter(function(D){return D!=="_element"}).forEach(function(D){var A=1,I;Array.isArray(E)?I=E[parseInt(D)]:I=E[D],typeof I=="object"&&!Array.isArray(I)&&(A=(I==null?void 0:I.colSpan)||1);for(var L=0;L<A;L++){var F=void 0;Array.isArray(E)?F=M.length:F=D+(L>0?"_".concat(L):"");var B={dataKey:F};M.push(B)}}),M}},792:function(o,c){Object.defineProperty(c,"__esModule",{value:!0});function d(m,h,p,b){for(var j=function(v){v&&typeof v!="object"&&console.error("The options parameter should be of type object, is: "+typeof v),typeof v.extendWidth<"u"&&(v.tableWidth=v.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof v.margins<"u"&&(typeof v.margin>"u"&&(v.margin=v.margins),console.error("Use of deprecated option: margins, use margin instead.")),v.startY&&typeof v.startY!="number"&&(console.error("Invalid value for startY option",v.startY),delete v.startY),!v.didDrawPage&&(v.afterPageContent||v.beforePageContent||v.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),v.didDrawPage=function(D){m.applyStyles(m.userStyles),v.beforePageContent&&v.beforePageContent(D),m.applyStyles(m.userStyles),v.afterPageContent&&v.afterPageContent(D),m.applyStyles(m.userStyles),v.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),m.applyStyles(m.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){v[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var A=D[0],I=D[1];v[I]&&(console.error("Use of deprecated option ".concat(I,". Use ").concat(A," instead")),v[A]=v[I])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var A=typeof D=="string"?D:D[0],I=typeof D=="string"?D:D[1];typeof v[A]<"u"&&(typeof v.styles[I]>"u"&&(v.styles[I]=v[A]),console.error("Use of deprecated option: "+A+", use the style "+I+" instead."))});for(var w=0,k=["styles","bodyStyles","headStyles","footStyles"];w<k.length;w++){var T=k[w];u(v[T]||{})}for(var S=v.columnStyles||{},C=0,E=Object.keys(S);C<E.length;C++){var M=E[C];u(S[M]||{})}},x=0,f=[h,p,b];x<f.length;x++){var g=f[x];j(g)}}c.default=d;function u(m){m.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),m.minCellHeight||(m.minCellHeight=m.rowHeight)):m.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),m.cellWidth||(m.cellWidth=m.columnWidth))}},260:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var u=d(796),m=d(172),h=d(420),p=function(){function f(g,v){this.pageNumber=1,this.pageCount=1,this.id=g.id,this.settings=g.settings,this.styles=g.styles,this.hooks=g.hooks,this.columns=v.columns,this.head=v.head,this.body=v.body,this.foot=v.foot}return f.prototype.getHeadHeight=function(g){return this.head.reduce(function(v,w){return v+w.getMaxCellHeight(g)},0)},f.prototype.getFootHeight=function(g){return this.foot.reduce(function(v,w){return v+w.getMaxCellHeight(g)},0)},f.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},f.prototype.callCellHooks=function(g,v,w,k,T,S){for(var C=0,E=v;C<E.length;C++){var M=E[C],D=new m.CellHookData(g,this,w,k,T,S),A=M(D)===!1;if(w.text=Array.isArray(w.text)?w.text:[w.text],A)return!1}return!0},f.prototype.callEndPageHooks=function(g,v){g.applyStyles(g.userStyles);for(var w=0,k=this.hooks.didDrawPage;w<k.length;w++){var T=k[w];T(new m.HookData(g,this,v))}},f.prototype.callWillDrawPageHooks=function(g,v){for(var w=0,k=this.hooks.willDrawPage;w<k.length;w++){var T=k[w];T(new m.HookData(g,this,v))}},f.prototype.getWidth=function(g){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var v=this.columns.reduce(function(k,T){return k+T.wrappedWidth},0);return v}else{var w=this.settings.margin;return g-w.left-w.right}},f}();c.Table=p;var b=function(){function f(g,v,w,k,T){T===void 0&&(T=!1),this.height=0,this.raw=g,g instanceof u.HtmlRowInput&&(this.raw=g._element,this.element=g._element),this.index=v,this.section=w,this.cells=k,this.spansMultiplePages=T}return f.prototype.getMaxCellHeight=function(g){var v=this;return g.reduce(function(w,k){var T;return Math.max(w,((T=v.cells[k.index])===null||T===void 0?void 0:T.height)||0)},0)},f.prototype.hasRowSpan=function(g){var v=this;return g.filter(function(w){var k=v.cells[w.index];return k?k.rowSpan>1:!1}).length>0},f.prototype.canEntireRowFit=function(g,v){return this.getMaxCellHeight(v)<=g},f.prototype.getMinimumRowHeight=function(g,v){var w=this;return g.reduce(function(k,T){var S=w.cells[T.index];if(!S)return 0;var C=v.getLineHeight(S.styles.fontSize),E=S.padding("vertical"),M=E+C;return M>k?M:k},0)},f}();c.Row=b;var j=function(){function f(g,v,w){var k,T;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=v,this.section=w,this.raw=g;var S=g;g!=null&&typeof g=="object"&&!Array.isArray(g)?(this.rowSpan=g.rowSpan||1,this.colSpan=g.colSpan||1,S=(T=(k=g.content)!==null&&k!==void 0?k:g.title)!==null&&T!==void 0?T:g,g._element&&(this.raw=g._element)):(this.rowSpan=1,this.colSpan=1);var C=S!=null?""+S:"",E=/\r\n|\r|\n/g;this.text=C.split(E)}return f.prototype.getTextPos=function(){var g;if(this.styles.valign==="top")g=this.y+this.padding("top");else if(this.styles.valign==="bottom")g=this.y+this.height-this.padding("bottom");else{var v=this.height-this.padding("vertical");g=this.y+v/2+this.padding("top")}var w;if(this.styles.halign==="right")w=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var k=this.width-this.padding("horizontal");w=this.x+k/2+this.padding("left")}else w=this.x+this.padding("left");return{x:w,y:g}},f.prototype.getContentHeight=function(g,v){v===void 0&&(v=1.15);var w=Array.isArray(this.text)?this.text.length:1,k=this.styles.fontSize/g*v,T=w*k+this.padding("vertical");return Math.max(T,this.styles.minCellHeight)},f.prototype.padding=function(g){var v=(0,h.parseSpacing)(this.styles.cellPadding,0);return g==="vertical"?v.top+v.bottom:g==="horizontal"?v.left+v.right:v[g]},f}();c.Cell=j;var x=function(){function f(g,v,w){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=g,this.raw=v,this.index=w}return f.prototype.getMaxCustomCellWidth=function(g){for(var v=0,w=0,k=g.allRows();w<k.length;w++){var T=k[w],S=T.cells[this.index];S&&typeof S.styles.cellWidth=="number"&&(v=Math.max(v,S.styles.cellWidth))}return v},f}();c.Column=x},356:function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(u,m,h,p,b){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var j=Object(u),x=1;x<arguments.length;x++){var f=arguments[x];if(f!=null)for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(j[g]=f[g])}return j}c.assign=d},972:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var u=d(744),m=d(260),h=d(324),p=d(796),b=d(356);function j(T,S){var C=new u.DocHandler(T),E=x(S,C.scaleFactor()),M=new m.Table(S,E);return(0,h.calculateWidths)(C,M),C.applyStyles(C.userStyles),M}c.createTable=j;function x(T,S){var C=T.content,E=w(C.columns);if(C.head.length===0){var M=g(E,"head");M&&C.head.push(M)}if(C.foot.length===0){var M=g(E,"foot");M&&C.foot.push(M)}var D=T.settings.theme,A=T.styles;return{columns:E,head:f("head",C.head,E,A,D,S),body:f("body",C.body,E,A,D,S),foot:f("foot",C.foot,E,A,D,S)}}function f(T,S,C,E,M,D){var A={},I=S.map(function(L,F){for(var B=0,R={},$=0,U=0,W=0,q=C;W<q.length;W++){var _=q[W];if(A[_.index]==null||A[_.index].left===0)if(U===0){var V=void 0;Array.isArray(L)?V=L[_.index-$-B]:V=L[_.dataKey];var Q={};typeof V=="object"&&!Array.isArray(V)&&(Q=(V==null?void 0:V.styles)||{});var G=k(T,_,F,M,E,D,Q),Y=new m.Cell(V,G,T);R[_.dataKey]=Y,R[_.index]=Y,U=Y.colSpan-1,A[_.index]={left:Y.rowSpan-1,times:U}}else U--,$++;else A[_.index].left--,U=A[_.index].times,B++}return new m.Row(L,F,T,R)});return I}function g(T,S){var C={};return T.forEach(function(E){if(E.raw!=null){var M=v(S,E.raw);M!=null&&(C[E.dataKey]=M)}}),Object.keys(C).length>0?C:null}function v(T,S){if(T==="head"){if(typeof S=="object")return S.header||S.title||null;if(typeof S=="string"||typeof S=="number")return S}else if(T==="foot"&&typeof S=="object")return S.footer;return null}function w(T){return T.map(function(S,C){var E,M,D;return typeof S=="object"?D=(M=(E=S.dataKey)!==null&&E!==void 0?E:S.key)!==null&&M!==void 0?M:C:D=C,new m.Column(D,S,C)})}function k(T,S,C,E,M,D,A){var I=(0,p.getTheme)(E),L;T==="head"?L=M.headStyles:T==="body"?L=M.bodyStyles:T==="foot"&&(L=M.footStyles);var F=(0,b.assign)({},I.table,I[T],M.styles,L),B=M.columnStyles[S.dataKey]||M.columnStyles[S.index]||{},R=T==="body"?B:{},$=T==="body"&&C%2===0?(0,b.assign)({},I.alternateRow,M.alternateRowStyles):{},U=(0,p.defaultStyles)(D),W=(0,b.assign)({},U,F,$,R);return(0,b.assign)(W,A)}},664:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var u=d(420),m=d(260),h=d(744),p=d(356),b=d(136),j=d(224);function x(B,R){var $=R.settings,U=$.startY,W=$.margin,q={x:W.left,y:U},_=R.getHeadHeight(R.columns)+R.getFootHeight(R.columns),V=U+W.bottom+_;if($.pageBreak==="avoid"){var Q=R.body,G=Q.reduce(function(le,oe){return le+oe.height},0);V+=G}var Y=new h.DocHandler(B);($.pageBreak==="always"||$.startY!=null&&V>Y.pageSize().height)&&(F(Y),q.y=W.top),R.callWillDrawPageHooks(Y,q);var ne=(0,p.assign)({},q);R.startPageNumber=Y.pageNumber(),$.horizontalPageBreak?f(Y,R,ne,q):(Y.applyStyles(Y.userStyles),($.showHead==="firstPage"||$.showHead==="everyPage")&&R.head.forEach(function(le){return M(Y,R,le,q,R.columns)}),Y.applyStyles(Y.userStyles),R.body.forEach(function(le,oe){var pe=oe===R.body.length-1;E(Y,R,le,pe,ne,q,R.columns)}),Y.applyStyles(Y.userStyles),($.showFoot==="lastPage"||$.showFoot==="everyPage")&&R.foot.forEach(function(le){return M(Y,R,le,q,R.columns)})),(0,u.addTableBorder)(Y,R,ne,q),R.callEndPageHooks(Y,q),R.finalY=q.y,B.lastAutoTable=R,B.previousAutoTable=R,B.autoTable&&(B.autoTable.previous=R),Y.applyStyles(Y.userStyles)}c.drawTable=x;function f(B,R,$,U){var W=(0,j.calculateAllColumnsCanFitInPage)(B,R),q=R.settings;if(q.horizontalPageBreakBehaviour==="afterAllRows")W.forEach(function(G,Y){B.applyStyles(B.userStyles),Y>0?L(B,R,$,U,G.columns,!0):g(B,R,U,G.columns),v(B,R,$,U,G.columns),k(B,R,U,G.columns)});else for(var _=-1,V=W[0],Q=function(){var G=_;if(V){B.applyStyles(B.userStyles);var Y=V.columns;_>=0?L(B,R,$,U,Y,!0):g(B,R,U,Y),G=w(B,R,_+1,U,Y),k(B,R,U,Y)}var ne=G-_;W.slice(1).forEach(function(le){B.applyStyles(B.userStyles),L(B,R,$,U,le.columns,!0),w(B,R,_+1,U,le.columns,ne),k(B,R,U,le.columns)}),_=G};_<R.body.length-1;)Q()}function g(B,R,$,U){var W=R.settings;B.applyStyles(B.userStyles),(W.showHead==="firstPage"||W.showHead==="everyPage")&&R.head.forEach(function(q){return M(B,R,q,$,U)})}function v(B,R,$,U,W){B.applyStyles(B.userStyles),R.body.forEach(function(q,_){var V=_===R.body.length-1;E(B,R,q,V,$,U,W)})}function w(B,R,$,U,W,q){B.applyStyles(B.userStyles),q=q??R.body.length;var _=Math.min($+q,R.body.length),V=-1;return R.body.slice($,_).forEach(function(Q,G){var Y=$+G===R.body.length-1,ne=I(B,R,Y,U);Q.canEntireRowFit(ne,W)&&(M(B,R,Q,U,W),V=$+G)}),V}function k(B,R,$,U){var W=R.settings;B.applyStyles(B.userStyles),(W.showFoot==="lastPage"||W.showFoot==="everyPage")&&R.foot.forEach(function(q){return M(B,R,q,$,U)})}function T(B,R,$){var U=$.getLineHeight(B.styles.fontSize),W=B.padding("vertical"),q=Math.floor((R-W)/U);return Math.max(0,q)}function S(B,R,$,U){var W={};B.spansMultiplePages=!0,B.height=0;for(var q=0,_=0,V=$.columns;_<V.length;_++){var Q=V[_],G=B.cells[Q.index];if(G){Array.isArray(G.text)||(G.text=[G.text]);var Y=new m.Cell(G.raw,G.styles,G.section);Y=(0,p.assign)(Y,G),Y.text=[];var ne=T(G,R,U);G.text.length>ne&&(Y.text=G.text.splice(ne,G.text.length));var le=U.scaleFactor(),oe=U.getLineHeightFactor();G.contentHeight=G.getContentHeight(le,oe),G.contentHeight>=R&&(G.contentHeight=R,Y.styles.minCellHeight-=R),G.contentHeight>B.height&&(B.height=G.contentHeight),Y.contentHeight=Y.getContentHeight(le,oe),Y.contentHeight>q&&(q=Y.contentHeight),W[Q.index]=Y}}var pe=new m.Row(B.raw,-1,B.section,W,!0);pe.height=q;for(var je=0,we=$.columns;je<we.length;je++){var Q=we[je],Y=pe.cells[Q.index];Y&&(Y.height=pe.height);var G=B.cells[Q.index];G&&(G.height=B.height)}return pe}function C(B,R,$,U){var W=B.pageSize().height,q=U.settings.margin,_=q.top+q.bottom,V=W-_;R.section==="body"&&(V-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var Q=R.getMinimumRowHeight(U.columns,B),G=Q<$;if(Q>V)return console.error("Will not be able to print row ".concat(R.index," correctly since it's minimum height is larger than page height")),!0;if(!G)return!1;var Y=R.hasRowSpan(U.columns),ne=R.getMaxCellHeight(U.columns)>V;return ne?(Y&&console.error("The content of row ".concat(R.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Y||U.settings.rowPageBreak==="avoid")}function E(B,R,$,U,W,q,_){var V=I(B,R,U,q);if($.canEntireRowFit(V,_))M(B,R,$,q,_);else if(C(B,$,V,R)){var Q=S($,V,R,B);M(B,R,$,q,_),L(B,R,W,q,_),E(B,R,Q,U,W,q,_)}else L(B,R,W,q,_),E(B,R,$,U,W,q,_)}function M(B,R,$,U,W){U.x=R.settings.margin.left;for(var q=0,_=W;q<_.length;q++){var V=_[q],Q=$.cells[V.index];if(!Q){U.x+=V.width;continue}B.applyStyles(Q.styles),Q.x=U.x,Q.y=U.y;var G=R.callCellHooks(B,R.hooks.willDrawCell,Q,$,V,U);if(G===!1){U.x+=V.width;continue}D(B,Q,U);var Y=Q.getTextPos();(0,b.default)(Q.text,Y.x,Y.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},B.getDocument()),R.callCellHooks(B,R.hooks.didDrawCell,Q,$,V,U),U.x+=V.width}U.y+=$.height}function D(B,R,$){var U=R.styles;if(B.getDocument().setFillColor(B.getDocument().getFillColor()),typeof U.lineWidth=="number"){var W=(0,u.getFillStyle)(U.lineWidth,U.fillColor);W&&B.rect(R.x,$.y,R.width,R.height,W)}else typeof U.lineWidth=="object"&&(U.fillColor&&B.rect(R.x,$.y,R.width,R.height,"F"),A(B,R,$,U.lineWidth))}function A(B,R,$,U){var W,q,_,V;U.top&&(W=$.x,q=$.y,_=$.x+R.width,V=$.y,U.right&&(_+=.5*U.right),U.left&&(W-=.5*U.left),Q(U.top,W,q,_,V)),U.bottom&&(W=$.x,q=$.y+R.height,_=$.x+R.width,V=$.y+R.height,U.right&&(_+=.5*U.right),U.left&&(W-=.5*U.left),Q(U.bottom,W,q,_,V)),U.left&&(W=$.x,q=$.y,_=$.x,V=$.y+R.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),Q(U.left,W,q,_,V)),U.right&&(W=$.x+R.width,q=$.y,_=$.x+R.width,V=$.y+R.height,U.top&&(q-=.5*U.top),U.bottom&&(V+=.5*U.bottom),Q(U.right,W,q,_,V));function Q(G,Y,ne,le,oe){B.getDocument().setLineWidth(G),B.getDocument().line(Y,ne,le,oe,"S")}}function I(B,R,$,U){var W=R.settings.margin.bottom,q=R.settings.showFoot;return(q==="everyPage"||q==="lastPage"&&$)&&(W+=R.getFootHeight(R.columns)),B.pageSize().height-U.y-W}function L(B,R,$,U,W,q){W===void 0&&(W=[]),q===void 0&&(q=!1),B.applyStyles(B.userStyles),R.settings.showFoot==="everyPage"&&!q&&R.foot.forEach(function(V){return M(B,R,V,U,W)}),R.callEndPageHooks(B,U);var _=R.settings.margin;(0,u.addTableBorder)(B,R,$,U),F(B),R.pageNumber++,R.pageCount++,U.x=_.left,U.y=_.top,$.y=_.top,R.callWillDrawPageHooks(B,U),R.settings.showHead==="everyPage"&&(R.head.forEach(function(V){return M(B,R,V,U,W)}),B.applyStyles(B.userStyles))}c.addPage=L;function F(B){var R=B.pageNumber();B.setPage(R+1);var $=B.pageNumber();return $===R?(B.addPage(),!0):!1}},224:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var u=d(420);function m(p,b,j){var x;j===void 0&&(j={});var f=(0,u.getPageAvailableWidth)(p,b),g=new Map,v=[],w=[],k=[];b.settings.horizontalPageBreakRepeat,Array.isArray(b.settings.horizontalPageBreakRepeat)?k=b.settings.horizontalPageBreakRepeat:(typeof b.settings.horizontalPageBreakRepeat=="string"||typeof b.settings.horizontalPageBreakRepeat=="number")&&(k=[b.settings.horizontalPageBreakRepeat]),k.forEach(function(E){var M=b.columns.find(function(D){return D.dataKey===E||D.index===E});M&&!g.has(M.index)&&(g.set(M.index,!0),v.push(M.index),w.push(b.columns[M.index]),f-=M.wrappedWidth)});for(var T=!0,S=(x=j==null?void 0:j.start)!==null&&x!==void 0?x:0;S<b.columns.length;){if(g.has(S)){S++;continue}var C=b.columns[S].wrappedWidth;if(T||f>=C)T=!1,v.push(S),w.push(b.columns[S]),f-=C;else break;S++}return{colIndexes:v,columns:w,lastIndex:S-1}}function h(p,b){for(var j=[],x=0;x<b.columns.length;x++){var f=m(p,b,{start:x});f.columns.length&&(j.push(f),x=f.lastIndex)}return j}c.calculateAllColumnsCanFitInPage=h},324:function(o,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var u=d(420);function m(v,w){h(v,w);var k=[],T=0;w.columns.forEach(function(C){var E=C.getMaxCustomCellWidth(w);E?C.width=E:(C.width=C.wrappedWidth,k.push(C)),T+=C.width});var S=w.getWidth(v.pageSize().width)-T;S&&(S=p(k,S,function(C){return Math.max(C.minReadableWidth,C.minWidth)})),S&&(S=p(k,S,function(C){return C.minWidth})),S=Math.abs(S),!w.settings.horizontalPageBreak&&S>.1/v.scaleFactor()&&(S=S<1?S:Math.round(S),console.warn("Of the table content, ".concat(S," units width could not fit page"))),j(w),x(w,v),b(w)}c.calculateWidths=m;function h(v,w){var k=v.scaleFactor(),T=w.settings.horizontalPageBreak,S=(0,u.getPageAvailableWidth)(v,w);w.allRows().forEach(function(C){for(var E=0,M=w.columns;E<M.length;E++){var D=M[E],A=C.cells[D.index];if(A){var I=w.hooks.didParseCell;w.callCellHooks(v,I,A,C,D,null);var L=A.padding("horizontal");A.contentWidth=(0,u.getStringWidth)(A.text,A.styles,v)+L;var F=(0,u.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,v);if(A.minReadableWidth=F+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||T===!0)A.contentWidth>S?(A.minWidth=S,A.wrappedWidth=S):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var B=10/k;A.minWidth=A.styles.minCellWidth||B,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),w.allRows().forEach(function(C){for(var E=0,M=w.columns;E<M.length;E++){var D=M[E],A=C.cells[D.index];if(A&&A.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,A.wrappedWidth),D.minWidth=Math.max(D.minWidth,A.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,A.minReadableWidth);else{var I=w.styles.columnStyles[D.dataKey]||w.styles.columnStyles[D.index]||{},L=I.cellWidth||I.minCellWidth;L&&typeof L=="number"&&(D.minWidth=L,D.wrappedWidth=L)}A&&(A.colSpan>1&&!D.minWidth&&(D.minWidth=A.minWidth),A.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=A.minWidth))}})}function p(v,w,k){for(var T=w,S=v.reduce(function(B,R){return B+R.wrappedWidth},0),C=0;C<v.length;C++){var E=v[C],M=E.wrappedWidth/S,D=T*M,A=E.width+D,I=k(E),L=A<I?I:A;w-=L-E.width,E.width=L}if(w=Math.round(w*1e10)/1e10,w){var F=v.filter(function(B){return w<0?B.width>k(B):!0});F.length&&(w=p(F,w,k))}return w}c.resizeColumns=p;function b(v){for(var w={},k=1,T=v.allRows(),S=0;S<T.length;S++)for(var C=T[S],E=0,M=v.columns;E<M.length;E++){var D=M[E],A=w[D.index];if(k>1)k--,delete C.cells[D.index];else if(A)A.cell.height+=C.height,k=A.cell.colSpan,delete C.cells[D.index],A.left--,A.left<=1&&delete w[D.index];else{var I=C.cells[D.index];if(!I)continue;if(I.height=C.height,I.rowSpan>1){var L=T.length-S,F=I.rowSpan>L?L:I.rowSpan;w[D.index]={cell:I,left:F,row:C}}}}}function j(v){for(var w=v.allRows(),k=0;k<w.length;k++)for(var T=w[k],S=null,C=0,E=0,M=0;M<v.columns.length;M++){var D=v.columns[M];if(E-=1,E>1&&v.columns[M+1])C+=D.width,delete T.cells[D.index];else if(S){var A=S;delete T.cells[D.index],S=null,A.width=D.width+C}else{var A=T.cells[D.index];if(!A)continue;if(E=A.colSpan,C=0,A.colSpan>1){S=A,C+=D.width;continue}A.width=D.width+C}}}function x(v,w){for(var k={count:0,height:0},T=0,S=v.allRows();T<S.length;T++){for(var C=S[T],E=0,M=v.columns;E<M.length;E++){var D=M[E],A=C.cells[D.index];if(A){w.applyStyles(A.styles,!0);var I=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=w.splitTextToSize(A.text,I+1/w.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=f(A.text,I,A.styles,w,"...");else if(A.styles.overflow==="hidden")A.text=f(A.text,I,A.styles,w,"");else if(typeof A.styles.overflow=="function"){var L=A.styles.overflow(A.text,I);typeof L=="string"?A.text=[L]:A.text=L}A.contentHeight=A.getContentHeight(w.scaleFactor(),w.getLineHeightFactor());var F=A.contentHeight/A.rowSpan;A.rowSpan>1&&k.count*k.height<F*A.rowSpan?k={height:F,count:A.rowSpan}:k&&k.count>0&&k.height>F&&(F=k.height),F>C.height&&(C.height=F)}}k.count--}}function f(v,w,k,T,S){return v.map(function(C){return g(C,w,k,T,S)})}c.ellipsize=f;function g(v,w,k,T,S){var C=1e4*T.scaleFactor();if(w=Math.ceil(w*C)/C,w>=(0,u.getStringWidth)(v,k,T))return v;for(;w<(0,u.getStringWidth)(v+S,k,T)&&!(v.length<=1);)v=v.substring(0,v.length-1);return v.trim()+S}},964:function(o){if(typeof r>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}o.exports=r}},a={};function i(o){var c=a[o];if(c!==void 0)return c.exports;var d=a[o]={exports:{}};return n[o].call(d.exports,d,d.exports,i),d.exports}var l={};return function(){var o=l;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var c=i(340),d=i(776),u=i(664),m=i(972),h=i(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return h.Table}});var p=i(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var b=i(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return b.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return b.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return b.Row}});function j(w){(0,c.default)(w)}o.applyPlugin=j;function x(w,k){var T=(0,d.parseInput)(w,k),S=(0,m.createTable)(w,T);(0,u.drawTable)(w,S)}function f(w,k){var T=(0,d.parseInput)(w,k);return(0,m.createTable)(w,T)}o.__createTable=f;function g(w,k){(0,u.drawTable)(w,k)}o.__drawTable=g;try{var v=i(964);v.jsPDF&&(v=v.jsPDF),j(v)}catch{}o.default=x}(),l}()})})(oY);function dY({delivery:t,vehicle:s,onClose:r,onEdit:n,onSendNotification:a}){var p,b,j,x,f,g,v,w,k;const{toast:i}=xt(),[l,o]=y.useState("details"),[c,d]=y.useState(!1),u=T=>{switch(T){case Wt.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Wt.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Wt.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Wt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},m=async T=>{if(a){d(!0);try{await a(t.id,T),i({title:"Notification Sent",description:`${T==="sms"?"SMS":"Email"} notification sent successfully`})}catch{i({title:"Error",description:`Failed to send ${T==="sms"?"SMS":"email"} notification`,variant:"destructive"})}finally{d(!1)}}},h=()=>{var T,S;try{const C=new Pt;if(C.setFontSize(20),C.text("Delivery Information Sheet",105,15,{align:"center"}),C.setFontSize(12),C.text(`Delivery #: ${t.id}`,20,30),C.text(`Status: ${t.status.replace("_"," ")}`,20,40),C.text(`Scheduled Date: ${nt(t.scheduledDate)}`,20,50),C.setFontSize(16),C.text("Vehicle Information",20,65),C.setFontSize(12),s?(C.text(`Vehicle: ${s.year} ${s.make} ${s.model}`,20,75),C.text(`VIN: ${s.vin}`,20,85)):C.text(`Vehicle ID: ${t.vehicleId}`,20,75),C.setFontSize(16),C.text("Delivery Address",20,105),C.setFontSize(12),C.text(`${t.address.street}`,20,115),C.text(`${t.address.city}, ${t.address.state} ${t.address.zipCode}`,20,125),C.text(`${t.address.country}`,20,135),C.setFontSize(16),C.text("Contact Information",20,155),C.setFontSize(12),C.text(`Customer ID: ${t.customerId}`,20,165),(T=t.customFields)!=null&&T.contactPhone&&C.text(`Phone: ${t.customFields.contactPhone}`,20,175),(S=t.customFields)!=null&&S.contactEmail&&C.text(`Email: ${t.customFields.contactEmail}`,20,185),t.notes){C.setFontSize(16),C.text("Delivery Notes",20,205),C.setFontSize(12);const E=C.splitTextToSize(t.notes,170);C.text(E,20,215)}C.setFontSize(16),C.text("Signatures",20,245),C.setFontSize(12),C.text("Driver: _______________________________",20,255),C.text("Customer: _____________________________",20,270),C.save(`delivery-${t.id}.pdf`),i({title:"PDF Generated",description:"Delivery information sheet has been downloaded"})}catch(C){console.error("Error generating PDF:",C),i({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"Delivery Details"}),e.jsxs(Ee,{children:["Delivery #",t.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>n(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{children:[e.jsxs(ms,{value:l,onValueChange:o,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"details",children:"Details"}),e.jsx(Ye,{value:"timeline",children:"Timeline"}),e.jsx(Ye,{value:"photos",children:"Photos"})]}),e.jsxs(Je,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",u(t.status)),children:t.status.replace("_"," ").toUpperCase()}),t.driver&&e.jsxs(Ae,{variant:"outline",children:["Driver: ",t.driver]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("p",{className:"font-medium",children:t.customerId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),e.jsx("p",{className:"font-medium",children:s?`${s.year} ${s.make} ${s.model}`:t.vehicleId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Scheduled Date"}),e.jsx("p",{className:"font-medium",children:nt(t.scheduledDate)})]}),t.deliveredDate&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivered Date"}),e.jsx("p",{className:"font-medium",children:nt(t.deliveredDate)})]}),((p=t.customFields)==null?void 0:p.estimatedArrival)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Estimated Arrival"}),e.jsx("p",{className:"font-medium",children:t.customFields.estimatedArrival})]}),((b=t.customFields)==null?void 0:b.departureTime)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Departure Time"}),e.jsx("p",{className:"font-medium",children:new Date(t.customFields.departureTime).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Delivery Address"}),e.jsxs("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:[e.jsx("p",{children:t.address.street}),e.jsxs("p",{children:[t.address.city,", ",t.address.state," ",t.address.zipCode]}),e.jsx("p",{children:t.address.country})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Contact Information"}),e.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[((j=t.customFields)==null?void 0:j.contactPhone)&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[e.jsx(Gc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:t.customFields.contactPhone})]}),((x=t.customFields)==null?void 0:x.contactEmail)&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[e.jsx(Sr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:t.customFields.contactEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notification Preferences"}),e.jsxs("div",{className:"mt-1 grid gap-2 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[e.jsx(sr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["SMS Updates: ",((f=t.customFields)==null?void 0:f.sendSMSUpdates)!==!1?"Enabled":"Disabled"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-muted/30 rounded-md",children:[e.jsx(Sr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Email Updates: ",((g=t.customFields)==null?void 0:g.sendEmailUpdates)!==!1?"Enabled":"Disabled"]})]})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===Wt.SCHEDULED||t.status===Wt.IN_TRANSIT)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>m("sms"),disabled:c||!((v=t.customFields)!=null&&v.contactPhone),children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Send SMS Update"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>m("email"),disabled:c||!((w=t.customFields)!=null&&w.contactEmail),children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Send Email Update"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(wg,{className:"h-4 w-4 mr-2"}),"Print Delivery Sheet"]})]})]}),e.jsx(Je,{value:"timeline",children:e.jsx(oK,{delivery:t})}),e.jsxs(Je,{value:"photos",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Photos"}),(k=t.customFields)!=null&&k.deliveryPhotos&&t.customFields.deliveryPhotos.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.customFields.deliveryPhotos.map((T,S)=>e.jsx("div",{className:"overflow-hidden rounded-md",children:e.jsx("img",{src:T,alt:`Delivery photo ${S+1}`,className:"w-full h-auto object-cover"})},S))}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Ui,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No delivery photos available"}),t.status!==Wt.DELIVERED&&e.jsx("p",{className:"text-sm",children:"Photos will be added during delivery"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx(H,{variant:"outline",onClick:r,children:"Close"}),e.jsxs(H,{onClick:()=>n(t),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Delivery"]})]})]})]})})}function uY({delivery:t,onSend:s,onCancel:r}){var w,k,T;const{toast:n}=xt(),[a,i]=y.useState(!1),[l,o]=y.useState("sms"),[c,d]=y.useState(""),[u,m]=y.useState(""),[h,p]=y.useState(""),b=((w=t.customer)==null?void 0:w.name)||"Customer",j=t.vehicle?`${t.vehicle.year||""} ${t.vehicle.make||""} ${t.vehicle.model||""}`.trim():"your Home/RV",x=!!((k=t.customer)!=null&&k.phone),f=!!((T=t.customer)!=null&&T.email),g=()=>{try{const S=u||new Date(t.scheduledDate).toLocaleDateString(),C=c||"the scheduled time";return l==="sms"?`Hi ${b}, your delivery of ${j} is scheduled for ${S} at ${C}. Reply HELP for assistance or STOP to opt out.`:`Dear ${b},

We're writing to confirm the delivery of ${j} scheduled for ${S} at ${C}.

If you have any questions or need to reschedule, please contact our delivery team.

Thank you,
The Delivery Team`}catch(S){return console.error("Failed to generate default message:",S),""}};y.useEffect(()=>{try{const S=g();p(S)}catch(S){console.error("Message generation error:",S)}},[l,c,u]);const v=async S=>{if(S.preventDefault(),!h.trim()){n({title:"Validation Error",description:"Please enter a message",variant:"destructive"});return}if(!u||!c){n({title:"Missing ETA",description:"Please select both a date and time for estimated arrival.",variant:"destructive"});return}if(l==="sms"&&!x){n({title:"Missing Phone Number",description:"Customer does not have a valid phone number for SMS.",variant:"destructive"});return}if(l==="email"&&!f){n({title:"Missing Email Address",description:"Customer does not have a valid email address.",variant:"destructive"});return}i(!0);try{await s(t.id,{type:l,estimatedArrival:`${u}T${c}`,message:h,updateDelivery:!0}),n({title:"Notification Sent",description:`${l.toUpperCase()} sent successfully.`}),r()}catch(C){console.error("Notification send failed:",C),n({title:"Error",description:`Failed to send ${l==="sms"?"SMS":"Email"} notification`,variant:"destructive"})}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Send ETA Notification"}),e.jsx(Ee,{children:"Notify the customer about delivery status"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-sm mb-4 text-muted-foreground",children:["Delivering to: ",e.jsx("strong",{children:b}),e.jsx("br",{}),"Home/RV: ",e.jsx("strong",{children:j}),e.jsx("br",{}),l==="sms"&&!x&&e.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid phone number on file"}),l==="email"&&!f&&e.jsx("span",{className:"text-red-500 text-xs",children:"⚠ No valid email address on file"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notificationType",children:"Notification Type"}),e.jsxs(Be,{value:l,onValueChange:S=>o(S),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{className:"z-50",children:[e.jsx(J,{value:"sms",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"SMS"})]})}),e.jsx(J,{value:"email",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sr,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Email"})]})})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(Z,{htmlFor:"arrivalDate",children:"Arrival Date"}),e.jsx(ge,{id:"arrivalDate",type:"date",value:u,onChange:S=>m(S.target.value)})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(Z,{htmlFor:"arrivalTime",children:"Arrival Time"}),e.jsx(ge,{id:"arrivalTime",type:"time",value:c,onChange:S=>d(S.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"driver",children:"Assign Driver"}),e.jsxs(Be,{defaultValue:bl.driverNames[0],children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select driver"})}),e.jsx($e,{children:bl.driverNames.map(S=>e.jsx(J,{value:S,children:S},S))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"message",children:"Message"}),e.jsx(kt,{id:"message",value:h,onChange:S=>p(S.target.value),rows:l==="sms"?3:6,maxLength:l==="sms"?160:void 0}),l==="sms"&&e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:[h.length," characters"]}),e.jsxs("span",{children:[160-h.length," remaining"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Send Notification"]})})]})]})]})]})})}function mY({onCapture:t,onCancel:s}){const{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState([]),[o,c]=y.useState([]),[d,u]=y.useState([]),[m,h]=y.useState(!1),p=y.useRef(null);y.useRef(null);const b=async T=>new Promise(S=>{const C=new Image;C.onload=()=>{const E=document.createElement("canvas"),M=E.getContext("2d"),D=800,A=D/C.width;E.width=D,E.height=C.height*A,M==null||M.drawImage(C,0,0,E.width,E.height),S(E.toDataURL("image/jpeg",.7))},C.src=T}),{getRootProps:j,getInputProps:x}=cv({accept:{"image/*":[]},multiple:!0,maxFiles:10,onDrop:async T=>{try{const S=T.map(E=>new Promise(M=>{const D=new FileReader;D.onload=async()=>{const A=await b(D.result);M(A)},D.readAsDataURL(E)})),C=await Promise.all(S);l(E=>[...E,...C]),c(E=>[...E,...C.map(()=>"")]),u(E=>[...E,...C.map(()=>[])]),r({title:"Upload Successful",description:`${T.length} photo(s) added.`})}catch(S){console.error("File processing error:",S),r({title:"Upload Error",description:"An error occurred while processing files.",variant:"destructive"})}},onError:T=>{r({title:"Upload Failed",description:T.message,variant:"destructive"})}}),f=()=>{var T;(T=p.current)!=null&&T.srcObject&&(p.current.srcObject.getTracks().forEach(S=>S.stop()),p.current.srcObject=null,h(!1),r({title:"Camera Stopped"}))},g=(T,S)=>{c(C=>{const E=[...C];return E[T]=S,E})},v=(T,S)=>{const C=S.split(",").map(E=>E.trim()).filter(Boolean);u(E=>{const M=[...E];return M[T]=C,M})},w=T=>{l(S=>S.filter((C,E)=>E!==T)),c(S=>S.filter((C,E)=>E!==T)),u(S=>S.filter((C,E)=>E!==T))},k=async()=>{if(!i.length){r({title:"No Photos",description:"Please add or take at least one photo.",variant:"destructive"});return}a(!0);try{await t(i,o,d),r({title:"Photos Saved",description:`${i.length} photo(s) saved.`})}catch(T){console.error("Save error:",T),r({title:"Save Failed",description:"Unable to save photos.",variant:"destructive"})}finally{a(!1),f()}};return y.useEffect(()=>()=>{f()},[]),e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex justify-center items-center p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Delivery Photo Capture"}),e.jsx(Ee,{children:"Take or upload photos and add optional captions & tags"})]}),e.jsx(H,{size:"sm",variant:"ghost",onClick:s,children:e.jsx(St,{className:"w-4 h-4"})})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Photo Instructions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700",children:bl.photoInstructions.map((T,S)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{children:T})]},S))})]}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:["Photos (",i.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((T,S)=>{var C;return e.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:T,className:"w-full h-40 object-cover rounded-md",alt:`Photo ${S+1}`}),e.jsx(H,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>w(S),children:e.jsx(St,{className:"w-4 h-4"})})]}),e.jsx(Z,{htmlFor:`caption-${S}`,children:"Caption"}),e.jsx(ge,{id:`caption-${S}`,value:o[S]||"",placeholder:"Optional caption",onChange:E=>g(S,E.target.value)}),e.jsx(Z,{htmlFor:`tags-${S}`,children:"Tags (comma-separated)"}),e.jsx(ge,{id:`tags-${S}`,value:((C=d[S])==null?void 0:C.join(", "))||"",placeholder:"e.g. front, side, receipt",onChange:E=>v(S,E.target.value)})]},S)})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 border-t pt-4",children:[e.jsx(H,{onClick:s,variant:"outline",disabled:n,children:"Cancel"}),e.jsxs(H,{onClick:k,disabled:n||i.length===0,children:[n?e.jsx("div",{className:"animate-spin h-4 w-4 border-b-2 border-white rounded-full mr-2"}):e.jsx(Ru,{className:"w-4 h-4 mr-2"}),n?"Saving...":"Save Photos"]})]})]})]})})}function hY({delivery:t,className:s}){const r=y.useRef(null);return y.useEffect(()=>{if(r.current){const n=r.current;n.innerHTML="";const a=document.createElement("div");a.className="relative w-full h-full bg-muted/30 rounded-lg overflow-hidden",a.innerHTML=`
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <div class="text-muted-foreground mb-2">Map would display here in a real application</div>
            <div class="flex flex-col items-center">
              <div class="text-sm font-medium">Delivery Address:</div>
              <div class="text-sm">${t.address.street}</div>
              <div class="text-sm">${t.address.city}, ${t.address.state} ${t.address.zipCode}</div>
            </div>
          </div>
        </div>
        
        <!-- Simulated map markers -->
        <div class="absolute bottom-4 right-4 bg-background p-2 rounded-md shadow-sm">
          <div class="flex items-center space-x-2 text-xs">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-green-500 mr-1"></div>
              <span>Origin</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-red-500 mr-1"></div>
              <span>Destination</span>
            </div>
            ${t.status==="in_transit"?`
              <div class="flex items-center">
                <div class="w-3 h-3 rounded-full bg-blue-500 mr-1"></div>
                <span>Current Location</span>
              </div>
            `:""}
          </div>
        </div>
        
        <!-- Simulated route -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <svg width="200" height="100" viewBox="0 0 200 100">
            <path d="M20,80 Q100,20 180,80" stroke="#3b82f6" stroke-width="3" fill="none" stroke-dasharray="5,5" />
            ${t.status==="in_transit"?`
              <circle cx="100" cy="50" r="5" fill="#3b82f6" />
            `:""}
            <circle cx="20" cy="80" r="5" fill="#22c55e" />
            <circle cx="180" cy="80" r="5" fill="#ef4444" />
          </svg>
        </div>
      `,n.appendChild(a)}},[t]),e.jsxs(ee,{className:s,children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(ur,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),e.jsx(Ee,{children:"Track delivery location and route"})]}),e.jsx(te,{children:e.jsx("div",{ref:r,className:"h-64 w-full",children:e.jsx("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Hn,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})})})]})}function pY({deliveries:t,onScheduleDelivery:s}){const r=t.length,n=t.filter(h=>h.status===Wt.SCHEDULED).length,a=t.filter(h=>h.status===Wt.IN_TRANSIT).length,i=t.filter(h=>h.status===Wt.DELIVERED).length,l=new Date,o=new Date(l.getTime()+7*24*60*60*1e3),c=t.filter(h=>h.status===Wt.SCHEDULED&&h.scheduledDate>=l&&h.scheduledDate<=o).sort((h,p)=>h.scheduledDate.getTime()-p.scheduledDate.getTime()),d=t.filter(h=>h.status===Wt.IN_TRANSIT).sort((h,p)=>h.scheduledDate.getTime()-p.scheduledDate.getTime()),u=new Date(l.getTime()-30*24*60*60*1e3),m=t.filter(h=>h.status===Wt.DELIVERED&&h.deliveredDate&&h.deliveredDate>=u).sort((h,p)=>{var b,j;return(((b=p.deliveredDate)==null?void 0:b.getTime())||0)-(((j=h.deliveredDate)==null?void 0:j.getTime())||0)}).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[{title:"Total Deliveries",count:r,icon:e.jsx(Hn,{className:"h-4 w-4 text-blue-800"}),description:"All time",bg:"bg-blue-100"},{title:"Scheduled",count:n,icon:e.jsx(Zt,{className:"h-4 w-4 text-yellow-700"}),description:"Upcoming deliveries",bg:"bg-yellow-100"},{title:"In Transit",count:a,icon:e.jsx(Hn,{className:"h-4 w-4 text-orange-700"}),description:"Currently in transit",bg:"bg-orange-100"},{title:"Completed",count:i,icon:e.jsx(_t,{className:"h-4 w-4 text-green-700"}),description:"Successful deliveries",bg:"bg-green-100"}].map((h,p)=>e.jsxs(ee,{className:`${h.bg} border-0 shadow-sm`,children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:h.title}),h.icon]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:h.count}),e.jsxs("p",{className:"text-xs text-gray-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),h.description]})]})]},p))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(de,{children:"Upcoming Deliveries"}),e.jsxs(H,{size:"sm",onClick:s,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Schedule"]})]}),e.jsx(Ee,{children:"Deliveries scheduled for the next 7 days"})]}),e.jsx(te,{children:c.length>0?e.jsx("div",{className:"space-y-4",children:c.map(h=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(Zt,{className:"h-5 w-5 text-blue-500 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:nt(h.scheduledDate)})]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No upcoming deliveries"}),e.jsx("p",{className:"text-sm",children:"Schedule a new delivery to get started"})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"In-Transit Deliveries"}),e.jsx(Ee,{children:"Deliveries currently on the road"})]}),e.jsx(te,{children:d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(h=>{var p;return e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(Hn,{className:"h-5 w-5 text-yellow-500 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ETA: ",((p=h.customFields)==null?void 0:p.estimatedArrival)||"Unknown"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Driver: ",h.driver||"Unassigned"]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:[h.address.city,", ",h.address.state]})]})]},h.id)})}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Hn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No deliveries in transit"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:d.length>0?e.jsx(hY,{delivery:d[0]}):e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(ur,{className:"h-5 w-5 mr-2 text-primary"}),"Delivery Map"]}),e.jsx(Ee,{children:"No active deliveries to display"})]}),e.jsx(te,{children:e.jsx("div",{className:"h-64 w-full flex items-center justify-center bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ur,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No active deliveries to track"})]})})})]})}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Deliveries"}),e.jsx(Ee,{children:"Recently completed deliveries"})]}),e.jsx(te,{children:m.length>0?e.jsx("div",{className:"space-y-4",children:m.map(h=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(_t,{className:"h-5 w-5 text-green-500 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-medium",children:["Delivery #",h.id]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.deliveredDate?nt(h.deliveredDate):"Unknown"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Customer: ",h.customerId]})]})]},h.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent deliveries"})]})})]})]})]})}function jS(){const{deliveries:t,createDelivery:s,updateDelivery:r,updateDeliveryStatus:n,sendNotification:a,updateETA:i,addDeliveryPhotos:l}=JD(),{vehicles:o}=Jc(),{leads:c}=tl(),{toast:d}=xt(),[u,m]=y.useState(""),[h,p]=y.useState("all"),[b,j]=y.useState(!1),[x,f]=y.useState(!1),[g,v]=y.useState(!1),[w,k]=y.useState(!1),[T,S]=y.useState(null),C=R=>{switch(R){case Wt.SCHEDULED:return"bg-blue-50 text-blue-700 border-blue-200";case Wt.IN_TRANSIT:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Wt.DELIVERED:return"bg-green-50 text-green-700 border-green-200";case Wt.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},E=t.filter(R=>R.id.toLowerCase().includes(u.toLowerCase())||R.customerId.toLowerCase().includes(u.toLowerCase())||R.address.city.toLowerCase().includes(u.toLowerCase())).filter(R=>h==="all"||R.status===h),M=()=>{S(null),j(!0)},D=R=>{S(R),j(!0),f(!1)},A=R=>{S(R),f(!0)},I=async R=>{try{T?(await r(T.id,R),d({title:"Success",description:"Delivery updated successfully"})):(await s(R),d({title:"Success",description:"Delivery scheduled successfully"})),j(!1),S(null)}catch{d({title:"Error",description:`Failed to ${T?"update":"schedule"} delivery`,variant:"destructive"})}},L=async(R,$)=>{try{return $.estimatedArrival&&await i(R,$.estimatedArrival),await a(R,$.type,$.message),!0}catch(U){throw console.error("Error sending notification:",U),U}},F=async(R,$)=>{if(T)try{await l(T.id,R,$),T.status===Wt.IN_TRANSIT&&await n(T.id,Wt.DELIVERED),k(!1),d({title:"Photos Added",description:`${R.length} photos added to delivery`})}catch{d({title:"Error",description:"Failed to add photos",variant:"destructive"})}},B=R=>o.find($=>$.id===R);return e.jsxs("div",{className:"space-y-8",children:[b&&e.jsx(cI,{delivery:T||void 0,vehicles:o,customers:c,onSave:I,onCancel:()=>{j(!1),S(null)}}),x&&T&&e.jsx(dY,{delivery:T,vehicle:B(T.vehicleId),onClose:()=>f(!1),onEdit:D,onSendNotification:async(R,$)=>{f(!1),v(!0)}}),g&&T&&e.jsx(uY,{delivery:T,onSend:L,onCancel:()=>{v(!1),f(!0)}}),w&&T&&e.jsx(mY,{onCapture:F,onCancel:()=>{k(!1),f(!0)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Delivery Tracker"}),e.jsx("p",{className:"ri-page-description",children:"Track vehicle deliveries and logistics"})]}),e.jsxs(H,{className:"shadow-sm",onClick:M,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Schedule Delivery"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Deliveries"}),e.jsx(Hn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"All deliveries"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Scheduled"}),e.jsx(Hn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.filter(R=>R.status===Wt.SCHEDULED).length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Upcoming deliveries"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"In Transit"}),e.jsx(Hn,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:t.filter(R=>R.status===Wt.IN_TRANSIT).length}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Hn,{className:"h-3 w-3 mr-1"}),"On the road"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Delivered"}),e.jsx(Hn,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:t.filter(R=>R.status===Wt.DELIVERED).length}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Completed"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Notifications"}),e.jsx(sr,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:t.filter(R=>{var $;return($=R.customFields)==null?void 0:$.customerNotified}).length}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(sr,{className:"h-3 w-3 mr-1"}),"Sent to customers"]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search deliveries...",value:u,onChange:R=>m(R.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs("select",{value:h,onChange:R=>p(R.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:Wt.SCHEDULED,children:"Scheduled"}),e.jsx("option",{value:Wt.IN_TRANSIT,children:"In Transit"}),e.jsx("option",{value:Wt.DELIVERED,children:"Delivered"}),e.jsx("option",{value:Wt.CANCELLED,children:"Cancelled"})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Deliveries"}),e.jsx(Ee,{children:"Track and manage vehicle deliveries"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[E.map(R=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Delivery #",R.id]}),e.jsx(Ae,{className:Ge("ri-badge-status",C(R.status)),children:R.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"h-3 w-3 mr-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Customer:"}),e.jsx("span",{className:"ml-1",children:R.customerId})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"h-3 w-3 mr-2 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Driver:"}),e.jsx("span",{className:"ml-1",children:R.driver||"Not assigned"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-2 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Scheduled:"}),e.jsx("span",{className:"ml-1",children:nt(R.scheduledDate)})]}),R.deliveredDate&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-2 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Delivered:"}),e.jsx("span",{className:"ml-1",children:nt(R.deliveredDate)})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-start bg-muted/30 p-2 rounded-md",children:[e.jsx(ur,{className:"h-3 w-3 mr-2 mt-0.5 text-red-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.address.street,", ",R.address.city,", ",R.address.state," ",R.address.zipCode]})]}),R.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2 bg-blue-50 p-2 rounded-md",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",R.notes]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(R),children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(R),children:"Edit"}),R.status===Wt.IN_TRANSIT&&e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{S(R),k(!0)},children:[e.jsx(Ui,{className:"h-3 w-3 mr-1"}),"Photos"]}),(R.status===Wt.SCHEDULED||R.status===Wt.IN_TRANSIT)&&e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>{S(R),v(!0)},children:[e.jsx(sr,{className:"h-3 w-3 mr-1"}),"Notify"]})]})]},R.id)),E.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Hn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No deliveries found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})]})}function fY(){const{deliveries:t}=JD(),[s,r]=y.useState(!1);return e.jsxs(e.Fragment,{children:[s&&e.jsx(cI,{vehicles:[],customers:[],onSave:async()=>{},onCancel:()=>r(!1)}),e.jsx(pY,{deliveries:t,onScheduleDelivery:()=>r(!0)})]})}function xY(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(fY,{})}),e.jsx(ot,{path:"/list",element:e.jsx(jS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(jS,{})})]})}var da=(t=>(t.IN_PROGRESS="in_progress",t.COMPLETED="completed",t.APPROVED="approved",t.REJECTED="rejected",t))(da||{}),Zs=(t=>(t.PENDING="pending",t.PASSED="passed",t.FAILED="failed",t.NA="na",t))(Zs||{}),ia=(t=>(t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.CRITICAL="critical",t))(ia||{}),cx=(t=>(t.OPEN="open",t.IN_PROGRESS="in_progress",t.RESOLVED="resolved",t.VERIFIED="verified",t))(cx||{}),N1=(t=>(t.INSPECTOR="inspector",t.MANAGER="manager",t.QUALITY_CONTROL="quality_control",t))(N1||{});function gY(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState(!1);y.useEffect(()=>{l()},[]);const l=()=>{const D=xs("renter-insight-pdi-templates",[{id:"1",name:"RV Pre-Delivery Inspection",description:"Standard PDI checklist for recreational vehicles",vehicleType:$t.RV,isActive:!0,sections:[{id:"1-1",templateId:"1",name:"Exterior",description:"Exterior inspection items",orderIndex:1,items:[{id:"1-1-1",sectionId:"1-1",name:"Exterior Body Condition",description:"Check for scratches, dents, or damage",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-1-2",sectionId:"1-1",name:"Roof Inspection",description:"Check roof seals, vents, and AC units",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")},{id:"1-1-3",sectionId:"1-1",name:"Exterior Photos",description:"Take photos of all sides of the vehicle",itemType:"photo",isRequired:!0,orderIndex:3,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")},{id:"1-2",templateId:"1",name:"Interior",description:"Interior inspection items",orderIndex:2,items:[{id:"1-2-1",sectionId:"1-2",name:"Interior Cleanliness",description:"Verify interior is clean and free of debris",itemType:"checkbox",isRequired:!0,orderIndex:1,createdAt:new Date("2024-01-01")},{id:"1-2-2",sectionId:"1-2",name:"Furniture Condition",description:"Check all furniture for damage or defects",itemType:"checkbox",isRequired:!0,orderIndex:2,createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01")}],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Motorhome Pre-Delivery Inspection",description:"Comprehensive PDI checklist for motorhomes",vehicleType:$t.MOTORHOME,isActive:!0,sections:[],createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),A=xs("renter-insight-pdi-inspections",[{id:"1",templateId:"1",vehicleId:"1",inspectorId:"user-001",status:da.IN_PROGRESS,startedAt:new Date("2024-01-15"),notes:"Initial inspection for new RV",items:[{id:"1-1",inspectionId:"1",templateItemId:"1-1-1",status:Zs.PASSED,notes:"No exterior damage found",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"1-2",inspectionId:"1",templateItemId:"1-1-2",status:Zs.FAILED,notes:"Roof seal damaged near AC unit",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],defects:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",title:"Roof Seal Damage",description:"Damaged roof seal near AC unit on passenger side",severity:ia.MEDIUM,status:cx.OPEN,assignedTo:"user-002",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}],photos:[{id:"1-1",inspectionId:"1",inspectionItemId:"1-2",defectId:"1-1",url:"https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg",caption:"Damaged roof seal",createdAt:new Date("2024-01-15")}],signoffs:[],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]);s(D),n(A)},o=D=>{Xt("renter-insight-pdi-templates",D)},c=D=>{Xt("renter-insight-pdi-inspections",D)};return y.useEffect(()=>{r.length>0&&c(r)},[r]),{templates:t,inspections:r,loading:a,getTemplatesByVehicleType:D=>t.filter(A=>A.vehicleType===D&&A.isActive),getTemplateById:D=>t.find(A=>A.id===D),createTemplate:async D=>{i(!0);try{const A={id:Math.random().toString(36).substr(2,9),name:D.name||"",description:D.description||"",vehicleType:D.vehicleType||$t.RV,isActive:D.isActive??!0,sections:D.sections||[],createdAt:new Date,updatedAt:new Date},I=[...t,A];return s(I),o(I),A}finally{i(!1)}},updateTemplate:async(D,A)=>{const I=t.map(L=>L.id===D?{...L,...A,updatedAt:new Date}:L);s(I),o(I)},deleteTemplate:async D=>{const A=t.filter(I=>I.id!==D);s(A),o(A)},createTemplateSection:async(D,A)=>{const I=t.find(R=>R.id===D);if(!I)return null;const L={id:Math.random().toString(36).substr(2,9),templateId:D,name:A.name||"",description:A.description||"",orderIndex:A.orderIndex||I.sections.length+1,items:A.items||[],createdAt:new Date},F={...I,sections:[...I.sections,L],updatedAt:new Date},B=t.map(R=>R.id===D?F:R);return s(B),o(B),L},createTemplateItem:async(D,A)=>{const I=t.findIndex(_=>_.sections.some(V=>V.id===D));if(I===-1)return null;const L=t[I],F=L.sections.findIndex(_=>_.id===D);if(F===-1)return null;const B=L.sections[F],R={id:Math.random().toString(36).substr(2,9),sectionId:D,name:A.name||"",description:A.description||"",itemType:A.itemType||"checkbox",isRequired:A.isRequired??!0,orderIndex:A.orderIndex||B.items.length+1,createdAt:new Date},$={...B,items:[...B.items,R]},U=[...L.sections];U[F]=$;const W={...L,sections:U,updatedAt:new Date},q=[...t];return q[I]=W,s(q),o(q),R},getInspectionsByVehicleId:D=>r.filter(A=>A.vehicleId===D),getInspectionById:D=>r.find(A=>A.id===D),createInspection:async D=>{i(!0);try{const A=t.find(B=>B.id===D.templateId);if(!A)throw new Error("Template not found");const I=[];A.sections.forEach(B=>{B.items.forEach(R=>{I.push({id:Math.random().toString(36).substr(2,9),inspectionId:"",templateItemId:R.id,templateItem:R,status:Zs.PENDING,createdAt:new Date,updatedAt:new Date})})});const L={id:Math.random().toString(36).substr(2,9),templateId:D.templateId||"",template:A||void 0,vehicleId:D.vehicleId||"",inspectorId:D.inspectorId||"",status:da.IN_PROGRESS,startedAt:new Date,notes:D.notes||"",items:[],defects:[],photos:[],signoffs:[],createdAt:new Date,updatedAt:new Date};I.forEach(B=>{B.inspectionId=L.id}),L.items=I;const F=[...r,L];return n(F),c(F),L}finally{i(!1)}},updateInspection:async(D,A)=>{const I=r.map(L=>L.id===D?{...L,...A,updatedAt:new Date}:L);n(I),c(I)},updateInspectionItem:async(D,A,I)=>{const L=r.findIndex(W=>W.id===D);if(L===-1)return;const F=r[L],B=F.items.findIndex(W=>W.id===A);if(B===-1)return;const R=[...F.items];R[B]={...R[B],...I,updatedAt:new Date};const $={...F,items:R,updatedAt:new Date},U=[...r];U[L]=$,n(U),c(U),c(U)},completeInspection:async(D,A)=>{const I=r.findIndex($=>$.id===D);if(I===-1)return;const L=r[I];if(!L.items.every($=>{const U=t.flatMap(W=>W.sections).flatMap(W=>W.items).find(W=>W.id===$.templateItemId);return!(U!=null&&U.isRequired)||$.status!==Zs.PENDING}))throw new Error("All required items must be completed");const B={...L,status:da.COMPLETED,completedAt:new Date,notes:A||L.notes,updatedAt:new Date},R=[...r];R[I]=B,n(R),c(R)},createDefect:async(D,A)=>{const I=r.findIndex($=>$.id===D);if(I===-1)return null;const L=r[I],F={id:Math.random().toString(36).substr(2,9),inspectionId:D,inspectionItemId:A.inspectionItemId,title:A.title||"",description:A.description||"",severity:A.severity||ia.MEDIUM,status:cx.OPEN,assignedTo:A.assignedTo,photos:[],createdAt:new Date,updatedAt:new Date},B={...L,defects:[...L.defects,F],updatedAt:new Date},R=[...r];return R[I]=B,n(R),c(R),F},updateDefect:async(D,A,I)=>{const L=r.findIndex(W=>W.id===D);if(L===-1)return;const F=r[L],B=F.defects.findIndex(W=>W.id===A);if(B===-1)return;const R=[...F.defects];R[B]={...R[B],...I,updatedAt:new Date};const $={...F,defects:R,updatedAt:new Date},U=[...r];U[L]=$,n(U),c(U)},resolveDefect:async(D,A,I)=>{const L=r.findIndex(W=>W.id===D);if(L===-1)return;const F=r[L],B=F.defects.findIndex(W=>W.id===A);if(B===-1)return;const R=[...F.defects];R[B]={...R[B],status:cx.RESOLVED,resolvedAt:new Date,resolutionNotes:I,updatedAt:new Date};const $={...F,defects:R,updatedAt:new Date},U=[...r];U[L]=$,n(U),c(U)},addPhoto:async(D,A)=>{const I=r.findIndex($=>$.id===D);if(I===-1)return null;const L=r[I],F={id:Math.random().toString(36).substr(2,9),inspectionId:D,inspectionItemId:A.inspectionItemId,defectId:A.defectId,url:A.url||"",caption:A.caption,createdAt:new Date},B={...L,photos:[...L.photos,F],updatedAt:new Date},R=[...r];return R[I]=B,n(R),c(R),F},addSignoff:async(D,A)=>{const I=r.findIndex(U=>U.id===D);if(I===-1)return null;const L=r[I],F={id:Math.random().toString(36).substr(2,9),inspectionId:D,userId:A.userId||"",role:A.role||N1.INSPECTOR,signatureUrl:A.signatureUrl,notes:A.notes,signedAt:new Date,createdAt:new Date};let B=L.status;A.role===N1.MANAGER&&(B=da.APPROVED);const R={...L,signoffs:[...L.signoffs,F],status:B,updatedAt:new Date},$=[...r];return $[I]=R,n($),c($),F}}}function vY({templates:t,onCreateTemplate:s,onEditTemplate:r,onDeleteTemplate:n,onDuplicateTemplate:a,onViewTemplate:i}){const[l,o]=y.useState(""),[c,d]=y.useState("all"),u=t.filter(h=>{var j;const p=h.name.toLowerCase().includes(l.toLowerCase())||((j=h.description)==null?void 0:j.toLowerCase().includes(l.toLowerCase())),b=c==="all"||h.vehicleType===c;return p&&b}),m=h=>h.replace("_"," ").toUpperCase();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"ri-search-bar flex-1",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search templates...",value:l,onChange:h=>o(h.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"rv",children:"RV"}),e.jsx("option",{value:"motorhome",children:"Motorhome"}),e.jsx("option",{value:"travel_trailer",children:"Travel Trailer"}),e.jsx("option",{value:"fifth_wheel",children:"Fifth Wheel"}),e.jsx("option",{value:"toy_hauler",children:"Toy Hauler"})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]}),e.jsxs(H,{onClick:s,className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"text-xl",children:["PDI Templates (",u.length,")"]}),e.jsx(Ee,{children:"Manage pre-delivery inspection templates for different vehicle types"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[u.map(h=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:h.name}),e.jsx(Ae,{variant:"outline",children:m(h.vehicleType)}),h.isActive?e.jsx(Ae,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):e.jsx(Ae,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:h.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ly,{className:"h-3 w-3 mr-1 text-blue-500"}),h.sections.length," sections"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx($c,{className:"h-3 w-3 mr-1 text-green-500"}),h.sections.reduce((p,b)=>p+b.items.length,0)," items"]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>i(h),children:"View"}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(h),children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>a(h),children:[e.jsx(Mu,{className:"h-3 w-3 mr-1"}),"Duplicate"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>n(h.id),children:e.jsx(js,{className:"h-3 w-3"})})]})]},h.id)),u.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ly,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No templates found"}),e.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})})]})]})}const gn={checklistStatuses:["Not Started","In Progress","Complete","Failed","Pending Review","Approved"],formDefaults:{unitId:"",technicianId:"",templateId:"template-rv-standard",status:"Not Started",startedDate:"",notes:"",customerNotified:!1,deliveryApproved:!1},templateOptions:[{id:"template-rv-standard",name:"Standard RV PDI",description:"Comprehensive inspection for travel trailers and motorhomes",unitTypes:["Travel Trailer","Motorhome","Toy Hauler"]},{id:"template-fifthwheel",name:"Fifth Wheel PDI",description:"Specialized inspection for fifth wheel trailers",unitTypes:["Fifth Wheel"]},{id:"template-manufactured-home",name:"Manufactured Home PDI",description:"Complete inspection for manufactured housing units",unitTypes:["Single Wide","Double Wide","Triple Wide"]},{id:"template-park-model",name:"Park Model PDI",description:"Inspection checklist for park model homes",unitTypes:["Park Model"]}],inspectionCategories:[{id:"exterior",name:"Exterior",items:["Body Condition","Paint/Graphics","Windows/Doors","Awnings","Slide-out Operation","Tires/Wheels","Hitch/Coupling","Exterior Lights","Storage Compartments"]},{id:"interior",name:"Interior",items:["Flooring","Walls/Ceiling","Furniture/Cabinetry","Appliances","Window Treatments","Interior Lights","Safety Equipment","Entertainment Systems"]},{id:"electrical",name:"Electrical",items:["12V Systems","120V Systems","Battery Condition","Converter/Inverter","Solar System","Generator","Shore Power Connection","GFCI Outlets"]},{id:"plumbing",name:"Plumbing",items:["Water System","Hot Water Heater","Toilet Operation","Shower/Tub","Kitchen Sink","Water Pump","Holding Tanks","Exterior Water Connection"]},{id:"hvac",name:"HVAC",items:["Air Conditioning","Furnace Operation","Ventilation Fans","Thermostat","Ductwork","Filters","Vents/Returns"]},{id:"safety",name:"Safety & Compliance",items:["Smoke Detectors","Carbon Monoxide Detector","Fire Extinguisher","Emergency Exits","Propane System","Brake System","Safety Chains","Compliance Labels"]}],technicianOptions:[{id:"tech-001",name:"Mike Johnson",specialties:["Electrical","Plumbing"]},{id:"tech-002",name:"Sarah Davis",specialties:["HVAC","Appliances"]},{id:"tech-003",name:"Tom Wilson",specialties:["Structural","Exterior"]},{id:"tech-004",name:"Lisa Chen",specialties:["Interior","Safety"]}],statusColors:{"Not Started":"bg-gray-100 text-gray-800","In Progress":"bg-blue-100 text-blue-800",Complete:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800","Pending Review":"bg-yellow-100 text-yellow-800",Approved:"bg-emerald-100 text-emerald-800"}};function jY({template:t,onSave:s,onCancel:r}){var D;const{toast:n}=xt(),[a,i]=y.useState(!1),[l,o]=y.useState({name:(t==null?void 0:t.name)||gn.formDefaults.unitId,description:(t==null?void 0:t.description)||"",unitTypes:(t==null?void 0:t.unitTypes)||[],categories:[],vehicleType:$t.RV,isActive:!0,sections:[]}),[c,d]=y.useState(!1),[u,m]=y.useState({name:"",description:"",items:[]}),[h,p]=y.useState(!1),[b,j]=y.useState(null),[x,f]=y.useState({name:"",description:"",itemType:"checkbox",isRequired:!0});[...new Set(gn.templateOptions.flatMap(A=>A.unitTypes))];const g=async A=>{if(A.preventDefault(),!l.name){n({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}if(!l.vehicleType){n({title:"Validation Error",description:"Vehicle type is required",variant:"destructive"});return}if(!l.sections||l.sections.length===0){n({title:"Validation Error",description:"At least one section is required",variant:"destructive"});return}const I=l.sections.filter(L=>!L.items||L.items.length===0);if(I.length>0){n({title:"Validation Error",description:`Section "${I[0].name}" must have at least one item`,variant:"destructive"});return}i(!0);try{await s(l),n({title:"Success",description:`Template ${t?"updated":"created"} successfully`})}catch{n({title:"Error",description:`Failed to ${t?"update":"create"} template`,variant:"destructive"})}finally{i(!1)}},v=()=>{var I;if(!u.name){n({title:"Validation Error",description:"Section name is required",variant:"destructive"});return}const A={id:Math.random().toString(36).substr(2,9),templateId:(t==null?void 0:t.id)||"",name:u.name,description:u.description||"",orderIndex:(((I=l.sections)==null?void 0:I.length)||0)+1,items:[],createdAt:new Date};o(L=>({...L,sections:[...L.sections||[],A]})),m({name:"",description:"",items:[]}),d(!1)},w=A=>{o(I=>{var L;return{...I,sections:((L=I.sections)==null?void 0:L.filter(F=>F.id!==A))||[]}})},k=A=>{const I=[...l.sections||[]],L=I.findIndex(F=>F.id===A);L<=0||([I[L-1],I[L]]=[I[L],I[L-1]],I.forEach((F,B)=>{F.orderIndex=B+1}),o(F=>({...F,sections:I})))},T=A=>{const I=[...l.sections||[]],L=I.findIndex(F=>F.id===A);L===-1||L>=I.length-1||([I[L],I[L+1]]=[I[L+1],I[L]],I.forEach((F,B)=>{F.orderIndex=B+1}),o(F=>({...F,sections:I})))},S=A=>{var R;if(!x.name){n({title:"Validation Error",description:"Item name is required",variant:"destructive"});return}const I=[...l.sections||[]],L=I.findIndex($=>$.id===A);if(L===-1)return;const F=I[L],B={id:Math.random().toString(36).substr(2,9),sectionId:A,name:x.name,description:x.description||"",itemType:x.itemType||"checkbox",isRequired:x.isRequired??!0,orderIndex:(((R=F.items)==null?void 0:R.length)||0)+1,createdAt:new Date};F.items=[...F.items||[],B],I[L]=F,o($=>({...$,sections:I})),f({name:"",description:"",itemType:"checkbox",isRequired:!0}),p(!1)},C=(A,I)=>{const L=[...l.sections||[]],F=L.findIndex(R=>R.id===A);if(F===-1)return;const B=L[F];B.items=B.items.filter(R=>R.id!==I),L[F]=B,o(R=>({...R,sections:L}))},E=(A,I)=>{const L=[...l.sections||[]],F=L.findIndex(U=>U.id===A);if(F===-1)return;const B=L[F],R=[...B.items],$=R.findIndex(U=>U.id===I);$<=0||([R[$-1],R[$]]=[R[$],R[$-1]],R.forEach((U,W)=>{U.orderIndex=W+1}),B.items=R,L[F]=B,o(U=>({...U,sections:L})))},M=(A,I)=>{const L=[...l.sections||[]],F=L.findIndex(U=>U.id===A);if(F===-1)return;const B=L[F],R=[...B.items],$=R.findIndex(U=>U.id===I);$===-1||$>=R.length-1||([R[$],R[$+1]]=[R[$+1],R[$]],R.forEach((U,W)=>{U.orderIndex=W+1}),B.items=R,L[F]=B,o(U=>({...U,sections:L})))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Template":"Create Template"}),e.jsx(Ee,{children:t?"Update PDI template details":"Create a new PDI template"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Template Information"}),e.jsxs("div",{children:[e.jsx(Z,{children:"Base Template"}),e.jsxs(Be,{value:"",onValueChange:A=>{const I=gn.templateOptions.find(L=>L.id===A);I&&o(L=>({...L,name:I.name,description:I.description,unitTypes:I.unitTypes}))},children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Start from existing template (optional)"})}),e.jsx($e,{children:gn.templateOptions.map(A=>e.jsx(J,{value:A.id,children:A.name},A.id))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a template to copy its settings as a starting point"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Categories"}),gn.inspectionCategories.map(A=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`category-${A.id}`,checked:l.categories.includes(A.name),onCheckedChange:I=>{o(I?L=>({...L,categories:[...L.categories,A.name]}):L=>({...L,categories:L.categories.filter(F=>F!==A.name)}))}}),e.jsx(Z,{htmlFor:`category-${A.id}`,className:"text-sm",children:A.name})]},A.id))]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Template Name *"}),e.jsx(ge,{id:"name",value:l.name,onChange:A=>o(I=>({...I,name:A.target.value})),placeholder:"e.g., RV Pre-Delivery Inspection"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicleType",children:"Home/Vehicle Type *"}),e.jsxs(Be,{value:l.vehicleType,onValueChange:A=>o(I=>({...I,vehicleType:A})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:$t.RV,children:"RV"}),e.jsx(J,{value:$t.MOTORHOME,children:"Motorhome"}),e.jsx(J,{value:$t.TRAVEL_TRAILER,children:"Travel Trailer"}),e.jsx(J,{value:$t.FIFTH_WHEEL,children:"Fifth Wheel"}),e.jsx(J,{value:$t.TOY_HAULER,children:"Toy Hauler"}),e.jsx(J,{value:$t.SINGLE_WIDE,children:"Single Wide MH"}),e.jsx(J,{value:$t.DOUBLE_WIDE,children:"Double Wide MH"}),e.jsx(J,{value:$t.TRIPLE_WIDE,children:"Triple Wide MH"}),e.jsx(J,{value:$t.PARK_MODEL,children:"Park Model"}),e.jsx(J,{value:$t.MODULAR_HOME,children:"Modular Home"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(kt,{id:"description",value:l.description,onChange:A=>o(I=>({...I,description:A.target.value})),placeholder:"Describe the purpose and scope of this template",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"isActive",checked:l.isActive,onCheckedChange:A=>o(I=>({...I,isActive:!!A}))}),e.jsx(Z,{htmlFor:"isActive",children:"Active template"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),e.jsxs(H,{type:"button",onClick:()=>d(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),c&&e.jsx(ee,{className:"border-dashed",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"sectionName",children:"Section Name *"}),e.jsx(ge,{id:"sectionName",value:u.name,onChange:A=>m(I=>({...I,name:A.target.value})),placeholder:"e.g., Exterior Inspection"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"sectionDescription",children:"Description"}),e.jsx(kt,{id:"sectionDescription",value:u.description,onChange:A=>m(I=>({...I,description:A.target.value})),placeholder:"Describe this section",rows:2})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(H,{type:"button",onClick:v,children:"Add Section"})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[(D=l.sections)==null?void 0:D.map(A=>{var I;return e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-lg",children:A.name}),A.description&&e.jsx(Ee,{children:A.description})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(A.id),disabled:A.orderIndex<=1,children:e.jsx(uo,{className:"h-4 w-4"})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(A.id),disabled:A.orderIndex>=(((I=l.sections)==null?void 0:I.length)||0),children:e.jsx(co,{className:"h-4 w-4"})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(A.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-semibold",children:["Items (",A.items.length,")"]}),e.jsxs(H,{type:"button",size:"sm",variant:"outline",onClick:()=>{j(A.id),p(!0)},children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Add Item"]})]}),h&&b===A.id&&e.jsx(ee,{className:"border-dashed",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"itemName",children:"Item Name *"}),e.jsx(ge,{id:"itemName",value:x.name,onChange:L=>f(F=>({...F,name:L.target.value})),placeholder:"e.g., Check Exterior Body Condition"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"itemType",children:"Item Type"}),e.jsxs(Be,{value:x.itemType,onValueChange:L=>f(F=>({...F,itemType:L})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"checkbox",children:"Checkbox"}),e.jsx(J,{value:"text",children:"Text Input"}),e.jsx(J,{value:"number",children:"Number Input"}),e.jsx(J,{value:"photo",children:"Photo Upload"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"itemDescription",children:"Description"}),e.jsx(kt,{id:"itemDescription",value:x.description,onChange:L=>f(F=>({...F,description:L.target.value})),placeholder:"Describe this inspection item",rows:2})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"isRequired",checked:x.isRequired,onCheckedChange:L=>f(F=>({...F,isRequired:!!L}))}),e.jsx(Z,{htmlFor:"isRequired",children:"Required item"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>{p(!1),j(null)},children:"Cancel"}),e.jsx(H,{type:"button",onClick:()=>S(A.id),children:"Add Item"})]})]})})}),e.jsxs("div",{className:"space-y-2",children:[A.items.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:L.name}),e.jsx(Ae,{variant:"outline",className:"text-xs",children:L.itemType}),L.isRequired&&e.jsx(Ae,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"})]}),L.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:L.description})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(A.id,L.id),disabled:L.orderIndex<=1,children:e.jsx(uo,{className:"h-3 w-3"})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(A.id,L.id),disabled:L.orderIndex>=A.items.length,children:e.jsx(co,{className:"h-3 w-3"})}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id,L.id),children:e.jsx(js,{className:"h-3 w-3 text-red-500"})})]})]},L.id)),A.items.length===0&&e.jsxs("div",{className:"text-center py-4 text-sm text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx($c,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{children:"No items added yet"}),e.jsx("p",{className:"text-xs",children:"Add items to this section"})]})]})]})})]},A.id)}),(!l.sections||l.sections.length===0)&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Ly,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No sections added yet"}),e.jsx("p",{className:"text-sm",children:"Add sections to organize your checklist"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,disabled:a,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Template"]})})]})]})})]})})}function yY({inspections:t,onNewInspection:s,onViewInspection:r,onEditInspection:n,onCreateTask:a}){const[i,l]=y.useState(""),[o,c]=y.useState("all"),[d,u]=y.useState("all"),m=t,h=x=>gn.statusColors[x]||"bg-gray-100 text-gray-800",p=x=>{switch(x){case"Complete":return e.jsx(_t,{className:"h-4 w-4 text-green-600"});case"In Progress":return e.jsx(zt,{className:"h-4 w-4 text-blue-600"});case"Failed":return e.jsx(xa,{className:"h-4 w-4 text-red-600"});default:return e.jsx(zt,{className:"h-4 w-4 text-gray-600"})}},b=m.filter(x=>{var w,k,T;const f=((w=x.unitInfo)==null?void 0:w.toLowerCase().includes(i.toLowerCase()))||((k=x.stockNumber)==null?void 0:k.toLowerCase().includes(i.toLowerCase()))||((T=x.technicianName)==null?void 0:T.toLowerCase().includes(i.toLowerCase())),g=o==="all"||x.status===o,v=d==="all"||x.technicianId===d;return f&&g&&v}),j=x=>{if(!x.findings||x.findings.length===0)return 0;const f=x.findings.filter(g=>g.status==="Pass"||g.status==="Fail").length;return Math.round(f/x.findings.length*100)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PDI Inspections"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage pre-delivery inspections for RVs and vehicles"})]}),e.jsxs(H,{onClick:s,children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"New Inspection"]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Inspection List"}),e.jsx(Ee,{children:"View and manage all PDI inspections"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(gs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search inspections...",value:i,onChange:x=>l(x.target.value),className:"pl-8"})]}),e.jsxs(Be,{value:o,onValueChange:c,children:[e.jsx(Oe,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"All statuses"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),gn.checklistStatuses.map(x=>e.jsx(J,{value:x,children:x},x))]})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"All technicians"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Technicians"}),gn.technicianOptions.map(x=>e.jsx(J,{value:x.id,children:x.name},x.id))]})]})]}),e.jsxs(zg,{children:[e.jsx(Vg,{children:e.jsxs(Io,{children:[e.jsx(Hs,{children:"Unit Info"}),e.jsx(Hs,{children:"Stock #"}),e.jsx(Hs,{children:"Technician"}),e.jsx(Hs,{children:"Status"}),e.jsx(Hs,{children:"Progress"}),e.jsx(Hs,{children:"Started"}),e.jsx(Hs,{children:"Completed"}),e.jsx(Hs,{children:"Actions"})]})}),e.jsx(Ug,{children:b.map(x=>e.jsxs(Io,{children:[e.jsx($s,{className:"font-medium",children:x.vehicle?`${x.vehicle.year} ${x.vehicle.make} ${x.vehicle.model}`:x.vehicleId}),e.jsx($s,{children:x.vehicleId}),e.jsx($s,{children:x.inspectorId}),e.jsx($s,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[p(x.status),e.jsx(Ae,{className:h(x.status),children:x.status})]})}),e.jsx($s,{children:e.jsxs("div",{className:"text-sm",children:[j(x),"% Complete"]})}),e.jsx($s,{children:nt(x.startedAt)}),e.jsx($s,{children:x.completedAt?nt(x.completedAt):"-"}),e.jsx($s,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"outline",size:"sm",onClick:()=>r(x.id),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>n(x.id),children:e.jsx(ts,{className:"h-4 w-4"})}),a&&e.jsx(H,{variant:"outline",size:"sm",onClick:()=>a(x),title:"Create Task",children:e.jsx(ln,{className:"h-4 w-4"})})]})})]},x.id))})]}),b.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inspections found matching your criteria."})]})]})]})}function bY({inspection:t,vehicles:s,onSave:r,onComplete:n,onUpdateItem:a,onAddDefect:i,onAddPhoto:l,onCancel:o}){var q;const{toast:c}=xt(),[d,u]=y.useState(!1),[m,h]=y.useState("checklist"),[p,b]=y.useState(t.notes||""),[j,x]=y.useState(!1),[f,g]=y.useState(null),[v,w]=y.useState({title:"",description:"",severity:ia.MEDIUM}),[k,T]=y.useState(!1),[S,C]=y.useState(""),[E,M]=y.useState({unitId:(t==null?void 0:t.unitId)||gn.formDefaults.unitId,technicianId:(t==null?void 0:t.technicianId)||gn.formDefaults.technicianId,templateId:(t==null?void 0:t.templateId)||gn.formDefaults.templateId,status:(t==null?void 0:t.status)||gn.formDefaults.status,startedDate:(t==null?void 0:t.startedDate)||gn.formDefaults.startedDate,notes:(t==null?void 0:t.notes)||gn.formDefaults.notes,customerNotified:(t==null?void 0:t.customerNotified)||gn.formDefaults.customerNotified,deliveryApproved:(t==null?void 0:t.deliveryApproved)||gn.formDefaults.deliveryApproved});y.useEffect(()=>{b(t.notes||"")},[t]);const{getRootProps:D,getInputProps:A}=cv({accept:{"image/*":[]},onDrop:_=>{if(_.length===0)return;const V=_[0],Q=URL.createObjectURL(V);R(Q)}}),I=async()=>{u(!0);try{await r(t.id,{notes:p,updatedAt:new Date}),c({title:"Success",description:"Inspection saved successfully"})}catch{c({title:"Error",description:"Failed to save inspection",variant:"destructive"})}finally{u(!1)}},L=async()=>{const _=t.items.filter(V=>{const Q=V.templateItem;return(Q==null?void 0:Q.isRequired)&&V.status===Zs.PENDING});if(_.length>0){c({title:"Incomplete Inspection",description:`${_.length} required items are still pending`,variant:"destructive"});return}u(!0);try{await n(t.id,p),c({title:"Success",description:"Inspection completed successfully"}),o()}catch{c({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}finally{u(!1)}},F=async(_,V,Q,G)=>{try{await a(t.id,_,{status:V,value:Q,notes:G});const Y={...t,items:t.items.map(ne=>ne.id===_?{...ne,status:V,value:Q,notes:G,updatedAt:new Date}:ne),updatedAt:new Date};V===Zs.FAILED&&(g(_),x(!0)),c({title:"Item Updated",description:`Inspection item marked as ${V}`})}catch{c({title:"Error",description:"Failed to update item",variant:"destructive"})}},B=async()=>{if(!v.title||!v.description){c({title:"Validation Error",description:"Title and description are required",variant:"destructive"});return}try{await i(t.id,{...v,inspectionItemId:f||void 0}),w({title:"",description:"",severity:ia.MEDIUM}),g(null),x(!1),c({title:"Success",description:"Defect added successfully"})}catch{c({title:"Error",description:"Failed to add defect",variant:"destructive"})}},R=async _=>{try{await l(t.id,{url:_,inspectionItemId:f||void 0,caption:S}),C(""),T(!1),c({title:"Success",description:"Photo added successfully"})}catch{c({title:"Error",description:"Failed to add photo",variant:"destructive"})}},$=_=>{switch(_){case Zs.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Zs.PASSED:return"bg-green-50 text-green-700 border-green-200";case Zs.FAILED:return"bg-red-50 text-red-700 border-red-200";case Zs.NA:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},U=_=>{switch(_){case ia.LOW:return"bg-blue-50 text-blue-700 border-blue-200";case ia.MEDIUM:return"bg-yellow-50 text-yellow-700 border-yellow-200";case ia.HIGH:return"bg-orange-50 text-orange-700 border-orange-200";case ia.CRITICAL:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},W=s.find(_=>_.id===t.vehicleId);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"PDI Inspection"}),e.jsx(Ee,{children:W?`${W.year} ${W.make} ${W.model}`:t.vehicleId})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",t.status===da.IN_PROGRESS?"bg-yellow-50 text-yellow-700 border-yellow-200":t.status===da.COMPLETED?"bg-blue-50 text-blue-700 border-blue-200":t.status===da.APPROVED?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:t.status.replace("_"," ").toUpperCase()}),e.jsx(H,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsx(te,{children:e.jsxs(ms,{value:m,onValueChange:h,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"checklist",children:"Checklist"}),e.jsxs(Ye,{value:"defects",children:["Defects",t.defects.length>0&&e.jsx(Ae,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:t.defects.length})]}),e.jsxs(Ye,{value:"photos",children:["Photos",t.photos.length>0&&e.jsx(Ae,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:t.photos.length})]})]}),e.jsxs(Je,{value:"checklist",className:"space-y-6",children:[j&&e.jsxs(ee,{className:"border-2 border-red-200",children:[e.jsxs(ce,{className:"bg-red-50",children:[e.jsxs(de,{className:"text-lg text-red-700 flex items-center",children:[e.jsx(Gn,{className:"h-5 w-5 mr-2"}),"Report Defect"]}),e.jsx(Ee,{className:"text-red-600",children:"Record details about the issue found"})]}),e.jsxs(te,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defectTitle",children:"Defect Title *"}),e.jsx(ge,{id:"defectTitle",value:v.title,onChange:_=>w(V=>({...V,title:_.target.value})),placeholder:"e.g., Damaged Roof Seal"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defectDescription",children:"Description *"}),e.jsx(kt,{id:"defectDescription",value:v.description,onChange:_=>w(V=>({...V,description:_.target.value})),placeholder:"Describe the defect in detail",rows:3})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defectSeverity",children:"Severity"}),e.jsxs(Be,{value:v.severity,onValueChange:_=>w(V=>({...V,severity:_})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:ia.LOW,children:"Low"}),e.jsx(J,{value:ia.MEDIUM,children:"Medium"}),e.jsx(J,{value:ia.HIGH,children:"High"}),e.jsx(J,{value:ia.CRITICAL,children:"Critical"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>{x(!1),g(null)},children:"Cancel"}),e.jsx(H,{type:"button",onClick:B,children:"Add Defect"})]})]})]}),k&&e.jsxs(ee,{className:"border-2 border-blue-200",children:[e.jsxs(ce,{className:"bg-blue-50",children:[e.jsxs(de,{className:"text-lg text-blue-700 flex items-center",children:[e.jsx(Ui,{className:"h-5 w-5 mr-2"}),"Add Photo"]}),e.jsx(Ee,{className:"text-blue-600",children:"Upload a photo for documentation"})]}),e.jsxs(te,{className:"pt-6 space-y-4",children:[e.jsxs("div",{...D(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:bg-muted/10",children:[e.jsx("input",{...A()}),e.jsx(Nu,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag & drop an image here, or click to select a file"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"photoCaption",children:"Caption (Optional)"}),e.jsx(ge,{id:"photoCaption",value:S,onChange:_=>C(_.target.value),placeholder:"e.g., Front view of vehicle"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:()=>{T(!1),g(null),C("")},children:"Cancel"}),e.jsx(H,{type:"button",onClick:()=>{R("https://images.pexels.com/photos/1319515/pexels-photo-1319515.jpeg")},children:"Simulate Upload"})]})]})]}),(q=t.template)==null?void 0:q.sections.map(_=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:_.name}),_.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:_.description}),e.jsx("div",{className:"space-y-3",children:_.items.map(V=>{const Q=t.items.find(G=>G.templateItemId===V.id);return Q?e.jsx(ee,{className:"shadow-sm",children:e.jsx(te,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:V.name}),V.isRequired&&e.jsx(Ae,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),e.jsx(Ae,{className:Ge("ri-badge-status text-xs",$(Q.status)),children:Q.status.toUpperCase()})]}),V.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:V.description}),V.itemType==="text"&&e.jsx("div",{className:"mb-3",children:e.jsx(ge,{value:Q.value||"",onChange:G=>F(Q.id,Zs.PASSED,G.target.value),placeholder:"Enter text"})}),V.itemType==="number"&&e.jsx("div",{className:"mb-3",children:e.jsx(ge,{type:"number",value:Q.value||"",onChange:G=>F(Q.id,Zs.PASSED,G.target.value),placeholder:"Enter number"})}),V.itemType==="photo"&&e.jsxs("div",{className:"mb-3",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{g(Q.id),T(!0)},children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Add Photo"]}),t.photos.filter(G=>G.inspectionItemId===Q.id).length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:t.photos.filter(G=>G.inspectionItemId===Q.id).map(G=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:G.url,alt:G.caption||"Inspection photo",className:"h-20 w-full object-cover rounded-md"}),G.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:G.caption})]},G.id))})]}),Q.notes&&e.jsx("div",{className:"mb-3 p-2 bg-muted/30 rounded-md",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",Q.notes]})}),Q.status!==Zs.PENDING&&e.jsx("div",{className:"mb-3",children:e.jsx(kt,{value:Q.notes||"",onChange:G=>F(Q.id,Q.status,Q.value,G.target.value),placeholder:"Add notes (optional)",rows:2})})]}),V.itemType==="checkbox"&&e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs(H,{variant:Q.status===Zs.PASSED?"default":"outline",size:"sm",onClick:()=>F(Q.id,Zs.PASSED),className:Q.status===Zs.PASSED?"":"border-green-200 text-green-700",children:[e.jsx(_t,{className:"h-4 w-4 mr-1"}),"Pass"]}),e.jsxs(H,{variant:Q.status===Zs.FAILED?"default":"outline",size:"sm",onClick:()=>F(Q.id,Zs.FAILED),className:Q.status===Zs.FAILED?"":"border-red-200 text-red-700",children:[e.jsx(xa,{className:"h-4 w-4 mr-1"}),"Fail"]}),e.jsx(H,{variant:Q.status===Zs.NA?"default":"outline",size:"sm",onClick:()=>F(Q.id,Zs.NA),className:Q.status===Zs.NA?"":"border-gray-200 text-gray-700",children:"N/A"})]})]})})},V.id):null})})]},_.id)),e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"inspectionNotes",children:"Inspection Notes"}),e.jsx(kt,{id:"inspectionNotes",value:p,onChange:_=>b(_.target.value),placeholder:"Add general notes about this inspection",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(H,{type:"button",variant:"outline",onClick:o,disabled:d,children:"Cancel"}),e.jsxs(H,{type:"button",onClick:I,disabled:d,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Progress"]}),e.jsxs(H,{type:"button",onClick:L,disabled:d||t.status!=="in_progress",children:[e.jsx(Rx,{className:"h-4 w-4 mr-2"}),"Complete Inspection"]})]})]})]}),e.jsxs(Je,{value:"defects",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),e.jsxs(H,{size:"sm",onClick:()=>{g(null),x(!0)},children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Defect"]})]}),t.defects.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Gn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No defects reported"}),e.jsx("p",{className:"text-sm",children:"Add defects when issues are found"})]}):e.jsx("div",{className:"space-y-4",children:t.defects.map(_=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-semibold",children:_.title}),e.jsx(Ae,{className:Ge("ri-badge-status",U(_.severity)),children:_.severity.toUpperCase()}),e.jsx(Ae,{className:_.status==="open"?"bg-red-50 text-red-700 border-red-200":_.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":_.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:_.status.replace("_"," ").toUpperCase()})]})})}),e.jsxs(te,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:_.description}),t.photos.filter(V=>V.defectId===_.id).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"Photos"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:t.photos.filter(V=>V.defectId===_.id).map(V=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:V.url,alt:V.caption||"Defect photo",className:"h-24 w-full object-cover rounded-md"}),V.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 truncate",children:V.caption})]},V.id))})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:_.assignedTo?e.jsxs("span",{children:["Assigned to: ",_.assignedTo]}):e.jsx("span",{children:"Unassigned"})}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{g(null),T(!0)},children:[e.jsx(Ui,{className:"h-3 w-3 mr-1"}),"Add Photo"]})})]})]})]},_.id))})]}),e.jsxs(Je,{value:"photos",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),e.jsxs(H,{size:"sm",onClick:()=>{g(null),T(!0)},children:[e.jsx(Ui,{className:"h-4 w-4 mr-2"}),"Add Photo"]})]}),t.photos.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Nu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No photos added"}),e.jsx("p",{className:"text-sm",children:"Add photos to document the inspection"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.photos.map(_=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_.url,alt:_.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),_.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:_.caption})]},_.id))})]})]})})]})})}function NY({inspection:t,vehicles:s,onAddSignoff:r,onClose:n,onCreateTask:a}){var p,b,j;const[i,l]=y.useState("overview"),o=x=>{switch(x){case"in_progress":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"completed":return"bg-blue-50 text-blue-700 border-blue-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},c=x=>{switch(x){case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"passed":return"bg-green-50 text-green-700 border-green-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"na":return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=s.find(x=>x.id===t.vehicleId),u=d?`${d.year} ${d.make} ${d.model}`:t.vehicleId,h=(()=>{if(!t.items||t.items.length===0)return 0;const x=t.items.filter(f=>f.status!=="pending").length;return Math.round(x/t.items.length*100)})();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"PDI Inspection Detail"}),e.jsxs(Ee,{children:[u," - Inspection #",t.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&e.jsxs(H,{onClick:()=>a(t),size:"sm",variant:"outline",children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",o(t.status)),children:t.status.replace("_"," ").toUpperCase()}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress:"}),e.jsx(Ga,{value:h,className:"w-24"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h,"%"]})]})]}),e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-4",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"checklist",children:"Checklist"}),e.jsxs(Ye,{value:"defects",children:["Defects",t.defects.length>0&&e.jsx(Ae,{className:"ml-2 bg-red-50 text-red-700 border-red-200",children:t.defects.length})]}),e.jsxs(Ye,{value:"photos",children:["Photos",t.photos.length>0&&e.jsx(Ae,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:t.photos.length})]})]}),e.jsxs(Je,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),e.jsx("p",{className:"font-medium",children:u})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Inspector"}),e.jsx("p",{className:"font-medium",children:t.inspectorId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),e.jsx("p",{className:"font-medium",children:nt(t.startedAt)})]}),t.completedAt&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),e.jsx("p",{className:"font-medium",children:nt(t.completedAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Template"}),e.jsx("p",{className:"font-medium",children:((p=t.template)==null?void 0:p.name)||"Unknown Template"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Progress"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ga,{value:h,className:"w-32"}),e.jsxs("span",{className:"text-sm font-medium",children:[h,"%"]})]})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.notes})})]})]}),e.jsxs(Je,{value:"checklist",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Inspection Items"}),(b=t.template)==null?void 0:b.sections.map(x=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{className:"pb-3",children:[e.jsx(de,{className:"text-lg",children:x.name}),x.description&&e.jsx(Ee,{children:x.description})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-3",children:x.items.map(f=>{const g=t.items.find(v=>v.templateItemId===f.id);return g?e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:f.name}),f.isRequired&&e.jsx(Ae,{className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:"Required"}),e.jsx(Ae,{className:Ge("ri-badge-status text-xs",c(g.status)),children:g.status.toUpperCase()})]}),f.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.description}),g.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 bg-muted/20 p-2 rounded-md",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",g.notes]})]}),e.jsx("div",{className:"ml-4",children:g.status==="passed"?e.jsx(_t,{className:"h-5 w-5 text-green-600"}):g.status==="failed"?e.jsx(xa,{className:"h-5 w-5 text-red-600"}):e.jsx(zt,{className:"h-5 w-5 text-yellow-600"})})]},f.id):null})})})]},x.id)),(!((j=t.template)!=null&&j.sections)||t.template.sections.length===0)&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No checklist items available"})]})]}),e.jsxs(Je,{value:"defects",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Defects"}),t.defects.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto mb-4 text-green-500/50"}),e.jsx("p",{children:"No defects found"}),e.jsx("p",{className:"text-sm",children:"This is a good sign!"})]}):e.jsx("div",{className:"space-y-4",children:t.defects.map(x=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-semibold",children:x.title}),e.jsx(Ae,{className:x.severity==="critical"?"bg-red-50 text-red-700 border-red-200":x.severity==="high"?"bg-orange-50 text-orange-700 border-orange-200":x.severity==="medium"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-blue-50 text-blue-700 border-blue-200",children:x.severity.toUpperCase()}),e.jsx(Ae,{className:x.status==="open"?"bg-red-50 text-red-700 border-red-200":x.status==="in_progress"?"bg-yellow-50 text-yellow-700 border-yellow-200":x.status==="resolved"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200",children:x.status.replace("_"," ").toUpperCase()})]})})}),e.jsxs(te,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:x.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:x.assignedTo?e.jsxs("span",{children:["Assigned to: ",x.assignedTo]}):e.jsx("span",{children:"Unassigned"})}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",nt(x.createdAt)]})]})]})]},x.id))})]}),e.jsxs(Je,{value:"photos",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Photos"}),t.photos.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Ui,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No photos added"}),e.jsx("p",{className:"text-sm",children:"Photos will be added during the inspection"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.photos.map(x=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x.url,alt:x.caption||"Inspection photo",className:"h-40 w-full object-cover rounded-md"}),x.caption&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:x.caption})]},x.id))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{variant:"outline",onClick:n,children:"Close"}),a&&e.jsxs(H,{variant:"outline",onClick:()=>a(t),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})]})]})})}function wY({templates:t,vehicles:s,currentUserId:r,onCreateInspection:n,onCancel:a}){const{toast:i}=xt(),[l,o]=y.useState(!1),[c,d]=y.useState(""),[u,m]=y.useState(""),[h,p]=y.useState(""),[b,j]=y.useState([]);y.useEffect(()=>{if(c){const f=s.find(g=>g.id===c);if(f){const g=f.type,v=t.filter(w=>w.isActive&&w.vehicleType===g);j(v),v.length===1?m(v[0].id):m("")}}else j([]),m("")},[c,t,s]);const x=async f=>{if(f.preventDefault(),!c){i({title:"Validation Error",description:"Please select a vehicle",variant:"destructive"});return}if(!u){i({title:"Validation Error",description:"Please select a template",variant:"destructive"});return}o(!0);try{await n({templateId:u,vehicleId:c,inspectorId:r,notes:h}),i({title:"Success",description:"Inspection created successfully"})}catch{i({title:"Error",description:"Failed to create inspection",variant:"destructive"})}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"New PDI Inspection"}),e.jsx(Ee,{children:"Create a new pre-delivery inspection"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"vehicle",children:"Vehicle *"}),e.jsxs(Be,{value:c,onValueChange:d,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select a home/vehicle"})}),e.jsx($e,{children:s.map(f=>e.jsxs(J,{value:f.id,children:[f.year," ",f.make," ",f.model," - ",f.vin]},f.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"template",children:"Inspection Template *"}),e.jsxs(Be,{value:u,onValueChange:m,disabled:b.length===0,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:b.length===0?"Select a home/vehicle first":"Select a template"})}),e.jsx($e,{children:b.map(f=>e.jsx(J,{value:f.id,children:f.name},f.id))})]}),b.length===0&&c&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"No templates available for this vehicle type"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(kt,{id:"notes",value:h,onChange:f=>p(f.target.value),placeholder:"Add any initial notes about this inspection",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l||!c||!u,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rx,{className:"h-4 w-4 mr-2"}),"Start Inspection"]})})]})]})})]})})}function yS(){const{templates:t,inspections:s,createTemplate:r,updateTemplate:n,deleteTemplate:a,createInspection:i,updateInspection:l,updateInspectionItem:o,completeInspection:c,createDefect:d,addPhoto:u,addSignoff:m}=gY(),{vehicles:h}=Jc(),{user:p}=Ou(),{toast:b}=xt(),{createTask:j}=ed(),[x,f]=y.useState("inspections"),[g,v]=y.useState(!1),[w,k]=y.useState(!1),[T,S]=y.useState(!1),[C,E]=y.useState(!1),[M,D]=y.useState(null),[A,I]=y.useState(null),[L,F]=y.useState(!1),[B,R]=y.useState(void 0),$=()=>{D(null),v(!0)},U=He=>{D(He),v(!0)},W=He=>{D(He),v(!0)},q=async He=>{if(window.confirm("Are you sure you want to delete this template?"))try{await a(He),b({title:"Success",description:"Template deleted successfully"})}catch{b({title:"Error",description:"Failed to delete template",variant:"destructive"})}},_=async He=>{try{const Le={...He,id:void 0,name:`${He.name} (Copy)`};await r(Le),b({title:"Success",description:"Template duplicated successfully"})}catch{b({title:"Error",description:"Failed to duplicate template",variant:"destructive"})}},V=async He=>{try{M?await n(M.id,He):await r(He),v(!1),D(null)}catch{b({title:"Error",description:`Failed to ${M?"update":"create"} template`,variant:"destructive"})}},Q=()=>{S(!0)},G=async He=>{try{const Le=await i(He);S(!1),b({title:"Inspection Created",description:"New PDI inspection has been created successfully"}),I(Le),k(!0)}catch{b({title:"Error",description:"Failed to create inspection",variant:"destructive"})}},Y=He=>{const Le=s.find(We=>We.id===He);Le&&(I(Le),E(!0))},ne=He=>{const Le=s.find(We=>We.id===He);Le&&(I(Le),k(!0))},le=async(He,Le)=>{try{await l(He,Le),b({title:"Success",description:"Inspection saved successfully"})}catch{b({title:"Error",description:"Failed to save inspection",variant:"destructive"})}},oe=async(He,Le)=>{try{await c(He,Le),k(!1),I(null),b({title:"Success",description:"Inspection completed successfully"})}catch{b({title:"Error",description:"Failed to complete inspection",variant:"destructive"})}},pe=async(He,Le,We)=>{try{await o(He,Le,We)}catch{b({title:"Error",description:"Failed to update item",variant:"destructive"})}},je=async(He,Le)=>{try{await d(He,Le)}catch{b({title:"Error",description:"Failed to add defect",variant:"destructive"})}},we=async(He,Le)=>{try{await u(He,Le)}catch{b({title:"Error",description:"Failed to add photo",variant:"destructive"})}},Re=async(He,Le)=>{try{await m(He,{...Le,userId:(p==null?void 0:p.id)||"current-user"})}catch{b({title:"Error",description:"Failed to add signoff",variant:"destructive"})}},ye=async He=>{try{await j(He),F(!1),R(void 0),b({title:"Task Created",description:"Task has been created successfully"})}catch{b({title:"Error",description:"Failed to create task",variant:"destructive"})}},Se=He=>{var Nt;const Le=h.find(Lt=>Lt.id===He.vehicleId),We=Le?`${Le.year} ${Le.make} ${Le.model}`:He.vehicleId,ut=He.defects&&He.defects.length>0,gt=ut?es.HIGH:He.status===da.IN_PROGRESS?es.MEDIUM:es.LOW,Et=He.status===da.IN_PROGRESS?new Date(Date.now()+24*60*60*1e3):new Date(Date.now()+2*24*60*60*1e3);R({sourceId:He.id,sourceType:"pdi_inspection",module:er.PDI,title:`Complete PDI for ${We}`,description:`PDI Status: ${He.status}${ut?` (${He.defects.length} defects found)`:""}`,priority:gt,assignedTo:He.inspectorId,dueDate:Et,link:"/pdi",customFields:{vehicleId:He.vehicleId,templateId:He.templateId,defectCount:((Nt=He.defects)==null?void 0:Nt.length)||0}}),F(!0)},he=t.length,ke=t.filter(He=>He.isActive).length,xe=s.length,Pe=s.filter(He=>He.status===da.COMPLETED||He.status===da.APPROVED).length,qe=s.filter(He=>He.status===da.IN_PROGRESS).length,lt=s.reduce((He,Le)=>He+Le.defects.length,0),at=s.reduce((He,Le)=>He+Le.defects.filter(We=>We.status==="open"||We.status==="in_progress").length,0);return s.reduce((He,Le)=>He+Le.photos.length,0),e.jsxs("div",{className:"space-y-8",children:[L&&e.jsx(Xc,{initialData:B,onSave:ye,onCancel:()=>{F(!1),R(void 0)}}),g&&e.jsx(jY,{template:M||void 0,onSave:V,onCancel:()=>{v(!1),D(null)}}),T&&e.jsx(wY,{templates:t,vehicles:h,currentUserId:(p==null?void 0:p.id)||"current-user",onCreateInspection:G,onCancel:()=>S(!1)}),w&&A&&e.jsx(bY,{inspection:A,vehicles:h,onSave:le,onComplete:oe,onUpdateItem:pe,onAddDefect:je,onAddPhoto:we,onCancel:()=>{k(!1),I(null)}}),C&&A&&e.jsx(NY,{inspection:A,vehicles:h,onAddSignoff:Re,onClose:()=>{E(!1),I(null)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"PDI Checklist - Home/Vehicle"}),e.jsx("p",{className:"ri-page-description",children:"Manage pre-delivery inspections and quality control for homes and vehicles"})]}),e.jsxs(H,{className:"shadow-sm",onClick:Q,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Inspection"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Inspections"}),e.jsx(Rx,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:xe}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),Pe," completed"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"In Progress"}),e.jsx(Rx,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:qe}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Active inspections"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-red-900",children:"Open Defects"}),e.jsx(Gn,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-900",children:at}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),lt," total defects"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Templates"}),e.jsx($c,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:he}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),ke," active"]})]})]})]}),e.jsxs(ms,{value:x,onValueChange:f,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-2",children:[e.jsx(Ye,{value:"inspections",children:"Inspections"}),e.jsx(Ye,{value:"templates",children:"Templates"})]}),e.jsx(Je,{value:"inspections",children:e.jsx(yY,{inspections:s,onNewInspection:Q,onViewInspection:Y,onEditInspection:ne,onCreateTask:Se})}),e.jsx(Je,{value:"templates",children:e.jsx(vY,{templates:t,onCreateTemplate:$,onEditTemplate:U,onDeleteTemplate:q,onDuplicateTemplate:_,onViewTemplate:W})})]})]})}function SY(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(yS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(yS,{})})]})}function CY(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState([]),[l,o]=y.useState(!1);y.useEffect(()=>{c()},[]);const c=()=>{const A=xs("renter-insight-commissions",[{id:"1",salesPersonId:"sales-001",dealId:"deal-001",type:ls.PERCENTAGE,rate:.05,amount:6875,status:Ft.APPROVED,paidDate:new Date("2024-01-20"),notes:"Commission for Georgetown sale",customFields:{},createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-20")},{id:"2",salesPersonId:"sales-002",dealId:"deal-002",type:ls.FLAT,rate:0,amount:2500,status:Ft.PENDING,notes:"Flat commission for service contract",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")}]),I=xs("renter-insight-commission-rules",[{id:"1",name:"Standard Sales Commission",type:"percentage",rate:.05,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"2",name:"Service Contract Bonus",type:"flat",amount:500,isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")},{id:"3",name:"Tiered Sales Commission",type:"tiered",tiers:[{id:"1",ruleId:"3",minAmount:0,maxAmount:5e4,rate:.03},{id:"2",ruleId:"3",minAmount:5e4,maxAmount:1e5,rate:.05},{id:"3",ruleId:"3",minAmount:1e5,rate:.07}],isActive:!0,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}]),L=xs("renter-insight-commission-audit",[{id:"1",commissionId:"1",userId:"user-001",userName:"Admin User",action:"created",newValue:{salesPersonId:"sales-001",dealId:"deal-001",type:ls.PERCENTAGE,rate:.05,amount:6875,status:Ft.PENDING},timestamp:new Date("2024-01-18")},{id:"2",commissionId:"1",userId:"user-001",userName:"Admin User",action:"approved",previousValue:{status:Ft.PENDING},newValue:{status:Ft.APPROVED},notes:"Approved after deal verification",timestamp:new Date("2024-01-19")}]);s(A),n(I),i(L)},d=A=>{Xt("renter-insight-commissions",A)},u=A=>{Xt("renter-insight-commission-rules",A)},m=A=>{Xt("renter-insight-commission-audit",A)},h=A=>t.filter(I=>I.salesPersonId===A),p=A=>t.filter(I=>I.dealId===A),b=A=>t.find(I=>I.id===A),j=A=>r.find(I=>I.id===A),x=A=>a.filter(I=>I.commissionId===A).sort((I,L)=>L.timestamp.getTime()-I.timestamp.getTime()),f=async(A,I,L)=>{o(!0);try{const F={id:Math.random().toString(36).substr(2,9),salesPersonId:A.salesPersonId||"",dealId:A.dealId||"",type:A.type||ls.PERCENTAGE,rate:A.rate||0,amount:A.amount||0,status:Ft.PENDING,notes:A.notes||"",customFields:A.customFields||{},createdAt:new Date,updatedAt:new Date},B=[...t,F];s(B),d(B);const R={id:Math.random().toString(36).substr(2,9),commissionId:F.id,userId:I,userName:L,action:"created",newValue:{...F},timestamp:new Date},$=[...a,R];return i($),m($),F}finally{o(!1)}},g=async(A,I,L,F,B)=>{const R=t.find(_=>_.id===A);if(!R)return null;const $={...R,...I,updatedAt:new Date},U=t.map(_=>_.id===A?$:_);s(U),d(U);const W={id:Math.random().toString(36).substr(2,9),commissionId:A,userId:L,userName:F,action:"updated",previousValue:{...R},newValue:I,notes:B,timestamp:new Date},q=[...a,W];return i(q),m(q),$};return{commissions:t,rules:r,auditTrail:a,loading:l,getCommissionsBySalesPerson:h,getCommissionsByDeal:p,getCommissionById:b,getRuleById:j,getAuditTrailByCommission:x,createCommission:f,updateCommission:g,approveCommission:async(A,I,L,F)=>g(A,{status:Ft.APPROVED},I,L,F),rejectCommission:async(A,I,L,F)=>g(A,{status:Ft.CANCELLED},I,L,F),markCommissionPaid:async(A,I,L,F)=>g(A,{status:Ft.PAID,paidDate:new Date},I,L,F),createRule:async A=>{o(!0);try{let I;switch(A.type){case"flat":I={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"flat",amount:A.amount||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"percentage":I={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"percentage",rate:A.rate||0,isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;case"tiered":I={id:Math.random().toString(36).substr(2,9),name:A.name||"",type:"tiered",tiers:A.tiers||[],isActive:A.isActive??!0,createdAt:new Date,updatedAt:new Date};break;default:throw new Error("Invalid commission rule type")}const L=[...r,I];return n(L),u(L),I}finally{o(!1)}},updateRule:async(A,I)=>{const L=r.find(R=>R.id===A);if(!L)return null;const F={...L,...I,updatedAt:new Date},B=r.map(R=>R.id===A?F:R);return n(B),u(B),F},deleteRule:async A=>{const I=r.filter(L=>L.id!==A);n(I),u(I)},calculateCommission:(A,I)=>{const L=r.find(F=>F.id===I);if(!L)return 0;switch(L.type){case"flat":return L.amount;case"percentage":return A*L.rate;case"tiered":const B=L.tiers.find(R=>A>=R.minAmount&&(R.maxAmount===void 0||A<R.maxAmount));return B?A*B.rate:0;default:return 0}},generateCommissionReport:A=>{let I=[...t];A.startDate&&(I=I.filter(F=>new Date(F.createdAt)>=new Date(A.startDate))),A.endDate&&(I=I.filter(F=>new Date(F.createdAt)<=new Date(A.endDate))),A.salesPersonId&&(I=I.filter(F=>F.salesPersonId===A.salesPersonId)),A.status&&(I=I.filter(F=>F.status===A.status)),A.type&&(I=I.filter(F=>F.type===A.type));const L={totalCommissions:I.length,totalAmount:I.reduce((F,B)=>F+B.amount,0),pendingAmount:I.filter(F=>F.status===Ft.PENDING).reduce((F,B)=>F+B.amount,0),approvedAmount:I.filter(F=>F.status===Ft.APPROVED).reduce((F,B)=>F+B.amount,0),paidAmount:I.filter(F=>F.status===Ft.PAID).reduce((F,B)=>F+B.amount,0),byType:{flat:I.filter(F=>F.type===ls.FLAT).reduce((F,B)=>F+B.amount,0),percentage:I.filter(F=>F.type===ls.PERCENTAGE).reduce((F,B)=>F+B.amount,0),tiered:I.filter(F=>F.type===ls.TIERED).reduce((F,B)=>F+B.amount,0)}};return{commissions:I,summary:L}},exportCommissionsToCSV:A=>{const I=["ID","Sales Person","Deal ID","Type","Rate","Amount","Status","Paid Date","Notes","Created At"],L=A.map(F=>[F.id,F.salesPersonId,F.dealId,F.type,F.rate,F.amount,F.status,F.paidDate?F.paidDate.toISOString():"",F.notes,F.createdAt.toISOString()]);return[I,...L]}}}function II({commission:t,salesReps:s,deals:r,rules:n,onSave:a,onCancel:i}){const{toast:l}=xt(),[o,c]=y.useState(!1),[d,u]=y.useState({salesPersonId:"",dealId:"",type:ls.PERCENTAGE,rate:.05,amount:0,notes:""}),[m,h]=y.useState(""),[p,b]=y.useState(0),[j,x]=y.useState("");y.useEffect(()=>{if(t){u({...t}),x("");const w=r.find(k=>k.id===t.dealId);w&&b(w.value)}},[t,r]),y.useEffect(()=>{if(d.dealId){const w=r.find(k=>k.id===d.dealId);w&&b(w.value)}},[d.dealId,r]),y.useEffect(()=>{if(m){const w=n.find(T=>T.id===m);if(!w)return;let k=0;switch(w.type){case"flat":k=w.amount,u(E=>({...E,type:ls.FLAT,rate:0,amount:k}));break;case"percentage":const T=w.rate;k=p*T,u(E=>({...E,type:ls.PERCENTAGE,rate:T,amount:k}));break;case"tiered":const C=w.tiers.find(E=>p>=E.minAmount&&(E.maxAmount===void 0||p<E.maxAmount));C&&(k=p*C.rate,u(E=>({...E,type:ls.TIERED,rate:C.rate,amount:k})));break}}else if(d.type===ls.PERCENTAGE){const w=p*(d.rate||0);u(k=>({...k,amount:w}))}},[m,p,d.rate,d.type,n]);const f=async w=>{if(w.preventDefault(),!d.salesPersonId||!d.dealId){l({title:"Validation Error",description:"Sales rep and deal are required",variant:"destructive"});return}if(d.amount<=0){l({title:"Validation Error",description:"Commission amount must be greater than zero",variant:"destructive"});return}c(!0);try{await a(d,j),l({title:"Success",description:`Commission ${t?"updated":"created"} successfully`})}catch{l({title:"Error",description:`Failed to ${t?"update":"create"} commission`,variant:"destructive"})}finally{c(!1)}},g=w=>{h(w)},v=()=>{if(d.type===ls.PERCENTAGE){const w=p*(d.rate||0);u(k=>({...k,amount:w}))}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Commission":"Create Commission"}),e.jsx(Ee,{children:t?"Update commission details":"Create a new commission record"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"salesPersonId",children:"Sales Rep *"}),e.jsxs(Be,{value:d.salesPersonId,onValueChange:w=>u(k=>({...k,salesPersonId:w})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select sales rep"})}),e.jsx($e,{className:"z-50",children:s.map(w=>e.jsx(J,{value:w.id,children:w.name},w.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"dealId",children:"Deal *"}),e.jsxs(Be,{value:d.dealId,onValueChange:w=>u(k=>({...k,dealId:w})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select deal"})}),e.jsx($e,{className:"z-50",children:r.map(w=>e.jsxs(J,{value:w.id,children:[w.name," - ",De(w.value)]},w.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"commissionRule",children:"Commission Rule"}),e.jsxs(Be,{value:m,onValueChange:g,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select rule or enter manually"})}),e.jsxs($e,{className:"z-50",children:[e.jsx(J,{value:"",children:"Manual Entry"}),n.filter(w=>w.isActive).map(w=>e.jsxs(J,{value:w.id,children:[w.name," (",w.type,")"]},w.id))]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"dealValue",children:"Deal Value"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"dealValue",type:"number",value:p,onChange:w=>b(parseFloat(w.target.value)||0),className:"pl-10",min:"0",step:"0.01"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"commissionType",children:"Commission Type"}),e.jsxs(Be,{value:d.type,onValueChange:w=>u(k=>({...k,type:w})),disabled:!!m,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{className:"z-50",children:[e.jsx(J,{value:ls.FLAT,children:"Flat"}),e.jsx(J,{value:ls.PERCENTAGE,children:"Percentage"}),e.jsx(J,{value:ls.TIERED,children:"Tiered"})]})]})]})]}),d.type===ls.PERCENTAGE&&!m&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"rate",children:"Commission Rate (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ng,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"rate",type:"number",value:d.rate?d.rate*100:"",onChange:w=>u(k=>({...k,rate:parseFloat(w.target.value)/100||0})),className:"pl-10",min:"0",max:"100",step:"0.01"})]})]}),d.type===ls.FLAT&&!m&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"amount",children:"Flat Commission Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"amount",type:"number",value:d.amount||"",onChange:w=>u(k=>({...k,amount:parseFloat(w.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]}),!m&&d.type===ls.PERCENTAGE&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{type:"button",variant:"outline",onClick:v,size:"sm",children:[e.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Calculate"]})}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"commissionAmount",children:"Commission Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"commissionAmount",type:"number",value:d.amount||"",onChange:w=>u(k=>({...k,amount:parseFloat(w.target.value)||0})),className:"pl-10",min:"0",step:"0.01"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Commission Notes"}),e.jsx(kt,{id:"notes",value:d.notes||"",onChange:w=>u(k=>({...k,notes:w.target.value})),placeholder:"Add any notes about this commission",rows:3})]}),t&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"auditNotes",children:"Audit Notes"}),e.jsx(kt,{id:"auditNotes",value:j,onChange:w=>x(w.target.value),placeholder:"Add notes about this update (for audit trail)",rows:2})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:i,disabled:o,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Commission"]})})]})]})})]})})}function AY({auditEntries:t}){const s=a=>{switch(a){case"created":return e.jsx(tt,{className:"h-4 w-4 text-blue-500"});case"updated":return e.jsx(ts,{className:"h-4 w-4 text-yellow-500"});case"approved":return e.jsx(_t,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(xa,{className:"h-4 w-4 text-red-500"});case"paid":return e.jsx(wt,{className:"h-4 w-4 text-green-500"});default:return e.jsx(k0,{className:"h-4 w-4 text-gray-500"})}},r=a=>{switch(a){case"created":return"bg-blue-50 text-blue-700 border-blue-200";case"updated":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"approved":return"bg-green-50 text-green-700 border-green-200";case"rejected":return"bg-red-50 text-red-700 border-red-200";case"paid":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},n=a=>{if(!a.previousValue&&!a.newValue)return null;const i=[];if(a.action==="created"&&a.newValue)return e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx("p",{children:"Commission created with initial values"})});if(a.previousValue&&a.newValue)for(const[l,o]of Object.entries(a.newValue)){const c=a.previousValue[l];c!==o&&i.push(e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium capitalize",children:[l.replace(/([A-Z])/g," $1").trim(),": "]}),e.jsx("span",{className:"line-through text-red-600 mr-2",children:c}),e.jsx("span",{className:"text-green-600",children:o})]},l))}return i.length>0?e.jsx("div",{className:"space-y-1",children:i}):null};return e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(k0,{className:"h-5 w-5 mr-2 text-primary"}),"Audit Trail"]}),e.jsx(Ee,{children:"History of changes to this commission"})]}),e.jsx(te,{children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(k0,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No audit history available"})]}):e.jsx("div",{className:"space-y-4",children:t.map(a=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute left-0 top-1.5",children:s(a.action)}),e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ae,{className:Ge("ri-badge-status",r(a.action)),children:a.action.toUpperCase()}),e.jsx("span",{className:"text-sm text-muted-foreground",children:nt(a.timestamp)})]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:a.userName})," ",a.action," this commission"]}),n(a),a.notes&&e.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:a.notes})})]},a.id))})})]})}function TY({commission:t,salesReps:s,deals:r,auditTrail:n,onClose:a,onEdit:i,onApprove:l,onReject:o,onMarkPaid:c}){const{toast:d}=xt(),[u,m]=y.useState("details"),[h,p]=y.useState(""),[b,j]=y.useState(!1),x=S=>{switch(S){case Ft.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ft.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Ft.PAID:return"bg-green-50 text-green-700 border-green-200";case Ft.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},f=S=>{switch(S){case ls.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case ls.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case ls.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},g=async()=>{j(!0);try{await l(t.id,h),p(""),d({title:"Commission Approved",description:"The commission has been approved successfully"})}catch{d({title:"Error",description:"Failed to approve commission",variant:"destructive"})}finally{j(!1)}},v=async()=>{j(!0);try{await o(t.id,h),p(""),d({title:"Commission Rejected",description:"The commission has been rejected"})}catch{d({title:"Error",description:"Failed to reject commission",variant:"destructive"})}finally{j(!1)}},w=async()=>{j(!0);try{await c(t.id,h),p(""),d({title:"Commission Marked as Paid",description:"The commission has been marked as paid"})}catch{d({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}finally{j(!1)}},k=s.find(S=>S.id===t.salesPersonId),T=r.find(S=>S.id===t.dealId);return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"Commission Details"}),e.jsxs(Ee,{children:["Commission #",t.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>i(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Commission"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{children:[e.jsxs(ms,{value:u,onValueChange:m,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-2",children:[e.jsx(Ye,{value:"details",children:"Details"}),e.jsxs(Ye,{value:"audit",children:["Audit Trail",n.length>0&&e.jsx(Ae,{className:"ml-2 bg-blue-50 text-blue-700 border-blue-200",children:n.length})]})]}),e.jsxs(Je,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",x(t.status)),children:t.status.toUpperCase()}),e.jsx(Ae,{className:Ge("ri-badge-status",f(t.type)),children:t.type.toUpperCase()}),e.jsx("div",{className:"ml-auto font-bold text-lg text-primary",children:De(t.amount)})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sales Rep"}),e.jsx("p",{className:"font-medium",children:(k==null?void 0:k.name)||t.salesPersonId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Deal"}),e.jsx("p",{className:"font-medium",children:(T==null?void 0:T.name)||t.dealId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Commission Type"}),e.jsx("p",{className:"font-medium",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"font-medium text-primary",children:De(t.amount)})]}),t.type===ls.PERCENTAGE&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rate"}),e.jsxs("p",{className:"font-medium",children:[(t.rate*100).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"font-medium",children:nt(t.createdAt)})]}),t.paidDate&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),e.jsx("p",{className:"font-medium",children:nt(t.paidDate)})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"whitespace-pre-wrap",children:t.notes})})]}),(t.status===Ft.PENDING||t.status===Ft.APPROVED)&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"actionNotes",children:"Action Notes"}),e.jsx(kt,{id:"actionNotes",value:h,onChange:S=>p(S.target.value),placeholder:"Add notes about this action (for audit trail)",rows:2})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[t.status===Ft.PENDING&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{variant:"outline",onClick:v,disabled:b,children:[e.jsx(xa,{className:"h-4 w-4 mr-2"}),"Reject"]}),e.jsxs(H,{onClick:g,disabled:b,children:[e.jsx(_t,{className:"h-4 w-4 mr-2"}),"Approve"]})]}),t.status===Ft.APPROVED&&e.jsxs(H,{onClick:w,disabled:b,children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]})]})]}),e.jsx(Je,{value:"audit",children:e.jsx(AY,{auditEntries:n})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx(H,{variant:"outline",onClick:a,children:"Close"}),e.jsxs(H,{onClick:()=>i(t),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Commission"]})]})]})]})})}function kI({rules:t,onCreateRule:s,onEditRule:r,onDeleteRule:n}){const[a,i]=y.useState(""),[l,o]=y.useState("all"),c=m=>{switch(m){case"flat":return"bg-blue-50 text-blue-700 border-blue-200";case"percentage":return"bg-green-50 text-green-700 border-green-200";case"tiered":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},d=t.filter(m=>{const h=m.name.toLowerCase().includes(a.toLowerCase()),p=l==="all"||m.type===l;return h&&p}),u=m=>{switch(m.type){case"flat":return`${De(m.amount)} flat rate`;case"percentage":return`${(m.rate*100).toFixed(2)}% of deal value`;case"tiered":const h=m.tiers;return h.length===0?"No tiers defined":`${h.length} tiers, ${(h[0].rate*100).toFixed(2)}% to ${(h[h.length-1].rate*100).toFixed(2)}%`;default:return""}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"ri-search-bar flex-1",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search rules...",value:a,onChange:m=>i(m.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l,onChange:m=>o(m.target.value),className:"px-3 py-2 rounded-md border border-input bg-background",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"flat",children:"Flat"}),e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"tiered",children:"Tiered"})]}),e.jsxs(H,{onClick:s,className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Rule"]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"text-xl",children:["Commission Rules (",d.length,")"]}),e.jsx(Ee,{children:"Define how commissions are calculated for different scenarios"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[d.map(m=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:m.name}),e.jsx(Ae,{className:Ge("ri-badge-status",c(m.type)),children:m.type.toUpperCase()}),m.isActive?e.jsx(Ae,{className:"bg-green-50 text-green-700 border-green-200",children:"ACTIVE"}):e.jsx(Ae,{className:"bg-gray-50 text-gray-700 border-gray-200",children:"INACTIVE"})]}),e.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:m.type==="flat"?e.jsxs("span",{className:"flex items-center",children:[e.jsx(wt,{className:"h-3 w-3 mr-1 text-blue-500"}),u(m)]}):m.type==="percentage"?e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ng,{className:"h-3 w-3 mr-1 text-green-500"}),u(m)]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(Mc,{className:"h-3 w-3 mr-1 text-purple-500"}),u(m)]})}),m.type==="tiered"&&e.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:m.tiers.map((h,p)=>e.jsxs("div",{className:"text-xs p-1 bg-muted/30 rounded",children:[De(h.minAmount),h.maxAmount?` - ${De(h.maxAmount)}`:"+",":",e.jsxs("span",{className:"font-semibold ml-1",children:[(h.rate*100).toFixed(2),"%"]})]},h.id))})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>r(m),children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm text-red-600 hover:text-red-700",onClick:()=>n(m.id),children:e.jsx(js,{className:"h-3 w-3"})})]})]},m.id)),d.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Mc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No commission rules found"}),e.jsx("p",{className:"text-sm",children:"Create your first rule to get started"})]})]})})]})]})}const fo={ruleTypes:["Revenue","Unit","Bonus"],defaultSettings:{commissionType:"Percentage",rate:.05},salesReps:[{id:"rep-1",name:"Jamie Sales"},{id:"rep-2",name:"Morgan Closer"}],sampleRules:[{id:"rule-001",name:"5% on RV Sales",type:"Percentage",rate:.05,criteria:'vehicle.type === "RV"'}],sampleCommissions:[{id:"comm-001",repId:"rep-1",amount:1250,period:"June 2025",ruleId:"rule-001",saleAmount:25e3}]};function LI({onSubmit:t,onCancel:s}){const[r,n]=y.useState({name:"",type:fo.defaultSettings.commissionType,rate:fo.defaultSettings.rate,criteria:"",description:""}),a=i=>{i.preventDefault(),t(r)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Create Commission Rule"}),e.jsx(Ee,{children:"Define a new commission calculation rule"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Rule Name"}),e.jsx(ge,{id:"name",value:r.name,onChange:i=>n({...r,name:i.target.value}),placeholder:"Enter rule name"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Rule Type"}),e.jsxs(Be,{value:r.type,onValueChange:i=>n({...r,type:i}),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select rule type"})}),e.jsx($e,{children:fo.ruleTypes.map(i=>e.jsx(J,{value:i,children:i},i))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"rate",children:"Commission Rate (%)"}),e.jsx(ge,{id:"rate",type:"number",value:r.rate*100,onChange:i=>n({...r,rate:parseFloat(i.target.value)/100}),min:"0",max:"100",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"criteria",children:"Criteria"}),e.jsx(ge,{id:"criteria",value:r.criteria,onChange:i=>n({...r,criteria:i.target.value}),placeholder:"Enter criteria"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(kt,{id:"description",value:r.description,onChange:i=>n({...r,description:i.target.value}),placeholder:"Enter description"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(H,{type:"submit",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]})]})})]})})}function FI({salesReps:t,onGenerateReport:s,onExportCSV:r}){const{toast:n}=xt(),[a,i]=y.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1),endDate:new Date,salesPersonId:"",status:"",type:""}),[l,o]=y.useState(!1),[c,d]=y.useState(null),[u,m]=y.useState("none"),h=()=>{try{const g=s(a);d(g),n({title:"Report Generated",description:`Generated report with ${g.commissions.length} commissions`})}catch{n({title:"Error",description:"Failed to generate report",variant:"destructive"})}},p=()=>{if(c)try{const g=r(c.commissions),v=Rh.unparse(g),w=new Blob([v],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(w),T=document.createElement("a");T.href=k,T.setAttribute("download",`commission_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(T),T.click(),document.body.removeChild(T),n({title:"Export Successful",description:"Commission report exported to CSV"})}catch{n({title:"Export Failed",description:"Failed to export report to CSV",variant:"destructive"})}},b=g=>{if(u==="none")return{"All Commissions":g};const v={};return g.forEach(w=>{let k="";switch(u){case"salesPerson":k=w.salesPersonId;break;case"status":k=w.status;break;case"type":k=w.type;break}v[k]||(v[k]=[]),v[k].push(w)}),v},j=g=>{switch(u){case"salesPerson":const v=t.find(w=>w.id===g);return v?v.name:g;case"status":return g.charAt(0).toUpperCase()+g.slice(1);case"type":return g.charAt(0).toUpperCase()+g.slice(1);default:return g}},x=g=>{switch(g){case Ft.PENDING:return"Pending";case Ft.APPROVED:return"Approved";case Ft.PAID:return"Paid";case Ft.CANCELLED:return"Cancelled";default:return g}},f=g=>{switch(g){case ls.FLAT:return"Flat";case ls.PERCENTAGE:return"Percentage";case ls.TIERED:return"Tiered";default:return g}};return e.jsx("div",{className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(tn,{className:"h-5 w-5 mr-2 text-primary"}),"Commission Report Generator"]}),e.jsx(Ee,{children:"Generate detailed commission reports with custom filters"})]}),e.jsxs(H,{variant:"outline",onClick:()=>o(!l),className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),l?"Hide Filters":"Show Filters"]})]})}),e.jsxs(te,{children:[l&&e.jsxs("div",{className:"space-y-4 mb-6 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),e.jsx(ge,{id:"startDate",type:"date",value:a.startDate?new Date(a.startDate).toISOString().split("T")[0]:"",onChange:g=>i(v=>({...v,startDate:g.target.value?new Date(g.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"endDate",children:"End Date"}),e.jsx(ge,{id:"endDate",type:"date",value:a.endDate?new Date(a.endDate).toISOString().split("T")[0]:"",onChange:g=>i(v=>({...v,endDate:g.target.value?new Date(g.target.value):void 0}))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"salesPersonId",children:"Sales Rep"}),e.jsxs(Be,{value:a.salesPersonId||"",onValueChange:g=>i(v=>({...v,salesPersonId:g})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"All Sales Reps"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"All Sales Reps"}),t.map(g=>e.jsx(J,{value:g.id,children:g.name},g.id))]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:a.status||"",onValueChange:g=>i(v=>({...v,status:g})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"All Statuses"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"All Statuses"}),e.jsx(J,{value:Ft.PENDING,children:"Pending"}),e.jsx(J,{value:Ft.APPROVED,children:"Approved"}),e.jsx(J,{value:Ft.PAID,children:"Paid"}),e.jsx(J,{value:Ft.CANCELLED,children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Commission Type"}),e.jsxs(Be,{value:a.type||"",onValueChange:g=>i(v=>({...v,type:g})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"All Types"})}),e.jsxs($e,{children:[e.jsx(J,{value:"",children:"All Types"}),e.jsx(J,{value:ls.FLAT,children:"Flat"}),e.jsx(J,{value:ls.PERCENTAGE,children:"Percentage"}),e.jsx(J,{value:ls.TIERED,children:"Tiered"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{onClick:h,children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}),!l&&e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(H,{onClick:h,children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ee,{className:"shadow-sm bg-blue-50",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Total Commissions"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:c.summary.totalCommissions}),e.jsx("div",{className:"text-sm text-blue-700 mt-1",children:De(c.summary.totalAmount)})]})})}),e.jsx(ee,{className:"shadow-sm bg-yellow-50",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-yellow-700 mb-1",children:"Pending"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De(c.summary.pendingAmount)}),e.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"Awaiting approval"})]})})}),e.jsx(ee,{className:"shadow-sm bg-green-50",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Paid"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(c.summary.paidAmount)}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Commissions paid"})]})})}),e.jsx(ee,{className:"shadow-sm bg-purple-50",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Approved"}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:De(c.summary.approvedAmount)}),e.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Ready for payment"})]})})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Z,{htmlFor:"groupBy",className:"whitespace-nowrap",children:"Group By:"}),e.jsxs(Be,{value:u,onValueChange:g=>m(g),children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"none",children:"No Grouping"}),e.jsx(J,{value:"salesPerson",children:"Sales Rep"}),e.jsx(J,{value:"status",children:"Status"}),e.jsx(J,{value:"type",children:"Commission Type"})]})]})]}),e.jsxs(H,{variant:"outline",onClick:p,disabled:!c,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(b(c.commissions)).map(([g,v])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[u==="salesPerson"&&e.jsx(mr,{className:"h-4 w-4 mr-2 text-blue-500"}),u==="status"&&e.jsx(Bt,{className:"h-4 w-4 mr-2 text-yellow-500"}),u==="type"&&e.jsx(tn,{className:"h-4 w-4 mr-2 text-purple-500"}),j(g),e.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",v.length," commissions, ",De(v.reduce((w,k)=>w+k.amount,0)),")"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Sales Rep"}),e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Deal"}),e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Type"}),e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"p-2 text-left font-medium text-muted-foreground",children:"Created"})]})}),e.jsx("tbody",{children:v.map(w=>{const k=t.find(T=>T.id===w.salesPersonId);return e.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[e.jsx("td",{className:"p-2",children:(k==null?void 0:k.name)||w.salesPersonId}),e.jsx("td",{className:"p-2",children:w.dealId}),e.jsx("td",{className:"p-2",children:f(w.type)}),e.jsx("td",{className:"p-2 font-medium",children:De(w.amount)}),e.jsx("td",{className:"p-2",children:x(w.status)}),e.jsx("td",{className:"p-2",children:new Date(w.createdAt).toLocaleDateString()})]},w.id)})})]})})]},g))})]}),!c&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(tn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No report generated yet"}),e.jsx("p",{className:"text-sm",children:"Use the filters above to generate a commission report"})]})]})]})})}const Bf=[{id:"sales-001",name:"John Smith",email:"john.smith@dealership.com",phone:"(555) 123-4567",territory:"North Region",isActive:!0,targets:{monthly:10,quarterly:30,annual:120}},{id:"sales-002",name:"Sarah Johnson",email:"sarah.johnson@dealership.com",phone:"(555) 987-6543",territory:"South Region",isActive:!0,targets:{monthly:12,quarterly:36,annual:144}},{id:"sales-003",name:"Mike Davis",email:"mike.davis@dealership.com",phone:"(555) 456-7890",territory:"East Region",isActive:!0,targets:{monthly:8,quarterly:24,annual:96}}],Cj=[{id:"deal-001",name:"Georgetown Class A Sale - Smith Family",customerName:"John & Mary Smith",value:137500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-15")},{id:"deal-002",name:"Travel Trailer - Johnson Family",customerName:"Sarah Johnson",value:75e3,stage:"closed_won",status:"active",createdAt:new Date("2024-01-10")},{id:"deal-003",name:"Service Contract - Davis",customerName:"Mike Davis",value:2500,stage:"closed_won",status:"active",createdAt:new Date("2024-01-20")}];function EY(){const{commissions:t,rules:s,createCommission:r,updateCommission:n,approveCommission:a,rejectCommission:i,markCommissionPaid:l,createRule:o,updateRule:c,deleteRule:d,getAuditTrailByCommission:u,generateCommissionReport:m,exportCommissionsToCSV:h}=CY(),{user:p}=Ou(),{toast:b}=xt(),[j,x]=y.useState(""),[f,g]=y.useState("all"),[v,w]=y.useState("commissions"),[k,T]=y.useState(!1),[S,C]=y.useState(!1),[E,M]=y.useState(!1),[D,A]=y.useState(null),[I,L]=y.useState(null),F=xe=>{switch(xe){case Ft.PENDING:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Ft.APPROVED:return"bg-blue-50 text-blue-700 border-blue-200";case Ft.PAID:return"bg-green-50 text-green-700 border-green-200";case Ft.CANCELLED:return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},B=xe=>{switch(xe){case ls.FLAT:return"bg-blue-50 text-blue-700 border-blue-200";case ls.PERCENTAGE:return"bg-green-50 text-green-700 border-green-200";case ls.TIERED:return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},R=xe=>{switch(xe){case Ft.PENDING:return e.jsx(zt,{className:"h-4 w-4 text-yellow-500"});case Ft.APPROVED:return e.jsx(_t,{className:"h-4 w-4 text-blue-500"});case Ft.PAID:return e.jsx(wt,{className:"h-4 w-4 text-green-500"});case Ft.CANCELLED:return e.jsx(xa,{className:"h-4 w-4 text-red-500"});default:return null}},$=t.filter(xe=>{const Pe=xe.salesPersonId.toLowerCase().includes(j.toLowerCase())||xe.dealId.toLowerCase().includes(j.toLowerCase())||xe.id.toLowerCase().includes(j.toLowerCase()),qe=f==="all"||xe.status===f;return Pe&&qe}),U=()=>{A(null),T(!0)},W=xe=>{A(xe),T(!0),C(!1)},q=xe=>{A(xe),C(!0)},_=async(xe,Pe)=>{try{D?(await n(D.id,xe,(p==null?void 0:p.id)||"current-user",(p==null?void 0:p.name)||"Current User",Pe),b({title:"Success",description:"Commission updated successfully"})):(await r(xe,(p==null?void 0:p.id)||"current-user",(p==null?void 0:p.name)||"Current User"),b({title:"Success",description:"Commission created successfully"})),T(!1),A(null)}catch{b({title:"Error",description:`Failed to ${D?"update":"create"} commission`,variant:"destructive"})}},V=async(xe,Pe)=>{try{await a(xe,(p==null?void 0:p.id)||"current-user",(p==null?void 0:p.name)||"Current User",Pe),b({title:"Success",description:"Commission approved successfully"})}catch{b({title:"Error",description:"Failed to approve commission",variant:"destructive"})}},Q=async(xe,Pe)=>{try{await i(xe,(p==null?void 0:p.id)||"current-user",(p==null?void 0:p.name)||"Current User",Pe),b({title:"Success",description:"Commission rejected successfully"})}catch{b({title:"Error",description:"Failed to reject commission",variant:"destructive"})}},G=async(xe,Pe)=>{try{await l(xe,(p==null?void 0:p.id)||"current-user",(p==null?void 0:p.name)||"Current User",Pe),b({title:"Success",description:"Commission marked as paid successfully"})}catch{b({title:"Error",description:"Failed to mark commission as paid",variant:"destructive"})}},Y=()=>{L(null),M(!0)},ne=xe=>{L(xe),M(!0)},le=async xe=>{try{I?(await c(I.id,xe),b({title:"Success",description:"Commission rule updated successfully"})):(await o(xe),b({title:"Success",description:"Commission rule created successfully"})),M(!1),L(null)}catch{b({title:"Error",description:`Failed to ${I?"update":"create"} commission rule`,variant:"destructive"})}},oe=async xe=>{if(window.confirm("Are you sure you want to delete this commission rule?"))try{await d(xe),b({title:"Success",description:"Commission rule deleted successfully"})}catch{b({title:"Error",description:"Failed to delete commission rule",variant:"destructive"})}},pe=t.length,je=t.filter(xe=>xe.status===Ft.PENDING).length,we=t.filter(xe=>xe.status===Ft.APPROVED).length,Re=t.filter(xe=>xe.status===Ft.PAID).length,ye=t.reduce((xe,Pe)=>xe+Pe.amount,0),Se=t.filter(xe=>xe.status===Ft.PENDING).reduce((xe,Pe)=>xe+Pe.amount,0),he=t.filter(xe=>xe.status===Ft.APPROVED).reduce((xe,Pe)=>xe+Pe.amount,0),ke=t.filter(xe=>xe.status===Ft.PAID).reduce((xe,Pe)=>xe+Pe.amount,0);return e.jsxs("div",{className:"space-y-8",children:[k&&e.jsx(II,{commission:D||void 0,salesReps:Bf,deals:Cj,rules:s,onSave:_,onCancel:()=>{T(!1),A(null)}}),S&&D&&e.jsx(TY,{commission:D,salesReps:Bf,deals:Cj,auditTrail:u(D.id),onClose:()=>C(!1),onEdit:W,onApprove:V,onReject:Q,onMarkPaid:G}),E&&e.jsx(LI,{rule:I||void 0,onSave:le,onCancel:()=>{M(!1),L(null)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),e.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),e.jsxs(H,{className:"shadow-sm",onClick:U,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),e.jsx(wt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(ye)}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),pe," commissions"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),e.jsx(zt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:De(Se)}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),je," pending approval"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Approved"}),e.jsx(_t,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:De(he)}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(_t,{className:"h-3 w-3 mr-1"}),we," approved"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Paid"}),e.jsx(wt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(ke)}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(wt,{className:"h-3 w-3 mr-1"}),Re," paid out"]})]})]})]}),e.jsxs(ms,{value:v,onValueChange:w,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"commissions",children:"Commissions"}),e.jsx(Ye,{value:"rules",children:"Commission Rules"}),e.jsx(Ye,{value:"reports",children:"Reports"})]}),e.jsxs(Je,{value:"commissions",className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search commissions...",value:j,onChange:xe=>x(xe.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:f,onValueChange:g,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:Ft.PENDING,children:"Pending"}),e.jsx(J,{value:Ft.APPROVED,children:"Approved"}),e.jsx(J,{value:Ft.PAID,children:"Paid"}),e.jsx(J,{value:Ft.CANCELLED,children:"Cancelled"})]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]}),e.jsxs(H,{onClick:U,className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Commissions"}),e.jsx(Ee,{children:"Track and manage sales commissions"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[$.map(xe=>{const Pe=Bf.find(lt=>lt.id===xe.salesPersonId),qe=Cj.find(lt=>lt.id===xe.dealId);return e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Commission #",xe.id]}),e.jsx(Ae,{className:Ge("ri-badge-status",B(xe.type)),children:xe.type.toUpperCase()}),e.jsxs(Ae,{className:Ge("ri-badge-status",F(xe.status)),children:[R(xe.status),e.jsx("span",{className:"ml-1",children:xe.status.toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{className:"h-3 w-3 mr-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Sales Rep:"}),e.jsx("span",{className:"ml-1",children:(Pe==null?void 0:Pe.name)||xe.salesPersonId})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(wt,{className:"h-3 w-3 mr-2 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Deal:"}),e.jsx("span",{className:"ml-1",children:(qe==null?void 0:qe.name)||xe.dealId})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(wt,{className:"h-3 w-3 mr-2 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Amount:"}),e.jsx("span",{className:"ml-1 font-bold text-primary",children:De(xe.amount)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-2 text-orange-500"}),e.jsx("span",{className:"font-medium",children:"Created:"}),e.jsx("span",{className:"ml-1",children:nt(xe.createdAt)})]})]}),xe.notes&&e.jsx("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",xe.notes]})})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>q(xe),children:"View"}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>W(xe),children:"Edit"}),xe.status===Ft.PENDING&&e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>V(xe.id),children:"Approve"}),xe.status===Ft.APPROVED&&e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>G(xe.id),children:"Mark Paid"})]})]},xe.id)}),$.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(wt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No commissions found"}),e.jsx("p",{className:"text-sm",children:"Create your first commission to get started"})]})]})})]})]}),e.jsx(Je,{value:"rules",children:e.jsx(kI,{rules:s,onCreateRule:Y,onEditRule:ne,onDeleteRule:oe})}),e.jsx(Je,{value:"reports",children:e.jsx(FI,{salesReps:Bf,onGenerateReport:m,onExportCSV:h})})]})]})}function PY(){const[t,s]=y.useState("overview"),[r,n]=y.useState(!1),[a,i]=y.useState(!1),[l,o]=y.useState(null),c=fo.sampleCommissions.map(h=>{const p=fo.salesReps.find(j=>j.id===h.repId),b=fo.sampleRules.find(j=>j.id===h.ruleId);return{...h,repName:(p==null?void 0:p.name)||"Unknown Rep",ruleName:(b==null?void 0:b.name)||"Unknown Rule",status:"Paid"}}),d=h=>{console.log("Creating commission:",h),n(!1)},u=h=>{console.log("Creating rule:",h),i(!1),o(null)},m=h=>{o(h),i(!0)};return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsxs("div",{className:"space-y-8",children:[r&&e.jsx(II,{onSave:d,onCancel:()=>n(!1)}),a&&e.jsx(LI,{rule:l,onSave:u,onCancel:()=>{i(!1),o(null)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Commission Engine"}),e.jsx("p",{className:"ri-page-description",children:"Manage sales commissions and payment rules"})]}),e.jsxs(H,{className:"shadow-sm",onClick:()=>n(!0),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Commission"]})]})}),e.jsxs(ms,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"rules",children:"Commission Rules"}),e.jsx(Ye,{value:"reports",children:"Reports"})]}),e.jsxs(Je,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Commissions"}),e.jsx(wt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:"$2,125"}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),"2 commissions"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Paid Out"}),e.jsx(_t,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:"$1,250"}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(_t,{className:"h-3 w-3 mr-1"}),"1 payment"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),e.jsx(zt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:"$875"}),e.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),"1 pending"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Active Rules"}),e.jsx(tn,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"3"}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(tn,{className:"h-3 w-3 mr-1"}),"commission rules"]})]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"Recent Commissions"}),e.jsx(Ee,{children:"Latest commission calculations and payments"})]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",children:"View All"})]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[c.map(h=>{var p,b;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:h.repName}),e.jsx(Ae,{variant:h.status==="Paid"?"default":"secondary",children:h.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.ruleName," - ",h.period]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sale: $",((p=h.saleAmount)==null?void 0:p.toLocaleString())||"N/A"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-semibold",children:["$",((b=h.amount)==null?void 0:b.toLocaleString())||"N/A"]})})]},h.id)}),c.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx("p",{children:"No commissions recorded"}),e.jsx("p",{className:"text-sm mt-1",children:"Commissions will appear here once sales are processed"})]})]})})]})]}),e.jsx(Je,{value:"rules",children:e.jsx(kI,{rules:fo.sampleRules,onCreateRule:()=>i(!0),onEditRule:m,onDeleteRule:h=>console.log("Delete rule:",h)})}),e.jsx(Je,{value:"reports",children:e.jsx(FI,{salesReps:fo.salesReps,onGenerateReport:h=>console.log("Generate report:",h),onExportCSV:()=>console.log("Export CSV")})})]})]})}),e.jsx(ot,{path:"/*",element:e.jsx(EY,{})})]})}const Mo={sampleListings:[{id:"1",title:"Modern Downtown Apartment",description:"Beautiful modern apartment in the heart of downtown with stunning city views. Features include hardwood floors, stainless steel appliances, and in-unit laundry.",address:"123 Main St, Downtown, City 12345",rent:2500,bedrooms:2,bathrooms:2,squareFootage:1200,propertyType:"apartment",status:"active",amenities:["Gym","Pool","Parking","Laundry","Balcony"],petPolicy:"Cats allowed with deposit",images:["https://images.pexels.com/photos/1571460/pexels-photo-1571460.jpeg","https://images.pexels.com/photos/1571468/pexels-photo-1571468.jpeg","https://images.pexels.com/photos/1571453/pexels-photo-1571453.jpeg"],contactInfo:{phone:"(555) 123-4567",email:"contact@propertymanagement.com"},createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",title:"Cozy Suburban House",description:"Charming 3-bedroom house in quiet suburban neighborhood. Perfect for families with a large backyard and attached garage.",address:"456 Oak Ave, Suburbia, City 12346",rent:3200,bedrooms:3,bathrooms:2,squareFootage:1800,propertyType:"house",status:"active",amenities:["Garage","Backyard","Fireplace","Dishwasher"],petPolicy:"Dogs and cats welcome",images:["https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg","https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg","https://images.pexels.com/photos/1396132/pexels-photo-1396132.jpeg"],contactInfo:{phone:"(555) 987-6543",email:"rentals@suburbanproperties.com"},createdAt:"2024-01-10T14:30:00Z",updatedAt:"2024-01-10T14:30:00Z"},{id:"3",title:"Luxury Waterfront Condo",description:"Stunning waterfront condominium with panoramic water views. Features premium finishes, floor-to-ceiling windows, and resort-style amenities.",address:"789 Waterfront Blvd, Marina District, City 12347",rent:4500,bedrooms:2,bathrooms:3,squareFootage:1600,propertyType:"condo",status:"rented",amenities:["Concierge","Pool","Gym","Valet Parking","Rooftop Deck"],petPolicy:"No pets allowed",images:["https://images.pexels.com/photos/1571471/pexels-photo-1571471.jpeg","https://images.pexels.com/photos/1571463/pexels-photo-1571463.jpeg","https://images.pexels.com/photos/1571467/pexels-photo-1571467.jpeg"],contactInfo:{phone:"(555) 456-7890",email:"luxury@waterfrontliving.com"},createdAt:"2024-01-20T09:15:00Z",updatedAt:"2024-01-20T09:15:00Z"},{id:"4",title:"Studio Loft in Arts District",description:"Trendy studio loft in the vibrant arts district. High ceilings, exposed brick, and modern amenities. Walking distance to galleries and restaurants.",address:"321 Arts Way, Creative Quarter, City 12348",rent:1800,bedrooms:0,bathrooms:1,squareFootage:650,propertyType:"studio",status:"pending",amenities:["High Ceilings","Exposed Brick","Modern Kitchen","Hardwood Floors"],petPolicy:"Small pets allowed",images:["https://images.pexels.com/photos/1571452/pexels-photo-1571452.jpeg","https://images.pexels.com/photos/1571457/pexels-photo-1571457.jpeg"],contactInfo:{phone:"(555) 234-5678",email:"info@artslofts.com"},createdAt:"2024-01-25T16:45:00Z",updatedAt:"2024-01-25T16:45:00Z"},{id:"5",title:"Family Townhouse with Garage",description:"Spacious 4-bedroom townhouse with attached 2-car garage. Great for families, featuring a private patio and modern appliances.",address:"654 Family Lane, Residential Park, City 12349",rent:3800,bedrooms:4,bathrooms:3,squareFootage:2200,propertyType:"townhouse",status:"active",amenities:["2-Car Garage","Private Patio","Modern Appliances","Storage Room"],petPolicy:"Pets welcome with additional deposit",images:["https://images.pexels.com/photos/1396132/pexels-photo-1396132.jpeg","https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg"],contactInfo:{phone:"(555) 345-6789",email:"family@townhouserentals.com"},createdAt:"2024-01-12T11:20:00Z",updatedAt:"2024-01-12T11:20:00Z"}]},RI=DT,DY=IT,MI=y.forwardRef(({className:t,...s},r)=>e.jsx(Ag,{ref:r,className:Ge("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));MI.displayName=Ag.displayName;const zb=y.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(DY,{children:[e.jsx(MI,{}),e.jsxs(Tg,{ref:n,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(kT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(St,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zb.displayName=Tg.displayName;const Vb=({className:t,...s})=>e.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Vb.displayName="DialogHeader";const Ub=y.forwardRef(({className:t,...s},r)=>e.jsx(Eg,{ref:r,className:Ge("text-lg font-semibold leading-none tracking-tight",t),...s}));Ub.displayName=Eg.displayName;const IY=y.forwardRef(({className:t,...s},r)=>e.jsx(Pg,{ref:r,className:Ge("text-sm text-muted-foreground",t),...s}));IY.displayName=Pg.displayName;function kY({isOpen:t,onClose:s,listingUrl:r,title:n="Share Listing"}){const[a,i]=y.useState(!1),{toast:l}=xt(),o=`${window.location.origin}${r}`,c=async()=>{try{await navigator.clipboard.writeText(o),i(!0),l({title:"Copied!",description:"Link copied to clipboard"}),setTimeout(()=>i(!1),2e3)}catch{l({title:"Error",description:"Failed to copy link",variant:"destructive"})}},d=()=>{const b=encodeURIComponent("Check out this property listing"),j=encodeURIComponent(`I thought you might be interested in this property listing:

${o}`);window.open(`mailto:?subject=${b}&body=${j}`)},u=()=>{const b=encodeURIComponent(`Check out this property listing: ${o}`);window.open(`sms:?body=${b}`)},m=()=>{const b=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`;window.open(b,"_blank","width=600,height=400")},h=()=>{const j=`https://twitter.com/intent/tweet?text=${encodeURIComponent("Check out this property listing!")}&url=${encodeURIComponent(o)}`;window.open(j,"_blank","width=600,height=400")},p=()=>{const b=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(o)}`;window.open(b,"_blank","width=600,height=400")};return e.jsx(RI,{open:t,onOpenChange:s,children:e.jsxs(zb,{className:"sm:max-w-md",children:[e.jsx(Vb,{children:e.jsxs(Ub,{className:"flex items-center gap-2",children:[e.jsx(PA,{className:"h-5 w-5"}),n]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"share-url",children:"Share Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{id:"share-url",value:o,readOnly:!0,className:"flex-1"}),e.jsx(H,{onClick:c,variant:"outline",size:"sm",className:"shrink-0",children:a?e.jsx(Ru,{className:"h-4 w-4 text-green-600"}):e.jsx(Mu,{className:"h-4 w-4"})})]})]}),e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Share via"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(H,{onClick:d,variant:"outline",className:"justify-start gap-2",children:[e.jsx(Sr,{className:"h-4 w-4"}),"Email"]}),e.jsxs(H,{onClick:u,variant:"outline",className:"justify-start gap-2",children:[e.jsx(sr,{className:"h-4 w-4"}),"SMS"]})]})]}),e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Social Media"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(H,{onClick:m,variant:"outline",size:"sm",className:"justify-center gap-2",children:[e.jsx(DA,{className:"h-4 w-4 text-blue-600"}),"Facebook"]}),e.jsxs(H,{onClick:h,variant:"outline",size:"sm",className:"justify-center gap-2",children:[e.jsx(OA,{className:"h-4 w-4 text-sky-500"}),"Twitter"]}),e.jsxs(H,{onClick:p,variant:"outline",size:"sm",className:"justify-center gap-2",children:[e.jsx(IA,{className:"h-4 w-4 text-blue-700"}),"LinkedIn"]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(H,{onClick:s,variant:"outline",children:"Close"})})]})]})})}function LY(){const[t,s]=y.useState(""),[r,n]=y.useState("all"),[a,i]=y.useState("updatedAt"),[l,o]=y.useState(!1),[c,d]=y.useState("desc"),u=y.useMemo(()=>[...new Set(Mo.map(j=>j.status))].sort(),[]),m=y.useMemo(()=>{let b=Mo.filter(j=>{const x=t===""||j.title.toLowerCase().includes(t.toLowerCase())||j.address.toLowerCase().includes(t.toLowerCase())||j.description.toLowerCase().includes(t.toLowerCase()),f=r==="all"||j.status.toLowerCase()===r.toLowerCase();return x&&f});return b.sort((j,x)=>{let f=j[a],g=x[a];return a==="updatedAt"&&(f=new Date(f).getTime(),g=new Date(g).getTime()),typeof f=="string"&&(f=f.toLowerCase(),g=g.toLowerCase()),c==="asc"?f<g?-1:f>g?1:0:f>g?-1:f<g?1:0}),b},[t,r,a,c]),h=b=>{switch(b.toLowerCase()){case"active":case"available":return"bg-green-100 text-green-800";case"occupied":case"rented":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},p=b=>{n(b)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsx("div",{className:"flex gap-2",children:e.jsxs(H,{variant:"outline",onClick:()=>o(!0),className:"gap-2",children:[e.jsx(_c,{className:"h-4 w-4"}),"Share All Listings"]})})})}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5"}),"Search & Filters"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>o(!0),className:"gap-2",children:[e.jsx(_c,{className:"h-4 w-4"}),"Share All Listings"]}),e.jsx(H,{asChild:!0,children:e.jsxs(Dr,{to:"/listings/new",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add New Listing"]})})]})]})}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by title, address, or description...",value:t,onChange:b=>s(b.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(Be,{value:r,onValueChange:n,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"All Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),u.map(b=>e.jsx(J,{value:b.toLowerCase(),children:b},b))]})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(Be,{value:`${a}-${c}`,onValueChange:b=>{const[j,x]=b.split("-");i(j),d(x)},children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Sort by..."})}),e.jsxs($e,{children:[e.jsx(J,{value:"rent-asc",children:"Rent: Low to High"}),e.jsx(J,{value:"rent-desc",children:"Rent: High to Low"}),e.jsx(J,{value:"bedrooms-asc",children:"Bedrooms: Low to High"}),e.jsx(J,{value:"bedrooms-desc",children:"Bedrooms: High to Low"}),e.jsx(J,{value:"squareFootage-asc",children:"Size: Small to Large"}),e.jsx(J,{value:"squareFootage-desc",children:"Size: Large to Small"}),e.jsx(J,{value:"updatedAt-desc",children:"Recently Updated"}),e.jsx(J,{value:"updatedAt-asc",children:"Oldest Updated"}),e.jsx(J,{value:"title-asc",children:"Title: A to Z"}),e.jsx(J,{value:"title-desc",children:"Title: Z to A"})]})]})})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",m.length," of ",Mo.length," listings",t&&` matching "${t}"`,r!=="all"&&` with status "${r}"`]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:m.map(b=>e.jsxs(ee,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[e.jsx("img",{src:b.images[0],alt:b.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(Ae,{className:h(b.status),children:b.status})})]}),e.jsxs(ce,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(de,{className:"text-lg line-clamp-1",children:b.title}),e.jsxs("div",{className:"flex items-center text-lg font-bold text-primary",children:[e.jsx(wt,{className:"h-4 w-4"}),b.rent.toLocaleString()]})]}),e.jsxs(Ee,{className:"flex items-center text-sm",children:[e.jsx(ur,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:b.address})]})]}),e.jsxs(te,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:b.description}),e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I2,{className:"h-4 w-4 mr-1"}),b.bedrooms]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D2,{className:"h-4 w-4 mr-1"}),b.bathrooms]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M2,{className:"h-4 w-4 mr-1"}),b.squareFootage.toLocaleString()," sq ft"]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[b.amenities.slice(0,3).map(j=>e.jsx(Ae,{variant:"secondary",className:"text-xs",children:j},j)),b.amenities.length>3&&e.jsxs(Ae,{variant:"secondary",className:"text-xs",children:["+",b.amenities.length-3," more"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),e.jsx(H,{size:"sm",className:"flex-1",children:"Edit Listing"})]})]})]},b.id))}),m.length===0&&e.jsx(ee,{className:"cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.02] border-2 hover:border-primary/20",onClick:()=>p("all"),children:e.jsxs(te,{className:"text-center py-12",children:[e.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No listings found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||r!=="all"?"Try adjusting your search criteria or filters":"Get started by adding your first property listing"}),(t||r!=="all")&&e.jsx(H,{variant:"outline",onClick:()=>{s(""),n("all")},children:"Clear Filters"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to view all properties"})]})}),e.jsx(ee,{className:`cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.02] border-2 ${r==="available"?"border-green-200 bg-green-50/50":"hover:border-green-200"}`,onClick:()=>p("available")}),e.jsx(kY,{isOpen:l,onClose:()=>o(!1),listingUrl:"/public-listings/all",title:"Share All Listings"})]})}function bS(){const{id:t}=Yh(),s=Zn(),{toast:r}=xt(),n=!!t,[a,i]=y.useState({title:"",description:"",address:"",rent:0,bedrooms:1,bathrooms:1,squareFootage:0,propertyType:"apartment",status:"active",amenities:[],petPolicy:"",images:[],contactInfo:{phone:"",email:""}}),[l,o]=y.useState(""),[c,d]=y.useState(""),[u,m]=y.useState({});y.useEffect(()=>{if(n&&t){const T=Mo.sampleListings.find(S=>S.id===t);T&&i({title:T.title,description:T.description,address:T.address,rent:T.rent,bedrooms:T.bedrooms,bathrooms:T.bathrooms,squareFootage:T.squareFootage,propertyType:T.propertyType,status:T.status,amenities:[...T.amenities],petPolicy:T.petPolicy,images:[...T.images],contactInfo:{...T.contactInfo}})}},[n,t]);const h=()=>{const T={};return a.title.trim()||(T.title="Title is required"),a.description.trim()||(T.description="Description is required"),a.address.trim()||(T.address="Address is required"),a.rent<=0&&(T.rent="Rent must be greater than 0"),a.squareFootage<=0&&(T.squareFootage="Square footage must be greater than 0"),a.contactInfo.phone.trim()||(T.phone="Phone number is required"),a.contactInfo.email.trim()||(T.email="Email is required"),m(T),Object.keys(T).length===0},p=T=>{if(T.preventDefault(),!h()){r({title:"Validation Error",description:"Please fix the errors in the form",variant:"destructive"});return}r({title:"Success",description:n?"Listing updated successfully":"Listing created successfully"}),s("/listings")},b=(T,S)=>{i(C=>({...C,[T]:S})),u[T]&&m(C=>({...C,[T]:""}))},j=(T,S)=>{i(C=>({...C,contactInfo:{...C.contactInfo,[T]:S}})),u[T]&&m(C=>({...C,[T]:""}))},x=()=>{l.trim()&&!a.amenities.includes(l.trim())&&(i(T=>({...T,amenities:[...T.amenities,l.trim()]})),o(""))},f=T=>{i(S=>({...S,amenities:S.amenities.filter(C=>C!==T)}))},g=()=>{c.trim()&&!a.images.includes(c.trim())&&(i(T=>({...T,images:[...T.images,c.trim()]})),d(""))},v=T=>{i(S=>({...S,images:S.images.filter(C=>C!==T)}))},w=T=>{const S=[...a.images],[C]=S.splice(T,1);S.unshift(C),i({...a,images:S})},k=(T,S)=>{const C=[...a.images],[E]=C.splice(T,1);C.splice(S,0,E),i({...a,images:C})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(H,{variant:"outline",onClick:()=>s("/listings"),children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Back to Listings"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Listing":"Add New Listing"}),e.jsx("p",{className:"text-muted-foreground",children:n?"Update the listing information":"Create a new property listing"})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Basic Information"}),e.jsx(Ee,{children:"Enter the basic details of the property"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"title",children:"Title *"}),e.jsx(ge,{id:"title",value:a.title,onChange:T=>b("title",T.target.value),placeholder:"e.g., Modern Downtown Apartment"}),u.title&&e.jsx("p",{className:"text-sm text-red-600",children:u.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"propertyType",children:"Property Type"}),e.jsxs(Be,{value:a.propertyType,onValueChange:T=>b("propertyType",T),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"apartment",children:"Apartment"}),e.jsx(J,{value:"house",children:"House"}),e.jsx(J,{value:"condo",children:"Condo"}),e.jsx(J,{value:"townhouse",children:"Townhouse"}),e.jsx(J,{value:"studio",children:"Studio"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"address",children:"Address *"}),e.jsx(ge,{id:"address",value:a.address,onChange:T=>b("address",T.target.value),placeholder:"e.g., 123 Main St, Downtown, City 12345"}),u.address&&e.jsx("p",{className:"text-sm text-red-600",children:u.address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description *"}),e.jsx(kt,{id:"description",value:a.description,onChange:T=>b("description",T.target.value),placeholder:"Describe the property features, location, and amenities...",rows:4}),u.description&&e.jsx("p",{className:"text-sm text-red-600",children:u.description})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Property Details"}),e.jsx(Ee,{children:"Specify the property specifications"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"rent",children:"Monthly Rent ($) *"}),e.jsx(ge,{id:"rent",type:"number",value:a.rent,onChange:T=>b("rent",parseInt(T.target.value)||0),placeholder:"2500"}),u.rent&&e.jsx("p",{className:"text-sm text-red-600",children:u.rent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(ge,{id:"bedrooms",type:"number",min:"0",value:a.bedrooms,onChange:T=>b("bedrooms",parseInt(T.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(ge,{id:"bathrooms",type:"number",min:"0",step:"0.5",value:a.bathrooms,onChange:T=>b("bathrooms",parseFloat(T.target.value)||1)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"squareFootage",children:"Square Footage *"}),e.jsx(ge,{id:"squareFootage",type:"number",value:a.squareFootage,onChange:T=>b("squareFootage",parseInt(T.target.value)||0),placeholder:"1200"}),u.squareFootage&&e.jsx("p",{className:"text-sm text-red-600",children:u.squareFootage})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:a.status,onValueChange:T=>b("status",T),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"active",children:"Active"}),e.jsx(J,{value:"pending",children:"Pending"}),e.jsx(J,{value:"rented",children:"Rented"}),e.jsx(J,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"petPolicy",children:"Pet Policy"}),e.jsx(ge,{id:"petPolicy",value:a.petPolicy,onChange:T=>b("petPolicy",T.target.value),placeholder:"e.g., Cats allowed with deposit"})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Amenities"}),e.jsx(Ee,{children:"Add property amenities and features"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{value:l,onChange:T=>o(T.target.value),placeholder:"Add amenity (e.g., Pool, Gym, Parking)",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),x())}),e.jsx(H,{type:"button",onClick:x,children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.amenities.map((T,S)=>e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-sm",children:T}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(T),className:"h-4 w-4 p-0",children:e.jsx(St,{className:"h-3 w-3"})})]},S))})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Images"}),e.jsx(Ee,{children:"Add property images (URLs)"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{value:c,onChange:T=>d(T.target.value),placeholder:"Add image URL",onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),g())}),e.jsx(H,{type:"button",onClick:g,children:e.jsx(tt,{className:"h-4 w-4"})})]}),a.images.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Property Images"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.images.length," image",a.images.length!==1?"s":""]})]}),e.jsx("div",{className:"grid gap-4",children:a.images.map((T,S)=>e.jsxs("div",{className:`relative group border rounded-lg overflow-hidden ${S===0?"ring-2 ring-yellow-400 bg-yellow-50":"bg-card"}`,children:[S===0&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsxs(Ae,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[e.jsx(Fy,{className:"h-3 w-3 mr-1 fill-current"}),"Cover Image"]})}),e.jsxs("div",{className:"flex items-center gap-3 p-3",children:[e.jsx("div",{className:"flex-shrink-0 cursor-move text-muted-foreground hover:text-foreground",children:e.jsx(R2,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative w-16 h-16 rounded-md overflow-hidden bg-muted",children:e.jsx("img",{src:T,alt:`Property image ${S+1}`,className:"w-full h-full object-cover",onError:C=>{const E=C.target;E.style.display="none";const M=E.parentElement;M&&(M.innerHTML='<div class="w-full h-full bg-muted flex items-center justify-center"><span class="text-xs text-muted-foreground">No preview</span></div>')}})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium truncate",children:["Image ",S+1]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:T})]}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>window.open(T,"_blank"),title:"Preview image",children:e.jsx(zs,{className:"h-4 w-4"})}),S!==0&&e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(S),title:"Set as cover image",children:e.jsx(Fy,{className:"h-4 w-4"})}),S>0&&e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(S,S-1),title:"Move up",children:"↑"}),S<a.images.length-1&&e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(S,S+1),title:"Move down",children:"↓"}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>v(T),className:"text-destructive hover:text-destructive",title:"Remove image",children:e.jsx(St,{className:"h-4 w-4"})})]})]})]},S))}),a.images.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:[e.jsx("p",{className:"font-medium mb-1",children:"Image Management Tips:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• The first image is automatically set as the cover image"}),e.jsx("li",{children:"• Use the star button to set a different cover image"}),e.jsx("li",{children:"• Use the arrows or drag handle to reorder images"})]})]})]}),a.images.length>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium",children:"Cover Image Preview:"}),e.jsxs("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:[a.images.length>0?e.jsx("img",{src:a.images[0],alt:"Cover preview",className:"h-full w-full object-cover rounded-lg",onError:T=>{var S;T.currentTarget.style.display="none",(S=T.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,e.jsx(vi,{className:`h-6 w-6 text-gray-400 ${a.images.length>0?"hidden":""}`})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Contact Information"}),e.jsx(Ee,{children:"Contact details for inquiries"})]}),e.jsx(te,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(ge,{id:"phone",value:a.contactInfo.phone,onChange:T=>j("phone",T.target.value),placeholder:"(555) 123-4567"}),u.phone&&e.jsx("p",{className:"text-sm text-red-600",children:u.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email Address *"}),e.jsx(ge,{id:"email",type:"email",value:a.contactInfo.email,onChange:T=>j("email",T.target.value),placeholder:"contact@example.com"}),u.email&&e.jsx("p",{className:"text-sm text-red-600",children:u.email})]})]})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{type:"submit",className:"flex-1",children:n?"Update Listing":"Create Listing"}),e.jsx(H,{type:"button",variant:"outline",onClick:()=>s("/listings"),children:"Cancel"})]})]})]})}function FY(){const{id:t}=Yh(),s=Zn(),{toast:r}=xt(),n=Mo.sampleListings.find(o=>o.id===t);if(!n)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(H,{variant:"outline",onClick:()=>s("/listings"),children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Back to Listings"]})}),e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Listing not found"}),e.jsx("p",{className:"text-muted-foreground",children:"The listing you're looking for doesn't exist."})]})})})]});const a=()=>{window.confirm("Are you sure you want to delete this listing? This action cannot be undone.")&&(r({title:"Success",description:"Listing deleted successfully"}),s("/listings"))},i=()=>{const o=`${window.location.origin}/listings/public/${n.id}`;navigator.clipboard.writeText(o),r({title:"Link copied",description:"Public listing link copied to clipboard"})},l=o=>{switch(o){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rented":return"bg-blue-100 text-blue-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(H,{variant:"outline",onClick:()=>s("/listings"),children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Back to Listings"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:n.title}),e.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(ur,{className:"h-4 w-4"}),n.address]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:l(n.status),children:n.status}),e.jsxs(H,{variant:"outline",onClick:i,children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(H,{variant:"outline",onClick:()=>s(`/listings/edit/${n.id}`),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(H,{variant:"outline",onClick:a,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(ee,{children:e.jsxs(te,{className:"p-0",children:[e.jsx("div",{className:"aspect-video bg-gray-100 rounded-t-lg overflow-hidden",children:n.images&&n.images[0]?e.jsx("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(vi,{className:"h-16 w-16 text-gray-400"})})}),n.images&&n.images.length>1&&e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:n.images.slice(1,5).map((o,c)=>e.jsx("div",{className:"aspect-square bg-gray-100 rounded overflow-hidden",children:e.jsx("img",{src:o,alt:`${n.title} ${c+2}`,className:"w-full h-full object-cover"})},c))})})]})}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Description"})}),e.jsx(te,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Amenities"})}),e.jsx(te,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:n.amenities.map((o,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"h-2 w-2 bg-primary rounded-full"}),e.jsx("span",{className:"text-sm",children:o})]},c))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5"}),"Rental Information"]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",n.rent.toLocaleString()]}),e.jsx("div",{className:"text-muted-foreground",children:"per month"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I2,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[n.bedrooms," Bedrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D2,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[n.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M2,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:[n.squareFootage," sq ft"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vi,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm capitalize",children:n.propertyType})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I8,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Pet Policy"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.petPolicy})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Contact Information"})}),e.jsxs(te,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:n.contactInfo.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:n.contactInfo.email})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Timeline"})}),e.jsxs(te,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Created"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(n.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Last Updated"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(n.updatedAt).toLocaleDateString()})]})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Quick Actions"})}),e.jsxs(te,{className:"space-y-2",children:[e.jsxs(H,{className:"w-full",onClick:()=>s(`/listings/edit/${n.id}`),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Listing"]}),e.jsxs(H,{variant:"outline",className:"w-full",onClick:i,children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"Share Listing"]}),e.jsx(H,{variant:"outline",className:"w-full",children:"Generate Quote"})]})]})]})]})]})}function RY({isOpen:t,onClose:s,listings:r}){var x,f;const{tenant:n}=kn(),[a,i]=y.useState(!1),o=`${window.location.origin}/public/listings`,c=r.filter(g=>g.status==="active"),d=c.reduce((g,v)=>g+v.rent,0),u=c.length>0?Math.round(d/c.length):0,m={title:`${(n==null?void 0:n.name)||"Properties"} – ${c.length} Available`,description:`Browse ${c.length} listings, average rent $${u}/mo.`,image:((f=(x=c[0])==null?void 0:x.images)==null?void 0:f[0])||"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg"},h=async()=>{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)},p=()=>{const g=encodeURIComponent(m.title),v=encodeURIComponent(`${m.description}

View all: ${o}`);window.open(`mailto:?subject=${g}&body=${v}`,"_blank")},b=()=>{const g=encodeURIComponent(`${m.title}
${o}`);window.open(`sms:?&body=${g}`,"_blank")},j=g=>{const v=encodeURIComponent(o),w=encodeURIComponent(`${m.title}: ${m.description}`),k=encodeURIComponent("RealEstate,Rental"),T={facebook:`https://www.facebook.com/sharer/sharer.php?u=${v}`,twitter:`https://twitter.com/intent/tweet?url=${v}&text=${w}&hashtags=${k}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${v}`};window.open(T[g],"_blank","width=600,height=400")};return e.jsx(RI,{open:t,onOpenChange:s,children:e.jsxs(zb,{className:"max-w-2xl",children:[e.jsx(Vb,{children:e.jsxs(Ub,{className:"flex items-center gap-2",children:[e.jsx(PA,{className:"h-5 w-5"}),"Share All Listings"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Social Preview"}),e.jsx(ee,{className:"border-2",children:e.jsxs(te,{className:"p-4 flex gap-4",children:[e.jsx("img",{src:m.image,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm line-clamp-2 mb-1",children:m.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-2",children:[e.jsx(vi,{className:"h-3 w-3"}),e.jsxs("span",{children:[c.length," properties"]}),e.jsxs("span",{children:["• Avg. $",u,"/mo"]})]})]})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Shareable Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ge,{value:o,readOnly:!0,className:"flex-1"}),e.jsx(H,{onClick:h,variant:"outline",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ru,{className:"h-4 w-4 mr-1"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(Mu,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Quick Share"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(H,{onClick:p,variant:"outline",children:[e.jsx(Sr,{className:"h-4 w-4 mr-1"}),"Email"]}),e.jsxs(H,{onClick:b,variant:"outline",children:[e.jsx(sr,{className:"h-4 w-4 mr-1"}),"SMS"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Social Platforms"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(H,{onClick:()=>j("facebook"),variant:"outline",children:[e.jsx(DA,{className:"h-4 w-4 mr-1"}),"Facebook"]}),e.jsxs(H,{onClick:()=>j("twitter"),variant:"outline",children:[e.jsx(OA,{className:"h-4 w-4 mr-1"}),"Twitter"]}),e.jsxs(H,{onClick:()=>j("linkedin"),variant:"outline",children:[e.jsx(IA,{className:"h-4 w-4 mr-1"}),"LinkedIn"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"What’s Shared"}),e.jsxs(ee,{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Listings:"})," ",e.jsx("span",{className:"font-medium",children:r.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"})," ",e.jsx("span",{className:"font-medium",children:c.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Avg. Rent:"})," ",e.jsxs("span",{className:"font-medium",children:["$",u,"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Value:"})," ",e.jsxs("span",{className:"font-medium",children:["$",d]})]})]}),c.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Featured:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.slice(0,3).map((g,v)=>e.jsx(Ae,{variant:"secondary",className:"text-xs",children:g.title},v)),c.length>3&&e.jsxs(Ae,{variant:"outline",className:"text-xs",children:["+",c.length-3," more"]})]})]})]})]})]})]})})}function MY(){const t=Zn(),{toast:s}=xt(),[r,n]=y.useState(Mo.sampleListings),[a,i]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState(""),[u,m]=y.useState("all"),[h,p]=y.useState("all"),[b,j]=y.useState("all"),x=r.filter(S=>{const C=S.title.toLowerCase().includes(c.toLowerCase())||S.address.toLowerCase().includes(c.toLowerCase()),E=u==="all"||S.status===u,M=h==="all"||S.propertyType===h,D=b==="all"||(()=>{const A=S.rent;switch(b){case"under-2000":return A<2e3;case"2000-3000":return A>=2e3&&A<=3e3;case"3000-4000":return A>=3e3&&A<=4e3;case"over-4000":return A>4e3;default:return!0}})();return C&&E&&M&&D}),f=x.length,g=x.filter(S=>S.status==="active").length;x.filter(S=>S.status==="pending").length,x.filter(S=>S.status==="rented").length;const v=x.reduce((S,C)=>S+C.rent,0),w=f>0?Math.round(v/f):0,k=S=>{window.confirm("Are you sure you want to delete this listing?")&&(n(C=>C.filter(E=>E.id!==S)),s({title:"Success",description:"Listing deleted successfully"}))},T=S=>{o(S)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Property Listings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental property listings"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>i(!0),children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"Share All Listings"]}),e.jsxs(H,{onClick:()=>t("/listings/new"),className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"Add New Listing"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Listings"}),e.jsx(Il,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g," active listings"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Listings"}),e.jsx(vi,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for rent"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Average Rent"}),e.jsx(wt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",w.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total value: $",v.toLocaleString()]})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(Jn,{className:"h-5 w-5"}),"Filters & Search"]})}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search listings...",value:c,onChange:S=>d(S.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:u,onValueChange:m,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:"active",children:"Active"}),e.jsx(J,{value:"pending",children:"Pending"}),e.jsx(J,{value:"rented",children:"Rented"}),e.jsx(J,{value:"for_sale",children:"For Sale"})]})]}),e.jsxs(Be,{value:h,onValueChange:p,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Property Type"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Types"}),e.jsx(J,{value:"apartment",children:"Apartment"}),e.jsx(J,{value:"house",children:"House"}),e.jsx(J,{value:"condo",children:"Condo"}),e.jsx(J,{value:"townhouse",children:"Townhouse"})]})]}),e.jsxs(Be,{value:b,onValueChange:j,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Price Range"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Prices"}),e.jsx(J,{value:"under-2000",children:"Under $2,000"}),e.jsx(J,{value:"2000-3000",children:"$2,000 - $3,000"}),e.jsx(J,{value:"3000-4000",children:"$3,000 - $4,000"}),e.jsx(J,{value:"over-4000",children:"Over $4,000"})]})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{children:["All Listings (",x.length,")"]}),e.jsx(Ee,{children:c||u!=="all"||h!=="all"||b!=="all"?"Filtered property listings":"All property listings in the system"})]}),e.jsx(te,{children:x.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Il,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-lg font-medium",children:"No listings found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:x.map(S=>e.jsxs(ee,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[S.images[0]?e.jsx("img",{src:S.images[0],alt:S.title,className:"w-full h-full object-cover cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>t(`/listings/detail/${S.id}`)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(vi,{className:"h-12 w-12 text-gray-400"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(Ae,{variant:S.status==="active"?"default":S.status==="pending"?"outline":S.status==="rented"?"secondary":"destructive",className:"capitalize",children:S.status.replace("_"," ")})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(Ae,{variant:"secondary",className:"bg-black/50 text-white border-0",children:["$",S.rent.toLocaleString(),"/month"]})})]}),e.jsxs(te,{className:"p-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:S.title}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"line-clamp-1",children:S.address})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{children:[S.bedrooms," bed"]}),e.jsxs("span",{children:[S.bathrooms," bath"]}),e.jsxs("span",{children:[S.squareFootage," sq ft"]})]}),e.jsx(Ae,{variant:"outline",className:"capitalize",children:S.propertyType})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/listings/detail/${S.id}`),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/listings/edit/${S.id}`),children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>k(S.id),children:e.jsx(js,{className:"h-4 w-4"})})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(S),children:e.jsx(_c,{className:"h-4 w-4"})})]})]})]},S.id))})})]}),e.jsx(RY,{isOpen:a,onClose:()=>i(!1),listings:r})]})}function _Y(){const t=Zn(),{toast:s}=xt(),[r,n]=y.useState(Mo.sampleListings),a=l=>{window.confirm("Are you sure you want to delete this listing?")&&(n(o=>o.filter(c=>c.id!==l)),s({title:"Success",description:"Listing deleted successfully"}))},i=l=>{switch(l){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rented":return"bg-blue-100 text-blue-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"All Property Listings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and view all your property listings"})]}),e.jsxs(H,{onClick:()=>t("/listings/new"),className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"Add New Listing"]})]}),r.length===0?e.jsx(ee,{children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No listings found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by creating your first property listing"}),e.jsxs(H,{onClick:()=>t("/listings/new"),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add New Listing"]})]})})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(l=>e.jsxs(ee,{className:"overflow-hidden",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[l.images&&l.images[0]?e.jsx("img",{src:l.images[0],alt:l.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(vi,{className:"h-12 w-12 text-gray-400"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Ae,{className:i(l.status),children:l.status})})]}),e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:l.title}),e.jsxs(Ee,{className:"flex items-center gap-1",children:[e.jsx(ur,{className:"h-4 w-4"}),l.address]})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-2xl font-bold",children:["$",l.rent,"/month"]})}),e.jsxs("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[l.bedrooms," bed"]}),e.jsxs("span",{children:[l.bathrooms," bath"]}),e.jsxs("span",{children:[l.squareFootage," sq ft"]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t(`/listings/detail/${l.id}`),className:"flex-1",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>t(`/listings/edit/${l.id}`),className:"flex-1",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>a(l.id),children:e.jsx(js,{className:"h-4 w-4"})})]})]})})]},l.id))})]})}function Aj(){return e.jsx("div",{className:"p-6",children:e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(MY,{})}),e.jsx(ot,{path:"/list",element:e.jsx(_Y,{})}),e.jsx(ot,{path:"/new",element:e.jsx(bS,{})}),e.jsx(ot,{path:"/edit/:id",element:e.jsx(bS,{})}),e.jsx(ot,{path:"/detail/:id",element:e.jsx(FY,{})}),e.jsx(ot,{path:"/overview",element:e.jsx(LY,{})})]})})}function NS(){const[t,s]=y.useState(""),[r,n]=y.useState(null),a=rb.sampleUsers,i=a.filter(u=>u.name.toLowerCase().includes(t.toLowerCase())||u.email.toLowerCase().includes(t.toLowerCase())),l=u=>u.split(" ").map(m=>m.charAt(0)).join("").toUpperCase(),o=u=>{console.log("Edit user:",u)},c=u=>{console.log("Reset password for:",u)},d=u=>{const m=`/portalclient/?impersonateClientId=${u.id}`;window.open(m,"_blank")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Client Portal Admin"}),e.jsx("p",{className:"ri-page-description",children:"Manage client portal access and settings"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.filter(u=>u.status==="Active").length," active users"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.filter(u=>u.status==="Active").length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.filter(u=>u.status==="Active").length/a.length*100),"% active rate"]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Portal Features"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available modules"})]})]})]}),e.jsxs(ms,{defaultValue:"users",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"users",children:"Users"}),e.jsx(Ye,{value:"agreements",children:"Agreements"}),e.jsx(Ye,{value:"settings",children:"Settings"})]}),e.jsx(Je,{value:"users",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Portal Users"}),e.jsx(Ee,{children:"Manage client portal access and user accounts"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"ri-search-bar mb-6",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search users by name or email...",value:t,onChange:u=>s(u.target.value),className:"ri-search-input"})]}),e.jsxs("div",{className:"space-y-4",children:[i.map(u=>e.jsx("div",{className:"ri-table-row",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:l(u.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:u.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.email," • ",u.phone," • Last login: ",new Date(u.updatedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:u.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:u.status}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(u.id),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>c(u.email),children:[e.jsx(_A,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>d(u),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Proxy as Client"]})]})]})},u.id)),i.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),a.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No portal users found"}),e.jsx("p",{className:"text-sm",children:"Users will appear here once they're added to the system"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No users found matching your search"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search criteria"})]})]})]})]})]})}),e.jsx(Je,{value:"agreements",className:"space-y-4",children:e.jsx(wP,{})}),e.jsx(Je,{value:"settings",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Portal Settings"}),e.jsx(Ee,{children:"Configure client portal features and appearance"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portal Features"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Loan Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to view loan details and payment history"})]}),e.jsx(Ae,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Agreement Signing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable electronic signature capabilities"})]}),e.jsx(Ae,{className:"bg-green-100 text-green-800",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Service Requests"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow clients to submit service requests"})]}),e.jsx(Ae,{className:"bg-gray-100 text-gray-800",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Document Library"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide access to important documents"})]}),e.jsx(Ae,{className:"bg-green-100 text-green-800",children:"Enabled"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Appearance"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Portal Theme"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{className:"w-full p-2 border rounded-md",children:[e.jsx("option",{children:"Light Theme"}),e.jsx("option",{children:"Dark Theme"}),e.jsx("option",{children:"Auto (System)"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Brand Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[e.jsx("input",{type:"color",value:"#3b82f6",className:"w-12 h-10 border rounded"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"#3b82f6"})]})]})]})]})]})})]})})]})]})}function OY(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(NS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(NS,{})})]})}function $Y(){const[t,s]=y.useState([]),[r,n]=y.useState([]),[a,i]=y.useState(!1);y.useEffect(()=>{l()},[]);const l=()=>{const w=xs("renter-insight-invoices",[{id:"1",customerId:"cust-1",number:"INV-2024-001",items:[{id:"1",description:"2024 Forest River Georgetown",quantity:1,unitPrice:125e3,total:125e3},{id:"2",description:"Extended Warranty",quantity:1,unitPrice:2500,total:2500}],subtotal:127500,tax:10200,total:137700,status:Mt.PAID,dueDate:new Date("2024-02-15"),paidDate:new Date("2024-01-20"),paymentMethod:"Credit Card",notes:"Payment received via Zego",customFields:{},createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",customerId:"cust-2",number:"INV-2024-002",items:[{id:"3",description:"Service - AC Repair",quantity:1,unitPrice:620,total:620}],subtotal:620,tax:49.6,total:669.6,status:Mt.SENT,dueDate:new Date("2024-02-20"),notes:"Service invoice for AC repair",customFields:{},createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-18")}]),k=xs("renter-insight-payments",[{id:"1",invoiceId:"1",amount:137700,method:Bi.CREDIT_CARD,status:Cl.COMPLETED,transactionId:"txn_1234567890",processedDate:new Date("2024-01-20"),notes:"Processed via Zego payment gateway",customFields:{},createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")}]);s(w),n(k)},o=w=>{Xt("renter-insight-invoices",w)},c=w=>{Xt("renter-insight-payments",w)},d=w=>t.filter(k=>k.customerId===w),u=w=>t.find(k=>k.id===w),m=w=>r.filter(k=>k.invoiceId===w),h=async w=>{i(!0);try{const k={id:Math.random().toString(36).substr(2,9),customerId:w.customerId||"",number:w.number||"",items:w.items||[],subtotal:w.subtotal||0,tax:w.tax||0,total:w.total||0,status:w.status||Mt.DRAFT,dueDate:w.dueDate||new Date,notes:w.notes||"",customFields:w.customFields||{},createdAt:new Date,updatedAt:new Date},T=[...t,k];return s(T),o(T),k}finally{i(!1)}},p=async(w,k)=>{const T=t.map(S=>S.id===w?{...S,...k,updatedAt:new Date}:S);s(T),o(T)},b=async w=>{const k=t.filter(T=>T.id!==w);s(k),o(k)},j=async(w,k)=>{const T=t.map(S=>S.id===w?{...S,status:k,updatedAt:new Date}:S);s(T),o(T)},x=async(w,k)=>{const T=t.map(S=>S.id===w?{...S,status:Mt.PAID,paidDate:new Date,paymentMethod:k,updatedAt:new Date}:S);s(T),o(T)};return{invoices:t,payments:r,loading:a,getInvoicesByCustomerId:d,getInvoiceById:u,getPaymentsByInvoiceId:m,createInvoice:h,updateInvoice:p,deleteInvoice:b,updateInvoiceStatus:j,markInvoiceAsPaid:x,sendInvoice:async w=>{const k=t.map(T=>T.id===w?{...T,status:Mt.SENT,updatedAt:new Date}:T);s(k),o(k)},recordPayment:async w=>{i(!0);try{const k={id:Math.random().toString(36).substr(2,9),invoiceId:w.invoiceId||"",amount:w.amount||0,method:w.method||Bi.CREDIT_CARD,status:w.status||Cl.COMPLETED,transactionId:w.transactionId,processedDate:w.processedDate||new Date,notes:w.notes||"",customFields:w.customFields||{},createdAt:new Date,updatedAt:new Date},T=[...r,k];return n(T),c(T),k.status===Cl.COMPLETED&&await x(k.invoiceId,k.method),k}finally{i(!1)}},sendPaymentRequest:async w=>(await j(w,Mt.SENT),await new Promise(k=>setTimeout(k,1e3)),!0)}}const mc={formDefaults:{customerId:"",dueDate:"",recurrence:"Monthly",notes:"",paymentMethod:"ACH",lineItems:[{description:"",quantity:1,unitPrice:0}]}};function BY({invoice:t,onSave:s,onCancel:r}){const{toast:n}=xt(),{leads:a}=tl(),[i,l]=y.useState(!1),[o,c]=y.useState({customerId:(t==null?void 0:t.customerId)||mc.formDefaults.customerId,number:(t==null?void 0:t.number)||"",dueDate:(t==null?void 0:t.dueDate)||mc.formDefaults.dueDate,status:(t==null?void 0:t.status)||Mt.DRAFT,recurrence:(t==null?void 0:t.recurrence)||mc.formDefaults.recurrence,notes:(t==null?void 0:t.notes)||mc.formDefaults.notes,paymentMethod:(t==null?void 0:t.paymentMethod)||mc.formDefaults.paymentMethod,lineItems:(t==null?void 0:t.lineItems)||mc.formDefaults.lineItems,items:(t==null?void 0:t.items)||[...mc.formDefaults.lineItems],subtotal:(t==null?void 0:t.subtotal)||0,tax:(t==null?void 0:t.tax)||0,total:(t==null?void 0:t.total)||0}),[d,u]=y.useState({description:"",quantity:1,unitPrice:0,total:0}),[m,h]=y.useState(.08);y.useEffect(()=>{t&&(c({...t,dueDate:new Date(t.dueDate)}),t.subtotal>0&&h(t.tax/t.subtotal))},[t]),y.useEffect(()=>{const x=d.quantity||1,f=d.unitPrice||0;u(g=>({...g,total:x*f}))},[d.quantity,d.unitPrice]),y.useEffect(()=>{if(o.items&&o.items.length>0){const x=o.items.reduce((v,w)=>v+w.total,0),f=x*m,g=x+f;c(v=>({...v,subtotal:x,tax:f,total:g}))}else c(x=>({...x,subtotal:0,tax:0,total:0}))},[o.items,m]);const p=async x=>{if(x.preventDefault(),!o.customerId||!o.number||!o.dueDate){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!o.items||o.items.length===0){n({title:"Validation Error",description:"Please add at least one item to the invoice",variant:"destructive"});return}l(!0);try{await s(o),n({title:"Success",description:`Invoice ${t?"updated":"created"} successfully`})}catch{n({title:"Error",description:`Failed to ${t?"update":"create"} invoice`,variant:"destructive"})}finally{l(!1)}},b=()=>{if(!d.description||!d.unitPrice){n({title:"Validation Error",description:"Description and unit price are required",variant:"destructive"});return}const x={id:Math.random().toString(36).substr(2,9),description:d.description||"",quantity:d.quantity||1,unitPrice:d.unitPrice||0,total:d.total||0};c(f=>({...f,items:[...f.items||[],x]})),u({description:"",quantity:1,unitPrice:0,total:0})},j=x=>{c(f=>{var g;return{...f,items:((g=f.items)==null?void 0:g.filter(v=>v.id!==x))||[]}})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Invoice":"Create Invoice"}),e.jsx(Ee,{children:t?"Update invoice details":"Create a new invoice for your customer"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"customerId",children:"Customer *"}),e.jsxs(Be,{value:o.customerId,onValueChange:x=>c(f=>({...f,customerId:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select customer"})}),e.jsx($e,{children:a.map(x=>e.jsxs(J,{value:x.id,children:[x.firstName," ",x.lastName]},x.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),e.jsx(ge,{id:"invoiceNumber",value:o.number,onChange:x=>c(f=>({...f,number:x.target.value})),placeholder:"e.g., INV-2024-001"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"dueDate",children:"Due Date *"}),e.jsx(ge,{id:"dueDate",type:"date",value:o.dueDate?new Date(o.dueDate).toISOString().split("T")[0]:"",onChange:x=>c(f=>({...f,dueDate:x.target.value?new Date(x.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(Be,{value:o.status,onValueChange:x=>c(f=>({...f,status:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Mt.DRAFT,children:"Draft"}),e.jsx(J,{value:Mt.SENT,children:"Sent"}),e.jsx(J,{value:Mt.VIEWED,children:"Viewed"}),e.jsx(J,{value:Mt.PAID,children:"Paid"}),e.jsx(J,{value:Mt.OVERDUE,children:"Overdue"}),e.jsx(J,{value:Mt.CANCELLED,children:"Cancelled"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Items"}),e.jsxs(H,{type:"button",onClick:b,size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description *"}),e.jsx(ge,{id:"description",value:d.description,onChange:x=>u(f=>({...f,description:x.target.value})),placeholder:"e.g., Service Labor"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"quantity",children:"Quantity"}),e.jsx(ge,{id:"quantity",type:"number",min:"1",value:d.quantity,onChange:x=>u(f=>({...f,quantity:parseInt(x.target.value)||1}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"unitPrice",children:"Unit Price"}),e.jsx(ge,{id:"unitPrice",type:"number",step:"0.01",min:"0",value:d.unitPrice,onChange:x=>u(f=>({...f,unitPrice:parseFloat(x.target.value)||0}))})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Total: "}),e.jsx("span",{className:"font-bold",children:De(d.total||0)})]}),e.jsx(H,{type:"button",onClick:b,children:"Add Item"})]})]})}),e.jsx("div",{className:"space-y-3",children:o.items&&o.items.length>0?o.items.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:x.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",x.quantity," × ",De(x.unitPrice)]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"font-bold",children:De(x.total)}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>j(x.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},x.id)):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(qn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No items added yet"}),e.jsx("p",{className:"text-sm",children:"Add items to this invoice"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Totals"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"taxRate",children:"Tax Rate (%)"}),e.jsx(ge,{id:"taxRate",type:"number",step:"0.01",min:"0",max:"100",value:m*100,onChange:x=>h(parseFloat(x.target.value)/100||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:De(o.subtotal||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Tax (",(m*100).toFixed(2),"%):"]}),e.jsx("span",{children:De(o.tax||0)})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:De(o.total||0)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(kt,{id:"notes",value:o.notes,onChange:x=>c(f=>({...f,notes:x.target.value})),placeholder:"Add any additional notes about this invoice",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Invoice"]})})]})]})})]})})}function zY({invoiceId:t,invoiceTotal:s,remainingBalance:r,onSave:n,onCancel:a}){const{toast:i}=xt(),[l,o]=y.useState(!1),[c,d]=y.useState({invoiceId:t,amount:r,method:Bi.CREDIT_CARD,status:Cl.COMPLETED,processedDate:new Date,notes:""}),u=async m=>{if(m.preventDefault(),!c.amount||c.amount<=0){i({title:"Validation Error",description:"Payment amount must be greater than zero",variant:"destructive"});return}if(c.amount>r){i({title:"Validation Error",description:"Payment amount cannot exceed the remaining balance",variant:"destructive"});return}o(!0);try{await n(c),i({title:"Success",description:"Payment recorded successfully"})}catch{i({title:"Error",description:"Failed to record payment",variant:"destructive"})}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(nn,{className:"h-5 w-5 mr-2 text-primary"}),"Record Payment"]}),e.jsxs(Ee,{children:["Record a payment for invoice #",t]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"amount",children:"Payment Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx(wt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"amount",type:"number",step:"0.01",min:"0.01",max:r,value:c.amount,onChange:m=>d(h=>({...h,amount:parseFloat(m.target.value)||0})),className:"pl-10"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Remaining balance: ",De(r)]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"method",children:"Payment Method *"}),e.jsxs(Be,{value:c.method,onValueChange:m=>d(h=>({...h,method:m})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Bi.CREDIT_CARD,children:"Credit Card"}),e.jsx(J,{value:Bi.BANK_TRANSFER,children:"Bank Transfer"}),e.jsx(J,{value:Bi.CASH,children:"Cash"}),e.jsx(J,{value:Bi.CHECK,children:"Check"}),e.jsx(J,{value:Bi.FINANCING,children:"Financing"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Payment Status *"}),e.jsxs(Be,{value:c.status,onValueChange:m=>d(h=>({...h,status:m})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Cl.COMPLETED,children:"Completed"}),e.jsx(J,{value:Cl.PENDING,children:"Pending"}),e.jsx(J,{value:Cl.PROCESSING,children:"Processing"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"processedDate",children:"Payment Date *"}),e.jsx(ge,{id:"processedDate",type:"date",value:c.processedDate?new Date(c.processedDate).toISOString().split("T")[0]:"",onChange:m=>d(h=>({...h,processedDate:m.target.value?new Date(m.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"transactionId",children:"Transaction ID"}),e.jsx(ge,{id:"transactionId",value:c.transactionId||"",onChange:m=>d(h=>({...h,transactionId:m.target.value})),placeholder:"e.g., txn_1234567890"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(kt,{id:"notes",value:c.notes||"",onChange:m=>d(h=>({...h,notes:m.target.value})),placeholder:"Add any notes about this payment",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recording..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Record Payment"]})})]})]})})]})})}function VY({invoice:t,payments:s,onClose:r,onEdit:n,onSendPaymentRequest:a,onRecordPayment:i}){const{toast:l}=xt(),[o,c]=y.useState("details"),[d,u]=y.useState(!1),[m,h]=y.useState(!1),p=T=>{switch(T){case Mt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Mt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Mt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Mt.PAID:return"bg-green-50 text-green-700 border-green-200";case Mt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Mt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},b=T=>{switch(T){case"completed":return e.jsx(_t,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(zt,{className:"h-4 w-4 text-yellow-500"});case"processing":return e.jsx(zt,{className:"h-4 w-4 text-blue-500"});case"failed":return e.jsx(xa,{className:"h-4 w-4 text-red-500"});case"refunded":return e.jsx(Ir,{className:"h-4 w-4 text-purple-500"});default:return null}},j=T=>{switch(T){case"credit_card":return e.jsx(nn,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return e.jsx(wt,{className:"h-4 w-4 text-green-500"});case"cash":return e.jsx(wt,{className:"h-4 w-4 text-green-500"});case"check":return e.jsx(qn,{className:"h-4 w-4 text-blue-500"});case"financing":return e.jsx(wt,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(wt,{className:"h-4 w-4 text-gray-500"})}},x=()=>{try{const T=new Pt;if(T.setFontSize(20),T.text("INVOICE",105,15,{align:"center"}),T.setFontSize(12),T.text(`Invoice #: ${t.number}`,20,30),T.text(`Date: ${nt(t.createdAt)}`,20,40),T.text(`Due Date: ${nt(t.dueDate)}`,20,50),T.text(`Status: ${t.status.toUpperCase()}`,20,60),T.setFontSize(14),T.text("Bill To:",20,75),T.setFontSize(12),T.text(`Customer ID: ${t.customerId}`,20,85),T.setFontSize(14),T.text("Invoice Items",20,105),T.autoTable({startY:110,head:[["Description","Quantity","Unit Price","Total"]],body:t.items.map(S=>[S.description,S.quantity,De(S.unitPrice),De(S.total)]),foot:[["","","Subtotal:",De(t.subtotal)],["","","Tax:",De(t.tax)],["","","Total:",De(t.total)]],theme:"striped",headStyles:{fillColor:[66,139,202]}}),t.notes){const S=T.lastAutoTable.finalY||110;T.setFontSize(14),T.text("Notes",20,S+20),T.setFontSize(12);const C=T.splitTextToSize(t.notes,170);T.text(C,20,S+30)}T.save(`invoice-${t.number}.pdf`),l({title:"PDF Generated",description:"Invoice PDF has been downloaded"})}catch(T){console.error("Error generating PDF:",T),l({title:"Error",description:"Failed to generate PDF",variant:"destructive"})}},f=async()=>{if(a){u(!0);try{await a(t.id),l({title:"Payment Request Sent",description:"Payment request has been sent to the customer"})}catch{l({title:"Error",description:"Failed to send payment request",variant:"destructive"})}finally{u(!1)}}},g=async T=>{if(i)try{await i(T),h(!1)}catch(S){throw S}},v=s.filter(T=>T.invoiceId===t.id),w=v.reduce((T,S)=>T+S.amount,0),k=t.total-w;return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[m&&e.jsx(zY,{invoiceId:t.id,invoiceTotal:t.total,remainingBalance:k,onSave:g,onCancel:()=>h(!1)}),e.jsxs(ee,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"text-xl",children:["Invoice #",t.number]}),e.jsx(Ee,{children:"Invoice details and payment information"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{onClick:()=>n(t),size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Invoice"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{children:[e.jsxs(ms,{value:o,onValueChange:c,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-3",children:[e.jsx(Ye,{value:"details",children:"Details"}),e.jsxs(Ye,{value:"payments",children:["Payments",v.length>0&&e.jsx(Ae,{className:"ml-2 bg-green-50 text-green-700 border-green-200",children:v.length})]}),e.jsx(Ye,{value:"history",children:"History"})]}),e.jsxs(Je,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ae,{className:Ge("ri-badge-status",p(t.status)),children:t.status.toUpperCase()}),t.paidDate&&e.jsxs(Ae,{className:"bg-green-50 text-green-700 border-green-200",children:["PAID ON ",nt(t.paidDate)]}),t.status===Mt.OVERDUE&&e.jsx(Ae,{className:"bg-red-50 text-red-700 border-red-200",children:"OVERDUE"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("p",{className:"font-medium",children:t.customerId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invoice Number"}),e.jsx("p",{className:"font-medium",children:t.number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"font-medium",children:nt(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:nt(t.dueDate)})]}),t.paidDate&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Paid Date"}),e.jsx("p",{className:"font-medium",children:nt(t.paidDate)})]}),t.paymentMethod&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Payment Method"}),e.jsx("p",{className:"font-medium",children:t.paymentMethod})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Items"}),e.jsx("div",{className:"space-y-3",children:t.items.map((T,S)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:T.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",T.quantity," × ",De(T.unitPrice)]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-lg",children:De(T.total)})})]},T.id))})]}),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{children:De(t.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax:"}),e.jsx("span",{children:De(t.tax)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:De(t.total)})]}),v.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Paid:"}),e.jsx("span",{children:De(w)})]}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Balance Due:"}),e.jsx("span",{children:De(k)})]})]})]})}),t.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("div",{className:"mt-1 p-3 bg-muted/30 rounded-md",children:e.jsx("p",{className:"text-sm",children:t.notes})})]})]}),e.jsxs(Je,{value:"payments",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payment History"}),e.jsx("div",{className:"flex space-x-2",children:t.status!==Mt.PAID&&t.status!==Mt.CANCELLED&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{onClick:f,disabled:d,size:"sm",variant:"outline",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Send Payment Request"]}),i&&k>0&&e.jsxs(H,{onClick:()=>h(!0),size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})})]}),v.length>0?e.jsxs("div",{className:"space-y-4",children:[v.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Payment #",T.id.substring(0,8)]}),e.jsx(Ae,{className:T.status==="completed"?"bg-green-50 text-green-700 border-green-200":T.status==="pending"?"bg-yellow-50 text-yellow-700 border-yellow-200":T.status==="processing"?"bg-blue-50 text-blue-700 border-blue-200":T.status==="failed"?"bg-red-50 text-red-700 border-red-200":T.status==="refunded"?"bg-purple-50 text-purple-700 border-purple-200":"bg-gray-50 text-gray-700 border-gray-200",children:e.jsxs("span",{className:"flex items-center",children:[b(T.status),e.jsx("span",{className:"ml-1",children:T.status.toUpperCase()})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-3 w-3 mr-1 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-1",children:nt(T.processedDate)})]}),e.jsxs("div",{className:"flex items-center",children:[j(T.method),e.jsx("span",{className:"font-medium ml-1",children:"Method:"}),e.jsx("span",{className:"ml-1",children:T.method.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())})]}),T.transactionId&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(qn,{className:"h-3 w-3 mr-1 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Transaction ID:"}),e.jsx("span",{className:"ml-1 font-mono text-xs",children:T.transactionId})]})]}),T.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 bg-muted/20 p-2 rounded-md",children:T.notes})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-lg text-green-600",children:De(T.amount)})})]},T.id)),e.jsx("div",{className:"bg-muted/30 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Invoice Total:"}),e.jsx("span",{children:De(t.total)})]}),e.jsxs("div",{className:"flex justify-between text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Total Paid:"}),e.jsx("span",{children:De(w)})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t pt-2",children:[e.jsx("span",{className:k>0?"text-red-700":"text-green-700",children:"Balance Due:"}),e.jsx("span",{className:k>0?"text-red-700":"text-green-700",children:De(k)})]})]})})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No payments recorded for this invoice"}),t.status!==Mt.PAID&&t.status!==Mt.CANCELLED&&i&&e.jsxs(H,{onClick:()=>h(!0),className:"mt-4",size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]}),e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsxs(ce,{className:"pb-2",children:[e.jsx(de,{className:"text-lg text-blue-800",children:"Zego Payment Integration"}),e.jsx(Ee,{className:"text-blue-700",children:"Secure payment processing for your customers"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-3 text-blue-700",children:[e.jsx("p",{className:"text-sm",children:"When you send a payment request, your customer will receive an email with a secure link to make their payment online."}),e.jsx("p",{className:"text-sm",children:"Payments are processed securely through Zego's payment gateway, supporting credit cards, ACH transfers, and more."}),e.jsx("p",{className:"text-sm font-medium",children:"Processing fee: 2.9% + $0.30 per transaction"})]})})]})]}),e.jsxs(Je,{value:"history",className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice History"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-blue-500"}),e.jsx("div",{className:"font-medium",children:"Invoice Created"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.createdAt)})]}),t.status!==Mt.DRAFT&&e.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-yellow-500"}),e.jsx("div",{className:"font-medium",children:"Invoice Sent"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.updatedAt)})]}),t.status===Mt.VIEWED&&e.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-muted",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-purple-500"}),e.jsx("div",{className:"font-medium",children:"Invoice Viewed by Customer"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.updatedAt)})]}),t.status===Mt.PAID&&t.paidDate&&e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-green-500"}),e.jsx("div",{className:"font-medium",children:"Payment Received"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.paidDate)})]}),t.status===Mt.OVERDUE&&e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-red-500"}),e.jsx("div",{className:"font-medium",children:"Invoice Overdue"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.dueDate)})]}),t.status===Mt.CANCELLED&&e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 w-4 h-4 rounded-full bg-gray-500"}),e.jsx("div",{className:"font-medium",children:"Invoice Cancelled"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:nt(t.updatedAt)})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx(H,{variant:"outline",onClick:r,children:"Close"}),e.jsxs(H,{variant:"outline",onClick:x,children:[e.jsx(wg,{className:"h-4 w-4 mr-2"}),"Print PDF"]}),e.jsxs("div",{className:"flex space-x-2",children:[t.status===Mt.DRAFT&&e.jsxs(H,{children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Send Invoice"]}),t.status!==Mt.PAID&&t.status!==Mt.CANCELLED&&e.jsxs(e.Fragment,{children:[e.jsxs(H,{onClick:f,disabled:d,variant:"outline",children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),d?"Sending...":"Request Payment"]}),i&&k>0&&e.jsxs(H,{onClick:()=>h(!0),children:[e.jsx(nn,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})]})]})]})]})]})}function UY({payments:t,onViewPaymentDetails:s}){const{toast:r}=xt(),[n,a]=y.useState(""),[i,l]=y.useState("all"),[o,c]=y.useState("all"),[d,u]=y.useState("all"),m=S=>{switch(S){case"completed":return"bg-green-50 text-green-700 border-green-200";case"pending":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"processing":return"bg-blue-50 text-blue-700 border-blue-200";case"failed":return"bg-red-50 text-red-700 border-red-200";case"refunded":return"bg-purple-50 text-purple-700 border-purple-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},h=S=>{switch(S){case"completed":return e.jsx(_t,{className:"h-4 w-4 text-green-500"});case"pending":return e.jsx(zt,{className:"h-4 w-4 text-yellow-500"});case"processing":return e.jsx(zt,{className:"h-4 w-4 text-blue-500"});case"failed":return e.jsx(xa,{className:"h-4 w-4 text-red-500"});case"refunded":return e.jsx(qn,{className:"h-4 w-4 text-purple-500"});default:return null}},p=S=>{switch(S){case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";case"check":return"Check";case"financing":return"Financing";default:return S}},b=S=>{switch(S){case"credit_card":return e.jsx(nn,{className:"h-4 w-4 text-blue-500"});case"bank_transfer":return e.jsx(qn,{className:"h-4 w-4 text-green-500"});case"cash":return e.jsx(qn,{className:"h-4 w-4 text-green-500"});case"check":return e.jsx(qn,{className:"h-4 w-4 text-blue-500"});case"financing":return e.jsx(qn,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(qn,{className:"h-4 w-4 text-gray-500"})}},j=t.filter(S=>{const C=S.invoiceId.toLowerCase().includes(n.toLowerCase())||S.id.toLowerCase().includes(n.toLowerCase())||S.transactionId&&S.transactionId.toLowerCase().includes(n.toLowerCase()),E=i==="all"||S.status===i,M=o==="all"||S.method===o;let D=!0;const A=new Date,I=S.processedDate;if(d==="today")D=I.toDateString()===A.toDateString();else if(d==="this_week"){const L=new Date(A);L.setDate(A.getDate()-A.getDay());const F=new Date(L);F.setDate(L.getDate()+6),D=I>=L&&I<=F}else d==="this_month"&&(D=I.getMonth()===A.getMonth()&&I.getFullYear()===A.getFullYear());return C&&E&&M&&D}),x=()=>{const C=[["ID","Invoice ID","Amount","Method","Status","Transaction ID","Date","Notes"].join(","),...j.map(A=>[A.id,A.invoiceId,A.amount.toFixed(2),A.method,A.status,A.transactionId||"",A.processedDate.toISOString().split("T")[0],A.notes||""].join(","))].join(`
`),E=new Blob([C],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(E),D=document.createElement("a");D.href=M,D.setAttribute("download","payment_history.csv"),document.body.appendChild(D),D.click(),document.body.removeChild(D),r({title:"Export Successful",description:"Payment history exported to CSV"})},f=t.length,g=t.reduce((S,C)=>S+C.amount,0),v=t.filter(S=>S.status==="completed").length,w=t.filter(S=>S.status==="pending"||S.status==="processing").length,k=t.filter(S=>S.status==="failed").length,T=t.reduce((S,C)=>{const E=C.method;return S[E]||(S[E]=0),C.status==="completed"&&(S[E]+=C.amount),S},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Payments"}),e.jsx(nn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:f}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[De(g)," processed"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Completed"}),e.jsx(_t,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:v}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(v/f*100||0).toFixed(1),"% success rate"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-yellow-900",children:"Pending"}),e.jsx(zt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:w}),e.jsx("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:"Awaiting processing"})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-red-50 to-red-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-red-900",children:"Failed"}),e.jsx(xa,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-900",children:k}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(k/f*100||0).toFixed(1),"% failure rate"]})]})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Payment Methods"}),e.jsx(Ee,{children:"Breakdown of payments by method"})]}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[Object.entries(T).map(([S,C])=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[b(S),e.jsx("span",{className:"font-medium",children:p(S)})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:De(C)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.filter(E=>E.method===S&&E.status==="completed").length," payments"]})]},S)),Object.keys(T).length===0&&e.jsx("div",{className:"col-span-3 text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No payment data available"})})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(gs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search payments...",value:n,onChange:S=>a(S.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:i,onValueChange:l,children:[e.jsx(Oe,{className:"w-[150px]",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:"completed",children:"Completed"}),e.jsx(J,{value:"pending",children:"Pending"}),e.jsx(J,{value:"processing",children:"Processing"}),e.jsx(J,{value:"failed",children:"Failed"}),e.jsx(J,{value:"refunded",children:"Refunded"})]})]}),e.jsxs(Be,{value:o,onValueChange:c,children:[e.jsx(Oe,{className:"w-[150px]",children:e.jsx(ze,{placeholder:"Method"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Methods"}),e.jsx(J,{value:"credit_card",children:"Credit Card"}),e.jsx(J,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(J,{value:"cash",children:"Cash"}),e.jsx(J,{value:"check",children:"Check"}),e.jsx(J,{value:"financing",children:"Financing"})]})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-[150px]",children:e.jsx(ze,{placeholder:"Date"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Dates"}),e.jsx(J,{value:"today",children:"Today"}),e.jsx(J,{value:"this_week",children:"This Week"}),e.jsx(J,{value:"this_month",children:"This Month"})]})]}),e.jsxs(H,{variant:"outline",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Payment History"}),e.jsx(Ee,{children:"Track and manage customer payments"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:x,children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(wg,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),e.jsx(te,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/50",children:[e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Invoice"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Amount"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Method"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Date"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Transaction ID"}),e.jsx("th",{className:"p-3 text-left font-medium text-muted-foreground",children:"Actions"})]})}),e.jsxs("tbody",{children:[j.map(S=>e.jsxs("tr",{className:"border-b hover:bg-muted/10",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"font-medium",children:["#",S.invoiceId.substring(0,8)]})}),e.jsx("td",{className:"p-3 font-medium",children:De(S.amount)}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[b(S.method),e.jsx("span",{children:p(S.method)})]})}),e.jsx("td",{className:"p-3",children:e.jsxs(Ae,{className:Ge("flex items-center space-x-1",m(S.status)),children:[h(S.status),e.jsx("span",{children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})]})}),e.jsx("td",{className:"p-3",children:nt(S.processedDate)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"font-mono text-xs",children:S.transactionId?S.transactionId:"-"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>s==null?void 0:s(S),children:"View"})})})]},S.id)),j.length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-8 text-center text-muted-foreground",children:[e.jsx(nn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No payments found matching your filters"})]})})]})]})})})]})]})}function wS(){const{invoices:t,payments:s,createInvoice:r,updateInvoice:n,sendPaymentRequest:a,recordPayment:i}=$Y(),{toast:l}=xt(),[o,c]=y.useState(""),[d,u]=y.useState("all"),[m,h]=y.useState("invoices"),[p,b]=y.useState(!1),[j,x]=y.useState(!1),[f,g]=y.useState(null),v=D=>{switch(D){case Mt.DRAFT:return"bg-gray-50 text-gray-700 border-gray-200";case Mt.SENT:return"bg-blue-50 text-blue-700 border-blue-200";case Mt.VIEWED:return"bg-yellow-50 text-yellow-700 border-yellow-200";case Mt.PAID:return"bg-green-50 text-green-700 border-green-200";case Mt.OVERDUE:return"bg-red-50 text-red-700 border-red-200";case Mt.CANCELLED:return"bg-gray-50 text-gray-700 border-gray-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}},w=t.filter(D=>D.number.toLowerCase().includes(o.toLowerCase())||D.customerId.toLowerCase().includes(o.toLowerCase())).filter(D=>d==="all"||D.status===d),k=()=>{g(null),b(!0)},T=D=>{g(D),b(!0),x(!1)},S=D=>{g(D),x(!0)},C=async D=>{try{f?(await n(f.id,D),l({title:"Success",description:"Invoice updated successfully"})):(await r(D),l({title:"Success",description:"Invoice created successfully"})),b(!1),g(null)}catch{l({title:"Error",description:`Failed to ${f?"update":"create"} invoice`,variant:"destructive"})}},E=async D=>{try{return await a(D),!0}catch(A){throw console.error("Error sending payment request:",A),A}},M=async D=>{try{return await i(D),l({title:"Success",description:"Payment recorded successfully"}),!0}catch(A){throw l({title:"Error",description:"Failed to record payment",variant:"destructive"}),A}};return e.jsxs("div",{className:"space-y-8",children:[p&&e.jsx(BY,{invoice:f||void 0,onSave:C,onCancel:()=>{b(!1),g(null)}}),j&&f&&e.jsx(VY,{invoice:f,payments:s.filter(D=>D.invoiceId===f.id),onClose:()=>x(!1),onEdit:T,onSendPaymentRequest:E,onRecordPayment:M}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Invoice & Payments"}),e.jsx("p",{className:"ri-page-description",children:"Manage invoices and process payments via Zego integration"})]}),e.jsxs(H,{className:"shadow-sm",onClick:k,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Invoices"}),e.jsx(qn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:t.length}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"All invoices"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Outstanding"}),e.jsx(wt,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:De(t.filter(D=>D.status!=="Paid").reduce((D,A)=>D+A.totalAmount,0))}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),De(t.filter(D=>D.status==="Overdue").reduce((D,A)=>D+A.totalAmount,0))," overdue"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Paid This Month"}),e.jsx(qn,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:De(t.filter(D=>D.status===Mt.PAID).reduce((D,A)=>D+A.total,0))}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Revenue collected"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Payment Success Rate"}),e.jsx(nn,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:"98.5%"}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(_t,{className:"h-3 w-3 mr-1"}),s.filter(D=>D.status==="completed").length," successful payments"]})]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2 text-blue-900",children:[e.jsx(nn,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Zego Payment Integration"})]}),e.jsx(Ee,{className:"text-blue-700",children:"Seamlessly process payments and send payment requests to customers"})]}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"99.9%"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Uptime"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.9%"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Processing Fee"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"24/7"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Support"})]})]})})]}),e.jsxs(ms,{value:m,onValueChange:h,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ye,{value:"invoices",className:"flex items-center",children:[e.jsx(qn,{className:"h-4 w-4 mr-2"}),"Invoices"]}),e.jsxs(Ye,{value:"payments",className:"flex items-center",children:[e.jsx(nn,{className:"h-4 w-4 mr-2"}),"Payments"]})]}),e.jsxs(Je,{value:"invoices",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search invoices...",value:o,onChange:D=>c(D.target.value),className:"ri-search-input shadow-sm"})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Status"}),e.jsx(J,{value:Mt.DRAFT,children:"Draft"}),e.jsx(J,{value:Mt.SENT,children:"Sent"}),e.jsx(J,{value:Mt.VIEWED,children:"Viewed"}),e.jsx(J,{value:Mt.PAID,children:"Paid"}),e.jsx(J,{value:Mt.OVERDUE,children:"Overdue"}),e.jsx(J,{value:Mt.CANCELLED,children:"Cancelled"})]})]}),e.jsxs(H,{variant:"outline",className:"shadow-sm",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Invoices"}),e.jsx(Ee,{children:"Manage invoices and track payments"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[w.map(D=>e.jsxs("div",{className:"ri-table-row",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:D.number}),e.jsx(Ae,{className:Ge("ri-badge-status",v(D.status)),children:D.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Customer:"}),e.jsx("span",{className:"ml-1",children:D.customerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total:"}),e.jsx("span",{className:"ml-1 font-bold text-primary",children:De(D.total)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Due Date:"}),e.jsx("span",{className:"ml-1",children:nt(D.dueDate)})]}),D.paidDate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Paid Date:"}),e.jsx("span",{className:"ml-1",children:nt(D.paidDate)})]})]}),e.jsxs("div",{className:"mt-2 bg-muted/30 p-2 rounded-md",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[D.items.length," item(s) - ",D.notes]}),D.paymentMethod&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",D.paymentMethod]})]})]})}),e.jsxs("div",{className:"ri-action-buttons",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>S(D),children:[e.jsx(zs,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>T(D),children:"Edit"}),e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",children:[e.jsx(ga,{className:"h-3 w-3 mr-1"}),"PDF"]}),D.status!==Mt.PAID&&e.jsxs(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>E(D.id),children:[e.jsx(va,{className:"h-3 w-3 mr-1"}),"Send Payment Request"]})]})]},D.id)),w.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(qn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No invoices found"}),e.jsx("p",{className:"text-sm",children:"Create your first invoice to get started"})]})]})})]})]}),e.jsx(Je,{value:"payments",children:e.jsx(UY,{payments:s,onViewPaymentDetails:D=>{const A=t.find(I=>I.id===D.invoiceId);A&&(g(A),x(!0),setTimeout(()=>{const I=document.querySelector('[role="tablist"]');if(I){const L=Array.from(I.children).find(F=>{var B;return(B=F.textContent)==null?void 0:B.includes("Payments")});L&&L.click()}},100))}})})]})]})}function qY(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(wS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(wS,{})})]})}const vr={branding:{logoUrl:"https://ajwaujikksxupqwatpfa.supabase.co/storage/v1/object/public/website-assets/11111111-1111-1111-1111-111111111111/branding/logoUrl-1752730074646.png",primaryColor:"#3b82f6",secondaryColor:"#64748b",fontFamily:"Inter",sideMenuColor:"#1e293b",portalName:"Customer Portal",portalLogo:null,fontOptions:[{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Montserrat",label:"Montserrat"},{value:"Lato",label:"Lato"},{value:"Poppins",label:"Poppins"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Oswald",label:"Oswald"}]},labelOverrides:{platformTypes:[{value:"rv",label:"RV Dealership"},{value:"mh",label:"Manufactured Housing"},{value:"both",label:"Both RV & Manufactured Housing"}],defaultLabels:{general:{vehicle:"Home/RV",customer:"Customer",deal:"Deal",quote:"Quote",service:"Service",inventory:"Inventory"},crm:{lead:"Lead",prospect:"Prospect",contact:"Contact",activity:"Activity",source:"Source"},inventory:{vin:"VIN",make:"Make",model:"Model",year:"Year",type:"Type",price:"Price",cost:"Cost",features:"Features"},sales:{salesperson:"Sales Rep",commission:"Commission",deal_stage:"Deal Stage",close_date:"Close Date",financing:"Financing"},service:{technician:"Technician",service_ticket:"Service Ticket",parts:"Parts",labor:"Labor",warranty:"Warranty"}}},customFields:{modules:["crm","inventory","quotes","agreements","service","delivery","invoices"],customFieldDefaults:{moduleSectionMap:{crm:["Lead Information","Contact Details","Preferences","Notes"],inventory:["Vehicle Details","Specifications","Pricing","Features"],quotes:["Quote Details","Terms","Pricing"],agreements:["Agreement Details","Terms","Conditions"],service:["Service Details","Customer Requirements","Technical Notes"],delivery:["Delivery Details","Customer Instructions","Logistics"],invoices:["Invoice Details","Payment Terms","Additional Charges"],default:["General","Details","Other"]}}},integrations:{emailProviders:[{value:"default",label:"Default (Platform)"},{value:"sendgrid",label:"SendGrid"},{value:"mailchimp",label:"Mailchimp"},{value:"mailgun",label:"Mailgun"},{value:"smtp",label:"Custom SMTP"}],smsProviders:[{value:"default",label:"Default (Platform)"},{value:"twilio",label:"Twilio"},{value:"messagebird",label:"MessageBird"},{value:"vonage",label:"Vonage (Nexmo)"}],webhookEvents:[{value:"lead.created",label:"Lead Created"},{value:"lead.updated",label:"Lead Updated"},{value:"quote.created",label:"Quote Created"},{value:"quote.accepted",label:"Quote Accepted"},{value:"service.created",label:"Service Ticket Created"},{value:"service.completed",label:"Service Completed"},{value:"vehicle.created",label:"Home/RV Created"},{value:"vehicle.sold",label:"Home/RV Sold"}]},notifications:{emailTypes:[{value:"welcome",label:"Welcome Email"},{value:"quote",label:"Quote Email"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"invoice",label:"Invoice Email"},{value:"password_reset",label:"Password Reset"},{value:"custom",label:"Custom Email"}],smsTypes:[{value:"welcome",label:"Welcome SMS"},{value:"quote",label:"Quote SMS"},{value:"service",label:"Service Notification"},{value:"delivery",label:"Delivery Notification"},{value:"appointment",label:"Appointment Reminder"},{value:"custom",label:"Custom SMS"}],commonVariables:["{{first_name}}","{{last_name}}","{{company_name}}","{{quote_number}}","{{invoice_number}}","{{service_ticket}}","{{delivery_date}}","{{appointment_date}}","{{appointment_time}}","{{login_url}}","{{reset_url}}"]}};function HY({field:t,onSave:s,onCancel:r,modules:n}){var j;const{toast:a}=xt(),[i,l]=y.useState(!1),[o,c]=y.useState({name:"",type:Ra.TEXT,required:!1,options:[],module:"",section:""}),[d,u]=y.useState("");y.useEffect(()=>{t&&c({...t})},[t]);const m=async x=>{if(x.preventDefault(),!o.name||!o.module||!o.section){a({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if((o.type===Ra.SELECT||o.type===Ra.MULTISELECT)&&(!o.options||o.options.length===0)){a({title:"Validation Error",description:"Please add at least one option for select fields",variant:"destructive"});return}l(!0);try{await s(o),a({title:"Success",description:`Custom field ${t?"updated":"created"} successfully`})}catch{a({title:"Error",description:`Failed to ${t?"update":"create"} custom field`,variant:"destructive"})}finally{l(!1)}},h=()=>{var x;d.trim()&&!((x=o.options)!=null&&x.includes(d.trim()))&&(c(f=>({...f,options:[...f.options||[],d.trim()]})),u(""))},p=x=>{c(f=>{var g;return{...f,options:((g=f.options)==null?void 0:g.filter(v=>v!==x))||[]}})},b=x=>vr.customFields.customFieldDefaults.moduleSectionMap[x]||vr.customFields.customFieldDefaults.moduleSectionMap.default;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:t?"Edit Custom Field":"Add Custom Field"}),e.jsx(Ee,{children:t?"Update custom field details":"Create a new custom field"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Field Name *"}),e.jsx(ge,{id:"name",value:o.name,onChange:x=>c(f=>({...f,name:x.target.value})),placeholder:"e.g., Customer Budget"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"module",children:"Module *"}),e.jsxs(Be,{value:o.module,onValueChange:x=>{c(f=>({...f,module:x,section:""}))},children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select module"})}),e.jsx($e,{children:n.map(x=>e.jsx(J,{value:x,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"section",children:"Section *"}),e.jsxs(Be,{value:o.section,onValueChange:x=>c(f=>({...f,section:x})),disabled:!o.module,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:o.module?"Select section":"Select module first"})}),e.jsx($e,{children:o.module&&b(o.module).map(x=>e.jsx(J,{value:x,children:x},x))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"type",children:"Field Type *"}),e.jsxs(Be,{value:o.type,onValueChange:x=>c(f=>({...f,type:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:Ra.TEXT,children:"Text"}),e.jsx(J,{value:Ra.NUMBER,children:"Number"}),e.jsx(J,{value:Ra.DATE,children:"Date"}),e.jsx(J,{value:Ra.BOOLEAN,children:"Boolean"}),e.jsx(J,{value:Ra.SELECT,children:"Select"}),e.jsx(J,{value:Ra.MULTISELECT,children:"Multi-select"})]})]})]}),(o.type===Ra.SELECT||o.type===Ra.MULTISELECT)&&e.jsxs("div",{children:[e.jsx(Z,{children:"Options"}),e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx(ge,{value:d,onChange:x=>u(x.target.value),placeholder:"Add an option",onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),h())}}),e.jsx(H,{type:"button",onClick:h,children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(j=o.options)==null?void 0:j.map((x,f)=>e.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[e.jsx("span",{className:"mr-2",children:x}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>p(x),children:e.jsx(js,{className:"h-3 w-3"})})]},f)),(!o.options||o.options.length===0)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No options added yet"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"required",checked:o.required,onCheckedChange:x=>c(f=>({...f,required:!!x}))}),e.jsx(Z,{htmlFor:"required",children:"Required field"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(H,{type:"button",variant:"outline",onClick:r,disabled:i,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),t?"Update":"Create"," Field"]})})]})]})})]})})}function WY(){const{tenant:t,updateTenant:s}=kn(),{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState((t==null?void 0:t.branding.primaryColor)||vr.branding.primaryColor),[o,c]=y.useState((t==null?void 0:t.branding.secondaryColor)||vr.branding.secondaryColor),[d,u]=y.useState((t==null?void 0:t.branding.fontFamily)||vr.branding.fontFamily),[m,h]=y.useState((t==null?void 0:t.branding.logo)||vr.branding.logoUrl),[p,b]=y.useState((t==null?void 0:t.branding.sideMenuColor)||vr.branding.sideMenuColor),[j,x]=y.useState((t==null?void 0:t.branding.sideMenuColor)===null||!(t!=null&&t.branding.sideMenuColor)),[f,g]=y.useState((t==null?void 0:t.branding.logo)||vr.branding.logoUrl),[v,w]=y.useState((t==null?void 0:t.branding.portalName)||vr.branding.portalName),[k,T]=y.useState((t==null?void 0:t.branding.portalLogo)||vr.branding.portalLogo||""),[S,C]=y.useState((t==null?void 0:t.branding.portalLogo)||vr.branding.portalLogo||""),E=y.useRef(null),M=y.useRef(null),D=vr.branding.fontOptions,A=F=>{var R;const B=(R=F.target.files)==null?void 0:R[0];if(B){const $=URL.createObjectURL(B);g($),h($)}},I=F=>{var R;const B=(R=F.target.files)==null?void 0:R[0];if(B){const $=URL.createObjectURL(B);C($),T($)}},L=async()=>{a(!0);try{await s({branding:{...t==null?void 0:t.branding,primaryColor:i,secondaryColor:o,fontFamily:d,logo:m,sideMenuColor:j?null:p,portalName:v,portalLogo:k}}),r({title:"Branding Updated",description:"Your branding settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update branding settings.",variant:"destructive"})}finally{a(!1)}};return e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(FA,{className:"h-5 w-5 mr-2 text-primary"}),"Branding & Appearance"]}),e.jsx(Ee,{children:"Customize your dealership's visual identity"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{children:"Company Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:f?e.jsx("img",{src:f,alt:"Company Logo",className:"max-w-full max-h-full object-contain"}):e.jsx(Nu,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>{var F;return(F=E.current)==null?void 0:F.click()},children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),e.jsx(ge,{type:"file",ref:E,className:"hidden",accept:"image/*",onChange:A}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recommended size: 200x200px. Max file size: 2MB.",e.jsx("br",{}),"Supported formats: PNG, JPG, SVG"]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Client Portal Branding"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Customize the branding for your client-facing portal"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"portalName",children:"Portal Name"}),e.jsx(ge,{id:"portalName",value:v,onChange:F=>w(F.target.value),placeholder:"e.g., Customer Portal",className:"shadow-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This name will appear in the portal header and browser title"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{children:"Portal Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"border rounded-md p-4 w-40 h-40 flex items-center justify-center bg-muted/30",children:S?e.jsx("img",{src:S,alt:"Portal Logo",className:"max-w-full max-h-full object-contain"}):e.jsx(Nu,{className:"h-12 w-12 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(H,{variant:"outline",onClick:()=>{var F;return(F=M.current)==null?void 0:F.click()},children:[e.jsx(Ji,{className:"h-4 w-4 mr-2"}),"Upload Portal Logo"]}),e.jsx(ge,{type:"file",ref:M,className:"hidden",accept:"image/*",onChange:I}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Portal-specific logo (optional). If not set, company logo will be used.",e.jsx("br",{}),"Recommended size: 200x200px. Max file size: 2MB."]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"primaryColor",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(ge,{type:"color",id:"primaryColor",value:i,onChange:F=>l(F.target.value),className:"w-16 h-10 shadow-sm"}),e.jsx(ge,{value:i,onChange:F=>l(F.target.value),className:"shadow-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for buttons, links, and primary actions"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"secondaryColor",children:"Secondary Color"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(ge,{type:"color",id:"secondaryColor",value:o,onChange:F=>c(F.target.value),className:"w-16 h-10 shadow-sm"}),e.jsx(ge,{value:o,onChange:F=>c(F.target.value),className:"shadow-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used for secondary elements and accents"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fontFamily",children:"Font Family"}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select font family"})}),e.jsx($e,{children:D.map(F=>e.jsx(J,{value:F.value,children:F.label},F.value))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The primary font used throughout your application"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"sideMenuColor",children:"Side Menu Color"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(ge,{type:"color",id:"sideMenuColor",value:p,onChange:F=>{b(F.target.value),x(!1)},className:"w-16 h-10 shadow-sm",disabled:j}),e.jsx(ge,{value:p,onChange:F=>{b(F.target.value),x(!1)},className:"shadow-sm",disabled:j})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(Ct,{id:"useDefaultSideMenuColor",checked:j,onCheckedChange:F=>x(!!F)}),e.jsx(Z,{htmlFor:"useDefaultSideMenuColor",className:"font-normal",children:"Use default theme color (matches primary site background)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The background color for your application's side navigation menu"})]}),e.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),e.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{fontFamily:d},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Text Preview"}),e.jsx("p",{children:"This is how your text will appear with the selected font."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Color Preview"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:i},children:"Primary"}),e.jsx("div",{className:"w-20 h-10 rounded-md flex items-center justify-center text-white",style:{backgroundColor:o},children:"Secondary"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Button Preview"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:i},children:"Primary Button"}),e.jsx("button",{className:"px-4 py-2 rounded-md border",style:{borderColor:o,color:o},children:"Secondary Button"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Side Menu Preview"}),e.jsx("div",{className:"w-full h-20 rounded-md flex items-center justify-center text-sm",style:{backgroundColor:j?"var(--background)":p,color:j||p&&j7(p)?"var(--foreground)":"white",border:j?"1px dashed var(--border)":"none"},children:"Side Menu Background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Portal Preview"}),e.jsxs("div",{className:"border rounded-md p-4 bg-muted/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[S&&e.jsx("img",{src:S,alt:"Portal Logo",className:"w-8 h-8 object-contain"}),e.jsx("h5",{className:"font-semibold",children:v||"Customer Portal"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This is how your client portal header will appear"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:L,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Branding"]})})})]})]})}function GY(){var x,f;const{tenant:t,updateTenant:s}=kn(),{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState("general"),[o,c]=y.useState(((x=t==null?void 0:t.settings)==null?void 0:x.labelOverrides)||{}),[d,u]=y.useState(((f=t==null?void 0:t.settings)==null?void 0:f.platformType)||"both"),m=vr.labelOverrides.defaultLabels,h=(g,v,w)=>{c({...o,[`${g}.${v}`]:w})},p=(g,v)=>o[`${g}.${v}`]||"",b=g=>{const v={...o};Object.keys(v).forEach(w=>{w.startsWith(`${g}.`)&&delete v[w]}),c(v),r({title:"Labels Reset",description:`Default labels restored for ${g} module.`})},j=async()=>{a(!0);try{await s({settings:{...t==null?void 0:t.settings,labelOverrides:o,platformType:d}}),r({title:"Labels Updated",description:"Your label overrides have been saved successfully."})}catch{r({title:"Error",description:"Failed to update label overrides.",variant:"destructive"})}finally{a(!1)}};return e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Ih,{className:"h-5 w-5 mr-2 text-primary"}),"Label Overrides"]}),e.jsx(Ee,{children:"Customize terminology throughout the platform"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"platformType",children:"Platform Type"}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select platform type"})}),e.jsx($e,{children:vr.labelOverrides.platformTypes.map(g=>e.jsx(J,{value:g.value,children:g.label},g.value))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This setting affects terminology and features throughout the platform"})]}),e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-4",children:[e.jsxs(ds,{className:"grid grid-cols-5",children:[e.jsx(Ye,{value:"general",children:"General"}),e.jsx(Ye,{value:"crm",children:"CRM"}),e.jsx(Ye,{value:"inventory",children:"Inventory"}),e.jsx(Ye,{value:"sales",children:"Sales"}),e.jsx(Ye,{value:"service",children:"Service"})]}),Object.entries(m).map(([g,v])=>e.jsxs(Je,{value:g,className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold capitalize",children:[g," Labels"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>b(g),children:[e.jsx(MA,{className:"h-3 w-3 mr-2"}),"Reset to Defaults"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(v).map(([w,k])=>{let T=k;return w==="vehicle"&&(d==="rv"?T="RV":d==="mh"?T="Home":T="Home/RV"),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:`${g}-${w}`,className:"capitalize",children:w.replace(/_/g," ")}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(ge,{id:`${g}-${w}`,value:p(g,w),onChange:S=>h(g,w,S.target.value),placeholder:T,className:"shadow-sm"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",e.jsx("span",{className:"font-medium",children:T})]})]},w)})})]},g))]}),e.jsxs("div",{className:"border rounded-lg p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm",children:"Here's how your customized labels will appear in the application:"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(m.general).map(([g,v])=>{const w=p("general",g);let T=w||v;return g==="vehicle"&&!w&&(d==="rv"?T="RV":d==="mh"?T="Home":T="Home/RV"),e.jsxs("div",{className:"p-2 bg-muted/30 rounded-md",children:[e.jsxs("span",{className:"font-medium capitalize",children:[g.replace(/_/g," "),":"]})," ",e.jsx("span",{children:T})]},g)})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:j,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Labels"]})})})]})]})}function KY(){var Se,he;const{tenant:t,updateTenant:s}=kn(),{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState("email"),[o,c]=y.useState(((Se=t==null?void 0:t.settings)==null?void 0:Se.emailTemplates)||[]),[d,u]=y.useState(null),[m,h]=y.useState(""),[p,b]=y.useState(""),[j,x]=y.useState(""),[f,g]=y.useState("welcome"),[v,w]=y.useState(((he=t==null?void 0:t.settings)==null?void 0:he.smsTemplates)||[]),[k,T]=y.useState(null),[S,C]=y.useState(""),[E,M]=y.useState(""),[D,A]=y.useState("welcome"),[I,L]=y.useState(!1),[F,B]=y.useState("email"),[R,$]=y.useState(null),U=vr.notifications.emailTypes,W=vr.notifications.smsTypes,q=vr.notifications.commonVariables,_=()=>{u(null),h(""),b(""),x(""),g("welcome")},V=()=>{T(null),C(""),M(""),A("welcome")},Q=ke=>{u(ke),h(ke.name),b(ke.subject),x(ke.body),g(ke.type)},G=ke=>{T(ke),C(ke.name),M(ke.message),A(ke.type)},Y=()=>{if(!m||!p||!j){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const ke=/\{\{([^}]+)\}\}/g,xe=[];let Pe;for(;(Pe=ke.exec(p+j))!==null;)xe.includes(Pe[1])||xe.push(Pe[1]);c(d?o.map(qe=>qe.id===d.id?{...qe,name:m,subject:p,body:j,type:f,variables:xe}:qe):[...o,{id:Math.random().toString(36).substring(2,9),name:m,subject:p,body:j,type:f,variables:xe,isActive:!0}]),_()},ne=()=>{if(!S||!E){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const ke=/\{\{([^}]+)\}\}/g,xe=[];let Pe;for(;(Pe=ke.exec(E))!==null;)xe.includes(Pe[1])||xe.push(Pe[1]);w(k?v.map(qe=>qe.id===k.id?{...qe,name:S,message:E,type:D,variables:xe}:qe):[...v,{id:Math.random().toString(36).substring(2,9),name:S,message:E,type:D,variables:xe,isActive:!0}]),V()},le=ke=>{c(o.filter(xe=>xe.id!==ke))},oe=ke=>{w(v.filter(xe=>xe.id!==ke))},pe=ke=>{c(o.map(xe=>xe.id===ke?{...xe,isActive:!xe.isActive}:xe))},je=ke=>{w(v.map(xe=>xe.id===ke?{...xe,isActive:!xe.isActive}:xe))},we=(ke,xe)=>{B(ke),$(xe),L(!0)},Re=ke=>{i==="email"?x(j+ke):M(E+ke)},ye=async()=>{a(!0);try{await s({settings:{...t==null?void 0:t.settings,emailTemplates:o,smsTemplates:v}}),r({title:"Templates Updated",description:"Your notification templates have been saved successfully."})}catch{r({title:"Error",description:"Failed to update notification templates.",variant:"destructive"})}finally{a(!1)}};return e.jsxs(e.Fragment,{children:[I&&R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Template Preview"}),e.jsx(Ee,{children:R.name})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>L(!1),children:e.jsx(X,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-4",children:[F==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Subject"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:R.subject})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Body"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1 whitespace-pre-wrap",children:R.body})]})]}),F==="sms"&&e.jsxs("div",{children:[e.jsx(Z,{children:"Message"}),e.jsx("div",{className:"p-3 bg-muted/30 rounded-md mt-1",children:R.message})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Variables"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[R.variables.map((ke,xe)=>e.jsx(Ae,{variant:"secondary",children:`{{${ke}}}`},xe)),R.variables.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No variables used"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:()=>L(!1),children:"Close Preview"})})]})]})}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Sr,{className:"h-5 w-5 mr-2 text-primary"}),"Notification Templates"]}),e.jsx(Ee,{children:"Customize email and SMS notification templates"})]}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-4",children:[e.jsxs(ds,{className:"grid w-full grid-cols-2",children:[e.jsx(Ye,{value:"email",children:"Email Templates"}),e.jsx(Ye,{value:"sms",children:"SMS Templates"})]}),e.jsx(Je,{value:"email",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Email Templates"}),e.jsxs(H,{variant:"outline",size:"sm",onClick:_,disabled:!d,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailName",children:"Template Name *"}),e.jsx(ge,{id:"emailName",value:m,onChange:ke=>h(ke.target.value),placeholder:"e.g., Welcome Email",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailType",children:"Template Type"}),e.jsxs(Be,{value:f,onValueChange:g,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select template type"})}),e.jsx($e,{children:U.map(ke=>e.jsx(J,{value:ke.value,children:ke.label},ke.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailSubject",children:"Subject Line *"}),e.jsx(ge,{id:"emailSubject",value:p,onChange:ke=>b(ke.target.value),placeholder:"e.g., Welcome to {{company_name}}!",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Z,{htmlFor:"emailBody",children:"Email Body *"}),e.jsxs(Be,{value:"",onValueChange:ke=>Re(ke),children:[e.jsx(Oe,{className:"w-[200px] shadow-sm",children:e.jsx(ze,{placeholder:"Insert variable"})}),e.jsx($e,{children:q.map(ke=>e.jsx(J,{value:ke,children:ke},ke))})]})]}),e.jsx(kt,{id:"emailBody",value:j,onChange:ke=>x(ke.target.value),placeholder:"Enter your email content here...",className:"shadow-sm",rows:10})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:_,children:"Cancel"}),e.jsx(H,{type:"button",onClick:Y,children:d?"Update Template":"Add Template"})]})]})}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),o.length>0?o.map(ke=>{var xe;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:ke.name}),e.jsx(Ae,{variant:"outline",children:((xe=U.find(Pe=>Pe.value===ke.type))==null?void 0:xe.label)||ke.type}),!ke.isActive&&e.jsx(Ae,{variant:"secondary",children:"Inactive"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Subject: ",ke.subject]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>pe(ke.id),children:ke.isActive?"Disable":"Enable"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>we("email",ke),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Q(ke),children:"Edit"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>le(ke.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},ke.id)}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Sr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No email templates created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})}),e.jsx(Je,{value:"sms",className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"SMS Templates"}),e.jsxs(H,{variant:"outline",size:"sm",onClick:V,disabled:!k,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Template"]})]}),e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"smsName",children:"Template Name *"}),e.jsx(ge,{id:"smsName",value:S,onChange:ke=>C(ke.target.value),placeholder:"e.g., Appointment Reminder",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"smsType",children:"Template Type"}),e.jsxs(Be,{value:D,onValueChange:A,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select template type"})}),e.jsx($e,{children:W.map(ke=>e.jsx(J,{value:ke.value,children:ke.label},ke.value))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Z,{htmlFor:"smsMessage",children:"Message *"}),e.jsxs(Be,{value:"",onValueChange:ke=>Re(ke),children:[e.jsx(Oe,{className:"w-[200px] shadow-sm",children:e.jsx(ze,{placeholder:"Insert variable"})}),e.jsx($e,{children:q.map(ke=>e.jsx(J,{value:ke,children:ke},ke))})]})]}),e.jsx(kt,{id:"smsMessage",value:E,onChange:ke=>M(ke.target.value),placeholder:"Enter your SMS message here...",className:"shadow-sm",rows:4}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsxs("span",{children:[E.length," characters"]}),e.jsxs("span",{children:[160-E.length," remaining"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),e.jsx(H,{type:"button",onClick:ne,children:k?"Update Template":"Add Template"})]})]})}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Saved Templates"}),v.length>0?v.map(ke=>{var xe;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:ke.name}),e.jsx(Ae,{variant:"outline",children:((xe=W.find(Pe=>Pe.value===ke.type))==null?void 0:xe.label)||ke.type}),!ke.isActive&&e.jsx(Ae,{variant:"secondary",children:"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 truncate",children:ke.message})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>je(ke.id),children:ke.isActive?"Disable":"Enable"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>we("sms",ke),children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>G(ke),children:"Edit"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>oe(ke.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]})]},ke.id)}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(sr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No SMS templates created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:ye,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Templates"]})})})]})]})]})}function YY(){var ne,le,oe,pe,je,we,Re,ye,Se,he,ke;const{tenant:t,updateTenant:s}=kn(),{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState(((ne=t==null?void 0:t.settings)==null?void 0:ne.emailProvider)||"default"),[o,c]=y.useState(((le=t==null?void 0:t.settings)==null?void 0:le.emailApiKey)||""),[d,u]=y.useState(((oe=t==null?void 0:t.settings)==null?void 0:oe.emailFromAddress)||""),[m,h]=y.useState(((pe=t==null?void 0:t.settings)==null?void 0:pe.emailFromName)||""),[p,b]=y.useState(((je=t==null?void 0:t.settings)==null?void 0:je.smsProvider)||"default"),[j,x]=y.useState(((we=t==null?void 0:t.settings)==null?void 0:we.smsApiKey)||""),[f,g]=y.useState(((Re=t==null?void 0:t.settings)==null?void 0:Re.smsFromNumber)||""),[v,w]=y.useState(((ye=t==null?void 0:t.settings)==null?void 0:ye.webhooks)||[]),[k,T]=y.useState(""),[S,C]=y.useState(""),[E,M]=y.useState(((Se=t==null?void 0:t.settings)==null?void 0:Se.apiEnabled)||!1),[D,A]=y.useState(((he=t==null?void 0:t.settings)==null?void 0:he.apiKey)||""),[I,L]=y.useState(((ke=t==null?void 0:t.settings)==null?void 0:ke.allowedOrigins)||[]),[F,B]=y.useState(""),R=vr.integrations.emailProviders,$=vr.integrations.smsProviders,U=vr.integrations.webhookEvents,W=()=>{!k||!S||(w([...v,{id:Math.random().toString(36).substring(2,9),event:k,url:S,active:!0}]),T(""),C(""))},q=xe=>{w(v.filter(Pe=>Pe.id!==xe))},_=xe=>{w(v.map(Pe=>Pe.id===xe?{...Pe,active:!Pe.active}:Pe))},V=()=>{F&&(L([...I,F]),B(""))},Q=xe=>{L(I.filter(Pe=>Pe!==xe))},G=()=>{const xe=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(Pe=>Pe.toString(16).padStart(2,"0")).join("");A(xe)},Y=async()=>{a(!0);try{await s({settings:{...t==null?void 0:t.settings,emailProvider:i,emailApiKey:o,emailFromAddress:d,emailFromName:m,smsProvider:p,smsApiKey:j,smsFromNumber:f,webhooks:v,apiEnabled:E,apiKey:D,allowedOrigins:I}}),r({title:"Integrations Updated",description:"Your integration settings have been saved successfully."})}catch{r({title:"Error",description:"Failed to update integration settings.",variant:"destructive"})}finally{a(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Sr,{className:"h-5 w-5 mr-2 text-primary"}),"Email Provider"]}),e.jsx(Ee,{children:"Configure your email delivery service"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailProvider",children:"Provider"}),e.jsxs(Be,{value:i,onValueChange:l,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select email provider"})}),e.jsx($e,{children:R.map(xe=>e.jsx(J,{value:xe.value,children:xe.label},xe.value))})]})]}),i!=="default"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailApiKey",children:"API Key"}),e.jsx(ge,{id:"emailApiKey",type:"password",value:o,onChange:xe=>c(xe.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailFromAddress",children:"From Email Address"}),e.jsx(ge,{id:"emailFromAddress",type:"email",value:d,onChange:xe=>u(xe.target.value),className:"shadow-sm",placeholder:"noreply@yourdomain.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"emailFromName",children:"From Name"}),e.jsx(ge,{id:"emailFromName",value:m,onChange:xe=>h(xe.target.value),className:"shadow-sm",placeholder:"Your Company Name"})]})]})]}),i==="default"&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform email provider. No additional configuration needed."})})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(sr,{className:"h-5 w-5 mr-2 text-primary"}),"SMS Provider"]}),e.jsx(Ee,{children:"Configure your SMS delivery service"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"smsProvider",children:"Provider"}),e.jsxs(Be,{value:p,onValueChange:b,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select SMS provider"})}),e.jsx($e,{children:$.map(xe=>e.jsx(J,{value:xe.value,children:xe.label},xe.value))})]})]}),p!=="default"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"smsApiKey",children:"API Key"}),e.jsx(ge,{id:"smsApiKey",type:"password",value:j,onChange:xe=>x(xe.target.value),className:"shadow-sm",placeholder:"Enter API key"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"smsFromNumber",children:"From Number"}),e.jsx(ge,{id:"smsFromNumber",value:f,onChange:xe=>g(xe.target.value),className:"shadow-sm",placeholder:"+1234567890"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be in E.164 format (e.g., +1234567890)"})]})]}),p==="default"&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Using the default platform SMS provider. No additional configuration needed."})})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Yw,{className:"h-5 w-5 mr-2 text-primary"}),"Webhooks"]}),e.jsx(Ee,{children:"Configure webhooks to receive event notifications"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"webhookEvent",children:"Event"}),e.jsxs(Be,{value:k,onValueChange:T,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select event"})}),e.jsx($e,{children:U.map(xe=>e.jsx(J,{value:xe.value,children:xe.label},xe.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"webhookUrl",children:"Webhook URL"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{id:"webhookUrl",value:S,onChange:xe=>C(xe.target.value),className:"shadow-sm flex-1",placeholder:"https://your-endpoint.com/webhook"}),e.jsx(H,{type:"button",onClick:W,children:e.jsx(tt,{className:"h-4 w-4"})})]})]})]}),e.jsx("div",{className:"space-y-3 mt-4",children:v.length>0?v.map(xe=>{var Pe;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ct,{checked:xe.active,onCheckedChange:()=>_(xe.id)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((Pe=U.find(qe=>qe.value===xe.event))==null?void 0:Pe.label)||xe.event}),e.jsx("div",{className:"text-sm text-muted-foreground",children:xe.url})]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>q(xe.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]},xe.id)}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Yw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No webhooks configured"}),e.jsx("p",{className:"text-sm",children:"Add webhooks to receive event notifications"})]})})]})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(F2,{className:"h-5 w-5 mr-2 text-primary"}),"API Access"]}),e.jsx(Ee,{children:"Configure API access for external integrations"})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"apiEnabled",checked:E,onCheckedChange:xe=>M(!!xe)}),e.jsx(Z,{htmlFor:"apiEnabled",children:"Enable API access"})]}),E&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"apiKey",children:"API Key"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{id:"apiKey",type:"password",value:D,onChange:xe=>A(xe.target.value),className:"shadow-sm flex-1",placeholder:"API key will appear here",readOnly:!0}),e.jsx(H,{type:"button",onClick:G,children:"Generate"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep this key secure. It provides full access to your account."})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"allowedOrigins",children:"Allowed Origins (CORS)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{id:"allowedOrigins",value:F,onChange:xe=>B(xe.target.value),className:"shadow-sm flex-1",placeholder:"https://your-domain.com"}),e.jsx(H,{type:"button",onClick:V,children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Domains that are allowed to make API requests"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[I.map((xe,Pe)=>e.jsxs("div",{className:"flex items-center bg-muted/50 px-3 py-1 rounded-md",children:[e.jsx("span",{className:"mr-2",children:xe}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>Q(xe),children:e.jsx(js,{className:"h-3 w-3"})})]},Pe)),I.length===0&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No origins added yet"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{onClick:Y,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Integrations"]})})})]})}function QY({settings:t,onSettingsChange:s}){var d,u,m,h,p,b,j,x,f,g,v,w,k,T,S,C,E,M,D,A;const[r,n]=y.useState((t==null?void 0:t.warranty)||{companyInfo:{dealershipName:"",contactPerson:"",contactEmail:"",contactPhone:"",dealerNumber:""},customManufacturers:[],approvalWorkflow:{requireManagerApproval:!1,managerApprovalThreshold:1e3,autoApproveUnder:250},emailTemplates:{claimSubmissionTemplate:"",approvalNotificationTemplate:"",denialNotificationTemplate:""},preferences:{defaultApprovalTimeout:72,enableAutomaticFollowup:!0,followupInterval:24}}),[a,i]=y.useState({name:"",contactEmail:"",approvalThreshold:500}),l=(I,L)=>{const F=I.split("."),B={...r};let R=B;for(let $=0;$<F.length-1;$++)R[F[$]]||(R[F[$]]={}),R=R[F[$]];R[F[F.length-1]]=L,n(B),s({...t,warranty:B})},o=()=>{if(a.name.trim()){const I=r.customManufacturers||[],L={...a,id:`custom-${Date.now()}`,isCustom:!0};l("customManufacturers",[...I,L]),i({name:"",contactEmail:"",approvalThreshold:500})}},c=I=>{const F=(r.customManufacturers||[]).filter((B,R)=>R!==I);l("customManufacturers",F)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oc,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Company Warranty Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure your company's warranty service tracking and manufacturer relationships."}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(Il,{className:"w-4 h-4"}),e.jsx("span",{children:"Company Information"})]}),e.jsx(Ee,{children:"Your dealership information for warranty communications."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Dealership Name"}),e.jsx(ge,{value:((d=r.companyInfo)==null?void 0:d.dealershipName)||"",onChange:I=>l("companyInfo.dealershipName",I.target.value),placeholder:"Your Dealership Name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Dealer Number"}),e.jsx(ge,{value:((u=r.companyInfo)==null?void 0:u.dealerNumber)||"",onChange:I=>l("companyInfo.dealerNumber",I.target.value),placeholder:"Dealer ID/Number"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Person"}),e.jsx(ge,{value:((m=r.companyInfo)==null?void 0:m.contactPerson)||"",onChange:I=>l("companyInfo.contactPerson",I.target.value),placeholder:"Primary warranty contact"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Email"}),e.jsx(ge,{type:"email",value:((h=r.companyInfo)==null?void 0:h.contactEmail)||"",onChange:I=>l("companyInfo.contactEmail",I.target.value),placeholder:"warranty@yourcompany.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Phone"}),e.jsx(ge,{value:((p=r.companyInfo)==null?void 0:p.contactPhone)||"",onChange:I=>l("companyInfo.contactPhone",I.target.value),placeholder:"(555) 123-4567",className:"w-64"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(Ks,{className:"w-4 h-4"}),e.jsx("span",{children:"Custom Manufacturers"})]}),e.jsx(Ee,{children:"Add manufacturers specific to your dealership beyond the platform defaults."})]}),e.jsxs(te,{className:"space-y-4",children:[(r.customManufacturers||[]).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Your Custom Manufacturers"}),e.jsx("div",{className:"space-y-2",children:r.customManufacturers.map((I,L)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:I.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[I.contactEmail," • Threshold: $",I.approvalThreshold]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>c(L),className:"text-red-600 hover:text-red-700",children:e.jsx(St,{className:"w-4 h-4"})})]},L))})]}),e.jsx(Vc,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Add New Manufacturer"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(ge,{placeholder:"Manufacturer name",value:a.name,onChange:I=>i({...a,name:I.target.value})}),e.jsx(ge,{placeholder:"Contact email",type:"email",value:a.contactEmail,onChange:I=>i({...a,contactEmail:I.target.value})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{placeholder:"Threshold",type:"number",value:a.approvalThreshold,onChange:I=>i({...a,approvalThreshold:parseInt(I.target.value)})}),e.jsx(H,{onClick:o,size:"sm",children:e.jsx(tt,{className:"w-4 h-4"})})]})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(wn,{className:"w-4 h-4"}),e.jsx("span",{children:"Approval Workflow"})]}),e.jsx(Ee,{children:"Configure internal approval requirements for warranty claims."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Require Manager Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Internal approval required before submitting to manufacturer"})]}),e.jsx(xr,{checked:(b=r.approvalWorkflow)==null?void 0:b.requireManagerApproval,onCheckedChange:I=>l("approvalWorkflow.requireManagerApproval",I)})]}),((j=r.approvalWorkflow)==null?void 0:j.requireManagerApproval)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Manager Approval Threshold"}),e.jsx(ge,{type:"number",value:((x=r.approvalWorkflow)==null?void 0:x.managerApprovalThreshold)||1e3,onChange:I=>l("approvalWorkflow.managerApprovalThreshold",parseInt(I.target.value)),className:"w-32"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Claims above this amount require manager approval"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Auto-Approve Under"}),e.jsx(ge,{type:"number",value:((f=r.approvalWorkflow)==null?void 0:f.autoApproveUnder)||250,onChange:I=>l("approvalWorkflow.autoApproveUnder",parseInt(I.target.value)),className:"w-32"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically approve claims under this amount"})]})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(Sr,{className:"w-4 h-4"}),e.jsx("span",{children:"Email Templates"})]}),e.jsx(Ee,{children:"Customize email templates for warranty communications."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Claim Submission Template"}),e.jsx(kt,{value:((g=r.emailTemplates)==null?void 0:g.claimSubmissionTemplate)||"",onChange:I=>l("emailTemplates.claimSubmissionTemplate",I.target.value),placeholder:"Template for submitting claims to manufacturers...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Approval Notification Template"}),e.jsx(kt,{value:((v=r.emailTemplates)==null?void 0:v.approvalNotificationTemplate)||"",onChange:I=>l("emailTemplates.approvalNotificationTemplate",I.target.value),placeholder:"Template for notifying when claims are approved...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Denial Notification Template"}),e.jsx(kt,{value:((w=r.emailTemplates)==null?void 0:w.denialNotificationTemplate)||"",onChange:I=>l("emailTemplates.denialNotificationTemplate",I.target.value),placeholder:"Template for notifying when claims are denied...",rows:3})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(Ir,{className:"w-4 h-4"}),e.jsx("span",{children:"Workflow Preferences"})]}),e.jsx(Ee,{children:"Configure timing and automation preferences."})]}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Approval Timeout (hours)"}),e.jsx(ge,{type:"number",value:((k=r.preferences)==null?void 0:k.defaultApprovalTimeout)||72,onChange:I=>l("preferences.defaultApprovalTimeout",parseInt(I.target.value)),className:"w-32"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long to wait for manufacturer response before follow-up"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{children:"Enable Automatic Follow-up"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Automatically send follow-up emails for overdue claims"})]}),e.jsx(xr,{checked:(T=r.preferences)==null?void 0:T.enableAutomaticFollowup,onCheckedChange:I=>l("preferences.enableAutomaticFollowup",I)})]}),((S=r.preferences)==null?void 0:S.enableAutomaticFollowup)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Follow-up Interval (hours)"}),e.jsx(ge,{type:"number",value:((C=r.preferences)==null?void 0:C.followupInterval)||24,onChange:I=>l("preferences.followupInterval",parseInt(I.target.value)),className:"w-32"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How often to send follow-up reminders"})]})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs(de,{className:"flex items-center space-x-2",children:[e.jsx(_t,{className:"w-4 h-4"}),e.jsx("span",{children:"Configuration Status"})]})}),e.jsx(te,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[(E=r.companyInfo)!=null&&E.dealershipName&&((M=r.companyInfo)!=null&&M.contactEmail)?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Company Information"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(r.customManufacturers||[]).length>0?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:"Custom Manufacturers"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(D=r.emailTemplates)!=null&&D.claimSubmissionTemplate?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Email Templates"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(A=r.preferences)!=null&&A.defaultApprovalTimeout?e.jsx(_t,{className:"w-4 h-4 text-green-600"}):e.jsx(Ir,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm",children:"Workflow Preferences"})]})]})})]})]})}function SS(){var q,_;const{tenant:t,getCustomFields:s,updateTenant:r,addCustomField:n,updateCustomField:a,deleteCustomField:i}=kn(),{toast:l}=xt(),[o,c]=y.useState("general"),[d,u]=y.useState(!1),[m,h]=y.useState(null),[p,b]=y.useState(!1),[j,x]=y.useState((t==null?void 0:t.name)||""),[f,g]=y.useState((t==null?void 0:t.domain)||""),[v,w]=y.useState(((q=t==null?void 0:t.settings)==null?void 0:q.timezone)||""),[k,T]=y.useState(((_=t==null?void 0:t.settings)==null?void 0:_.currency)||""),S=[{id:"general",name:"General",icon:Il},{id:"branding",name:"Branding",icon:FA},{id:"labels",name:"Labels",icon:Ih},{id:"notifications",name:"Notifications",icon:Sr},{id:"integrations",name:"Integrations",icon:F2},{id:"users",name:"Users",icon:Ks},{id:"custom-fields",name:"Custom Fields",icon:wn},{id:"warranty",name:"Warranty",icon:wn}],C=vr.customFields.modules,E=(t==null?void 0:t.customFields)||[];vt.useEffect(()=>{var V,Q;t&&(x(t.name),g(t.domain),w(((V=t.settings)==null?void 0:V.timezone)||""),T(((Q=t.settings)==null?void 0:Q.currency)||""))},[t]);const M=()=>{h(null),u(!0)},D=V=>{h(V),u(!0)},A=async V=>{if(window.confirm("Are you sure you want to delete this custom field?"))try{await i(V),l({title:"Success",description:"Custom field deleted successfully"})}catch{l({title:"Error",description:"Failed to delete custom field",variant:"destructive"})}},I=async V=>{try{return m?await a(m.id,V):await n(V),u(!1),!0}catch{return!1}},L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Company Information"}),e.jsx(Ee,{children:"Basic information about your dealership"})]}),e.jsx(te,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Company Name"}),e.jsx(ge,{value:j,onChange:V=>x(V.target.value),className:"mt-1 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Domain"}),e.jsx(ge,{value:f,onChange:V=>g(V.target.value),className:"mt-1 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Timezone"}),e.jsx(ge,{value:v,onChange:V=>w(V.target.value),className:"mt-1 shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Currency"}),e.jsx(ge,{value:k,onChange:V=>T(V.target.value),className:"mt-1 shadow-sm"})]})]})})]}),e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"Business Hours"}),e.jsx(Ee,{children:"Set your dealership operating hours"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:(t==null?void 0:t.settings.businessHours)&&Object.entries(t.settings.businessHours).map(([V,Q])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"w-24 capitalize font-medium",children:V}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{type:"time",defaultValue:Q.open,disabled:Q.closed,className:"w-32 shadow-sm"}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsx(ge,{type:"time",defaultValue:Q.close,disabled:Q.closed,className:"w-32 shadow-sm"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:Q.closed,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Closed"})]})]})]},V))})})]})]}),F=()=>e.jsx(WY,{}),B=()=>e.jsx(GY,{}),R=()=>e.jsx(KY,{}),$=()=>e.jsx(YY,{}),U=()=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-xl",children:"User Management"}),e.jsx(Ee,{children:"Manage user accounts and permissions"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users, roles, and permissions for your dealership"}),e.jsxs(H,{className:"shadow-sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Admin User"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"admin@renterinsight.com"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:"bg-blue-50 text-blue-700 border-blue-200",children:"Admin"}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",children:e.jsx(ts,{className:"h-3 w-3"})})]})]})})]})]}),W=()=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:"Custom Fields"}),e.jsx(Ee,{children:"Add custom fields to capture additional information"})]}),e.jsxs(H,{className:"shadow-sm",onClick:M,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[E.map(V=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:V.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[V.module," - ",V.section," - ",V.type,V.required&&e.jsx(Ae,{className:"ml-2 bg-orange-50 text-orange-700 border-orange-200",variant:"secondary",children:"Required"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>D(V),children:"Edit"}),e.jsx(H,{variant:"outline",size:"sm",className:"shadow-sm",onClick:()=>A(V.id),children:"Delete"})]})]},V.id)),E.length===0&&e.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/30 rounded-lg",children:"No custom fields configured yet"})]})})]});return e.jsxs("div",{className:"space-y-8",children:[d&&e.jsx(HY,{field:m||void 0,onSave:I,onCancel:()=>u(!1),modules:C}),e.jsx("div",{className:"ri-page-header",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Company Settings"}),e.jsx("p",{className:"ri-page-description",children:"Configure your dealership settings and preferences"})]})})}),e.jsx("div",{className:"border-b",children:e.jsx("nav",{className:"-mb-px flex flex-wrap space-x-4 md:space-x-8",children:S.map(V=>e.jsxs("button",{onClick:()=>c(V.id),className:Ge("flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm transition-colors",o===V.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"),children:[e.jsx(V.icon,{className:"h-4 w-4"}),e.jsx("span",{children:V.name})]},V.id))})}),e.jsxs("div",{children:[o==="general"&&L(),o==="branding"&&F(),o==="labels"&&B(),o==="notifications"&&R(),o==="integrations"&&$(),o==="users"&&U(),o==="custom-fields"&&W(),o==="warranty"&&e.jsx(QY,{})]})]},(t==null?void 0:t.updatedAt)||(t==null?void 0:t.id))}function ZY(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(SS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(SS,{})})]})}const xo={defaultPermissions:{crm:{read:!0,write:!0,delete:!1},inventory:{read:!0,write:!0,delete:!1},quotes:{read:!0,write:!0,delete:!1},agreements:{read:!0,write:!1,delete:!1},service:{read:!0,write:!0,delete:!1},delivery:{read:!0,write:!0,delete:!1},commissions:{read:!0,write:!1,delete:!1},portal:{read:!0,write:!1,delete:!1},invoices:{read:!0,write:!0,delete:!1},reports:{read:!0,write:!1,delete:!1}},sampleTenants:[{id:"tenant-001",name:"Sunshine RV Dealership",domain:"sunshine-rv.renterinsight.com",platformType:"RV",status:"Active",createdAt:"2023-06-15T10:30:00Z",lastActivity:"2024-01-20T14:22:00Z",userCount:12,storageUsed:1.2,monthlyApiCalls:45e3,subscription:{plan:"Professional",status:"Active",nextBilling:"2024-02-15T00:00:00Z",amount:299},settings:{timezone:"America/New_York",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!0,service:!0,delivery:!0,commissions:!0,portal:!0,invoices:!0,reports:!0}},auditTrail:[{id:"audit-001",timestamp:"2024-01-20T14:22:00Z",action:"User Login",user:"admin@sunshine-rv.com",details:"Successful login from IP 192.168.1.100",module:"Authentication"},{id:"audit-002",timestamp:"2024-01-20T13:45:00Z",action:"Lead Created",user:"sales@sunshine-rv.com",details:"New lead: John Smith - Website inquiry",module:"CRM"},{id:"audit-003",timestamp:"2024-01-20T12:30:00Z",action:"Quote Generated",user:"sales@sunshine-rv.com",details:"Quote Q-2024-001 generated for customer ID: cust-123",module:"Quotes"},{id:"audit-004",timestamp:"2024-01-20T11:15:00Z",action:"Settings Updated",user:"admin@sunshine-rv.com",details:"Updated business hours configuration",module:"Settings"}]},{id:"tenant-002",name:"Mountain View Manufactured Homes",domain:"mountainview-mh.renterinsight.com",platformType:"MH",status:"Active",createdAt:"2023-08-22T09:15:00Z",lastActivity:"2024-01-19T16:45:00Z",userCount:8,storageUsed:.8,monthlyApiCalls:28e3,subscription:{plan:"Standard",status:"Active",nextBilling:"2024-02-22T00:00:00Z",amount:199},settings:{timezone:"America/Denver",currency:"USD",features:{crm:!0,inventory:!0,quotes:!0,agreements:!1,service:!0,delivery:!0,commissions:!1,portal:!1,invoices:!0,reports:!0}},auditTrail:[{id:"audit-005",timestamp:"2024-01-19T16:45:00Z",action:"Inventory Updated",user:"manager@mountainview-mh.com",details:"Added new manufactured home: Stock #MH-2024-001",module:"Inventory"},{id:"audit-006",timestamp:"2024-01-19T15:20:00Z",action:"Service Ticket Created",user:"service@mountainview-mh.com",details:"Service ticket ST-001 created for customer maintenance",module:"Service"}]}],platformTypes:[{value:"RV",label:"RV Dealership"},{value:"MH",label:"Manufactured Housing"},{value:"RV & MH",label:"RV & Manufactured Housing"},{value:"Auto",label:"Auto Dealership"}]};function JY({onClose:t}){const{toast:s}=xt(),[r,n]=y.useState(!1),[a,i]=y.useState(""),[l,o]=y.useState(""),[c,d]=y.useState(xo.platformTypes[0].value),[u,m]=y.useState(""),[h,p]=y.useState(""),[b,j]=y.useState({});vt.useEffect(()=>{j(Object.keys(xo.defaultPermissions).reduce((v,w)=>(v[w]=xo.defaultPermissions[w].read,v),{}))},[]);const x=Object.keys(xo.defaultPermissions).map(v=>({key:v,label:v.charAt(0).toUpperCase()+v.slice(1).replace(/([A-Z])/g," $1")})),f=v=>{j(w=>({...w,[v]:!w[v]}))},g=async v=>{if(v.preventDefault(),!a||!l||!u||!h){s({title:"Validation Error",description:"All fields are required",variant:"destructive"});return}n(!0);try{await new Promise(w=>setTimeout(w,2e3)),s({title:"Success",description:"Tenant created successfully"}),t()}catch{s({title:"Error",description:"Failed to create tenant",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(Il,{className:"h-5 w-5 mr-2 text-primary"}),"Add New Tenant"]}),e.jsx(Ee,{children:"Create a new tenant with admin user and feature permissions"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsx(te,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"tenantName",children:"Tenant Name *"}),e.jsx(ge,{id:"tenantName",value:a,onChange:v=>i(v.target.value),placeholder:"e.g., Sunshine RV Dealership",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"domain",children:"Domain *"}),e.jsx(ge,{id:"domain",value:l,onChange:v=>o(v.target.value),placeholder:"e.g., sunshine-rv",className:"shadow-sm"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Will create: ",l||"your-domain",".renterinsight.com"]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"platformType",children:"Platform Type *"}),e.jsxs(Be,{value:c,onValueChange:d,children:[e.jsx(Oe,{className:"shadow-sm",children:e.jsx(ze,{placeholder:"Select platform type"})}),e.jsx($e,{children:xo.platformTypes.map(v=>e.jsx(J,{value:v.value,children:v.label},v.value))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Admin User"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"adminName",children:"Admin Name *"}),e.jsx(ge,{id:"adminName",value:h,onChange:v=>p(v.target.value),placeholder:"e.g., John Smith",className:"shadow-sm"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"adminEmail",children:"Admin Email *"}),e.jsx(ge,{id:"adminEmail",type:"email",value:u,onChange:v=>m(v.target.value),placeholder:"e.g., admin@sunshine-rv.com",className:"shadow-sm"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Enabled Features"}),e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:x.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`feature-${v.key}`,checked:b[v.key]||!1,onCheckedChange:()=>f(v.key)}),e.jsx(Z,{htmlFor:`feature-${v.key}`,className:"text-sm",children:v.label})]},v.key))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(H,{type:"button",variant:"outline",onClick:t,disabled:r,children:"Cancel"}),e.jsx(H,{type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Create Tenant"]})})]})]})})]})})}function XY({tenantId:t,onClose:s}){var d;const{toast:r}=xt(),[n,a]=y.useState(!1),i=xo.sampleTenants.find(u=>u.id===t)||xo.sampleTenants[0],l=async()=>{a(!0);try{await new Promise(u=>setTimeout(u,1e3)),r({title:"Tenant Suspended",description:`${i.name} has been suspended successfully.`})}catch{r({title:"Error",description:"Failed to suspend tenant",variant:"destructive"})}finally{a(!1)}},o=async()=>{if(confirm("Are you sure you want to delete this tenant? This action cannot be undone.")){a(!0);try{await new Promise(u=>setTimeout(u,1e3)),r({title:"Tenant Deleted",description:`${i.name} has been deleted successfully.`}),s()}catch{r({title:"Error",description:"Failed to delete tenant",variant:"destructive"})}finally{a(!1)}}},c=u=>{switch(u.toLowerCase()){case"active":return"bg-green-50 text-green-700 border-green-200";case"inactive":return"bg-gray-50 text-gray-700 border-gray-200";case"suspended":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold",children:i.name}),e.jsx(Ae,{className:c(i.status),children:i.status.toUpperCase()})]}),e.jsx("p",{className:"text-muted-foreground",children:i.domain})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:l,disabled:n,children:[e.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Suspend"]}),e.jsxs(H,{variant:"destructive",size:"sm",onClick:o,disabled:n,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),e.jsxs(ms,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"overview",children:"Overview"}),e.jsx(Ye,{value:"users",children:"Users"}),e.jsx(Ye,{value:"settings",children:"Settings"}),e.jsx(Ye,{value:"activity",children:"Activity"})]}),e.jsx(Je,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Basic Information"}),e.jsx(Il,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Platform Type:"}),e.jsx("span",{children:((d=xo.platformTypes.find(u=>u.value===i.platformType))==null?void 0:d.label)||i.platformType})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:nt(new Date(i.createdAt))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Activity:"}),e.jsx("span",{children:nt(new Date(i.lastActivity))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Users:"}),e.jsx("span",{children:i.userCount})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Usage Statistics"}),e.jsx(ru,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Storage Used:"}),e.jsxs("span",{children:[i.storageUsed," GB"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"API Calls (Monthly):"}),e.jsx("span",{children:i.monthlyApiCalls.toLocaleString()})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Subscription"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plan:"}),e.jsx("span",{children:i.subscription.plan})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(Ae,{variant:i.subscription.status==="Active"?"default":"secondary",children:i.subscription.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount:"}),e.jsxs("span",{children:[De(i.subscription.amount),"/month"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Next Billing:"}),e.jsx("span",{children:nt(new Date(i.subscription.nextBilling))})]})]})})]})]})}),e.jsx(Je,{value:"users",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Users"}),e.jsx(Ee,{children:"Manage users for this tenant"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"User management coming soon"})]})})]})}),e.jsx(Je,{value:"settings",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"General Settings"})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Timezone:"}),e.jsx("span",{children:i.settings.timezone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Currency:"}),e.jsx("span",{children:i.settings.currency})]})]})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Features"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(i.settings.features).map(([u,m])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:u.charAt(0).toUpperCase()+u.slice(1).replace(/([A-Z])/g," $1")}),e.jsx(Ae,{variant:m?"default":"secondary",children:m?"Enabled":"Disabled"})]},u))})})]})]})}),e.jsx(Je,{value:"activity",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Activity Log"}),e.jsx(Ee,{children:"Recent tenant activity"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ru,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No recent activity"})]})})]})})]})]})}const eQ=[{id:"1",name:"Demo RV Dealership",domain:"demo.renterinsight.com",status:"active",users:5,createdAt:new Date("2024-01-01"),lastActivity:new Date("2024-01-20")},{id:"2",name:"Sunshine RV Center",domain:"sunshine.renterinsight.com",status:"active",users:12,createdAt:new Date("2023-12-15"),lastActivity:new Date("2024-01-19")}],zd={totalTenants:2,activeTenants:2,totalUsers:17,systemUptime:"99.9%",avgResponseTime:"120ms",errorRate:"0.1%"};function tQ(){const{hasRole:t}=Ou(),{toast:s}=xt(),[r,n]=y.useState(eQ),[a,i]=y.useState(""),[l,o]=y.useState(null),[c,d]=y.useState(!1),[u,m]=y.useState(!1);if(!t(th.ADMIN))return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ee,{className:"w-full max-w-md shadow-sm",children:e.jsxs(ce,{className:"text-center",children:[e.jsx(Gn,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),e.jsx(de,{children:"Access Denied"}),e.jsx(Ee,{children:"You don't have permission to access the Platform Admin area."})]})})});r.filter(j=>j.name.toLowerCase().includes(a.toLowerCase())||j.domain.toLowerCase().includes(a.toLowerCase()));const h=()=>{d(!0)},p=j=>{try{const x={id:Math.random().toString(36).substring(2,9),...j,status:j.isActive?"active":"inactive",users:0,createdAt:new Date,lastActivity:new Date};n(f=>[...f,x]),d(!1),s({title:"Tenant Created",description:`${j.name} has been created successfully.`})}catch{s({title:"Error",description:"Failed to create tenant",variant:"destructive"})}},b=(j,x)=>{try{const f=r.map(g=>g.id===j?{...g,...x}:g);n(f),m(!1),s({title:"Tenant Updated",description:`${x.name} has been updated successfully.`})}catch{s({title:"Error",description:"Failed to update tenant",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-8",children:[c&&e.jsx(JY,{onSave:p,onCancel:()=>d(!1)}),u&&l&&e.jsx(XY,{tenant:l,onSave:b,onClose:()=>{m(!1),o(null)}}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Platform Admin"}),e.jsx("p",{className:"ri-page-description",children:"System administration and tenant management"})]}),e.jsxs("div",{children:[e.jsxs(H,{className:"shadow-sm",onClick:h,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Tenant"]}),e.jsxs(H,{onClick:()=>window.location.href="/admin/settings",className:"shadow-sm ml-2",children:[e.jsx(wn,{className:"h-4 w-4 mr-2"}),"Platform Settings"]})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Total Tenants"}),e.jsx(Il,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:zd.totalTenants}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"All tenants"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Active Tenants"}),e.jsx(Il,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:zd.activeTenants}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(ru,{className:"h-3 w-3 mr-1"}),"Currently active"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Total Users"}),e.jsx(Ks,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:zd.totalUsers}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(Ks,{className:"h-3 w-3 mr-1"}),"All users"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"System Uptime"}),e.jsx(ru,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:zd.systemUptime}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(ru,{className:"h-3 w-3 mr-1"}),"Excellent"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Avg Response"}),e.jsx(ru,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:zd.avgResponseTime}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Fast response"]})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Error Rate"}),e.jsx(Gn,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:zd.errorRate}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Very low"]})]})]})]})]})}const zn={availableReports:[{id:"finance-summary",name:"Finance Summary",description:"Overview of financial performance and loan metrics",category:"Finance"},{id:"inventory-status",name:"Inventory Status",description:"Current inventory levels and vehicle availability",category:"Inventory"},{id:"quote-conversions",name:"Quote Conversions",description:"Quote generation and conversion rates",category:"Sales"},{id:"service-performance",name:"Service Ticket Performance",description:"Service ticket resolution times and customer satisfaction",category:"Service"},{id:"delivery-timelines",name:"Delivery Timelines",description:"Delivery scheduling and completion metrics",category:"Operations"},{id:"crm-pipeline",name:"CRM Pipeline Analysis",description:"Lead progression and sales pipeline performance",category:"CRM"},{id:"commission-summary",name:"Commission Summary",description:"Sales team commission tracking and payouts",category:"Finance"},{id:"customer-satisfaction",name:"Customer Satisfaction",description:"Customer feedback and satisfaction scores",category:"Service"}],reportCategories:["All","Finance","Inventory","Sales","Service","Operations","CRM"],timeRangeOptions:[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"ytd",label:"Year to Date"},{value:"last_year",label:"Last Year"},{value:"custom",label:"Custom Range"}],chartTypes:[{value:"bar",label:"Bar Chart",icon:"BarChart3"},{value:"line",label:"Line Chart",icon:"LineChart"},{value:"pie",label:"Pie Chart",icon:"PieChart"},{value:"numberCard",label:"Number Cards",icon:"Hash"},{value:"table",label:"Data Table",icon:"Table"}],exportFormats:[{value:"pdf",label:"PDF",icon:"FileText"},{value:"excel",label:"Excel",icon:"FileSpreadsheet"},{value:"csv",label:"CSV",icon:"Download"}],sampleReportResults:{"finance-summary":{chartType:"bar",title:"Monthly Revenue",data:[{label:"Jan",value:125e3,color:"#3b82f6"},{label:"Feb",value:158e3,color:"#3b82f6"},{label:"Mar",value:143e3,color:"#3b82f6"},{label:"Apr",value:167e3,color:"#3b82f6"},{label:"May",value:189e3,color:"#3b82f6"},{label:"Jun",value:201e3,color:"#3b82f6"}],summary:{totalRevenue:1083e3,averageMonthly:180500,growth:12.5}},"inventory-status":{chartType:"pie",title:"Inventory by Status",data:[{label:"Available",value:45,color:"#10b981"},{label:"Pending",value:12,color:"#f59e0b"},{label:"Sold",value:28,color:"#3b82f6"},{label:"Service",value:8,color:"#ef4444"}],summary:{totalUnits:93,availableUnits:45,utilizationRate:51.6}},"quote-conversions":{chartType:"numberCard",title:"Quote Performance",data:[{label:"Quotes Sent",value:48,trend:"+12%",color:"blue"},{label:"Quotes Accepted",value:32,trend:"+8%",color:"green"},{label:"Conversion Rate",value:"66.7%",trend:"+2.1%",color:"green"},{label:"Avg Quote Value",value:"$45,250",trend:"+5%",color:"blue"}],summary:{totalQuotes:48,acceptedQuotes:32,conversionRate:66.7}},"service-performance":{chartType:"line",title:"Service Ticket Resolution",data:[{label:"Week 1",value:24,color:"#3b82f6"},{label:"Week 2",value:31,color:"#3b82f6"},{label:"Week 3",value:28,color:"#3b82f6"},{label:"Week 4",value:35,color:"#3b82f6"}],summary:{totalTickets:118,avgResolutionTime:2.3,customerSatisfaction:4.6}},"delivery-timelines":{chartType:"bar",title:"Delivery Performance",data:[{label:"On Time",value:78,color:"#10b981"},{label:"Delayed",value:12,color:"#f59e0b"},{label:"Cancelled",value:3,color:"#ef4444"}],summary:{totalDeliveries:93,onTimeRate:83.9,avgDeliveryTime:5.2}},"crm-pipeline":{chartType:"bar",title:"Sales Pipeline",data:[{label:"New Leads",value:45,color:"#6366f1"},{label:"Qualified",value:32,color:"#8b5cf6"},{label:"Proposal",value:18,color:"#a855f7"},{label:"Negotiation",value:12,color:"#c084fc"},{label:"Closed Won",value:8,color:"#10b981"}],summary:{totalLeads:115,conversionRate:7,avgDealSize:52e3}}},dashboardWidgets:[{id:"revenue-trend",title:"Revenue Trend",type:"line",size:"large",reportId:"finance-summary"},{id:"quote-conversion",title:"Quote Conversion",type:"numberCard",size:"medium",reportId:"quote-conversions"},{id:"inventory-status",title:"Inventory Status",type:"pie",size:"medium",reportId:"inventory-status"},{id:"service-tickets",title:"Service Performance",type:"bar",size:"medium",reportId:"service-performance"}],filterOptions:{dateRanges:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last_7_days",label:"Last 7 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"this_month",label:"This Month"},{value:"last_month",label:"Last Month"},{value:"this_quarter",label:"This Quarter"},{value:"last_quarter",label:"Last Quarter"},{value:"this_year",label:"This Year"},{value:"last_year",label:"Last Year"}],groupBy:[{value:"day",label:"By Day"},{value:"week",label:"By Week"},{value:"month",label:"By Month"},{value:"quarter",label:"By Quarter"},{value:"year",label:"By Year"}],salesReps:[{value:"all",label:"All Sales Reps"},{value:"john_smith",label:"John Smith"},{value:"sarah_johnson",label:"Sarah Johnson"},{value:"mike_davis",label:"Mike Davis"},{value:"lisa_chen",label:"Lisa Chen"}],vehicleTypes:[{value:"all",label:"All Types"},{value:"rv",label:"RV"},{value:"motorhome",label:"Motorhome"},{value:"travel_trailer",label:"Travel Trailer"},{value:"fifth_wheel",label:"Fifth Wheel"},{value:"manufactured_home",label:"Manufactured Home"}]},scheduledReports:[{id:"weekly-summary",name:"Weekly Performance Summary",reportId:"finance-summary",frequency:"weekly",recipients:["manager@company.com","owner@company.com"],format:"pdf",nextRun:"2024-01-22T09:00:00Z",isActive:!0},{id:"monthly-inventory",name:"Monthly Inventory Report",reportId:"inventory-status",frequency:"monthly",recipients:["inventory@company.com"],format:"excel",nextRun:"2024-02-01T08:00:00Z",isActive:!0}],reportTemplates:[{id:"executive-dashboard",name:"Executive Dashboard",description:"High-level overview for executives",widgets:["revenue-trend","quote-conversion","inventory-status"],isDefault:!0},{id:"sales-performance",name:"Sales Performance",description:"Detailed sales metrics and pipeline analysis",widgets:["quote-conversion","crm-pipeline"],isDefault:!1},{id:"operations-overview",name:"Operations Overview",description:"Service and delivery performance metrics",widgets:["service-tickets","inventory-status"],isDefault:!1}]};function CS({onGenerate:t,onCancel:s}){var C;const{toast:r}=xt(),[n,a]=y.useState(!1),[i,l]=y.useState("basic"),[o,c]=y.useState({reportId:"",name:"",description:"",category:"",timeRange:"last_30_days",customStartDate:"",customEndDate:"",groupBy:"day",chartType:"bar",exportFormat:"pdf",salesReps:[],vehicleTypes:[],locations:[],customers:[],leadStatuses:[],dealStages:[],serviceStatuses:[],minValue:"",maxValue:"",minScore:"",maxScore:"",tagFilters:[],includeCustomFields:!1,includeInactive:!1,excludeTestData:!0,selectedColumns:[]}),d=zn.availableReports,u=zn.timeRangeOptions,m=zn.chartTypes,h=zn.exportFormats,p=zn.filterOptions,b=E=>{const M=d.find(D=>D.id===E);M&&c(D=>({...D,reportId:E,name:M.name,description:M.description,category:M.category}))},j=(E,M,D)=>{c(A=>({...A,[E]:D?[...A[E],M]:A[E].filter(I=>I!==M)}))},x=()=>{const E={tagIds:[],operator:"OR",exclude:!1};c(M=>({...M,tagFilters:[...M.tagFilters,E]}))},f=E=>{c(M=>({...M,tagFilters:M.tagFilters.filter((D,A)=>A!==E)}))},g=(E,M)=>{c(D=>({...D,tagFilters:D.tagFilters.map((A,I)=>I===E?M:A)}))},v=async()=>{if(!o.reportId){r({title:"Validation Error",description:"Please select a report type",variant:"destructive"});return}if(o.timeRange==="custom"&&(!o.customStartDate||!o.customEndDate)){r({title:"Validation Error",description:"Please select start and end dates for custom time range",variant:"destructive"});return}a(!0);try{const E={...o,tagFilters:o.tagFilters,selectedSalesReps:o.salesReps},M=await w(E);t(M)}catch(E){r({title:"Error",description:"Failed to generate report",variant:"destructive"}),console.error("Report generation error:",E)}finally{a(!1)}},w=async E=>(await new Promise(D=>setTimeout(D,1500)),{id:Math.random().toString(36).substr(2,9),type:E.reportType,title:k(E.reportType),timeRange:E.timeRange,chartType:E.chartType,filters:E,data:T(),generatedAt:new Date,totalRecords:Math.floor(Math.random()*1e3)+100}),k=E=>({"finance-summary":"Finance Summary Report","inventory-status":"Inventory Status Report","quote-conversions":"Quote Conversion Report","service-performance":"Service Performance Report","delivery-timelines":"Delivery Timeline Report","crm-pipeline":"CRM Pipeline Report","commission-summary":"Commission Summary Report","customer-satisfaction":"Customer Satisfaction Report"})[E]||"Custom Report",T=E=>{const M=[],D=Math.floor(Math.random()*50)+20;for(let A=0;A<D;A++)M.push({id:A+1,name:`Record ${A+1}`,value:Math.floor(Math.random()*1e5)+1e3,date:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString().split("T")[0],status:["Active","Pending","Completed","Cancelled"][Math.floor(Math.random()*4)],category:["Sales","Service","Finance","Operations"][Math.floor(Math.random()*4)]});return M},S=E=>{switch(E.toLowerCase()){case"crm":return Fs.LEAD;case"sales":return Fs.DEAL;case"inventory":return Fs.INVENTORY;case"finance":return Fs.CLIENT;default:return Fs.LEAD}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center",children:[e.jsx(tn,{className:"h-5 w-5 mr-2 text-blue-500"}),"Generate Report"]}),e.jsx(Ee,{children:"Configure and generate custom reports with advanced filtering options"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{children:[e.jsxs(ms,{value:i,onValueChange:l,className:"space-y-6",children:[e.jsxs(ds,{className:"grid w-full grid-cols-4",children:[e.jsx(Ye,{value:"basic",children:"Basic Settings"}),e.jsx(Ye,{value:"filters",children:"Filters"}),e.jsx(Ye,{value:"tags",children:"Tags"}),e.jsx(Ye,{value:"advanced",children:"Advanced"})]}),e.jsxs(Je,{value:"basic",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reportType",children:"Report Type *"}),e.jsxs(Be,{value:o.reportId,onValueChange:b,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select report type"})}),e.jsx($e,{children:d.map(E=>e.jsx(J,{value:E.id,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:E.description})]})},E.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"timeRange",children:"Time Range *"}),e.jsxs(Be,{value:o.timeRange,onValueChange:E=>c(M=>({...M,timeRange:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:u.map(E=>e.jsx(J,{value:E.value,children:E.label},E.value))})]})]})]}),o.timeRange==="custom"&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),e.jsx(ge,{id:"startDate",type:"date",value:o.customStartDate,onChange:E=>c(M=>({...M,customStartDate:E.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"endDate",children:"End Date"}),e.jsx(ge,{id:"endDate",type:"date",value:o.customEndDate,onChange:E=>c(M=>({...M,customEndDate:E.target.value}))})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"groupBy",children:"Group By"}),e.jsxs(Be,{value:o.groupBy,onValueChange:E=>c(M=>({...M,groupBy:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:p.groupBy.map(E=>e.jsx(J,{value:E.value,children:E.label},E.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"chartType",children:"Chart Type"}),e.jsxs(Be,{value:o.chartType,onValueChange:E=>c(M=>({...M,chartType:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:m.map(E=>e.jsx(J,{value:E.value,children:E.label},E.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"exportFormat",children:"Export Format"}),e.jsxs(Be,{value:o.exportFormat,onValueChange:E=>c(M=>({...M,exportFormat:E})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:h.map(E=>e.jsx(J,{value:E.value,children:E.label},E.value))})]})]})]})]}),e.jsxs(Je,{value:"filters",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Sales Representatives"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:p.salesReps.map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`rep-${E.value}`,checked:o.salesReps.includes(E.value),onCheckedChange:M=>j("salesReps",E.value,!!M)}),e.jsx(Z,{htmlFor:`rep-${E.value}`,className:"text-sm",children:E.label})]},E.value))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Vehicle Types"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:p.vehicleTypes.map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`type-${E.value}`,checked:o.vehicleTypes.includes(E.value),onCheckedChange:M=>j("vehicleTypes",E.value,!!M)}),e.jsx(Z,{htmlFor:`type-${E.value}`,className:"text-sm",children:E.label})]},E.value))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Lead Statuses"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-2",children:["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"].map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`lead-status-${E}`,checked:o.leadStatuses.includes(E),onCheckedChange:M=>j("leadStatuses",E,!!M)}),e.jsx(Z,{htmlFor:`lead-status-${E}`,className:"text-sm",children:E})]},E))})})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Deal Stages"})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-2",children:["Prospecting","Qualification","Needs Analysis","Proposal","Negotiation","Closed Won","Closed Lost"].map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`deal-stage-${E}`,checked:o.dealStages.includes(E),onCheckedChange:M=>j("dealStages",E,!!M)}),e.jsx(Z,{htmlFor:`deal-stage-${E}`,className:"text-sm",children:E})]},E))})})]})]}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Value Ranges"})}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"minValue",children:"Minimum Value"}),e.jsx(ge,{id:"minValue",type:"number",placeholder:"0",value:o.minValue,onChange:E=>c(M=>({...M,minValue:E.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"maxValue",children:"Maximum Value"}),e.jsx(ge,{id:"maxValue",type:"number",placeholder:"1000000",value:o.maxValue,onChange:E=>c(M=>({...M,maxValue:E.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"minScore",children:"Minimum Lead Score"}),e.jsx(ge,{id:"minScore",type:"number",placeholder:"0",min:"0",max:"100",value:o.minScore,onChange:E=>c(M=>({...M,minScore:E.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"maxScore",children:"Maximum Lead Score"}),e.jsx(ge,{id:"maxScore",type:"number",placeholder:"100",min:"0",max:"100",value:o.maxScore,onChange:E=>c(M=>({...M,maxScore:E.target.value}))})]})]})})]})]}),e.jsxs(Je,{value:"tags",className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-lg",children:"Tag Filters"}),e.jsx(Ee,{children:"Filter data based on assigned tags"})]}),e.jsxs(H,{onClick:x,size:"sm",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Tag Filter"]})]})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[o.tagFilters.map((E,M)=>e.jsx(ee,{className:"border-dashed",children:e.jsxs(te,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium",children:["Tag Filter ",M+1]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>f(M),children:e.jsx(St,{className:"h-4 w-4"})})]}),e.jsx(b$,{entityType:S(o.category),filters:[E],onFiltersChange:D=>g(M,D[0]),className:"border-0 p-0"})]})},M)),o.tagFilters.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(Jn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{children:"No tag filters added"}),e.jsx("p",{className:"text-sm",children:"Add tag filters to include/exclude data based on tags"})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Quick Tag Selection"}),e.jsx(Ee,{children:"Quickly add common tags to your report filter"})]}),e.jsx(te,{children:e.jsx(Zo,{entityId:"report-filter",entityType:S(o.category),onTagsChange:E=>{if(E.length>0){const M={tagIds:E.map(D=>D.id),operator:"OR",exclude:!1};c(D=>({...D,tagFilters:[...D.tagFilters,M]}))}},placeholder:"Select tags to filter by...",className:"w-full"})})]})]}),e.jsxs(Je,{value:"advanced",className:"space-y-6",children:[e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg",children:"Advanced Options"})}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"includeCustomFields",checked:o.includeCustomFields,onCheckedChange:E=>c(M=>({...M,includeCustomFields:!!E}))}),e.jsx(Z,{htmlFor:"includeCustomFields",children:"Include Custom Fields"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"includeInactive",checked:o.includeInactive,onCheckedChange:E=>c(M=>({...M,includeInactive:!!E}))}),e.jsx(Z,{htmlFor:"includeInactive",children:"Include Inactive Records"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"excludeTestData",checked:o.excludeTestData,onCheckedChange:E=>c(M=>({...M,excludeTestData:!!E}))}),e.jsx(Z,{htmlFor:"excludeTestData",children:"Exclude Test Data"})]})]})})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:"Column Selection"}),e.jsx(Ee,{children:"Choose which columns to include in the report"})]}),e.jsx(te,{children:e.jsx("div",{className:"grid gap-2 md:grid-cols-3",children:["ID","Name","Email","Phone","Status","Source","Value","Date Created","Last Updated","Assigned To","Tags"].map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:`column-${E}`,checked:o.selectedColumns.includes(E),onCheckedChange:M=>j("selectedColumns",E,!!M)}),e.jsx(Z,{htmlFor:`column-${E}`,className:"text-sm",children:E})]},E))})})]})]})]}),(o.salesReps.length>0||o.vehicleTypes.length>0||o.tagFilters.length>0||o.leadStatuses.length>0||o.dealStages.length>0)&&e.jsxs(ee,{className:"bg-blue-50 border-blue-200",children:[e.jsx(ce,{children:e.jsx(de,{className:"text-lg text-blue-900",children:"Active Filters"})}),e.jsx(te,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.salesReps.map(E=>{var M;return e.jsxs(Ae,{className:"bg-blue-100 text-blue-800",children:["Rep: ",(M=p.salesReps.find(D=>D.value===E))==null?void 0:M.label]},E)}),o.vehicleTypes.map(E=>{var M;return e.jsxs(Ae,{className:"bg-green-100 text-green-800",children:["Type: ",(M=p.vehicleTypes.find(D=>D.value===E))==null?void 0:M.label]},E)}),o.leadStatuses.map(E=>e.jsxs(Ae,{className:"bg-yellow-100 text-yellow-800",children:["Lead: ",E]},E)),o.dealStages.map(E=>e.jsxs(Ae,{className:"bg-purple-100 text-purple-800",children:["Deal: ",E]},E)),o.tagFilters.length>0&&e.jsxs(Ae,{className:"bg-orange-100 text-orange-800",children:[o.tagFilters.length," Tag Filter(s)"]})]})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:o.reportId&&e.jsxs("span",{children:["Report: ",(C=d.find(E=>E.id===o.reportId))==null?void 0:C.name]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(H,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(H,{onClick:v,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(RA,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]})]})]})]})})}function AS(){var A,I,L,F,B,R;const{toast:t}=xt(),[s,r]=y.useState("dashboard"),[n,a]=y.useState(""),[i,l]=y.useState("all"),[o,c]=y.useState(!1),[d,u]=y.useState(null),[m,h]=y.useState(!1),[p,b]=y.useState([]),[j,x]=y.useState([]),[f,g]=y.useState(!1),v=zn.availableReports,w=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format($),k=$=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date($)),T=$=>zn.sampleReportResults[$.type]||{chartType:"table",title:$.name,data:[],summary:{}},S=async $=>{g(!0);try{await new Promise(q=>setTimeout(q,2e3));const U=T($),W={id:Math.random().toString(36).substr(2,9),name:$.name,type:$.type,data:U,generatedAt:new Date,generatedBy:"Admin User"};u(W),c(!1),h(!0),b(q=>[W,...q]),t({title:"Report Generated",description:"Your report has been generated successfully."})}catch{t({title:"Error",description:"Failed to generate report. Please try again.",variant:"destructive"})}finally{g(!1)}},C=()=>{c(!1)},E=()=>{h(!1),u(null)},M=$=>{g(!0);try{const U=v.find(q=>q.id===$),W=zn.sampleReportResults[$];if(W){const q={id:Math.random().toString(36).substr(2,9),name:U.name,type:$,data:W,generatedAt:new Date,generatedBy:"Admin User"};u(q),h(!0),b(_=>[q,..._]),t({title:"Report Generated",description:"Your report has been generated successfully."})}}finally{g(!1)}},D=zn.availableReports.filter($=>{const U=$.name.toLowerCase().includes(n.toLowerCase())||$.description.toLowerCase().includes(n.toLowerCase()),W=i==="all"||$.category===i;return U&&W});return e.jsxs("div",{className:"space-y-8",children:[o&&e.jsx(CS,{onGenerate:S,onCancel:C}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:"Reporting Suite"}),e.jsx("p",{className:"ri-page-description",children:"Generate comprehensive reports and analytics across all modules"})]}),e.jsxs(H,{onClick:()=>c(!0),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-blue-50 to-blue-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-blue-900",children:"Available Reports"}),e.jsx(tn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:zn.availableReports.length}),e.jsx("p",{className:"text-xs text-blue-600",children:"Report templates"})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-green-50 to-green-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-green-900",children:"Generated Today"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:j.length}),e.jsx("p",{className:"text-xs text-green-600",children:"Reports created"})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-purple-50 to-purple-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-purple-900",children:"Scheduled Reports"}),e.jsx(Zt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:zn.scheduledReports.length}),e.jsx("p",{className:"text-xs text-purple-600",children:"Automated reports"})]})]}),e.jsxs(ee,{className:"shadow-sm border-0 bg-gradient-to-br from-orange-50 to-orange-100/50",children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium text-orange-900",children:"Export Downloads"}),e.jsx(ga,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-900",children:"156"}),e.jsx("p",{className:"text-xs text-orange-600",children:"This month"})]})]})]}),e.jsxs(ms,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"dashboard",children:"Dashboard"}),e.jsx(Ye,{value:"reports",children:"Available Reports"}),e.jsx(Ye,{value:"generated",children:"Generated Reports"}),e.jsx(Ye,{value:"scheduled",children:"Scheduled Reports"})]}),e.jsx(Je,{value:"dashboard",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:zn.dashboardWidgets.map($=>e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{className:"text-lg",children:$.title}),e.jsxs(Ee,{children:["Based on ",$.reportId," data"]})]}),e.jsx(te,{children:e.jsx("div",{className:"h-64 flex items-center justify-center bg-muted/30 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsxs("p",{className:"text-muted-foreground",children:[$.title," visualization"]})]})})})]},$.id))})}),e.jsxs(Je,{value:"reports",className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"ri-search-bar",children:[e.jsx(gs,{className:"ri-search-icon"}),e.jsx(ge,{placeholder:"Search reports...",value:n,onChange:$=>a($.target.value),className:"ri-search-input"})]}),e.jsxs(Be,{value:i,onValueChange:l,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Category"})}),e.jsx($e,{children:zn.reportCategories.map($=>e.jsx(J,{value:$.toLowerCase(),children:$},$))})]}),e.jsxs(H,{variant:"outline",children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Filter"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:D.map($=>e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:$.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:$.description})]}),e.jsx(Ae,{variant:"outline",children:$.category}),e.jsxs(H,{className:"w-full",size:"sm",onClick:()=>M($.id),children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Generate"]})]})})},$.id))}),o&&e.jsx(CS,{onGenerate:S,onCancel:C}),m&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-xl",children:d.name||((A=d.data)==null?void 0:A.title)}),e.jsxs(Ee,{children:["Generated on ",k(d.generatedAt)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:E,children:e.jsx(St,{className:"h-4 w-4"})})]})]})}),e.jsxs(te,{className:"space-y-6",children:[((I=d.data)==null?void 0:I.chartType)==="numberCard"&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.data.data.map(($,U)=>e.jsx(ee,{className:"shadow-sm",children:e.jsx(te,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:$.label}),e.jsx("p",{className:"text-2xl font-bold",children:$.value}),$.trend&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),$.trend]})]})})})},U))}),((L=d.data)==null?void 0:L.chartType)==="bar"&&e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsx(de,{children:d.data.title})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:d.data.data.map(($,U)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:$.label}),e.jsx("span",{className:"text-sm font-bold",children:w($.value)})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-3",children:e.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-300",style:{width:`${$.value/Math.max(...d.data.data.map(W=>W.value))*100}%`,backgroundColor:$.color||"#3b82f6"}})})]},U))})})]}),((F=d.data)==null?void 0:F.chartType)==="pie"&&e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsx(de,{children:d.data.title})}),e.jsx(te,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"space-y-3",children:d.data.data.map(($,U)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:$.color}}),e.jsx("span",{className:"text-sm",children:$.label})]}),e.jsx("span",{className:"text-sm font-bold",children:$.value})]},U))}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:d.data.data.reduce(($,U)=>$+U.value,0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Items"})]})})]})})]}),((B=d.data)==null?void 0:B.chartType)==="line"&&e.jsxs(ee,{className:"shadow-sm",children:[e.jsx(ce,{children:e.jsx(de,{children:d.data.title})}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex items-end space-x-2 h-64",children:d.data.data.map(($,U)=>{const W=Math.max(...d.data.data.map(_=>_.value)),q=$.value/W*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary rounded-t transition-all duration-300",style:{height:`${q}%`,backgroundColor:$.color||"#3b82f6"},title:`${$.label}: ${$.value}`}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2 text-center",children:$.label})]},U)})})})})]}),((R=d.data)==null?void 0:R.summary)&&e.jsxs(ee,{className:"shadow-sm bg-muted/30",children:[e.jsx(ce,{children:e.jsx(de,{children:"Summary"})}),e.jsx(te,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(d.data.summary).map(([$,U])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:typeof U=="number"&&$.toLowerCase().includes("rate")?`${U}%`:typeof U=="number"&&($.toLowerCase().includes("revenue")||$.toLowerCase().includes("value"))?w(U):U==null?void 0:U.toString()}),e.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:$.replace(/([A-Z])/g," $1").trim()})]},$))})})]})]})]})})]}),e.jsxs(Je,{value:"generated",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Generated Reports (",p.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage previously generated reports"})]}),e.jsxs(H,{onClick:()=>c(!0),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Generate New Report"]})]}),p.length>0?e.jsx("div",{className:"space-y-4",children:p.map($=>e.jsx(ee,{className:"shadow-sm hover:shadow-md transition-shadow",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:$.name}),e.jsx(Ae,{variant:"outline",children:$.type})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Generated on ",k($.generatedAt)," by ",$.generatedBy]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{u($),h(!0)},children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})},$.id))}):e.jsx(ee,{className:"shadow-sm",children:e.jsxs(te,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(tn,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Generated Reports"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Generated reports will appear here after you create them"})]})})]}),e.jsx(Je,{value:"scheduled",className:"space-y-6",children:e.jsxs(ee,{className:"shadow-sm",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Scheduled Reports"}),e.jsx(Ee,{children:"Automatically generated reports"})]}),e.jsx(te,{children:e.jsx("div",{className:"space-y-4",children:zn.scheduledReports.map($=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:$.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[$.frequency," • Next run: ",new Date($.nextRun).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:$.isActive?"bg-green-50 text-green-700 border-green-200":"bg-gray-50 text-gray-700 border-gray-200",children:$.isActive?"Active":"Inactive"}),e.jsx(H,{variant:"outline",size:"sm",children:"Edit"})]})]},$.id))})})]})})]})]})}function sQ(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(AS,{})}),e.jsx(ot,{path:"/*",element:e.jsx(AS,{})})]})}function rQ({templates:t,onCreateTemplate:s,onUpdateTemplate:r,onDeleteTemplate:n}){var D;const{toast:a}=xt(),[i,l]=y.useState(null),[o,c]=y.useState(null),[d,u]=y.useState(null),[m,h]=y.useState(null),[p,b]=y.useState(!1),[j,x]=y.useState(""),f=Nl.fieldTypes,g=A=>{var F;let I={name:A?`Copy of ${(F=t.find(B=>B.id===A))==null?void 0:F.name}`:"New Template",description:"",sections:[],isActive:!0};if(A){const B=t.find(R=>R.id===A);if(B){const R=B.sections.map($=>({...$,id:`section-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,fields:$.fields.map(U=>({...U,id:`field-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}));I={...I,description:B.description,sections:R}}}const L=s(I);l(L),c(L),b(!1),x("")},v=()=>{!o||!i||(r(i.id,o),c(null),a({title:"Template Saved",description:"Application template has been saved successfully"}))},w=A=>{window.confirm("Are you sure you want to delete this template?")&&(n(A),(i==null?void 0:i.id)===A&&(l(null),c(null)),a({title:"Template Deleted",description:"Application template has been deleted"}))},k=()=>{var F;if(!i)return;const A={id:`section-${Date.now()}`,title:"New Section",description:"",order:(((F=i.sections)==null?void 0:F.length)||0)+1,fields:[]},I=[...i.sections||[],A],L={...i,sections:I};l(L),c(L),u(A)},T=A=>{var F;if(!i||!o)return;const I=((F=o.sections)==null?void 0:F.map(B=>B.id===A.id?A:B))||[],L={...o,sections:I};c(L),l(L),u(null)},S=A=>{var F;if(!i||!o)return;const I=((F=o.sections)==null?void 0:F.filter(B=>B.id!==A))||[],L={...o,sections:I};c(L),l(L)},C=A=>{var B;if(!i||!o)return;const I={id:`field-${Date.now()}`,type:"text",label:"New Field",placeholder:"",required:!1,order:1},L=((B=o.sections)==null?void 0:B.map(R=>R.id===A?{...R,fields:[...R.fields,{...I,order:R.fields.length+1}]}:R))||[],F={...o,sections:L};c(F),l(F),h(I)},E=(A,I)=>{var B;if(!o)return;const L=((B=o.sections)==null?void 0:B.map(R=>R.id===A?{...R,fields:R.fields.map($=>$.id===I.id?I:$)}:R))||[],F={...o,sections:L};c(F),l(F),h(null)},M=(A,I)=>{var B;if(!o)return;const L=((B=o.sections)==null?void 0:B.map(R=>R.id===A?{...R,fields:R.fields.filter($=>$.id!==I)}:R))||[],F={...o,sections:L};c(F),l(F)};return i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{variant:"ghost",onClick:()=>{l(null),c(null)},children:"← Back to Templates"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:i.name}),e.jsx("p",{className:"text-muted-foreground",children:"Template Builder"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[o&&e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"outline",onClick:()=>c(null),children:"Cancel"}),e.jsxs(H,{onClick:v,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"Save Template"]})]}),!o&&e.jsxs(H,{onClick:()=>c(i),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit Template"]})]})]}),o&&e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsx(de,{children:"Template Settings"})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"templateName",children:"Template Name"}),e.jsx(ge,{id:"templateName",value:o.name,onChange:A=>c({...o,name:A.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"isActive",checked:o.isActive,onCheckedChange:A=>c({...o,isActive:!!A})}),e.jsx(Z,{htmlFor:"isActive",children:"Active Template"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"templateDescription",children:"Description"}),e.jsx(kt,{id:"templateDescription",value:o.description,onChange:A=>c({...o,description:A.target.value}),rows:3})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sections"}),o&&e.jsxs(H,{onClick:k,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),(D=i.sections)==null?void 0:D.map(A=>e.jsx(nQ,{section:A,isEditing:!!o,editingSection:d,editingField:m,onEditSection:u,onSaveSection:T,onDeleteSection:S,onAddField:C,onEditField:h,onSaveField:E,onDeleteField:M,fieldTypes:f},A.id)),(!i.sections||i.sections.length===0)&&e.jsx(ee,{children:e.jsxs(te,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No sections added yet"}),o&&e.jsxs(H,{onClick:k,className:"mt-4",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add First Section"]})]})})]})]}):e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Application Templates"}),e.jsx(Ee,{children:"Create and manage finance application templates"})]}),e.jsxs(H,{onClick:()=>b(!0),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Template"]})]})}),e.jsxs(te,{children:[p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Create New Template"}),e.jsx(Ee,{children:"Choose how to create your new template"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{b(!1),x("")},children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(H,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>g(),children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Create Blank Template"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Start with an empty template"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-sm",children:"Or clone from existing:"}),e.jsxs(Be,{value:j,onValueChange:x,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select template to clone"})}),e.jsx($e,{children:t.map(A=>e.jsx(J,{value:A.id,children:A.name},A.id))})]}),e.jsxs(H,{className:"w-full",disabled:!j,onClick:()=>g(j),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Create from Selected Template"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(H,{variant:"outline",onClick:()=>{b(!1),x("")},children:"Cancel"})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[t.map(A=>{var I,L;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-semibold",children:A.name}),e.jsx(Ae,{variant:A.isActive?"default":"secondary",children:A.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:A.description||"No description"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((I=A.sections)==null?void 0:I.length)||0," sections •",((L=A.sections)==null?void 0:L.reduce((F,B)=>F+B.fields.length,0))||0," fields"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>l(A),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>w(A.id),children:e.jsx(js,{className:"h-4 w-4"})})]})]},A.id)}),t.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx("p",{children:"No templates created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first template to get started"})]})]})]})]})}function nQ({section:t,isEditing:s,editingSection:r,editingField:n,onEditSection:a,onSaveSection:i,onDeleteSection:l,onAddField:o,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:m}){const[h,p]=y.useState(t),b=(r==null?void 0:r.id)===t.id,j=()=>{i(h)},x=()=>{p(t),a(null)};return e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s&&e.jsx(R2,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]})]}),s&&e.jsxs("div",{className:"flex items-center space-x-2",children:[!b&&e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"outline",size:"sm",onClick:()=>a(t),children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsx(H,{variant:"outline",size:"sm",onClick:()=>l(t.id),children:e.jsx(js,{className:"h-4 w-4"})})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"outline",size:"sm",onClick:x,children:e.jsx(St,{className:"h-4 w-4"})}),e.jsx(H,{size:"sm",onClick:j,children:e.jsx(vs,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(te,{children:[b?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"sectionTitle",children:"Section Title"}),e.jsx(ge,{id:"sectionTitle",value:h.title,onChange:f=>p({...h,title:f.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"sectionDescription",children:"Description"}),e.jsx(kt,{id:"sectionDescription",value:h.description,onChange:f=>p({...h,description:f.target.value}),rows:2})]})]}):null,e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h5",{className:"font-medium",children:["Fields (",t.fields.length,")"]}),s&&e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(t.id),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Add Field"]})]}),t.fields.map(f=>e.jsx(aQ,{field:f,sectionId:t.id,isEditing:s,editingField:n,onEditField:c,onSaveField:d,onDeleteField:u,fieldTypes:m},f.id)),t.fields.length===0&&e.jsx("div",{className:"text-center py-6 text-muted-foreground border-2 border-dashed rounded-lg",children:e.jsx("p",{className:"text-sm",children:"No fields added yet"})})]})]})]})}function aQ({field:t,sectionId:s,isEditing:r,editingField:n,onEditField:a,onSaveField:i,onDeleteField:l,fieldTypes:o}){var f,g;const[c,d]=y.useState(t),[u,m]=y.useState(""),h=(n==null?void 0:n.id)===t.id,p=()=>{i(s,c)},b=()=>{d(t),a(null)},j=()=>{u.trim()&&(d({...c,options:[...c.options||[],u.trim()]}),m(""))},x=v=>{var w;d({...c,options:(w=c.options)==null?void 0:w.filter((k,T)=>T!==v)})};return h?e.jsx(ee,{className:"border-primary",children:e.jsx(te,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldLabel",children:"Field Label"}),e.jsx(ge,{id:"fieldLabel",value:c.label,onChange:v=>d({...c,label:v.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldType",children:"Field Type"}),e.jsxs(Be,{value:c.type,onValueChange:v=>d({...c,type:v,options:["select","radio","checkbox"].includes(v)?c.options:void 0}),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsx($e,{children:o.map(v=>e.jsx(J,{value:v.value,children:v.label},v.value))})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"fieldPlaceholder",children:"Placeholder Text"}),e.jsx(ge,{id:"fieldPlaceholder",value:c.placeholder,onChange:v=>d({...c,placeholder:v.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ct,{id:"fieldRequired",checked:c.required,onCheckedChange:v=>d({...c,required:!!v})}),e.jsx(Z,{htmlFor:"fieldRequired",children:"Required Field"})]}),["select","radio"].includes(c.type)&&e.jsxs("div",{children:[e.jsx(Z,{children:"Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(ge,{value:u,onChange:v=>m(v.target.value),placeholder:"Add option",onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),j())}}),e.jsx(H,{type:"button",onClick:j,children:e.jsx(tt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(f=c.options)==null?void 0:f.map((v,w)=>e.jsxs("div",{className:"flex items-center bg-muted px-2 py-1 rounded",children:[e.jsx("span",{className:"text-sm mr-2",children:v}),e.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>x(w),children:e.jsx(St,{className:"h-3 w-3"})})]},w))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(H,{variant:"outline",onClick:b,children:"Cancel"}),e.jsx(H,{onClick:p,children:"Save Field"})]})]})})}):e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[r&&e.jsx(R2,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:t.label}),t.required&&e.jsx(Ae,{variant:"secondary",className:"text-xs",children:"Required"}),e.jsx(Ae,{variant:"outline",className:"text-xs",children:(g=o.find(v=>v.value===t.type))==null?void 0:g.label})]}),t.placeholder&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placeholder: ",t.placeholder]})]})]}),r&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>a(t),children:e.jsx(ts,{className:"h-4 w-4"})}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>l(s,t.id),children:e.jsx(js,{className:"h-4 w-4"})})]})]})}function iQ({onClose:t,onSelectType:s}){return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(ee,{className:"w-full max-w-md",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Create New Application"}),e.jsx(Ee,{children:"Choose how you'd like to create the application"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs(te,{className:"space-y-4",children:[e.jsx(H,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>s("completeNow"),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Bt,{className:"h-8 w-8 text-primary mt-1"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-base",children:"Complete Now"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Fill out the application immediately in the system"})]})]})}),e.jsx(H,{variant:"outline",className:"w-full justify-start h-auto p-6",onClick:()=>s("inviteCustomer"),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(Ks,{className:"h-8 w-8 text-primary mt-1"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-base",children:"Invite Customer"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Send an invitation for the customer to complete online"})]})]})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(H,{variant:"outline",onClick:t,children:"Cancel"})})]})]})})}function lQ({onClose:t,onInvite:s}){var T,S;const{toast:r}=xt(),{templates:n}=ep(),[a,i]=y.useState("existing"),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,m]=y.useState(((T=n.find(C=>C.isActive))==null?void 0:T.id)||((S=n[0])==null?void 0:S.id)||""),[h,p]=y.useState({name:"",email:"",phone:"",source:"manual"}),[b,j]=y.useState(""),[x,f]=y.useState(!1),v=rb.sampleUsers.map(C=>({id:C.id,name:C.name,email:C.email,phone:C.phone,source:"website"})).filter(C=>C.name.toLowerCase().includes(l.toLowerCase())||C.email.toLowerCase().includes(l.toLowerCase())),w=async()=>{if(!c){r({title:"Selection Required",description:"Please select a customer to invite",variant:"destructive"});return}if(!u){r({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}f(!0),await new Promise(C=>setTimeout(C,1e3)),s(c,u),f(!1)},k=async()=>{if(!h.name||!h.email){r({title:"Required Fields",description:"Please fill in name and email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)){r({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}if(!u){r({title:"Template Required",description:"Please select an application template",variant:"destructive"});return}f(!0),await new Promise(C=>setTimeout(C,1e3)),s({...h,id:`cust-${Date.now()}`},u),f(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx(ee,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"shrink-0 border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{children:"Invite Customer to Complete Application"}),e.jsx(Ee,{children:"Send a finance application invitation to a customer"})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(St,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"overflow-y-auto flex-1 px-4 py-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"template",children:"Application Template *"}),e.jsxs(Be,{value:u,onValueChange:m,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Select application template"})}),e.jsx($e,{children:n.map(C=>e.jsx(J,{value:C.id,children:C.name},C.id))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose which application template the customer will complete"})]}),e.jsxs("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>i("existing"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="existing"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Existing Customer"}),e.jsx("button",{onClick:()=>i("new"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${a==="new"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"New Customer"})]}),a==="existing"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"search",children:"Search Customers"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{id:"search",value:l,onChange:C=>o(C.target.value),placeholder:"Search by name or email...",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2 max-h-36 overflow-y-auto",children:[v.slice(0,3).map(C=>{var E;return e.jsx("div",{onClick:()=>d(C),className:`p-3 border rounded-lg cursor-pointer transition-colors ${(c==null?void 0:c.id)===C.id?"border-primary bg-primary/5":"hover:bg-accent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:C.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.email}),C.phone&&e.jsx("p",{className:"text-sm text-muted-foreground",children:C.phone})]}),e.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:(E=C.source)==null?void 0:E.replace("_"," ")})]})},C.id)}),v.slice(0,3).length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No customers found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or add a new customer"})]}),v.length>3&&e.jsx("div",{className:"text-center py-2 text-sm text-muted-foreground",children:"Showing top 3 results. Use search to find specific customers."})]})]}),a==="new"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Full Name *"}),e.jsx(ge,{id:"name",value:h.name,onChange:C=>p({...h,name:C.target.value}),placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email Address *"}),e.jsx(ge,{id:"email",type:"email",value:h.email,onChange:C=>p({...h,email:C.target.value}),placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number"}),e.jsx(ge,{id:"phone",type:"tel",value:h.phone,onChange:C=>p({...h,phone:C.target.value}),placeholder:"(555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"source",children:"Lead Source"}),e.jsxs(Be,{value:h.source,onValueChange:C=>p({...h,source:C}),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs($e,{children:[e.jsx(J,{value:"manual",children:"Manual Entry"}),e.jsx(J,{value:"website",children:"Website"}),e.jsx(J,{value:"referral",children:"Referral"}),e.jsx(J,{value:"trade_show",children:"Trade Show"}),e.jsx(J,{value:"phone",children:"Phone Call"}),e.jsx(J,{value:"walk_in",children:"Walk-in"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"message",children:"Custom Message (Optional)"}),e.jsx(kt,{id:"message",value:b,onChange:C=>j(C.target.value),placeholder:"Add a personal message to the invitation email...",rows:3})]}),a==="existing"&&c&&e.jsxs("div",{className:"space-y-4 mt-6 p-4 border rounded-lg bg-muted/20",children:[e.jsx("h4",{className:"font-medium",children:"Edit Customer Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"editName",children:"Full Name *"}),e.jsx(ge,{id:"editName",value:c.name,onChange:C=>d({...c,name:C.target.value}),placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"editEmail",children:"Email Address *"}),e.jsx(ge,{id:"editEmail",type:"email",value:c.email,onChange:C=>d({...c,email:C.target.value}),placeholder:"Enter email address"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"editPhone",children:"Phone Number"}),e.jsx(ge,{id:"editPhone",type:"tel",value:c.phone||"",onChange:C=>d({...c,phone:C.target.value}),placeholder:"(555) 123-4567"})]})]},c.id)]}),e.jsx("div",{className:"shrink-0 border-t bg-white p-4 sticky bottom-0 z-10",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(H,{variant:"outline",onClick:t,children:"Cancel"}),e.jsx(H,{onClick:a==="existing"?w:k,disabled:x||a==="existing"&&!c||!u,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})})]})})})}function TS(){var we,Re;const{tenant:t}=kn(),{toast:s}=xt(),{createTask:r}=ed(),[n,a]=y.useState("applications"),[i,l]=y.useState(!1),[o,c]=y.useState("none"),[d,u]=y.useState(null),[m,h]=y.useState(!1),[p,b]=y.useState(void 0),[j,x]=y.useState(""),[f,g]=y.useState("all"),[v,w]=y.useState(""),[k,T]=y.useState(""),[S,C]=y.useState(""),[E,M]=y.useState(null),D=y.useRef(null),{applications:A,templates:I,createApplication:L,updateApplication:F,createTemplate:B,updateTemplate:R,deleteTemplate:$}=ep(),U=vt.useMemo(()=>{let ye=A;if(j){const Se=j.toLowerCase();ye=ye.filter(he=>he.customerName&&he.customerName.toLowerCase().includes(Se)||he.customerEmail&&he.customerEmail.toLowerCase().includes(Se)||he.customerPhone&&he.customerPhone.toLowerCase().includes(Se))}if(f!=="all"&&(ye=ye.filter(Se=>Se.status===f)),v){const Se=new Date(v);ye=ye.filter(he=>new Date(he.createdAt).setHours(0,0,0,0)>=Se.setHours(0,0,0,0))}return ye},[A,j,f,v]),W=vt.useMemo(()=>{let ye=I;if(k){const Se=k.toLowerCase();ye=ye.filter(he=>he.name.toLowerCase().includes(Se)||he.description.toLowerCase().includes(Se))}return ye},[I,k]),q=()=>"Applications",_=()=>{l(!0)},V=ye=>{if(l(!1),c(ye),ye==="completeNow"){const Se=I.find(ke=>ke.isActive)||I[0];if(!Se){s({title:"No Templates Available",description:"Please create an application template first.",variant:"destructive"}),c("none");return}const he=L({customerId:"",customerName:"",customerEmail:"",templateId:Se.id,status:"draft"});u(he)}},Q=ye=>{var he,ke;if(!d)return;if(d.status==="denied"&&ye!=="denied"&&!S.trim()){M(ye),(he=D.current)==null||he.scrollIntoView({behavior:"smooth",block:"center"}),s({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}if(ye!==d.status){const xe={status:ye,reviewedBy:"Admin User",reviewedAt:new Date().toISOString(),adminNotes:S};F(d.id,xe);const Pe={...d,...xe,updatedAt:new Date().toISOString()};u(Pe),M(null),s({title:"Status Updated",description:`Application status changed to ${((ke=Nl.statusOptions.find(qe=>qe.value===ye))==null?void 0:ke.label)||ye}.`})}},G=async ye=>{try{await r(ye),h(!1),b(void 0),s({title:"Task Created",description:"Task has been created successfully"})}catch{s({title:"Error",description:"Failed to create task",variant:"destructive"})}},Y=ye=>{const Se=ye.status==="under_review"?es.HIGH:ye.status==="submitted"?es.MEDIUM:ye.status==="conditionally_approved"?es.HIGH:es.LOW,he=ye.status==="under_review"||ye.status==="conditionally_approved"?new Date(Date.now()+24*60*60*1e3):new Date(Date.now()+3*24*60*60*1e3);b({sourceId:ye.id,sourceType:"finance_application",module:er.FINANCE,title:`Review application: ${ye.customerName||"Unnamed Application"}`,description:`Application status: ${ye.status.replace("_"," ")}, Customer: ${ye.customerEmail||"No email"}`,priority:Se,dueDate:he,link:"/client-applications",customFields:{customerId:ye.customerId,customerName:ye.customerName,customerEmail:ye.customerEmail,applicationStatus:ye.status,templateId:ye.templateId}}),h(!0)},ne=()=>{u(null),C(""),M(null),c("none")},le=()=>{c("none")},oe=ye=>{u(ye),C(ye.adminNotes||""),M(null),c("none")},pe=ye=>{switch(ye){case"draft":return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"conditionally_approved":return"bg-orange-100 text-orange-800";case"denied":return"bg-red-100 text-red-800";case"completed":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},je=()=>{var ye,Se;if(d){const he=E||d.status,ke=he!==d.status;if(ke&&d.status==="denied"&&he!=="denied"&&!S.trim()){(ye=D.current)==null||ye.scrollIntoView({behavior:"smooth",block:"center"}),s({title:"Internal Note Required",description:"Please add an internal note explaining the reason for changing from denied status.",variant:"destructive"});return}const xe={adminNotes:S};ke&&(xe.status=he,xe.reviewedBy="Admin User",xe.reviewedAt=new Date().toISOString()),F(d.id,xe);const Pe={...d,...xe,updatedAt:new Date().toISOString()};u(Pe),M(null),s({title:ke?"Status and Notes Updated":"Admin Notes Saved",description:ke?`Application status changed to ${((Se=Nl.statusOptions.find(qe=>qe.value===he))==null?void 0:Se.label)||he} and notes saved.`:"Internal notes have been saved successfully."})}};return d&&o==="completeNow"?e.jsx(SP,{application:d,onSave:ye=>{F(d.id,ye),s({title:"Application Updated",description:"Finance application has been saved successfully."})},onCancel:ne,onSubmit:ye=>{F(d.id,{...ye,status:"submitted"}),ne(),s({title:"Application Submitted",description:"Finance application has been submitted for review."})}}):o==="inviteCustomer"?e.jsx("div",{className:"space-y-6",children:e.jsx(lQ,{onClose:le,onInvite:(ye,Se)=>{L({customerId:ye.id||"",customerName:ye.name,customerEmail:ye.email,templateId:Se,status:"draft"}),le(),s({title:"Invitation Sent",description:`Finance application invitation sent to ${ye.name}`})}})}):d&&o==="none"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(H,{variant:"ghost",onClick:ne,children:"← Back to Applications"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Application Details"}),e.jsx("p",{className:"text-muted-foreground",children:d.customerName||"Unnamed Application"})]})]})}),e.jsxs(ee,{children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{children:["Application #",d.id.slice(-6).toUpperCase()]}),e.jsxs(Ee,{children:["Created ",new Date(d.createdAt).toLocaleDateString(),d.submittedAt&&e.jsxs("span",{children:[" • Submitted ",new Date(d.submittedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Status:"}),e.jsxs(Be,{value:E||d.status,onValueChange:Q,children:[e.jsx(Oe,{className:"w-[200px]",children:e.jsx(ze,{})}),e.jsx($e,{children:Nl.statusOptions.map(ye=>e.jsx(J,{value:ye.value,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${ye.color.split(" ")[0]}`}),e.jsx("span",{children:ye.label})]})},ye.value))})]})]}),d.fraudCheckStatus&&e.jsxs(Ae,{variant:"outline",children:["IDV: ",d.fraudCheckStatus.charAt(0).toUpperCase()+d.fraudCheckStatus.slice(1)]})]})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Customer Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Name"}),e.jsx("p",{className:"text-sm",children:d.customerName||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Email"}),e.jsx("p",{className:"text-sm",children:d.customerEmail||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Phone"}),e.jsx("p",{className:"text-sm",children:d.customerPhone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Customer ID"}),e.jsx("p",{className:"text-sm",children:d.customerId||"Not assigned"})]})]})]}),Object.keys(d.data).length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application Data"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.data).map(([ye,Se])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2 capitalize",children:ye.replace("-"," ")}),e.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:Object.entries(Se).map(([he,ke])=>e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground capitalize",children:he.replace("-"," ")}),e.jsx("p",{className:"text-sm",children:ke||"Not provided"})]},he))})]},ye))})]}),d.uploadedFiles.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Uploaded Documents"}),e.jsx("div",{className:"space-y-2",children:d.uploadedFiles.map(ye=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:ye.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(ye.size/1024/1024).toFixed(2)," MB • Uploaded ",new Date(ye.uploadedAt).toLocaleDateString()]})]})]}),e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]})]},ye.id))})]}),d.notes&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Notes"}),e.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-sm",children:d.notes})})]}),d.reviewedAt&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Review Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Reviewed Date"}),e.jsx("p",{className:"text-sm",children:new Date(d.reviewedAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Reviewed By"}),e.jsx("p",{className:"text-sm",children:d.reviewedBy||"Not specified"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Admin Notes (Internal Only)"}),e.jsxs(H,{variant:"outline",size:"sm",onClick:je,children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),E&&E!==d.status?"Save Status & Notes":"Save Notes"]})]}),e.jsx(kt,{ref:D,value:S,onChange:ye=>C(ye.target.value),placeholder:"Add internal notes about this application (not visible to customer)...",rows:4,className:"mb-4"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["These notes are for internal use only and will not be visible to the customer.",E&&E!==d.status&&e.jsxs("span",{className:"block mt-1 text-orange-600 font-medium",children:['Status will be changed to "',(we=Nl.statusOptions.find(ye=>ye.value===E))==null?void 0:we.label,'" when saved.']})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Application History"}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:((Re=d.history)==null?void 0:Re.length)>0?d.history.sort((ye,Se)=>new Date(Se.timestamp).getTime()-new Date(ye.timestamp).getTime()).map(ye=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg bg-muted/20",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:ye.action.includes("Status")?e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(wn,{className:"h-4 w-4 text-blue-600"})}):ye.action.includes("Document")?e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Bt,{className:"h-4 w-4 text-green-600"})}):ye.action.includes("Notes")?e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Bt,{className:"h-4 w-4 text-purple-600"})}):e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(zt,{className:"h-4 w-4 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:ye.action}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(ye.timestamp).toLocaleDateString()," ",new Date(ye.timestamp).toLocaleTimeString()]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ye.details}),(ye.oldValue||ye.newValue)&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:[ye.oldValue&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"From:"})," ",ye.oldValue]}),ye.newValue&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"To:"})," ",ye.newValue]})]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[e.jsx(mr,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ye.userName})]})]})]},ye.id)):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(zt,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),e.jsx("p",{className:"text-sm",children:"No history available"})]})})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx(Xc,{initialData:p,onSave:G,onCancel:()=>{h(!1),b(void 0)}}),i&&e.jsx(iQ,{onClose:()=>l(!1),onSelectType:V}),e.jsx("div",{className:"ri-page-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"ri-page-title",children:q()}),e.jsx("p",{className:"ri-page-description",children:"Manage finance applications and approval workflows"})]}),e.jsx("div",{children:e.jsxs(H,{onClick:_,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"New Application"]})})]})}),e.jsxs("div",{className:"ri-stats-grid",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Applications"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Pending Review"}),e.jsx(nn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:A.filter(ye=>ye.status==="under_review").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting approval"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Approval Rate"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"78%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+5% from last month"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Avg Processing Time"}),e.jsx(wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2.3 days"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"-0.5 days from last month"})]})]})]}),e.jsxs(ms,{value:n,onValueChange:a,children:[e.jsxs(ds,{children:[e.jsx(Ye,{value:"applications",children:"Applications"}),e.jsx(Ye,{value:"templates",children:"Templates"})]}),e.jsx(Je,{value:"applications",className:"space-y-4",children:e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Finance Applications"}),e.jsx(Ee,{children:"Manage and review customer finance applications"})]}),e.jsxs(te,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by name, email, or phone",value:j,onChange:ye=>x(ye.target.value),className:"pl-10"})]}),e.jsxs(Be,{value:f,onValueChange:g,children:[e.jsx(Oe,{className:"w-[180px]",children:e.jsx(ze,{placeholder:"Filter by Status"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),Nl.statusOptions.map(ye=>e.jsx(J,{value:ye.value,children:ye.label},ye.value))]})]}),e.jsx(ge,{type:"date",value:v,onChange:ye=>w(ye.target.value),className:"w-[180px]",title:"Filter by creation date (on or after)"})]}),e.jsxs("div",{className:"space-y-4",children:[U.map(ye=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-semibold",children:ye.customerName||"Unnamed Application"}),e.jsx(Ae,{className:pe(ye.status),children:ye.status.replace("_"," ").toUpperCase()}),ye.fraudCheckStatus&&e.jsxs(Ae,{variant:"outline",children:["IDV: ",ye.fraudCheckStatus.charAt(0).toUpperCase()+ye.fraudCheckStatus.slice(1)]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ye.customerEmail&&e.jsxs("span",{children:[ye.customerEmail," • "]}),"Created: ",new Date(ye.createdAt).toLocaleDateString(),ye.submittedAt&&e.jsxs("span",{children:[" • Submitted: ",new Date(ye.submittedAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>oe(ye),children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Y(ye),children:[e.jsx(ln,{className:"h-4 w-4 mr-2"}),"Task"]})]})]},ye.id)),U.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Bt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),A.length===0?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No finance applications yet"}),e.jsx("p",{className:"text-sm",children:"Create your first application to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No applications found matching your criteria"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})]})]})]})}),e.jsxs(Je,{value:"templates",className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search templates by name or description",value:k,onChange:ye=>T(ye.target.value),className:"pl-10"})]}),e.jsx(rQ,{templates:W,onCreateTemplate:B,onUpdateTemplate:R,onDeleteTemplate:$})]})]})]})}function oQ(){return e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(TS,{})}),e.jsx(ot,{path:"/portal",element:e.jsx(CP,{})}),e.jsx(ot,{path:"/*",element:e.jsx(TS,{})})]})}function zf(){var x,f,g;const{tenant:t}=kn(),[s,r]=y.useState(Mo.sampleListings),[n,a]=y.useState(s),[i,l]=y.useState(""),[o,c]=y.useState("all"),[d,u]=y.useState("all"),[m,h]=y.useState([]);y.useEffect(()=>{let v=s.filter(w=>w.status==="active");if(i&&(v=v.filter(w=>w.title.toLowerCase().includes(i.toLowerCase())||w.address.toLowerCase().includes(i.toLowerCase())||w.description.toLowerCase().includes(i.toLowerCase()))),o!=="all"){const[w,k]=o.split("-").map(Number);v=v.filter(T=>k?T.rent>=w&&T.rent<=k:T.rent>=w)}d!=="all"&&(v=v.filter(w=>w.propertyType===d)),a(v)},[s,i,o,d]);const p=v=>{h(w=>w.includes(v)?w.filter(k=>k!==v):[...w,v])},b=v=>{const w=`${window.location.origin}/public/listings/${v.id}`;navigator.share?navigator.share({title:v.title,text:`Check out this rental property: ${v.title}`,url:w}):navigator.clipboard.writeText(w)},j=(v,w)=>{w==="phone"?window.open(`tel:${v.contactInfo.phone}`):window.open(`mailto:${v.contactInfo.email}?subject=Inquiry about ${v.title}`)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(wF,{children:[e.jsx("title",{children:`${n.length} Premium Properties Available - Renter Insight`}),e.jsx("meta",{name:"description",content:`Discover ${n.length} premium rental properties with an average rent of $${Math.round(averageRent).toLocaleString()}. From modern apartments to luxury condos - find your perfect home today!`}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:url",content:window.location.href}),e.jsx("meta",{property:"og:title",content:`${n.length} Premium Properties Available - Renter Insight`}),e.jsx("meta",{property:"og:description",content:`Discover ${n.length} premium rental properties with an average rent of $${Math.round(averageRent).toLocaleString()}. From modern apartments to luxury condos - find your perfect home today!`}),e.jsx("meta",{property:"og:image",content:((x=n[0])==null?void 0:x.images[0])||"https://images.pexels.com/photos/1571460/pexels-photo-1571460.jpeg?auto=compress&cs=tinysrgb&w=1200&h=630&fit=crop"}),e.jsx("meta",{property:"og:image:width",content:"1200"}),e.jsx("meta",{property:"og:image:height",content:"630"}),e.jsx("meta",{property:"og:site_name",content:"Renter Insight"}),e.jsx("meta",{property:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{property:"twitter:url",content:window.location.href}),e.jsx("meta",{property:"twitter:title",content:`${n.length} Premium Properties Available - Renter Insight`}),e.jsx("meta",{property:"twitter:description",content:`Discover ${n.length} premium rental properties with an average rent of $${Math.round(averageRent).toLocaleString()}. From modern apartments to luxury condos - find your perfect home today!`}),e.jsx("meta",{property:"twitter:image",content:((f=n[0])==null?void 0:f.images[0])||"https://images.pexels.com/photos/1571460/pexels-photo-1571460.jpeg?auto=compress&cs=tinysrgb&w=1200&h=630&fit=crop"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"RealEstateAgent",name:"Renter Insight",url:window.location.origin,description:"Premium property rental listings and management",offers:n.map(v=>({"@type":"Offer",name:v.title,description:v.description,price:v.rent,priceCurrency:"USD",availability:"InStock"}))})})]}),e.jsx("div",{className:"bg-card border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:((g=t==null?void 0:t.name)==null?void 0:g.charAt(0))||"P"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:[(t==null?void 0:t.name)||"Property"," Listings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Find your perfect rental home"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.length," properties available"]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6 space-y-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ge,{placeholder:"Search by location, property type, or keywords...",value:i,onChange:v=>l(v.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{value:o,onValueChange:c,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Price Range"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Prices"}),e.jsx(J,{value:"0-2000",children:"Under $2,000"}),e.jsx(J,{value:"2000-3000",children:"$2,000 - $3,000"}),e.jsx(J,{value:"3000-4000",children:"$3,000 - $4,000"}),e.jsx(J,{value:"4000",children:"$4,000+"})]})]}),e.jsxs(Be,{value:d,onValueChange:u,children:[e.jsx(Oe,{className:"w-40",children:e.jsx(ze,{placeholder:"Property Type"})}),e.jsxs($e,{children:[e.jsx(J,{value:"all",children:"All Types"}),e.jsx(J,{value:"apartment",children:"Apartment"}),e.jsx(J,{value:"house",children:"House"}),e.jsx(J,{value:"condo",children:"Condo"}),e.jsx(J,{value:"townhouse",children:"Townhouse"})]})]})]})]})}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vi,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria or check back later for new listings."})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(v=>e.jsxs(ee,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v.images[0],alt:v.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx(H,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:()=>p(v.id),children:e.jsx(A8,{className:`h-4 w-4 ${m.includes(v.id)?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx(H,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",onClick:()=>b(v),children:e.jsx(_c,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(Ae,{variant:v.status==="active"?"default":"secondary",className:"capitalize",children:v.status})})]}),e.jsxs(ce,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(de,{className:"text-lg line-clamp-1",children:v.title}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["$",v.rent.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"/month"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ur,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"line-clamp-1",children:v.address})]})]}),e.jsxs(te,{className:"pt-0",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(I2,{className:"h-4 w-4 mr-1"}),v.bedrooms]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D2,{className:"h-4 w-4 mr-1"}),v.bathrooms]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M2,{className:"h-4 w-4 mr-1"}),v.squareFootage," sq ft"]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:v.description}),v.amenities.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.amenities.slice(0,3).map((w,k)=>e.jsx(Ae,{variant:"outline",className:"text-xs",children:w},k)),v.amenities.length>3&&e.jsxs(Ae,{variant:"outline",className:"text-xs",children:["+",v.amenities.length-3," more"]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{size:"sm",className:"flex-1",onClick:()=>j(v,"phone"),children:[e.jsx(Gc,{className:"h-4 w-4 mr-1"}),"Call"]}),e.jsxs(H,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>j(v,"email"),children:[e.jsx(Sr,{className:"h-4 w-4 mr-1"}),"Email"]})]})]})]},v.id))})]})]})}function cQ(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Task Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage tasks and workflows across your organization"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"New Task"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx($c,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All tasks"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active tasks"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(Ir,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Recent Tasks"}),e.jsx(Ee,{children:"Your latest tasks and their status"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx($c,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No tasks found"}),e.jsx("p",{className:"mb-4",children:"Create your first task to get started"}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Create Task"]})]})})]})]})}function dQ(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Calendar & Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage appointments and schedule events"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"New Event"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Today's Events"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled today"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"This Week"}),e.jsx(zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Upcoming events"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Attendees"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total participants"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Calendar View"}),e.jsx(Ee,{children:"Manage your schedule and appointments"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Zt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No events scheduled"}),e.jsx("p",{className:"mb-4",children:"Start by creating your first event"}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Schedule Event"]})]})})]})]})}function uQ(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Contractor Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and service providers"})]}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Contractors"}),e.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Active Jobs"}),e.jsx(ma,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In progress"})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(de,{className:"text-sm font-medium",children:"Completed Jobs"}),e.jsx(_t,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),e.jsxs(ee,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Contractor Directory"}),e.jsx(Ee,{children:"Manage your network of contractors and service providers"})]}),e.jsx(te,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No contractors found"}),e.jsx("p",{className:"mb-4",children:"Add contractors to manage your service network"}),e.jsxs(H,{children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Add First Contractor"]})]})})]})]})}function mQ(){return e.jsx(L7,{defaultTheme:"light",storageKey:"renter-insight-theme",children:e.jsx(P7,{children:e.jsx(R7,{children:e.jsx(NR,{children:e.jsx(D7,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(kr,{children:[e.jsx(ot,{path:"/login",element:e.jsx(A$,{})}),e.jsx(ot,{path:"/public/listings",element:e.jsx(zf,{})}),e.jsx(ot,{path:"/public-listings/all",element:e.jsx(zf,{})}),e.jsx(ot,{path:"/public-listings/:id",element:e.jsx(zf,{})}),e.jsx(ot,{path:"/portalclient/*",element:e.jsx(SB,{})}),e.jsx(ot,{path:"/*",element:e.jsx(T$,{children:e.jsx(BM,{children:e.jsxs(kr,{children:[e.jsx(ot,{path:"/",element:e.jsx(C$,{})}),e.jsx(ot,{path:"/crm/*",element:e.jsx(_B,{})}),e.jsx(ot,{path:"/inventory/*",element:e.jsx(UB,{})}),e.jsx(ot,{path:"/land/*",element:e.jsx(KB,{})}),e.jsx(ot,{path:"/deals/*",element:e.jsx(nG,{})}),e.jsx(ot,{path:"/finance/*",element:e.jsx(lz,{})}),e.jsx(ot,{path:"/quotes/*",element:e.jsx(ZB,{})}),e.jsx(ot,{path:"/agreements/*",element:e.jsx(cG,{})}),e.jsx(ot,{path:"/service/*",element:e.jsx(pG,{})}),e.jsx(ot,{path:"/pdi/*",element:e.jsx(SY,{})}),e.jsx(ot,{path:"/delivery/*",element:e.jsx(xY,{})}),e.jsx(ot,{path:"/commissions/*",element:e.jsx(PY,{})}),e.jsx(ot,{path:"/portal/*",element:e.jsx(OY,{})}),e.jsx(ot,{path:"/invoices/*",element:e.jsx(qY,{})}),e.jsx(ot,{path:"/settings/*",element:e.jsx(ZY,{})}),e.jsx(ot,{path:"/admin/*",element:e.jsx(tQ,{})}),e.jsx(ot,{path:"/admin/settings/*",element:e.jsx(rB,{})}),e.jsx(ot,{path:"/reports/*",element:e.jsx(sQ,{})}),e.jsx(ot,{path:"/client-applications/*",element:e.jsx(oQ,{})}),e.jsx(ot,{path:"/listings/*",element:e.jsx(Aj,{})}),e.jsx(ot,{path:"/properties/*",element:e.jsx(Aj,{})}),e.jsx(ot,{path:"/warranty-mgmt",element:e.jsx(CB,{})}),e.jsx(ot,{path:"/tags/*",element:e.jsx(N$,{})}),e.jsx(ot,{path:"/tasks/*",element:e.jsx(cQ,{})}),e.jsx(ot,{path:"/calendar/*",element:e.jsx(dQ,{})}),e.jsx(ot,{path:"/contractors/*",element:e.jsx(uQ,{})}),e.jsx(ot,{path:"/listings/*",element:e.jsx(Aj,{})})]})})})}),e.jsx(ot,{path:"/public-listings/*",element:e.jsx(zf,{})})]}),e.jsx(E7,{})]})})})})})})}Ej.createRoot(document.getElementById("root")).render(e.jsx(vt.StrictMode,{children:e.jsx(W3,{children:e.jsx(mQ,{})})}));export{uz as _,Vf as c,Ho as g};
